
	var global = (function () { return this })();	if (!global && typeof GameGlobal !== 'undefined') global = GameGlobal;	var pluginInfoMap = {};	;	global.requirePlugin = global.requirePlugin || function(path) {		    var position = path.indexOf('/');    		var alias = '';    		var pagePath = '';    		if (position !== -1) {    		    alias = path.substr(0, position);    		    pagePath = path.substr(position + 1, path.length);    		}    		else {    		    alias = path;    		}    		if (pluginInfoMap.hasOwnProperty(alias)) {    		    var realPath = '';    		    if (pagePath.length === 0) {    		        realPath =  '__plugin__/' + pluginInfoMap[alias].appid;    		        return require(realPath);    		    } else {    		        realPath = '__plugin__/' + pluginInfoMap[alias].appid + '/' + pagePath;    		        return require(realPath);    		    }    		}    		else {    		    console.error('not found alias: ', alias);    		    throw new Error('Plugin ' + alias + ' is not defined.')    		}	};	define("subpackages/scripts/game.js", function(require, module, exports){ 			
window.__require=function t(e,n,o){function a(r,s){if(!n[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var u=n[r]={exports:{}};e[r][0].call(u.exports,function(t){return a(e[r][1][t]||t)},u,u.exports,t,e,n,o)}return n[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<o.length;r++)a(o[r]);return a}({ABTestManager:[function(t,e,n){"use strict";cc._RF.push(e,"f89ad5RzcJKK5V/zGRiQgkF","ABTestManager");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ABTestManager=void 0;var r=t("../Root/ManagerRoot"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._abTestMap=new Map,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return r.ManagerRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.setTestValue=function(t,e){console.log("ABTestManager.setTestValue testName:"+t+" testValue:"+e),this._abTestMap.set(t,e)},e.prototype.getTestValue=function(t){return this._abTestMap.get(t)},i([jsClass],e)}(t("./BaseManager").BaseManager);n.ABTestManager=s,cc._RF.pop()},{"../Root/ManagerRoot":"ManagerRoot","./BaseManager":"BaseManager"}],ActivityActRuleUI:[function(t,e,n){"use strict";cc._RF.push(e,"69d53tq1r9EQpLI9Kpj7eQM","ActivityActRuleUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ActivityActRuleUI=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._loaders=[],e}return a(e,t),e.getPkgName=function(){return"ActivityRuleUI"},e.getCompName=function(){return"MainPanel_ActRule"},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.view.m_Window.m_btnExit.onClick(this.onExitClick,this)},e.prototype.onExitClick=function(){this.view.m_Window.m_content.node.removeAllChildren(),this._loaders=[],t.prototype.onExitClick.call(this)},e.prototype.init=function(t){this.refreshContent(t)},e.prototype.refreshContent=function(t){this.view.m_Window.m_content.scrollPane.scrollTop(),this._loaders.forEach(function(t){t.icon=null,t.visible=!1,t.height=0,t.y=0});for(var e=20,n=0,o=t.length;n<o;++n){var a=t[n],i=this.getLoader(n);i.icon=a,i.texture&&(i.visible=!0,i.y=e,i.x=.5*(i.parent.width-i.width),e+=i.height)}this.view.m_Window.m_content.ensureBoundsCorrect()},e.prototype.getLoader=function(t){var e=this._loaders[t];return e||(e=new fgui.GLoader,this.view.m_Window.m_content.addChild(e),e.autoSize=!0,e.visible=!1,e.autoRelease=!0,this._loaders.push(e)),e},i([jsClass],e)}(t("../../Framework/UI/FadeUI").FadeUI);n.ActivityActRuleUI=r,cc._RF.pop()},{"../../Framework/UI/FadeUI":"FadeUI"}],ActivityAdPopModel:[function(t,e,n){"use strict";cc._RF.push(e,"03930/SMiNAM7UYJUt8+aOI","ActivityAdPopModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ActivityAdPopModel=void 0;var r=t("../../../Framework/Manager/CoroutineManager"),s=t("../../../Framework/Manager/EventManager"),c=t("../../../Framework/Manager/UIManager"),l=t("../../../Framework/Model/BaseModel"),u=t("../../../Framework/Root/ModelRoot"),d=t("../../Base/Data/DataClubClientConfig"),p=t("../../Base/Data/DataEvent"),h=t("../../Base/Data/DataLocalStorageKey"),_=t("../../Base/Module/Platform/PlatformManager"),f=t("../../Login/LoginModel"),m=t("../../UserInfo/UserInfoModel"),g=t("./ActivityAdPopUI"),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return u.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){s.EventManager.instance.on(p.DataEvent.EveryDayFirstLogin,this,this.firstLogin)},e.prototype.firstLogin=function(t){t&&localStorage.setItem(h.DataLocalStorage.addKeyWithNumID(h.LocalStorageKey.POP_AD_ACTIVITY),"0")},e.prototype.autoPopup=function(){var t=this;_.PlatformManager.instance.supportAct.MATCH_AND_FIREND&&m.UserInfoModel.instance.isOpenFriendTeam()&&(c.UIManager.instance.addTopCollider("autoPopup"),this._coroutine=r.CoroutineManager.instance.timeoutWait(function(){return f.LoginModel.instance.isReceiveClientConfig},1,function(){c.UIManager.instance.removeTopCollider("autoPopup"),d.DataClubClientConfig.isMatchLoginAdSwitchOpen()&&t.isShowPop()&&c.UIManager.instance.open(g.ActivityAdPopUI).then(function(t){localStorage.setItem(h.DataLocalStorage.addKeyWithNumID(h.LocalStorageKey.POP_AD_ACTIVITY),"1"),t.init()})},this))},e.prototype.stopPopup=function(){this._coroutine&&(r.CoroutineManager.instance.stopCo(this._coroutine),c.UIManager.instance.removeTopCollider("autoPopup")),this._coroutine=null,c.UIManager.instance.close(g.ActivityAdPopUI)},e.prototype.isShowPop=function(){return 0===(+localStorage.getItem(h.DataLocalStorage.addKeyWithNumID(h.LocalStorageKey.POP_AD_ACTIVITY))||0)},i([jsClass],e)}(l.BaseModel);n.ActivityAdPopModel=y,cc.systemEvent.once("GameRoot.inited",function(){u.ModelRoot.instance.add(y)}),cc._RF.pop()},{"../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/Model/BaseModel":"BaseModel","../../../Framework/Root/ModelRoot":"ModelRoot","../../Base/Data/DataClubClientConfig":"DataClubClientConfig","../../Base/Data/DataEvent":"DataEvent","../../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../../Base/Module/Platform/PlatformManager":"PlatformManager","../../Login/LoginModel":"LoginModel","../../UserInfo/UserInfoModel":"UserInfoModel","./ActivityAdPopUI":"ActivityAdPopUI"}],ActivityAdPopUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"357c9W+hYdLNppjoEjUyv2Q","ActivityAdPopUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./ActivityAdPopUI_MainPanel"),a=t("./ActivityAdPopUI_Window"),i=t("./ActivityAdPopUI_BtnSpineYellow"),r=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default)},t}();n.default=r,cc._RF.pop()},{"./ActivityAdPopUI_BtnSpineYellow":"ActivityAdPopUI_BtnSpineYellow","./ActivityAdPopUI_MainPanel":"ActivityAdPopUI_MainPanel","./ActivityAdPopUI_Window":"ActivityAdPopUI_Window"}],ActivityAdPopUI_BtnSpineYellow:[function(t,e,n){"use strict";cc._RF.push(e,"d8427/xOT1Jo4F42cSfIKhe","ActivityAdPopUI_BtnSpineYellow");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ActivityAdPopUI","BtnSpineYellow")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(1)},e.URL="ui://mjutr1v2tz274",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],ActivityAdPopUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"759e1TbwmdHOKFhb4PLGEGW","ActivityAdPopUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ActivityAdPopUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1)},e.URL="ui://mjutr1v2ret80",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ActivityAdPopUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"2e6d2rqy9BDn6IqwTjD+AwH","ActivityAdPopUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ActivityAdPopUI","Window")},e.prototype.onConstruct=function(){this.m_spineBg=this.getChildAt(0),this.m_closeBtn=this.getChildAt(1),this.m_enterGame=this.getChildAt(2)},e.URL="ui://mjutr1v2ret81",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ActivityAdPopUI:[function(t,e,n){"use strict";cc._RF.push(e,"b8ebbtsE+5EwaTRnl4YjKPW","ActivityAdPopUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ActivityAdPopUI=void 0;var r=t("../../../Framework/Manager/EventManager"),s=t("../../../Framework/UI/FadeUI"),c=t("../../Base/Data/DataEvent"),l=t("../../Base/Data/DataSpineAni"),u=t("../../Base/Utils/UtilCC"),d=t("../../Base/Module/BfAnalytics/BfasManager"),p=t("../../Base/Module/BfAnalytics/DataPointID"),h=t("../../Match/MatchModel"),_=t("../Common/ActivityComModel"),f=t("../../../Framework/Manager/CoroutineManager"),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.initListener(),this.initUI()},e.prototype.initListener=function(){this.view.m_Window.m_closeBtn.onClick(this.onExitClick,this),this.view.m_Window.m_enterGame.onClick(this.openMatchUI,this)},e.prototype.initUI=function(){d.BfasManager.instance.sendEvt(p.MatchGuidePointID.SHOW_LOGIN),this.initAni()},e.prototype.initAni=function(){var t=this;this.view.m_Window.m_closeBtn.visible=!1,this.view.m_Window.m_spineBg.node.removeAllChildren(),u.UtilCC.instantiatePrefab(l.DataSpineAniPath.ANI_MATCH_POPAD_BG,function(e){var n=e.getComponent(sp.Skeleton);n.setMix("chusheng","loop",0),n.setAnimation(0,"chusheng",!1),n.addAnimation(0,"loop",!0),f.CoroutineManager.instance.once(.1,function(){t.view.m_Window.m_closeBtn.visible=!0,t.view.m_Window.m_enterGame.m_spineNode.node.removeAllChildren(),u.UtilCC.instantiatePrefab(l.DataSpineAniPath.ANI_MATCH_POPAD_BTN,function(t){var e=t.getComponent(sp.Skeleton);e.setMix("chusheng","loop",0),e.setAnimation(0,"chusheng",!1),e.addAnimation(0,"loop",!0)},t.view.m_Window.m_enterGame.m_spineNode.node)})},this.view.m_Window.m_spineBg.node)},e.prototype.openMatchUI=function(){d.BfasManager.instance.sendEvt(p.MatchGuidePointID.CLICK_LOGIN),_.ActivityComModel.instance.checkInGame(this.onExitClick.bind(this))||(r.EventManager.instance.emit(c.DataEvent.StopManagerPop),this.onExitClick(),h.MatchModel.instance.openMatchUI({scene:h.EnterMatchSceneEnum.GUIDE}))},i([jsClass],e)}(s.FadeUI);n.ActivityAdPopUI=m,cc._RF.pop()},{"../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../Framework/Manager/EventManager":"EventManager","../../../Framework/UI/FadeUI":"FadeUI","../../Base/Data/DataEvent":"DataEvent","../../Base/Data/DataSpineAni":"DataSpineAni","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../Base/Utils/UtilCC":"UtilCC","../../Match/MatchModel":"MatchModel","../Common/ActivityComModel":"ActivityComModel"}],ActivityCenterConfig:[function(t,e){"use strict";cc._RF.push(e,"6e021+Ba4FDVpbAD1yDlRHh","ActivityCenterConfig"),cc._RF.pop()},{}],ActivityCenterModel:[function(t,e){"use strict";cc._RF.push(e,"7fc14IbtAJO0qCZ34VSyGmf","ActivityCenterModel"),cc._RF.pop()},{}],ActivityCenterProxy:[function(t,e){"use strict";cc._RF.push(e,"be169iZnxlE/4JaPVGCwMpv","ActivityCenterProxy"),cc._RF.pop()},{}],ActivityCenterUI:[function(t,e){"use strict";cc._RF.push(e,"b7286Vj/t1GZJnPhMluV3R0","ActivityCenterUI"),cc._RF.pop()},{}],ActivityComModel:[function(t,e,n){"use strict";cc._RF.push(e,"0f9c35glUtL1bvOKeGXm6FA","ActivityComModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ActivityComModel=n.CollectAwardType=void 0;var r=t("../../Base/Data/DataEvent"),s=t("../../../Framework/Manager/EventManager"),c=t("../../../Framework/Model/BaseModel"),l=t("../../../Framework/Root/ModelRoot"),u=t("./ActivityComProxy"),d=t("../../../Framework/Manager/UIManager"),p=t("../../Award/AwardModel"),h=t("../../Award/AwardUI"),_=t("../../Base/Module/BfAnalytics/BfasManager"),f=t("../../Base/Module/BfAnalytics/DataPointID"),m=t("../CollectUI/CollectProxy"),g=t("../../SignActivity/SignActivityModel"),y=t("../../LuckyTurnTable/LuckyTurnTableModel"),I=t("../../UserInfo/UserInfoModel"),C=t("../../Base/Module/Room/ClubConfig"),M=t("../../Base/View/UIHelp"),v=t("../../Base/Module/Room/RoomModel"),E=t("../../FriendTeam/FriendTeamModel"),A=t("../../Match/MatchModel");(function(t){t[t.IOS=1]="IOS",t[t.ANDROID=2]="ANDROID"})(n.CollectAwardType||(n.CollectAwardType={}));var P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return l.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return u.ActivityComProxy.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){s.EventManager.instance.on(r.DataEvent.BackHallSuccess,this,this.onBackHallSuccess),s.EventManager.instance.on(r.DataEvent.GetOpenIDSuccess,this,this.onSynOpenidSuccess)},e.prototype.onBackHallSuccess=function(){g.SignActivityModel.instance.reqSignInInfo(),y.LuckyTurnTableModel.instance.reqTurnTableData()},e.prototype.onSynOpenidSuccess=function(){g.SignActivityModel.instance.reqSignInInfo(),y.LuckyTurnTableModel.instance.reqTurnTableData()},e.prototype.awardCollecting=function(t,e){console.log("awardCollecting:",t),m.CollectProxy.instance.reqCollectAward(t,function(t){if(t.isSuccess){var n=f.ActivityPointID.collectAwardScene,o=t.isFirst?n.firstAward:n.normalAward;_.BfasManager.instance.evt(o.eventid,null,!0,o.eventName);var a=p.AwardModel.instance.getAwardsFormat({asr:t.awards.asr});d.UIManager.instance.open(h.AwardUI).then(function(t){return t.init(a)})}e&&e(t.isSuccess)})},e.prototype.checkInGame=function(t){var e=I.UserInfoModel.instance.getUserLocation();if(e&&(e.subid||C.ClubModeEnum.FRIEND_ROOM===e.clubmode))return M.UIHelp.instance.showDialogConfirmCancel("\u60a8\u5df2\u5728\u5176\u4ed6\u623f\u95f4\u6e38\u620f\uff0c\u662f\u5426\u524d\u5f80?",function(e){e&&(s.EventManager.instance.emit(r.DataEvent.StopManagerPop),t&&t(),v.RoomModel.instance.haveRoomBackGame())}),!0;var n=I.UserInfoModel.instance.getPartnerLocation();return n?(M.UIHelp.instance.showDialogConfirmCancel("\u60a8\u5df2\u5728\u961f\u4f0d\u91cc\uff0c\u662f\u5426\u8fd4\u56de\u961f\u4f0d\uff1f",function(e){e&&(s.EventManager.instance.emit(r.DataEvent.StopManagerPop),t&&t(),E.FriendTeamModel.instance.joinTeam(n.partnerid,n.partnertype))}),!0):A.MatchModel.instance.getMatchLocationAppID()>0&&(M.UIHelp.instance.showDialogMore({content:"\u60a8\u8fd8\u6709\u6bd4\u8d5b\u672a\u7ed3\u675f\uff0c\u8bf7\u5148\u8fd4\u56de\u5b8c\u6210\u5bf9\u5c40~"},function(){s.EventManager.instance.emit(r.DataEvent.StopManagerPop),t&&t();var e=A.MatchModel.instance.getMatchLocation();A.MatchModel.instance.relinkMatch(e.appid,e.matchid,e.matchsubid)}),!0)},i([jsClass],e)}(c.BaseModel);n.ActivityComModel=P,cc.systemEvent.once("GameRoot.inited",function(){l.ModelRoot.instance.add(P)}),cc._RF.pop()},{"../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/Model/BaseModel":"BaseModel","../../../Framework/Root/ModelRoot":"ModelRoot","../../Award/AwardModel":"AwardModel","../../Award/AwardUI":"AwardUI","../../Base/Data/DataEvent":"DataEvent","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../Base/Module/Room/ClubConfig":"ClubConfig","../../Base/Module/Room/RoomModel":"RoomModel","../../Base/View/UIHelp":"UIHelp","../../FriendTeam/FriendTeamModel":"FriendTeamModel","../../LuckyTurnTable/LuckyTurnTableModel":"LuckyTurnTableModel","../../Match/MatchModel":"MatchModel","../../SignActivity/SignActivityModel":"SignActivityModel","../../UserInfo/UserInfoModel":"UserInfoModel","../CollectUI/CollectProxy":"CollectProxy","./ActivityComProxy":"ActivityComProxy"}],ActivityComProxy:[function(t,e,n){"use strict";cc._RF.push(e,"656cc0vguRPVreIa3rgIx9/","ActivityComProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ActivityComProxy=void 0;var r=t("../../../Framework/Proxy/BaseProxy"),s=t("../../../Framework/Root/ProxyRoot"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return s.ProxyRoot.instance.get(this)},enumerable:!1,configurable:!0}),i([jsClass],e)}(r.BaseProxy);n.ActivityComProxy=c,cc.systemEvent.once("GameRoot.inited",function(){s.ProxyRoot.instance.add(c)}),cc._RF.pop()},{"../../../Framework/Proxy/BaseProxy":"BaseProxy","../../../Framework/Root/ProxyRoot":"ProxyRoot"}],ActivityConfig:[function(t,e,n){"use strict";cc._RF.push(e,"72b69wQJTJO9rWw0mCTVP+v","ActivityConfig");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function r(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ActivityConfig=void 0;var s=t("../../../Framework/Utils/HttpUtil"),c=t("../../Base/Data/DataBfConfig"),l=t("../../Base/Data/DataConstant"),u=t("../../Base/Utils/UtilTool"),d=t("../../UserInfo/UserInfoModel"),p=function(){function t(){}var e;return e=t,Object.defineProperty(t,"activityConfigData",{get:function(){return e.filterHideActivity(),e._activityConfigData},enumerable:!1,configurable:!0}),t.filterHideActivity=function(){d.UserInfoModel.instance.isOpenFriendTeam()||this.deleteHideActivity("goFriendTeam")},t.deleteHideActivity=function(t){for(var n=e._activityConfigData.activity,o=0;o<n.length;o++)if(t===n[o].localKey){n.splice(o,1);break}},t.updateActivityConfig=function(){var t=this,n=c.DataBfConfig.isNormalEnv()?"":"Test";e.reqCloudConfig("ActiveConfig"+n).then(function(e){var n,o;if(console.log(">>updateActivityConfig:",e),e&&(u.UtilTool.setData(t._activityConfigData.update,e.update),t._activityConfigData.activity&&e.activity)){var a=function(t){var n=e.activity.find(function(e){return e.localKey===t.localKey});n&&(t.showDate=n.showDate)};try{for(var i=r(t._activityConfigData.activity),s=i.next();!s.done;s=i.next())a(s.value)}catch(c){n={error:c}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}}},function(t){return console.error(t)})},t.reqCloudConfig=function(t){return a(this,void 0,Promise,function(){return i(this,function(e){switch(e.label){case 0:return[4,s.HttpUtil.get(l.DataConstant.RES_PATH.CONFIG+"/"+t+".json")];case 1:return[2,e.sent()]}})})},t._activityConfigData={firstShowTab:"activity",activity:[{localKey:"goMatch",sort:0,red:!0,c_showContent:0,showDate:"20211215-20991108",func:"openMatchUI",showGoBtn_ctrl:5,name:"\u5168\u65b0\u6bd4\u8d5b\u4e0a\u7ebf"},{localKey:"goMatchEgg",sort:1,red:!0,c_showContent:0,showDate:"20211215-20221108",func:"openMatchUI",showGoBtn_ctrl:5,name:"\u91d1\u86cb\u6765\u4e86"},{localKey:"goFriendTeam",sort:2,red:!0,c_showContent:0,showDate:"20221001-20991108",func:"openTeamUI",showGoBtn_ctrl:2,name:"\u53cc\u6a21\u5f0f\u7ec4\u961f"}],announcement:[{localKey:"banbengengxin",sort:1,red:!0,c_showContent:2,showDate:"20211108-20991108",func:"onBtnSubscribe",name:"\u7248\u672c\u66f4\u65b0"}],update:{title:"\u8d34\u5fc3\u5c0f\u7ec4\u4ef6\u4e0a\u7ebf\u4e86",desc:"\u300a\u63bc\u86cb\u300b\u5c06\u4e8e2\u67087\u65e59\uff1a00\u66f4\u65b0\uff0c\u672c\u6b21\u66f4\u65b0\u7684\u5185\u5bb9\u6709\uff1a\n1.\u63bc\u86cb\u7ffb\u500d\u573a\u73a9\u6cd5\u70b8\u5f39\u500d\u6570\u8c03\u6574\u4e3a\uff1a\n\u56db\u70b8\xd72-\u4e94\u70b8(\u540c\u82b1\u987a)\xd73-\u516d/\u4e03\u70b8\xd75-\u516b~\u5341\u70b8\xd78-\u5929\u738b\u70b8\xd710\n2.\u63bc\u86cb\u7ffb\u500d\u573a\u5c01\u9876\u8f93\u8d62\u8c03\u6574\u4e3a\uff1a\n\u521d\u7ea7\u573a20\u4e07-\u4e2d\u7ea7\u573a100\u4e07-\u9ad8\u7ea7\u573a500\u4e07-\u5927\u5e08\u573a3000\u4e07\u3002\n3.\u63bc\u86cb\u7ffb\u500d\u573a\u624b\u7eed\u8d39\u8c03\u6574\uff0c\u5177\u4f53\u4ee5\u6e38\u620f\u5185\u4e3a\u51c6\u3002"},subscriptionWhiteListArr:[]},e=o([jsClass],t)}();n.ActivityConfig=p,cc._RF.pop()},{"../../../Framework/Utils/HttpUtil":"HttpUtil","../../Base/Data/DataBfConfig":"DataBfConfig","../../Base/Data/DataConstant":"DataConstant","../../Base/Utils/UtilTool":"UtilTool","../../UserInfo/UserInfoModel":"UserInfoModel"}],ActivityModel:[function(t,e,n){"use strict";cc._RF.push(e,"2ed21KGsAdNeLsdLYxeed5I","ActivityModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ActivityModel=void 0;var r,s=t("../../../Framework/Manager/EventManager"),c=t("../../../Framework/Manager/UIManager"),l=t("../../../Framework/Model/BaseModel"),u=t("../../../Framework/Root/ModelRoot"),d=t("../../Base/Data/DataEvent"),p=t("../../Base/Module/BfAnalytics/BfasManager"),h=t("../../Base/Module/BfAnalytics/DataPointID"),_=t("../../Base/Utils/UtilTime"),f=t("../../Base/Module/Platform/PlatformManager"),m=t("../../Base/Module/Platform/_IPlatform"),g=t("../../UserInfo/UserInfoModel"),y=t("./ActivityConfig"),I=t("./ActivityUI"),C=t("../../FriendTeam/FriendTeamModel");(function(t){t.GOLD_FRIEND_TEAM="goFriendTeam"})(r||(r={}));var M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._FOREVER_SHOW="1",e._UPADTE_CONTENT_KEY="banbengengxin",e._activityRedCount=0,e._announcementRedCount=0,e._isFirstLogin=!1,e._subscriptionStatus=m.WhatsNewSubscriptionsStatusEnum.CAN_SUBSCRIBE,e._tab1KeysList={activity:"activity",announcement:"announcement"},e._activityConfigData=null,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return u.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.autoPopup=function(){f.PlatformManager.instance.supportAct.ACTIVITY_CENTER&&!c.UIManager.instance.isExist(I.ActivityUI)&&this.showHallActivityRed()&&c.UIManager.instance.open(I.ActivityUI).then(function(t){t.init()})},e.prototype.stopPopup=function(){c.UIManager.instance.close(I.ActivityUI)},e.prototype.onLoad=function(){y.ActivityConfig.updateActivityConfig(),this.initData(),this.initListener()},e.prototype.initData=function(){this.checkSubscriptionsStatus()},e.prototype.initListener=function(){s.EventManager.instance.on(d.DataEvent.EveryDayFirstLogin,this,this.firstLogin)},e.prototype.checkSubscriptionsStatus=function(){var t=this;f.PlatformManager.instance.platform.canWhatNewSubscribe?f.PlatformManager.instance.platform.getWhatsNewSubscriptionsSetting(function(e,n){e&&(t._subscriptionStatus=n)}):this._subscriptionStatus=m.WhatsNewSubscriptionsStatusEnum.SUBSCRIBE_OK},e.prototype.firstLogin=function(t){this._isFirstLogin=t,this._activityConfigData=y.ActivityConfig.activityConfigData,this.filterData()},e.prototype.filterData=function(){var t=this._isFirstLogin,e=Number(_.UtilTime.getCurrDate()),n={activity:null,announcement:null};for(var o in this._activityRedCount=0,this._announcementRedCount=0,this._tab1KeysList){var a=this._activityConfigData[o];a.sort(function(t,e){return t.sort-e.sort});for(var i=0;i<a.length;)if("object"==typeof(u=a[i]))if(this.isShowDate(u.showDate,e)){if(t){var r=o+"_"+u.localKey;localStorage.setItem(r,"0")}u.firstShow=!1;var c=u.red;if(u.red&&(c=this.isShowBtnRed(u.localKey,o)),c&&(this._tab1KeysList.activity===o?++this._activityRedCount:this._tab1KeysList.announcement===o&&++this._announcementRedCount),n[o]){var l=n[o];(c&&!l.redTemp||u.sort<l.sort)&&(n[o]=u,u.redTemp=c)}else n[o]=u,u.redTemp=c;i++}else a.splice(i,1)}for(var o in n){var u;(u=n[o])&&(u.firstShow=!0)}s.EventManager.instance.emit(d.DataEvent.HallActivityRedStatus)},e.prototype.isShowDate=function(t,e){if(this._FOREVER_SHOW===t)return!0;if(t.indexOf("-")>=0){var n=t.split("-"),o=Number(n[0]),a=Number(n[1]);if(o<=e&&e<=a)return!0}return!1},e.prototype.isShowBtnRed=function(t,e){return t=e+"_"+t,!localStorage.getItem(t)||0===Number(localStorage.getItem(t))},e.prototype.getActivityConfigWithFirstShowList=function(){return this.filterData(),this._isFirstLogin=!1,this._activityConfigData},e.prototype.showTab1ActivityRed=function(){return this._activityRedCount>0},e.prototype.showTab1AnnouncementRed=function(){return this._announcementRedCount>0},e.prototype.saveClickActivityBtnCount=function(t,e){t=e+"_"+t;var n=0;localStorage.getItem(t)&&"0"!==localStorage.getItem(t)?(n=Number(localStorage.getItem(t)),++n):(this._tab1KeysList.activity===e?--this._activityRedCount:this._tab1KeysList.announcement===e&&--this._announcementRedCount,n=1,s.EventManager.instance.emit(d.DataEvent.HallActivityRedStatus)),localStorage.setItem(t,""+n)},e.prototype.reportPoint=function(t,e){var n=h.ActivityPointID.activityUI;r.GOLD_FRIEND_TEAM===t&&(e?p.BfasManager.instance.sendEvt(n.activityUIGoFriendTeamUI,C.FriendTeamModel.instance.bfasParamUserType):p.BfasManager.instance.sendEvt(n.showFriendTeamUI,C.FriendTeamModel.instance.bfasParamUserType))},e.prototype.isUpdateContent=function(t){return this._UPADTE_CONTENT_KEY===t},e.prototype.clickSubscriptions=function(t){var e=this;f.PlatformManager.instance.platform.requestSubscribeWhatsNew(function(n,o){n?(s.EventManager.instance.emit(d.DataEvent.ToastData,"\u8ba2\u9605\u6210\u529f!"),e._subscriptionStatus=m.WhatsNewSubscriptionsStatusEnum.SUBSCRIBE_OK,t&&t()):m.WhatsNewSubscriptionsErrorEnum.USER_SUBSCRIBED===o?s.EventManager.instance.emit(d.DataEvent.ToastData,"\u5df2\u7ecf\u8ba2\u9605!"):s.EventManager.instance.emit(d.DataEvent.ToastData,"\u8ba2\u9605\u5931\u8d25!")})},e.prototype.isSubscriptions=function(){var t=this._activityConfigData.subscriptionWhiteListArr;return t&&t.length>0&&!(t.indexOf(g.UserInfoModel.instance.userInfo.numID)>=0)||m.WhatsNewSubscriptionsStatusEnum.SUBSCRIBE_OK===this._subscriptionStatus},e.prototype.getActivityConfigList=function(){return this._activityConfigData},e.prototype.showHallActivityRed=function(){return this._activityRedCount+this._announcementRedCount>0},e.prototype.updateDateByKey=function(t,e,n){if(this._activityConfigData&&this._activityConfigData.activity){var o=this._activityConfigData.activity.find(function(e){return e.localKey==t});o&&(o.showDate=new Date(1e3*e).toCustomString("yyyyMMdd")+"-"+new Date(1e3*n).toCustomString("yyyyMMdd"))}},i([jsClass],e)}(l.BaseModel);n.ActivityModel=M,cc.systemEvent.once("GameRoot.inited",function(){u.ModelRoot.instance.add(M)}),cc._RF.pop()},{"../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/Model/BaseModel":"BaseModel","../../../Framework/Root/ModelRoot":"ModelRoot","../../Base/Data/DataEvent":"DataEvent","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../Base/Module/Platform/PlatformManager":"PlatformManager","../../Base/Module/Platform/_IPlatform":"_IPlatform","../../Base/Utils/UtilTime":"UtilTime","../../FriendTeam/FriendTeamModel":"FriendTeamModel","../../UserInfo/UserInfoModel":"UserInfoModel","./ActivityConfig":"ActivityConfig","./ActivityUI":"ActivityUI"}],ActivityRuleUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"833e9oAvY9HXYTvgQyrp6fP","ActivityRuleUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./ActivityRuleUI_MainPanel"),a=t("./ActivityRuleUI_Window"),i=t("./ActivityRuleUI_MainPanel_ActRule"),r=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default)},t}();n.default=r,cc._RF.pop()},{"./ActivityRuleUI_MainPanel":"ActivityRuleUI_MainPanel","./ActivityRuleUI_MainPanel_ActRule":"ActivityRuleUI_MainPanel_ActRule","./ActivityRuleUI_Window":"ActivityRuleUI_Window"}],ActivityRuleUI_MainPanel_ActRule:[function(t,e,n){"use strict";cc._RF.push(e,"71472WsZfdBB4wMAIdv/ZLi","ActivityRuleUI_MainPanel_ActRule");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ActivityRuleUI","MainPanel_ActRule")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://optzcg18qni711",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ActivityRuleUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"4bbcd8H0BNHWqlxN2yxhU9g","ActivityRuleUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ActivityRuleUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://optzcg18lzazy",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ActivityRuleUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"f3895PB39dG2Y05Zb7F9Xah","ActivityRuleUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ActivityRuleUI","Window")},e.prototype.onConstruct=function(){this.m_btnExit=this.getChildAt(1),this.m_content=this.getChildAt(2)},e.URL="ui://optzcg18lzazz",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ActivityRuleUI:[function(t,e,n){"use strict";cc._RF.push(e,"c746ehyfyZEOYsKYkMelfH0","ActivityRuleUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.ActivityRuleUI=void 0;var s=t("../../Framework/UI/FadeUI"),c=t("../../Framework/Manager/CoroutineManager"),l=t("../Base/Data/DataConstant"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._loaders=[],e}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.view.m_Window.m_btnExit.onClick(this.onExitClick,this)},e.prototype.init=function(t){this.refreshContent(t)},e.prototype.refreshContent=function(t){this._refreshCo&&c.CoroutineManager.instance.stopCo(this._refreshCo),this._refreshCo=c.CoroutineManager.instance.startCo(this.doRefreshContent(t),this)},e.prototype.doRefreshContent=function(t){var e,n,o,a,i,s;return r(this,function(u){switch(u.label){case 0:this.view.m_Window.m_content.scrollPane.scrollTop(),this._loaders.forEach(function(t){t.icon=null,t.visible=!1,t.height=0,t.y=0}),cc.assetManager.loadRemote(l.DataConstant.RES_PATH.ACTIVITY+"/rule/"+t+".json",function(t,n){var o;e=(null===(o=null==n?void 0:n.json)||void 0===o?void 0:o.list)||[]}),u.label=1;case 1:return e?[3,3]:[4,null];case 2:return u.sent(),[3,1];case 3:n=0,o=function(t){var o,i;return r(this,function(r){switch(r.label){case 0:return o=l.DataConstant.RES_PATH.ACTIVITY+"/rule/"+e[t],(i=a.getLoader(t)).icon=o,[4,c.CoroutineManager.instance.wait(function(){return!i.loadingExternal},function(){},a)];case 1:return r.sent(),i.texture&&(i.visible=!0,i.y=n,i.x=.5*(i.parent.width-i.width),n+=i.height),[2]}})},a=this,i=0,s=e.length,u.label=4;case 4:return i<s?[5,o(i,s)]:[3,7];case 5:u.sent(),u.label=6;case 6:return++i,[3,4];case 7:return this.view.m_Window.m_content.ensureBoundsCorrect(),this._refreshCo=null,[2]}})},e.prototype.getLoader=function(t){var e=this._loaders[t];return e||(e=new fgui.GLoader,this.view.m_Window.m_content.addChild(e),e.autoSize=!0,e.visible=!1,e.autoRelease=!0,this._loaders.push(e)),e},i([jsClass],e)}(s.FadeUI);n.ActivityRuleUI=u,cc._RF.pop()},{"../../Framework/Manager/CoroutineManager":"CoroutineManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataConstant":"DataConstant"}],ActivityShareModel:[function(t,e,n){"use strict";cc._RF.push(e,"a0017XIbptEO4dJavkw8jdT","ActivityShareModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ActivityShareModel=void 0;var r=t("../../../Framework/Manager/CoroutineManager"),s=t("../../../Framework/Manager/EventManager"),c=t("../../../Framework/Manager/UIManager"),l=t("../../../Framework/Model/BaseModel"),u=t("../../../Framework/Root/ModelRoot"),d=t("../../Base/Data/DataEvent"),p=t("../../Base/Data/DataLocalStorageKey"),h=t("../../Base/Utils/UtilTime"),_=t("../../Base/Module/Platform/PlatformManager"),f=t("../../UserInfo/UserInfoModel"),m=t("./ActivityShareProxy"),g=t("./ActivityShareUI"),y=t("../../Base/Module/BfAnalytics/BfasManager"),I=t("../../Base/Module/BfAnalytics/DataPointID"),C=t("../../Award/AwardModel"),M=t("../../Award/AwardUI"),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._hallShareConfig=null,e._requestTime=0,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return u.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return m.ActivityShareProxy.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hallShareConfig",{get:function(){return this._hallShareConfig},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){s.EventManager.instance.on(d.DataEvent.JoinAwardListener,this,this.onJoinAwardListener)},e.prototype.onJoinAwardListener=function(){this.reqHallShareInfo()},e.prototype.reqHallShareInfo=function(t){var e=this;this.proxy.reqHallShareInfo(function(n,o){n&&(e._requestTime=Date.now(),e._hallShareConfig=o,s.EventManager.instance.emit(d.DataEvent.ActivityShareDataUpdate)),t&&t(n)})},e.prototype.awardAppShowByShare=function(t,e,n){if(t===f.UserInfoModel.instance.userInfo.numID){var o=Date.now();if(o>e+36e5)return s.EventManager.instance.emit(d.DataEvent.ToastData,"\u5206\u4eab\u5df2\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u5206\u4eab\u5e76\u70b9\u51fb\u94fe\u63a5\u83b7\u53d6\u91d1\u5e01\u5956\u52b1\u3002"),void(n&&n(!1));var a=p.DataLocalStorage.getJson([p.LocalStorageKey.HALL_SHARE_AWARDED]);a[e]?n&&n(!1):(Object.keys(a).forEach(function(t){return o>a[t]+36e5&&delete a[t]}),a[e]=e,p.DataLocalStorage.setJson(p.LocalStorageKey.HALL_SHARE_AWARDED,a),this.reqJoinGameByShare(n))}else n&&n(!1)},e.prototype.reqJoinGameByShare=function(t){var e=this;this.proxy.reqJoinGameByShare(function(n,o){if(n){y.BfasManager.instance.sendEvt(I.ActivityPointID.shareAwardScene.awardFromLink);var a=C.AwardModel.instance.getAwardsFormat({asr:o});c.UIManager.instance.open(M.AwardUI).then(function(t){t.init(a)}),e.reqHallShareInfo()}t&&t(n)})},e.prototype.openActivityShareUI=function(){h.UtilTime.isTodayDate(this._requestTime)?c.UIManager.instance.open(g.ActivityShareUI):this.reqHallShareInfo(function(t){t?c.UIManager.instance.open(g.ActivityShareUI):s.EventManager.instance.emit(d.DataEvent.ToastData,"\u6d3b\u52a8\u914d\u7f6e\u62c9\u53d6\u5931\u8d25,\u8bf7\u91cd\u65b0\u62c9\u53d6~")})},e.prototype.autoPopup=function(){var t=this;_.PlatformManager.instance.supportAct.SHARE_HAVE_GIFT&&(c.UIManager.instance.addTopCollider("autoPopup"),this._coroutine=r.CoroutineManager.instance.timeoutWait(function(){return null!==t.hallShareConfig},1,function(){c.UIManager.instance.removeTopCollider("autoPopup"),t.hallShareConfig.shareJoinLimit>t.hallShareConfig.shareJoinCnt&&c.UIManager.instance.open(g.ActivityShareUI)},this))},e.prototype.stopPopup=function(){this._coroutine&&(r.CoroutineManager.instance.stopCo(this._coroutine),c.UIManager.instance.removeTopCollider("autoPopup")),this._coroutine=null,c.UIManager.instance.close(g.ActivityShareUI)},i([jsClass],e)}(l.BaseModel);n.ActivityShareModel=v,cc.systemEvent.once("GameRoot.inited",function(){u.ModelRoot.instance.add(v)}),cc._RF.pop()},{"../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/Model/BaseModel":"BaseModel","../../../Framework/Root/ModelRoot":"ModelRoot","../../Award/AwardModel":"AwardModel","../../Award/AwardUI":"AwardUI","../../Base/Data/DataEvent":"DataEvent","../../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../Base/Module/Platform/PlatformManager":"PlatformManager","../../Base/Utils/UtilTime":"UtilTime","../../UserInfo/UserInfoModel":"UserInfoModel","./ActivityShareProxy":"ActivityShareProxy","./ActivityShareUI":"ActivityShareUI"}],ActivityShareProxy:[function(t,e,n){"use strict";cc._RF.push(e,"fd921vhrrZJzbW0BAGR6eZ7","ActivityShareProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ActivityShareProxy=void 0;var r=t("../../../Framework/Proxy/BaseProxy"),s=t("../../../Framework/Root/ProxyRoot"),c=t("../../Base/Data/DataBfConfig"),l=t("../../Base/Data/DataScript"),u=t("../../Base/Module/Network/protocol/AwardProtocol"),d=t("../../Base/Module/Network/SocketUtils"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return s.ProxyRoot.instance.get(n)},enumerable:!1,configurable:!0}),e.prototype.reqHallShareInfo=function(t){var e=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.hallShareAward.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("mini=1;func="+l.DataScript.hallShareAward.func.query+";")});d.SocketUtils.instance.request(e,function(e){if(0==e.flag){var n=bf33.Utils.bytesToString(e.msg).split("|")||[];if(console.log(">>reqHallShareInfo.decode:",n),0===Number(n[0])){var o={shareCnt:Number(n[1]),shareAwardCnt:Number(n[2]),shareJoinCnt:Number(n[3]),shareAwardLimit:Number(n[4]),shareJoinLimit:Number(n[5]),shareAward:JSON.parse(n[6]).asr,shareJoinAward:JSON.parse(n[7]).asr};t&&t(!0,o)}}else console.error("reqHallShareInfo error",e.flag)})},e.prototype.reqJoinGameByShare=function(t){var e=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.hallShareAward.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("mini=1;func="+l.DataScript.hallShareAward.func.getJoinAward)});d.SocketUtils.instance.request(e,function(e){if(0===e.flag){var n=bf33.Utils.bytesToString(e.msg).split("|")||[];console.log("respJoinGameByShare.decode: ",n),0===Number(n[0])&&t&&t(!0,JSON.parse(n[2]).asr)}else console.error("respJoinGameByShare error: ",e.flag)})},n=i([jsClass],e)}(r.BaseProxy);n.ActivityShareProxy=p,cc.systemEvent.once("GameRoot.inited",function(){s.ProxyRoot.instance.add(p)}),cc._RF.pop()},{"../../../Framework/Proxy/BaseProxy":"BaseProxy","../../../Framework/Root/ProxyRoot":"ProxyRoot","../../Base/Data/DataBfConfig":"DataBfConfig","../../Base/Data/DataScript":"DataScript","../../Base/Module/Network/SocketUtils":"SocketUtils","../../Base/Module/Network/protocol/AwardProtocol":"AwardProtocol"}],ActivityShareUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"2bd17s/uKBFKbizJv966PZn","ActivityShareUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./ActivityShareUI_MainPanel"),a=t("./ActivityShareUI_Window"),i=t("./ActivityShareUI_BtnSpineYellow"),r=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default)},t}();n.default=r,cc._RF.pop()},{"./ActivityShareUI_BtnSpineYellow":"ActivityShareUI_BtnSpineYellow","./ActivityShareUI_MainPanel":"ActivityShareUI_MainPanel","./ActivityShareUI_Window":"ActivityShareUI_Window"}],ActivityShareUI_BtnSpineYellow:[function(t,e,n){"use strict";cc._RF.push(e,"bd694pW87lJ5bd/Cio6GWWZ","ActivityShareUI_BtnSpineYellow");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ActivityShareUI","BtnSpineYellow")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(0),this.m_t0=this.getTransitionAt(0)},e.URL="ui://oqovqs6jlq76y",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],ActivityShareUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"d7792PJ5qJE27hurxmMhfqe","ActivityShareUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ActivityShareUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://oqovqs6jkzi00",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ActivityShareUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"451a1E7tpBNGoXLyG+lOlNR","ActivityShareUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ActivityShareUI","Window")},e.prototype.onConstruct=function(){this.m_cStatus=this.getControllerAt(0),this.m_spineNode=this.getChildAt(0),this.m_btnShare=this.getChildAt(1),this.m_btnClose=this.getChildAt(3),this.m_txtLeftTime=this.getChildAt(4),this.m_txtJoinAward=this.getChildAt(5),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://oqovqs6jkzi04",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ActivityShareUI:[function(t,e,n){"use strict";cc._RF.push(e,"f9ffev4GBFGTIrGK3XJrHw3","ActivityShareUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ActivityShareUI=void 0;var r=t("../../../Framework/Manager/EventManager"),s=t("../../../Framework/UI/FadeUI"),c=t("../../Base/Data/DataEvent"),l=t("../../Base/Data/DataSpineAni"),u=t("../../Base/Module/BfAnalytics/BfasManager"),d=t("../../Base/Module/BfAnalytics/DataPointID"),p=t("../../Base/Module/Share/ShareManager"),h=t("./ActivityShareModel"),_=t("../../Base/Utils/UtilCC"),f=t("../../../Framework/Manager/CoroutineManager"),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return h.ActivityShareModel.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hallShareConfig",{get:function(){return this.mode.hallShareConfig},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initUI()},e.prototype.initListener=function(){r.EventManager.instance.on(c.DataEvent.ActivityShareDataUpdate,this,this.updateUI),this.view.m_Window.m_btnClose.onClick(this.onClickClose,this),this.view.m_Window.m_btnShare.onClick(this.onClickShare,this)},e.prototype.initUI=function(){this.initSpine(),this.updateUI(),u.BfasManager.instance.sendEvt(d.ActivityPointID.shareAwardScene.show)},e.prototype.initSpine=function(){_.UtilCC.instantiatePrefab(l.DataSpineAniPath.Ani_ActivityShare,function(t){var e=t.getComponent(sp.Skeleton);e.setCompleteListener(function(t){"chusheng"===(t.animation?t.animation.name:"")&&e.setAnimation(0,"loop",!0)}),e.setAnimation(0,"chusheng",!1)},this.view.m_Window.m_spineNode.node)},e.prototype.updateUI=function(){var t=this;this.view.m_Window.m_txtJoinAward.text="\u5206\u4eab\u540e1\u5c0f\u65f6\u5185\u70b9\u51fb\u94fe\u63a5\u8fdb\u5165\u6e38\u620f\uff0c\u83b7\u5f97[size=32][color=#D50804]"+this.hallShareConfig.shareJoinAward+"\u91d1\u5e01[/color][/size]";var e=this.hallShareConfig.shareJoinLimit-this.hallShareConfig.shareJoinCnt;if(this.view.m_Window.m_txtLeftTime.text="\u5f53\u524d\u5269\u4f59[size=28][color=#FFFB9C]"+e+"\u6b21[/color][/size]",this.view.m_Window.m_cStatus.selectedIndex=e>0?0:1,e>0){if(this.view.m_Window.m_btnShare.m_spineNode.node.childrenCount>0)return;this.stopCoroutine(),this._coroutine=f.CoroutineManager.instance.once(.2,function(){t.addShareBtnSpine(),t._coroutine=null},this)}else this.stopCoroutine(),this.view.m_Window.m_btnShare.m_spineNode.node.removeAllChildren()},e.prototype.addShareBtnSpine=function(){var t=this;_.UtilCC.instantiatePrefab(l.DataSpineAniPath.ANI_BTN_YELLOW2,function(e){var n=e;n.getComponent(sp.Skeleton).setCompleteListener(function(e){"chusheng"===(e.animation?e.animation.name:"")&&t.setSpineAnim(n,"loop",!0)}),t.setSpineAnim(e,"chusheng",!1)},this.view.m_Window.m_btnShare.m_spineNode.node)},e.prototype.setSpineAnim=function(t,e,n){t.getComponent(sp.Skeleton).setAnimation(0,e,n)},e.prototype.onClickClose=function(){this.onExitClick(),u.BfasManager.instance.sendEvt(d.ActivityPointID.shareAwardScene.clickClose)},e.prototype.onClickShare=function(){u.BfasManager.instance.sendEvt(d.ActivityPointID.shareAwardScene.clickShare),p.ShareManager.instance.share(p.ShareType.hallShare)},e.prototype.stopCoroutine=function(){this._coroutine&&f.CoroutineManager.instance.stopCo(this._coroutine),this._coroutine=null},e.prototype.onDestroy=function(){this.stopCoroutine(),_.UtilCC.releasePrefabAsset(l.DataSpineAniPath.ANI_BTN_YELLOW2),_.UtilCC.releasePrefabAsset(l.DataSpineAniPath.Ani_ActivityShare),t.prototype.onDestroy.call(this)},i([jsClass],e)}(s.FadeUI);n.ActivityShareUI=m,cc._RF.pop()},{"../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../Framework/Manager/EventManager":"EventManager","../../../Framework/UI/FadeUI":"FadeUI","../../Base/Data/DataEvent":"DataEvent","../../Base/Data/DataSpineAni":"DataSpineAni","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../Base/Module/Share/ShareManager":"ShareManager","../../Base/Utils/UtilCC":"UtilCC","./ActivityShareModel":"ActivityShareModel"}],ActivityUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"3c16bwW9j1LwJ59WvHr5FF7","ActivityUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./ActivityUI_MainPanel"),a=t("./ActivityUI_Window"),i=t("./ActivityUI_TapBtn2"),r=t("./ActivityUI_TapBtn1"),s=t("./ActivityUI_contentComp"),c=t("./ActivityUI_subscribeComp"),l=t("./ActivityUI_CompDesc"),u=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default),fgui.UIObjectFactory.setExtension(l.default.URL,l.default)},t}();n.default=u,cc._RF.pop()},{"./ActivityUI_CompDesc":"ActivityUI_CompDesc","./ActivityUI_MainPanel":"ActivityUI_MainPanel","./ActivityUI_TapBtn1":"ActivityUI_TapBtn1","./ActivityUI_TapBtn2":"ActivityUI_TapBtn2","./ActivityUI_Window":"ActivityUI_Window","./ActivityUI_contentComp":"ActivityUI_contentComp","./ActivityUI_subscribeComp":"ActivityUI_subscribeComp"}],ActivityUI_CompDesc:[function(t,e,n){"use strict";cc._RF.push(e,"0754dOcX25LMqgETIASZfgD","ActivityUI_CompDesc");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ActivityUI","CompDesc")},e.prototype.onConstruct=function(){this.m_txtContent=this.getChildAt(0)},e.URL="ui://ds1lhsg0rqqu1s",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ActivityUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"55211UuLcNBT6NiZoP/XdUD","ActivityUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ActivityUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://ds1lhsg0nbki0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ActivityUI_TapBtn1:[function(t,e,n){"use strict";cc._RF.push(e,"d278eB8LcxOrIGa2vW6wzcY","ActivityUI_TapBtn1");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ActivityUI","TapBtn1")},e.prototype.onConstruct=function(){this.m_selected=this.getChildAt(0),this.m_unSelected=this.getChildAt(1),this.m_red=this.getChildAt(2)},e.URL="ui://ds1lhsg0nbkic",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],ActivityUI_TapBtn2:[function(t,e,n){"use strict";cc._RF.push(e,"fbfd8J+f/RI5bhVSSrqBPaD","ActivityUI_TapBtn2");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ActivityUI","TapBtn2")},e.prototype.onConstruct=function(){this.m_red=this.getChildAt(2)},e.URL="ui://ds1lhsg0nbki7",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],ActivityUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"aa697bJfSJCpr6b/ZyF5ZzH","ActivityUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ActivityUI","Window")},e.prototype.onConstruct=function(){this.m_c_tap1=this.getControllerAt(0),this.m_c_showContent=this.getControllerAt(1),this.m_btnClose=this.getChildAt(4),this.m_tap2BtnPanel=this.getChildAt(5),this.m_btnActivityTab=this.getChildAt(7),this.m_btnAnnouncementTab=this.getChildAt(8),this.m_contentUI=this.getChildAt(9),this.m_subscribeUI=this.getChildAt(10)},e.URL="ui://ds1lhsg0nbki1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ActivityUI_contentComp:[function(t,e,n){"use strict";cc._RF.push(e,"d596eVW599Mko65LJV8LwyJ","ActivityUI_contentComp");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ActivityUI","contentComp")},e.prototype.onConstruct=function(){this.m_c_contentBtn=this.getControllerAt(0),this.m_goBtn=this.getChildAt(1),this.m_goBtn2WithSingle=this.getChildAt(2),this.m_goBtn3=this.getChildAt(3)},e.URL="ui://ds1lhsg0nbkid",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],ActivityUI_subscribeComp:[function(t,e,n){"use strict";cc._RF.push(e,"df880BtFRlEz4ujgurWVIBF","ActivityUI_subscribeComp");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ActivityUI","subscribeComp")},e.prototype.onConstruct=function(){this.m_btnSubscribe=this.getChildAt(0),this.m_compDesc=this.getChildAt(2)},e.URL="ui://ds1lhsg0prjgw",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],ActivityUI:[function(t,e,n){"use strict";cc._RF.push(e,"623dcEgraZJRKXrp4iHRWr1","ActivityUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ActivityUI=void 0;var r=t("../../../Framework/Manager/EventManager"),s=t("../../../Framework/Manager/UIManager"),c=t("../../../Framework/UI/FadeUI"),l=t("../../Base/Data/DataEvent"),u=t("../../Base/Data/DataLocalStorageKey"),d=t("../../Base/View/UIHelp"),p=t("../../FriendTeam/FriendTeamModel"),h=t("../../Base/Module/Platform/PlatformManager"),_=t("../QuestionaireUI/QuestionnaireModel"),f=t("./ActivityModel"),m=t("../../Match/MatchModel"),g=t("../QuestionaireUI/QuestionnaireUI"),y=t("../Common/ActivityComModel"),I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._urlArr=[],e._activityData=null,e._currTab1Name="",e._currTab2Index=-1,e._currTab2BtnConfig={localKey:null,sort:null,red:null,c_showContent:null,showDate:null,name:null},e._activityUIConfig={activity:{c_tap1:0,name:"activity"},announcement:{c_tap1:1,name:"announcement"}},e}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return f.ActivityModel.instance},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.initListener(),this.initUI()},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),this.view.m_Window.m_btnActivityTab.onClick(this.onBtnActivity,this),this.view.m_Window.m_btnAnnouncementTab.onClick(this.onBtnAnnouncement,this),this.view.m_Window.m_subscribeUI.m_btnSubscribe.onClick(this.onBtnSubscribe,this),this.view.m_Window.m_contentUI.onClick(this.onBtnContent,this),this.view.m_Window.m_contentUI.m_goBtn.onClick(this.onBtnContent,this),this.view.m_Window.m_contentUI.m_goBtn2WithSingle.onClick(this.onBtnContent,this)},e.prototype.initUI=function(){this._activityData=this.model.getActivityConfigWithFirstShowList();var t=this._activityData.firstShowTab;this.isActivityUI(t)&&this.model.showTab1ActivityRed()||this.isAnnouncementUI(t)&&this.model.showTab1AnnouncementRed()||(this.model.showTab1ActivityRed()?t=this._activityUIConfig.activity.name:this.model.showTab1AnnouncementRed()&&(t=this._activityUIConfig.announcement.name)),t&&this._activityUIConfig[t]?this.updateActivityUI(t):(this.onExitClick(),r.EventManager.instance.emit(l.DataEvent.ToastData,"\u6d3b\u52a8\u754c\u9762\u914d\u7f6e\u9519\u8bef!")),this.updateTab1Red(),this.updateDingYueUI()},e.prototype.onBtnActivity=function(){this.updateActivityUI(this._activityUIConfig.activity.name)},e.prototype.onBtnAnnouncement=function(){this.updateActivityUI(this._activityUIConfig.announcement.name)},e.prototype.onBtnSubscribe=function(){var t=this,e=this._currTab2BtnConfig;e.clickHideRed&&this.model.saveClickActivityBtnCount(e.localKey,this._currTab1Name),this.view.m_Window.m_subscribeUI.m_btnSubscribe.visible&&this.model.clickSubscriptions(function(){t.updateDingYueUI()})},e.prototype.onBtnContent=function(t){var e=fgui.GObject.cast(t.currentTarget).data;if(e){var n=e.func;n&&this[n]&&this[n]()}},e.prototype.isActivityUI=function(t){return this._activityUIConfig.activity.name===t},e.prototype.isAnnouncementUI=function(t){return this._activityUIConfig.announcement.name===t},e.prototype.updateActivityUI=function(t){if(this._currTab1Name!==t){this._currTab2Index=-1,this._currTab1Name=t;var e=this._activityUIConfig[t].c_tap1;this.showSelectTab1(e),this.initTab2UI()}},e.prototype.updateTab1Red=function(){this.view.m_Window.m_btnActivityTab.m_red.visible=this.model.showTab1ActivityRed(),this.view.m_Window.m_btnAnnouncementTab.m_red.visible=this.model.showTab1AnnouncementRed()},e.prototype.updateDingYueUI=function(){var t=this.model.isSubscriptions();this.view.m_Window.m_subscribeUI.m_btnSubscribe.visible=!t},e.prototype.showSelectTab1=function(t){this.view.m_Window.m_c_tap1.selectedIndex=t},e.prototype.initTab2UI=function(){var t=this.getCurrActivityData(),e=this.view.m_Window.m_tap2BtnPanel;if(t){e.removeChildren();for(var n=0;n<t.length;n++){var o=t[n],a=n+1,i=this.createTab2Btn();e["m_activityBtn"+a]=i,i&&(i.onClick(this.clickTab2Btn,this),i.setPosition(-1,104*n),e.addChild(i),i.data={config:o,index:a},i.title=o.name,i.visible=!0,i.m_red.visible=o.red&&this.model.isShowBtnRed(o.localKey,this._currTab1Name)),o.firstShow&&(this.updateTab2BtnAndContent(i.data),i.m_red.visible=this.model.isShowBtnRed(o.localKey,this._currTab1Name))}}},e.prototype.getCurrActivityData=function(){return this._activityData[this._currTab1Name]},e.prototype.createTab2Btn=function(){return fgui.UIPackage.createObject("ActivityUI","TapBtn2")},e.prototype.updateTab2BtnAndContent=function(t){var e=t.index;this._currTab2Index!==e&&(t.config.clickHideRed||this.model.saveClickActivityBtnCount(t.config.localKey,this._currTab1Name),this.updateTab2Btn(t),this.updateTab2ContentUI(t),this.updateTab1Red())},e.prototype.updateTab2Btn=function(t){var e=t.index;this._currTab2Index=e;for(var n=this.view.m_Window.m_tap2BtnPanel,o=this.getCurrActivityData(),a=1;a<=o.length;a++){var i=n["m_activityBtn"+a];i&&(i.asButton.selected=i.visible&&e===a)}},e.prototype.updateTab2ContentUI=function(t){var e=t.config;this._currTab2BtnConfig=e,e.c_showContent?this.view.m_Window.m_c_showContent.selectedIndex=e.c_showContent:this.view.m_Window.m_c_showContent.selectedIndex=0,this.view.m_Window.m_contentUI.data=e,this.view.m_Window.m_contentUI.icon=this.loadHttpContentImg(e.localKey),this.model.reportPoint(e.localKey,!1),e.showGoBtn_ctrl?this.view.m_Window.m_contentUI.m_c_contentBtn.selectedIndex=e.showGoBtn_ctrl:this.view.m_Window.m_contentUI.m_c_contentBtn.selectedIndex=0,this.model.isUpdateContent(e.localKey)&&this.showUpdateContent()},e.prototype.loadHttpContentImg=function(t){var e="ui://ActivityUI/bg_"+t;return this.pushHttpImgUrl(e),e},e.prototype.pushHttpImgUrl=function(t){this._urlArr.indexOf(t)<0&&this._urlArr.push(t)},e.prototype.showUpdateContent=function(){this._activityData=this.model.getActivityConfigList(),this.view.m_Window.m_subscribeUI.m_compDesc.m_txtContent.text=this._activityData.update.desc,this.view.m_Window.m_subscribeUI.title=this._activityData.update.title},e.prototype.clickTab2Btn=function(t){var e=fgui.GObject.cast(t.currentTarget),n=e.data;this.updateTab2BtnAndContent(n),e.m_red.visible=this.model.isShowBtnRed(n.config.localKey,this._currTab1Name)},e.prototype.openFriendRoomUI=function(){var t=this._currTab2BtnConfig;t.clickHideRed&&this.model.saveClickActivityBtnCount(t.localKey,this._currTab1Name),r.EventManager.instance.emit(l.DataEvent.StopManagerPop),this.onExitClick(),localStorage.setItem(u.LocalStorageKey.CREATE_ROOM_CONFIG,JSON.stringify({tap:"GUANDAN_DAITUO",playUI:"radio2",roundUI:"radio1",levelUI:"radio_up3"})),r.EventManager.instance.emit(l.DataEvent.OpenFriendRoomUI,this)},e.prototype.openFriendTeamUI=function(){var t=this._currTab2BtnConfig;this.model.reportPoint(t.localKey,!0),y.ActivityComModel.instance.checkInGame(this.onExitClick.bind(this))||(p.FriendTeamModel.instance.createTeam(),r.EventManager.instance.emit(l.DataEvent.StopManagerPop),this.onExitClick())},e.prototype.addCustomerWithCopyWechat=function(){console.log(">-----\x3eaddCustomerWithCopyWechat"),h.PlatformManager.instance.platform.setClipboardData("bianfengguandan",function(t){t?r.EventManager.instance.emit(l.DataEvent.ToastData,"\u60a8\u5df2\u6210\u529f\u590d\u5236\u5ba2\u670d\u5fae\u4fe1\uff0c\u6dfb\u52a0\u540e\u5373\u53ef\u9886\u53d6\u5956\u52b1\uff01",2):r.EventManager.instance.emit(l.DataEvent.ToastData,"\u590d\u5236\u5ba2\u670d\u5fae\u4fe1\u5931\u8d25\uff0c\u60a8\u53ef\u81ea\u884c\u641c\u7d22\u6dfb\u52a0\uff01")})},e.prototype.openQuestionnaireUI=function(){console.log(">-----\x3eopenQuestionnaireUI"),r.EventManager.instance.emit(l.DataEvent.StopManagerPop),this.onExitClick(),d.UIHelp.instance.showLoading(),_.QuestionnaireModel.instance.queryQuestionnaireInfo(_.QuestionnaireTypeEnum.DEFAULT,function(t){d.UIHelp.instance.hideLoading(),!0===t?s.UIManager.instance.open(g.QuestionnaireUI).then(function(t){return t.init(_.QuestionnaireTypeEnum.DEFAULT)}):!1===t?r.EventManager.instance.emit(l.DataEvent.ToastData,"\u60a8\u5df2\u5b8c\u6210\u4e86\u95ee\u5377\u54e6~"):r.EventManager.instance.emit(l.DataEvent.ToastData,"\u95ee\u5377\u67e5\u8be2\u5931\u8d25\u54e6\uff0c\u8bf7\u91cd\u65b0\u8fdb\u884c\u95ee\u5377~")})},e.prototype.openTeamUI=function(){var t=this._currTab2BtnConfig;this.model.reportPoint(t.localKey,!0),y.ActivityComModel.instance.checkInGame(this.onExitClick.bind(this))||(p.FriendTeamModel.instance.createTeam(),r.EventManager.instance.emit(l.DataEvent.StopManagerPop),this.onExitClick())},e.prototype.openMatchUI=function(){y.ActivityComModel.instance.checkInGame(this.onExitClick.bind(this))||(r.EventManager.instance.emit(l.DataEvent.StopManagerPop),this.onExitClick(),m.MatchModel.instance.openMatchUI({scene:m.EnterMatchSceneEnum.GUIDE}))},i([jsClass],e)}(c.FadeUI);n.ActivityUI=I,cc._RF.pop()},{"../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/UI/FadeUI":"FadeUI","../../Base/Data/DataEvent":"DataEvent","../../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../../Base/Module/Platform/PlatformManager":"PlatformManager","../../Base/View/UIHelp":"UIHelp","../../FriendTeam/FriendTeamModel":"FriendTeamModel","../../Match/MatchModel":"MatchModel","../Common/ActivityComModel":"ActivityComModel","../QuestionaireUI/QuestionnaireModel":"QuestionnaireModel","../QuestionaireUI/QuestionnaireUI":"QuestionnaireUI","./ActivityModel":"ActivityModel"}],AdModel:[function(t,e,n){"use strict";cc._RF.push(e,"fa96fYdDmtDfZD4rKg9D7SE","AdModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.AdModel=n.AdInfoData=void 0;var r=t("../../../Framework/Manager/EventManager"),s=t("../../../Framework/Model/BaseModel"),c=t("../../../Framework/Root/ModelRoot"),l=t("../../Base/Data/DataEvent"),u=t("../../Base/Utils/UtilTool"),d=function(){function t(){}return i([jsClass("AdInfoData")],t)}();n.AdInfoData=d;var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._adInfo=new d,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return c.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adInfo",{get:function(){return this._adInfo},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.resetAdInfo()},e.prototype.resetAdInfo=function(){this._adInfo.hadGotCount=0,this._adInfo.totalCount=0},e.prototype.setAdInfo=function(t){var e=u.UtilTool.setData(this._adInfo,t);e&&r.EventManager.instance.emit(l.DataEvent.VideoAdRedUpdate,e)},e.prototype.addVideoAdHadGotCount=function(){var t=this._adInfo.hadGotCount+1,e=u.UtilTool.setData(this._adInfo,{hadGotCount:t});e&&r.EventManager.instance.emit(l.DataEvent.VideoAdRedUpdate,e)},i([jsClass],e)}(s.BaseModel);n.AdModel=p,cc.systemEvent.once("GameRoot.inited",function(){c.ModelRoot.instance.add(p)}),cc._RF.pop()},{"../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Model/BaseModel":"BaseModel","../../../Framework/Root/ModelRoot":"ModelRoot","../../Base/Data/DataEvent":"DataEvent","../../Base/Utils/UtilTool":"UtilTool"}],AdProxy:[function(t,e,n){"use strict";cc._RF.push(e,"e2811cKxYZHvZ8Dyw9QtEco","AdProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.AdProxy=void 0;var i=t("../../../Framework/Proxy/BaseProxy"),r=t("../../../Framework/Root/ProxyRoot"),s=t("../../Base/Data/DataBfConfig"),c=t("../../Base/Data/DataScript"),l=t("../../Base/Module/Network/protocol/AwardProtocol"),u=t("../../Base/Module/Network/SocketUtils"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return r.ProxyRoot.instance.get(e)},enumerable:!1,configurable:!0}),e.prototype.reqQueryVideoAd=function(t){var e=new l.AwardProtocol.ReqAwardInfo({type:c.DataScript.videoAd.id,gameid:s.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("mini=1;func="+c.DataScript.videoAd.func.query+";")});u.SocketUtils.instance.request(e,function(e){if(0===e.flag){var n=bf33.Utils.bytesToString(e.msg).split("|")||[];console.log(">----\x3erespQueryVideoAd.decode:",n);var o=0==Number(n[0]),a=Number(n[1])||0,i=Number(n[2])||0;t&&t({isSuccess:o,hadGotCount:a,totalCount:i})}else console.error(">-----\x3eerror.respQueryVideoAd:",e.flag)})},e.prototype.reqGetVideoAdAward=function(t){var e=new l.AwardProtocol.ReqAwardInfo({type:c.DataScript.videoAd.id,gameid:s.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("mini=1;func="+c.DataScript.videoAd.func.get+";")});u.SocketUtils.instance.request(e,function(e){if(0===e.flag){var n=bf33.Utils.bytesToString(e.msg).split("|")||[];console.log(">-----\x3erespGetVideoAdAward.decode:",n);var o=0==Number(n[0]),a={};o&&(a=JSON.parse(n[1])),t&&t({isSuccess:o,awards:a})}})},e}(i.BaseProxy);n.AdProxy=d,cc.systemEvent.once("GameRoot.inited",function(){r.ProxyRoot.instance.add(d)}),cc._RF.pop()},{"../../../Framework/Proxy/BaseProxy":"BaseProxy","../../../Framework/Root/ProxyRoot":"ProxyRoot","../../Base/Data/DataBfConfig":"DataBfConfig","../../Base/Data/DataScript":"DataScript","../../Base/Module/Network/SocketUtils":"SocketUtils","../../Base/Module/Network/protocol/AwardProtocol":"AwardProtocol"}],AnalysisRoomConfigCreateUI:[function(t,e,n){"use strict";cc._RF.push(e,"47c07w7Mb1LIaKRS7kfTPek","AnalysisRoomConfigCreateUI");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.AnalysisRoomConfigCreateUI=void 0;var a=t("../../Base/Data/DataLocalStorageKey"),i=t("../CreateRoomConfig"),r=t("./CreateRoomConfigModel"),s=function(){function t(){this._heightIndex=0,this._allMoveX=50,this._topHeight=50,this._fitWidth=180,this._fitHeight=90,this._addWidth=115,this._view=null,this._radioTable={},this._multipleTable={},this._qiPaoPanel=null,this._roomUIConfig=null,this._createPanel=null}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return null===e._analysisRoomConfigCreateUI&&(e._analysisRoomConfigCreateUI=new e),e._analysisRoomConfigCreateUI},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),t.prototype.setView=function(t){this._view=t},t.prototype.createPlayUIByConfig=function(){var t=this,e=i.CreateRoomConfig.getRoomUIConfig();e=this.updateRoomConfigByLocalConfig(e),cc.tween(this.view.node).delay(.1).call(function(){t.changePlayUIByConfig(e)}).start()},t.prototype.changePlayUIByConfig=function(t){this._roomUIConfig=t,this._createPanel&&(this._createPanel.removeFromParent(),this._createPanel=null),this._radioTable={},this._multipleTable={};var e=Object.keys(t);this._heightIndex=0;for(var n=0;n<e.length;n++){var o=e[n];if(o.indexOf("UI")>=0){var a=t[o];this.createTitle(a.title);var i=t[o],r=i.content;r&&this.createCheckBox(o,r,i.type),++this._heightIndex}}this.initQiPaoPanel()},t.prototype.createTitle=function(t){var e=fgui.UIPackage.createObject("CreateRoomUI","createTitleComonent");e.setPosition(this._allMoveX,this._topHeight+this._heightIndex*this._fitHeight),this.addChild(e),e.asCom.getChildAt(0).asTextField.text=t},t.prototype.createCheckBox=function(t,e,n){for(var o=Object.keys(e),a=0,i=0;i<o.length;i++){var r=o[i],s=e[r],c=this.getButtonObj(n,t,r);c.title=s.text,this.addChild(c),s.tab?(a=1,++this._heightIndex):++a;var l=this._allMoveX+this._addWidth+(a-1)%4*this._fitWidth,u=this._topHeight+this._heightIndex*this._fitHeight-.25*c.height;c.setPosition(l,u);var d=!!s.select;if(c.asButton.selected=d,c.data={title:t,btnName:r,go:s.go,okArr:s.okArr},s.descBtn){var p=this.getDescBtn();p.data=s.descBtn,this.addChild(p),p.node.zIndex=1;var h=c.width+l,_=u+5;p.setPosition(h,_),p.onClick(this.descOnClick,this)}if(this.isShowNewLogo(t,s.text)){var f=this.getNewIcon();this.addChild(f),f.node.zIndex=1;var m=c.width+l-.18*f.width,g=u+.2*f.height;f.node.scale=.95,f.setPosition(m,g)}}},t.prototype.getButtonObj=function(t,e,n){var o=null;return t===i.ButtonType.RADIO?((o=fgui.UIPackage.createObject("CreateRoomUI","RadioBox")).onClick(this.radioOnClick,this),this._radioTable[e]||(this._radioTable[e]={}),this._radioTable[e][n]=o):t===i.ButtonType.MULTIPLE&&((o=fgui.UIPackage.createObject("CreateRoomUI","CheckBox")).onClick(this.multipleOnClick,this),this._multipleTable[e]||(this._multipleTable[e]={}),this._multipleTable[e][n]=o),o},t.prototype.descOnClick=function(t){var e=fgui.GObject.cast(t.currentTarget),n=e.data;this.updateQiPaoPanel(e,n.text)},t.prototype.getDescBtn=function(){return fgui.UIPackage.createObject("CreateRoomUI","LogoBtn")},t.prototype.isShowNewLogo=function(t,e){var n=localStorage.getItem(a.LocalStorageKey.FRIEND_ROOM_FIRST_DAITUO);if(a.LocalStorageKey.FRIEND_ROOM_FIRST_DAITUO===n)return!1;var o=!1;return"playUI"===t&&"\u5e26\u62d6"===e&&(o=!0),o},t.prototype.getNewIcon=function(){return fgui.UIPackage.createObject("CreateRoomUI","LogoImg")},t.prototype.initQiPaoPanel=function(){this._qiPaoPanel=fgui.UIPackage.createObject("CreateRoomUI","QiPaoPanel"),this.addChild(this._qiPaoPanel),this._qiPaoPanel.node.zIndex=2,this._qiPaoPanel.node.active=!1},t.prototype.updateRoomConfigByLocalConfig=function(t){var e=this.getLocalRoomUIConfig();if(e){var n=i.CreateRoomConfig.getRoomUIConfigByTap(e.tap);if(!n)return t;for(var o in t=n,e)if("tap"!==o){if("playUI"===o)continue;var a=e[o],r=t[o].content;for(var s in r)a.indexOf(s)>=0?r[s].select=!0:r[s].select=!1}}return t},t.prototype.updateQiPaoPanel=function(t,e){var n=this._qiPaoPanel.getChildAt(1).asTextField;if(this._qiPaoPanel.node.active&&e===n.text)this._qiPaoPanel.node.active=!1;else{n.text=e;var o=this._qiPaoPanel.height;this._qiPaoPanel.setPosition(t.x-.85*this._qiPaoPanel.width,t.y-o-25),this._qiPaoPanel.node.active=!0}},t.prototype.radioOnClick=function(t){var e=fgui.GObject.cast(t.currentTarget).data;this.updateRadioUI(e),this._qiPaoPanel.node.active=!1,e.go&&this._roomUIConfig.tap!==e.go&&this.changePlayUIByConfig(i.CreateRoomConfig.getRoomUIConfigByTap(e.go))},t.prototype.multipleOnClick=function(){this._qiPaoPanel.node.active=!1},t.prototype.updateRadioUI=function(t){var e=t.title;if(e){var n=this._radioTable[e];for(var o in n)n[o].asButton.selected=!1;this._radioTable[e][t.btnName].asButton.selected=!0}},t.prototype.addChild=function(t){var e=this.view.getAllChildren("createPanel")[0];e||((e=fgui.UIPackage.createObject("CreateRoomUI","createPanel")).name="createPanel",this.view.addChild(e),this._createPanel=e),e.asCom.addChild(t)},t.prototype.getRadioButtonTableByParentName=function(t){return this._radioTable[t]},t.prototype.getRadioSelectedValueByParentName=function(t){var e=this.getRadioButtonTableByParentName(t);if(e)for(var n in e){var o=e[n];if(o.asButton.selected)return fgui.GObject.cast(o.node).data.okArr[0]}return 0},t.prototype.getMultipleButtonByParentName=function(t,e){return!!this._multipleTable[t]&&this._multipleTable[t][e]},t.prototype.multipleButtonIsSelectedByName=function(t,e){var n=this.getMultipleButtonByParentName(t,e);return!!n&&n.selected},t.prototype.getCreateRoomRules=function(){var t=this.getPlayType(),e=this.getGameId(),n=this.getRadioSelectedValueByParentName("roundUI"),o=this.getUpSpec(),a=this.multipleButtonIsSelectedByName("specialUI","multiple_bomb4")?1:2,i="selfCreate=1;playType="+t+";gameid="+e+";ipban="+(this.multipleButtonIsSelectedByName("otherUI","multiple_net")?1:0)+";isUpSpec="+o+";isMultNew="+a+";rule="+n+";baseType=1;cCfgs={"+this.getCfgStr()+"}";return console.warn("==>BoxRoomRule:",i),i},t.prototype.getPlayType=function(){return this._roomUIConfig.tap===i.GameType.GUANDAN_JD&&this.multipleButtonIsSelectedByName("specialUI","multiple_bxp")?13:this._roomUIConfig.playType},t.prototype.getGameId=function(){return this._roomUIConfig.gameId},t.prototype.getCfgStr=function(){return"1,"+(this.multipleButtonIsSelectedByName("otherUI","multiple_net")?1:2)+","+this.getZhuPai()+","+(this.multipleButtonIsSelectedByName("otherUI","multiple_ready")?1:2)+","+(this.multipleButtonIsSelectedByName("otherUI","multiple_trust")?1:2)+","+(this.multipleButtonIsSelectedByName("specialUI","multiple_bxp")?2:1)+","+this.getUpSpec()+","+(this.multipleButtonIsSelectedByName("otherUI","multiple_isvoip")?1:2)+",1,1,1,1,1,1,1,1,1,1,1,1"},t.prototype.getZhuPai=function(){return this._roomUIConfig.tap===i.GameType.GUANDAN_TTZ?(console.log(this.getRadioSelectedValueByParentName("specialUI")),this.getRadioSelectedValueByParentName("specialUI")):1},t.prototype.getUpSpec=function(){return this._roomUIConfig.tap===i.GameType.GUANDAN_JD||this._roomUIConfig.tap===i.GameType.GUANDAN_DAITUO?this.getRadioSelectedValueByParentName("levelUI"):0},t.prototype.saveRoomUIConfig=function(){var t={tap:this._roomUIConfig.tap};for(var e in this._radioTable){var n=this._radioTable[e],o=[];for(var i in n)n[i].selected&&o.push(i);o.length>0&&(t[e]=o.join())}for(var e in this._multipleTable){for(var i in o=[],n=this._multipleTable[e])n[i].selected&&o.push(i);o.length>0&&(t[e]=o.join())}localStorage.setItem(a.LocalStorageKey.CREATE_ROOM_CONFIG,JSON.stringify(t)),localStorage.setItem(a.LocalStorageKey.FRIEND_ROOM_FIRST_DAITUO,a.LocalStorageKey.FRIEND_ROOM_FIRST_DAITUO)},t.prototype.getLocalRoomUIConfig=function(){return r.CreateRoomConfigModel.getLocalRoomConfig()},t._analysisRoomConfigCreateUI=null,e=o([jsClass],t)}();n.AnalysisRoomConfigCreateUI=s,cc._RF.pop()},{"../../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../CreateRoomConfig":"CreateRoomConfig","./CreateRoomConfigModel":"CreateRoomConfigModel"}],AnnouncementModel:[function(t,e,n){"use strict";cc._RF.push(e,"5ef11PhjORLfJ45gaNyuryk","AnnouncementModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.AnnouncementModel=void 0;var r=t("../../Framework/Manager/CoroutineManager"),s=t("../../Framework/Manager/EventManager"),c=t("../../Framework/Model/BaseModel"),l=t("../../Framework/Root/ModelRoot"),u=t("../Base/Data/DataEvent"),d=t("./AnnouncementProxy"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isNotEmit=!0,e._config={isOpen:!1,content:"",title:"",signature:"",salutation:"",isPrivacyOpen:!1},e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return l.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return d.AnnouncementProxy.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNotEmit",{get:function(){return this._isNotEmit},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){s.EventManager.instance.on(u.DataEvent.LoginUIShow,this,this.onLoginUIShow)},e.prototype.onLoginUIShow=function(){var t=this;r.CoroutineManager.instance.once(1,function(){t._isNotEmit&&(t._isNotEmit=!1,s.EventManager.instance.emit(u.DataEvent.AnnouncementComplete))}),this.proxy.reqLoginAnnouncementData(function(e){e&&(t._config=e),t._isNotEmit&&(t._isNotEmit=!1,s.EventManager.instance.emit(u.DataEvent.AnnouncementComplete))})},i([jsClass],e)}(c.BaseModel);n.AnnouncementModel=p,cc.systemEvent.once("GameRoot.inited",function(){l.ModelRoot.instance.add(p)}),cc._RF.pop()},{"../../Framework/Manager/CoroutineManager":"CoroutineManager","../../Framework/Manager/EventManager":"EventManager","../../Framework/Model/BaseModel":"BaseModel","../../Framework/Root/ModelRoot":"ModelRoot","../Base/Data/DataEvent":"DataEvent","./AnnouncementProxy":"AnnouncementProxy"}],AnnouncementProxy:[function(t,e,n){"use strict";cc._RF.push(e,"2e22fLSHe5CYbp2AxDQBKEm","AnnouncementProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.AnnouncementProxy=void 0;var r=t("../../Framework/Proxy/BaseProxy"),s=t("../../Framework/Root/ProxyRoot"),c=t("../../Framework/Utils/HttpUtil"),l=t("../Base/Data/DataBfConfig"),u=t("../Base/Data/DataConstant"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return s.ProxyRoot.instance.get(n)},enumerable:!1,configurable:!0}),e.prototype.reqLoginAnnouncementData=function(t){var e={area_id:l.DataBfConfig.areaID,game_id:l.DataBfConfig.gameID};c.HttpUtil.post(u.DataConstant.ANNOUNCEMENT_HOST,e,{"Content-Type":"application/json"}).then(function(e){if(0===e.code){var n=JSON.parse(e.data);t&&t({isOpen:n.is_open,content:n.body,title:n.title,signature:n.signature,salutation:n.salutation,isPrivacyOpen:n.is_privacy_open})}else t&&t(null)},function(e){console.error(e),t&&t(null)})},n=i([jsClass],e)}(r.BaseProxy);n.AnnouncementProxy=d,cc.systemEvent.once("GameRoot.inited",function(){s.ProxyRoot.instance.add(d)}),cc._RF.pop()},{"../../Framework/Proxy/BaseProxy":"BaseProxy","../../Framework/Root/ProxyRoot":"ProxyRoot","../../Framework/Utils/HttpUtil":"HttpUtil","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataConstant":"DataConstant"}],AnnouncementUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"eb9a4lpSWNAlJ+B8VZl9+Kg","AnnouncementUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./AnnouncementUI_MainPanel"),a=t("./AnnouncementUI_Window"),i=t("./AnnouncementUI_TextContent"),r=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default)},t}();n.default=r,cc._RF.pop()},{"./AnnouncementUI_MainPanel":"AnnouncementUI_MainPanel","./AnnouncementUI_TextContent":"AnnouncementUI_TextContent","./AnnouncementUI_Window":"AnnouncementUI_Window"}],AnnouncementUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"22dd7xJZHRIoYlR5uwhHWR6","AnnouncementUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("AnnouncementUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1)},e.URL="ui://9bqdjmvng65n0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],AnnouncementUI_TextContent:[function(t,e,n){"use strict";cc._RF.push(e,"8a244bKrldFM6L6koFXgSJm","AnnouncementUI_TextContent");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("AnnouncementUI","TextContent")},e.prototype.onConstruct=function(){this.m_content=this.getChildAt(0)},e.URL="ui://9bqdjmvng65n4",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],AnnouncementUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"076d5LDyDRB2oJoX+lZ49yF","AnnouncementUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("AnnouncementUI","Window")},e.prototype.onConstruct=function(){this.m_bg=this.getChildAt(0),this.m_textContent=this.getChildAt(2),this.m_btnConfirm=this.getChildAt(3),this.m_btnClose=this.getChildAt(4)},e.URL="ui://9bqdjmvng65n1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],AnnouncementUI:[function(t,e,n){"use strict";cc._RF.push(e,"cd624jQKAJLGLVp+gWtuqWM","AnnouncementUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.AnnouncementUI=void 0;var r=t("../../Framework/UI/FadeUI"),s=t("../Base/Data/DataConstant"),c=t("./AnnouncementModel"),l=t("../../Framework/Manager/EventManager"),u=t("../Base/Data/DataEvent"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return c.AnnouncementModel.instance},enumerable:!1,configurable:!0}),e.getExtPkgNames=function(){return[s.DataConstant.PKG_COMMON]},e.prototype.onLoad=function(){this.initUI(),this.initListener()},e.prototype.initUI=function(){var t=this.mode.config.salutation+"\n       "+this.mode.config.content;t=t+"\n\n                                                            "+this.mode.config.signature,this.view.m_Window.m_textContent.m_content.text=t},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onClickClose,this),this.view.m_Window.m_btnConfirm.onClick(this.onExitClick,this)},e.prototype.onClickClose=function(){l.EventManager.instance.emit(u.DataEvent.ToastData,"\u670d\u52a1\u6b63\u5728\u7ef4\u62a4\u4e2d...")},i([jsClass],e)}(r.FadeUI);n.AnnouncementUI=d,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataConstant":"DataConstant","../Base/Data/DataEvent":"DataEvent","./AnnouncementModel":"AnnouncementModel"}],AnswerAwardUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"df7famR6XdElI2+CjuQPqrQ","AnswerAwardUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./AnswerAwardUI_MainPanel"),a=t("./AnswerAwardUI_Window"),i=t("./AnswerAwardUI_contentPanel"),r=t("./AnswerAwardUI_AwardItem"),s=t("./AnswerAwardUI_sweep_jiangli"),c=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default)},t}();n.default=c,cc._RF.pop()},{"./AnswerAwardUI_AwardItem":"AnswerAwardUI_AwardItem","./AnswerAwardUI_MainPanel":"AnswerAwardUI_MainPanel","./AnswerAwardUI_Window":"AnswerAwardUI_Window","./AnswerAwardUI_contentPanel":"AnswerAwardUI_contentPanel","./AnswerAwardUI_sweep_jiangli":"AnswerAwardUI_sweep_jiangli"}],AnswerAwardUI_AwardItem:[function(t,e,n){"use strict";cc._RF.push(e,"9511fDzeKpA/bD7KnkLhfss","AnswerAwardUI_AwardItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("AnswerAwardUI","AwardItem")},e.prototype.onConstruct=function(){this.m_txtNum=this.getChildAt(3),this.m_chuxian=this.getTransitionAt(0)},e.URL="ui://p4omjy3parnbj",e}(fgui.GLabel);n.default=i,cc._RF.pop()},{}],AnswerAwardUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"717d0Hck+lOyIAXmzFqHxkV","AnswerAwardUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("AnswerAwardUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://p4omjy3p72db0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],AnswerAwardUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"2ae9ba8MklG6b4g6AiT9Nmz","AnswerAwardUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("AnswerAwardUI","Window")},e.prototype.onConstruct=function(){this.m_cUITab=this.getControllerAt(0),this.m_btnClose=this.getChildAt(1),this.m_txtMainTitle=this.getChildAt(2),this.m_txtPage=this.getChildAt(4),this.m_gContent=this.getChildAt(5),this.m_txtCorrectHint=this.getChildAt(9),this.m_btnReAnswer=this.getChildAt(10),this.m_gHint=this.getChildAt(11),this.m_awardItem=this.getChildAt(13),this.m_btnGetAward=this.getChildAt(14),this.m_gFinish=this.getChildAt(15)},e.URL="ui://p4omjy3p72db1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],AnswerAwardUI_contentPanel:[function(t,e,n){"use strict";cc._RF.push(e,"0f2c9OVHOZBRpHBXv2eiikI","AnswerAwardUI_contentPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("AnswerAwardUI","contentPanel")},e.prototype.onConstruct=function(){this.m_createPanel=this.getChildAt(0)},e.URL="ui://p4omjy3p72db2",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],AnswerAwardUI_sweep_jiangli:[function(t,e,n){"use strict";cc._RF.push(e,"85149uBbUhPmIxmgUmDqjjB","AnswerAwardUI_sweep_jiangli");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("AnswerAwardUI","sweep_jiangli")},e.prototype.onConstruct=function(){this.m_sweep=this.getTransitionAt(0)},e.URL="ui://p4omjy3parnbk",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],AnswerAwardUI:[function(t,e,n){"use strict";cc._RF.push(e,"a1c31D3B6BBBrNq7Xq+vTsW","AnswerAwardUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.AnswerAwardUI=void 0;var c,l=t("../../../Framework/Manager/CoroutineManager"),u=t("../../../Framework/Manager/EventManager"),d=t("../../../Framework/Manager/UIManager"),p=t("../../../Framework/UI/FadeUI"),h=t("../../Base/Data/DataEvent"),_=t("../../Base/Module/BfAnalytics/BfasManager"),f=t("../../Base/Module/BfAnalytics/DataPointID"),m=t("../../Base/View/UIHelp"),g=t("./AnswerAwardUI/AnswerAwardUIBinder"),y=t("./QuestionnaireConifg"),I=t("./QuestionnaireModel");(function(t){t[t.DEFAULT=0]="DEFAULT",t[t.ERROR_HINT=1]="ERROR_HINT",t[t.ANSWER_SUCCESS=2]="ANSWER_SUCCESS"})(c||(c={}));var C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._questionnaireConfig=[],e._contentPanel=null,e._radioTable={},e._currentPageIndex=1,e._selectRecord={},e._btnDisToLeft=315,e._btnDisToCenter=125,e._btnRowInterval=405,e._btnColumnInterval=83,e._questionnaireType=I.QuestionnaireTypeEnum.ANSWER_AWARD,e}return a(e,t),e.uiBind=function(){g.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return I.QuestionnaireModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=this;m.UIHelp.instance.showLoading(),this.model.queryQuestionnaireInfo(I.QuestionnaireTypeEnum.ANSWER_AWARD,function(e){m.UIHelp.instance.hideLoading(),e?(t.initListener(),t.initData(),t.initUI(),u.EventManager.instance.emit(h.DataEvent.updateAnswerAward,!0)):(u.EventManager.instance.emit(h.DataEvent.ToastData,"\u7cfb\u7edf\u5f00\u5c0f\u5dee\u4e86,\u8bf7\u91cd\u65b0\u767b\u5f55\u5c1d\u8bd5~"),u.EventManager.instance.emit(h.DataEvent.updateAnswerAward,!1))})},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onBtnClose,this),this.view.m_Window.m_btnReAnswer.onClick(this.onBtnReAnswer,this),this.view.m_Window.m_btnGetAward.onClick(this.onBtnGetAward,this)},e.prototype.initData=function(){this._selectRecord={},this._btnDisToLeft=this.view.width/2-250},e.prototype.initUI=function(){this._questionnaireConfig=this.model.adaptOnlineDataToMemoryData(I.QuestionnaireTypeEnum.ANSWER_AWARD),this.initFirstPageUI()},e.prototype.initFirstPageUI=function(){var t=this._questionnaireConfig[0];this.updatePageInfo(t)},e.prototype.updatePageInfo=function(t){this._currentPageIndex=t.pageIndex,this.view.m_Window.m_txtMainTitle.text=t.pageIndex+"\u3001"+t.mainTitle,this.view.m_Window.m_txtPage.text=t.pageIndex+"/"+this._questionnaireConfig.length,this.adddetailContent(t),this.updateButtonWithRecord()},e.prototype.adddetailContent=function(t){this._contentPanel&&(this._contentPanel.removeFromParent(),this._contentPanel=null),this._radioTable={};for(var e,n=0,o=y.QuestionArrangeEnum.ONE_COLUMN,a=0;a<t.content.length;a++){var i=this.createButton(a,t.buttonType);i.title=t.content[a].text,this.addChild(i),i.asButton.selected=!1,i.data={index:a,optionID:t.content[a].optionID},y.QuestionArrangeEnum.ONE_COLUMN===o?(e=1,n++):y.QuestionArrangeEnum.TWO_COLUMN===o&&(e=a%2+1,0==a%2&&n++);var r=this._btnDisToLeft+(e-1)*this._btnRowInterval,s=d.UIManager.instance.root.height/2-this._btnDisToCenter+(n-1)*this._btnColumnInterval;i.setPosition(r,s)}},e.prototype.createButton=function(t,e){var n=null;return y.ButtonTypeEnum.RADIO===e&&((n=fgui.UIPackage.createObject("AnswerAwardUI","radioBoxSelect")).onClick(this.clickBtnRadio,this),this._radioTable[t]=n),n},e.prototype.addChild=function(t){var e=this.view.getAllChildren("contentPanel")[0];e||((e=fgui.UIPackage.createObject("AnswerAwardUI","contentPanel")).name="contentPanel",this.view.addChild(e),this._contentPanel=e),e.asCom.addChild(t)},e.prototype.updateButtonWithRecord=function(){console.warn("updateButtonWithRecord:",this._selectRecord);var t=this._selectRecord[this._currentPageIndex];if(t&&t.length>0){var e=new Set(t);for(var n in this._radioTable){var o=this._radioTable[n];e.has(+n)?o.asButton.selected=!0:o.asButton.selected=!1}}},e.prototype.onBtnClose=function(){this.view.m_Window.m_cUITab.selectedIndex===c.ANSWER_SUCCESS?this.onBtnGetAward():(_.BfasManager.instance.sendEvt(f.AnswerAwardPointID.CLOSE_UI),t.prototype.onExitClick.call(this))},e.prototype.onBtnReAnswer=function(){console.log("onBtnReAnswer"),this.view.m_Window.m_cUITab.selectedIndex=c.DEFAULT,this._selectRecord={};var t=this._currentPageIndex,e=this._questionnaireConfig[t-1];this.updatePageInfo(e)},e.prototype.onBtnGetAward=function(){var e=this;console.log("onBtnGetAward"),this.model.reqGetAnswerAward(I.QuestionnaireTypeEnum.ANSWER_AWARD,function(n){n?(_.BfasManager.instance.sendEvt(f.AnswerAwardPointID.GET_AWARD),t.prototype.onExitClick.call(e)):(t.prototype.onExitClick.call(e),u.EventManager.instance.emit(h.DataEvent.ToastData,"\u9886\u53d6\u5956\u52b1\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5~"))})},e.prototype.clickBtnRadio=function(t){var e=this,n=fgui.GObject.cast(t.currentTarget).data;console.warn("clickBtnRadio:",n),this.updateRadioUI(n),this._selectRecord={},this._selectRecord[this._currentPageIndex]=[],this._selectRecord[this._currentPageIndex].push(n.index),l.CoroutineManager.instance.once(.3,function(){e.checkSubmitAnswer()})},e.prototype.updateRadioUI=function(t){for(var e in this._radioTable)this._radioTable[e].asButton.selected=!1;this._radioTable[t.index].asButton.selected=!0},e.prototype.checkSubmitAnswer=function(){var e,n,o=this,a=[];try{for(var i=r(Object.entries(this._selectRecord)),l=i.next();!l.done;l=i.next()){var d=s(l.value,2),p=d[0],_=d[1],f=s(this.convertOptionFormatBySelectRecord(+p,_),2),m=f[0],g=f[1],y={};y[m]=g,a.push(y);break}}catch(M){e={error:M}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}var C={};C.answerData=a,console.log(">---\x3esubmitData:",C),this.model.submitQuestionnaire(this._questionnaireType,C,function(e,n,a){var i,l;if(console.log(">---\x3eresp.submitData:",o._questionnaireType,C,o._selectRecord),e)if(o._currentPageIndex===o._questionnaireConfig.length){o._contentPanel&&(o._contentPanel.removeFromParent(),o._contentPanel=null);var d=I.QuestionnaireModel.instance.getAwardGold(I.QuestionnaireTypeEnum.ANSWER_AWARD);o.view.m_Window.m_awardItem.m_txtNum.text="\u91d1\u5e01x"+d.toString(),o.view.m_Window.m_cUITab.selectedIndex=c.ANSWER_SUCCESS}else o.goToNextPage();else if(n===I.SubmitCodeEnum.ANSWER_ERROR){o._contentPanel&&(o._contentPanel.removeFromParent(),o._contentPanel=null);var p="";try{for(var _=r(Object.entries(o._selectRecord)),f=_.next();!f.done;f=_.next()){var m=s(f.value,2),g=m[0];m[1],p=o.getCorrectAnswerContent(+g,a)}}catch(y){i={error:y}}finally{try{f&&!f.done&&(l=_.return)&&l.call(_)}finally{if(i)throw i.error}}o.view.m_Window.m_txtCorrectHint.text="\u6b63\u786e\u7b54\u6848\uff1a"+p,o.view.m_Window.m_cUITab.selectedIndex=c.ERROR_HINT}else console.error("checkSubmitAnswer.code",n),u.EventManager.instance.emit(h.DataEvent.ToastData,"\u7cfb\u7edf\u5f00\u5c0f\u5dee\uff0c\u8bf7\u4e0b\u6b21\u5c1d\u8bd5~"),u.EventManager.instance.emit(h.DataEvent.updateAnswerAward,!1),t.prototype.onExitClick.call(o)})},e.prototype.convertOptionFormatBySelectRecord=function(t,e){var n=1,o="";return this._questionnaireConfig.forEach(function(a){if(a.pageIndex===t){n=a.questionID;for(var i=0;i<e.length;i++)o+=a.content[e[i]].optionID,i!==e.length-1&&(o+=",")}}),[n,o]},e.prototype.getCorrectAnswerContent=function(t,e){var n,o,a,i;try{for(var s=r(this._questionnaireConfig),c=s.next();!c.done;c=s.next()){var l=c.value;if(l.pageIndex===t)try{for(var u=(a=void 0,r(l.content)),d=u.next();!d.done;d=u.next()){var p=d.value;if(p.optionID===e)return p.text}}catch(h){a={error:h}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}}}catch(_){n={error:_}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}},e.prototype.goToNextPage=function(){if(this._currentPageIndex<1||this._currentPageIndex>this._questionnaireConfig.length)console.error(">---\x3egoToNextPage:",this._currentPageIndex);else{var t=this._currentPageIndex+1,e=this._questionnaireConfig[t-1];this.updatePageInfo(e)}},i([jsClass],e)}(p.FadeUI);n.AnswerAwardUI=C,cc._RF.pop()},{"../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/UI/FadeUI":"FadeUI","../../Base/Data/DataEvent":"DataEvent","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../Base/View/UIHelp":"UIHelp","./AnswerAwardUI/AnswerAwardUIBinder":"AnswerAwardUIBinder","./QuestionnaireConifg":"QuestionnaireConifg","./QuestionnaireModel":"QuestionnaireModel"}],AppShowOptionsModel:[function(t,e,n){"use strict";cc._RF.push(e,"69bb14aPWFMprEv051THfxU","AppShowOptionsModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.AppShowOptionsModel=void 0;var r,s=t("../../../../Framework/Manager/CoroutineManager"),c=t("../../../../Framework/Manager/EventManager"),l=t("../../../../Framework/Manager/UIManager"),u=t("../../../../Framework/Model/BaseModel"),d=t("../../../../Framework/Root/ModelRoot"),p=t("../../../../Framework/UI/BaseUI"),h=t("../../../Activity/ActivityShare/ActivityShareModel"),_=t("../../../Activity/Common/ActivityComModel"),f=t("../../Data/DataEvent"),m=t("../BfAnalytics/BfasManager"),g=t("../BfAnalytics/DataPointID"),y=t("../../../CreateRoomUI/CreateRoomModel/CreateRoomManagerModel"),I=t("../../../Game/GuanDan/GameUI"),C=t("../../../Login/LoginModel"),M=t("../Platform/Const/PlatformEventType"),v=t("../Platform/PlatformManager"),E=t("../Share/ShareManager"),A=t("../../../Hall/HallModel"),P=t("../../../UserInfo/UserInfoModel"),b=t("../../../FriendTeam/FriendTeamModel"),U=t("../../Data/DataBfConfig"),S=t("../../../MatchShare/MatchShareModel"),T=t("../../../Match/MatchModel"),R=t("../../../Activity/InviteGift/InviteGiftModel");(function(t){t[t.FIND_BAR_MINI_1=1103]="FIND_BAR_MINI_1",t[t.CHAT_PULL_MINI_1=1104]="CHAT_PULL_MINI_1",t[t.FIND_BAR_MINI_2=1001]="FIND_BAR_MINI_2",t[t.CHAT_PULL_MINI_2=1089]="CHAT_PULL_MINI_2",t[t.ANDROID_DESKTOP=1023]="ANDROID_DESKTOP",t[t.PUBLIC_OA_MENU=1035]="PUBLIC_OA_MENU",t[t.PUBLIC_OA_TEXT_LINK=1082]="PUBLIC_OA_TEXT_LINK"})(r||(r={}));var w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return d.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"popupTimes",{get:function(){return this._popupTimes},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){c.EventManager.instance.on(M.PlatformEventType.AppShow,this,this.onAppShow),this.onAppShow()},e.prototype.onAppShow=function(){var t=this;this._popupTimes=null,s.CoroutineManager.instance.stopCo(this._waitCo),this._waitCo=s.CoroutineManager.instance.wait(function(){return C.LoginModel.instance.isLoggedIn&&C.LoginModel.instance.isAwardInfoGot&&A.default.instance.isEnterHallSuccess&&A.default.instance.isLocaltionSuccess},function(){t.handleAppShowOptions(function(e){t._popupTimes=e})},this)},e.prototype.handleAppShowOptions=function(t){var e,n=v.PlatformManager.instance.platform.scene||-1;if(this.isFromDesktop(n))cc.sys.OS_IOS!==cc.sys.os?_.ActivityComModel.instance.awardCollecting(_.CollectAwardType.ANDROID,this.convertCallback(t)):t&&t(0);else if(this.isFromMyMini(n))cc.sys.OS_IOS===cc.sys.os?_.ActivityComModel.instance.awardCollecting(_.CollectAwardType.IOS,this.convertCallback(t)):t&&t(0);else if(!this.isFromPublicOA(n)){v.PlatformManager.instance.platform.getShareInfo(function(t){t&&E.ShareManager.instance.recordShareIn(P.UserInfoModel.instance.userInfo.numID,U.DataBfConfig.ymn.channel,P.UserInfoModel.instance.userInfo.openID,t.iv,t.encryptedData)});var o=v.PlatformManager.instance.platform.query;switch(o.type){case E.ShareType.boxShare.key:case E.ShareType.directInviteFriend.key:if(A.default.instance.isInFriendTeam)return c.EventManager.instance.emit(f.DataEvent.ToastData,"\u60a8\u5df2\u52a0\u5165\u597d\u53cb\u7ec4\u961f\uff0c\u9000\u51fa\u961f\u4f0d\u540e\u624d\u53ef\u8fdb\u5165\u597d\u53cb\u623f"),void(t&&t(0));if(l.UIManager.instance.isExist(I.GameUI))return c.EventManager.instance.emit(f.DataEvent.ToastData,"\u60a8\u5df2\u5728\u623f\u95f4\u5185, \u9000\u51fa\u623f\u95f4\u540e\u624d\u53ef\u8fdb\u5165\u597d\u53cb\u623f~"),void(t&&t(0));var a=P.UserInfoModel.instance.isNewRegisterPlayer()?1:2;if(m.BfasManager.instance.evt(g.ShareLinkPointID.PULL_JOIN_GAME.eventid,{type:a},!0,g.ShareLinkPointID.PULL_JOIN_GAME.eventName),o.inviterChannel){var i=+o.inviterChannel||0;i>=9e7&&i<93e6||(P.UserInfoModel.instance.isNewRegisterPlayer()?m.BfasManager.instance.evt(g.APPGuid2H5PointID.NEW_PLAYER.eventid,{inviterChannel:i},!0,g.APPGuid2H5PointID.NEW_PLAYER.eventName):m.BfasManager.instance.evt(g.APPGuid2H5PointID.OLD_PLAYER.eventid,{inviterChannel:i},!0,g.APPGuid2H5PointID.OLD_PLAYER.eventName))}return m.BfasManager.instance.evt(g.BoxRoomPointID.JOINBOX_BY_LINK.eventid,null,!0,g.BoxRoomPointID.JOINBOX_BY_LINK.eventName),console.warn("HallModel.joinRoomByLink.roomNumber: ",o.roomNumber),void y.CreateRoomManagerModel.instance.reqJoinBox((null!==(e=o.roomNumber)&&void 0!==e?e:"").padEnd(6,"0"),function(e){console.log("AppShowOptions reqJoinBox\uff1a",e),t&&t(e?Number.MAX_VALUE:0)});case E.ShareType.friendFreeTeamShare.key:case E.ShareType.friendFreeTeamDirShare.key:case E.ShareType.friendFreeTeamRushDirShare.key:return void b.FriendTeamModel.instance.dealEnterTeamByLink(+o.friendTeamid,b.SelectPlayTypeEnum.CLASSIC_FREE);case E.ShareType.friendGoldTeamShare.key:case E.ShareType.friendGoldTeamDirShare.key:return void b.FriendTeamModel.instance.dealEnterTeamByLink(+o.friendTeamid,b.SelectPlayTypeEnum.CLASSIC_GOLD);case E.ShareType.friendMultTeamShare.key:case E.ShareType.friendMultTeamDirShare.key:return void b.FriendTeamModel.instance.dealEnterTeamByLink(+o.friendTeamid,b.SelectPlayTypeEnum.MULT);case E.ShareType.teamFriendCallStart.key:case E.ShareType.teamFriendCallPrepare.key:case E.ShareType.goldInlineTeamAdShare.key:case E.ShareType.goldInlineTeamShare.key:case E.ShareType.goldInlineTeamDirShare.key:return void b.FriendTeamModel.instance.dealEnterTeamByLink(+o.friendTeamid,+(o.friendTeamTab||0));case E.ShareType.hallShare.key:return void h.ActivityShareModel.instance.awardAppShowByShare(+o.inviterId,+o.shareTime,this.convertCallback(t));case E.ShareType.goldenEggTicketAssist.key:return void S.MatchShareModel.instance.matchShareAssist(S.MatchShareAssistScene.GOLDEN_EGG_TICKET,+(o.inviterId||0),+(o.inviterChannel||0),+(o.matchID||0),+(o.matchSubID||0),+(o.shareTime||0));case E.ShareType.welfareTicketAssist.key:return void S.MatchShareModel.instance.matchShareAssist(S.MatchShareAssistScene.WELFARE_TICKET,+(o.inviterId||0),+(o.inviterChannel||0),+(o.matchID||0),+(o.matchSubID||0),+(o.shareTime||0));case E.ShareType.goldenEggSignUpAssist.key:return void S.MatchShareModel.instance.matchShareAssist(S.MatchShareAssistScene.GOLDEN_EGG_SIGN_UP,+(o.inviterId||0),+(o.inviterChannel||0),+(o.matchID||0),+(o.matchSubID||0),+(o.shareTime||0));case E.ShareType.welfareSignUpAssist.key:return void S.MatchShareModel.instance.matchShareAssist(S.MatchShareAssistScene.WELFARE_SIGN_UP,+(o.inviterId||0),+(o.inviterChannel||0),+(o.matchID||0),+(o.matchSubID||0),+(o.shareTime||0));case E.ShareType.goldenEggTicketInvite.key:return void S.MatchShareModel.instance.matchShareInviteNew(T.MatchTypeEnum.FIX_PLAYER,S.MatchShareType.InviteNewUserGotTicket,+(o.inviterId||0),+(o.inviterChannel||0),+(o.matchID||0),+(o.matchSubID||0),+(o.shareTime||0));case E.ShareType.welfareTicketInvite.key:return void S.MatchShareModel.instance.matchShareInviteNew(T.MatchTypeEnum.FIX_TIME,S.MatchShareType.InviteNewUserGotTicket,+(o.inviterId||0),+(o.inviterChannel||0),+(o.matchID||0),+(o.matchSubID||0),+(o.shareTime||0));case E.ShareType.matchCreditInvite.key:return void S.MatchShareModel.instance.matchShareInviteNew(T.MatchTypeEnum.FIX_PLAYER,S.MatchShareType.InviteNewUserGotCredit,+(o.inviterId||0),+(o.inviterChannel||0),+(o.matchID||0),+(o.matchSubID||0),+(o.shareTime||0));case E.ShareType.goldenEggInvite.key:return void S.MatchShareModel.instance.goldenEggInviteNew(+(o.inviterId||0),+(o.inviterChannel||0),+(o.shareTime||0));case E.ShareType.inviteGift.key:return void R.InviteGiftModel.instance.reqInviteNew(+o.inviterId,+o.inviteGiftPos,function(){})}t&&t(0)}},e.prototype.isFromDesktop=function(t){return r.ANDROID_DESKTOP===t},e.prototype.isFromMyMini=function(t){return r.FIND_BAR_MINI_1===t||r.CHAT_PULL_MINI_1===t||r.FIND_BAR_MINI_2===t||r.CHAT_PULL_MINI_2===t},e.prototype.isFromPublicOA=function(t){return r.PUBLIC_OA_MENU===t||r.PUBLIC_OA_TEXT_LINK===t},e.prototype.convertCallback=function(t){var e=this;return t&&function(n){n?s.CoroutineManager.instance.wait(function(){return 0===l.UIManager.instance.list([p.UIType.Window]).length},function(){return t(1)},e):t(0)}},i([jsClass],e)}(u.BaseModel);n.AppShowOptionsModel=w,cc.systemEvent.once("GameRoot.inited",function(){d.ModelRoot.instance.add(w)}),cc._RF.pop()},{"../../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Manager/UIManager":"UIManager","../../../../Framework/Model/BaseModel":"BaseModel","../../../../Framework/Root/ModelRoot":"ModelRoot","../../../../Framework/UI/BaseUI":"BaseUI","../../../Activity/ActivityShare/ActivityShareModel":"ActivityShareModel","../../../Activity/Common/ActivityComModel":"ActivityComModel","../../../Activity/InviteGift/InviteGiftModel":"InviteGiftModel","../../../CreateRoomUI/CreateRoomModel/CreateRoomManagerModel":"CreateRoomManagerModel","../../../FriendTeam/FriendTeamModel":"FriendTeamModel","../../../Game/GuanDan/GameUI":"GameUI","../../../Hall/HallModel":"HallModel","../../../Login/LoginModel":"LoginModel","../../../Match/MatchModel":"MatchModel","../../../MatchShare/MatchShareModel":"MatchShareModel","../../../UserInfo/UserInfoModel":"UserInfoModel","../../Data/DataBfConfig":"DataBfConfig","../../Data/DataEvent":"DataEvent","../BfAnalytics/BfasManager":"BfasManager","../BfAnalytics/DataPointID":"DataPointID","../Platform/Const/PlatformEventType":"PlatformEventType","../Platform/PlatformManager":"PlatformManager","../Share/ShareManager":"ShareManager"}],Assert:[function(t,e,n){"use strict";cc._RF.push(e,"7153bruIyJBz5t1x8ppxm0Q","Assert");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.Assert=void 0;var a=function(){function t(){}return t.isNull=function(t,e){return null==t&&(console.error(e||"Assert - NullReferenceException: Object reference not set to an instance of an object"),!0)},t.isNotNull=function(t,e){return!this.isNull(t,e)},o([jsClass],t)}();n.Assert=a,cc._RF.pop()},{}],AsyncBox:[function(t,e,n){"use strict";cc._RF.push(e,"0f15cC7GEVEqYWeISJkpSej","AsyncBox");var o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.AsyncBox=void 0;var a=function(){function t(t,e){var n=this;this._isDone=!1,this._isSucceed=!1,this._thenArray=[],this._catchArray=[],this._finallyArray=[],this._tag=e,t.then(function(t){n._result=t,n._canceled?n.done(!1):n.done(!0)},function(t){n._reason=t,n.done(!1)})}return Object.defineProperty(t.prototype,"tag",{get:function(){return this._tag},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDone",{get:function(){return this._isDone},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSucceed",{get:function(){return this._isSucceed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"result",{get:function(){return this._result},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"reason",{get:function(){return this._reason},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canceled",{get:function(){return this._canceled},enumerable:!1,configurable:!0}),t.prototype.done=function(t){var e,n,a,i,r,s;if(!this._isDone){if(this._isDone=!0,this._isSucceed=t,t)try{for(var c=o(this._thenArray),l=c.next();!l.done;l=c.next()){var u=l.value;try{u&&u(this.result)}catch(g){console.error(g)}}}catch(y){e={error:y}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}else{this._isSucceed=!1;try{for(var d=o(this._catchArray),p=d.next();!p.done;p=d.next()){var h=p.value;try{h&&h(this.reason)}catch(g){console.error(g)}}}catch(I){a={error:I}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}}try{for(var _=o(this._finallyArray),f=_.next();!f.done;f=_.next()){var m=f.value;try{m&&m(this.result,this.reason)}catch(g){console.error(g)}}}catch(C){r={error:C}}finally{try{f&&!f.done&&(s=_.return)&&s.call(_)}finally{if(r)throw r.error}}this._thenArray=null,this._catchArray=null,this._finallyArray=null}},t.prototype.cancel=function(){this._canceled=!0},t.prototype.then=function(t){if(t)if(this._isDone){if(this.isSucceed)try{t(this._result)}catch(e){console.error(e)}}else this._thenArray.push(t)},t.prototype.catch=function(t){if(t)if(this._isDone){if(!this.isSucceed)try{t(this.reason)}catch(e){console.error(e)}}else this._catchArray.push(t)},t.prototype.finally=function(t){if(t)if(this._isDone)try{t(this._result,this.reason)}catch(e){console.error(e)}else this._finallyArray.push(t)},t}();n.AsyncBox=a,cc._RF.pop()},{}],AudioManager:[function(t,e,n){"use strict";cc._RF.push(e,"505d9l4WfxAlI5eIF7OwFvD","AudioManager");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.AudioManager=void 0;var r=t("../Root/ManagerRoot"),s=t("./BaseManager"),c=t("./CoroutineManager"),l=t("../../Core/Base/Data/DataSound"),u=t("./EventManager"),d=t("../../Core/Base/Module/Platform/Const/PlatformEventType"),p=t("../../Core/Setting/SettingModel"),h=t("./SubpackagesManager"),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._effectEnabled=!0,e._musicEnabled=!0,e}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return r.ManagerRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){fgui.UIConfig.buttonSound="audio/buttonClick",this.initListener(),this.initData()},e.prototype.initListener=function(){cc.game.on(cc.game.EVENT_SHOW,this._onAudioResume,this),u.EventManager.instance.on(d.PlatformEventType.AudioInterrupted,this,this._audioInterrupted)},e.prototype.initData=function(){this.initMusicVolume(),this.initEffectVolume()},e.prototype.initMusicVolume=function(){this.musicVolume=.13},e.prototype.initEffectVolume=function(){this.effectVolume=.8},e.prototype._audioInterrupted=function(t){console.log("===>_audioInterrupted",t),!t&&p.SettingModel.instance.data.Music&&(console.log("_audioInterrupted"),n.instance.musicEnabled=!0,n.instance.playMusic(l.DataSound.getLobbyBgm()))},e.prototype._onAudioResume=function(){var t=this;console.log("_onAudioResume"),c.CoroutineManager.instance.frameOnce(5,function(){return t._resume()},this)},e.prototype._resume=function(){console.log("===>_resume"),this.musicEnabled&&!this._musicPaused&&(null!=this._musicID?(cc.audioEngine.resumeMusic(),console.log(">----\x3eresum.musicVOlume",n.instance.musicVolume)):this._musicName&&(console.log(">----\x3eresume.musicName",this._musicName),this._playMusic()))},e.prototype._playMusic=function(){console.log("=>_playMusic: "+this._musicName);var t=this._musicName,e=cc.resources.get(t,cc.AudioClip);e?this._onMusicLoad(this._musicName,null,e):h.SubpackagesManager.instance.loadAudio(t,this._onMusicLoad.bind(this,this._musicName))},e.prototype._onMusicLoad=function(t,e,n){e?console.error("Load music error: "+t,e):this._musicName===t&&(console.log("Play music: "+t),this._musicID=cc.audioEngine.playMusic(n,!0))},Object.defineProperty(e.prototype,"effectVolume",{get:function(){return cc.audioEngine.getEffectsVolume()},set:function(t){console.log("===>effectVolume:",t),cc.audioEngine.setEffectsVolume(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"musicVolume",{get:function(){return cc.audioEngine.getMusicVolume()},set:function(t){console.log("===>musicVolume:",t),cc.audioEngine.setMusicVolume(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"musicEnabled",{get:function(){return this._musicEnabled},set:function(t){console.log("===>musicEnabled"),this._musicEnabled=t,t?this._resume():this._pause()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"effectEnabled",{get:function(){return this._effectEnabled},set:function(t){console.log("===>effectEnabled"),this._effectEnabled=t,fgui.GRoot.inst.muted=!t},enumerable:!1,configurable:!0}),e.prototype.playMusic=function(t,e){console.log("===>playMusic:",t,e,this._musicName),(e||t!==this._musicName)&&(this.stopMusic(),this._musicName=t,this._musicEnabled&&!this._musicPaused&&this._playMusic())},e.prototype.stopMusic=function(){console.log("=>stopMusic: "+this._musicName),cc.audioEngine.stopMusic(),this._musicID=null,this._musicName=null,this._musicPaused=!1},e.prototype.pauseMusic=function(){console.log("===>pauseMusic"),this._musicPaused=!0,this._pause()},e.prototype._pause=function(){cc.audioEngine.pauseMusic()},e.prototype.resumeMusic=function(){console.log("===>resumeMusic"),this._musicPaused=!1,this._resume()},e.prototype.pauseEffect=function(){console.log("===>pauseEffect"),this._effectPaused=!0},e.prototype.resumeEffect=function(){console.log("===>pauseEffect"),this._effectPaused=!1},e.prototype.playEffect=function(t){if(console.log("===>playEffect",t),t){if(this._effectEnabled&&!this._effectPaused){var e=t,n=cc.resources.get(e,cc.AudioClip);n?this._onEffectLoad(t,null,n):h.SubpackagesManager.instance.loadAudio(e,this._onEffectLoad.bind(this,t))}}else console.error("Play sound error: soundName is null!")},e.prototype._onEffectLoad=function(t,e,n){e?console.error("Load sound error: "+t,e):cc.audioEngine.playEffect(n,!1)},e.prototype.playEffectRemote=function(t,e){var n=this;console.log("===>playEffectRemote"),t?(console.log("Play sound: "+t),cc.assetManager.loadRemote(t,{ext:".mp3"},function(o,a){o?console.error("Load sound error: "+t,o):(console.log("Play sound: "+t),n._playEffect(a,e))})):console.error("Play sound error: soundName is null!")},e.prototype._playEffect=function(t,e){e&&e(0);var n=cc.audioEngine.playEffect(t,!1);e&&cc.audioEngine.setFinishCallback(n,function(){return e(1)})},n=i([jsClass],e)}(s.BaseManager);n.AudioManager=_,cc._RF.pop()},{"../../Core/Base/Data/DataSound":"DataSound","../../Core/Base/Module/Platform/Const/PlatformEventType":"PlatformEventType","../../Core/Setting/SettingModel":"SettingModel","../Root/ManagerRoot":"ManagerRoot","./BaseManager":"BaseManager","./CoroutineManager":"CoroutineManager","./EventManager":"EventManager","./SubpackagesManager":"SubpackagesManager"}],AuthProtocol:[function(t,e,n){"use strict";cc._RF.push(e,"12754MWRghHnqUHmhe0vpSg","AuthProtocol");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.AuthProtocol=void 0;var i=t("../Base/Processid"),r=t("../Base/ProtocolManager");(function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.auth,e.xyid=award_cli.ClientXYID.kReqAwardInfo,e}return a(e,t),e.prototype.pack=function(){return award_cli.ReqAwardInfo.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,award_cli.ReqAwardInfo.decode(t))},e}(award_cli.ReqAwardInfo);t.ReqAwardInfo=e,r.ProtocolManager.instance.setProtocol(i.Processid.auth,award_cli.ClientXYID.kReqAwardInfo,e);var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.auth,e.xyid=award_cli.ClientXYID.kRespAwardInfo,e}return a(e,t),e.prototype.pack=function(){return award_cli.RespAwardInfo.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,award_cli.RespAwardInfo.decode(t))},e}(award_cli.RespAwardInfo);t.RespAwardInfo=n,r.ProtocolManager.instance.setProtocol(i.Processid.auth,award_cli.ClientXYID.kRespAwardInfo,n)})(n.AuthProtocol||(n.AuthProtocol={})),cc._RF.pop()},{"../Base/Processid":"Processid","../Base/ProtocolManager":"ProtocolManager"}],AwardModel:[function(t,e,n){"use strict";cc._RF.push(e,"0c73fN5CblNJ505E6GbNmR4","AwardModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.AwardModel=void 0;var c=t("../../Framework/Model/BaseModel"),l=t("../../Framework/Root/ModelRoot"),u=t("../Base/Data/DataProps"),d=t("../Base/Data/DataRes"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return l.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.getAwardsFormat=function(t){var e,n,o=[];if(t.asr&&0!==t.asr){var a=this.adaptGoldRes(t.asr);o.push({awardType:u.PropTypeEnum.GOLD,count:t.asr,resName:a})}if(t.yb&&0!==t.yb&&(a=this.adaptDiamondRes(t.yb),o.push({awardType:u.PropTypeEnum.DIAMOND,count:t.yb,resName:a})),t.props)try{for(var i=r(Object.entries(t.props)),c=i.next();!c.done;c=i.next()){var l=s(c.value,2),d=l[0],p=l[1],h=this.adaptPropRes(+d,+p);void 0!==h&&o.push({awardType:h.type,count:p,resName:h.res,awardDesc:h.awardDesc})}}catch(_){e={error:_}}finally{try{c&&!c.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return o},e.prototype.adaptAwardsFormat=function(t){var e={};return e.asr=t.sr||0,e.yb=t.yb||0,e.props=t.prop||{},e},e.prototype.adaptGoldRes=function(t){return t>0&&t<=3e3?d.Res.GOLD2:t>3e3&&t<=1e4?d.Res.GOLD3:d.Res.GOLD7},e.prototype.adaptDiamondRes=function(t){return t>0&&t<=30?d.Res.DIAMOND1:t>30&&t<=50?d.Res.DIAMOND2:d.Res.DIAMOND7},e.prototype.adaptPropRes=function(t,e){var n=u.DataProps.instance.isPhoneFeePropID(t),o=u.DataProps.instance.getPropConfigByID(t);if(n){var a=u.DataProps.instance.getPropList()["phoneFee"+e];return a?(o.res=a.res,o.awardDesc=a.name,o):null}return o&&o.awardDesc?(o.awardDesc=o.awardDesc+(e>1?"x"+e.toString():""),o):o},i([jsClass],e)}(c.BaseModel);n.AwardModel=p,cc.systemEvent.once("GameRoot.inited",function(){l.ModelRoot.instance.add(p)}),cc._RF.pop()},{"../../Framework/Model/BaseModel":"BaseModel","../../Framework/Root/ModelRoot":"ModelRoot","../Base/Data/DataProps":"DataProps","../Base/Data/DataRes":"DataRes"}],AwardProtocol:[function(t,e,n){"use strict";cc._RF.push(e,"de003o9n8dBc60M/yqg7jlc","AwardProtocol");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.AwardProtocol=void 0;var i=t("../Base/Processid"),r=t("../Base/ProtocolManager");(function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.award,e.xyid=award_cli.ClientXYID.kReqAwardInfo,e}return a(e,t),e.prototype.pack=function(){return award_cli.ReqAwardInfo.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,award_cli.ReqAwardInfo.decode(t))},e}(award_cli.ReqAwardInfo);t.ReqAwardInfo=e,r.ProtocolManager.instance.setProtocol(i.Processid.award,award_cli.ClientXYID.kReqAwardInfo,e);var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.award,e.xyid=award_cli.ClientXYID.kRespAwardInfo,e}return a(e,t),e.prototype.pack=function(){return award_cli.RespAwardInfo.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,award_cli.RespAwardInfo.decode(t))},e}(award_cli.RespAwardInfo);t.RespAwardInfo=n,r.ProtocolManager.instance.setProtocol(i.Processid.award,award_cli.ClientXYID.kRespAwardInfo,n);var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.award,e.xyid=award_cli.ClientXYID.kReqJoin,e}return a(e,t),e.prototype.pack=function(){return award_cli.ReqJoin.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,award_cli.ReqJoin.decode(t))},e}(award_cli.ReqJoin);t.ReqJoin=o,r.ProtocolManager.instance.setProtocol(i.Processid.award,award_cli.ClientXYID.kReqJoin,o);var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.award,e.xyid=award_cli.ClientXYID.kRespJoin,e}return a(e,t),e.prototype.pack=function(){return award_cli.RespJoin.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,award_cli.RespJoin.decode(t))},e}(award_cli.RespJoin);t.RespJoin=s,r.ProtocolManager.instance.setProtocol(i.Processid.award,award_cli.ClientXYID.kRespJoin,s);var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.award,e.xyid=award_cli.ClientXYID.kHeartBeat,e}return a(e,t),e.prototype.pack=function(){return award_cli.HeartBeat.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,award_cli.HeartBeat.decode(t))},e}(award_cli.HeartBeat);t.HeartBeat=c,r.ProtocolManager.instance.setProtocol(i.Processid.award,award_cli.ClientXYID.kHeartBeat,c)})(n.AwardProtocol||(n.AwardProtocol={})),cc._RF.pop()},{"../Base/Processid":"Processid","../Base/ProtocolManager":"ProtocolManager"}],AwardUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"2650aVjU8NFsJtYmsIPRQIP","AwardUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./AwardUI_NewPlayer"),a=t("./AwardUI_MainPanelNewPlayer"),i=t("./AwardUI_sweep_jiangli"),r=t("./AwardUI_MainPanel"),s=t("./AwardUI_Window"),c=t("./AwardUI_AwardItem"),l=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default)},t}();n.default=l,cc._RF.pop()},{"./AwardUI_AwardItem":"AwardUI_AwardItem","./AwardUI_MainPanel":"AwardUI_MainPanel","./AwardUI_MainPanelNewPlayer":"AwardUI_MainPanelNewPlayer","./AwardUI_NewPlayer":"AwardUI_NewPlayer","./AwardUI_Window":"AwardUI_Window","./AwardUI_sweep_jiangli":"AwardUI_sweep_jiangli"}],AwardUINewPlayer:[function(t,e,n){"use strict";cc._RF.push(e,"0f862FAUpJM7bXp54ZkTRIX","AwardUINewPlayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.AwardUINewPlayer=n.NewPlayerAwardSourceEnum=void 0;var c,l=t("../../Framework/Manager/EventManager"),u=t("../../Framework/UI/FadeUI"),d=t("../Base/Data/DataProps"),p=t("../Base/Data/DataRes"),h=t("../Base/Data/DatazOrder"),_=t("../Base/Data/DataSpineAni"),f=t("../Base/Module/BfAnalytics/BfasManager"),m=t("../Base/Module/BfAnalytics/DataPointID"),g=t("../Base/Utils/UtilCC"),y=t("../Base/Utils/UtilView"),I=t("../Base/View/UIHelp"),C=t("../Game/GuanDan/GameEvent"),M=t("../Game/GuanDan/Model/GameModel"),v=t("../Hall/HallModel"),E=t("../UserInfo/UserInfoModel");(function(t){t[t.FINISH=0]="FINISH",t[t.SKIP=1]="SKIP"})(c=n.NewPlayerAwardSourceEnum||(n.NewPlayerAwardSourceEnum={}));var A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.getPkgName=function(){return"AwardUI"},e.getCompName=function(){return"MainPanelNewPlayer"},Object.defineProperty(e,"sortingOrder",{get:function(){return h.DataZOrder.MAX},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initUI(),f.BfasManager.instance.evtUserLinkPoint(m.UserConvertLinkPointID.FINISH_NEW_GUIDE.eventid,m.UserConvertLinkPointID.FINISH_NEW_GUIDE.eventName)},e.prototype.initListener=function(){this.view.m_Window.m_continueGameBtn.onClick(this.onBtnContinueGame,this),this.view.m_Window.m_backHallBtn.onClick(this.onClickBackHall,this),this.view.m_Window.m_bg_touch.onClick(this.onClickBackHall,this)},e.prototype.initUI=function(){this.initSpine(),this.adaptFullScreen()},e.prototype.initSpine=function(){this.view.m_Window.m_spineDot.node.removeAllChildren(),g.UtilCC.instantiatePrefab(_.DataSpineAniPath.ANI_AWARD_GXHD,function(t){t.getComponent(sp.Skeleton).setCompleteListener(function(e){"chusheng"===(e.animation?e.animation.name:"")&&t.getComponent(sp.Skeleton).setAnimation(0,"loop",!0)}),t.getComponent(sp.Skeleton).setAnimation(0,"chusheng",!1)},this.view.m_Window.m_spineDot.node)},e.prototype.adaptFullScreen=function(){y.UtilView.isFullScreen()&&(this.view.m_Window.m_spineDot.x-=120)},e.prototype.showUI=function(t){var e,n;this.view.m_Window.m_c_rewardType.selectedIndex=t;var o=[];if(E.UserInfoModel.instance&&E.UserInfoModel.instance.getNewPlayerAwards()){var a=E.UserInfoModel.instance.getNewPlayerAwards();try{for(var i=r(Object.entries(a.props)),c=i.next();!c.done;c=i.next()){var l=s(c.value,2),u=l[0],h=l[1],_=d.DataProps.instance.getPropType(Number(u));if(d.PropTypeEnum.SINGLE===_){var f=d.DataProps.instance.getPropRes(Number(u));o.push({awardType:_,count:Number(h),resName:f})}}}catch(m){e={error:m}}finally{try{c&&!c.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}a.asr&&o.push({awardType:d.PropTypeEnum.GOLD,count:Number(a.asr),resName:p.Res.GOLD7})}else o=[{awardType:d.PropTypeEnum.SINGLE,count:1,resName:p.Res.SINGLE_NOTECARD},{awardType:d.PropTypeEnum.GOLD,count:6e3,resName:p.Res.GOLD7}];this.init(o)},e.prototype.init=function(t){console.log("----\x3eAwardUINewPlayer.init:",t);var e=this.view.m_Window.m_ListAward;e.itemRenderer=function(e,n){var o=t[e];o&&(-1===o.resName.indexOf("http")?n.icon=I.UIHelp.getPropIcon(o.awardType,o.resName):n.icon=o.resName,n.m_txtNum.text="x"+o.count,n.m_chuxian.play())},e.setVirtual(),e.numItems=t.length,e.refreshVirtualList(),this.view.m_Window.m_chuxian.play()},e.prototype.onBtnContinueGame=function(){console.log("----\x3e \u7ee7\u7eed\u6e38\u620f"),c.FINISH===this.view.m_Window.m_c_rewardType.selectedIndex?f.BfasManager.instance.evt(m.NewPlayerPointID.touchGo.eventid,null,!0,m.NewPlayerPointID.touchGo.eventName):c.SKIP===this.view.m_Window.m_c_rewardType.selectedIndex&&f.BfasManager.instance.evt(m.NewPlayerPointID.skipGoGame.eventid,null,!0,m.NewPlayerPointID.skipGoGame.eventName),l.EventManager.instance.emit(C.GameEvent.GUIDE_SHOW_NO_TOUCH_UI,!1),M.GameModel.instance.setGuideState(M.GuideTypeEnum.FIRST_GAME),v.default.instance.doQuickStartToGame(),this.onExitClick()},e.prototype.onClickBackHall=function(){console.log("----\x3e \u8fd4\u56de\u5927\u5385"),l.EventManager.instance.emit(C.GameEvent.GUIDE_SHOW_NO_TOUCH_UI,!1),M.GameModel.instance.setGuideState(M.GuideTypeEnum.FIRST_GAME),l.EventManager.instance.emit(C.GameEvent.BACKTOLOBBY),this.onExitClick()},i([jsClass],e)}(u.FadeUI);n.AwardUINewPlayer=A,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataProps":"DataProps","../Base/Data/DataRes":"DataRes","../Base/Data/DataSpineAni":"DataSpineAni","../Base/Data/DatazOrder":"DatazOrder","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Utils/UtilCC":"UtilCC","../Base/Utils/UtilView":"UtilView","../Base/View/UIHelp":"UIHelp","../Game/GuanDan/GameEvent":"GameEvent","../Game/GuanDan/Model/GameModel":"GameModel","../Hall/HallModel":"HallModel","../UserInfo/UserInfoModel":"UserInfoModel"}],AwardUI_AwardItem:[function(t,e,n){"use strict";cc._RF.push(e,"8f4easvAKNKooGjDEkUOWQZ","AwardUI_AwardItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("AwardUI","AwardItem")},e.prototype.onConstruct=function(){this.m_txtNum=this.getChildAt(3),this.m_chuxian=this.getTransitionAt(0)},e.URL="ui://u65facwuyx5qc",e}(fgui.GLabel);n.default=i,cc._RF.pop()},{}],AwardUI_MainPanelNewPlayer:[function(t,e,n){"use strict";cc._RF.push(e,"98f2d99hjtMuYVOweSLA8ws","AwardUI_MainPanelNewPlayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("AwardUI","MainPanelNewPlayer")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://u65facwujmnqq",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],AwardUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"2e776A5h0lIuZVsmhd/5pc8","AwardUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("AwardUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://u65facwuyx5q0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],AwardUI_NewPlayer:[function(t,e,n){"use strict";cc._RF.push(e,"b5100oP8EZD0bDQUzDr9/kU","AwardUI_NewPlayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("AwardUI","NewPlayer")},e.prototype.onConstruct=function(){this.m_c_rewardType=this.getControllerAt(0),this.m_spineDot=this.getChildAt(0),this.m_ListAward=this.getChildAt(1),this.m_tipImg=this.getChildAt(2),this.m_bg_touch=this.getChildAt(3),this.m_continueGameBtn=this.getChildAt(4),this.m_backHallBtn=this.getChildAt(5),this.m_chuxian=this.getTransitionAt(0)},e.URL="ui://u65facwujmnqk",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],AwardUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"929d08gfBNExYAR/ZFKGLi5","AwardUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("AwardUI","Window")},e.prototype.onConstruct=function(){this.m_spineDot=this.getChildAt(0),this.m_btnConfirm=this.getChildAt(1),this.m_listAward=this.getChildAt(2),this.m_txtTitle=this.getChildAt(3)},e.URL="ui://u65facwuyx5q1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],AwardUI_sweep_jiangli:[function(t,e,n){"use strict";cc._RF.push(e,"9cda98cCyRJZ5HHwTz48Rvn","AwardUI_sweep_jiangli");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("AwardUI","sweep_jiangli")},e.prototype.onConstruct=function(){this.m_sweep=this.getTransitionAt(0)},e.URL="ui://u65facwux6s8i",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],AwardUI:[function(t,e,n){"use strict";cc._RF.push(e,"404abX4xQBJtq6W7//YBN2l","AwardUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.AwardUI=void 0;var r=t("../../Framework/UI/FadeUI"),s=t("../Base/Data/DatazOrder"),c=t("../Base/Data/DataSpineAni"),l=t("../Base/Utils/UtilCC"),u=t("../Base/Utils/UtilView"),d=t("../Base/View/UIHelp"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sortingOrder",{get:function(){return s.DataZOrder.MAX},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initUI()},e.prototype.initListener=function(){this.view.m_Window.m_btnConfirm.onClick(this.onExitClick,this)},e.prototype.initUI=function(){this.initSpine(),this.adaptFullScreen()},e.prototype.initSpine=function(){this.view.m_Window.m_spineDot.node.removeAllChildren(),l.UtilCC.instantiatePrefab(c.DataSpineAniPath.ANI_AWARD_GXHD,function(t){t.getComponent(sp.Skeleton).setCompleteListener(function(e){"chusheng"===(e.animation?e.animation.name:"")&&t.getComponent(sp.Skeleton).setAnimation(0,"loop",!0)}),t.getComponent(sp.Skeleton).setAnimation(0,"chusheng",!1)},this.view.m_Window.m_spineDot.node)},e.prototype.adaptFullScreen=function(){u.UtilView.isFullScreen()&&(this.view.m_Window.m_spineDot.x-=120)},e.prototype.init=function(t,e){console.log(">----\x3eAwardUI.init: ",t);var n=this.view.m_Window.m_listAward;n.itemRenderer=function(e,n){var o=t[e];o&&(-1===o.resName.indexOf("http")?n.icon=d.UIHelp.getPropIcon(o.awardType,o.resName):n.icon=o.resName,o.awardDesc?n.m_txtNum.text=o.awardDesc:n.m_txtNum.text="x"+o.count,n.m_chuxian.play())},n.setVirtual(),n.numItems=t.length,n.refreshVirtualList(),e?(this.view.m_Window.m_txtTitle.visible=!0,this.view.m_Window.m_txtTitle.text=e):this.view.m_Window.m_txtTitle.visible=!1},i([jsClass],e)}(r.FadeUI);n.AwardUI=p,cc._RF.pop()},{"../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataSpineAni":"DataSpineAni","../Base/Data/DatazOrder":"DatazOrder","../Base/Utils/UtilCC":"UtilCC","../Base/Utils/UtilView":"UtilView","../Base/View/UIHelp":"UIHelp"}],BankruptModel:[function(t,e,n){"use strict";cc._RF.push(e,"c2c8anF94xAcaLv4m+Q3tIv","BankruptModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.BankruptModel=void 0;var r=t("../../Framework/Manager/EventManager"),s=t("../../Framework/Manager/UIManager"),c=t("../../Framework/Model/BaseModel"),l=t("../../Framework/Root/ModelRoot"),u=t("../Base/Data/DataEvent"),d=t("./BankruptProxy"),p=t("./BankruptUI"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._bankruptInfo={lowAwardCnt:0,lowAwardLimit:0,baseAwardValue:0,triggerGoldLine:1e3},e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return l.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return d.BankruptProxy.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bankruptInfo",{get:function(){return this._bankruptInfo},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){r.EventManager.instance.on(u.DataEvent.EnterHallSuccess,this,this.onEnterHallSuccess)},e.prototype.onEnterHallSuccess=function(){var t=this;this.proxy.reqBankruptInfo(function(e,n){e&&(t._bankruptInfo=n)})},e.prototype.showBankrupt=function(t){null!=t?s.UIManager.instance.open(p.BankruptUI,t):s.UIManager.instance.open(p.BankruptUI)},e.prototype.reqBankruptAward=function(t,e,n,o,a){var i=this;this.proxy.reqBankruptAward(t,e,function(t,e,n){t&&(i._bankruptInfo.lowAwardCnt+=1),a&&a(t,n)},n,o)},e.prototype.getTriggerBankruptLine=function(){return this._bankruptInfo.triggerGoldLine},i([jsClass],e)}(c.BaseModel);n.BankruptModel=h,cc.systemEvent.once("GameRoot.inited",function(){l.ModelRoot.instance.add(h)}),cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/Model/BaseModel":"BaseModel","../../Framework/Root/ModelRoot":"ModelRoot","../Base/Data/DataEvent":"DataEvent","./BankruptProxy":"BankruptProxy","./BankruptUI":"BankruptUI"}],BankruptProxy:[function(t,e,n){"use strict";cc._RF.push(e,"d73f5srf2hNfILQRUBtiM2e","BankruptProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.BankruptProxy=void 0;var r,s=t("../../Framework/Proxy/BaseProxy"),c=t("../../Framework/Root/ProxyRoot"),l=t("../Base/Data/DataBfConfig"),u=t("../Base/Data/DataScript"),d=t("../Base/Module/Network/protocol/AwardProtocol"),p=t("../Base/Module/Network/SocketUtils"),h=t("../Base/Module/Share/ShareManager");(function(t){t[t.GET_AWARD=0]="GET_AWARD",t[t.GET_ERROR=1]="GET_ERROR",t[t.GET_LIMIT=2]="GET_LIMIT"})(r||(r={}));var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return c.ProxyRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.reqBankruptInfo=function(t){var e=new d.AwardProtocol.ReqAwardInfo({type:u.DataScript.bankruptAward.id,gameid:l.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("mini=1;func="+u.DataScript.bankruptAward.func.query+";")});p.SocketUtils.instance.request(e,function(e){if(0===e.flag){var n=bf33.Utils.bytesToString(e.msg).split("|")||[];if(0===Number(n[0])){var o={lowAwardCnt:+n[1],lowAwardLimit:+n[2],baseAwardValue:JSON.parse(n[3]).asr,triggerGoldLine:+n[4]||1e3};t&&t(!0,o)}}})},e.prototype.reqBankruptAward=function(t,e,n,o,a){var i="boolean"==typeof o?h.ShareCheckTypeEnum.CHECK_BY_LOAD_IMG:h.ShareCheckTypeEnum.CHECK_BY_TIME,s=o?h.ShareLoadImgTypeEnum.SUCCESSED:h.ShareLoadImgTypeEnum.FAILED;h.ShareCheckTypeEnum.CHECK_BY_VIDEO!==a&&h.ShareCheckTypeEnum.DIRECT_GET!==a||(i=a);var c=new d.AwardProtocol.ReqAwardInfo({type:u.DataScript.bankruptAward.id,gameid:l.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("mini=1;func="+u.DataScript.bankruptAward.func.getBankruptAward+";sec="+t+";roomid="+e+";checktype="+i+",shareflag="+s+";")});p.SocketUtils.instance.request(c,function(t){if(0===t.flag){var e=bf33.Utils.bytesToString(t.msg).split("|")||[];console.log("=====> bankrupt info: ",e);var o=r.GET_AWARD==Number(e[0]),a=!1;r.GET_LIMIT===Number(e[0])?a=!0:r.GET_AWARD===Number(e[0])&&(a=!0),o?n&&n(!0,a,JSON.parse(e[2]).asr):n&&n(!1,a)}})},i([jsClass],e)}(s.BaseProxy);n.BankruptProxy=_,cc.systemEvent.once("GameRoot.inited",function(){c.ProxyRoot.instance.add(_)}),cc._RF.pop()},{"../../Framework/Proxy/BaseProxy":"BaseProxy","../../Framework/Root/ProxyRoot":"ProxyRoot","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataScript":"DataScript","../Base/Module/Network/SocketUtils":"SocketUtils","../Base/Module/Network/protocol/AwardProtocol":"AwardProtocol","../Base/Module/Share/ShareManager":"ShareManager"}],BankruptUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"af8408VW4dA9qaWn8EDSikQ","BankruptUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./BankruptUI_BtnSpineYellow"),a=t("./BankruptUI_MainPanel"),i=t("./BankruptUI_Window"),r=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default)},t}();n.default=r,cc._RF.pop()},{"./BankruptUI_BtnSpineYellow":"BankruptUI_BtnSpineYellow","./BankruptUI_MainPanel":"BankruptUI_MainPanel","./BankruptUI_Window":"BankruptUI_Window"}],BankruptUI_BtnSpineYellow:[function(t,e,n){"use strict";cc._RF.push(e,"b1c031qHrJAeav5XKvo8YyG","BankruptUI_BtnSpineYellow");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("BankruptUI","BtnSpineYellow")},e.prototype.onConstruct=function(){this.m_cState=this.getControllerAt(0),this.m_spineNode=this.getChildAt(0),this.m_gFnt=this.getChildAt(5)},e.URL="ui://h5vu8mb1wtppz",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],BankruptUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"9415bsJbRhCEZuulB8+hW8h","BankruptUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("BankruptUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://h5vu8mb1z3rp0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],BankruptUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"fbe6cCZnuxLzYtJ3uLFLY/R","BankruptUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("BankruptUI","Window")},e.prototype.onConstruct=function(){this.m_type=this.getControllerAt(0),this.m_btnClose=this.getChildAt(1),this.m_btnDirectGet=this.getChildAt(2),this.m_btnGet=this.getChildAt(3),this.m_btnNormal=this.getChildAt(4),this.m_btnDouble=this.getChildAt(5)},e.URL="ui://h5vu8mb1z3rp1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],BankruptUI:[function(t,e,n){"use strict";cc._RF.push(e,"3aec9bQYzJDQ5RFSa6JePC8","BankruptUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.BankruptUI=void 0;var r,s=t("../../Framework/Manager/EventManager"),c=t("../../Framework/Manager/UIManager"),l=t("../../Framework/UI/FadeUI"),u=t("../Activity/Advertise/VideoAdManager"),d=t("../Award/AwardModel"),p=t("../Award/AwardUI"),h=t("../Base/Data/DataBfConfig"),_=t("../Base/Data/DataEvent"),f=t("../Base/Data/DataLocalStorageKey"),m=t("../Base/Data/DataSpineAni"),g=t("../Base/Module/BfAnalytics/BfasManager"),y=t("../Base/Module/BfAnalytics/DataPointID"),I=t("../Base/Module/Share/ShareManager"),C=t("./BankruptModel"),M=t("../Base/Utils/UtilCC");(function(t){t[t.DOUBLE=0]="DOUBLE",t[t.SINGLE=1]="SINGLE"})(r||(r={}));var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._roomID=0,e}return a(e,t),e.prototype.setView=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this._view=t,e.length>0&&(this._roomID=e[0])},Object.defineProperty(e,"willShowLoading",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return C.BankruptModel.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initData(),this.initListener(),this.initUI()},e.prototype.initData=function(){f.DataLocalStorage.addBankruptTimes()},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onClickClose,this),this.view.m_Window.m_btnDirectGet.onClick(this.onClickDirectGet,this),this.view.m_Window.m_btnGet.onClick(this.onClickDouble,this),this.view.m_Window.m_btnNormal.onClick(this.onClickVideo,this),this.view.m_Window.m_btnDouble.onClick(this.onClickDouble,this)},e.prototype.initUI=function(){this.mode.bankruptInfo.lowAwardLimit-this.mode.bankruptInfo.lowAwardCnt>0?(this.view.m_Window.m_btnGet.m_cState.selectedIndex=r.DOUBLE,this.view.m_Window.m_btnDirectGet.visible=!0,this.sendEvt(y.ActivityPointID.bankruptScene.show)):(this.view.m_Window.m_btnGet.m_cState.selectedIndex=r.SINGLE,this.view.m_Window.m_btnDirectGet.visible=!1,this.view.m_Window.m_type.selectedIndex=1,this.sendEvt(y.ActivityPointID.bankruptScene.showNotAward)),this.addBtnSpine()},e.prototype.addBtnSpine=function(){var t=this;M.UtilCC.instantiatePrefab(m.DataSpineAniPath.ANI_BTN_YELLOW,function(e){var n=e;n.getComponent(sp.Skeleton).setCompleteListener(function(e){"btn_1"===(e.animation?e.animation.name:"")&&(t.view.m_Window.m_btnGet.getChild("gFnt").visible=!0,t.setSpineAnim(n,"btn_2",!0))}),t.setSpineAnim(e,"btn_1",!1)},this.view.m_Window.m_btnGet.m_spineNode.node)},e.prototype.setSpineAnim=function(t,e,n){t.getComponent(sp.Skeleton).setAnimation(0,e,n)},e.prototype.onBankruptAwardCallback=function(t,e,n){if(t){var o=d.AwardModel.instance.getAwardsFormat({asr:e});c.UIManager.instance.open(p.AwardUI).then(function(t){t.init(o)}),this.onExitClick()}else n&&n()},e.prototype.onClickClose=function(){var t=this;r.DOUBLE===this.view.m_Window.m_btnGet.m_cState.selectedIndex?(C.BankruptModel.instance.reqBankruptAward(0,this._roomID,!0,I.ShareCheckTypeEnum.DIRECT_GET,function(e,n){t.onBankruptAwardCallback(e,n)}),this.sendEvt(y.ActivityPointID.bankruptScene.doubleStateClickClose)):(this.onExitClick(),this.sendEvt(y.ActivityPointID.bankruptScene.normalStateClickClose))},e.prototype.onClickDirectGet=function(){var t=this;C.BankruptModel.instance.reqBankruptAward(0,this._roomID,!0,I.ShareCheckTypeEnum.DIRECT_GET,function(e,n){t.onBankruptAwardCallback(e,n)}),this.sendEvt(y.ActivityPointID.bankruptScene.doubleStateClickDirect)},e.prototype.onClickDouble=function(){var t=this;r.SINGLE===this.view.m_Window.m_btnGet.m_cState.selectedIndex?this.sendEvt(y.ActivityPointID.bankruptScene.touchDouble):this.sendEvt(y.ActivityPointID.bankruptScene.doubleStateClickShare),I.ShareManager.instance.share(I.ShareType.bankruptcy,null,function(e,n){cc.sys.OS_WINDOWS!==cc.sys.os||h.DataBfConfig.isNormalEnv()?C.BankruptModel.instance.reqBankruptAward(e,t._roomID,n,null,function(e,n){t.onBankruptAwardCallback(e,n,function(){s.EventManager.instance.emit(_.DataEvent.ToastData,Math.random()>.5?"\u5f53\u524d\u7f51\u7edc\u4e0d\u597d\uff0c\u8bf7\u91cd\u65b0\u5206\u4eab\u54e6":"\u5206\u4eab\u5931\u8d25\uff0c\u6362\u4e2a\u597d\u53cb\u8bd5\u8bd5")})}):C.BankruptModel.instance.reqBankruptAward(0,t._roomID,!0,null,function(e,n){t.onBankruptAwardCallback(e,n)})})},e.prototype.onClickVideo=function(){var t=this;cc.sys.OS_WINDOWS!==cc.sys.os||h.DataBfConfig.isNormalEnv()?(this.sendEvt(y.ActivityPointID.bankruptScene.normalStateClickShare),u.VideoAdManager.instance.showVideoAd(function(){},function(e){e&&C.BankruptModel.instance.reqBankruptAward(0,t._roomID,!0,I.ShareCheckTypeEnum.CHECK_BY_VIDEO,function(e,n){t.onBankruptAwardCallback(e,n)})})):C.BankruptModel.instance.reqBankruptAward(0,this._roomID,!0,I.ShareCheckTypeEnum.CHECK_BY_VIDEO,function(e,n){t.onBankruptAwardCallback(e,n)})},e.prototype.sendEvt=function(t){var e={time:f.DataLocalStorage.getBankruptTimes()};g.BfasManager.instance.sendEvt(t,e)},i([jsClass],e)}(l.FadeUI);n.BankruptUI=v,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/UI/FadeUI":"FadeUI","../Activity/Advertise/VideoAdManager":"VideoAdManager","../Award/AwardModel":"AwardModel","../Award/AwardUI":"AwardUI","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../Base/Data/DataSpineAni":"DataSpineAni","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Share/ShareManager":"ShareManager","../Base/Utils/UtilCC":"UtilCC","./BankruptModel":"BankruptModel"}],Base64:[function(t,e,n){"use strict";cc._RF.push(e,"0cbe0Yw6FxEapSjFgmSem9J","Base64");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.Base64=void 0;var a=function(){function t(){}return t.encode=function(t){var e,n,o,a,i,r,s,c="",l=0;for(t=this._utf8_encode(t);l<t.length;)a=(e=t.charCodeAt(l++))>>2,i=(3&e)<<4|(n=t.charCodeAt(l++))>>4,r=(15&n)<<2|(o=t.charCodeAt(l++))>>6,s=63&o,isNaN(n)?r=s=64:isNaN(o)&&(s=64),c=c+this._keyStr.charAt(a)+this._keyStr.charAt(i)+this._keyStr.charAt(r)+this._keyStr.charAt(s);return c},t.decode=function(t){var e,n,o,a,i,r,s="",c=0;for(t=t.replace(/[^A-Za-z0-9+/=]/g,"");c<t.length;)e=this._keyStr.indexOf(t.charAt(c++))<<2|(a=this._keyStr.indexOf(t.charAt(c++)))>>4,n=(15&a)<<4|(i=this._keyStr.indexOf(t.charAt(c++)))>>2,o=(3&i)<<6|(r=this._keyStr.indexOf(t.charAt(c++))),s+=String.fromCharCode(e),64!=i&&(s+=String.fromCharCode(n)),64!=r&&(s+=String.fromCharCode(o));return this._utf8_decode(s)},t._utf8_encode=function(t){t=t.replace(/rn/g,"n");for(var e="",n=0;n<t.length;n++){var o=t.charCodeAt(n);o<128?e+=String.fromCharCode(o):o>127&&o<2048?(e+=String.fromCharCode(o>>6|192),e+=String.fromCharCode(63&o|128)):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128),e+=String.fromCharCode(63&o|128))}return e},t._utf8_decode=function(t){for(var e,n="",o=0,a=0,i=0;o<t.length;)(a=t.charCodeAt(o))<128?(n+=String.fromCharCode(a),o++):a>191&&a<224?(i=t.charCodeAt(o+1),n+=String.fromCharCode((31&a)<<6|63&i),o+=2):(i=t.charCodeAt(o+1),e=t.charCodeAt(o+2),n+=String.fromCharCode((15&a)<<12|(63&i)<<6|63&e),o+=3);return n},t._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o([jsClass],t)}();n.Base64=a,cc._RF.pop()},{}],BaseBfas:[function(t,e,n){"use strict";cc._RF.push(e,"a884e04gB5KpabWV0n9itVD","BaseBfas"),Object.defineProperty(n,"__esModule",{value:!0}),n.BaseBfas=n.ClientType=void 0;var o,a,i=t("../../../../Framework/Utils/HttpUtil");(function(t){t[t.ANDROID=1]="ANDROID",t[t.IOS=2]="IOS",t[t.WIN_PC=11]="WIN_PC",t[t.WEB=12]="WEB"})(o=n.ClientType||(n.ClientType={})),function(t){t[t.LOGIN=4]="LOGIN",t[t.REGISTER=6]="REGISTER",t[t.RECHARGE=14]="RECHARGE",t[t.GAME_START=15]="GAME_START",t[t.LAUNCH=53]="LAUNCH",t[t.SHARE=4051]="SHARE"}(a||(a={}));var r=function(){function t(t,e,n,a){this.URL="https://bfas.bianfeng.com/bfrd/json",this.CACHE_LENGTH=20,this._ip="",this._events=[],this._groupID=t,this._appKey=e,this._clientType=n||0,this._serverType=[o.WIN_PC,o.WEB].includes(n)?13:14,this._version=a}return Object.defineProperty(t.prototype,"channel",{set:function(t){this._channel=t||"0"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ip",{set:function(t){t&&(this._ip=t)},enumerable:!1,configurable:!0}),t.prototype.share=function(t,e,n){this.sendAppData([this.getAppEvent(a.SHARE,"share",t,e,n)])},t.prototype.launch=function(t,e){this.sendAppData([this.getAppEvent(a.LAUNCH,"launch",t,e)])},t.prototype.evt=function(t,e,n,o,a,i){void 0===a&&(a=!1),i=i||"\u81ea\u5b9a\u4e49\u57cb\u70b9"+e;var r=this.getAppEvent(e,i,t,n,o);a?this.sendAppData([r]):(this._events.push(r),this._events.length>=this.CACHE_LENGTH&&this.sendEvents())},t.prototype.getAppEvent=function(t,e,n,o,a){var i={id:t+"",label:e,startTime:Date.now()+"",clientType:this._clientType,msgType:1,parameters:Object.assign({userName:n,userId:n,numId:n,channelName:this._channel,version:this._version},a),deviceProfile:{deviceId:o,ip:this._ip}};return console.log("BfAnalysis.appEvent:",i),i},t.prototype.sendEvents=function(){var t=this._events.splice(0,this.CACHE_LENGTH);t.length>0&&this.sendAppData(t)},t.prototype.sendAppData=function(t,e){console.log("BfAnalysis send "+this._groupID+"_"+this._appKey+":",t.map(function(t){return t.id}).join(",")),this.sendData({groupId:this._groupID+"",appKey:this._appKey+"",serverType:this._serverType,loginType:e,appEvents:t})},t.prototype.sendData=function(t,e){var n,o=this;void 0===e&&(e=1),i.HttpUtil.post(this.URL,t,(n={},n.Accept="application/json, text/plain, */*",n["Content-Type"]="application/json",n),!0).catch(function(){return e>0&&o.sendData(t,e-1)})},t}();n.BaseBfas=r,cc._RF.pop()},{"../../../../Framework/Utils/HttpUtil":"HttpUtil"}],BaseGameProtocol:[function(t,e,n){"use strict";cc._RF.push(e,"54475OljsNLcZvF5Dpb6u+4","BaseGameProtocol"),Object.defineProperty(n,"__esModule",{value:!0}),n.BaseGameProtocol=void 0;var o=t("./Processid"),a=t("../protocol/ClubGameProtocol"),i=function(){function t(t,e){if(this.processid=o.Processid.clubGame,t&&"object"==typeof t)for(var n in t)this[n]=t[n];e&&this.bistream(null,e)}return t.prototype.pack=function(){var t=this.bostream(),e={msgid:this.cmdid,msg_len:t.getBuffLen(),data:t.getBuff(),askid:0},n=new a.ClubGameProtocol.PushToServer(e);return this.processid=n.processid,this.xyid=n.xyid,n.pack()},t.prototype.unpack=function(t){this.bistream(t)},t}();n.BaseGameProtocol=i,cc._RF.pop()},{"../protocol/ClubGameProtocol":"ClubGameProtocol","./Processid":"Processid"}],BaseLobbyProtocol:[function(t,e,n){"use strict";cc._RF.push(e,"4f32dRBm71BnZzOp7QFAdmK","BaseLobbyProtocol"),Object.defineProperty(n,"__esModule",{value:!0}),n.BaseLobbyProtocol=void 0;n.BaseLobbyProtocol=function(t){if(t&&"object"==typeof t)for(var e in t)this[e]=t[e]},cc._RF.pop()},{}],BaseManager:[function(t,e,n){"use strict";cc._RF.push(e,"69658aNMWBERqoh2kmyEIns","BaseManager");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.BaseManager=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"isManager",{get:function(){return!0},enumerable:!1,configurable:!0}),i([jsClass],e)}(cc.Component);n.BaseManager=r,cc._RF.pop()},{}],BaseModel:[function(t,e,n){"use strict";cc._RF.push(e,"18204LZ2DZJkpI6g6rPrX7J","BaseModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.BaseModel=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"isModel",{get:function(){return!0},enumerable:!1,configurable:!0}),i([jsClass],e)}(cc.Component);n.BaseModel=r,cc._RF.pop()},{}],BaseProtocol:[function(t,e,n){"use strict";cc._RF.push(e,"9f77bMLOSVC961izHkPGegH","BaseProtocol");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.BaseProtocol=void 0;var i=t("../../../../Base/Module/Network/Base/ProtocolManager"),r=t("../../../../Base/Module/Network/Base/BaseGameProtocol");(function(t){var e,n=i.ProtocolManager.instance;(function(t){t[t.SCXY_FIRST=11201]="SCXY_FIRST",t[t.BXY_PLAYER_ENTER=11201]="BXY_PLAYER_ENTER",t[t.BXY_PLAYER_LEAVE=11202]="BXY_PLAYER_LEAVE",t[t.BXY_PLAYER_START=11203]="BXY_PLAYER_START",t[t.BXY_PLAYER_TIMER=11204]="BXY_PLAYER_TIMER",t[t.BXY_GAME_START=11205]="BXY_GAME_START",t[t.BXY_GAME_END=11206]="BXY_GAME_END",t[t.BXY_MESSAGEBOX=11207]="BXY_MESSAGEBOX",t[t.BXY_SHOWBTN=11208]="BXY_SHOWBTN",t[t.BXY_USE_PROP=11209]="BXY_USE_PROP",t[t.BXY_PLAYER_LEAVE_EX=11210]="BXY_PLAYER_LEAVE_EX",t[t.BXY_REQ_JIESAN=11212]="BXY_REQ_JIESAN",t[t.BXY_RESP_JIESAN=11213]="BXY_RESP_JIESAN",t[t.BXY_JIESAN_RESULT=11214]="BXY_JIESAN_RESULT",t[t.BXY_REQ_KICKPLAYER=11215]="BXY_REQ_KICKPLAYER",t[t.BXY_RESP_KICKPLAYER=11216]="BXY_RESP_KICKPLAYER",t[t.SCXY_FIRST_LAST=11219]="SCXY_FIRST_LAST"})(e=t.xyid||(t.xyid={}));var o=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.BXY_PLAYER_ENTER,n.numID=0,n.flag=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.numID=e.readInt(),this.flag=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeInt(this.numID),t.writeByte(this.flag),t},n}(r.BaseGameProtocol);t.msgPlayerEnter=o,n.setGameProtocol(e.BXY_PLAYER_ENTER,o);var s=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.BXY_PLAYER_LEAVE,n.numID=0,n.flag=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.numID=e.readInt(),this.flag=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeInt(this.numID),t.writeByte(this.flag),t},n}(r.BaseGameProtocol);t.msgPlayerLeave=s,n.setGameProtocol(e.BXY_PLAYER_LEAVE,s);var c=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.BXY_PLAYER_START,n.numID=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.numID=e.readInt(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeInt(this.numID),t},n}(r.BaseGameProtocol);t.msgPlayerStart=c,n.setGameProtocol(e.BXY_PLAYER_START,c);var l=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.BXY_PLAYER_TIMER,n.numID=0,n.time=0,n.flag=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.numID=e.readInt(),this.time=e.readByte(),this.flag=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeInt(this.numID),t.writeByte(this.time),t.writeByte(this.flag),t},n}(r.BaseGameProtocol);t.msgPlayerTimer=l,n.setGameProtocol(e.BXY_PLAYER_TIMER,l);var u=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.BXY_GAME_START,n.flag=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.flag=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.flag),t},n}(r.BaseGameProtocol);t.msgGameStart=u,n.setGameProtocol(e.BXY_GAME_START,u);var d=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.BXY_GAME_END,n.flag=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.flag=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.flag),t},n}(r.BaseGameProtocol);t.msgGameEnd=d,n.setGameProtocol(e.BXY_GAME_END,d);var p=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.BXY_MESSAGEBOX,n.numID=0,n.flag=0,n.showType=0,n.title=[],n.msg=[],n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.numID=e.readInt(),this.flag=e.readByte(),this.showType=e.readByte(),this.title=e.readByteArr(),this.msg=e.readByteArr(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeInt(this.numID),t.writeByte(this.flag),t.writeByte(this.showType),t.writeByteArr(this.title),t.writeByteArr(this.msg),t},n}(r.BaseGameProtocol);t.msgMessageBox=p,n.setGameProtocol(e.BXY_MESSAGEBOX,p);var h=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.BXY_SHOWBTN,n.btns=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.btns=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.btns),t},n}(r.BaseGameProtocol);t.msgShowBtn=h,n.setGameProtocol(e.BXY_SHOWBTN,h);var _=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.BXY_USE_PROP,n.propID=0,n.fromAreaID=0,n.fromNumID=0,n.toAreaID=0,n.toNumID=0,n.nErrorCode=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.propID=e.readInt(),this.fromAreaID=e.readInt(),this.fromNumID=e.readInt(),this.toAreaID=e.readInt(),this.toNumID=e.readInt(),this.nErrorCode=e.readInt(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeInt(this.propID),t.writeInt(this.fromAreaID),t.writeInt(this.fromNumID),t.writeInt(this.toAreaID),t.writeInt(this.toNumID),t.writeInt(this.nErrorCode),t},n}(r.BaseGameProtocol);t.msgUseProp=_,n.setGameProtocol(e.BXY_USE_PROP,_);var f=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.BXY_PLAYER_LEAVE_EX,n.numID=0,n.flag=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.numID=e.readInt(),this.flag=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeInt(this.numID),t.writeByte(this.flag),t},n}(r.BaseGameProtocol);t.msgPlayerLeaveEx=f,n.setGameProtocol(e.BXY_PLAYER_LEAVE_EX,f);var m=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.BXY_REQ_JIESAN,n.seat=0,n.flag=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.seat=e.readInt(),this.flag=e.readInt(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeInt(this.seat),t.writeInt(this.flag),t},n}(r.BaseGameProtocol);t.msgReqJieSan=m,n.setGameProtocol(e.BXY_REQ_JIESAN,m);var g=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.BXY_RESP_JIESAN,n.m_remainingTime=0,n.m_state=[],n}return a(n,t),n.prototype.bistream=function(t,e){e=e||new bf33.ProtocolBistream(t),this.m_remainingTime=e.readInt();for(var n=0;n<4;++n)this.m_state[n]=e.readInt();return e},n.prototype.bostream=function(t){(t=t||new bf33.ProtocolBostream).writeInt(this.m_remainingTime);for(var e=0;e<4;++e)t.writeInt(this.m_state[e]);return t},n}(r.BaseGameProtocol);t.msgRespJieSan=g,n.setGameProtocol(e.BXY_RESP_JIESAN,g);var y=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.BXY_JIESAN_RESULT,n.flag=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.flag=e.readInt(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeInt(this.flag),t},n}(r.BaseGameProtocol);t.msgJieSanResult=y,n.setGameProtocol(e.BXY_JIESAN_RESULT,y);var I=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.BXY_REQ_KICKPLAYER,n.areaID=0,n.numID=0,n.cMsg="",n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.areaID=e.readInt(),this.numID=e.readInt(),this.cMsg=e.readString(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeInt(this.areaID),t.writeInt(this.numID),t.writeString(this.cMsg),t},n}(r.BaseGameProtocol);t.msgReqKickPlayer=I,n.setGameProtocol(e.BXY_REQ_KICKPLAYER,I);var C=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.BXY_RESP_KICKPLAYER,n.flag=0,n.fromnumID=0,n.tonumID=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.flag=e.readByte(),this.fromnumID=e.readInt(),this.tonumID=e.readInt(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.flag),t.writeInt(this.fromnumID),t.writeInt(this.tonumID),t},n}(r.BaseGameProtocol);t.msgRespKickPlayer=C,n.setGameProtocol(e.BXY_RESP_KICKPLAYER,C)})(n.BaseProtocol||(n.BaseProtocol={})),cc._RF.pop()},{"../../../../Base/Module/Network/Base/BaseGameProtocol":"BaseGameProtocol","../../../../Base/Module/Network/Base/ProtocolManager":"ProtocolManager"}],BaseProxy:[function(t,e,n){"use strict";cc._RF.push(e,"e2d22SFiThOuqXzSdFw5b3m","BaseProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.BaseProxy=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"isProxy",{get:function(){return!0},enumerable:!1,configurable:!0}),i([jsClass],e)}(cc.Component);n.BaseProxy=r,cc._RF.pop()},{}],BaseRoot:[function(t,e,n){"use strict";cc._RF.push(e,"e9f612PnetBIb4/nLdD0EOt","BaseRoot");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.Root=n.BaseRoot=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),i([jsClass],e)}(cc.Component);n.BaseRoot=r;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._elementId=1,e._object={},e}return a(e,t),e.prototype.add=function(t){t.$_CEID||(t.$_CEID=this._elementId+++"");var e=new cc.Node;return e.setParent(this.node),this._object[t.$_CEID]=e.addComponent(t)},e.prototype.get=function(t){var e=t.$_CEID;return e?this._object[e]:null},e.prototype.forEach=function(t){if(t)for(var e in this._object)this._object.hasOwnProperty(e)&&t(this._object[e],e)},e}(r);n.Root=s,cc._RF.pop()},{}],BaseUI:[function(t,e,n){"use strict";cc._RF.push(e,"21471XDXSdDpZGNkjqWSuZL","BaseUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.BaseUI=n.UIType=void 0;var r,s=t("../Manager/CoroutineManager"),c=t("../Manager/EventManager"),l=t("../Manager/UIManager");(function(t){t[t.Scene=0]="Scene",t[t.ScenePart=1]="ScenePart",t[t.Window=2]="Window",t[t.Dialog=3]="Dialog",t[t.Temporary=4]="Temporary",t[t.Transparent=5]="Transparent"})(r=n.UIType||(n.UIType={}));var u=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a(n,e),Object.defineProperty(n.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),n.prototype.setView=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this._view=t},n.prototype.onDestroy=function(){console.log("onDestroy: "+cc.js.getClassName(this)),c.EventManager.instance.offAll(this),s.CoroutineManager.instance.stopAllCo(this),l.UIManager.instance.removeTopCollider(this),this.view.dispose();var t=this.constructor;t.willClearOnDestroy&&l.UIManager.instance.clearPkgResByClass(t)},Object.defineProperty(n,"willClearOnDestroy",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(n,"sortingOrder",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(n,"willShowLoading",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(n,"uiType",{get:function(){return r.Scene},enumerable:!1,configurable:!0}),n.uiBind=function(){var e=this.getPkgName();try{t(e+"Binder").default.bindAll()}catch(n){console.warn(e+" has no binder:",n)}},n.getPkgName=function(){return cc.js.getClassName(this)},n.getCompName=function(){return"MainPanel"},n.getExtPkgNames=function(){return[]},i([jsClass],n)}(cc.Component);n.BaseUI=u,cc._RF.pop()},{"../Manager/CoroutineManager":"CoroutineManager","../Manager/EventManager":"EventManager","../Manager/UIManager":"UIManager"}],BfasManager:[function(t,e,n){"use strict";cc._RF.push(e,"2134f698WFMK7P51dsoSQbO","BfasManager");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.BfasManager=void 0;var r=t("../../../../Framework/Manager/BaseManager"),s=t("../../../../Framework/Manager/CoroutineManager"),c=t("../../../../Framework/Manager/EventManager"),l=t("../../../../Framework/Root/ManagerRoot"),u=t("../Platform/Const/PlatformEventType"),d=t("../../Data/DataBfConfig"),p=t("./BaseBfas"),h=t("./DataPointID"),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.APP_GROUP_ID=d.DataBfConfig.areaID,e.LOBBY_APP_KEY=d.DataBfConfig.gameID,e.MINI_GROUP_ID=d.DataBfConfig.areaID,e.FLUSH_INTERVAL=60,e.NUMID_KEY="BFAS.NUMID.KEY",e._clientType=14,e._analysisMap={},e._ip="",e._numID="",e._deviceID="",e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return l.ManagerRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ip",{set:function(t){for(var e in this._ip=t,this._analysisMap)this._analysisMap.hasOwnProperty(e)&&(this._analysisMap[e].ip=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numid",{set:function(t){this._numID=t,localStorage.setItem(this.NUMID_KEY,this._numID)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceID",{set:function(t){t&&(this._deviceID=t)},enumerable:!1,configurable:!0}),e.prototype.updateLaunchTimestamp=function(){this._launchPointTimestamp=+new Date},Object.defineProperty(e.prototype,"launchPointTimestamp",{get:function(){return this._launchPointTimestamp||+new Date},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canPush",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.start=function(){c.EventManager.instance.on(u.PlatformEventType.AppHide,this,this.onAppHide),s.CoroutineManager.instance.loop(this.FLUSH_INTERVAL,this.sendMsg,this),this._numID=localStorage.getItem(this.NUMID_KEY)||"",this._clientType=cc.sys.os==cc.sys.OS_IOS?p.ClientType.IOS:p.ClientType.ANDROID,this.deviceID=d.DataBfConfig.deviceID,this.evt(h.DataPointID.LAUNCH,null,!0)},e.prototype.onAppHide=function(){this.sendMsg()},e.prototype.sendMsg=function(){if(this.canPush)for(var t in this._analysisMap)this._analysisMap.hasOwnProperty(t)&&this._analysisMap[t].sendEvents()},e.prototype.analysis=function(t,e){var n=t+"_"+e;return this._analysisMap[n]||(this._analysisMap[n]=this.createAnalysis(t,e))},e.prototype.createAnalysis=function(t,e){var n=new p.BaseBfas(t,e,this._clientType,d.DataBfConfig.VERSION);return n.channel=d.DataBfConfig.ymn.channel+"",n.ip=this._ip,n},e.prototype.launch=function(){this.canPush&&this.analysis(this.MINI_GROUP_ID,this.LOBBY_APP_KEY).launch(this._numID,this._deviceID)},e.prototype.evt=function(t,e,n,o){void 0===n&&(n=!1),this.canPush&&this.analysis(this.MINI_GROUP_ID,this.LOBBY_APP_KEY).evt(this._numID,t,this._deviceID,e||{},n,o)},e.prototype.share=function(t){this.canPush&&this.analysis(this.MINI_GROUP_ID,this.LOBBY_APP_KEY).share(this._numID,this._deviceID,t||{})},e.prototype.evtUserLinkPoint=function(t,e,n,o){var a={value:-1,msg:""};if(n){var i=+new Date;a.value=i-this.launchPointTimestamp}o&&(a.msg=o),console.warn(">-----\x3eUserPoint.param:",a,t,e,n,o),this.evt(t,a,!0,e)},e.prototype.sendEvt=function(t,e){t&&(void 0===e&&(e=null),this.evt(t.eventid,e,!0,t.eventName))},i([jsClass],e)}(r.BaseManager);n.BfasManager=_,cc.systemEvent.on("CatchError",function(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];e[n]=o+""}_.instance.evt(h.DataPointID.ERROR_CATCH,e)}),cc.systemEvent.once("GameRoot.inited",function(){l.ManagerRoot.instance.add(_)}),cc._RF.pop()},{"../../../../Framework/Manager/BaseManager":"BaseManager","../../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Root/ManagerRoot":"ManagerRoot","../../Data/DataBfConfig":"DataBfConfig","../Platform/Const/PlatformEventType":"PlatformEventType","./BaseBfas":"BaseBfas","./DataPointID":"DataPointID"}],BigCardShareBinder:[function(t,e,n){"use strict";cc._RF.push(e,"c4173dA52JIp6LfLbveuuRi","BigCardShareBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./BigCardShare_window"),a=t("./BigCardShare_MainPanel"),i=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default)},t}();n.default=i,cc._RF.pop()},{"./BigCardShare_MainPanel":"BigCardShare_MainPanel","./BigCardShare_window":"BigCardShare_window"}],BigCardShare_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"74289ofnJhCn5V1qLtp0CWo","BigCardShare_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("BigCardShare","MainPanel")},e.prototype.onConstruct=function(){this.m_window=this.getChildAt(1)},e.URL="ui://oj28ggo3oalh4",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],BigCardShare_window:[function(t,e,n){"use strict";cc._RF.push(e,"66821ETr51Gopau8b+E4V/U","BigCardShare_window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("BigCardShare","window")},e.prototype.onConstruct=function(){this.m_shareType=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_img_wincnt=this.getChildAt(1),this.m_btn_close=this.getChildAt(2),this.m_btn_share=this.getChildAt(3),this.m_mult_text=this.getChildAt(4)},e.URL="ui://oj28ggo3oalh3",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],BigCardShare:[function(t,e,n){"use strict";cc._RF.push(e,"2e626nMeypMcoTbTugPiowY","BigCardShare");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.BigCardShare=void 0;var s=t("../../../../Framework/Manager/CoroutineManager"),c=t("../../../../Framework/Manager/UIManager"),l=t("../../../../Framework/UI/BaseUI"),u=t("../../../../Framework/UI/FadeUI"),d=t("../../../Base/Data/DataConstant"),p=t("../../../Base/Module/BfAnalytics/BfasManager"),h=t("../../../Base/Module/BfAnalytics/DataPointID"),_=t("../../../Base/View/Common/ToastUI"),f=t("../../../Base/Module/Platform/PlatformManager"),m=t("../../../Base/Module/Share/ShareManager"),g=t("../GameSharePopModel"),y=t("../GameWinMoreUI/GameWinMoreModel"),I=function(t){function e(){var e,n=null!==t&&t.apply(this,arguments)||this;return n._typeMap=((e={})[1]=1,e[2]=2,e[3]=2,e[4]=3,e[5]=4,e),n}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e,"willShowLoading",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return l.UIType.Dialog},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.setView=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this._view=t,e.length>0&&(this._type=e[0]),this.initUI()},e.prototype.initUI=function(){if(this._type===g.PopTypeEnum.WINCNT_5)this.view.m_window.m_bg.url=d.DataConstant.BIGSHARE_WINCNT,this.view.m_window.m_shareType.selectedIndex=this._type;else if(this._type===g.PopTypeEnum.WINCNT_10)this.view.m_window.m_bg.url=d.DataConstant.BIGSHARE_WINCNT,this.view.m_window.m_shareType.selectedIndex=this._type;else if(this._type===g.PopTypeEnum.MAX_MULT){this.view.m_window.m_bg.url=d.DataConstant.BIGSHARE_MAXMULT_BG;var t=g.GameSharePopModel.instance.getNowMult().toString();this.view.m_window.m_mult_text.text=t,5===t.length?this.view.m_window.m_mult_text.x=230:4===t.length?this.view.m_window.m_mult_text.x=280:3===t.length&&(this.view.m_window.m_mult_text.x=330),this.view.m_window.m_shareType.selectedIndex=this._type}this.sendEvt(h.BigCardSharePointID.showShareUI.eventid,h.BigCardSharePointID.showShareUI.eventName)},e.prototype.initListener=function(){this.view.m_window.m_btn_close.onClick(this.onBtnClose,this),this.view.m_window.m_btn_share.onClick(this.onBtnShare,this)},e.prototype.onBtnClose=function(){this.sendEvt(h.BigCardSharePointID.normalClickClose.eventid,h.BigCardSharePointID.normalClickClose.eventName),this.onExitClick(),y.GameWinMoreModel.instance.showGameWinMoreUI()},e.prototype.onBtnShare=function(){var t;this.sendEvt(h.BigCardSharePointID.normalClickShare.eventid,h.BigCardSharePointID.normalClickShare.eventName),this._type===g.PopTypeEnum.WINCNT_5||this._type===g.PopTypeEnum.WINCNT_10?(t=m.ShareType.bigCardShareWinCnt,m.ShareManager.instance.share(t,null,function(){}),this.onExitClick(),y.GameWinMoreModel.instance.showGameWinMoreUI()):this._type===g.PopTypeEnum.MAX_MULT&&(t=m.ShareType.bigCardShareMaxMult,this.paintShareMaxMult(t))},e.prototype.paintShareMaxMult=function(t){var e=this;c.UIManager.instance.addTopCollider("DrawShareMaxMultImage");var n=r([500,400],2),o=n[0],a=n[1],i=document.createElement("canvas");i.width=o,i.height=a;var l=i.getContext("2d");l.clearRect(0,0,o,a);for(var u=g.GameSharePopModel.instance.getNowMult().toString(),p=[],h=0;h<u.length;++h)p.push(null);var y=p.map(function(){return null}),I=[{x:310,y:9},{x:250,y:13},{x:190,y:17},{x:130,y:21},{x:70,y:25}];this.loadImage(d.DataConstant.BIGSHARE_MAXMULT,function(t){t&&l.drawImage(t,0,0,500,400);for(var n=0,o=function(t){var o=d.DataConstant.BIGSHARE_MAXMULT_NUM+u[t]+".png",a=I[n++];e.loadImage(o,function(e){e&&l.drawImage(e,a.x,a.y,60,80),p[t]=e})},a=u.length-1;a>=0;--a)o(a)});var C=Date.now()+5e3;s.CoroutineManager.instance.wait(function(){return y.every(function(t){return t})||Date.now()>C},function(){f.PlatformManager.instance.platform.toTempFilePath(i,null,function(n){c.UIManager.instance.removeTopCollider("DrawShareMaxMultImage"),console.log(n),n?m.ShareManager.instance.share(t,{forceImageUrl:n,titleArgs:[g.GameSharePopModel.instance.getNowMult()]},function(){e.onExitClick()}):c.UIManager.instance.open(_.ToastUI).then(function(t){t.init({content:"\u751f\u6210\u5206\u4eab\u56fe\u5931\u8d25\uff01"})})})})},e.prototype.loadImage=function(t,e){var n=document.createElement("img");n.setAttribute&&n.setAttribute("crossOrigin","Anonymous"),n.onload=function(){return e&&e(n)},n.onerror=function(){return e&&e(null)},n.src=t},e.prototype.sendEvt=function(t,e){var n={type:this._typeMap[this._type]};p.BfasManager.instance.evt(t,n,!0,e)},i([jsClass],e)}(u.FadeUI);n.BigCardShare=I,cc._RF.pop()},{"../../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../../Framework/Manager/UIManager":"UIManager","../../../../Framework/UI/BaseUI":"BaseUI","../../../../Framework/UI/FadeUI":"FadeUI","../../../Base/Data/DataConstant":"DataConstant","../../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../../Base/Module/Platform/PlatformManager":"PlatformManager","../../../Base/Module/Share/ShareManager":"ShareManager","../../../Base/View/Common/ToastUI":"ToastUI","../GameSharePopModel":"GameSharePopModel","../GameWinMoreUI/GameWinMoreModel":"GameWinMoreModel"}],BoxRecordUI:[function(t,e,n){"use strict";cc._RF.push(e,"c255fncg91P0pVyaI+AMdrZ","BoxRecordUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.BoxRecordUI=void 0;var r,s,c=t("../../Framework/UI/FadeUI"),l=t("../Base/Data/DatazOrder"),u=t("../Base/Utils/UtilTool"),d=t("../Base/View/UIHelp"),p=t("../Game/Common/GameCommonModel"),h=t("../Game/Common/PlayerInfoModel"),_=t("./CreateRoomConfig"),f=t("./CreateRoomModel/HistoryUIModel");(function(t){t[t.ROUND_SHOW=0]="ROUND_SHOW",t[t.ROUND_HIDE=1]="ROUND_HIDE"})(r||(r={})),function(t){t[t.WIN=0]="WIN",t[t.LOSE=1]="LOSE"}(s||(s={}));var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._currGameRoomConfig=null,e._isSelfWin=!0,e._totalRecordData=null,e._nowRoundData=null,e._roundAllInfo=new Map,e}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.getPkgName=function(){return"CreateRoomUI"},e.getCompName=function(){return"BoxRecordMainPanel"},Object.defineProperty(e,"sortingOrder",{get:function(){return l.DataZOrder.BoxRecordUI},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){this.view.m_window.m_btnClose.onClick(this.onExitClick,this)},e.prototype.initEmptyItem=function(t,e){this._currGameRoomConfig=_.CreateRoomConfig.getGuanDanConfigByShowIndex(t),this.refreshRecordTitle(this._currGameRoomConfig.name,e),this.view.m_window.m_c_playCount.selectedIndex=2===h.PlayerInfoModel.instance.getNowGamePlayer()?f.CPlayerCountEnum.PLAYER_2:f.CPlayerCountEnum.PLAYER_4;for(var n=0;n<4;n++){var o=this.view.m_window["m_head_"+(n+1)];if(n<h.PlayerInfoModel.instance.getNowGamePlayer()){var a=h.PlayerInfoModel.instance.getTempPlayerByServiceSeat(n);!a&&(a=h.PlayerInfoModel.instance.getPlayerByServiceSeat(n));var i={headurl:a.headurl,id:a.numid,nickname:a.nickname,winlost:0,isCreator:a.numid===p.GameCommonModel.instance.getBoxCreator()},r=h.PlayerInfoModel.instance.getHead(i.id);o.m_avatarPic.url=r,o.m_name.text=d.UIHelp.formatNicknameL(i.nickname,12),o.m_score.text=f.HistoryUIModel.instance.getScorePlusOrSub(i.winlost),o.m_score.color=0<=i.winlost?cc.color(236,89,14,255):cc.color(82,140,234,255),o.m_fangImg.node.active=i.isCreator,o.m_c_showSelfImg.selectedIndex=f.HistoryUIModel.instance.isSelfNumID(i.id)?f.CShowSelfTipEnum.SHOW:f.CShowSelfTipEnum.HIDE}else o.node.active=!1}},e.prototype.initBoxRecordUI=function(t,e,n,o){this._currGameRoomConfig=_.CreateRoomConfig.getGuanDanConfigByShowIndex(o),this._isSelfWin=n,this._nowRoundData=e,this._totalRecordData=t,this.refreshRecordTitle(this._currGameRoomConfig.name,t.roomKey,t.createTime),this.refreshHeadInfo(),this.refreshRoundDetail()},e.prototype.refreshRecordTitle=function(t,e,n){this.view.m_window.m_topTitle.m_titleText.text=t,this.view.m_window.m_topTitle.m_txtroomID.text="\u623f\u95f4\u53f7:"+e,n?this.view.m_window.m_topTitle.m_dateText.text=n:this.view.m_window.m_topTitle.m_dateText.visible=!1,this._isSelfWin||(this.view.m_window.m_topTitle.m_dateText.color=cc.color(107,110,112,255),this.view.m_window.m_topTitle.m_txtroomID.color=cc.color(107,110,112,255),this.view.m_window.m_topTitle.m_bg.icon="ui://CreateRoomUI/title_lose_bg")},e.prototype.refreshHeadInfo=function(){var t=this._totalRecordData.winlosts;this.view.m_window.m_c_playCount.selectedIndex=2===this._totalRecordData.size?f.CPlayerCountEnum.PLAYER_2:f.CPlayerCountEnum.PLAYER_4;for(var e=0;e<4;e++){var n=this.view.m_window["m_head_"+(e+1)];if(e<this._totalRecordData.size){var o=t[e],a=u.UtilTool.getHead(o.headurl);n.m_avatarPic.url=a,n.m_name.text=d.UIHelp.formatNicknameL(o.nickname,12),n.m_score.text=f.HistoryUIModel.instance.getScorePlusOrSub(o.winlost),0<=o.winlost?n.m_score.color=cc.color(236,89,14,255):n.m_score.color=cc.color(82,140,234,255),n.m_fangImg.node.active=this._totalRecordData.creator_numid===o.id,n.m_c_showSelfImg.selectedIndex=f.HistoryUIModel.instance.isSelfNumID(o.id)?f.CShowSelfTipEnum.SHOW:f.CShowSelfTipEnum.HIDE}else n.node.active=!1}},e.prototype.refreshRoundDetail=function(){this.view.m_window.m_listView.removeChildren();var t=1;this._nowRoundData.forEach(function(e){e.roundnum>t&&(t=e.roundnum)}),console.warn("refreshRoundDetail.nowRoundNum:",t),1===t?this.updateItemWithNoRoundUI(this._nowRoundData):this.updateItemWithRoundUI(t)},e.prototype.updateItemWithNoRoundUI=function(t){var e=this,n=fgui.UIPackage.createObject("CreateRoomUI","History_recordDetail");n.m_c_winlose.selectedIndex=this._isSelfWin?s.WIN:s.LOSE,this.view.m_window.m_listView.addChild(n);var o=n.m_list;fgui.UIPackage.createObject("CreateRoomUI","History_recordScoreLine").m_c_playerCount.selectedIndex=2===this._totalRecordData.size?f.CPlayerCountEnum.PLAYER_2:f.CPlayerCountEnum.PLAYER_4,o.itemRenderer=function(n,o){var a=t[n];e.setRoundScore(n,o,a)},o.setVirtual(),o.numItems=t.length},e.prototype.updateItemWithRoundUI=function(t){this.dealRoundInfo();for(var e=0;e<t;e++){var n=fgui.UIPackage.createObject("CreateRoomUI","History_recordWithRound");this.view.m_window.m_listView.addChild(n),this._isSelfWin||(n.m_c_bgIcon.selectedIndex=s.LOSE,n.m_hideRoundBtn.icon="ui://CreateRoomUI/btn_xiala_lose",n.m_showRoundBtn.icon="ui://CreateRoomUI/btn_xiala_lose");var o=this._totalRecordData.size;n.m_roundTab.m_c_playerCount.selectedIndex=2===o?f.CPlayerCountEnum.PLAYER_2:f.CPlayerCountEnum.PLAYER_4,n.m_roundTab.m_txtRoundName.text="\u7b2c"+u.UtilTool.num2ChineseNum(e+1)+"\u8f6e",this._isSelfWin||(n.m_roundTab.m_txtRoundName.color=cc.color(59,115,219,255));for(var a=this._roundAllInfo[e+1],i=0;i<a.length;i++){var c=n.m_roundTab["m_score"+(i+1)];c.text=f.HistoryUIModel.instance.getScorePlusOrSub(a[i]),0<=a[i]?c.color=cc.color(236,89,14,255):c.color=cc.color(82,140,234,255)}n.m_showRoundBtn.data={item:n,roundNum:e+1},n.m_hideRoundBtn.data={item:n,roundNum:e+1},n.m_showRoundBtn.onClick(this.clickRoundInfo,this),n.m_hideRoundBtn.onClick(this.clickRoundInfo,this),n.m_c_itemShow.selectedIndex=r.ROUND_HIDE,n.data={index:e,tempHeight:n.height}}},e.prototype.dealRoundInfo=function(){var t=this;this._roundAllInfo.clear(),this._nowRoundData.forEach(function(e){var n=e.roundnum;t._roundAllInfo[n]=t._roundAllInfo[n]||[],e.winlosts.forEach(function(o,a){t._roundAllInfo[n][a]=t._roundAllInfo[n][a]||0,3080===e.gameid?t._roundAllInfo[n][a]=t._roundAllInfo[n][a]+o.winlost/10:t._roundAllInfo[n][a]=t._roundAllInfo[n][a]+o.winlost})})},e.prototype.clickRoundInfo=function(t){var e=fgui.GObject.cast(t.currentTarget).data;this.showRoundListInfoUI(e.item)?this.updateItemWithRoundDetialUI(e):e.item.height=e.item.data.tempHeight},e.prototype.showRoundListInfoUI=function(t){var e=t.m_roundInfo.node;return e.active=!e.active,t.m_c_itemShow.selectedIndex=e.active?r.ROUND_SHOW:r.ROUND_HIDE,e.active},e.prototype.updateItemWithRoundDetialUI=function(t){var e=this,n=t.item,o=n.m_roundInfo,a=[];if(this._nowRoundData.forEach(function(e){e.roundnum===t.roundNum&&a.push(e)}),o.node.active){o.m_c_playerCount.selectedIndex=2===this._totalRecordData.size?f.CPlayerCountEnum.PLAYER_2:f.CPlayerCountEnum.PLAYER_4,o.m_c_winlose.selectedIndex=this._isSelfWin?s.WIN:s.LOSE;var i=o.m_list;i.itemRenderer=function(t,n){var o=a[t];e.setRoundScore(t,n,o)},i.setVirtual(),i.numItems=a.length;var r=53*(a.length+1);n.height=n.data.tempHeight+r,o.m_bgWin.height=r,o.m_bgLose.height=r}},e.prototype.setRoundScore=function(t,e,n){e.m_title.text="\u7b2c"+(t+1)+"\u5c40",this._isSelfWin||(e.m_title.color=cc.color(107,110,112,255)),e.m_c_winlose.selectedIndex=this._isSelfWin?s.WIN:s.LOSE,e.m_c_playerCount.selectedIndex=2===this._totalRecordData.size?f.CPlayerCountEnum.PLAYER_2:f.CPlayerCountEnum.PLAYER_4;for(var o=0;o<4;o++){var a=e["m_score"+(o+1)];if(o<this._totalRecordData.size){var i=n.winlosts[o].winlost;a.text=f.HistoryUIModel.instance.getScorePlusOrSub(i),a.color=0<=i?cc.color(236,89,14,255):cc.color(82,140,234,255)}else a.node.active=!1}},i([jsClass],e)}(c.FadeUI);n.BoxRecordUI=m,cc._RF.pop()},{"../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DatazOrder":"DatazOrder","../Base/Utils/UtilTool":"UtilTool","../Base/View/UIHelp":"UIHelp","../Game/Common/GameCommonModel":"GameCommonModel","../Game/Common/PlayerInfoModel":"PlayerInfoModel","./CreateRoomConfig":"CreateRoomConfig","./CreateRoomModel/HistoryUIModel":"HistoryUIModel"}],BuyNoteCardModel:[function(t,e,n){"use strict";cc._RF.push(e,"74925bC5FlLVLajX3lpw3Sn","BuyNoteCardModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.BuyNoteCardModel=void 0;var s=t("../../../../Framework/Model/BaseModel"),c=t("../../../../Framework/Root/ModelRoot"),l=t("../../../Base/Data/DataProps"),u=t("../../../UserInfo/UserInfoModel"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._noteCardProps=[],e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return c.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._noteCardProps=[l.PropIDEnum.ONE_DAY_NOTECARD,l.PropIDEnum.SEVEN_DAY_NOTECARD,l.PropIDEnum.THIRTY_DAY_NOTECARD,l.PropIDEnum.TEAM_ONE_DAY_NOTECARD,l.PropIDEnum.TEAM_SEVEN_DAY_NOTECARD,l.PropIDEnum.TEAM_THIRTY_DAY_NOTECARD]},e.prototype.getNoteCardProps=function(){return this._noteCardProps},e.prototype.getNoteCardPropCount=function(){var t,e,n=0;try{for(var o=r(this._noteCardProps),a=o.next();!a.done;a=o.next()){var i=a.value;n+=u.UserInfoModel.instance.getPropCount(i)}}catch(s){t={error:s}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return n},i([jsClass],e)}(s.BaseModel);n.BuyNoteCardModel=d,cc.systemEvent.once("GameRoot.inited",function(){c.ModelRoot.instance.add(d)}),cc._RF.pop()},{"../../../../Framework/Model/BaseModel":"BaseModel","../../../../Framework/Root/ModelRoot":"ModelRoot","../../../Base/Data/DataProps":"DataProps","../../../UserInfo/UserInfoModel":"UserInfoModel"}],BuyNoteCardUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"22223RvRT5OG4HRIkm3KZPn","BuyNoteCardUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./BuyNoteCardUI_window"),a=t("./BuyNoteCardUI_MainPanel"),i=t("./BuyNoteCardUI_buyPrice"),r=t("./BuyNoteCardUI_compDiscount"),s=t("./BuyNoteCardUI_noteCardItem"),c=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default)},t}();n.default=c,cc._RF.pop()},{"./BuyNoteCardUI_MainPanel":"BuyNoteCardUI_MainPanel","./BuyNoteCardUI_buyPrice":"BuyNoteCardUI_buyPrice","./BuyNoteCardUI_compDiscount":"BuyNoteCardUI_compDiscount","./BuyNoteCardUI_noteCardItem":"BuyNoteCardUI_noteCardItem","./BuyNoteCardUI_window":"BuyNoteCardUI_window"}],BuyNoteCardUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"a22fddW6VtIB5w2htzgT+7i","BuyNoteCardUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("BuyNoteCardUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://3oiby69ocsxdl",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],BuyNoteCardUI_buyPrice:[function(t,e,n){"use strict";cc._RF.push(e,"4facaccPHVEK41CXNuScPhZ","BuyNoteCardUI_buyPrice");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("BuyNoteCardUI","buyPrice")},e.prototype.onConstruct=function(){this.m_type=this.getControllerAt(0)},e.URL="ui://3oiby69oda8jn",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],BuyNoteCardUI_compDiscount:[function(t,e,n){"use strict";cc._RF.push(e,"468ber0R/JDxISIUswRkT0T","BuyNoteCardUI_compDiscount");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("BuyNoteCardUI","compDiscount")},e.prototype.onConstruct=function(){this.m_txtPrice=this.getChildAt(1)},e.URL="ui://3oiby69oe2vpq",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],BuyNoteCardUI_noteCardItem:[function(t,e,n){"use strict";cc._RF.push(e,"ecc26zIP59ISrnQiPAJ4j5w","BuyNoteCardUI_noteCardItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("BuyNoteCardUI","noteCardItem")},e.prototype.onConstruct=function(){this.m_cHadcount=this.getControllerAt(0),this.m_cNoteType=this.getControllerAt(1),this.m_btnPrice=this.getChildAt(2),this.m_discountInfo=this.getChildAt(3),this.m_propIcon=this.getChildAt(4),this.m_num=this.getChildAt(5),this.m_name=this.getChildAt(6)},e.URL="ui://3oiby69on0lce",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],BuyNoteCardUI_window:[function(t,e,n){"use strict";cc._RF.push(e,"e1908UtFRtMLbXKIUtt3jOr","BuyNoteCardUI_window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("BuyNoteCardUI","window")},e.prototype.onConstruct=function(){this.m_btn_close=this.getChildAt(1),this.m_listInfo=this.getChildAt(2)},e.URL="ui://3oiby69ocsxdk",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],BuyNoteCardUI:[function(t,e,n){"use strict";cc._RF.push(e,"fe695Xn2PlL1IEKboVMdgIN","BuyNoteCardUI");var o,a,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.BuyNoteCardUI=void 0;var c,l,u=t("../../../../Framework/Manager/EventManager"),d=t("../../../../Framework/UI/FadeUI"),p=t("../../../UserInfo/UserInfoModel"),h=t("../../../Base/Module/Prop/PropModule"),_=t("../GameCommonModel"),f=t("../../../../Framework/UI/BaseUI"),m=t("../../../Shop/ShopProxy"),g=t("../../../Base/Data/DataEvent"),y=t("../../../Base/Data/DataProps"),I=t("../../../Base/Data/DatazOrder"),C=t("./BuyNoteCardModel");(function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"})(c||(c={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.TEAM=1]="TEAM"}(l||(l={}));var M,v=((a={})[y.PropIDEnum.SEVEN_DAY_NOTECARD]="30008",a[y.PropIDEnum.THIRTY_DAY_NOTECARD]="30009",a[y.PropIDEnum.TEAM_ONE_DAY_NOTECARD]="30060",a[y.PropIDEnum.TEAM_SEVEN_DAY_NOTECARD]="30061",a[y.PropIDEnum.TEAM_THIRTY_DAY_NOTECARD]="30062",a);(function(t){t[t.ONE_YB=1]="ONE_YB",t[t.SEVEN_YB=7]="SEVEN_YB",t[t.THIRTY_YB=30]="THIRTY_YB"})(M||(M={}));var E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._noteCardPropIDs=[],e}return i(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return C.BuyNoteCardModel.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return f.UIType.Dialog},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sortingOrder",{get:function(){return I.DataZOrder.BuyNoteCardUI},enumerable:!1,configurable:!0}),e.prototype.setCallback=function(t){t&&(this._callback=t)},e.prototype.onLoad=function(){this.initListener(),this.initData(),this.initUI()},e.prototype.initListener=function(){this.view.m_Window.m_btn_close.onClick(this.onBtnClose,this),this.view.m_Window.m_listInfo.on(fgui.Event.CLICK_ITEM,this.onItemClick,this)},e.prototype.initData=function(){this._noteCardPropIDs=this.model.getNoteCardProps()},e.prototype.initUI=function(){this.refreshConentList()},e.prototype.refreshConentList=function(){var t,e,n=[];try{for(var o=s(this._noteCardPropIDs),a=o.next();!a.done;a=o.next()){var i=a.value,r=p.UserInfoModel.instance.getPropCount(i);if(!(i===y.PropIDEnum.ONE_DAY_NOTECARD&&r<=0)){var u={};u.name=y.DataProps.instance.getPropName(i),u.count=r,u.propID=i,u.price=this.convertToPrice(i)||0,u.originPrice=y.DataProps.instance.getPropOriginPrice(i),u.isTeamProp=y.DataProps.instance.isTeamNoteCardPropID(i),n.push(u)}}}catch(h){t={error:h}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}var d=this.view.m_Window.m_listInfo;d.itemRenderer=function(t,e){var o=n[t];o&&(e.data=o,e.m_name.text=o.name,o.isTeamProp?(e.m_discountInfo.m_txtPrice.text=o.originPrice.toString(),e.m_cNoteType.selectedIndex=l.TEAM):e.m_cNoteType.selectedIndex=l.NORMAL,o.count>0?(e.m_num.text=o.count.toString(),e.m_cHadcount.selectedIndex=c.SHOW,e.m_btnPrice.title="\u4f7f\u7528"):(e.m_cHadcount.selectedIndex=c.HIDE,e.m_btnPrice.title="\u78b3"+o.price))},d.setVirtual(),d.numItems=n.length,d.refreshVirtualList()},e.prototype.convertToPrice=function(t){switch(t){case y.PropIDEnum.ONE_DAY_NOTECARD:return M.ONE_YB;case y.PropIDEnum.SEVEN_DAY_NOTECARD:return M.SEVEN_YB;case y.PropIDEnum.THIRTY_DAY_NOTECARD:return M.THIRTY_YB;case y.PropIDEnum.TEAM_ONE_DAY_NOTECARD:return M.ONE_YB;case y.PropIDEnum.TEAM_SEVEN_DAY_NOTECARD:return M.SEVEN_YB;case y.PropIDEnum.TEAM_THIRTY_DAY_NOTECARD:return M.THIRTY_YB}},e.prototype.onBtnClose=function(){this.onExitClick()},e.prototype.onItemClick=function(t){var e=t.data;if(console.log("onItemClick:",e),_.GameCommonModel.instance.isTeamModel())(n=p.UserInfoModel.instance.getPropCount(e.propID))>0?this.useProp(e.propID):this.exchangeProp(e);else{var n=p.UserInfoModel.instance.getPropCount(e.propID);if(this.isTeamNoteCard(e.propID))return n>0?void u.EventManager.instance.emit(g.DataEvent.ToastData,"\u7ec4\u961f\u8bb0\u724c\u5668\u4ec5\u9650\u7ec4\u961f\u4e0b\u4f7f\u7528\u54e6~"):void u.EventManager.instance.emit(g.DataEvent.ToastData,"\u7ec4\u961f\u8bb0\u724c\u5668\u4ec5\u9650\u7ec4\u961f\u4e0b\u5151\u6362\u54e6~");n>0?this.useProp(e.propID):this.exchangeProp(e)}},e.prototype.isTeamNoteCard=function(t){return t===y.PropIDEnum.TEAM_ONE_DAY_NOTECARD||t===y.PropIDEnum.TEAM_SEVEN_DAY_NOTECARD||t===y.PropIDEnum.TEAM_THIRTY_DAY_NOTECARD},e.prototype.useProp=function(t){var e=this,n=_.GameCommonModel.instance.getAppid();h.PropModule.reqUseProp(n,t,function(t){0===t?(u.EventManager.instance.emit(g.DataEvent.ToastData,"\u4f7f\u7528\u8bb0\u724c\u5668\u6210\u529f"),e._callback&&e._callback(!0),e.onBtnClose()):u.EventManager.instance.emit(g.DataEvent.ToastData,"\u4f7f\u7528\u8bb0\u724c\u5668\u5931\u8d25")})},e.prototype.exchangeProp=function(t){var e=this;p.UserInfoModel.instance.userInfo.diamond<t.price?u.EventManager.instance.emit(g.DataEvent.ToastData,"\u5151\u6362\u5931\u8d25\uff0c\u60a8\u643a\u5e26\u7684\u94bb\u77f3\u4e0d\u8db3"):this.reqExchang(v[t.propID],function(n){0===n&&(u.EventManager.instance.emit(g.DataEvent.ToastData,t.name+"\u5151\u6362\u6210\u529f"),e.useProp(t.propID))})},e.prototype.reqExchang=function(t,e){var n=_.GameCommonModel.instance.getAppid();m.ShopProxy.instance.reqExchangComm(t,n,function(t){0===t?e&&e(t):u.EventManager.instance.emit(g.DataEvent.ToastData,"\u5151\u6362\u5931\u8d25")})},r([jsClass],e)}(d.FadeUI);n.BuyNoteCardUI=E,cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/UI/BaseUI":"BaseUI","../../../../Framework/UI/FadeUI":"FadeUI","../../../Base/Data/DataEvent":"DataEvent","../../../Base/Data/DataProps":"DataProps","../../../Base/Data/DatazOrder":"DatazOrder","../../../Base/Module/Prop/PropModule":"PropModule","../../../Shop/ShopProxy":"ShopProxy","../../../UserInfo/UserInfoModel":"UserInfoModel","../GameCommonModel":"GameCommonModel","./BuyNoteCardModel":"BuyNoteCardModel"}],CardCommonFunc:[function(t,e,n){"use strict";cc._RF.push(e,"8691cETTrBMwKZuNUKy+S5N","CardCommonFunc");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.CardCommonFunc=n.ONE_HANDCARDS_COUNT=n.PlayCardsAniDirectionEnum=void 0;var a=t("../Model/GameModel");(function(t){t[t.LEFT=0]="LEFT",t[t.CENTER=1]="CENTER",t[t.CENTER_UP=2]="CENTER_UP",t[t.FRAME_CENTER=3]="FRAME_CENTER",t[t.RIGHT=4]="RIGHT"})(n.PlayCardsAniDirectionEnum||(n.PlayCardsAniDirectionEnum={})),n.ONE_HANDCARDS_COUNT=27;var i=function(){function t(){}var e;return e=t,t.calSelfHandCardPosition_Heng=function(t,e,o,a){var i,r=cc.view.getVisibleSize(),s=this.HORIZONAL_HANDCARD_INTERVAL_LR,c=e.width*a;t-=1,0===s&&(s=(r.width-24-c)/(n.ONE_HANDCARDS_COUNT-1),this.HORIZONAL_HANDCARD_INTERVAL_LR=s);var l=t*s;return i=12+(n.ONE_HANDCARDS_COUNT-o)*s*.5+l,new cc.Vec2(i,0)},t.calSelfHandCardPosition_Shu=function(t,e,n,o,a){var i=cc.view.getVisibleSize(),r=n.width*a,s=this.VERTICAL_HANDCARD_INTERVAL_LR;t-=1;var c,l=o,u=(e-=1)*this.VERTICAL_HANDCARD_INTERVAL_TD;0===s&&(o<14&&(o=13),s=(i.width-24-r)/(o-1),this.VERTICAL_HANDCARD_INTERVAL_LR=s);var d=(l-1)*s+r;return c=t*s+.5*(i.width-d),new cc.Vec2(c,u)},t.calSelfOutCardPosition=function(t,e,o,i){var r,s=cc.view.getVisibleSize(),c=0,l=e.width*i,u=235+235*(1-i),d=this.SELF_OUTCARD_INTERVAL_LR;return t-=1,a.GameModel.instance.isTuoPaiModel()&&(o=o>14?14:o,t>13&&(t-=14,c=-e.width*i*.8)),0===d&&(d=(s.width-2*u-l)/(n.ONE_HANDCARDS_COUNT-1),this.SELF_OUTCARD_INTERVAL_LR=d),r=u+.5*((n.ONE_HANDCARDS_COUNT-o)*d+l)+t*d,new cc.Vec2(r,c)},t.updateShowHandCardsUI=function(t,e,n){if(t&&t.length>0){var o=0;t.forEach(function(t){o<e?(t.showNode(!0),++o):t.showNode(!1)}),n&&n()}},t.updateHorizonalHandCardsAndPos=function(t,n){var o=1,a=this.getHorizonalCardsUIArrLength(n);for(var i in n)for(var r=n[i],s=0;s<r.length;s++)for(var c=r[s],l=0;l<c.length;l++)if("leftArr"!==i&&"rightArr"!==i||0!==l){var u=t[o-1];u.setCardInfo(c[l]),u.setCardUP(e.SELECT_HORIZONAL_CARD_Y),u.initPos(),u.showSelectCardUP(!1);var d=e.calSelfHandCardPosition_Heng(o,u.size,a,u.rootNode.scale);u.setPositionX(d.x),u.initNodeData(),u.setCardZOrder(o),"leftArr"===i?u.showLiPaiTextImg(l===c.length-1):"rightArr"===i?u.showLiPaiTextImg(1===l):u.showLiPaiTextImg(!1),u.showLiPaiMaskImg("leftArr"===i||"rightArr"===i),++o}},t.getHorizonalCardsUIArrLength=function(t){var e=0;for(var n in t)for(var o=t[n],a=0;a<o.length;a++)e+=o[a].length,"centerArr"!==n&&(e-=1);return e},t.updateVerticalHandCardsAndPos=function(t,n,o){var a=0,i=0,r=n.leftArr.length+n.centerArr.length+n.rightArr.length;for(var s in this.VERTICAL_HANDCARD_INTERVAL_LR=0,n)for(var c=n[s],l=0;l<c.length;l++){++i;for(var u=c[l],d=0;d<u.length;d++)if("leftArr"!==s&&"rightArr"!==s||0!==d){var p=t[a];++a;var h=u[d];p.setCardInfo(h),p.setCardUP(e.SELECT_VERTICAL_CARD_Y),p.initPos(),p.showSelectCardUP(!1);var _=e.calSelfHandCardPosition_Shu(i,u.length-d,p.size,r,p.rootNode.scale);if(p.setPositionX(_.x),p.setAddPositionY(_.y),p.initNodeData(),p.setCardZOrder(20*i+d),"leftArr"===s||"rightArr"===s){var f=o[s][l];p.showLiPaiTextImg(d===u.length-1,f)}else p.showLiPaiTextImg(!1)}}},t.updateOutCardsUI=function(t,e,n){if(t&&t.length>0){var o=e.cards,a=0;t.forEach(function(t){a<o.length?(t.initPos(),t.setCardInfo(o[a]),t.showNodeByPutType(e.putType),++a):t.showNode(!1)}),n&&n()}},t.updateSelfOutCardsPosSort=function(t,n){this.SELF_OUTCARD_INTERVAL_LR=0;for(var o=1;o<=n.length;o++){var a=t[o-1],i=e.calSelfOutCardPosition(o,a.node.getContentSize(),n.length,a.rootNode.scale);a.setPositionX(i.x),a.setPositionAddY(i.y)}},t.SELF_OUTCARD_INTERVAL_LR=0,t.VERTICAL_HANDCARD_INTERVAL_LR=0,t.VERTICAL_HANDCARD_INTERVAL_TD=49,t.HORIZONAL_HANDCARD_INTERVAL_LR=0,t.SELECT_VERTICAL_CARD_Y=0,t.SELECT_HORIZONAL_CARD_Y=15,e=o([jsClass("CardCommonFunc")],t)}();n.CardCommonFunc=i,cc._RF.pop()},{"../Model/GameModel":"GameModel"}],CardConstants:[function(t,e,n){"use strict";cc._RF.push(e,"5ada8iA4z1IhL4jCv3qILYd","CardConstants");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.CardConstants=void 0;var a=function(){function t(){}return t.cardColors={CC_NULL:0,CC_FANG:1,CC_MEI:2,CC_HONG:3,CC_HEI:4,CC_WANG:5,CC_BACK:6,CC_COUNT:7},t.cardNums={CN_NULL:0,CN_1:1,CN_2:2,CN_3:3,CN_4:4,CN_5:5,CN_6:6,CN_7:7,CN_8:8,CN_9:9,CN_10:10,CN_J:11,CN_Q:12,CN_K:13,CN_A:14,CN_F:15,CN_Z:16,CN_B:17},t.cards={CV_NONE:0,CV_FANG_A:1,CV_FANG_2:2,CV_FANG_3:3,CV_FANG_4:4,CV_FANG_5:5,CV_FANG_6:6,CV_FANG_7:7,CV_FANG_8:8,CV_FANG_9:9,CV_FANG_10:10,CV_FANG_J:11,CV_FANG_Q:12,CV_FANG_K:13,CV_MEI_A:14,CV_MEI_2:15,CV_MEI_3:16,CV_MEI_4:17,CV_MEI_5:18,CV_MEI_6:19,CV_MEI_7:20,CV_MEI_8:21,CV_MEI_9:22,CV_MEI_10:23,CV_MEI_J:24,CV_MEI_Q:25,CV_MEI_K:26,CV_HONG_A:27,CV_HONG_2:28,CV_HONG_3:29,CV_HONG_4:30,CV_HONG_5:31,CV_HONG_6:32,CV_HONG_7:33,CV_HONG_8:34,CV_HONG_9:35,CV_HONG_10:36,CV_HONG_J:37,CV_HONG_Q:38,CV_HONG_K:39,CV_HEI_A:40,CV_HEI_2:41,CV_HEI_3:42,CV_HEI_4:43,CV_HEI_5:44,CV_HEI_6:45,CV_HEI_7:46,CV_HEI_8:47,CV_HEI_9:48,CV_HEI_10:49,CV_HEI_J:50,CV_HEI_Q:51,CV_HEI_K:52,CV_WANG_F:53,CV_WANG_Z:54,CV_BACK:55,CV_FACE:56,CV_JOKER:57},t.cardType={CTID_NONE:0,CTID_YI_ZHANG:1,CTID_ER_ZHANG:2,CTID_SAN_ZHANG:3,CTID_SI_ZHANG:4,CTID_WU_ZHANG:5,CTID_LIU_ZHANG:6,CTID_QI_ZHANG:7,CTID_BA_ZHANG:8,CTID_YI_SHUN:9,CTID_ER_SHUN:10,CTID_SAN_SHUN:11,CTID_SI_SHUN:12,CTID_WU_SHUN:13,CTID_LIU_SHUN:14,CTID_QI_SHUN:15,CTID_BA_SHUN:16,CTID_HUO_JIAN:17,CTID_FEI_JI:18,CTID_SAN_DAI_YI:19,CTID_SI_DAI_ER:20,CTID_COUNT:21,CTID_USER:100},t.STO_FLAG_BY_NUM=0,t.STO_FLAG_BY_CARD=1,t.FBNC_FLAG_JUST=0,t.FBNC_FLAG_MORE=1,o([jsClass("CardConstants")],t)}();n.CardConstants=a,cc._RF.pop()},{}],CardFunc:[function(t,e,n){"use strict";cc._RF.push(e,"44a22moQ+tPr5vZcUJ5fq3F","CardFunc");var o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.CardFunc=void 0;var i=t("../CommonFunc/ToolLuaFunc"),r=t("./CardConstants");jsClass("CardFunc");var s=function(){function t(){}return t.getCardColor=function(t){return t==r.CardConstants.cards.CV_BACK?r.CardConstants.cardColors.CC_BACK:t==r.CardConstants.cards.CV_WANG_F||t==r.CardConstants.cards.CV_WANG_Z?r.CardConstants.cardColors.CC_WANG:t>=r.CardConstants.cards.CV_FANG_A&&t<=r.CardConstants.cards.CV_FANG_K?r.CardConstants.cardColors.CC_FANG:t>=r.CardConstants.cards.CV_MEI_A&&t<=r.CardConstants.cards.CV_MEI_K?r.CardConstants.cardColors.CC_MEI:t>=r.CardConstants.cards.CV_HONG_A&&t<=r.CardConstants.cards.CV_HONG_K?r.CardConstants.cardColors.CC_HONG:t>=r.CardConstants.cards.CV_HEI_A&&t<=r.CardConstants.cards.CV_HEI_K?r.CardConstants.cardColors.CC_HEI:r.CardConstants.cardColors.CC_NULL},t.getCardNum=function(t){return t==r.CardConstants.cards.CV_BACK?r.CardConstants.cardNums.CN_B:t==r.CardConstants.cards.CV_WANG_F?r.CardConstants.cardNums.CN_F:t==r.CardConstants.cards.CV_WANG_Z?r.CardConstants.cardNums.CN_Z:t==r.CardConstants.cards.CV_FANG_A||t==r.CardConstants.cards.CV_MEI_A||t==r.CardConstants.cards.CV_HONG_A||t==r.CardConstants.cards.CV_HEI_A?r.CardConstants.cardNums.CN_A:t>=r.CardConstants.cards.CV_FANG_2&&t<=r.CardConstants.cards.CV_FANG_K?r.CardConstants.cardNums.CN_2+(t-r.CardConstants.cards.CV_FANG_2):t>=r.CardConstants.cards.CV_MEI_2&&t<=r.CardConstants.cards.CV_MEI_K?r.CardConstants.cardNums.CN_2+(t-r.CardConstants.cards.CV_MEI_2):t>=r.CardConstants.cards.CV_HONG_2&&t<=r.CardConstants.cards.CV_HONG_K?r.CardConstants.cardNums.CN_2+(t-r.CardConstants.cards.CV_HONG_2):t>=r.CardConstants.cards.CV_HEI_2&&t<=r.CardConstants.cards.CV_HEI_K?r.CardConstants.cardNums.CN_2+(t-r.CardConstants.cards.CV_HEI_2):r.CardConstants.cardNums.CN_NULL},t.getCard=function(t,e){if(t==r.CardConstants.cardColors.CC_BACK){if(e==r.CardConstants.cardNums.CN_B)return r.CardConstants.cards.CV_BACK}else if(t==r.CardConstants.cardColors.CC_WANG){if(e==r.CardConstants.cardNums.CN_Z)return r.CardConstants.cards.CV_WANG_Z;if(e==r.CardConstants.cardNums.CN_F)return r.CardConstants.cards.CV_WANG_F}else{if(t==r.CardConstants.cardColors.CC_FANG)return e==r.CardConstants.cardNums.CN_A?r.CardConstants.cards.CV_FANG_A:r.CardConstants.cards.CV_FANG_2+(e-r.CardConstants.cardNums.CN_2);if(t==r.CardConstants.cardColors.CC_MEI)return e==r.CardConstants.cardNums.CN_A?r.CardConstants.cards.CV_MEI_A:r.CardConstants.cards.CV_MEI_2+(e-r.CardConstants.cardNums.CN_2);if(t==r.CardConstants.cardColors.CC_HONG)return e==r.CardConstants.cardNums.CN_A?r.CardConstants.cards.CV_HONG_A:r.CardConstants.cards.CV_HONG_2+(e-r.CardConstants.cardNums.CN_2);if(t==r.CardConstants.cardColors.CC_HEI)return e==r.CardConstants.cardNums.CN_A?r.CardConstants.cards.CV_HEI_A:r.CardConstants.cards.CV_HEI_2+(e-r.CardConstants.cardNums.CN_2)}return r.CardConstants.cards.CV_NONE},t.addCards=function(t,e){var n,a,r=i.ToolLuaFunc.deepCopy(t);try{for(var s=o(e),c=s.next();!c.done;c=s.next()){var l=c.value;r.push(l)}}catch(u){n={error:u}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return r},t.delCard=function(t,e){for(var n=i.ToolLuaFunc.deepCopy(t),o=n.length-1;o>=0;o--)if(n[o]==e)return n.splice(o,1),[!0,n];return[!1,n]},t.delCards=function(t,e){var n,r,s,c=!1,l=i.ToolLuaFunc.deepCopy(t);try{for(var u=o(e),d=u.next();!d.done;d=u.next()){var p=d.value;if(c=(s=a(this.delCard(l,p),2))[0],l=s[1],!c)return[!1,l]}}catch(h){n={error:h}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return[!0,l]},t}();n.CardFunc=s,cc._RF.pop()},{"../CommonFunc/ToolLuaFunc":"ToolLuaFunc","./CardConstants":"CardConstants"}],CardGamingData:[function(t,e,n){"use strict";cc._RF.push(e,"5eed7iUbWRFppKE7EoXFKCt","CardGamingData");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.CardGamingData=void 0;var i=t("./CardFunc"),r=t("../CommonFunc/ToolLuaFunc"),s=function(){function t(){this._maxPlayer=4,this._firstCount=17,this._baseCount=3,this._allCards={},this._baseCards={},this._allPlayedCards={},this._handCards={},this._outCards={},this._openFlag={},this._outNum={},this._panCount=0,this._prePlayer=0,this._nowPlayer=0,this._banker=0,this._baseOwner=0,this._stepID=0,this._stepTime=0,this._subStepID=0,this._powers={},this._trusts={},this._preWinner=0,this._canSpecify=!1,this._specifyCards={},this._toSpecifyCards={},this._firstSpecifySeat=0,this._nowSpecifySeat=0,this._allSpecifyCards={},this._gameCards={},this._gameCardCounts={},this._gameCardNumCounts={},this._cancels={},this._outCombs={},this._levelNum=0}return t.prototype.onConstruct=function(){for(var t=0;t<4;t++)this._outNum[t]=0},t.prototype.setOutComb=function(t,e){this._outCombs[t]=e},t.prototype.getOutComb=function(t){return this._outCombs[t]},t.prototype.clearOutCombs=function(){this._outCombs={}},t.prototype.setCancel=function(t,e){this._cancels[t]=e},t.prototype.isCancel=function(t){return this._cancels[t]},t.prototype.clearCancels=function(){this._cancels={}},t.prototype.getMaxPlayer=function(){return this._maxPlayer},t.prototype.setMaxPlayer=function(t){this._maxPlayer=t},t.prototype.getFirstCount=function(){return this._firstCount},t.prototype.setFirstCount=function(t){this._firstCount=t},t.prototype.getBaseCount=function(){return this._baseCount},t.prototype.setBaseCount=function(t){this._baseCount=t},t.prototype.getAllCards=function(){return r.ToolLuaFunc.deepCopy(this._allCards)},t.prototype.setAllCards=function(t){this._allCards=t},t.prototype.getBaseCards=function(){return r.ToolLuaFunc.deepCopy(this._baseCards)},t.prototype.setBaseCards=function(t){this._baseCards=t},t.prototype.getAllPlayedCards=function(){return r.ToolLuaFunc.deepCopy(this._allPlayedCards)},t.prototype.setAllPlayedCards=function(t){this._allPlayedCards=t},t.prototype.getHandCards=function(t){var e=r.ToolLuaFunc.deepCopy(this._handCards[t]);return null==e&&(e={}),e},t.prototype.setHandCards=function(t,e){this._handCards[t]=e},t.prototype.delHandCards=function(t,e){if(!this._handCards[t])return!1;var n=a(i.CardFunc.delCards(this._handCards[t],e),2),o=n[0],r=n[1];return o&&(this._handCards[t]=r),o},t.prototype.addHandCards=function(t,e){if(!this._handCards[t])return!1;var n=i.CardFunc.addCards(this._handCards[t],e);return this._handCards[t]=n,!0},t.prototype.getHandCardsLength=function(t){return this._handCards[t]?r.ToolLuaFunc.getListLength(this._handCards[t]):0},t.prototype.clearHandCards=function(){this._handCards={}},t.prototype.getOutCards=function(t){return r.ToolLuaFunc.deepCopy(this._outCards[t])||{}},t.prototype.setOutCards=function(t,e){this._outCards[t]=e},t.prototype.clearOutCards=function(){this._outCards={}},t.prototype.clearSeatOutCards=function(t){this._outCards[t]&&(this._outCards[t]={})},t.prototype.getOpenFlag=function(t){return r.ToolLuaFunc.deepCopy(this._openFlag[t])},t.prototype.setOpenFlag=function(t,e){this._openFlag[t]=e},t.prototype.getOutNum=function(t){return r.ToolLuaFunc.deepCopy(this._outNum[t])},t.prototype.setOutNum=function(t,e){this._outNum[t]=e},t.prototype.getPanCount=function(){return this._panCount},t.prototype.setPanCount=function(t){this._panCount=t},t.prototype.getPrePlayer=function(){return this._prePlayer},t.prototype.setPrePlayer=function(t){this._prePlayer=t},t.prototype.getNowPlayer=function(){return this._nowPlayer},t.prototype.setNowPlayer=function(t){this._nowPlayer=t},t.prototype.getBanker=function(){return this._banker},t.prototype.setBanker=function(t){this._banker=t},t.prototype.getBaseOwner=function(){return this._baseOwner},t.prototype.setBaseOwner=function(t){this._baseOwner=t},t.prototype.getStepID=function(){return this._stepID},t.prototype.setStepID=function(t){this._stepID=t},t.prototype.getStepTime=function(){return this._stepTime},t.prototype.setStepTime=function(t){this._stepTime=t},t.prototype.getSubStepID=function(){return this._subStepID},t.prototype.setSubStepID=function(t){this._subStepID=t},t.prototype.getPower=function(t){return r.ToolLuaFunc.deepCopy(this._powers[t])},t.prototype.setPower=function(t,e){this._powers[t]=e},t.prototype.clearPowers=function(){this._powers={}},t.prototype.getTrusts=function(){return r.ToolLuaFunc.deepCopy(this._trusts)},t.prototype.setTrusts=function(t){this._trusts=t},t.prototype.getPreWinner=function(){return this._preWinner},t.prototype.setPreWinner=function(t){this._preWinner=t},t.prototype.getCanSpecify=function(){return this._canSpecify},t.prototype.setCanSpecify=function(t){this._canSpecify=t},t.prototype.getSpecifyCards=function(){return r.ToolLuaFunc.deepCopy(this._specifyCards)},t.prototype.setSpecifyCards=function(t){this._specifyCards=t},t.prototype.getToSpecifyCards=function(){return r.ToolLuaFunc.deepCopy(this._toSpecifyCards)},t.prototype.setToSpecifyCards=function(t){this._toSpecifyCards=t},t.prototype.getFirstSpecifySeat=function(){return this._firstSpecifySeat},t.prototype.setFirstSpecifySeat=function(t){this._firstSpecifySeat=t},t.prototype.getNowSpecifySeat=function(){return this._nowSpecifySeat},t.prototype.setNowSpecifySeat=function(t){this._nowSpecifySeat=t},t.prototype.getAllSpecifyCards=function(){return r.ToolLuaFunc.deepCopy(this._allSpecifyCards)},t.prototype.setAllSpecifyCards=function(t){this._allSpecifyCards=t},t.prototype.getGameCards=function(){return r.ToolLuaFunc.deepCopy(this._gameCards)},t.prototype.setGameCards=function(t){this._gameCards=t},t.prototype.getGameCardCounts=function(){return r.ToolLuaFunc.deepCopy(this._gameCardCounts)},t.prototype.setGameCardCounts=function(t){this._gameCardCounts=t},t.prototype.getGameCardNumCounts=function(){return r.ToolLuaFunc.deepCopy(this._gameCardNumCounts)},t.prototype.setGameCardNumCounts=function(t){this._gameCardNumCounts=t},t.prototype.getLevelNum=function(){return this._levelNum},t.prototype.setLevelNum=function(t){this._levelNum=t},o([jsClass("CardGamingData")],t)}();n.CardGamingData=s,cc._RF.pop()},{"../CommonFunc/ToolLuaFunc":"ToolLuaFunc","./CardFunc":"CardFunc"}],CardProtocol:[function(t,e,n){"use strict";cc._RF.push(e,"df623acd8tLRpH4bWmhmJ7Z","CardProtocol");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CardProtocol=void 0;var i=t("../../../../Base/Module/Network/Base/ProtocolManager"),r=t("../../../../Base/Module/Network/Base/BaseGameProtocol");(function(t){var e,n=i.ProtocolManager.instance;(function(t){t[t.CLXY_FIRST_ID=11220]="CLXY_FIRST_ID",t[t.CLXY_ALL_CARD=11221]="CLXY_ALL_CARD",t[t.CLXY_ALL_BACK=11222]="CLXY_ALL_BACK",t[t.CLXY_BASE_CARD=11223]="CLXY_BASE_CARD",t[t.CLXY_BASE_BACK=11224]="CLXY_BASE_BACK",t[t.CLXY_HAND_CARD=11225]="CLXY_HAND_CARD",t[t.CLXY_HAND_BACK=11226]="CLXY_HAND_BACK",t[t.CLXY_OUT_CARD=11227]="CLXY_OUT_CARD",t[t.CLXY_BANKER=11228]="CLXY_BANKER",t[t.CLXY_STATE=11229]="CLXY_STATE",t[t.CLXY_GAME_STEP=11230]="CLXY_GAME_STEP",t[t.CLXY_POWER=11231]="CLXY_POWER",t[t.CLXY_CLOCK=11232]="CLXY_CLOCK",t[t.CLXY_TAKE_FIRST=11233]="CLXY_TAKE_FIRST",t[t.CLXY_ADD_BASE=11234]="CLXY_ADD_BASE",t[t.CLXY_PLAY_CARD=11235]="CLXY_PLAY_CARD",t[t.CLXY_END_WAIT=11236]="CLXY_END_WAIT",t[t.CLXY_RESP_POWER=11237]="CLXY_RESP_POWER",t[t.CLXY_RESP_POWER_EX=11238]="CLXY_RESP_POWER_EX",t[t.CLXY_TURN_DATA=11239]="CLXY_TURN_DATA",t[t.CLXY_START_GAME=11240]="CLXY_START_GAME",t[t.CLXY_END_GAME=11241]="CLXY_END_GAME",t[t.CLXY_RELINK_ENTER=11242]="CLXY_RELINK_ENTER",t[t.CLXY_LOOKER_ENTER=11243]="CLXY_LOOKER_ENTER",t[t.CLXY_TRUST=11244]="CLXY_TRUST",t[t.CLXY_BASE_OWNER=11245]="CLXY_BASE_OWNER",t[t.CLXY_SPECF_DATA=11246]="CLXY_SPECF_DATA",t[t.CLXY_SPECF_HAND=11247]="CLXY_SPECF_HAND",t[t.CLXY_TALKMSG=11248]="CLXY_TALKMSG",t[t.CLXY_END_STEP=11249]="CLXY_END_STEP",t[t.CLXY_LAST_ID=11259]="CLXY_LAST_ID"})(e=t.xyid||(t.xyid={}));var o=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_ALL_CARD,n.count=0,n.cards=[],n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.count=e.readShort(),this.cards=e.readShortArr(this.count),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeShort(this.count),t.writShortArr(this.cards),t},n}(r.BaseGameProtocol);t.msgAllCard=o,n.setGameProtocol(e.CLXY_ALL_CARD,o);var s=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_ALL_BACK,n.count=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.count=e.readShort(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeShort(this.count),t},n}(r.BaseGameProtocol);t.msgAllBack=s,n.setGameProtocol(e.CLXY_ALL_BACK,s);var c=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_BASE_CARD,n.count=0,n.cards=[],n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.count=e.readByte(),this.cards=e.readByteArr(this.count),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.count),t.writeByteArr(this.cards),t},n}(r.BaseGameProtocol);t.msgBaseCard=c,n.setGameProtocol(e.CLXY_BASE_CARD,c);var l=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_BASE_BACK,n.count=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.count=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.count),t},n}(r.BaseGameProtocol);t.msgBaseBack=l,n.setGameProtocol(e.CLXY_BASE_BACK,l);var u=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_HAND_CARD,n.seat=0,n.count=0,n.cards=[],n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.seat=e.readByte(),this.count=e.readByte(),this.cards=e.readByteArr(this.count),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.seat),t.writeByte(this.count),t.writeByteArr(this.cards),t},n}(r.BaseGameProtocol);t.msgHandCard=u,n.setGameProtocol(e.CLXY_HAND_CARD,u);var d=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_HAND_BACK,n.seat=0,n.count=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.seat=e.readByte(),this.count=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.seat),t.writeByte(this.count),t},n}(r.BaseGameProtocol);t.msgHandBack=d,n.setGameProtocol(e.CLXY_HAND_BACK,d);var p=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_OUT_CARD,n.seat=0,n.cardCount=0,n.cards=[],n.typeID=0,n.power=0,n.outNum=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.seat=e.readByte(),this.cardCount=e.readByte(),0!==this.cardCount&&(this.cards=e.readByteArr(this.cardCount),this.typeID=e.readByte(),this.power=e.readByte()),this.outNum=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.seat),0===this.cardCount?t.writeByte(this.cardCount):(t.writeByteArr(this.cards),t.writeByte(this.typeID),t.writeByte(this.power)),t.writeShort(this.outNum),t},n}(r.BaseGameProtocol);t.msgOutCard=p,n.setGameProtocol(e.CLXY_OUT_CARD,p);var h=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_BANKER,n.seat=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.seat=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.seat),t},n}(r.BaseGameProtocol);t.msgBanker=h,n.setGameProtocol(e.CLXY_BANKER,h);var _=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_TAKE_FIRST,n.flag=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.flag=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.flag),t},n}(r.BaseGameProtocol);t.msgTakeFirst=_,n.setGameProtocol(e.CLXY_TAKE_FIRST,_);var f=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_ADD_BASE,n.seat=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.seat=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.seat),t},n}(r.BaseGameProtocol);t.msgAddBase=f,n.setGameProtocol(e.CLXY_ADD_BASE,f);var m=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_PLAY_CARD,n.seat=0,n.cardCount=0,n.cards=[],n.typeID=0,n.power=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.seat=e.readByte(),this.cardCount=e.readByte(),0!==this.cardCount&&(this.cards=e.readByteArr(this.cardCount),this.typeID=e.readByte(),this.power=e.readByte()),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.seat),0===this.cardCount?t.writeByte(this.cardCount):(t.writeByteArr(this.cards),t.writeByte(this.typeID),t.writeByte(this.power)),t},n}(r.BaseGameProtocol);t.msgPlayCard=m,n.setGameProtocol(e.CLXY_PLAY_CARD,m);var g=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_END_WAIT,n.seat=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.seat=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.seat),t},n}(r.BaseGameProtocol);t.msgEndWait=g,n.setGameProtocol(e.CLXY_END_WAIT,g);var y=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_GAME_STEP,n.stepID=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.stepID=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.stepID),t},n}(r.BaseGameProtocol);t.msgGameStep=y,n.setGameProtocol(e.CLXY_GAME_STEP,y);var I=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_POWER,n.seat=0,n.power=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.seat=e.readByte(),this.power=e.readInt(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.seat),t.writeInt(this.power),t},n}(r.BaseGameProtocol);t.msgPower=I,n.setGameProtocol(e.CLXY_POWER,I);var C=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_CLOCK,n.seat=0,n.time=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.seat=e.readByte(),this.time=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.seat),t.writeByte(this.time),t},n}(r.BaseGameProtocol);t.msgClock=C,n.setGameProtocol(e.CLXY_CLOCK,C);var M=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_RESP_POWER,n.seat=0,n.power=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.seat=e.readByte(),this.power=e.readInt(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.seat),t.writeInt(this.power),t},n}(r.BaseGameProtocol);t.msgRespPower=M,n.setGameProtocol(e.CLXY_RESP_POWER,M);var v=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_RESP_POWER_EX,n.seat=0,n.stepID=0,n.power=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.stepID=e.readByte(),this.seat=e.readByte(),this.power=e.readInt(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.stepID),t.writeByte(this.seat),t.writeInt(this.power),t},n}(r.BaseGameProtocol);t.msgRespPowerEx=v,n.setGameProtocol(e.CLXY_RESP_POWER_EX,v);var E=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_TURN_DATA,n.preSeat=0,n.nowSeat=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.preSeat=e.readByte(),this.nowSeat=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.preSeat),t.writeByte(this.nowSeat),t},n}(r.BaseGameProtocol);t.msgTurnData=E,n.setGameProtocol(e.CLXY_TURN_DATA,E);var A=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_START_GAME,n.flag=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.flag=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.flag),t},n}(r.BaseGameProtocol);t.msgStartGame=A,n.setGameProtocol(e.CLXY_START_GAME,A);var P=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_END_GAME,n.flag=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.flag=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.flag),t},n}(r.BaseGameProtocol);t.msgEndGame=P,n.setGameProtocol(e.CLXY_END_GAME,P);var b=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_RELINK_ENTER,n.flag=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.flag=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.flag),t},n}(r.BaseGameProtocol);t.msgRelinkEnter=b,n.setGameProtocol(e.CLXY_RELINK_ENTER,b);var U=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_TRUST,n.seat=0,n.flag=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.seat=e.readByte(),this.flag=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.seat),t.writeByte(this.flag),t},n}(r.BaseGameProtocol);t.msgTrust=U,n.setGameProtocol(e.CLXY_TRUST,U);var S=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_SPECF_DATA,n.count=0,n.cards=[],n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.count=e.readByte(),this.cards=e.readByteArr(this.count),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.count),t.writeByteArr(this.cards),t},n}(r.BaseGameProtocol);t.msgSpecfData=S,n.setGameProtocol(e.CLXY_SPECF_DATA,S);var T=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_SPECF_HAND,n.seat=0,n.count=0,n.cards=[],n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.seat=e.readByte(),this.count=e.readByte(),this.cards=e.readByteArr(this.count),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.seat),t.writeByte(this.count),t.writeByteArr(this.cards),t},n}(r.BaseGameProtocol);t.msgSpecfHand=T,n.setGameProtocol(e.CLXY_SPECF_HAND,T);var R=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.CLXY_END_STEP,n.stepID=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.stepID=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.stepID),t},n}(r.BaseGameProtocol);t.msgEndStep=R,n.setGameProtocol(e.CLXY_END_STEP,R)})(n.CardProtocol||(n.CardProtocol={})),cc._RF.pop()},{"../../../../Base/Module/Network/Base/BaseGameProtocol":"BaseGameProtocol","../../../../Base/Module/Network/Base/ProtocolManager":"ProtocolManager"}],CardRuleDef:[function(t,e,n){"use strict";cc._RF.push(e,"cfff9wqLqJFKZjErYFmj86K","CardRuleDef"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],CardUIBase:[function(t,e,n){"use strict";cc._RF.push(e,"58070G6TzpDbrJsM8Qcwr15","CardUIBase");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.CardUIBase=n.CPaiControlEnum=void 0;var a,i=t("../../CommonLogic/CardRule/CardFunc"),r=t("../../../Base/Data/DataConstant"),s=t("../../CommonLogic/CardRule/CardConstants"),c=t("../GameCardModel/GameCardUISelfHandModel");(function(t){t[t.SHOW_NUM=0]="SHOW_NUM",t[t.SHOW_WANG=1]="SHOW_WANG"})(a=n.CPaiControlEnum||(n.CPaiControlEnum={}));var l=function(){function t(){this._cardNodeObj=null,this._cardValue=-1,this._cardNum=-1,this._cardColor=-1}return Object.defineProperty(t.prototype,"cardValue",{get:function(){return this._cardValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cardNum",{get:function(){return this._cardNum},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cardColor",{get:function(){return this._cardColor},enumerable:!1,configurable:!0}),t.prototype.setCardNodeObj=function(t){this._cardNodeObj=t},t.prototype.getCardNodeObj=function(){return this._cardNodeObj},Object.defineProperty(t.prototype,"node",{get:function(){return this._cardNodeObj.node},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rootNode",{get:function(){return this.node.parent.parent},enumerable:!1,configurable:!0}),t.prototype.getRootPosition=function(){return this.rootNode.getPosition()},t.prototype.setCardZOrder=function(t){this.rootNode.zIndex=t},t.prototype.getCardZOrder=function(){return this.rootNode.zIndex},t.prototype.showNode=function(t){this.node.active=t},t.prototype.isNodeVisible=function(){return this.node.active},t.prototype.setCardInfo=function(t){this._cardValue=t,this._cardNum=i.CardFunc.getCardNum(t),this._cardColor=i.CardFunc.getCardColor(t),this.loadCardTexture()},t.prototype.loadCardTexture=function(){this.setColorTexture(),this.setNumTexture()},t.prototype.setColorTexture=function(){var t=this.cardColor;t===s.CardConstants.cardColors.CC_WANG?(this._cardNodeObj.m_paiControl.selectedIndex=a.SHOW_WANG,this._cardNodeObj.m_bigHua.icon="ui://"+r.DataConstant.PKG_GAMECARDUI+"/CardDesign_"+this.cardValue):(this._cardNodeObj.m_paiControl.selectedIndex=a.SHOW_NUM,this._cardNodeObj.m_bigHua.icon="ui://"+r.DataConstant.PKG_GAMECARDUI+"/CardDesignColor_"+t,this._cardNodeObj.m_smallHua.icon="ui://"+r.DataConstant.PKG_GAMECARDUI+"/CardDesignColor_"+t)},t.prototype.setNumTexture=function(){var t;(function(t){t[t.RED=0]="RED",t[t.BLACK=1]="BLACK"})(t||(t={}));var e=this.cardColor,n=this.cardNum,o=t.RED;if(e===s.CardConstants.cardColors.CC_FANG||e===s.CardConstants.cardColors.CC_HONG)o=t.RED;else if(e===s.CardConstants.cardColors.CC_MEI||e===s.CardConstants.cardColors.CC_HEI)o=t.BLACK;else if(e===s.CardConstants.cardColors.CC_WANG)return n===s.CardConstants.cardNums.CN_Z?o=t.RED:n===s.CardConstants.cardNums.CN_F&&(o=t.BLACK),void(this._cardNodeObj.m_wang.icon="ui://"+r.DataConstant.PKG_GAMECARDUI+"/CardNum_"+o+"_"+n);this._cardNodeObj.m_num.icon="ui://"+r.DataConstant.PKG_GAMECARDUI+"/CardNum_"+o+"_"+n},Object.defineProperty(t.prototype,"level",{get:function(){return c.GameCardUISelfHandModel.instance.getGameCardLogic().getLevelCard()},enumerable:!1,configurable:!0}),t.prototype.isLevelCard=function(){return this.level===this.cardNum&&this.cardColor===s.CardConstants.cardColors.CC_HONG},t.prototype.isTuoCard=function(){return c.GameCardUISelfHandModel.instance.getGameCardLogic().isTuoCard(this._cardNum)},o([jsClass("CardUIBase")],t)}();n.CardUIBase=l,cc._RF.pop()},{"../../../Base/Data/DataConstant":"DataConstant","../../CommonLogic/CardRule/CardConstants":"CardConstants","../../CommonLogic/CardRule/CardFunc":"CardFunc","../GameCardModel/GameCardUISelfHandModel":"GameCardUISelfHandModel"}],CardUIOut:[function(t,e,n){"use strict";cc._RF.push(e,"e3c89YTh7xFdJBvVhNWOv2E","CardUIOut");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.CardUIOut=void 0;var r,s=t("./CardUIBase"),c=t("../../CommonLogic/CardRule/CardConstants"),l=t("../../../Base/Data/DataConstant"),u=t("../GameCardModel/GameCardUIData");(function(t){t[t.NOT_SHOW_MASK=0]="NOT_SHOW_MASK",t[t.SHOW_MASK=1]="SHOW_MASK"})(r||(r={}));var d=function(t){function e(){var e=t.call(this)||this;return e._tempX=0,e._tempY=0,e._realPosX=0,e}return a(e,t),Object.defineProperty(e.prototype,"rootNode",{get:function(){return this.node},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cardUIGCom",{get:function(){return this.getCardNodeObj()},enumerable:!1,configurable:!0}),e.prototype.setCardNodeObj=function(e){t.prototype.setCardNodeObj.call(this,e),this.initNodeData()},e.prototype.initNodeData=function(){this._tempX=this.rootNode.x,this._tempY=this.rootNode.y,this._realPosX=this._tempX},e.prototype.initPos=function(){this.rootNode.stopAllActions(),this.rootNode.scale=1,this.rootNode.angle=0,this.rootNode.opacity=255,this.rootNode.x=this._tempX,this.rootNode.y=this._tempY,this._realPosX=this._tempX},e.prototype.setPositionX=function(t){this.rootNode.x=t,this._realPosX=t},e.prototype.getRealPosX=function(){return this._realPosX},e.prototype.setPositionY=function(t){this.rootNode.y=t},e.prototype.setPositionAddY=function(t){this.rootNode.y=this._tempY+t},e.prototype.setColorTexture=function(){this.cardUIGCom.m_tuoImg.visible=this.isTuoCard();var t=this.cardColor;t===c.CardConstants.cardColors.CC_WANG?(this.cardUIGCom.m_paiControl.selectedIndex=s.CPaiControlEnum.SHOW_WANG,this.cardUIGCom.m_bigHua.icon="ui://"+l.DataConstant.PKG_GAMECARDUI+"/CardDesign_"+this.cardValue):(this.cardUIGCom.m_paiControl.selectedIndex=s.CPaiControlEnum.SHOW_NUM,this.isLevelCard()?this.cardUIGCom.m_smallHua.icon="ui://"+l.DataConstant.PKG_GAMECARDUI+"/JiPai":this.cardUIGCom.m_smallHua.icon="ui://"+l.DataConstant.PKG_GAMECARDUI+"/CardDesignColor_"+t,this.cardUIGCom.m_bigHua.icon="ui://"+l.DataConstant.PKG_GAMECARDUI+"/CardDesignColor_"+t)},e.prototype.changeOutCardPosYByLiPai=function(t){var e=t?-357:-287;this._tempY=e,this.rootNode.y=e},e.prototype.showNodeByPutType=function(t){this.node.active=!0,t==u.CShowOutCardTypeEnum.TANPAI_SHOW_PUT?this.cardUIGCom.m_selectControl.selectedIndex=r.SHOW_MASK:this.cardUIGCom.m_selectControl.selectedIndex=r.NOT_SHOW_MASK},i([jsClass("CardUIOut")],e)}(s.CardUIBase);n.CardUIOut=d,cc._RF.pop()},{"../../../Base/Data/DataConstant":"DataConstant","../../CommonLogic/CardRule/CardConstants":"CardConstants","../GameCardModel/GameCardUIData":"GameCardUIData","./CardUIBase":"CardUIBase"}],CardUISelfHand:[function(t,e,n){"use strict";cc._RF.push(e,"02a6bZRbVpHrZPDTSvumDHV","CardUISelfHand");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.CardUISelfHand=void 0;var r,s,c,l,u=t("./CardUIBase"),d=t("../../CommonLogic/CardRule/CardConstants"),p=t("../../../Base/Data/DataConstant"),h=t("../../CommonLogic/CardLogic/DefaultPokerCardsConst");(function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"})(r||(r={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(s||(s={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(c||(c={})),function(t){t[t.Opacity_0=0]="Opacity_0",t[t.Opacity_1=1]="Opacity_1",t[t.Opacity_2=2]="Opacity_2"}(l||(l={}));var _=function(t){function e(e){var n=t.call(this)||this;return n._initY=0,n._moveY=0,n._initSelectAreaSize=null,n._canTouchFlag=!0,n._tempX=0,n._tempY=0,n._isUP=!1,n.setCardNodeObj(e),n.initNodeData(),n}return a(e,t),Object.defineProperty(e.prototype,"isCanTouch",{get:function(){return this._canTouchFlag},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realX",{get:function(){return this._tempX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realY",{get:function(){return this._tempY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUP",{get:function(){return this._isUP},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cardUIGCom",{get:function(){return this.getCardNodeObj()},enumerable:!1,configurable:!0}),e.prototype.initNodeData=function(){this._tempX=this.rootNode.x,this._tempY=this.rootNode.y,this._initSelectAreaSize=this.cardUIGCom.m_selectArea.node.getContentSize(),0===this._initY&&(this._initY=this._tempY)},e.prototype.initPos=function(){this.rootNode.x=this._tempX,this.rootNode.y=this._tempY,this._canTouchFlag=!0,this.showSelectCardBg(!1),this.showSelectArea(!1)},e.prototype.showSelectCardBg=function(t){this.isCanTouch?this.cardUIGCom.m_selectControl.selectedIndex=t?l.Opacity_1:l.Opacity_0:(this.cardUIGCom.m_selectArea.setSize(this._initSelectAreaSize.width,this._initSelectAreaSize.height),this.cardUIGCom.m_selectControl.selectedIndex=l.Opacity_2)},e.prototype.showSelectArea=function(t){this.cardUIGCom.m_cSelectArea.selectedIndex=t?c.SHOW:c.HIDE},e.prototype.setSelectAreaSizeHieght=function(t){this.cardUIGCom.m_selectArea.setSize(this._initSelectAreaSize.width,t)},e.prototype.setPositionX=function(t){this.rootNode.x=t},e.prototype.setAddPositionY=function(t){this.rootNode.y=this._initY+t},e.prototype.setCanTouch=function(t){t?(this._canTouchFlag=!0,this.cardUIGCom.m_selectControl.selectedIndex=l.Opacity_0):(this._canTouchFlag=!1,this.cardUIGCom.m_selectControl.selectedIndex=l.Opacity_2)},Object.defineProperty(e.prototype,"worldPos",{get:function(){return this.cardUIGCom.node.parent.convertToWorldSpaceAR(this.cardUIGCom.node.getPosition())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.cardUIGCom.m_bg.node.getContentSize()},enumerable:!1,configurable:!0}),e.prototype.showLiPaiTextImg=function(t,e){this.cardUIGCom.m_liPaiZiControl.selectedIndex=t?r.SHOW:r.HIDE,t&&(e&&e>=h.PokerCardsType.SiZhang&&e!=h.PokerCardsType.WangZha?this.cardUIGCom.m_imgLiPai.url="ui://GameCardUI/img_lp_"+e:this.cardUIGCom.m_imgLiPai.url="ui://GameCardUI/img_lp_0")},e.prototype.showLiPaiMaskImg=function(t){this.cardUIGCom.m_liPaiBgControl.selectedIndex=t?s.SHOW:s.HIDE},e.prototype.setCardUP=function(t){this._moveY=t},e.prototype.showSelectCardUP=function(t){this._isUP!==t&&(this.showSelectCardBg(t),this._isUP=t,this.rootNode.y=t?this._tempY+this._moveY:this._tempY)},e.prototype.setColorTexture=function(){this.cardUIGCom.m_tuoImg.visible=this.isTuoCard();var t=this.cardColor;t===d.CardConstants.cardColors.CC_WANG?(this.cardUIGCom.m_paiControl.selectedIndex=u.CPaiControlEnum.SHOW_WANG,this.cardUIGCom.m_bigHua.icon="ui://"+p.DataConstant.PKG_GAMECARDUI+"/CardDesign_"+this.cardValue):(this.cardUIGCom.m_paiControl.selectedIndex=u.CPaiControlEnum.SHOW_NUM,this.isLevelCard()?this.cardUIGCom.m_smallHua.icon="ui://"+p.DataConstant.PKG_GAMECARDUI+"/JiPai":this.cardUIGCom.m_smallHua.icon="ui://"+p.DataConstant.PKG_GAMECARDUI+"/CardDesignColor_"+t,this.cardUIGCom.m_bigHua.icon="ui://"+p.DataConstant.PKG_GAMECARDUI+"/CardDesignColor_"+t)},e.prototype.setNumTexture=function(){var t;(function(t){t[t.RED=0]="RED",t[t.BLACK=1]="BLACK"})(t||(t={}));var e=this.cardColor,n=this.cardNum,o=t.RED;if(e===d.CardConstants.cardColors.CC_FANG||e===d.CardConstants.cardColors.CC_HONG)o=t.RED;else if(e===d.CardConstants.cardColors.CC_MEI||e===d.CardConstants.cardColors.CC_HEI)o=t.BLACK;else if(e===d.CardConstants.cardColors.CC_WANG)return n===d.CardConstants.cardNums.CN_Z?o=t.RED:n===d.CardConstants.cardNums.CN_F&&(o=t.BLACK),void(this.cardUIGCom.m_wang.icon="ui://"+p.DataConstant.PKG_GAMECARDUI+"/CardNum_"+o+"_"+n);this.cardUIGCom.m_num.icon="ui://"+p.DataConstant.PKG_GAMECARDUI+"/CardNum_"+o+"_"+n},i([jsClass("CardUISelfHand")],e)}(u.CardUIBase);n.CardUISelfHand=_,cc._RF.pop()},{"../../../Base/Data/DataConstant":"DataConstant","../../CommonLogic/CardLogic/DefaultPokerCardsConst":"DefaultPokerCardsConst","../../CommonLogic/CardRule/CardConstants":"CardConstants","./CardUIBase":"CardUIBase"}],CardUISelfTestHand:[function(t,e,n){"use strict";cc._RF.push(e,"793c279AIlP4ZoMXeZM+s/S","CardUISelfTestHand");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.CardUISelfTestHand=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.showSelectCardUP=function(t){this._isUP!==t&&(this.showSelectCardBg(t),this._isUP=t)},i([jsClass("CardUISelfTestHand")],e)}(t("./CardUISelfHand").CardUISelfHand);n.CardUISelfTestHand=r,cc._RF.pop()},{"./CardUISelfHand":"CardUISelfHand"}],CatmullRom:[function(t,e,n){"use strict";cc._RF.push(e,"f4f83TzEB1AQ4ZWaGG6tulG","CatmullRom");var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t};Object.defineProperty(n,"__esModule",{value:!0}),n.CatmullRom=n.Point=void 0;var r=function(t,e,n){this.x=t,this.y=e,this.z=n};n.Point=r;var s=function(){function t(t,e,n){if(this._pointDatas=[],!(t&&t.length>2))throw new Error("Parameter error!");this.calculatePointDatas(i(t),e,n)}return Object.defineProperty(t.prototype,"pointDatas",{get:function(){return this._pointDatas},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalDis",{get:function(){return this._totalDs},enumerable:!1,configurable:!0}),t.prototype.calculatePointDatas=function(t,e,n){var o,a=this,r=t[0],s=t[t.length-1];if(n){var c=t[1];t.unshift(s),t.push(r),t.push(c)}else t.unshift(s),t.push(r);this._pointDatas.length=0;for(var l=0,u=t.length-4;l<=u;++l){var d=t[l],p=(c=t[l+1],t[l+2]),h=t[l+3],_=this.drawSpline(d,c,p,h,e);l<u&&_.pop(),(o=this._pointDatas).push.apply(o,i(_))}this._totalDs=0;for(var f=[0],m=(l=0,this._pointDatas.length-1);l<m;++l){var g=this._pointDatas[l],y=this._pointDatas[l+1],I=y.p.x-g.p.x,C=y.p.y-g.p.y,M=Math.sqrt(I*I+C*C);this._totalDs+=M,f.push(this._totalDs)}this._pointPros=f.map(function(t){return t/a._totalDs})},t.prototype.evaluate=function(t){if(t<=0)return this._pointDatas[0].p;if(t>=1)return this._pointDatas[this._pointDatas.length-1].p;for(var e=0,n=this._pointPros.length-1;n>=0;--n)if(t>this._pointPros[n]){e=n;break}var o=this._pointPros[e],a=(t-o)/(this._pointPros[e+1]-o),i=this._pointDatas[e],r=this._pointDatas[e+1],s=i.t*(1-a)+(r.t||1)*a,c=s*s,l=c*s;return this.evaluateByABCD(i.a,i.b,i.c,i.d,s,c,l)},t.prototype.drawSpline=function(t,e,n,o,a){var i=new r(2*e.x,2*e.y,2*e.z),s=new r(n.x-t.x,n.y-t.y,n.z-t.z),c=new r(2*t.x-5*e.x+4*n.x-o.x,2*t.y-5*e.y+4*n.y-o.y,2*t.z-5*e.z+4*n.z-o.z),l=new r(-t.x+3*e.x-3*n.x+o.x,-t.y+3*e.y-3*n.y+o.y,-t.z+3*e.z-3*n.z+o.z);return this.tessellate({p:e,a:i,b:s,c:c,d:l,t:0},{p:n,a:i,b:s,c:c,d:l,t:1},a)},t.prototype.tessellate=function(t,e,n){var o={item:t,next:{item:e}};this.bisection(o,n);for(var a=[],i=o;i;)a.push(i.item),i=i.next;return a},t.prototype.bisection=function(t,e){var n=t.item,a=t.next.item,i=a.p.x-n.p.x,r=a.p.y-n.p.y;if(i*i+r*r>e*e){var s=.5*(n.t+a.t),c=s*s,l=c*s,u=this.evaluateByABCD(n.a,n.b,n.c,n.d,s,c,l),d={item:o(o({},n),{p:u,t:s}),next:t.next};t.next=d,this.bisection(t,e),this.bisection(d,e)}},t.prototype.evaluateByABCD=function(t,e,n,o,a,i,s){return new r(.5*(t.x+e.x*a+n.x*i+o.x*s),.5*(t.y+e.y*a+n.y*i+o.y*s),.5*(t.z+e.z*a+n.z*i+o.z*s))},t}();n.CatmullRom=s,cc._RF.pop()},{}],ChangeSeatUI:[function(t,e,n){"use strict";cc._RF.push(e,"7c9a7xZl9ROeKj6AanYp9Ix","ChangeSeatUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ChangeSeatUI=void 0;var r=t("../../../Framework/UI/FadeUI"),s=t("../../../Framework/Manager/CoroutineManager"),c=t("../../../Framework/Manager/EventManager"),l=t("./GameEvent"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.getPkgName=function(){return"GameSceneUI"},e.getCompName=function(){return"ChangeSeat"},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.view.m_window.m_BtnConfirm.onClick(this.onConfirmClick,this),this.view.m_window.m_BtnCancel.onClick(this.onCancelClick,this),c.EventManager.instance.on(l.GameEvent.GAME_START,this,this.onExitClick)},e.prototype.onExit=function(){t.prototype.onExit.call(this),c.EventManager.instance.off(l.GameEvent.GAME_START,this,this.onExitClick)},e.prototype.init=function(t){var e=this;this.view.m_window.m_text.text=t.content,this.view.m_window.m_BtnConfirm.text=t.confirm,this.view.m_window.m_BtnCancel.text=t.cancel,this._callback=t.callback;var n=Date.now()+1e3*t.remainTime;s.CoroutineManager.instance.loop(1,function(){var t=Math.floor((n-Date.now())/1e3);e.view.m_window.m_time.title=t+"s",t<=0&&e.onCancelClick()},this)},e.prototype.onConfirmClick=function(){t.prototype.onExitClick.call(this),this._callback(!0)},e.prototype.onCancelClick=function(){t.prototype.onExitClick.call(this),this._callback(!1)},i([jsClass],e)}(r.FadeUI);n.ChangeSeatUI=u,cc._RF.pop()},{"../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../Framework/Manager/EventManager":"EventManager","../../../Framework/UI/FadeUI":"FadeUI","./GameEvent":"GameEvent"}],ClubConfig:[function(t,e,n){"use strict";cc._RF.push(e,"6ab6bKOlMZBeKYbXAmtaMbo","ClubConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.ClubSubIDConfig=n.BoxRoomClubIDEnum=n.ClubModeEnum=void 0,function(t){t[t.FRIEND_ROOM=10]="FRIEND_ROOM",t[t.GOLD_ROOM=210]="GOLD_ROOM"}(n.ClubModeEnum||(n.ClubModeEnum={})),function(t){t[t.CLASSIC=9086]="CLASSIC",t[t.ERREN=9087]="ERREN",t[t.TTZ=9088]="TTZ",t[t.TUOPAI=9099]="TUOPAI"}(n.BoxRoomClubIDEnum||(n.BoxRoomClubIDEnum={})),function(t){(function(t){t[t.PRIMARY=71]="PRIMARY",t[t.MIDDLE=72]="MIDDLE",t[t.HIGH=73]="HIGH",t[t.MASTER=74]="MASTER",t[t.LOCALTYCOON=100]="LOCALTYCOON"})(t.CLASSIC_GD||(t.CLASSIC_GD={})),function(t){t[t.PRIMARY=15]="PRIMARY",t[t.MIDDLE=16]="MIDDLE",t[t.HIGH=17]="HIGH",t[t.MASTER=18]="MASTER"}(t.ERREN_GD||(t.ERREN_GD={})),function(t){t[t.PRIMARY=12]="PRIMARY",t[t.MIDDLE=13]="MIDDLE",t[t.HIGH=14]="HIGH"}(t.TTZ_GD||(t.TTZ_GD={})),function(t){t[t.PRIMARY=85]="PRIMARY",t[t.MIDDLE=86]="MIDDLE",t[t.HIGH=87]="HIGH",t[t.MASTER=88]="MASTER"}(t.NO_SHUFFLE_GD||(t.NO_SHUFFLE_GD={})),function(t){t[t.PRIMARY=11]="PRIMARY",t[t.MIDDLE=75]="MIDDLE",t[t.HIGH=76]="HIGH",t[t.MASTER=77]="MASTER",t[t.LOCALTYCOON=98]="LOCALTYCOON",t[t.SUPREME=99]="SUPREME"}(t.MULT_GD||(t.MULT_GD={})),function(t){t[t.PRIMARY=96]="PRIMARY",t[t.HIGH=97]="HIGH"}(t.PASSA_GD||(t.PASSA_GD={}))}(n.ClubSubIDConfig||(n.ClubSubIDConfig={})),cc._RF.pop()},{}],ClubGameProtocol:[function(t,e,n){"use strict";cc._RF.push(e,"f6a9f8o6AhIbrcrPOSlkecL","ClubGameProtocol");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ClubGameProtocol=void 0;var i=t("../Base/Processid"),r=t("../Base/ProtocolManager");(function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_ENTERGAME,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqEnterGame.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqEnterGame.decode(t))},e}(club.client.game.ReqEnterGame);t.ReqEnterGame=e,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_ENTERGAME,e);var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_ENTERGAME,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespEnterGame.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespEnterGame.decode(t))},e}(club.client.game.RespEnterGame);t.RespEnterGame=n,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_ENTERGAME,n);var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_ENTERBOX,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqEnterBox.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqEnterBox.decode(t))},e}(club.client.game.ReqEnterBox);t.ReqEnterBox=o,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_ENTERBOX,o);var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_ENTERBOX,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespEnterBox.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespEnterBox.decode(t))},e}(club.client.game.RespEnterBox);t.RespEnterBox=s,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_ENTERBOX,s);var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.PLAYER_USERINFO,e}return a(e,t),e.prototype.pack=function(){return club.client.game.PlayerUserInfo.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.PlayerUserInfo.decode(t))},e}(club.client.game.PlayerUserInfo);t.PlayerUserInfo=c,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.PLAYER_USERINFO,c);var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.PLAYER_GAMEINFO,e}return a(e,t),e.prototype.pack=function(){return club.client.game.PlayerGameInfo.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.PlayerGameInfo.decode(t))},e}(club.client.game.PlayerGameInfo);t.PlayerGameInfo=l,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.PLAYER_GAMEINFO,l);var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.PLAYER_PROPINFO,e}return a(e,t),e.prototype.pack=function(){return club.client.game.PlayerPropInfo.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.PlayerPropInfo.decode(t))},e}(club.client.game.PlayerPropInfo);t.PlayerPropInfo=u,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.PLAYER_PROPINFO,u);var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.PLAYSTATE,e}return a(e,t),e.prototype.pack=function(){return club.client.game.PlayState.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.PlayState.decode(t))},e}(club.client.game.PlayState);t.PlayState=d,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.PLAYSTATE,d);var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.TABLESTATE,e}return a(e,t),e.prototype.pack=function(){return club.client.game.TableState.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.TableState.decode(t))},e}(club.client.game.TableState);t.TableState=p,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.TABLESTATE,p);var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.PUSH_TOCLIENT,e}return a(e,t),e.prototype.pack=function(){return club.client.game.PushToClient.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.PushToClient.decode(t))},e}(club.client.game.PushToClient);t.PushToClient=h,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.PUSH_TOCLIENT,h);var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.PUSH_TOSERVER,e}return a(e,t),e.prototype.pack=function(){return club.client.game.PushToServer.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.PushToServer.decode(t))},e}(club.client.game.PushToServer);t.PushToServer=_,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.PUSH_TOCLIENT,_);var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_CHANGETABLE,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqChangeTable.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqChangeTable.decode(t))},e}(club.client.game.ReqChangeTable);t.ReqChangeTable=f,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_CHANGETABLE,f);var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_CHANGETABLE,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespChangeTable.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespChangeTable.decode(t))},e}(club.client.game.RespChangeTable);t.RespChangeTable=m,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_CHANGETABLE,m);var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_LEAVEGAME,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqLeaveGame.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqLeaveGame.decode(t))},e}(club.client.game.ReqLeaveGame);t.ReqLeaveGame=g,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_LEAVEGAME,g);var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_LEAVEGAME,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespLeaveGame.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespLeaveGame.decode(t))},e}(club.client.game.RespLeaveGame);t.RespLeaveGame=y,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_LEAVEGAME,y);var I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_PARTNERLEAVEGAME,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespPartnerLeaveGame.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespPartnerLeaveGame.decode(t))},e}(club.client.game.RespPartnerLeaveGame);t.RespPartnerLeaveGame=I,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_PARTNERLEAVEGAME,I);var C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_PARTNERCHANGETABLE,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespPartnerChangeTable.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespPartnerChangeTable.decode(t))},e}(club.client.game.RespPartnerChangeTable);t.RespPartnerChangeTable=C,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_PARTNERCHANGETABLE,C);var M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_CHANGESEAT,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqChangeSeat.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqChangeSeat.decode(t))},e}(club.client.game.ReqChangeSeat);t.ReqChangeSeat=M,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_CHANGESEAT,M);var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_CHANGESEAT,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespChangeSeat.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespChangeSeat.decode(t))},e}(club.client.game.RespChangeSeat);t.RespChangeSeat=v,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_CHANGESEAT,v);var E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_APPLY_EXCHANGE_SEAT,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqApplyExchangeSeat.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqApplyExchangeSeat.decode(t))},e}(club.client.game.ReqApplyExchangeSeat);t.ReqApplyExchangeSeat=E,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_APPLY_EXCHANGE_SEAT,E);var A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_APPLY_EXCHANGE_SEAT,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespApplyExchangeSeat.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespApplyExchangeSeat.decode(t))},e}(club.client.game.RespApplyExchangeSeat);t.RespApplyExchangeSeat=A,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_APPLY_EXCHANGE_SEAT,A);var P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.NOTIFY_OPERATE_EXCHANGE_SEAT,e}return a(e,t),e.prototype.pack=function(){return club.client.game.NotifyOperateExchangeSeat.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.NotifyOperateExchangeSeat.decode(t))},e}(club.client.game.NotifyOperateExchangeSeat);t.NotifyOperateExchangeSeat=P,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.NOTIFY_OPERATE_EXCHANGE_SEAT,P);var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_OPERATE_EXCHANGE_SEAT,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqOperateExchangeSeat.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqOperateExchangeSeat.decode(t))},e}(club.client.game.ReqOperateExchangeSeat);t.ReqOperateExchangeSeat=b,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_OPERATE_EXCHANGE_SEAT,b);var U=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_OPERATE_EXCHANGE_SEAT,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespOperateExchangeSeat.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespOperateExchangeSeat.decode(t))},e}(club.client.game.RespOperateExchangeSeat);t.RespOperateExchangeSeat=U,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_OPERATE_EXCHANGE_SEAT,U);var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.NOTIFY_APPLY_EXCHANGE_SEAT_RESULT,e}return a(e,t),e.prototype.pack=function(){return club.client.game.NotifyApplyExchangeResult.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.NotifyApplyExchangeResult.decode(t))},e}(club.client.game.NotifyApplyExchangeResult);t.NotifyApplyExchangeResult=S,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.NOTIFY_APPLY_EXCHANGE_SEAT_RESULT,S);var T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.NOTIFY_EXCHANGE_SEAT,e}return a(e,t),e.prototype.pack=function(){return club.client.game.NotifyExchangeSeat.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.NotifyExchangeSeat.decode(t))},e}(club.client.game.NotifyExchangeSeat);t.NotifyExchangeSeat=T,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.NOTIFY_EXCHANGE_SEAT,T);var R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_LEAVEBOX,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqLeaveBox.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqLeaveBox.decode(t))},e}(club.client.game.ReqLeaveBox);t.ReqLeaveBox=R,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_LEAVEBOX,R);var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_LEAVEBOX,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespLeaveBox.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespLeaveBox.decode(t))},e}(club.client.game.RespLeaveBox);t.RespLeaveBox=w,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_LEAVEBOX,w);var D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_PLAYGAME,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqPlayGame.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqPlayGame.decode(t))},e}(club.client.game.ReqPlayGame);t.ReqPlayGame=D,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_PLAYGAME,D);var O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_PLAYGAME,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespPlayGame.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespPlayGame.decode(t))},e}(club.client.game.RespPlayGame);t.RespPlayGame=O,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_PLAYGAME,O);var L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_ENTERPARTNER,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqEnterPartner.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqEnterPartner.decode(t))},e}(club.client.game.ReqEnterPartner);t.ReqEnterPartner=L,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_ENTERPARTNER,L);var G=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_ENTERPARTNER,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespEnterPartner.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespEnterPartner.decode(t))},e}(club.client.game.RespEnterPartner);t.RespEnterPartner=G,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_ENTERPARTNER,G);var B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.PARTNER_INFO,e}return a(e,t),e.prototype.pack=function(){return club.client.game.PartnerInfo.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.PartnerInfo.decode(t))},e}(club.client.game.PartnerInfo);t.PartnerInfo=B,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.PARTNER_INFO,B);var N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_READYPARTNER,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqReadyPartner.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqReadyPartner.decode(t))},e}(club.client.game.ReqReadyPartner);t.ReqReadyPartner=N,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_READYPARTNER,N);var F=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_READYPARTNER,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespReadyPartner.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespReadyPartner.decode(t))},e}(club.client.game.RespReadyPartner);t.RespReadyPartner=F,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_READYPARTNER,F);var k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_STARTPARTNER,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqStartPartner.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqStartPartner.decode(t))},e}(club.client.game.ReqStartPartner);t.ReqStartPartner=k,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_READYPARTNER,k);var x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_STARTPARTNER,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespStartPartner.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespStartPartner.decode(t))},e}(club.client.game.RespStartPartner);t.RespStartPartner=x,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_STARTPARTNER,x);var j=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_STARTPARTNERCHANGE,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqStartPartnerChange.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqStartPartnerChange.decode(t))},e}(club.client.game.ReqStartPartnerChange);t.ReqStartPartnerChange=j,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_STARTPARTNERCHANGE,j);var H=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_ENTERPARTNERGAME,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespEnterPartnerGame.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespEnterPartnerGame.decode(t))},e}(club.client.game.RespEnterPartnerGame);t.RespEnterPartnerGame=H,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_ENTERPARTNERGAME,H);var W=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_PARTNERSELECTCLUB,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqPartnerSelectClub.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqPartnerSelectClub.decode(t))},e}(club.client.game.ReqPartnerSelectClub);t.ReqPartnerSelectClub=W,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_PARTNERSELECTCLUB,W);var Y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_PARTNERSELECTCLUB,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespPartnerSelectClub.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespPartnerSelectClub.decode(t))},e}(club.client.game.RespPartnerSelectClub);t.RespPartnerSelectClub=Y,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_PARTNERSELECTCLUB,Y);var V=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_LEAVEPARTNER,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqLeavePartner.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqLeavePartner.decode(t))},e}(club.client.game.ReqLeavePartner);t.ReqLeavePartner=V,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_LEAVEPARTNER,V);var q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_LEAVEPARTNER,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespLeavePartner.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespLeavePartner.decode(t))},e}(club.client.game.RespLeavePartner);t.RespLeavePartner=q,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_LEAVEPARTNER,q);var K=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_PARTNERKICK,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqPartnerKick.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqPartnerKick.decode(t))},e}(club.client.game.ReqPartnerKick);t.ReqPartnerKick=K,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_READYPARTNER,N);var X=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_PARTNERKICK,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespPartnerKick.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespPartnerKick.decode(t))},e}(club.client.game.RespPartnerKick);t.RespPartnerKick=X,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_PARTNERKICK,X);var J=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_CHANGEPARTNER,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqChangePartner.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqChangePartner.decode(t))},e}(club.client.game.ReqChangePartner);t.ReqChangePartner=J,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_CHANGEPARTNER,J);var z=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_CHANGEPARTNER,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespChangePartner.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespChangePartner.decode(t))},e}(club.client.game.RespChangePartner);t.RespChangePartner=z,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_CHANGEPARTNER,z);var Q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_PROLONGBOX,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqProlongBox.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqProlongBox.decode(t))},e}(club.client.game.ReqProlongBox);t.ReqProlongBox=Q,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_PROLONGBOX,Q);var Z=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_PROLONGBOX,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespProlongBox.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespProlongBox.decode(t))},e}(club.client.game.RespProlongBox);t.RespProlongBox=Z,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_PROLONGBOX,Z);var $=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.PUSH_PROLONGBOXINFO,e}return a(e,t),e.prototype.pack=function(){return club.client.game.PushProlongBoxInfo.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.PushProlongBoxInfo.decode(t))},e}(club.client.game.PushProlongBoxInfo);t.PushProlongBoxInfo=$,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.PUSH_PROLONGBOXINFO,$);var tt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_CONTINUEBOX,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqContinueBox.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqContinueBox.decode(t))},e}(club.client.game.ReqContinueBox);t.ReqContinueBox=tt,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_CONTINUEBOX,tt);var et=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_CONTINUEBOX,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespContinueBox.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespContinueBox.decode(t))},e}(club.client.game.RespContinueBox);t.RespContinueBox=et,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_CONTINUEBOX,et);var nt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.PUSH_CONTINUEBOXINFO,e}return a(e,t),e.prototype.pack=function(){return club.client.game.PushContinuBoxInfo.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.PushContinuBoxInfo.decode(t))},e}(club.client.game.PushContinuBoxInfo);t.PushContinuBoxInfo=nt,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.PUSH_CONTINUEBOXINFO,nt);var ot=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_ENTER_GDMATCH,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqEnterGDMatch.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqEnterGDMatch.decode(t))},e}(club.client.game.ReqEnterGDMatch);t.ReqEnterGDMatch=ot,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_ENTER_GDMATCH,ot);var at=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_ENTER_GDMATCH,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespEnterGDMatch.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespEnterGDMatch.decode(t))},e}(club.client.game.RespEnterGDMatch);t.RespEnterGDMatch=at,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_ENTER_GDMATCH,at);var it=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_GDMATCH_INFO,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqGDMatchInfo.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqGDMatchInfo.decode(t))},e}(club.client.game.ReqGDMatchInfo);t.ReqGDMatchInfo=it,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_GDMATCH_INFO,it);var rt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_GDMATCH_INFO,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespGDMatchInfo.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespGDMatchInfo.decode(t))},e}(club.client.game.RespGDMatchInfo);t.RespGDMatchInfo=rt,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_GDMATCH_INFO,rt);var st=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_APPLY_JOIN_GDMATCH,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqApplyJoinGDMatch.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqApplyJoinGDMatch.decode(t))},e}(club.client.game.ReqApplyJoinGDMatch);t.ReqApplyJoinGDMatch=st,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_APPLY_JOIN_GDMATCH,st);var ct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_APPLY_JOIN_GDMATCH,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespApplyJoinGDMatch.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespApplyJoinGDMatch.decode(t))},e}(club.client.game.RespApplyJoinGDMatch);t.RespApplyJoinGDMatch=ct,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_APPLY_JOIN_GDMATCH,ct);var lt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.NOTIFY_GDMATCH_STATUS_CHANGE,e}return a(e,t),e.prototype.pack=function(){return club.client.game.NotifyGDMatchStatusChange.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.NotifyGDMatchStatusChange.decode(t))},e}(club.client.game.NotifyGDMatchStatusChange);t.NotifyGDMatchStatusChange=lt,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.NOTIFY_GDMATCH_STATUS_CHANGE,lt);var ut=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_CHECK_IN_GDMATCH,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqCheckInGDMatch.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqCheckInGDMatch.decode(t))},e}(club.client.game.ReqCheckInGDMatch);t.ReqCheckInGDMatch=ut,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_CHECK_IN_GDMATCH,ut);var dt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_CHECK_IN_GDMATCH,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespCheckInGDMatch.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespCheckInGDMatch.decode(t))},e}(club.client.game.RespCheckInGDMatch);t.RespCheckInGDMatch=dt,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_CHECK_IN_GDMATCH,dt);var pt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_GDMATCH_SUBSTITUTE,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqGDMatchSubstitute.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqGDMatchSubstitute.decode(t))},e}(club.client.game.ReqGDMatchSubstitute);t.ReqGDMatchSubstitute=pt,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_GDMATCH_SUBSTITUTE,pt);var ht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_GDMATCH_SUBSTITUTE,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespGDMatchSubstitute.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespGDMatchSubstitute.decode(t))},e}(club.client.game.RespGDMatchSubstitute);t.RespGDMatchSubstitute=ht,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_GDMATCH_SUBSTITUTE,ht);var _t=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.NOTIFY_GDMATCH_PLAYER_STATUS_CHANGE,e}return a(e,t),e.prototype.pack=function(){return club.client.game.NotifyGDMatchPlayerStatusChange.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.NotifyGDMatchPlayerStatusChange.decode(t))},e}(club.client.game.NotifyGDMatchPlayerStatusChange);t.NotifyGDMatchPlayerStatusChange=_t,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.NOTIFY_GDMATCH_PLAYER_STATUS_CHANGE,_t);var ft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_GIVEUP_GDMATCH,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqGiveupGDMatch.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqGiveupGDMatch.decode(t))},e}(club.client.game.ReqGiveupGDMatch);t.ReqGiveupGDMatch=ft,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_GIVEUP_GDMATCH,ft);var mt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_GIVEUP_GDMATCH,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespGiveupGDMatch.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespGiveupGDMatch.decode(t))},e}(club.client.game.RespGiveupGDMatch);t.RespGiveupGDMatch=mt,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_GIVEUP_GDMATCH,mt);var gt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_GDMATCH_RANKINFO,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqGDMatchRankInfo.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqGDMatchRankInfo.decode(t))},e}(club.client.game.ReqGDMatchRankInfo);t.ReqGDMatchRankInfo=gt,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_GDMATCH_RANKINFO,gt);var yt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_GDMATCH_RANKINFO,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespGDMatchRankInfo.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespGDMatchRankInfo.decode(t))},e}(club.client.game.RespGDMatchRankInfo);t.RespGDMatchRankInfo=yt,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_GDMATCH_RANKINFO,yt);var It=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_GDMATCH_TABLEINFO,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqGDMatchTableInfo.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqGDMatchTableInfo.decode(t))},e}(club.client.game.ReqGDMatchTableInfo);t.ReqGDMatchTableInfo=It,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_GDMATCH_TABLEINFO,It);var Ct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_GDMATCH_TABLEINFO,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespGDMatchTableInfo.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespGDMatchTableInfo.decode(t))},e}(club.client.game.RespGDMatchTableInfo);t.RespGDMatchTableInfo=Ct,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_GDMATCH_TABLEINFO,Ct);var Mt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_GDMATCH_SELFRANK,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqGDMatchSelfRank.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqGDMatchSelfRank.decode(t))},e}(club.client.game.ReqGDMatchSelfRank);t.ReqGDMatchSelfRank=Mt,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_GDMATCH_SELFRANK,Mt);var vt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_GDMATCH_SELFRANK,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespGDMatchSelfRank.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespGDMatchSelfRank.decode(t))},e}(club.client.game.RespGDMatchSelfRank);t.RespGDMatchSelfRank=vt,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_GDMATCH_SELFRANK,vt);var Et=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_LEAVE_GDMATCH,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqLeaveGDMatch.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqLeaveGDMatch.decode(t))},e}(club.client.game.ReqLeaveGDMatch);t.ReqLeaveGDMatch=Et,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_LEAVE_GDMATCH,Et);var At=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_LEAVE_GDMATCH,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespLeaveGDMatch.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespLeaveGDMatch.decode(t))},e}(club.client.game.RespLeaveGDMatch);t.RespLeaveGDMatch=At,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_LEAVE_GDMATCH,At);var Pt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.NOTIFY_GDMATCH_INFO_CHANGE,e}return a(e,t),e.prototype.pack=function(){return club.client.game.NotifyGDMatchInfoChange.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.NotifyGDMatchInfoChange.decode(t))},e}(club.client.game.NotifyGDMatchInfoChange);t.NotifyGDMatchInfoChange=Pt,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.NOTIFY_GDMATCH_INFO_CHANGE,Pt);var bt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.NOTIFY_GDMATCH_TABLE_INFO_CHANGE,e}return a(e,t),e.prototype.pack=function(){return club.client.game.NotifyGDMatchTableInfoChange.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.NotifyGDMatchTableInfoChange.decode(t))},e}(club.client.game.NotifyGDMatchTableInfoChange);t.NotifyGDMatchTableInfoChange=bt,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.NOTIFY_GDMATCH_TABLE_INFO_CHANGE,bt);var Ut=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.NOTIFY_GDMATCH_KICKOUT,e}return a(e,t),e.prototype.pack=function(){return club.client.game.NotifyGDMatchKickout.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.NotifyGDMatchKickout.decode(t))},e}(club.client.game.NotifyGDMatchKickout);t.NotifyGDMatchKickout=Ut,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.NOTIFY_GDMATCH_KICKOUT,Ut);var St=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.REQ_CLIENT_EXTRA_INFO,e}return a(e,t),e.prototype.pack=function(){return club.client.game.ReqClientExtraInfo.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.ReqClientExtraInfo.decode(t))},e}(club.client.game.ReqClientExtraInfo);t.ReqClientExtraInfo=St,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.REQ_CLIENT_EXTRA_INFO,St);var Tt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.game.MSGID.RESP_CLIENT_EXTRA_INFO,e}return a(e,t),e.prototype.pack=function(){return club.client.game.RespClientExtraInfo.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.game.RespClientExtraInfo.decode(t))},e}(club.client.game.RespClientExtraInfo);t.RespClientExtraInfo=Tt,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.game.MSGID.RESP_CLIENT_EXTRA_INFO,Tt)})(n.ClubGameProtocol||(n.ClubGameProtocol={})),cc._RF.pop()},{"../Base/Processid":"Processid","../Base/ProtocolManager":"ProtocolManager"}],ClubLobbyProtocol:[function(t,e,n){"use strict";cc._RF.push(e,"23952xAKlZCWrDleCZjnJ3u","ClubLobbyProtocol");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ClubLobbyProtocol=void 0;var i=t("../Base/Processid"),r=t("../Base/ProtocolManager");(function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.REQ_CLIENTCONFIG,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.ReqClientConfig.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.ReqClientConfig.decode(t))},e}(club.client.lobby.ReqClientConfig);t.ReqClientConfig=e,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.REQ_CLIENTCONFIG,e);var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.RESP_CLIENTCONFIG,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.RespClientConfig.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.RespClientConfig.decode(t))},e}(club.client.lobby.RespClientConfig);t.RespClientConfig=n,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.RESP_CLIENTCONFIG,n);var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.REQ_USERPROFILES,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.ReqUserProfiles.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.ReqUserProfiles.decode(t))},e}(club.client.lobby.ReqUserProfiles);t.ReqUserProfiles=o,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.REQ_USERPROFILES,o);var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.RESP_USERPROFILES,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.RespUserProfiles.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.RespUserProfiles.decode(t))},e}(club.client.lobby.RespUserProfiles);t.RespUserProfiles=s,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.RESP_USERPROFILES,s);var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.REQ_CLUBSHOWLIST,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.ReqClubShowList.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.ReqClubShowList.decode(t))},e}(club.client.lobby.ReqClubShowList);t.ReqClubShowList=c,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.REQ_CLUBSHOWLIST,c);var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.RESP_CLUBSHOWLIST,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.RespClubShowList.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.RespClubShowList.decode(t))},e}(club.client.lobby.RespClubShowList);t.RespClubShowList=l,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.RESP_CLUBSHOWLIST,l);var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.REQ_CREATEBOX,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.ReqCreateBox.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.ReqCreateBox.decode(t))},e}(club.client.lobby.ReqCreateBox);t.ReqCreateBox=u,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.REQ_CREATEBOX,u);var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.RESP_CREATEBOX,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.RespCreateBox.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.RespCreateBox.decode(t))},e}(club.client.lobby.RespCreateBox);t.RespCreateBox=d,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.RESP_CREATEBOX,d);var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.REQ_JOINBOX,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.ReqJoinBox.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.ReqJoinBox.decode(t))},e}(club.client.lobby.ReqJoinBox);t.ReqJoinBox=p,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.REQ_JOINBOX,p);var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.RESP_JOINBOX,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.RespJoinBox.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.RespJoinBox.decode(t))},e}(club.client.lobby.RespJoinBox);t.RespJoinBox=h,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.RESP_JOINBOX,h);var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.REQ_JOINGAME,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.ReqJoinGame.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.ReqJoinGame.decode(t))},e}(club.client.lobby.ReqJoinGame);t.ReqJoinGame=_,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.REQ_JOINGAME,_);var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.RESP_JOINGAME,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.RespJoinGame.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.RespJoinGame.decode(t))},e}(club.client.lobby.RespJoinGame);t.RespJoinGame=f,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.RESP_JOINGAME,f);var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.REQ_USERLOCATION,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.ReqUserLocation.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.ReqUserLocation.decode(t))},e}(club.client.lobby.ReqUserLocation);t.ReqUserLocation=m,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.REQ_USERLOCATION,m);var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.RESP_USERLOCATION,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.RespUserLocation.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.RespUserLocation.decode(t))},e}(club.client.lobby.RespUserLocation);t.RespUserLocation=g,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.RESP_USERLOCATION,g);var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.REQ_CLUBSTAT,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.ReqClubStat.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.ReqClubStat.decode(t))},e}(club.client.lobby.ReqClubStat);t.ReqClubStat=y,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.REQ_CLUBSTAT,y);var I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.RESP_CLUBSTAT,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.RespClubStat.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.RespClubStat.decode(t))},e}(club.client.lobby.RespClubStat);t.RespClubStat=I,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.RESP_CLUBSTAT,I);var C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.REQ_EXCHANGECOMM,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.ReqExchangeComm.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.ReqExchangeComm.decode(t))},e}(club.client.lobby.ReqExchangeComm);t.ReqExchangeComm=C,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.REQ_EXCHANGECOMM,C);var M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.RESP_EXCHANGECOMM,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.RespExchangeComm.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.RespExchangeComm.decode(t))},e}(club.client.lobby.RespExchangeComm);t.RespExchangeComm=M,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.RESP_EXCHANGECOMM,M);var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.REQ_USEPROPS,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.ReqUseProps.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.ReqUseProps.decode(t))},e}(club.client.lobby.ReqUseProps);t.ReqUseProps=v,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.REQ_USEPROPS,v);var E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.RESP_USEPROPS,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.RespUseProps.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.RespUseProps.decode(t))},e}(club.client.lobby.RespUseProps);t.RespUseProps=E,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.RESP_USEPROPS,E);var A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.REQ_CREATEPARTNER,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.ReqCreatePartner.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.ReqCreatePartner.decode(t))},e}(club.client.lobby.ReqCreatePartner);t.ReqCreatePartner=A,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.REQ_CREATEPARTNER,A);var P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.RESP_CREATEPARTNER,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.RespCreatePartner.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.RespCreatePartner.decode(t))},e}(club.client.lobby.RespCreatePartner);t.RespCreatePartner=P,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.RESP_CREATEPARTNER,P);var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.REQ_JOINPARTNER,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.ReqJoinPartner.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.ReqJoinPartner.decode(t))},e}(club.client.lobby.ReqJoinPartner);t.ReqJoinPartner=b,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.REQ_JOINPARTNER,b);var U=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.RESP_JOINPARTNER,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.RespJoinPartner.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.RespJoinPartner.decode(t))},e}(club.client.lobby.RespJoinPartner);t.RespJoinPartner=U,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.RESP_JOINPARTNER,U);var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.REQ_QUERY_ROOM_STATUS,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.ReqQueryRoomStatus.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.ReqQueryRoomStatus.decode(t))},e}(club.client.lobby.ReqQueryRoomStatus);t.ReqQueryRoomStatus=S,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.REQ_QUERY_ROOM_STATUS,S);var T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.lobby.MSGID.RESP_QUERY_ROOM_STATUS,e}return a(e,t),e.prototype.pack=function(){return club.client.lobby.RespQueryRoomStatus.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.lobby.RespQueryRoomStatus.decode(t))},e}(club.client.lobby.RespQueryRoomStatus);t.RespQueryRoomStatus=T,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.lobby.MSGID.RESP_QUERY_ROOM_STATUS,T)})(n.ClubLobbyProtocol||(n.ClubLobbyProtocol={})),cc._RF.pop()},{"../Base/Processid":"Processid","../Base/ProtocolManager":"ProtocolManager"}],CocosCreatorFix:[function(t,e){"use strict";cc._RF.push(e,"5533b6LUHhLxbuPvKRi/IXh","CocosCreatorFix");var n=cc.Tween.prototype.to;cc.Tween.prototype.to=function(t,e,o){return n.call(this,t,Object.trim(e),o)};var o=cc.Tween.prototype.by;cc.Tween.prototype.by=function(t,e,n){return o.call(this,t,Object.trim(e),n)},cc._RF.pop()},{}],CollectProxy:[function(t,e,n){"use strict";cc._RF.push(e,"dd391NF4sVDBaYQfTF5pEx1","CollectProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.CollectProxy=void 0;var r=t("../../../Framework/Proxy/BaseProxy"),s=t("../../../Framework/Root/ProxyRoot"),c=t("../../Base/Data/DataBfConfig"),l=t("../../Base/Data/DataScript"),u=t("../../Base/Module/Network/protocol/AwardProtocol"),d=t("../../Base/Module/Network/SocketUtils"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return s.ProxyRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.reqCollectAward=function(t,e){var n=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.linkEnterAward.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("mini=1;func="+l.DataScript.linkEnterAward.func.getCollectAward+";aType="+t)});d.SocketUtils.instance.request(n,function(t){if(console.log(">-----\x3erespCollectAward:",bf33.Utils.bytesToString(t.msg)),0===t.flag){var n=bf33.Utils.bytesToString(t.msg).split("|")||[],o=0===Number(n[0]),a={};o&&(a=JSON.parse(n[1]));var i=1===(Number(n[2])||0);e&&e({isSuccess:o,awards:a,isFirst:i})}})},i([jsClass],e)}(r.BaseProxy);n.CollectProxy=p,cc.systemEvent.once("GameRoot.inited",function(){s.ProxyRoot.instance.add(p)}),cc._RF.pop()},{"../../../Framework/Proxy/BaseProxy":"BaseProxy","../../../Framework/Root/ProxyRoot":"ProxyRoot","../../Base/Data/DataBfConfig":"DataBfConfig","../../Base/Data/DataScript":"DataScript","../../Base/Module/Network/SocketUtils":"SocketUtils","../../Base/Module/Network/protocol/AwardProtocol":"AwardProtocol"}],CollectUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"d5f076wqepA44syQahhj+5B","CollectUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./CollectUI_Window"),a=t("./CollectUI_MainPanel"),i=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default)},t}();n.default=i,cc._RF.pop()},{"./CollectUI_MainPanel":"CollectUI_MainPanel","./CollectUI_Window":"CollectUI_Window"}],CollectUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"ef1efvaHH1HfoBPoLidBTSB","CollectUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CollectUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://842xh57btdi49",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],CollectUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"4d9229MmkRPzoBYm6kSI1Lj","CollectUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CollectUI","Window")},e.prototype.onConstruct=function(){this.m_cFromPlatform=this.getControllerAt(0),this.m_btnClose=this.getChildAt(1)},e.URL="ui://842xh57btdi48",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],CollectUI:[function(t,e,n){"use strict";cc._RF.push(e,"0f558y4HfhPfI8xLQQcA+i5","CollectUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.CollectUI=void 0;var r,s=t("../../../Framework/UI/FadeUI"),c=t("../../Base/Module/BfAnalytics/BfasManager"),l=t("../../Base/Module/BfAnalytics/DataPointID"),u=t("./CollectUI/CollectUIBinder");(function(t){t[t.IOS_PLATFORM=0]="IOS_PLATFORM",t[t.ANDROID_PLATFORM=1]="ANDROID_PLATFORM"})(r||(r={}));var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){u.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initUI(),c.BfasManager.instance.sendEvt(l.ActivityPointID.collectAwardScene.show)},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onClickClose,this)},e.prototype.initUI=function(){this.view.m_Window.m_cFromPlatform.selectedIndex=cc.sys.OS_IOS===cc.sys.os?r.IOS_PLATFORM:r.ANDROID_PLATFORM},e.prototype.onClickClose=function(){c.BfasManager.instance.sendEvt(l.ActivityPointID.collectAwardScene.clickClose),this.onExitClick()},i([jsClass],e)}(s.FadeUI);n.CollectUI=d,cc._RF.pop()},{"../../../Framework/UI/FadeUI":"FadeUI","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","./CollectUI/CollectUIBinder":"CollectUIBinder"}],CommonProtocol:[function(t,e,n){"use strict";cc._RF.push(e,"89fe52j+oVA04N8tfREoCev","CommonProtocol");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CommonProtocol=void 0;var i=t("../Base/Processid"),r=t("../Base/ProtocolManager");(function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.common.MSGID.CHATMESSAGE,e}return a(e,t),e.prototype.pack=function(){return club.client.common.ChatMessage.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.common.ChatMessage.decode(t))},e}(club.client.common.ChatMessage);t.ReqChatMsg=e,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.common.MSGID.CHATMESSAGE,e);var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubGame,e.xyid=club.client.common.MSGID.CHATMESSAGE,e}return a(e,t),e.prototype.pack=function(){return club.client.common.ChatMessage.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.common.ChatMessage.decode(t))},e}(club.client.common.ChatMessage);t.RespChatMsg=n,r.ProtocolManager.instance.setProtocol(i.Processid.clubGame,club.client.common.MSGID.CHATMESSAGE,n);var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.common.MSGID.NETWORKTIME,e}return a(e,t),e.prototype.pack=function(){return club.client.common.NetworkTime.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.common.NetworkTime.decode(t))},e}(club.client.common.NetworkTime);t.ReqNetworkTime=o,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.common.MSGID.NETWORKTIME,o);var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.clubLobby,e.xyid=club.client.common.MSGID.NETWORKTIME,e}return a(e,t),e.prototype.pack=function(){return club.client.common.NetworkTime.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,club.client.common.NetworkTime.decode(t))},e}(club.client.common.NetworkTime);t.RespNetworkTime=s,r.ProtocolManager.instance.setProtocol(i.Processid.clubLobby,club.client.common.MSGID.NETWORKTIME,s)})(n.CommonProtocol||(n.CommonProtocol={})),cc._RF.pop()},{"../Base/Processid":"Processid","../Base/ProtocolManager":"ProtocolManager"}],ConnectingManager:[function(t,e,n){"use strict";cc._RF.push(e,"862a8ZwzC1GJq2111pkcCab","ConnectingManager");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ConnectingManager=n.ConnectingChangeType=void 0;var r,s=t("../../../../Framework/Manager/BaseManager"),c=t("../../../../Framework/Root/ManagerRoot"),l=t("../../../../Framework/Manager/EventManager"),u=t("./SocketEventType");(function(t){t[t.Begin=0]="Begin",t[t.Keep=1]="Keep",t[t.End=2]="End"})(r=n.ConnectingChangeType||(n.ConnectingChangeType={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.MAX_CONNECT_ID=32767,e._connectId=0,e._netReqMap=new Map,e.HIGH_PING_MIN=1500,e.HIGH_PING_TOAST_CD=10,e._highPingToastNextTime=0,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return c.ManagerRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextConnectId",{get:function(){return this._connectId=this._connectId<this.MAX_CONNECT_ID?this._connectId+1:1,this._connectId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ping",{get:function(){return this._ping},set:function(t){this._ping=t,this._ping>this.HIGH_PING_MIN&&this.onHighPing()},enumerable:!1,configurable:!0}),e.prototype.addNetConnectId=function(t){null==t&&(t=this.nextConnectId),console.log("addNetConnectId: "+t);var e=r.Keep;return this._netReqMap.size<=0&&(console.log("Connecting begin"),e=r.Begin),this._netReqMap.has(t)||(this._netReqMap.set(t,Date.now()),l.EventManager.instance.noLogEmit(u.SocketEventType.ConnectingChange,e)),t},e.prototype.removeNetConnectId=function(t){null!=t&&(console.log("removeNetConnectId: "+t),this._netReqMap.has(t)&&(this.ping=Date.now()-this._netReqMap.get(t),this._netReqMap.delete(t)),this._netReqMap.size<=0&&(console.log("Connecting end"),l.EventManager.instance.noLogEmit(u.SocketEventType.ConnectingChange,r.End)))},e.prototype.clearNetConnectId=function(){console.log("clearNetConnectId"),this._netReqMap.size>0&&(console.log("Connecting end"),l.EventManager.instance.noLogEmit(u.SocketEventType.ConnectingChange,r.End)),this._netReqMap.clear()},e.prototype.onHighPing=function(){var t=Date.now();t>this._highPingToastNextTime&&(this._highPingToastNextTime=t+1e3*this.HIGH_PING_TOAST_CD,console.log(">>\u5f53\u524d\u7f51\u7edc\u73af\u5883\u6781\u5dee\uff0c\u8bf7\u5c1d\u8bd5\u5207\u6362\u7f51\u7edc"))},i([jsClass],e)}(s.BaseManager);n.ConnectingManager=d,cc.systemEvent.once("GameRoot.inited",function(){c.ManagerRoot.instance.add(d)}),cc._RF.pop()},{"../../../../Framework/Manager/BaseManager":"BaseManager","../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Root/ManagerRoot":"ManagerRoot","./SocketEventType":"SocketEventType"}],ConsoleExtension:[function(t,e,n){"use strict";cc._RF.push(e,"8200bT7e1pI6b9/56vRYb4g","ConsoleExtension");var o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};Object.defineProperty(n,"__esModule",{value:!0}),n.ConsoleExtension=void 0,function(t){var e,n=function(){return(new Date).toCustomString("MM/dd HH:mm:ss.fff")},o=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var i=[];n.forEach(function(t){t instanceof Object?(E&&i.push(t),i.push(JSON.stringify(t))):i.push(t)}),t.apply(void 0,a([e],i))},i=console.log,r=function(t){for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];var s=n();i.apply(void 0,a([s,t],o)),e&&e.apply(void 0,a(["log",s,t],o))},s=console.debug,c=function(t){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];var r=n();s.apply(void 0,a([r,t],o)),e&&e.apply(void 0,a(["debug",r,t],o))},l=console.info,u=function(t){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];var r=n();l.apply(void 0,a([r,t],o)),e&&e.apply(void 0,a(["info",r,t],o))},d=console.warn,p=function(t){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];var r=n();d.apply(void 0,a([r,t],o)),e&&e.apply(void 0,a(["warn",r,t],o))},h=console.error,_=function(t){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];var r=n();h.apply(void 0,a([r,t],o)),e&&e.apply(void 0,a(["error",r,t],o))},f=console.trace,m=function(t){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];var r=n();f.apply(void 0,a([r,t],o)),e&&e.apply(void 0,a(["trace",r,t],o))},g=function(t){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];e&&e.apply(void 0,a(["log",n(),t],o))},y=function(t){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];e&&e.apply(void 0,a(["debug",n(),t],o))},I=function(t){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];e&&e.apply(void 0,a(["info",n(),t],o))},C=function(t){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];e&&e.apply(void 0,a(["warn",n(),t],o))},M=function(t){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];e&&e.apply(void 0,a(["error",n(),t],o))},v=function(t){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];e&&e.apply(void 0,a(["trace",n(),t],o))},E=!1;function A(t){t?(console.log=r,console.debug=c,console.info=u,console.warn=p,console.error=_,console.trace=m):(console.log=g,console.debug=y,console.info=I,console.warn=C,console.error=M,console.trace=v),console.logRefer=o.bind(this,console.log),console.debugRefer=o.bind(this,console.debug),console.infoRefer=o.bind(this,console.info),console.warnRefer=o.bind(this,console.warn),console.errorRefer=o.bind(this,console.error),console.traceRefer=o.bind(this,console.trace)}t.setReferEnabled=function(t){E=t},t.setPrintCallback=function(t){e=t},t.setEnabled=A,A(!0)}(n.ConsoleExtension||(n.ConsoleExtension={})),cc._RF.pop()},{}],CoroutineManager:[function(t,e,n){"use strict";cc._RF.push(e,"8dc9b2ScAtCoaQATP9iBg3P","CoroutineManager");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r},l=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t};Object.defineProperty(n,"__esModule",{value:!0}),n.CoroutineManager=n.Coroutine=n.WaitForLateUpdate=n.WaitForSeconds=n.WaitForFrames=void 0;var u=t("./BaseManager"),d=t("../Root/ManagerRoot"),p=function(){function t(t){this._frames=t}return t.prototype.resetDoneFrame=function(){this._doneFrame=cc.director.getTotalFrames()+this._frames},Object.defineProperty(t.prototype,"isDone",{get:function(){return cc.director.getTotalFrames()>=this._doneFrame},enumerable:!1,configurable:!0}),i([jsClass("WaitForFrames")],t)}();n.WaitForFrames=p;var h=function(){function t(t){this._milliSeconds=1e3*t}return t.prototype.resetDoneTime=function(){this._doneTime=Date.now()+this._milliSeconds},Object.defineProperty(t.prototype,"isDone",{get:function(){return Date.now()>=this._doneTime},enumerable:!1,configurable:!0}),i([jsClass("WaitForSeconds")],t)}();n.WaitForSeconds=h;var _=function(){function t(){}return i([jsClass("WaitForLateUpdate")],t)}();n.WaitForLateUpdate=_;var f=function(){function t(t,e){this._iterator=t,this._owner=e}return Object.defineProperty(t.prototype,"owner",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iterator",{get:function(){return this._iterator},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDone",{get:function(){return this._done},enumerable:!1,configurable:!0}),t.prototype.next=function(){var t;try{t=this._iterator.next()}catch(e){t={done:!0},console.error(e)}return this._current=t.value,this._done=t.done,t},i([jsClass("Coroutine")],t)}();n.Coroutine=f;var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._coroutinesMap=new Map,e.LAG_FRAME_COUNT_MAX=20,e.LAG_CHECK_FRAME_COUNT=3,e.LAG_CHECK_THRESHOLD=1e-5,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return d.ManagerRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._coroutinesMap.set(Object,[]),this._coroutinesMap.set(p,[]),this._coroutinesMap.set(h,[]),this._coroutinesMap.set(f,[]),this._coroutinesMap.set(_,[])},e.prototype.update=function(){this.invokeDefaultCoroutine(),this.invokeFramesCoroutine(),this.invokeSecondsCoroutine(),this.invokeStartCoroutineCoroutine()},e.prototype.lateUpdate=function(){this.invokeLateUpdateCoroutine()},e.prototype.invokeDefaultCoroutine=function(){var t,e,n=this._coroutinesMap.get(Object);this._coroutinesMap.set(Object,[]);try{for(var o=s(n),a=o.next();!a.done;a=o.next()){var i=a.value;i&&(i.owner&&!i.owner.isValid||i.next().done||(this.updateCoroutine(i),this.addCoroutine(i)))}}catch(r){t={error:r}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},e.prototype.invokeFramesCoroutine=function(){var t,e,n=this._coroutinesMap.get(p);this._coroutinesMap.set(p,[]);try{for(var o=s(n),a=o.next();!a.done;a=o.next()){var i=a.value;i&&(i.owner&&!i.owner.isValid||(i.current.isDone?i.next().done||(this.updateCoroutine(i),this.addCoroutine(i)):this.addCoroutine(i)))}}catch(r){t={error:r}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},e.prototype.invokeSecondsCoroutine=function(){var t,e,n=this._coroutinesMap.get(h);this._coroutinesMap.set(h,[]);try{for(var o=s(n),a=o.next();!a.done;a=o.next()){var i=a.value;i&&(i.owner&&!i.owner.isValid||(i.current.isDone?i.next().done||(this.updateCoroutine(i),this.addCoroutine(i)):this.addCoroutine(i)))}}catch(r){t={error:r}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},e.prototype.invokeStartCoroutineCoroutine=function(){var t,e,n=this._coroutinesMap.get(f);this._coroutinesMap.set(f,[]);try{for(var o=s(n),a=o.next();!a.done;a=o.next()){var i=a.value;i&&(i.owner&&!i.owner.isValid||(i.current.isDone?i.next().done||(this.updateCoroutine(i),this.addCoroutine(i)):this.addCoroutine(i)))}}catch(r){t={error:r}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},e.prototype.invokeLateUpdateCoroutine=function(){var t,e,n=this._coroutinesMap.get(_);this._coroutinesMap.set(_,[]);try{for(var o=s(n),a=o.next();!a.done;a=o.next()){var i=a.value;i&&(i.owner&&!i.owner.isValid||i.next().done||(this.updateCoroutine(i),this.addCoroutine(i)))}}catch(r){t={error:r}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},e.prototype.updateCoroutine=function(t){var e=t.current;e&&(e.constructor===p?e.resetDoneFrame():e.constructor===h&&e.resetDoneTime())},e.prototype.addCoroutine=function(t){var e=t.current;if(e){var n=e.constructor;if(n&&this._coroutinesMap.has(n))return void this._coroutinesMap.get(n).push(t)}this._coroutinesMap.get(Object).push(t)},e.prototype.isCoroutineDone=function(t){var e,n;try{for(var o=s(this._coroutinesMap.values()),a=o.next();!a.done;a=o.next())for(var i=a.value,r=i.length-1;r>=0;--r)if(i[r]===t)return!1}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return!0},e.prototype.getCoroutine=function(t){var e,n;try{for(var o=s(this._coroutinesMap.values()),a=o.next();!a.done;a=o.next())for(var i=a.value,r=i.length-1;r>=0;--r){var c=i[r];if(c.iterator===t)return c}}catch(l){e={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return null},e.prototype.removeCoroutineBy=function(t){var e,n;try{for(var o=s(this._coroutinesMap),a=o.next();!a.done;a=o.next())for(var i=c(a.value,2),r=i[0],l=i[1],u=l.length-1;u>=0;--u)t(r,l[u])&&l.splice(u,1)}catch(d){e={error:d}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}},e.prototype.startCo=function(t,e){if(this.isRunning(t))throw new Error("Coroutine is already running!");var n;return(n=t instanceof f?t:new f(t,e)).next().done||(this.updateCoroutine(n),this.addCoroutine(n)),n},e.prototype.stopCo=function(t){t&&(t instanceof f?t.isDone||this.removeCoroutineBy(function(e,n){return n===t}):this.removeCoroutineBy(function(e,n){return n.iterator===t}))},e.prototype.stopAllCo=function(t){this.removeCoroutineBy(function(e,n){return n.owner===t})},e.prototype.moveNext=function(t){if(t instanceof f)this.isCoroutineDone(t)?(this.startCo(t),this.stopCo(t)):(this.stopCo(t),this.startCo(t));else{var e=this.getCoroutine(t);e?(this.stopCo(e),this.startCo(e)):(this.startCo(t),this.stopCo(t))}},e.prototype.flush=function(t,e){if(void 0===e&&(e=Number.MAX_VALUE),t){this.stopCo(t);for(var n=!0,o=0;n&&o<e;)n=!t.next().done,++o;o>=e&&console.warn("Flush "+o+" steps!")}},e.prototype.isRunning=function(t){return t instanceof f?!this.isCoroutineDone(t):!!this.getCoroutine(t)},e.prototype.late=function(t,e){return this.startCo(this.doLate(t,e),e)},e.prototype.doLate=function(t,e){return r(this,function(n){switch(n.label){case 0:return t?[4,new _]:[3,2];case 1:n.sent(),t.call(e),n.label=2;case 2:return[2]}})},e.prototype.once=function(t,e,n){return this.startCo(this.doOnce(null==t?null:new h(t),e,!1,n),n)},e.prototype.lateOnce=function(t,e,n){return this.startCo(this.doOnce(null==t?null:new h(t),e,!0,n),n)},e.prototype.frameOnce=function(t,e,n){return this.startCo(this.doOnce(null==t?null:new p(t),e,!1,n),n)},e.prototype.lateFrameOnce=function(t,e,n){return this.startCo(this.doOnce(null==t?null:new p(t),e,!0,n),n)},e.prototype.doOnce=function(t,e,n,o){return r(this,function(a){switch(a.label){case 0:return e?n?[4,new _]:[3,2]:[3,4];case 1:a.sent(),a.label=2;case 2:return[4,t];case 3:a.sent(),e.call(o),a.label=4;case 4:return[2]}})},e.prototype.loop=function(t,e,n){return this.startCo(this.doLoop(null==t?null:new h(t),e,!1,n),n)},e.prototype.lateLoop=function(t,e,n){return this.startCo(this.doLoop(null==t?null:new h(t),e,!0,n),n)},e.prototype.frameLoop=function(t,e,n){return this.startCo(this.doLoop(null==t?null:new p(t),e,!1,n),n)},e.prototype.lateFrameLoop=function(t,e,n){return this.startCo(this.doLoop(null==t?null:new p(t),e,!0,n),n)},e.prototype.doLoop=function(t,e,n,o){return r(this,function(a){switch(a.label){case 0:return e?n?[4,new _]:[3,2]:[3,4];case 1:a.sent(),a.label=2;case 2:return e.call(o)?[3,4]:[4,t];case 3:return a.sent(),[3,2];case 4:return[2]}})},e.prototype.wait=function(t,e,n){return this.startCo(this.doWait(t,e,!1,n),n)},e.prototype.lateWait=function(t,e,n){return this.startCo(this.doWait(t,e,!0,n),n)},e.prototype.doWait=function(t,e,n,o){return r(this,function(a){switch(a.label){case 0:return e?n?[4,new _]:[3,2]:[3,6];case 1:a.sent(),a.label=2;case 2:if(!t)return[3,5];a.label=3;case 3:return t.call(o)?[3,5]:[4,null];case 4:return a.sent(),[3,3];case 5:e.call(o),a.label=6;case 6:return[2]}})},e.prototype.timeoutWait=function(t,e,n,o){return this.startCo(this.doTimeoutWait(t,n,!1,e,o),o)},e.prototype.timeoutLateWait=function(t,e,n,o){return this.startCo(this.doTimeoutWait(t,n,!0,e,o),o)},e.prototype.doTimeoutWait=function(t,e,n,o,a){var i,s,c;return r(this,function(r){switch(r.label){case 0:return e?n?[4,new _]:[3,2]:[3,6];case 1:r.sent(),r.label=2;case 2:if(i=o&&1e3*o||0,s=Date.now(),c=!1,!t)return[3,5];r.label=3;case 3:return(c=Date.now()-s>=i)||t.call(a)?[3,5]:[4,null];case 4:return r.sent(),[3,3];case 5:e.call(a,c),r.label=6;case 6:return[2]}})},e.prototype.endOfLag=function(t,e){return this.startCo(this.doEndOfLag(t,e),e)},e.prototype.doEndOfLag=function(t,e){var n,o;return r(this,function(a){switch(a.label){case 0:return n=cc.director.getTotalFrames()+this.LAG_FRAME_COUNT_MAX,(o=[]).push(cc.director.getDeltaTime()),[4,null];case 1:a.sent(),o.push(cc.director.getDeltaTime()),a.label=2;case 2:return cc.director.getTotalFrames()<n?[4,null]:[3,4];case 3:return a.sent(),o.push(cc.director.getDeltaTime()),o.length>this.LAG_CHECK_FRAME_COUNT&&o.shift(),Math.variance.apply(Math,l(o))<this.LAG_CHECK_THRESHOLD?[3,4]:[3,2];case 4:return null==t||t.call(e),[2]}})},i([jsClass],e)}(u.BaseManager);n.CoroutineManager=m,cc._RF.pop()},{"../Root/ManagerRoot":"ManagerRoot","./BaseManager":"BaseManager"}],CountDownUI:[function(t,e,n){"use strict";cc._RF.push(e,"1f3a65sQO5C+pbEmMP57vWA","CountDownUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.CountDownUI=void 0;var r=t("../../../Framework/UI/BaseUI"),s=t("../../../Framework/UI/FadeUI"),c=t("../../Base/Data/DatazOrder"),l=t("../../Base/Module/BfAnalytics/BfasManager"),u=t("../../Base/Module/BfAnalytics/DataPointID"),d=t("./MatchHintUIBinder"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._countDownID=null,e}return a(e,t),Object.defineProperty(e,"uiType",{get:function(){return r.UIType.Dialog},enumerable:!1,configurable:!0}),e.getPkgName=function(){return"MatchHintUI"},e.getCompName=function(){return cc.js.getClassName(this)+"_MainPanel"},Object.defineProperty(e,"sortingOrder",{get:function(){return c.DataZOrder.MAX},enumerable:!1,configurable:!0}),e.uiBind=function(){d.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"confirmAction",{set:function(t){this._confirmAction=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"closeAction",{set:function(t){this._closeAction=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.stopCountDown()},e.prototype.initListener=function(){this.view.m_Window.m_BtnClose.onClick(this.onCloseClick,this),this.view.m_Window.m_BtnConfirm.onClick(this.onConfirmClick,this)},e.prototype.init=function(t){this.showCountDown(t),this.startCountDown(t)},e.prototype.onCloseClick=function(){l.BfasManager.instance.sendEvt(u.MatchPoint.MATCH_CHECK_IN_CANCEL_CLICK),this._closeAction&&this._closeAction()},e.prototype.onConfirmClick=function(e){e?l.BfasManager.instance.sendEvt(u.MatchPoint.MATCH_CHECK_IN_OK_CLICK):l.BfasManager.instance.sendEvt(u.MatchPoint.MATCH_CHECK_IN_OK_AUTO),this._confirmAction&&this._confirmAction(),t.prototype.onExitClick.call(this)},e.prototype.showCountDown=function(t){this.view.m_Window.m_text.text=t.name,this.view.m_Window.m_txtNum.text=t.time.toString()},e.prototype.startCountDown=function(t){var e=this;this.stopCountDown();var n=t.name,o=t.time;this._countDownID=setInterval(function(){o>0?(o-=1,e.showCountDown({name:n,time:o})):(e.stopCountDown(),e.onConfirmClick())},1e3)},e.prototype.stopCountDown=function(){this._countDownID&&(clearInterval(this._countDownID),this._countDownID=null)},i([jsClass],e)}(s.FadeUI);n.CountDownUI=p,cc._RF.pop()},{"../../../Framework/UI/BaseUI":"BaseUI","../../../Framework/UI/FadeUI":"FadeUI","../../Base/Data/DatazOrder":"DatazOrder","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","./MatchHintUIBinder":"MatchHintUIBinder"}],CreateRoomConfigModel:[function(t,e,n){"use strict";cc._RF.push(e,"b4f8fuIWkdDop3syIZSNtpb","CreateRoomConfigModel");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.CreateRoomConfigModel=void 0;var a=t("../../Base/Data/DataLocalStorageKey"),i=t("../CreateRoomConfig"),r=function(){function t(){}return t.loadRoomRule=function(){var t={},e=localStorage.getItem(a.LocalStorageKey.CREATE_ROOM_CONFIG_2);return e&&(t=JSON.parse(e)),t},t.saveRoomRule=function(t,e){var n=e;for(var o in n)"boolean"==typeof n[o]&&(n[o]=n[o]?1:0);n.gameid=t,localStorage.setItem(a.LocalStorageKey.CREATE_ROOM_CONFIG_2,JSON.stringify(n))},t.getLocalRoomConfig=function(){var t={},e=this.loadRoomRule(),n=e.gameid,o=i.RoomConfigDef[n];if(null==o)return t;for(var a in t={tap:o.tap,playUI:o.playUI},o)if(null!=e[a]){var r=null==o[a][e[a]]?o[a][0]:o[a][e[a]];if(null!=r)for(var s in r)null!=t[s]?t[s]=t[s]+","+r[s]:t[s]=r[s]}return t},o([jsClass],t)}();n.CreateRoomConfigModel=r,cc._RF.pop()},{"../../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../CreateRoomConfig":"CreateRoomConfig"}],CreateRoomConfig:[function(t,e,n){"use strict";var o,a,i,r,s,c,l,u,d,p,h,_,f,m,g,y,I,C,M,v,E,A,P,b,U,S;cc._RF.push(e,"09e07yBnDxNjou2GQpKAB69","CreateRoomConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.CreateRoomConfig=n.RoomUIConfig=n.RoomConfigDef=n.GameType=n.ButtonType=void 0;var T=t("../Base/Data/DataBfConfig");n.ButtonType={RADIO:"radio",MULTIPLE:"multiple"},n.GameType={GUANDAN_JD:"GUANDAN_JD",GUANDAN_BPX:"GUANDAN_BPX",GUANDAN_TTZ:"GUANDAN_TTZ",GUANDAN_ERREN:"GUANDAN_ERREN",GUANDAN_DAITUO:"GUANDAN_DAITUO"},n.RoomConfigDef=((o={})[T.GameIDInfo.CLASSIC_GD.id]={tap:n.GameType.GUANDAN_JD,playUI:"radio1",rule:(a={},a[0]={roundUI:"radio1"},a[8]={roundUI:"radio1"},a[10]={roundUI:"radio2"},a[14]={roundUI:"radio3"},a),isUpSpec:(i={},i[0]={levelUI:"radio_up3"},i[1]={levelUI:"radio_up4"},i),isBXP:(r={},r[1]={specialUI:"multiple_bxp"},r),isMult:(s={},s[1]={specialUI:"multiple_bomb4"},s),shouDong:(c={},c[1]={otherUI:"multiple_ready"},c),trust:(l={},l[1]={otherUI:"multiple_trust"},l),ipBan:(u={},u[1]={otherUI:"multiple_net"},u),isVoIP:(d={},d[1]={otherUI:"multiple_isvoip"},d)},o[T.GameIDInfo.TP_GD.id]={tap:n.GameType.GUANDAN_DAITUO,playUI:"radio2",rule:(p={},p[0]={roundUI:"radio1"},p[14]={roundUI:"radio1"},p),isUpSpec:(h={},h[0]={levelUI:"radio_up3"},h[1]={levelUI:"radio_up4"},h),shouDong:(_={},_[1]={otherUI:"multiple_ready"},_),trust:(f={},f[1]={otherUI:"multiple_trust"},f),ipBan:(m={},m[1]={otherUI:"multiple_net"},m),isVoIP:(g={},g[1]={otherUI:"multiple_isvoip"},g)},o[T.GameIDInfo.TTZ_GD.id]={tap:n.GameType.GUANDAN_TTZ,playUI:"radio3",totalPan:(y={},y[0]={roundUI:"radio1"},y[4]={roundUI:"radio1"},y[8]={roundUI:"radio2"},y[12]={roundUI:"radio3"},y),isFixLevel:(I={},I[0]={specialUI:"radio_random"},I[1]={specialUI:"radio_gd2"},I),shouDong:(C={},C[1]={otherUI:"multiple_ready"},C),trust:(M={},M[1]={otherUI:"multiple_trust"},M),ipBan:(v={},v[1]={otherUI:"multiple_net"},v),isVoIP:(E={},E[1]={otherUI:"multiple_isvoip"},E)},o[T.GameIDInfo.ERREN_GD.id]={tap:n.GameType.GUANDAN_ERREN,playUI:"radio4",totalPan:(A={},A[0]={roundUI:"radio1"},A[4]={roundUI:"radio1"},A[8]={roundUI:"radio2"},A[16]={roundUI:"radio3"},A),shouDong:(P={},P[1]={otherUI:"multiple_ready"},P),trust:(b={},b[1]={otherUI:"multiple_trust"},b),ipBan:(U={},U[1]={otherUI:"multiple_net"},U),isVoIP:(S={},S[1]={otherUI:"multiple_isvoip"},S)},o),n.RoomUIConfig={guanDan:[{name:"\u7ecf\u5178",tap:n.GameType.GUANDAN_JD,playType:11,gameId:T.GameIDInfo.CLASSIC_GD.id,historyIndex:0,playUI:{title:"\u73a9\u6cd5:",type:n.ButtonType.RADIO,content:{radio1:{text:"\u7ecf\u5178",select:!0,okArr:[1,2],go:n.GameType.GUANDAN_JD},radio2:{text:"\u5e26\u62d6",okArr:[1,2],go:n.GameType.GUANDAN_DAITUO},radio3:{text:"\u56e2\u56e2\u8f6c",okArr:[1,2],go:n.GameType.GUANDAN_TTZ},radio4:{text:"\u4e8c\u4eba\u7ecf\u5178",okArr:[1,2],go:n.GameType.GUANDAN_ERREN}}},roundUI:{title:"\u5c40\u6570:",type:n.ButtonType.RADIO,content:{radio1:{text:"\u8fc78",select:!0,okArr:[1]},radio2:{text:"\u8fc710",okArr:[2]},radio3:{text:"\u8fc7A",okArr:[3]}}},levelUI:{title:"\u5347\u7ea7:",type:n.ButtonType.RADIO,content:{radio_up3:{text:"\u53cc\u4e0b\u53473\u7ea7",select:!0,okArr:[0]},radio_up4:{text:"\u53cc\u4e0b\u53474\u7ea7",okArr:[1],descBtn:{text:"\u8f93\u5bb6\u7684\u4e24\u4e2a\u73a9\u5bb6\u5747\u4e3a\u672b\u6e38\u65f6\uff0c\u8d62\u5bb6\u53ef\u4ee5\u53474\u7ea7"}}}},specialUI:{title:"\u7279\u6b8a:",type:n.ButtonType.MULTIPLE,content:{multiple_bxp:{text:"\u4e0d\u6d17\u724c",descBtn:{text:"\u724c\u578b\u66f4\u6574\u9f50\uff0c\u70b8\u5f39\u66f4\u591a"}},multiple_bomb4:{text:"\u56db\u70b8\u7ffb\u500d",descBtn:{text:"\u5934\u6e38\u672a\u4ea7\u751f\u65f6\uff0c\u724c\u5c40\u4e2d\u6bcf\u6253\u51fa\u4e00\u4e2a\u56db\u5f20\u53ca\u4ee5\u4e0a\u7684\u70b8\u5f39\uff0c\u7ed3\u7b97\u5206\u6570\u7ffb\u500d\uff1b\u5934\u6e38\u4ea7\u751f\u540e\uff0c\u4ec5\u5934\u6e38\u5bf9\u5bb6\u6253\u51fa\u7684\u70b8\u5f39\u5f71\u54cd\u500d\u6570"}}}},otherUI:{title:"\u9ad8\u7ea7:",type:n.ButtonType.MULTIPLE,content:{multiple_ready:{text:"\u624b\u52a8\u51c6\u5907"},multiple_net:{text:"\u9632\u4f5c\u5f0a",descBtn:{text:"\u7f51\u7edc\u5730\u5740\u76f8\u4f3c\u7684\u73a9\u5bb6\u65e0\u6cd5\u8fdb\u5165\u540c\u4e00\u4e2a\u623f\u95f4"}},multiple_trust:{text:"\u8d85\u65f6\u6258\u7ba1"},multiple_isvoip:{text:"\u5b9e\u65f6\u8bed\u97f3",descBtn:{text:"\u5b9e\u65f6\u8bed\u97f3\u529f\u80fd\u6682\u65f6\u4ec5\u5bf9\u5c0f\u6e38\u620f\u73a9\u5bb6\u5f00\u653e"}}}},defaultShow:!0},{name:"\u5e26\u62d6",tap:n.GameType.GUANDAN_DAITUO,playType:14,gameId:T.GameIDInfo.TP_GD.id,historyIndex:1,playUI:{title:"\u73a9\u6cd5:",type:n.ButtonType.RADIO,content:{radio1:{text:"\u7ecf\u5178",okArr:[1,2],go:n.GameType.GUANDAN_JD},radio2:{text:"\u5e26\u62d6",select:!0,okArr:[1,2],go:n.GameType.GUANDAN_DAITUO},radio3:{text:"\u56e2\u56e2\u8f6c",okArr:[1,2],go:n.GameType.GUANDAN_TTZ},radio4:{text:"\u4e8c\u4eba\u7ecf\u5178",okArr:[1,2],go:n.GameType.GUANDAN_ERREN}}},roundUI:{title:"\u5c40\u6570:",type:n.ButtonType.RADIO,content:{radio1:{text:"\u8fc7A",select:!0,okArr:[1]}}},levelUI:{title:"\u5347\u7ea7:",type:n.ButtonType.RADIO,content:{radio_up3:{text:"\u53cc\u4e0b\u53473\u7ea7",select:!0,okArr:[0]},radio_up4:{text:"\u53cc\u4e0b\u53474\u7ea7",okArr:[1],descBtn:{text:"\u8f93\u5bb6\u7684\u4e24\u4e2a\u73a9\u5bb6\u5747\u4e3a\u672b\u6e38\u65f6\uff0c\u8d62\u5bb6\u53ef\u4ee5\u53474\u7ea7"}}}},otherUI:{title:"\u9ad8\u7ea7:",type:n.ButtonType.MULTIPLE,content:{multiple_ready:{text:"\u624b\u52a8\u51c6\u5907"},multiple_net:{text:"\u9632\u4f5c\u5f0a",descBtn:{text:"\u7f51\u7edc\u5730\u5740\u76f8\u4f3c\u7684\u73a9\u5bb6\u65e0\u6cd5\u8fdb\u5165\u540c\u4e00\u4e2a\u623f\u95f4"}},multiple_trust:{text:"\u8d85\u65f6\u6258\u7ba1"},multiple_isvoip:{text:"\u5b9e\u65f6\u8bed\u97f3",descBtn:{text:"\u5b9e\u65f6\u8bed\u97f3\u529f\u80fd\u6682\u65f6\u4ec5\u5bf9\u5c0f\u6e38\u620f\u73a9\u5bb6\u5f00\u653e"}}}},defaultShow:!1},{name:"\u56e2\u56e2\u8f6c",tap:n.GameType.GUANDAN_TTZ,playType:12,gameId:T.GameIDInfo.TTZ_GD.id,historyIndex:2,playUI:{title:"\u73a9\u6cd5:",type:n.ButtonType.RADIO,content:{radio1:{text:"\u7ecf\u5178",go:n.GameType.GUANDAN_JD},radio2:{text:"\u5e26\u62d6",okArr:[1,2],go:n.GameType.GUANDAN_DAITUO},radio3:{text:"\u56e2\u56e2\u8f6c",select:!0,go:n.GameType.GUANDAN_TTZ},radio4:{text:"\u4e8c\u4eba\u7ecf\u5178",go:n.GameType.GUANDAN_ERREN}}},roundUI:{title:"\u5c40\u6570:",type:n.ButtonType.RADIO,content:{radio1:{text:"4\u5c40",select:!0,okArr:[1]},radio2:{text:"8\u5c40",okArr:[2]},radio3:{text:"12\u5c40",okArr:[3]}}},specialUI:{title:"\u7279\u6b8a:",type:n.ButtonType.RADIO,content:{radio_gd2:{text:"\u56fa\u5b9a\u62532",okArr:[1]},radio_random:{text:"\u968f\u673a\u4e3b\u724c",select:!0,okArr:[2]}}},otherUI:{title:"\u9ad8\u7ea7:",type:n.ButtonType.MULTIPLE,content:{multiple_ready:{text:"\u624b\u52a8\u51c6\u5907"},multiple_net:{text:"\u9632\u4f5c\u5f0a",descBtn:{text:"\u7f51\u7edc\u5730\u5740\u76f8\u4f3c\u7684\u73a9\u5bb6\u65e0\u6cd5\u8fdb\u5165\u540c\u4e00\u4e2a\u623f\u95f4"}},multiple_trust:{text:"\u8d85\u65f6\u6258\u7ba1"},multiple_isvoip:{text:"\u5b9e\u65f6\u8bed\u97f3",descBtn:{text:"\u5b9e\u65f6\u8bed\u97f3\u529f\u80fd\u6682\u65f6\u4ec5\u5bf9\u5c0f\u6e38\u620f\u73a9\u5bb6\u5f00\u653e"}}}},defaultShow:!1},{name:"\u4e8c\u4eba\u7ecf\u5178",tap:n.GameType.GUANDAN_ERREN,playType:12,gameId:T.GameIDInfo.ERREN_GD.id,historyIndex:3,playUI:{title:"\u73a9\u6cd5:",type:n.ButtonType.RADIO,content:{radio1:{text:"\u7ecf\u5178",go:n.GameType.GUANDAN_JD},radio2:{text:"\u5e26\u62d6",okArr:[1,2],go:n.GameType.GUANDAN_DAITUO},radio3:{text:"\u56e2\u56e2\u8f6c",go:n.GameType.GUANDAN_TTZ},radio4:{text:"\u4e8c\u4eba\u7ecf\u5178",select:!0,go:n.GameType.GUANDAN_ERREN}}},roundUI:{title:"\u5c40\u6570:",type:n.ButtonType.RADIO,content:{radio1:{text:"4\u5c40",select:!0,okArr:[1]},radio2:{text:"8\u5c40",okArr:[2]},radio3:{text:"16\u5c40",okArr:[3]}}},otherUI:{title:"\u9ad8\u7ea7:",type:n.ButtonType.MULTIPLE,content:{multiple_ready:{text:"\u624b\u52a8\u51c6\u5907"},multiple_net:{text:"\u9632\u4f5c\u5f0a",descBtn:{text:"\u7f51\u7edc\u5730\u5740\u76f8\u4f3c\u7684\u73a9\u5bb6\u65e0\u6cd5\u8fdb\u5165\u540c\u4e00\u4e2a\u623f\u95f4"}},multiple_trust:{text:"\u8d85\u65f6\u6258\u7ba1"},multiple_isvoip:{text:"\u5b9e\u65f6\u8bed\u97f3",descBtn:{text:"\u5b9e\u65f6\u8bed\u97f3\u529f\u80fd\u6682\u65f6\u4ec5\u5bf9\u5c0f\u6e38\u620f\u73a9\u5bb6\u5f00\u653e"}}}},defaultShow:!1}]};var R=function(){function t(){}return t.getRoomUIConfig=function(){var t=n.RoomUIConfig.guanDan;for(var e in t)if(t[e].defaultShow)return Object.deepCopy(t[e]);return null},t.getRoomUIConfigByTap=function(t){var e=n.RoomUIConfig.guanDan;for(var o in e)if(e[o].tap===t)return Object.deepCopy(e[o]);return null},t.getGuanDanConfigByShowIndex=function(t){var e=n.RoomUIConfig.guanDan;for(var o in e)if(e[o].historyIndex===t)return Object.deepCopy(e[o]);return null},t}();n.CreateRoomConfig=R,cc._RF.pop()},{"../Base/Data/DataBfConfig":"DataBfConfig"}],CreateRoomManagerModel:[function(t,e,n){"use strict";cc._RF.push(e,"18391mwqcVKnKksBg2qZeIX","CreateRoomManagerModel");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.CreateRoomManagerModel=n.ECodeEnum=void 0;var a,i=t("../../Base/Module/Room/RoomProxy"),r=t("../../Base/Module/Room/RoomModel"),s=t("../../Base/Module/Network/protocol/CustGuanDanProcess"),c=t("../../Base/Module/Network/SocketUtils"),l=t("../../Base/Module/Network/Base/Processid"),u=t("../../Base/Data/DataEvent"),d=t("../../../Framework/Manager/EventManager"),p=t("../../Game/Common/GameCommonModel"),h=t("../../UserInfo/UserInfoModel"),_=t("../../Base/Module/Room/ClubConfig"),f=t("../../Base/Data/DataBfConfig"),m=t("./HistoryUIModel"),g=t("../../Base/View/UIHelp");(function(t){t[t.PLAY_GAME=110]="PLAY_GAME",t[t.SAME_IP=121]="SAME_IP",t[t.ROOM_FULL=126]="ROOM_FULL",t[t.IN_ROOM=210]="IN_ROOM"})(a=n.ECodeEnum||(n.ECodeEnum={}));var y=function(){function t(){this._historyTotalArr=[],this._historyRoundArr=[],this._registerRespHistoryCallBack=null}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return null===e._createRoomManagerModelObj&&(e._createRoomManagerModelObj=new e,e._createRoomManagerModelObj.registerRespHistory()),e._createRoomManagerModelObj},enumerable:!1,configurable:!0}),t.prototype.reqHistoryList=function(t,e,n){0===e&&(e=50),this._historyTotalArr=[],this._registerRespHistoryCallBack=n,c.SocketUtils.instance.notify(new s.CustGuanDanProcess.ReqHistory({gameid:t,count:e}))},t.prototype.registerRespHistory=function(){var t=this;c.SocketUtils.instance.register(l.Processid.custGuanDanProcess,custguandanprocess.XYID.kRespHistory,e.instance,function(e){1===e.historytype?(t.checkHistoryRoundInfo(e),e.eof&&(t._historyRoundArr.sort(function(t,e){return t.timestamp-e.timestamp}),console.log("_historyRoundArr:",t._historyRoundArr),t._registerRespHistoryCallBack&&t._registerRespHistoryCallBack(t._historyRoundArr))):(t.checkHistoryTotalInfo(e),e.eof&&(t._historyTotalArr.sort(function(t,e){return e.timestamp-t.timestamp}),console.log("_historyTotalArr:",t._historyTotalArr),t._registerRespHistoryCallBack&&t._registerRespHistoryCallBack(t._historyTotalArr)))})},t.prototype.checkHistoryRoundInfo=function(t){var e=t.tally;if(e){var n={};n.gameid=e.gameid,n.roundid=e.roundid,n.size=e.usertallys.length;var o=e.usertallys;n.winlosts=[];for(var a=0;a<e.usertallys.length;a++)n.winlosts[a]={id:o[a].numid,nickname:bf33.Utils.bytesToString(o[a].nickname),headurl:o[a].headurl,winlost:o[a].winlost,sex:o[a].sex};n.totalid=e.totalid,n.createTime=e.rtime,n.timestamp=Number(e.rtime.replaceAll("(-|:| )","")),n.creator_numid=e.creator_numid,n.roomKey=""+e.roomkey,n.roundnum=e.roundnum,this._historyRoundArr.push(n)}},t.prototype.checkHistoryTotalInfo=function(t){var e=t.tally;if(e){var n={};n.gameid=e.gameid,n.roundid=e.roundid,n.size=e.usertallys.length;var o=e.usertallys;n.winlosts=[];for(var a=0;a<e.usertallys.length;a++)n.winlosts[a]={id:o[a].numid,nickname:bf33.Utils.bytesToString(o[a].nickname),headurl:o[a].headurl,winlost:o[a].winlost,sex:o[a].sex};n.totalid=e.totalid,n.createTime=e.rtime,n.timestamp=Number(e.rtime.replaceAll("(-|:| )","")),n.creator_numid=e.creator_numid,n.roomKey=""+e.roomkey,this._historyTotalArr.push(n)}},t.prototype.reqHistoryRoundList=function(t,e,n){e&&(this._historyRoundArr=[],this._registerRespHistoryCallBack=n,c.SocketUtils.instance.notify(new s.CustGuanDanProcess.ReqHistoryByTotalid({gameid:t,totalid:""+e})))},t.prototype.checkCanBackToBox=function(){var t=h.UserInfoModel.instance.getUserLocation();return!(!t||!t.subid&&t.clubmode!==_.ClubModeEnum.FRIEND_ROOM||(r.RoomModel.instance.doEnterGameInRoom(),0))},t.prototype.isBackGame=function(){var t=h.UserInfoModel.instance.getUserLocation();return!(!t||!t.subid&&t.clubmode!==_.ClubModeEnum.FRIEND_ROOM||(r.RoomModel.instance.doEnterGameInRoom(),0))},t.prototype.isClubMode4Seat=function(t){var e=this.getClubInfo(t);return e&&e.clubmode===_.ClubModeEnum.FRIEND_ROOM&&4==e.maxseats},t.prototype.isClubMode=function(t){var e=this.getClubInfo(t);return e&&e.clubmode===_.ClubModeEnum.FRIEND_ROOM},t.prototype.changeGameIDToGameIndex=function(t){return t===f.GameIDInfo.CLASSIC_GD.id?m.CClickGameTab.CLASSIC_GD:t===f.GameIDInfo.TP_GD.id?m.CClickGameTab.TP_GD:t===f.GameIDInfo.TTZ_GD.id?m.CClickGameTab.TTZ_GD:t===f.GameIDInfo.ERREN_GD.id?m.CClickGameTab.ER_GD:m.CClickGameTab.CLASSIC_GD},t.prototype.isBoxSelfWin=function(t){for(var e=t.winlosts,n=!0,o=0;o<e.length;o++){var a=e[o];if(m.HistoryUIModel.instance.isSelfNumID(Number(a.id))){Number(a.winlost)<0&&(n=!1);break}}return n},t.prototype.reqJoinBox=function(t,n){var o=this,r=Number(t);r>=1e5?(g.UIHelp.instance.showLoading(),i.RoomProxy.instance.reqJoinBox(r,function(t,i){if(console.warn(">----\x3ereqJoinBox.flag:",t,i),t||i.code===a.IN_ROOM)if(o.isMiniGameID(i.gameid)){var r={gameID:i.gameid,clubID:i.clubid,appID:i.appid,playID:i.boxid,playKey:i.boxkey};e.instance.joinGame(r),n&&n(!0)}else d.EventManager.instance.emit(u.DataEvent.ToastData,"\u5f53\u524d\u7248\u672c\u6ca1\u6709\u8be5\u6e38\u620f"),n&&n(!1);else d.EventManager.instance.emit(u.DataEvent.ToastData,i.msg),n&&n(!1);g.UIHelp.instance.hideLoading()})):(d.EventManager.instance.emit(u.DataEvent.ToastData,"\u623f\u95f4\u53f7\u9519\u8bef:"+t),n&&n(!1))},t.prototype.joinGame=function(t){var e=this,n=t.gameID,o=this.getClubInfo(n),a={clubID:t.clubID,subID:t.subID||0,appID:t.appID,playID:t.playID,playKey:t.playKey};o?this.enterGame(a):r.RoomModel.instance.reqClubPlazaList(n,r.ClubShowFlags.BOXS_LIST,function(t){t?e.enterGame(a):(d.EventManager.instance.emit(u.DataEvent.ToastData,"\u62c9\u53d6\u5217\u8868\u5931\u8d25!"),g.UIHelp.instance.hideLoading())})},t.prototype.enterGame=function(t){i.RoomProxy.instance.reqEnterBox(t,function(t,e){if(t)p.GameCommonModel.instance.startListener(),d.EventManager.instance.emit(u.DataEvent.EnterGameTable);else{var n;n=e===a.PLAY_GAME?"\u60a8\u5df2\u7ecf\u5728\u5176\u4ed6\u5305\u53a2\u4e2d!":e===a.SAME_IP?"\u6709\u73a9\u5bb6ip\u76f8\u540c\uff0c\u65e0\u6cd5\u5750\u4e0b\uff01!":e===a.ROOM_FULL?"\u8be5\u597d\u53cb\u623f\u73a9\u5bb6\u5df2\u6ee1\uff0c\u5165\u5ea7\u5931\u8d25!":"\u8be5\u597d\u53cb\u623f\u4e0d\u5b58\u5728!",d.EventManager.instance.emit(u.DataEvent.ToastData,n)}g.UIHelp.instance.hideLoading()})},t.prototype.getClubInfo=function(t){return r.RoomModel.instance.getClubConfigByGameIDAndClubMode(t,_.ClubModeEnum.FRIEND_ROOM)},t.prototype.isMiniGameID=function(t){var e=!1;return Object.values(f.GameIDInfo).forEach(function(n){n.id==t&&(e=!0)}),e},t._createRoomManagerModelObj=null,e=o([jsClass],t)}();n.CreateRoomManagerModel=y,cc._RF.pop()},{"../../../Framework/Manager/EventManager":"EventManager","../../Base/Data/DataBfConfig":"DataBfConfig","../../Base/Data/DataEvent":"DataEvent","../../Base/Module/Network/Base/Processid":"Processid","../../Base/Module/Network/SocketUtils":"SocketUtils","../../Base/Module/Network/protocol/CustGuanDanProcess":"CustGuanDanProcess","../../Base/Module/Room/ClubConfig":"ClubConfig","../../Base/Module/Room/RoomModel":"RoomModel","../../Base/Module/Room/RoomProxy":"RoomProxy","../../Base/View/UIHelp":"UIHelp","../../Game/Common/GameCommonModel":"GameCommonModel","../../UserInfo/UserInfoModel":"UserInfoModel","./HistoryUIModel":"HistoryUIModel"}],CreateRoomUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"b401auIjzlEfYW/MTTjEETm","CreateRoomUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./CreateRoomUI_TapBtn"),a=t("./CreateRoomUI_LogoImg"),i=t("./CreateRoomUI_Tab_historyUI"),r=t("./CreateRoomUI_BoxRecordMainPanel"),s=t("./CreateRoomUI_BoxRecordwindow"),c=t("./CreateRoomUI_History_recordDetail"),l=t("./CreateRoomUI_History_recordTitle"),u=t("./CreateRoomUI_History_recordWithRound"),d=t("./CreateRoomUI_History_roundTotalScore"),p=t("./CreateRoomUI_History_recordScoreLine"),h=t("./CreateRoomUI_FriendRoomUI"),_=t("./CreateRoomUI_MainPanel"),f=t("./CreateRoomUI_Tab_createRoomUI"),m=t("./CreateRoomUI_RoomNumBtn"),g=t("./CreateRoomUI_Tab_joinRoomUI"),y=t("./CreateRoomUI_History_lineScore"),I=t("./CreateRoomUI_HeadGCom"),C=t("./CreateRoomUI_History_item"),M=t("./CreateRoomUI_History_tab"),v=t("./CreateRoomUI_createPanel"),E=t("./CreateRoomUI_QiPaoPanel"),A=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default),fgui.UIObjectFactory.setExtension(l.default.URL,l.default),fgui.UIObjectFactory.setExtension(u.default.URL,u.default),fgui.UIObjectFactory.setExtension(d.default.URL,d.default),fgui.UIObjectFactory.setExtension(p.default.URL,p.default),fgui.UIObjectFactory.setExtension(h.default.URL,h.default),fgui.UIObjectFactory.setExtension(_.default.URL,_.default),fgui.UIObjectFactory.setExtension(f.default.URL,f.default),fgui.UIObjectFactory.setExtension(m.default.URL,m.default),fgui.UIObjectFactory.setExtension(g.default.URL,g.default),fgui.UIObjectFactory.setExtension(y.default.URL,y.default),fgui.UIObjectFactory.setExtension(I.default.URL,I.default),fgui.UIObjectFactory.setExtension(C.default.URL,C.default),fgui.UIObjectFactory.setExtension(M.default.URL,M.default),fgui.UIObjectFactory.setExtension(v.default.URL,v.default),fgui.UIObjectFactory.setExtension(E.default.URL,E.default)},t}();n.default=A,cc._RF.pop()},{"./CreateRoomUI_BoxRecordMainPanel":"CreateRoomUI_BoxRecordMainPanel","./CreateRoomUI_BoxRecordwindow":"CreateRoomUI_BoxRecordwindow","./CreateRoomUI_FriendRoomUI":"CreateRoomUI_FriendRoomUI","./CreateRoomUI_HeadGCom":"CreateRoomUI_HeadGCom","./CreateRoomUI_History_item":"CreateRoomUI_History_item","./CreateRoomUI_History_lineScore":"CreateRoomUI_History_lineScore","./CreateRoomUI_History_recordDetail":"CreateRoomUI_History_recordDetail","./CreateRoomUI_History_recordScoreLine":"CreateRoomUI_History_recordScoreLine","./CreateRoomUI_History_recordTitle":"CreateRoomUI_History_recordTitle","./CreateRoomUI_History_recordWithRound":"CreateRoomUI_History_recordWithRound","./CreateRoomUI_History_roundTotalScore":"CreateRoomUI_History_roundTotalScore","./CreateRoomUI_History_tab":"CreateRoomUI_History_tab","./CreateRoomUI_LogoImg":"CreateRoomUI_LogoImg","./CreateRoomUI_MainPanel":"CreateRoomUI_MainPanel","./CreateRoomUI_QiPaoPanel":"CreateRoomUI_QiPaoPanel","./CreateRoomUI_RoomNumBtn":"CreateRoomUI_RoomNumBtn","./CreateRoomUI_Tab_createRoomUI":"CreateRoomUI_Tab_createRoomUI","./CreateRoomUI_Tab_historyUI":"CreateRoomUI_Tab_historyUI","./CreateRoomUI_Tab_joinRoomUI":"CreateRoomUI_Tab_joinRoomUI","./CreateRoomUI_TapBtn":"CreateRoomUI_TapBtn","./CreateRoomUI_createPanel":"CreateRoomUI_createPanel"}],CreateRoomUIModel:[function(t,e,n){"use strict";cc._RF.push(e,"f48675xYldO7KcZVnA+yoLe","CreateRoomUIModel");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.CreateRoomUIModel=void 0;var a=t("../../Base/Module/Room/RoomModel"),i=t("../../Base/Module/Room/ClubConfig"),r=t("./CreateRoomManagerModel"),s=t("./AnalysisRoomConfigCreateUI"),c=t("../../../Framework/Manager/UIManager"),l=t("../../../Framework/Manager/EventManager"),u=t("../../Base/Data/DataEvent"),d=t("../../Base/Module/BfAnalytics/BfasManager"),p=t("../../Base/Module/BfAnalytics/DataPointID"),h=t("../../Base/View/UIHelp"),_=t("../../FeedBack/FeedBackSuggUI"),f=function(){function t(){this._view=null}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return null===e._createRoomModelObj&&(e._createRoomModelObj=new e),e._createRoomModelObj},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),t.prototype.setView=function(t){this._view=t,s.AnalysisRoomConfigCreateUI.instance.setView(this.view)},t.prototype.init=function(){d.BfasManager.instance.evt(p.BoxRoomPointID.SHOW_CREATRBOX_UI.eventid,null,!0,p.BoxRoomPointID.SHOW_CREATRBOX_UI.eventName),this.initListener(),this.initUI()},t.prototype.initListener=function(){this.view.m_createRoomBtn.onClick(this.clickCreateRoom,this),this.view.m_btnFeedback.onClick(this.clickFeedback,this),this.view.m_btnFeedbackHint.onClick(this.clickFeedbackHint,this)},t.prototype.initUI=function(){s.AnalysisRoomConfigCreateUI.instance.createPlayUIByConfig(),this.view.m_imgFeedbackHint.sortingOrder=999},t.prototype.clickCreateRoom=function(){d.BfasManager.instance.evt(p.BoxRoomPointID.CLICK_CREATRBOX.eventid,null,!0,p.BoxRoomPointID.CLICK_CREATRBOX.eventName);var t=s.AnalysisRoomConfigCreateUI.instance.getGameId();t&&this.reqClubRoomConfig(t)},t.prototype.clickFeedback=function(){c.UIManager.instance.open(_.FeedBackSuggUI).then(function(t){t.init(_.FeedBackSuggSource.FRIEND_ROOM)})},t.prototype.clickFeedbackHint=function(){this.view.m_imgFeedbackHint.visible=!this.view.m_imgFeedbackHint.visible},t.prototype.reqClubRoomConfig=function(t){var e=this;h.UIHelp.instance.showLoading();var n=this.getClubInfo(t);n?this.createRoom(n):a.RoomModel.instance.reqClubPlazaList(t,a.ClubShowFlags.BOXS_LIST,function(t,n){t?e.createRoom(e.getClubInfo(n)):(l.EventManager.instance.emit(u.DataEvent.ToastData,"\u62c9\u53d6\u623f\u95f4\u5931\u8d25!"),h.UIHelp.instance.hideLoading())})},t.prototype.createRoom=function(t){if(r.CreateRoomManagerModel.instance.isBackGame())h.UIHelp.instance.hideLoading();else{var e=s.AnalysisRoomConfigCreateUI.instance.getCreateRoomRules();a.RoomModel.instance.reqCreateBox(t.clubID,e,function(){h.UIHelp.instance.hideLoading()}),s.AnalysisRoomConfigCreateUI.instance.saveRoomUIConfig()}},t.prototype.getClubInfo=function(t){return a.RoomModel.instance.getClubConfigByGameIDAndClubMode(t,i.ClubModeEnum.FRIEND_ROOM)},t.prototype.onDestroy=function(){e._createRoomModelObj=null},t._createRoomModelObj=null,e=o([jsClass],t)}();n.CreateRoomUIModel=f,cc._RF.pop()},{"../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../Base/Data/DataEvent":"DataEvent","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../Base/Module/Room/ClubConfig":"ClubConfig","../../Base/Module/Room/RoomModel":"RoomModel","../../Base/View/UIHelp":"UIHelp","../../FeedBack/FeedBackSuggUI":"FeedBackSuggUI","./AnalysisRoomConfigCreateUI":"AnalysisRoomConfigCreateUI","./CreateRoomManagerModel":"CreateRoomManagerModel"}],CreateRoomUI_BoxRecordMainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"d661cdy/elCLJBEBHU3rUFH","CreateRoomUI_BoxRecordMainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CreateRoomUI","BoxRecordMainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://a2sxrbqkhccga6br",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],CreateRoomUI_BoxRecordwindow:[function(t,e,n){"use strict";cc._RF.push(e,"948fd1z1iRFIIAWD1aIDJ9R","CreateRoomUI_BoxRecordwindow");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CreateRoomUI","BoxRecordwindow")},e.prototype.onConstruct=function(){this.m_c_playCount=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_btnClose=this.getChildAt(1),this.m_topTitle=this.getChildAt(2),this.m_head_1=this.getChildAt(3),this.m_head_2=this.getChildAt(4),this.m_head_3=this.getChildAt(5),this.m_head_4=this.getChildAt(6),this.m_listView=this.getChildAt(7)},e.URL="ui://a2sxrbqkhccga6bs",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],CreateRoomUI_FriendRoomUI:[function(t,e,n){"use strict";cc._RF.push(e,"4b1efVBRMtBOrT3SlnNoYmk","CreateRoomUI_FriendRoomUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CreateRoomUI","FriendRoomUI")},e.prototype.onConstruct=function(){this.m_c_tab=this.getControllerAt(0),this.m_c_clickTab=this.getControllerAt(1),this.m_tab_createBtn=this.getChildAt(1),this.m_tab_joinBtn=this.getChildAt(2),this.m_tab_historyBtn=this.getChildAt(3),this.m_tab_createRoomUI=this.getChildAt(5),this.m_tab_joinRoomUI=this.getChildAt(6),this.m_tab_historyUI=this.getChildAt(7)},e.URL="ui://a2sxrbqkl8h70",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],CreateRoomUI_HeadGCom:[function(t,e,n){"use strict";cc._RF.push(e,"5d01cRVfAJKE6KuDaif7/3y","CreateRoomUI_HeadGCom");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CreateRoomUI","HeadGCom")},e.prototype.onConstruct=function(){this.m_c_showSelfImg=this.getControllerAt(0),this.m_avatarPic=this.getChildAt(0),this.m_pictureFrame=this.getChildAt(1),this.m_fangImg=this.getChildAt(2),this.m_score=this.getChildAt(3),this.m_name=this.getChildAt(4)},e.URL="ui://a2sxrbqkpjmd1c",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],CreateRoomUI_History_item:[function(t,e,n){"use strict";cc._RF.push(e,"a7a43SambNC0rJu9BoNhOq4","CreateRoomUI_History_item");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CreateRoomUI","History_item")},e.prototype.onConstruct=function(){this.m_itemDi=this.getChildAt(0),this.m_btnDetail=this.getChildAt(1),this.m_dateText=this.getChildAt(2),this.m_roundIdText=this.getChildAt(3),this.m_scoreText=this.getChildAt(5),this.m_titleText=this.getChildAt(6)},e.URL="ui://a2sxrbqkpjmd1e",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],CreateRoomUI_History_lineScore:[function(t,e,n){"use strict";cc._RF.push(e,"c544aaPaeRDVZCgfjleQVuR","CreateRoomUI_History_lineScore");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CreateRoomUI","History_lineScore")},e.prototype.onConstruct=function(){this.m_c_playerCount=this.getControllerAt(0),this.m_title=this.getChildAt(0),this.m_score1=this.getChildAt(1),this.m_score2=this.getChildAt(2),this.m_score3=this.getChildAt(3),this.m_score4=this.getChildAt(4)},e.URL="ui://a2sxrbqkpjmd1b",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],CreateRoomUI_History_recordDetail:[function(t,e,n){"use strict";cc._RF.push(e,"040899rNJpEP70HCnKjDMBw","CreateRoomUI_History_recordDetail");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CreateRoomUI","History_recordDetail")},e.prototype.onConstruct=function(){this.m_c_playerCount=this.getControllerAt(0),this.m_c_winlose=this.getControllerAt(1),this.m_bgWin=this.getChildAt(0),this.m_bgLose=this.getChildAt(1),this.m_list=this.getChildAt(2)},e.URL="ui://a2sxrbqkhccga6c1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],CreateRoomUI_History_recordScoreLine:[function(t,e,n){"use strict";cc._RF.push(e,"25e91KSYDJKXr21Cf5+aUtL","CreateRoomUI_History_recordScoreLine");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CreateRoomUI","History_recordScoreLine")},e.prototype.onConstruct=function(){this.m_c_playerCount=this.getControllerAt(0),this.m_c_winlose=this.getControllerAt(1),this.m_title=this.getChildAt(0),this.m_score1=this.getChildAt(1),this.m_score2=this.getChildAt(2),this.m_score3=this.getChildAt(3),this.m_score4=this.getChildAt(4),this.m_lineWin=this.getChildAt(5),this.m_lineLose=this.getChildAt(6)},e.URL="ui://a2sxrbqkhccga6ci",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],CreateRoomUI_History_recordTitle:[function(t,e,n){"use strict";cc._RF.push(e,"abba5CQ99pHHbwdx60rIod5","CreateRoomUI_History_recordTitle");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CreateRoomUI","History_recordTitle")},e.prototype.onConstruct=function(){this.m_bg=this.getChildAt(0),this.m_titleText=this.getChildAt(1),this.m_txtroomID=this.getChildAt(2),this.m_dateText=this.getChildAt(3)},e.URL="ui://a2sxrbqkhccga6c2",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],CreateRoomUI_History_recordWithRound:[function(t,e,n){"use strict";cc._RF.push(e,"532e1YtS9VPko5itxnsVF9T","CreateRoomUI_History_recordWithRound");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CreateRoomUI","History_recordWithRound")},e.prototype.onConstruct=function(){this.m_c_itemShow=this.getControllerAt(0),this.m_c_bgIcon=this.getControllerAt(1),this.m_bgWin=this.getChildAt(0),this.m_bgLose=this.getChildAt(1),this.m_roundTab=this.getChildAt(2),this.m_hideRoundBtn=this.getChildAt(3),this.m_showRoundBtn=this.getChildAt(4),this.m_roundInfo=this.getChildAt(5)},e.URL="ui://a2sxrbqkhccga6c3",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],CreateRoomUI_History_roundTotalScore:[function(t,e,n){"use strict";cc._RF.push(e,"033eaDJmA5Fh493Vib4LBgM","CreateRoomUI_History_roundTotalScore");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CreateRoomUI","History_roundTotalScore")},e.prototype.onConstruct=function(){this.m_c_playerCount=this.getControllerAt(0),this.m_txtRoundName=this.getChildAt(0),this.m_score1=this.getChildAt(1),this.m_score2=this.getChildAt(2),this.m_score3=this.getChildAt(3),this.m_score4=this.getChildAt(4)},e.URL="ui://a2sxrbqkhccga6ch",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],CreateRoomUI_History_tab:[function(t,e,n){"use strict";cc._RF.push(e,"7db1a4e92VPzZlGlzgpVZV3","CreateRoomUI_History_tab");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CreateRoomUI","History_tab")},e.prototype.onConstruct=function(){this.m_c_clickTab=this.getControllerAt(0),this.m_jingDianBtn=this.getChildAt(5),this.m_daiTuoBtn=this.getChildAt(6),this.m_tuanTuanZhuanBtn=this.getChildAt(7),this.m_erRenBtn=this.getChildAt(8)},e.URL="ui://a2sxrbqkpjmd1k",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],CreateRoomUI_LogoImg:[function(t,e,n){"use strict";cc._RF.push(e,"9146cmmMUlM8K41KUZXA5Oc","CreateRoomUI_LogoImg");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CreateRoomUI","LogoImg")},e.prototype.onConstruct=function(){this.m_button=this.getControllerAt(0),this.m_icon=this.getChildAt(0)},e.URL="ui://a2sxrbqkcz1ga6bh",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],CreateRoomUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"d0a36lkddRPKqW9omVmUNJk","CreateRoomUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CreateRoomUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_btnExit=this.getChildAt(2),this.m_gTop=this.getChildAt(4)},e.URL="ui://a2sxrbqkl8h71",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],CreateRoomUI_QiPaoPanel:[function(t,e,n){"use strict";cc._RF.push(e,"03c049nwyBLoZKr/A/LjaUV","CreateRoomUI_QiPaoPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CreateRoomUI","QiPaoPanel")},e.prototype.onConstruct=function(){this.m_bubble=this.getChildAt(0),this.m_text=this.getChildAt(1)},e.URL="ui://a2sxrbqkw6ira6a3",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],CreateRoomUI_RoomNumBtn:[function(t,e,n){"use strict";cc._RF.push(e,"6e70bGY88JMJpeX9Afw0cQ+","CreateRoomUI_RoomNumBtn");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CreateRoomUI","RoomNumBtn")},e.prototype.onConstruct=function(){this.m_delImg=this.getChildAt(2)},e.URL="ui://a2sxrbqkl8h715",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],CreateRoomUI_Tab_createRoomUI:[function(t,e,n){"use strict";cc._RF.push(e,"9fff0NjQsRLOpmgJlZSu7nN","CreateRoomUI_Tab_createRoomUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CreateRoomUI","Tab_createRoomUI")},e.prototype.onConstruct=function(){this.m_c_play=this.getControllerAt(0),this.m_c_radioPlay=this.getControllerAt(1),this.m_c_siZhaMult=this.getControllerAt(2),this.m_createRoomBtn=this.getChildAt(0),this.m_btnFeedback=this.getChildAt(1),this.m_btnFeedbackHint=this.getChildAt(2),this.m_imgFeedbackHint=this.getChildAt(3)},e.URL="ui://a2sxrbqkl8h710",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],CreateRoomUI_Tab_historyUI:[function(t,e,n){"use strict";cc._RF.push(e,"8df4cvsv19PeL8hwROtSQ9v","CreateRoomUI_Tab_historyUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CreateRoomUI","Tab_historyUI")},e.prototype.onConstruct=function(){this.m_tabTitle=this.getChildAt(0),this.m_listView=this.getChildAt(1),this.m_noRecodeImg=this.getChildAt(2),this.m_noRecodeImg1=this.getChildAt(3)},e.URL="ui://a2sxrbqkd2o617",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],CreateRoomUI_Tab_joinRoomUI:[function(t,e,n){"use strict";cc._RF.push(e,"ec4acrygslEfbfqt/JIDdrq","CreateRoomUI_Tab_joinRoomUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CreateRoomUI","Tab_joinRoomUI")},e.prototype.onConstruct=function(){this.m_noNumImg=this.getChildAt(1),this.m_numText1=this.getChildAt(2),this.m_numText2=this.getChildAt(3),this.m_numText3=this.getChildAt(4),this.m_numText4=this.getChildAt(5),this.m_numText5=this.getChildAt(6),this.m_numText6=this.getChildAt(7),this.m_numBtn1=this.getChildAt(8),this.m_numBtn2=this.getChildAt(9),this.m_numBtn3=this.getChildAt(10),this.m_numBtn4=this.getChildAt(11),this.m_numBtn5=this.getChildAt(12),this.m_numBtn6=this.getChildAt(13),this.m_numBtn7=this.getChildAt(14),this.m_numBtn8=this.getChildAt(15),this.m_numBtn9=this.getChildAt(16),this.m_numBtn0=this.getChildAt(17),this.m_delAllBtn=this.getChildAt(18),this.m_delOneBtn=this.getChildAt(19)},e.URL="ui://a2sxrbqkl8h716",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],CreateRoomUI_TapBtn:[function(t,e,n){"use strict";cc._RF.push(e,"4829084Mo5MYYniRsYUsnfk","CreateRoomUI_TapBtn");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CreateRoomUI","TapBtn")},e.prototype.onConstruct=function(){this.m_selected=this.getChildAt(2),this.m_unSelected=this.getChildAt(3)},e.URL="ui://a2sxrbqkcz1ga6a8",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],CreateRoomUI_createPanel:[function(t,e,n){"use strict";cc._RF.push(e,"1ce325LLBNFFpDETH6/0rvI","CreateRoomUI_createPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("CreateRoomUI","createPanel")},e.prototype.onConstruct=function(){this.m_createPanel=this.getChildAt(0)},e.URL="ui://a2sxrbqkw6ir1s",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],CreateRoomUI:[function(t,e,n){"use strict";cc._RF.push(e,"fc8a3SLuy9BRYXAG289tQyf","CreateRoomUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.CreateRoomUI=void 0;var r,s=t("../../Framework/UI/BaseUI"),c=t("../../Framework/UI/FadeUI"),l=t("./CreateRoomModel/CreateRoomUIModel"),u=t("./CreateRoomModel/JoinRoomUIModel"),d=t("./CreateRoomModel/HistoryUIModel"),p=t("./CreateRoomModel/AnalysisRoomConfigCreateUI"),h=t("../../Framework/Manager/EventManager"),_=t("../Base/Data/DataEvent"),f=t("../Base/Utils/UtilView"),m=t("../Base/Data/DataConstant");(function(t){t[t.CREATE_ROOMUI=0]="CREATE_ROOMUI",t[t.JOIN_ROOMUI=1]="JOIN_ROOMUI",t[t.HISTORY_ROOMUI=2]="HISTORY_ROOMUI"})(r||(r={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._createRoomModelObj=null,e._joinRoomModelObj=null,e._historyModelObj=null,e}return a(e,t),Object.defineProperty(e,"uiType",{get:function(){return s.UIType.ScenePart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._createRoomModelObj.onDestroy(),this._joinRoomModelObj.onDestroy(),this._historyModelObj.onDestroy()},e.prototype.onLoad=function(){this.initListener(),this.initData(),this.initUI()},e.prototype.initListener=function(){this.view.m_btnExit.onClick(this.onExitClick,this),this.view.m_Window.m_tab_createBtn.onClick(this.clickTabBtn,this),this.view.m_Window.m_tab_joinBtn.onClick(this.clickTabBtn,this),this.view.m_Window.m_tab_historyBtn.onClick(this.clickTabBtn,this)},e.prototype.initData=function(){this._createRoomModelObj=l.CreateRoomUIModel.instance,this._createRoomModelObj.setView(this.view.m_Window.m_tab_createRoomUI),this._joinRoomModelObj=u.JoinRoomUIModel.instance,this._joinRoomModelObj.setView(this.view.m_Window.m_tab_joinRoomUI),this._historyModelObj=d.HistoryUIModel.instance,this._historyModelObj.setView(this.view.m_Window.m_tab_historyUI)},e.prototype.initUI=function(){this.adaptFullScreen(),this.view.m_Window.m_c_tab.selectedIndex=r.CREATE_ROOMUI,this.showTabUI()},e.prototype.onExitClick=function(){t.prototype.onExitClick.call(this),h.EventManager.instance.emit(_.DataEvent.BackHall),p.AnalysisRoomConfigCreateUI.instance.saveRoomUIConfig()},e.prototype.clickTabBtn=function(t){var e=fgui.GObject.cast(t.currentTarget).data;this.view.m_Window.m_c_tab.selectedIndex=Number(e),this.showTabUI()},e.prototype.adaptFullScreen=function(){f.UtilView.isFullScreen()&&(this.view.m_gTop.x=this.view.m_gTop.x+m.DataConstant.ADAPTER_WIDTH_VALUE)},e.prototype.showTabUI=function(){var t=this.view.m_Window.m_c_tab.selectedIndex;r.CREATE_ROOMUI===t?this._createRoomModelObj.init():r.JOIN_ROOMUI===t?this._joinRoomModelObj.init():r.HISTORY_ROOMUI===t&&this._historyModelObj.init()},i([jsClass],e)}(c.FadeUI);n.CreateRoomUI=g,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/UI/BaseUI":"BaseUI","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataConstant":"DataConstant","../Base/Data/DataEvent":"DataEvent","../Base/Utils/UtilView":"UtilView","./CreateRoomModel/AnalysisRoomConfigCreateUI":"AnalysisRoomConfigCreateUI","./CreateRoomModel/CreateRoomUIModel":"CreateRoomUIModel","./CreateRoomModel/HistoryUIModel":"HistoryUIModel","./CreateRoomModel/JoinRoomUIModel":"JoinRoomUIModel"}],Curve:[function(t,e,n){"use strict";cc._RF.push(e,"3d956XPSHBDgrsJwSsGNSpq","Curve");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.Curve=n.CurveKeyFrame=void 0;var a=function(){function t(t,e,n,o){this._time=t,this._value=e,this._inTangent=n,this._outTangent=o}return Object.defineProperty(t.prototype,"time",{get:function(){return this._time||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value||0},set:function(t){this._value=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inTangent",{get:function(){return this._inTangent||0},set:function(t){this._inTangent=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outTangent",{get:function(){return this._outTangent||0},set:function(t){this._outTangent=t},enumerable:!1,configurable:!0}),o([jsClass("CurveKeyFrame")],t)}();n.CurveKeyFrame=a;var i=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._keyFrames=[],this._keyFrames=[];for(var n=0,o=t.length;n<o;++n)this.add(t[n]);this.ease=this.ease.bind(this)}var e;return e=t,Object.defineProperty(t.prototype,"length",{get:function(){return this._keyFrames.length},enumerable:!1,configurable:!0}),t.prototype.evaluate=function(t){var e=this.length;if(0===e)return 0;if(1===e)return this._keyFrames[0].value;t=t||0;var n=this.indexOf(t),o=n.prevIndex,a=n.nextIndex;if(o===a)return this._keyFrames[a].value;if(-1===o)return this._keyFrames[0].value;if(a===e)return this._keyFrames[e-1].value;var i=this._keyFrames[o],r=this._keyFrames[a],s=r.time-i.time,c=t-i.time,l=c/s,u=l*l,d=u*l,p=2*d-3*u+1,h=-2*d+3*u,_=c*(u-2*l+1),f=(c-s)*u;return i.value*p+r.value*h+i.outTangent*_+r.inTangent*f},t.prototype.get=function(t){return this._keyFrames[t]},t.prototype.add=function(t){if(0!==this.length){var e=this.indexOf(t&&t.time),n=e.prevIndex,o=e.nextIndex;n===o?this._keyFrames[o]=t:this._keyFrames.splice(o,0,t)}else this._keyFrames.push(t)},t.prototype.indexOf=function(t){t=t||0;for(var e=this._keyFrames.length,n=0;n<e;++n){var o=this._keyFrames[n],a=o?o.time:0;if(a===t)return{prevIndex:n,nextIndex:n};if(a>t)return{prevIndex:n-1,nextIndex:n}}return{prevIndex:e-1,nextIndex:e}},t.prototype.remove=function(t){return this._keyFrames.splice(t,1)[0]},t.prototype.autoTangents=function(t){t&&t>=0&&t<this.length&&this.autoKeyFrameTangents(t)},t.prototype.autoKeyFrameTangents=function(t){var e=this.getKeyFrame(t,!1),n=this._keyFrames[t-1],o=this._keyFrames[t+1],a=n&&(e.value-n.value)/(e.time-n.time||Number.EPSILON),i=o&&(o.value-e.value)/(o.time-e.time||Number.EPSILON),r=a&&i?(a+i)/2:i||i;r&&(e.inTangent=r,e.outTangent=r)},t.prototype.flatTangents=function(t){t&&t>=0&&t<this.length&&this.flatKeyFrameTangents(t)},t.prototype.flatKeyFrameTangents=function(t){var e=this.getKeyFrame(t,!1);e.inTangent=0,e.outTangent=0},t.prototype.getKeyFrame=function(t,e){void 0===e&&(e=!0);var n=this._keyFrames[t];return e||n||(n=new a,this._keyFrames[t]=n),n},t.prototype.cleanup=function(){this._keyFrames=[]},t.prototype.ease=function(t){return this.evaluate(t)},t.CONST=new e(new a(1,1)),t.LINEAR=new e(new a(0,0,1,1),new a(1,1,1,1)),t.EASE_IN=new e(new a(0,0,0,0),new a(1,1,2,2)),t.EASE_OUT=new e(new a(0,0,2,2),new a(1,1,0,0)),t.SWING=new e(new a(0,0,0,0),new a(1,1,0,0)),t.EASE_PINGPONG=new e(new a(0,0,0,0),new a(.5,1,0,0),new a(1,0,0,0)),t.EASE_PARABOLA=new e(new a(0,0,4,4),new a(.5,1,0,0),new a(1,0,-4,-4)),o([jsClass],t)}();n.Curve=i,cc._RF.pop()},{}],CustGuanDanProcess:[function(t,e,n){"use strict";cc._RF.push(e,"2994b0lT7NEAYC/adnP2X57","CustGuanDanProcess");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CustGuanDanProcess=void 0;var i=t("../Base/Processid"),r=t("../Base/ProtocolManager");(function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.custGuanDanProcess,e.xyid=custguandanprocess.XYID.kReqHistory,e}return a(e,t),e.prototype.pack=function(){return custguandanprocess.ReqHistory.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,custguandanprocess.ReqHistory.decode(t))},e}(custguandanprocess.ReqHistory);t.ReqHistory=e,r.ProtocolManager.instance.setProtocol(i.Processid.custGuanDanProcess,custguandanprocess.XYID.kReqHistory,e);var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.custGuanDanProcess,e.xyid=custguandanprocess.XYID.kReqHistoryByTotalid,e}return a(e,t),e.prototype.pack=function(){return custguandanprocess.ReqHistoryByTotalid.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,custguandanprocess.ReqHistoryByTotalid.decode(t))},e}(custguandanprocess.ReqHistoryByTotalid);t.ReqHistoryByTotalid=n,r.ProtocolManager.instance.setProtocol(i.Processid.custGuanDanProcess,custguandanprocess.XYID.kReqHistory,n);var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.custGuanDanProcess,e.xyid=custguandanprocess.XYID.kRespHistory,e}return a(e,t),e.prototype.pack=function(){return custguandanprocess.RespHistory.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,custguandanprocess.RespHistory.decode(t))},e}(custguandanprocess.RespHistory);t.RespHistory=o,r.ProtocolManager.instance.setProtocol(i.Processid.custGuanDanProcess,custguandanprocess.XYID.kRespHistory,o)})(n.CustGuanDanProcess||(n.CustGuanDanProcess={})),cc._RF.pop()},{"../Base/Processid":"Processid","../Base/ProtocolManager":"ProtocolManager"}],DataAdChannel:[function(t,e,n){"use strict";var o;cc._RF.push(e,"10189Gcue9LU4nCcVZ/qOjP","DataAdChannel"),Object.defineProperty(n,"__esModule",{value:!0}),n.DataAdChannel=void 0;var a=((o={})[92000709]=!0,o[92000710]=!0,o[92000521]=!0,o[92000522]=!0,o[92000135]=!0,o[92000136]=!0,o[92001107]=!0,o[92001108]=!0,o[92001307]=!0,o[92001308]=!0,o[92000140]=!0,o[92000141]=!0,o),i=function(){function t(){}return t.isNeepPopNewPlayerGift=function(t){return!!a.hasOwnProperty(t)&&a[t]},t}();n.DataAdChannel=i,cc._RF.pop()},{}],DataBfConfig:[function(t,e,n){"use strict";cc._RF.push(e,"5562b+9xUJKcqBVAnP6wZIF","DataBfConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.DataBfConfig=n.GameIDInfo=void 0;var o=t("../Module/Platform/PlatformManager"),a={dev:["wss://test-srv-zhanlang.gameabc2.com:4057","wss://test-srv-zhanlang.gameabc2.com:4061"],prod:["wss://guandansrs.gameabc2.com:4004","wss://guandansrs.gameabc2.com:4005","wss://guandansrs.gameabc2.com:4006","wss://guandansrs.gameabc2.com:4007"]},i={develop:{channel:91000200,platform_name:"develop"},miniGame:{channel:91000200,platform_name:"wxmini"},strongArmy:{channel:91000210,platform_name:"webmini"},skyWing:{channel:91000220,platform_name:"webmini"},meiTuan:{channel:91000230,platform_name:"wxmini"}},r="guandan.deviceID";function s(){var t=Date.now().toString(36)+Math.floor(2821109907456*Math.random()).toString(36)+Math.floor(2821109907456*Math.random()).toString(36)+Math.floor(2821109907456*Math.random()).toString(36);return localStorage.setItem(r,t),t}n.GameIDInfo={CLASSIC_GD:{id:9,name:"\u7ecf\u5178\u63bc\u86cb",isGoldRoom:!0},TTZ_GD:{id:3010,name:"\u56e2\u56e2\u8f6c",isGoldRoom:!0},NO_SHUFFLE_GD:{id:3011,name:"\u4e0d\u6d17\u724c",isGoldRoom:!0},ERREN_GD:{id:33003,name:"\u4e8c\u4eba\u7ecf\u5178",isGoldRoom:!0},TP_GD:{id:20390,name:"\u63bc\u86cb\u62d6\u724c",isGoldRoom:!1},PASSA_GD:{id:20575,name:"\u8fc7A\u73a9\u6cd5",isGoldRoom:!0}};var c=function(){function t(){}return Object.defineProperty(t,"ymn",{get:function(){return this._ymn},enumerable:!1,configurable:!0}),t.setYmnChannel=function(t){this._ymnChannel=t},Object.defineProperty(t,"deviceID",{get:function(){if(t.isTestEnv()){var e=o.PlatformManager.instance.platform.query.user;if(e&&e.indexOf("Debug_")<0)return e}return t.defaultDeviceID},enumerable:!1,configurable:!0}),Object.defineProperty(t,"canForcePop",{get:function(){if(t.isTestEnv()){var e=o.PlatformManager.instance.platform.query.pop;if(e&&0==+e)return!1}return!0},enumerable:!1,configurable:!0}),t.init=function(t,e){"prod"===t?this.ENV="prod":"dev"===t&&(this.ENV="dev"),this._ymn=i[e],-1!==this._ymnChannel&&(this._ymn.channel=this._ymnChannel)},t.isWebPlatform=function(){return"webmini"===this.ymn.platform_name},Object.defineProperty(t,"srsUrl",{get:function(){var t=a[this.ENV],e="";return this._memorySrs&&this.isSrsValid(this._memorySrs)?e=this._memorySrs:(e=t[Math.randomRangeInt(0,t.length)],this._memorySrs=e),e},enumerable:!1,configurable:!0}),t.isSrsValid=function(t){return a[this.ENV].indexOf(t)>=0},t.isNormalEnv=function(){return"prod"===this.ENV},t.isTestEnv=function(){return"dev"===this.ENV},t.getPackageVersion=function(){var t="";return this.VERSION.split(".").forEach(function(e){+e<10&&(e="0"+e),t+=e}),+t},t.ENV="prod",t.VERSION="7.4.59",t.areaID=5016,t.gameID=n.GameIDInfo.CLASSIC_GD.id,t.osVersion=3e6,t.friendTeamClubID=11e3,t.defaultDeviceID=localStorage.getItem(r)||s(),t._memorySrs=null,t._ymn=i.miniGame,t._ymnChannel=-1,t}();n.DataBfConfig=c,cc._RF.pop()},{"../Module/Platform/PlatformManager":"PlatformManager"}],DataClubClientConfig:[function(t,e,n){"use strict";cc._RF.push(e,"1f77bqY5UFCYJXKNnT3mDor","DataClubClientConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.DataClubClientConfig=void 0;var o=function(){function t(){}return t.setClubClientConfig=function(t){this._clubClientConifg=t},t.getIosPayGameCountLimit=function(){var t;return null===(t=this._clubClientConifg)||void 0===t?void 0:t.iosPayGameCountLimit},t.isIosPaySwitchOpen=function(){var t;return null===(t=this._clubClientConifg)||void 0===t?void 0:t.showIosPay},t.getGuideMatchCount=function(){var t;return null===(t=this._clubClientConifg)||void 0===t?void 0:t.guideMatchCount},t.isMatchLoginAdSwitchOpen=function(){var t;return null===(t=this._clubClientConifg)||void 0===t?void 0:t.popMatchLoginAd},t.isMatchSubScribeSwitchOpen=function(){var t;return null===(t=this._clubClientConifg)||void 0===t?void 0:t.openMatchSubscribe},t.isOpenMatchTempIcon=function(){var t;return 1===(null===(t=this._clubClientConifg)||void 0===t?void 0:t.tempMatchIcon)},t._clubClientConifg={iosPayGameCountLimit:30,showIosPay:!1,guideMatchCount:0,popMatchLoginAd:!0,openMatchSubscribe:!0,tempMatchIcon:0},t}();n.DataClubClientConfig=o,cc._RF.pop()},{}],DataConstant:[function(t,e,n){"use strict";cc._RF.push(e,"61eddlKMplA54VPlvyXFRgS","DataConstant"),Object.defineProperty(n,"__esModule",{value:!0}),n.DataConstant=void 0;var o=function(){function t(){}return t.getDefaultAvatar=function(e){return(void 0===e||e<0||e>7)&&(e=0),t.RES_PATH.AVATAR+"/"+(e+1)+".png"},t.PKG_COMMON="_Common",t.PKG_NEWPLAYERGIFT="NewPlayerGiftUI",t.PKG_HALL="HallUI",t.PKG_GAMECARDUI="GameCardUI",t.PKG_GAMECHATUI="GameChatUI",t.PKG_USERINFOUI="UserInfoUI",t.PKG_MATCHUI="MatchUI",t.NICKNAME_MAX_LENGTH_S=11,t.NICKNAME_MAX_LENGTH_L=14.1,t.ADAPTER_WIDTH_VALUE=44,t.ADAPTER_HEIGHT_VALUE=16,t.CDN="https://wxstatic.gameabc2.com/100002/res",t.RES_PATH={WEB:t.CDN+"/static/web",ICON:t.CDN+"/static/icon",AVATAR:t.CDN+"/static/avatar",GAMESHARE:t.CDN+"/static/share/game",ACTIVITY:t.CDN+"/static/activity",ACTIVITY_IMG:t.CDN+"/static/activity/img",CONFIG:t.CDN+"/static/config",LOBBYSHARE:t.CDN+"/static/share/lobby",MATCH:t.CDN+"/static/match/entity"},t.CUSTOMER_URL="https://vchat.bfxiuxianqipai.com/?scode=632a849387d56",t.RESULT_BG=t.RES_PATH.GAMESHARE+"/bg.jpg",t.WIN_BG=t.RES_PATH.GAMESHARE+"/win_bg.png",t.LOSE_BG=t.RES_PATH.GAMESHARE+"/lose_bg.png",t.CREATOR_IMG=t.RES_PATH.GAMESHARE+"/fz.png",t.WIN_IMG=t.RES_PATH.GAMESHARE+"/win.png",t.SELF_IMG=t.RES_PATH.GAMESHARE+"/self.png",t.LOSE_YOU=t.RES_PATH.GAMESHARE+"/lose_you.png",t.LOSE_ZUO=t.RES_PATH.GAMESHARE+"/lose_zuo.png",t.LOSE_ZHONG=t.RES_PATH.GAMESHARE+"/lose_zhong.png",t.WIN_YOU=t.RES_PATH.GAMESHARE+"/win_you.png",t.WIN_ZUO=t.RES_PATH.GAMESHARE+"/win_zuo.png",t.WIN_ZHONG=t.RES_PATH.GAMESHARE+"/win_zhong.png",t.WIN_HG=t.RES_PATH.GAMESHARE+"/win_hg.png",t.BIGSHARE_WINCNT=t.RES_PATH.GAMESHARE+"/bigShare_WinCnt.png",t.BIGSHARE_MAXMULT=t.RES_PATH.GAMESHARE+"/bigShare_MaxMult.jpg",t.BIGSHARE_MAXMULT_BG=t.RES_PATH.GAMESHARE+"/bigShare_MaxMult_bg.png",t.BIGSHARE_MAXMULT_NUM=t.RES_PATH.GAMESHARE+"/bigShare_",t.MATCH_DEFAULT_HEAD_ICON="ui://"+t.PKG_MATCHUI+"/img_default_face",t.CODE_SIGN_HOST_YMN="https://h5proxy.hangzhouqisheng.com/YMNProxy",t.CODE_SIGN_HOST_STRONGMILITARY="https://h5proxy.hangzhouqisheng.com/StrongMilitary",t.CODE_SIGN_HOST_SKYWING="https://h5proxy.hangzhouqisheng.com/SkyWingLogin",t.CODE_SIGN_HOST_MEITUAN="http://h5proxy.hangzhouqisheng.com/MeiTuanLogin",t.API_HUB_HOST="https://h5proxy.hangzhouqisheng.com/APIhubProxy",t.HUMMER_HOST="https://h5proxy.hangzhouqisheng.com/HummerProxy",t.HUMMER_HOST_SKYWING="https://h5proxy.hangzhouqisheng.com/SkyWingPayment",t.HUMMER_HOST_MEITUAN="https://h5proxy.hangzhouqisheng.com/MeiTuanPayment",t.ANNOUNCEMENT_HOST="https://h5proxy.hangzhouqisheng.com/Announcement",t.RECORD_SHARE_IN_HOST="https://h5des.hangzhouqisheng.com/wxopengid",t.REALTIME_VOICE_SIGN="https://h5des.hangzhouqisheng.com/wxvoipsign",t.QUESTIONNAIRE_HOST="https://api.bfxiuxianqipai.com",t}();n.DataConstant=o,cc._RF.pop()},{}],DataEvent:[function(t,e,n){"use strict";cc._RF.push(e,"5bbdbX+YEZAL6VXKZ2wvq11","DataEvent"),Object.defineProperty(n,"__esModule",{value:!0}),n.DataEvent=void 0;var o=function(){function t(){}return t.ReportSRSErr="DataEvent.ReportSRSErr",t.LoginGame="DataEvent.LoginGame",t.LoginSuccess="DataEvent.LoginSuccess",t.GetOpenIDSuccess="DataEvent.GetOpenIDSuccess",t.EnterHallSuccess="DataEvent.EnterHallSuccess",t.ReceiveAuthAwardInfo="DataEvent.ReceiveAuthAwardInfo",t.JoinAwardListener="DataEvent.JoinAwardListener",t.DelayAwardListener="DataEvent.DelayAwardListener",t.IMServerListener="DataEvent.IMServerListener",t.PopUIOpen="DataEvent.PopUIOpen",t.PopUIClose="DataEvent.PopUIClose",t.ClientControlUpdate="DataEvent.ClientControl",t.UserInfoUpdate="DataEvent.UserInfoUpdate",t.PlazaInfoUpdate="DataEvent.PlazaInfoUpdate",t.PlazaRecommond="DataEvent.PlazaRecommond",t.PlazaOnlineUpdate="DataEvent.PlazaOnlineUpdate",t.VideoAdRedUpdate="DataEvent.VideoAdRedUpdate",t.EnterGameTable="DataEvent.EnterGameTable",t.BackHallSuccess="DataEvent.BackHallSuccess",t.SettingDataUpdate="DataEvent.SettingDataUpdate",t.ChangePaiShowType="DataEvent.ChangePaiShowType",t.ActivityShareDataUpdate="DataEvent.ActivityShareDataUpdate",t.HallMailRedStatus="DataEvent.HallMailRedStatus",t.HallActivityRedStatus="DataEvent.HallActivityRedStatus",t.HallPlayMusic="DataEvent.HallPlayMusic",t.BackHall="DataEvent.BackHall",t.FriendTeamHideHall="DataEvent.FriendTeamHideHall",t.AwardShowMultChoose="DataEvent.AwardShowMultChoose",t.ToastData="DataEvent.ToastData",t.LoginUIShow="DataEvent.LoginUIShow",t.AnnouncementComplete="DataEvent.AnnouncementComplete",t.EveryDayFirstLogin="DataEvent.EveryDayFirstLogin",t.StopManagerPop="DataEvent.StopManagerPop",t.OpenFriendRoomUI="DataEvent.OpenFriendRoomUI",t.FriendTeamUpdateUserInfo="DataEvent.FriendTeamUpdateUserInfo",t.FriendTeamUpdateChar="DataEvent.FriendTeamUpdateChar",t.FriendTeamNotifyLocation="DataEvent.FriendTeamNotifyLocation",t.FriendTeamOverTimeDismiss="DataEvent.FriendTeamOverTimeDismiss",t.FriendTeamResetChatShowUI="DataEvent.FriendTeamResetChatShowUI",t.FriendTeamGetRecord="DataEvent.FriendTeamGetRecord",t.InviteNewDataUpdate="DataEvent.InviteNewDataUpdate",t.SignInCoolDownTime="DataEvent.SignInCoolDownTime",t.SignInDataQuerySuccess="DataEvent.SignInDataQuerySuccess",t.LoadVideoFailed="DataEvent.LoadVideoFailed",t.NotifyLocationSuccess="DataEvent.NotifyLocationSuccess",t.RefreshDelayPannelInfo="box_refreshDelayPannelInfo",t.TenYearBoxUpdate="DataEvent.TenYearBoxUpdate",t.NotifyForbidAccount="DataEvent.ForbidAccount",t.FriendTeamJoinClose="DataEvent.FriendTeamJoinClose",t.LoginReqLocationSuccess="DataEvent.LoginReqLocationSuccess",t.SyncRichData="DataEvent.SyncRichData",t.GoldenEggInfo="DataEvent.GoldenEggInfo",t.UpdateProp="DataEvent.UpdateProp",t.updateAnswerAward="DataEvent.updateAnswerAward",t.InviteGiftInfo="DataEvent.InviteGiftInfo",t.YearBeastInfo="DataEvent.YearBeastInfo",t.YearBeastTaskInfo="DataEvent.YearBeastTaskInfo",t}();n.DataEvent=o,cc._RF.pop()},{}],DataLocalStorageKey:[function(t,e,n){"use strict";cc._RF.push(e,"72329e896NDEb1CIAhDmoqS","DataLocalStorageKey");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.DataLocalStorage=n.LocalStorageKey=void 0;var a,i=t("../../UserInfo/UserInfoModel"),r=t("../Utils/UtilTime");(function(t){t.USER_LOGIN_NUMID="userLoginNumID",t.USER_AGREE_AGREEMENGT="userAgreeAgreement",t.LAST_LOGIN_ENV="lastLoginEnv",t.PLAZA_VER="plazaVer",t.PLAZA_CONFIG="plazaConfig",t.CLUB_CONFIG="clubConfig",t.ORIGIN_PLAZA_CONFIG="originPlazaConfig",t.LAST_ENTER_GAMEINFO_FRIEND_TEAM="lastEnterGameInfoFriendTeam",t.LAST_ENTER_GAMEINFO="lastEnterGameInfo",t.CREATE_ROOM_CONFIG="createRoomUIConfig",t.CREATE_ROOM_CONFIG_2="createRoomConfig",t.FRIEND_ROOM_FIRST_DAITUO="friendRoomFirstDaiTuo",t.CHAT_INDEX="CHAT_INDEX",t.TEAM_CHAT_INDEX="TEAM_CHAT_INDEX",t.SHEILD_ALL_CHAT="SHEILD_ALL_CHAT",t.CHAT_GUIDE_POP_COUNT="CHAT_GUIDE_POP_COUNT",t.REALTIME_VOICE_BOX="REALTIME_VOICE_BOX",t.REALTIME_VOICE_GUIDE_POP_COUNT="REALTIME_VOICE_GUIDE_POP_COUNT",t.FRIEND_CHAT_INDEX="CHAT_INDEX",t.BANKRUPT_TIMES="bankruptTimes_wx",t.EVERYDAY_AWARD="gdh5.DailyAward",t.SHARE_GIFT_DATE="shareGift_date",t.DUBBING_SEX="gdh5.DoubbingSex",t.INVITE_NEW_POPUP_TIME="InviteNewPopupTime",t.EVERY_DAY_FIRST_LOGIN="EveryDayFirstLogin",t.FIRST_DAY_SIGNIN_TIME="FirstDaySignInTime",t.LAST_AUTO_POPUP="LastAutoPopup",t.HALL_SHARE_AWARDED="HallShareAwarded",t.LAST_AUTHORIZE_PUSH_TIMESTAMP="LastAuthorizePushTimeStamp",t.RISE_GUID_IS_STOP="riseGuid_isStop",t.RISE_GUID_LAST_TRIGGER_DAY="riseGuid_lastTriggerDay",t.RISE_GUID_DAY_TRIGGER_COUNT="riseGuid_dayTriggerCount",t.TENYEAR_BOX_DAYPOP_INFO="tenyear_boxDayPopInfo",t.GAME_MULT_GUIDE_POP_COUNT="gameMultGuide_popCount",t.GAME_MULT_MIXPASSA_POP_COUNT="gamePassAGuide_popCount",t.GAME_PASS_LEVEL_TRIGGER_DAY="gamePassLevel_triggerDay",t.GAME_PASS_LEVEL_POP_COUNT="gamePassLevel_popCount",t.GAME_PASS_LEVEL_CONFIG_DATA="gamePassLevel_configData",t.GAME_MULT_TASK_CONFIG="gameMultTask_config",t.GAME_MULT_TASK_TRIGGER_DAY="gameMultTask_triggerDay",t.FRIEND_TEAM_GAME_ID="FriendTeamGameid",t.FRIEND_TEAM_SELECT_PLAYTYPE="friendTeam_lastPlayType",t.GAME_FRIEND_TEAM_ENEMY="GAME_FRIEND_TEAM_ENEMY",t.EXCHANGE_PHONE_NUMBER="EXCHANGE_PHONE_NUMBER",t.POP_AD_ACTIVITY="pop_adActivity",t.QUESTIONNAIRE_TRIGGER_DAY="questionnaire_lastTriggerDay",t.QUESTIONNAIRE_TRIGGER_POP_COUNT="questionnaire_popCount",t.QUESTIONNAIRE_NEW_TRIGGER_DAY="questionnaire_new_lastTriggerDay",t.QUESTIONNAIRE_NEW_TRIGGER_POP_COUNT="questionnaire_new_popCount",t.GOLDINLINE_TEAM_TRIGGER_DAY="goldInlineTeam_lastTriggerDay",t.GOLDINLINE_TEAM_TRIGGER_POP_COUNT="goldInlineTeam_popCount",t.GOLDINLINE_TEAMGUIDE_TRIGGER_POP_COUNT="goldInlineTeam_guide_popCount",t.MATCH_SHARE_SIGN_UP_TIMESTAMP="matchShareSignUpTimestamp",t.MATCH_SHARE_SIGN_UP_SHARE_TIMESTAMP="matchShareSignUpShareTimestamp",t.MATCH_GOLDEN_EGG_DAY="matchGoldenEggDay",t.MATCH_GOLDEN_EGG_POP_COUNT="matchGoldenEggPopCount",t.MATCH_HINT_START_TIME="matchStartHintTimeV2",t.MATCH_GUIDE_DAY="matchGuideDay",t.MATCH_GUIDE_POP_COUNT="matchGuidePopCount",t.MATCH_SIGN_BTN_GUIDE="MATCH_SIGN_BTN_GUIDE",t.MATCH_SHARE_SKY_FALL_TICKET_DAY="matchShareSkyFallTicketDay",t.MATCH_SHARE_SKY_FALL_TICKET_DAY_COUNT="matchShareSkyFallTicketDayCount",t.MATCH_SHARE_SKY_FALL_TICKET_POP_COUNT="matchShareSkyFallTicketPopCount",t.TEAM_NOTE_CARD_HINT_COUNT="teamNoteCard_hintCount",t.YEAR_BEAT_BTN_SWEEP_DAY="yearBeatBtnSweepDay",t.MULT_CRIT_GUIDE_DAY="multCritGuideDay",t.MULT_CRIT_GUIDE_POP_COUNT="multCritGuidePopCount",t.MULT_CRIT_GUIDE_DAY_COUNT="multCritGuideDayCount",t.BROAD_MULT_GUIDE_DAY="broadMultGuideDay",t.BROAD_MULT_GUIDE_POP_COUNT="broadMultGuidePopCount",t.BROAD_MULT_GUIDE_DAY_COUNT="broadMultGuideDayCount"})(a=n.LocalStorageKey||(n.LocalStorageKey={}));var s=function(){function t(){}var e;return e=t,t.getJson=function(t,e){var n=this.get(t);if(n){var o=void 0;try{o=JSON.parse(n)}catch(a){console.error(a)}return o}return e||{}},t.setJson=function(t,e){this.set(t,JSON.stringify(e))},t.get=function(t){for(var e=0,n=t.length;e<n;++e){var o=localStorage.getItem(t[e]);if(o)return o}return""},t.set=function(t,e){localStorage.setItem(t,e)},t.addKeyWithNumID=function(t){return t+"_"+(i.UserInfoModel.instance.userInfo.numID||0)},t.getLastLoginNumID=function(){return+localStorage.getItem(a.USER_LOGIN_NUMID)||0},t.setLastLoginNumID=function(t){localStorage.setItem(a.USER_LOGIN_NUMID,t.toString())},t.getBankruptTimes=function(){return Number(localStorage.getItem(a.BANKRUPT_TIMES))||0},t.setBankruptTimes=function(t){localStorage.setItem(a.BANKRUPT_TIMES,t+"")},t.addBankruptTimes=function(){var t=this.getBankruptTimes();localStorage.setItem(a.BANKRUPT_TIMES,(t+1).toString())},t.userAgreeAgreement=function(){return!!localStorage.getItem(a.USER_AGREE_AGREEMENGT)},t.getLastAutoPopup=function(){return this.getJson([a.LAST_AUTO_POPUP],{})},t.setLastAutoPopup=function(t){this.setJson(a.LAST_AUTO_POPUP,t)},t.setIsRiseGuidStop=function(t){var e=t?"1":"0";localStorage.setItem(this.addKeyWithNumID(a.RISE_GUID_IS_STOP),e)},t.isRiseGuidStop=function(){return"1"===localStorage.getItem(this.addKeyWithNumID(a.RISE_GUID_IS_STOP))},t.updateRiseGuidLastTriggerDay=function(){localStorage.setItem(this.addKeyWithNumID(a.RISE_GUID_LAST_TRIGGER_DAY),r.UtilTime.getDayCount().toString())},t.getRiseGuidLastTriggerDay=function(){return+localStorage.getItem(this.addKeyWithNumID(a.RISE_GUID_LAST_TRIGGER_DAY))},t.addRiseGuidDayTriggerCount=function(){var t=this.getRiseGuidDayTriggerCount();localStorage.setItem(this.addKeyWithNumID(a.RISE_GUID_DAY_TRIGGER_COUNT),(t+1).toString())},t.getRiseGuidDayTriggerCount=function(){var t=this.addKeyWithNumID(a.RISE_GUID_DAY_TRIGGER_COUNT);return r.UtilTime.getDayCount()!==this.getRiseGuidLastTriggerDay()&&localStorage.removeItem(t),+localStorage.getItem(t)||0},t.addGameMultGuidePopCount=function(){var t=this.getGameMultGuidePopCount();localStorage.setItem(this.addKeyWithNumID(a.GAME_MULT_GUIDE_POP_COUNT),(t+1).toString())},t.getGameMultGuidePopCount=function(){var t=this.addKeyWithNumID(a.GAME_MULT_GUIDE_POP_COUNT);return+localStorage.getItem(t)||0},t.addGameMixPassAGuidePopCount=function(){var t=this.getGameMixPassAGuidePopCount();localStorage.setItem(this.addKeyWithNumID(a.GAME_MULT_MIXPASSA_POP_COUNT),(t+1).toString())},t.getGameMixPassAGuidePopCount=function(){var t=this.addKeyWithNumID(a.GAME_MULT_MIXPASSA_POP_COUNT);return+localStorage.getItem(t)||0},t.addChatGuidePopCount=function(){var t=this.getChatGuidePopCount();localStorage.setItem(this.addKeyWithNumID(a.CHAT_GUIDE_POP_COUNT),(t+1).toString())},t.getChatGuidePopCount=function(){var t=this.addKeyWithNumID(a.CHAT_GUIDE_POP_COUNT);return+localStorage.getItem(t)||0},t.addRealTimeVoiceGuidePopCount=function(){var t=this.getRealTimeVoiceGuidePopCount();localStorage.setItem(this.addKeyWithNumID(a.REALTIME_VOICE_GUIDE_POP_COUNT),(t+1).toString())},t.getRealTimeVoiceGuidePopCount=function(){var t=this.addKeyWithNumID(a.REALTIME_VOICE_GUIDE_POP_COUNT);return+localStorage.getItem(t)||0},t.updateTriggerDay=function(t){localStorage.setItem(e.addKeyWithNumID(t),r.UtilTime.getDayCount().toString())},t.getTriggerDay=function(t){return+localStorage.getItem(e.addKeyWithNumID(t))},t.addDayPopCount=function(t,n){var o=this.getDayPopCount(t,n);localStorage.setItem(e.addKeyWithNumID(n),(o+1).toString())},t.getDayPopCount=function(t,n){var o=e.addKeyWithNumID(n);return r.UtilTime.getDayCount()!==this.getTriggerDay(t)&&(localStorage.removeItem(o),this.updateTriggerDay(t)),+localStorage.getItem(o)||0},t.isCanPopAct=function(t,e,n){return this.getDayPopCount(t,e)<n&&(this.addDayPopCount(t,e),!0)},t.getDayPopCountWithDayCount=function(t,n,o,a){var i=e.addKeyWithNumID(n);if(r.UtilTime.getDayCount()!==this.getTriggerDay(t)){var s=e.addKeyWithNumID(o);(+localStorage.getItem(s)||0)<a&&(localStorage.removeItem(i),this.updateTriggerDay(t))}return+localStorage.getItem(i)||0},t.isCanPopActWithDayCount=function(t,n,o,a,i){if(this.getDayPopCountWithDayCount(t,n,o,i)<a){var r=e.addKeyWithNumID(o),s=+localStorage.getItem(r)||0;return localStorage.setItem(r,(s+1).toString()),this.addDayPopCount(t,n),!0}return!1},e=o([jsClass],t)}();n.DataLocalStorage=s,cc._RF.pop()},{"../../UserInfo/UserInfoModel":"UserInfoModel","../Utils/UtilTime":"UtilTime"}],DataPointID:[function(t,e,n){"use strict";cc._RF.push(e,"5ec9cabsmRDZr7zB9Qu5s34","DataPointID"),Object.defineProperty(n,"__esModule",{value:!0}),n.MatchGuidePointID=n.YearBeastPointID=n.InviteGiftPointID=n.AnswerAwardPointID=n.MatchPoint=n.MatchShareAssistPointID=n.MatchGoldenEggPointID=n.MatchCreditSharePointID=n.MatchEnterTicketPointID=n.MatchSkyFallTicketPointID=n.MatchShareRankAgainPointID=n.MatchNoRankSharePointID=n.MatchRankSharePointID=n.MatchSignUpSharePointID=n.MatchTicketSharePointID=n.FriendMixTeamPointID=n.ChatRecordPoidID=n.GameMultTaskPointID=n.GamePassLevelTaskPointID=n.TenYearBoxPointID=n.FeedBackPointID=n.CustomerPointID=n.BoxRoomPointID=n.LuckyTurnTablePoints=n.FriendTeamGameScenePointID=n.WinMorePointID=n.NewPlayerPointID=n.BigCardSharePointID=n.ActivityPointID=n.APPGuid2H5PointID=n.ShareLinkPointID=n.ClientErrorPointID=n.UserConvertLinkPointID=n.SharePointID=n.DataPointID=void 0,function(t){t[t.ERROR_CATCH=900001]="ERROR_CATCH",t[t.LAUNCH=520100]="LAUNCH"}(n.DataPointID||(n.DataPointID={})),n.SharePointID={SHARE:{eventid:1000001,eventName:"\u7528\u6237\u53d1\u8d77\u5206\u4eab"},SHARE_RESULT:{eventid:1000002,eventName:"\u7528\u6237\u5206\u4eab\u7ed3\u679c"},CLICK_SHARE_CARD:{eventid:1000003,eventName:"\u7528\u6237\u70b9\u51fb\u5206\u4eab\u5361\u7247"}},n.UserConvertLinkPointID={LOADING_START:{eventid:520101,eventName:"\u8fdb\u5165\u52a0\u8f7d\u9875\u9762"},LOADING_FAILE:{eventid:520102,eventName:"\u52a0\u8f7d\u5931\u8d25"},LOADING_SUCCESS:{eventid:520103,eventName:"\u52a0\u8f7d\u5b8c\u6210"},POP_PRIVACY:{eventid:520104,eventName:"\u9690\u79c1\u534f\u8bae\u5f39\u7a97"},PRIVACY_AGREE:{eventid:520105,eventName:"\u540c\u610f\u9690\u79c1\u534f\u8bae"},PRIVACY_REJECT:{eventid:520106,eventName:"\u62d2\u7edd\u9690\u79c1\u534f\u8bae"},POP_2_PRIVACY_AFETER_REJECT:{eventid:520107,eventName:"\u62d2\u7edd\u9690\u79c1\u540e\u4e8c\u6b21\u5f39\u7a97"},POP_2_PRIVACY_AGREE:{eventid:520108,eventName:"\u9690\u79c1\u4e8c\u6b21\u5f39\u7a97,\u540c\u610f"},POP_2_PRIVACY_REJECT:{eventid:520109,eventName:"\u9690\u79c1\u4e8c\u6b21\u5f39\u7a97,\u62d2\u7edd"},CLICK_ENTER_BTN:{eventid:520110,eventName:"\u8fdb\u5165\u6e38\u620f\u6309\u94ae\u70b9\u51fb"},CLOSE_LIGIN_UI:{eventid:520111,eventName:"\u5173\u95ed\u767b\u5f55\u9875\u9762"},ENTER_HALL:{eventid:520112,eventName:"\u8fdb\u5165\u5927\u5385\u6210\u529f"},HALL_HIDE:{eventid:520113,eventName:"\u73a9\u5bb6\u5173\u95ed\u5927\u5385"},REGISTER_USER:{eventid:520114,eventName:"\u6bcf\u65e5\u65b0\u6ce8\u518c\u73a9\u5bb6\u6570\u91cf"},ENTER_NEW_GUIDE:{eventid:520115,eventName:"\u8fdb\u5165\u65b0\u624b\u5f15\u5bfc"},CLOSE_NEW_GUIDE:{eventid:520116,eventName:"\u5173\u95ed\u65b0\u624b\u5f15\u5bfc"},FINISH_NEW_GUIDE:{eventid:520117,eventName:"\u5b8c\u6210\u65b0\u624b\u5f15\u5bfc"},ENTER_GAME_UI:{eventid:520118,eventName:"\u8fdb\u5165\u6e38\u620f\u533a"},START_FIRST_GAME:{eventid:520119,eventName:"\u5f00\u59cb\u9996\u5c40"},CLOSE_FIRST_GAME:{eventid:520120,eventName:"\u5173\u95ed\u9996\u5c40"},END_FIRST_GAME:{eventid:520121,eventName:"\u7ed3\u675f\u9996\u5c40"}},n.ClientErrorPointID={SUBID_ERROR_EVENT:{eventid:6e5,eventName:"Subid\u4e3a0\u62a5\u9519\u7edf\u8ba1"}},n.ShareLinkPointID={PULL_JOIN_GAME:{eventid:510101,eventName:"\u70b9\u51fb\u597d\u53cb\u623f\u5206\u4eab\u94fe\u63a5\uff0c\u5e76\u4e14\u88ab\u62c9\u8fdb\u6e38\u620f\u65f6"}},n.APPGuid2H5PointID={NEW_PLAYER:{eventid:702300,eventName:"\u65b0\u7528\u6237\u901a\u8fc7\u6d3b\u52a8\u5206\u4eab\u94fe\u63a5\u8df3\u8f6c"},OLD_PLAYER:{eventid:702301,eventName:"\u8001\u7528\u6237\u901a\u8fc7\u6d3b\u52a8\u5206\u4eab\u94fe\u63a5\u8df3\u8f6c"}},n.ActivityPointID={newPlayerGiftScene:{triggerPop:{eventid:701103,eventName:"\u65b0\u73a9\u5bb6\u5728\u8fdb\u5165\u6e38\u620f\u540e,\u5728\u5f39\u51fa\u65b0\u624b\u793c\u5305\u4e4b\u524d"},show:{eventid:701100,eventName:"\u65b0\u624b\u793c\u5305\u66dd\u5149"},clickEnterGame:{eventid:701101,eventName:"\u70b9\u51fb\u53bb\u6e38\u620f\u6309\u94ae"},clickClose:{eventid:701102,eventName:"\u70b9\u51fb\u5173\u95ed\u6309\u94ae"}},collectAwardScene:{show:{eventid:701200,eventName:"\u6536\u85cf\u6709\u793cicon\u70b9\u51fb\u66dd\u5149"},clickClose:{eventid:701201,eventName:"\u6536\u85cf\u6709\u793c\u9875\u9762\u5173\u95ed\u6309\u94ae\u70b9\u51fb"},firstAward:{eventid:701202,eventName:"\u9996\u6b2110\u500d\u5956\u52b1\uff0c\u606d\u559c\u83b7\u5f97\u66dd\u5149"},normalAward:{eventid:701203,eventName:"\u666e\u901a\u5956\u52b1\uff0c\u606d\u559c\u83b7\u5f97\u66dd\u5149"}},videoAwardScene:{click:{eventid:701300,eventName:"\u89c6\u9891\u9886\u5956icon\u70b9\u51fb"},watchVideoSuccess:{eventid:701301,eventName:"\u606d\u559c\u83b7\u5f97\u5956\u52b1\u5c55\u793a"},watchVideoFailed:{eventid:701302,eventName:"\u89c2\u770b\u89c6\u9891\u5e7f\u544a\u5931\u8d25"},loadVideoFailed:{eventid:701303,eventName:"\u5fae\u4fe1\u6295\u653e\u89c6\u9891\u6b21\u6570\u8017\u5c3d"}},shareAwardScene:{show:{eventid:701400,eventName:"\u5206\u4eab\u83b7\u5229\u66dd\u5149"},clickShare:{eventid:701401,eventName:"\u5206\u4eab\u6309\u94ae\u70b9\u51fb"},clickClose:{eventid:701402,eventName:"\u5173\u95ed\u6309\u94ae\u70b9\u51fb"},awawrdShare:{eventid:701403,eventName:"\u606d\u559c\u83b7\u5f97888\u91d1\u5e01\u5956\u52b1\u5c55\u793a"},awardFromLink:{eventid:701404,eventName:"\u5206\u4eab\u83b7\u5229\u901a\u8fc7\u5206\u4eab\u94fe\u63a5\u8fdb\u5165\u83b7\u5f97\u5956\u52b1"}},bankruptScene:{show:{eventid:701500,eventName:"\u7834\u4ea7\u8865\u52a9\u9875\u9762\u66dd\u5149\uff08\u53ef\u76f4\u63a5\u9886\u5956\uff09"},doubleStateClickShare:{eventid:701501,eventName:"\u5206\u4eab\u9886\u53cc\u500d\u6309\u94ae\u70b9\u51fb"},doubleStateClickDirect:{eventid:701502,eventName:"\u76f4\u63a5\u9886\u53d6\u6309\u94ae\u70b9\u51fb"},doubleStateClickClose:{eventid:701503,eventName:"\u5173\u95ed\u6309\u94ae\u70b9\u51fb"},normalStateClickShare:{eventid:701504,eventName:"\u5206\u4eab\u6309\u94ae\u70b9\u51fb"},normalStateClickClose:{eventid:701505,eventName:"\u5173\u95ed\u6309\u94ae\u70b9\u51fb"},triggerInHallQuickStart:{eventid:701506,eventName:"\u5927\u5385\u5feb\u901f\u5f00\u59cb"},triggerInPlazaGameICon:{eventid:701507,eventName:"\u9009\u573a\u6e38\u620f\u754c\u9762"},triggerInPlazaQuickStart:{eventid:701508,eventName:"\u9009\u573a\u5feb\u901f\u5f00\u59cb"},triggerInGame:{eventid:701509,eventName:"\u6e38\u620f\u533a\u89e6\u53d1"},showNotAward:{eventid:701510,eventName:"\u7834\u4ea7\u8865\u52a9\u9875\u9762\u66dd\u5149\uff08\u4e0d\u53ef\u76f4\u63a5\u9886\u5956\uff09"},touchDouble:{eventid:701511,eventName:"\u5206\u4eab\u53cc\u500d\u9886\u53d6\u6309\u94ae\u70b9\u51fb"}},activityUI:{showFriendTeamUI:{eventid:500102,eventName:"\u6d3b\u52a8\u754c\u9762\u5c55\u793a\u6b21\u6570"},activityUIGoFriendTeamUI:{eventid:500103,eventName:"\u6d3b\u52a8\u754c\u9762\u8fdb\u5165\u597d\u53cb\u7ec4\u961f"},activityAdUIShowFriendTeamUI:{eventid:513003,eventName:"\u5f02\u5f62\u5ba3\u4f20\u56fe\u5c55\u793a\u6b21\u6570"},activityAdUIGoFriendTeamUI:{eventid:513004,eventName:"\u5f02\u5f62\u5ba3\u4f20\u56fe\u8fdb\u5165\u597d\u53cb\u7ec4\u961f"}},signInActivity:{show:{eventid:702e3,eventName:"\u65b0\u624b\u8c6a\u793c\u6d3b\u52a8\u754c\u9762\u603b\u8ba1\u66dd\u5149"},clickClose:{eventid:702001,eventName:"\u5173\u95ed\u6309\u94ae\u70b9\u51fb"},clickOpen:{eventid:702002,eventName:"\u65b0\u624b\u8c6a\u793cicon\u70b9\u51fb"},backOpen:{eventid:702003,eventName:"\u6e38\u620f\u5185\u8fd4\u56de\u5927\u5385"},clickAwardSubscribeSelected:{eventid:702004,eventName:"\u8ba2\u9605\u52fe\u9009\u72b6\u6001\u4e0b\u70b9\u51fb\u9886\u53d6\u5956\u52b1\u6309\u94ae"},clickAwardSubscribeUnselected:{eventid:702005,eventName:"\u8ba2\u9605\u4e0d\u52fe\u9009\u72b6\u6001\u4e0b\u70b9\u51fb\u9886\u53d6\u5956\u52b1\u6309\u94ae"},clickAwardShareSelected:{eventid:702006,eventName:"\u5206\u4eab\u52fe\u9009\u72b6\u6001\u4e0b\u70b9\u51fb\u9886\u53d6\u5956\u52b1\u6309\u94ae"},clickAwardShareUnselected:{eventid:702007,eventName:"\u5206\u4eab\u4e0d\u52fe\u9009\u72b6\u6001\u4e0b\u70b9\u51fb\u9886\u53d6\u5956\u52b1\u6309\u94ae"},clickAwardVideoSelected:{eventid:702008,eventName:"\u89c6\u9891\u52fe\u9009\u72b6\u6001\u4e0b\u70b9\u51fb\u9886\u53d6\u5956\u52b1\u6309\u94ae"},clickAwardVideoUnselected:{eventid:702009,eventName:"\u89c6\u9891\u4e0d\u52fe\u9009\u72b6\u6001\u4e0b\u70b9\u51fb\u5956\u52b1\u9886\u53d6\u6309\u94ae"},clickReissueShareSelected:{eventid:702010,eventName:"\u5206\u4eab\u8865\u7b7e\u72b6\u6001\u4e0b\u70b9\u51fb\u5956\u52b1\u9886\u53d6\u6309\u94ae"},clickReissueVideoSelected:{eventid:702011,eventName:"\u89c6\u9891\u8865\u7b7e\u72b6\u6001\u4e0b\u70b9\u51fb\u5956\u52b1\u9886\u53d6\u6309\u94ae"},signInFirstAndSecondDaySign:{eventid:702012,eventName:"\u65b0\u6ce8\u518c\u73a9\u5bb6\u9996\u65e5\u9886\u53d6\u5956\u52b1\u7b2c\u4e8c\u5929\u4e5f\u9886\u53d6\u5956\u52b1"}}},n.BigCardSharePointID={normalClickClose:{eventid:701602,eventName:"\u5173\u95ed\u6309\u94ae\u70b9\u51fb"},normalClickShare:{eventid:701601,eventName:"\u5206\u4eab\u6309\u94ae\u70b9\u51fb"},showShareUI:{eventid:701600,eventName:"\u5206\u4eab\u56fe\u7247\u66dd\u5149"}},n.NewPlayerPointID={startGame:{eventid:505001,eventName:"\u9996\u5c40\u5f00\u5c40"},resultGame:{eventid:505002,eventName:"\u9996\u5c40\u7ed3\u7b97"},showGuideUI:{eventid:505200,eventName:"\u65b0\u624b\u5f15\u5bfc"},touchBtnNew:{eventid:505201,eventName:"\u6211\u662f\u65b0\u624b"},touchBtnOld:{eventid:505202,eventName:"\u6211\u662f\u8001\u624b"},finishLevelGuide:{eventid:505203,eventName:"\u7ea7\u724c\u6559\u5b66"},finishFollowGuide:{eventid:505204,eventName:"\u8ddf\u724c\u6559\u5b66"},finishNotGuide:{eventid:505205,eventName:"\u4e0d\u51fa\u6559\u5b66"},finishTHSGuide:{eventid:505206,eventName:"\u540c\u82b1\u987a\u6559\u5b66"},finishFirstGuide:{eventid:505207,eventName:"\u9996\u51fa\u6559\u5b66"},finishJokerGuide:{eventid:505208,eventName:"\u9022\u4eba\u914d\u6559\u5b66"},finishAllGuide:{eventid:505209,eventName:"\u5b8c\u6210\u6559\u5b66"},touchGo:{eventid:505210,eventName:"\u7ed3\u675f\u6559\u7a0b"},touchBtnSkip:{eventid:505211,eventName:"\u8df3\u8fc7\u6559\u7a0b1"},touchBtnSkip2:{eventid:505212,eventName:"\u8df3\u8fc7\u6559\u7a0b2"},skipGoGame:{eventid:505213,eventName:"\u8df3\u8fc7\u6559\u7a0b3"}},n.WinMorePointID={showUI:{eventid:701800,eventName:"\u5f39\u7a97\u5f39\u51fa\u65f6"},touchBtn:{eventid:701801,eventName:"\u53c2\u4e0e\u6d3b\u52a8"},touchGiveUp:{eventid:701802,eventName:"\u4e0d\u53c2\u4e0e\u6d3b\u52a8"},touchLoseBtn:{eventid:701803,eventName:"\u6e38\u620f\u754c\u9762\u53c2\u4e0e\u514d\u8f93\u6d3b\u52a8"},touchWinBtn:{eventid:701804,eventName:"\u6e38\u620f\u754c\u9762\u53c2\u4e0e\u591a\u8d62\u6d3b\u52a8"}},n.FriendTeamGameScenePointID={clickChat:{eventid:501804,eventName:"\u6e38\u620f\u65f6\u73a9\u5bb6\u53d1\u9001\u5feb\u6377\u4fe1\u606f"}},n.LuckyTurnTablePoints={show:{eventid:704e3,eventName:"\u8f6c\u76d8\u4e3b\u9875\u9762\u66dd\u5149"},clickClose:{eventid:704001,eventName:"\u8f6c\u76d8\u9875\u9762\u5173\u95ed\u6309\u94ae\u70b9\u51fb"},clickHelp:{eventid:704002,eventName:"\u8f6c\u76d8\u4e3b\u9875\u9762\u95ee\u53f7\u70b9\u51fb\u6b21\u6570"},subscribeSelectedShow:{eventid:704003,eventName:"\u8f6c\u76d8\u754c\u9762\u8ba2\u9605\u52fe\u9009\u66dd\u5149"},subscribeSelectedFreeRun:{eventid:704004,eventName:"\u8f6c\u76d8\u754c\u9762\u52fe\u9009\u8ba2\u9605\u70b9\u51fb\u514d\u8d39\u62bd\u5956"},subscribeUnselectedFreeRun:{eventid:704005,eventName:"\u8f6c\u76d8\u754c\u9762\u672a\u52fe\u9009\u8ba2\u9605\u70b9\u51fb\u514d\u8d39\u62bd\u5956"},shareClickRun:{eventid:704006,eventName:"\u8f6c\u76d8\u754c\u9762\u4e3a\u5206\u4eab\u65f6\uff0c\u73a9\u5bb6\u70b9\u51fb\u5206\u4eab\u6b21\u6570"},shareClickRunSuccess:{eventid:704007,eventName:"\u8f6c\u76d8\u754c\u9762\u4e3a\u5206\u4eab\u65f6\uff0c\u73a9\u5bb6\u6210\u529f\u8f6c\u52a8\u8f6c\u76d8\u6b21\u6570"},videoClickRun:{eventid:704008,eventName:"\u8f6c\u76d8\u754c\u9762\u4e3a\u89c6\u9891\u65f6\uff0c\u73a9\u5bb6\u70b9\u51fb\u89c6\u9891\u6b21\u6570"},videoRunSuccess:{eventid:704009,eventName:"\u8f6c\u76d8\u754c\u9762\u4e3a\u89c6\u9891\u65f6\uff0c\u73a9\u5bb6\u6210\u529f\u8f6c\u52a8\u8f6c\u76d8\u6b21\u6570"}},n.BoxRoomPointID={ENTRANCE:{eventid:510110,eventName:"\u5927\u5385\u597d\u53cb\u623f\u5165\u53e3\u70b9\u51fb"},SHOW_CREATRBOX_UI:{eventid:510111,eventName:"\u521b\u5efa\u623f\u95f4\u754c\u9762\u5c55\u793a"},CLICK_CREATRBOX:{eventid:510112,eventName:"\u521b\u5efa\u623f\u95f4\u70b9\u51fb"},SHOW_JOINBOX_UI:{eventid:510114,eventName:"\u52a0\u5165\u623f\u95f4\u754c\u9762\u5c55\u793a"},INPUT_FIRST_ROOMNUM:{eventid:510115,eventName:"\u8f93\u5165\u7b2c\u4e00\u4e2a\u6570\u5b57"},INPUT_FINISH_ROOMNUM:{eventid:510116,eventName:"\u623f\u95f4\u53f7\u8f93\u5165\u5b8c\u6210\u5e76\u9a8c\u8bc1\u6210\u529f"},JOINBOX_BY_LINK:{eventid:510117,eventName:"\u901a\u8fc7\u94fe\u63a5\u8fdb\u5165\u597d\u53cb\u623f"},CLICK_BTN_INVITER:{eventid:510118,eventName:"\u70b9\u51fb\u9080\u8bf7\u597d\u53cb\u6309\u94ae\u70b9\u51fb"},CLICK_BTN_QUICK_INVITER:{eventid:510119,eventName:"\u70b9\u51fb\u5feb\u6377\u9080\u8bf7\u6309\u94ae"},SHOW_BIG_RESULT:{eventid:510120,eventName:"\u5927\u7ed3\u7b97\u754c\u9762\u5f39\u51fa"},NORMAL_CLICK_BTN_LEAVE:{eventid:510201,eventName:"\u975e\u623f\u4e3b\u73a9\u5bb6\u70b9\u51fb\u597d\u53cb\u623f\u5185\u7684\u9000\u51fa\u6309\u94ae"},OWNER_CLICK_BTN_LEAVE:{eventid:510202,eventName:"\u623f\u4e3b\u73a9\u5bb6\u70b9\u51fb\u597d\u53cb\u623f\u5185\u7684\u9000\u51fa\u6309\u94ae"},OWNER_POP_BTN_LEAVE:{eventid:510203,eventName:"\u623f\u4e3b\u73a9\u5bb6\u4e8c\u6b21\u5f39\u7a97\u70b9\u51fb\u6682\u65f6\u79bb\u5f00"},OWNER_POP_BTN_DISMISS:{eventid:510204,eventName:"\u623f\u4e3b\u73a9\u5bb6\u4e8c\u6b21\u5f39\u7a97\u70b9\u51fb\u786e\u5b9a\u89e3\u6563"},OWNER_DIRECT_DISMISS:{eventid:510205,eventName:"\u623f\u4e3b\u73a9\u5bb6\u672a\u5f00\u5c40\u76f4\u63a5\u89e3\u6563"},NORMAL_REQ_DISMISS:{eventid:510206,eventName:"\u975e\u623f\u4e3b\u73a9\u5bb6\u7533\u8bf7\u89e3\u6563"},CLISK_REQ_CHANGE_SEAT:{eventid:510210,eventName:"\u73a9\u5bb6\u7533\u8bf7\u6362\u5ea7\u70b9\u51fb"},REQ_CHANGE_SEAT_SUCCESS:{eventid:510211,eventName:"\u73a9\u5bb6\u6210\u529f\u7533\u8bf7\u6362\u5ea7"},RESP_CHANGE_SEAT_SUCCESS:{eventid:510212,eventName:"\u73a9\u5bb6\u6210\u529f\u6362\u5ea7"},REQ_DELAY_GAME:{eventid:510220,eventName:"\u73a9\u5bb6\u53d1\u8d77\u5ef6\u957f\u5bf9\u5c40\u7533\u8bf7"},DELAY_GAME_SUCCESS:{eventid:510221,eventName:"\u6210\u529f\u5ef6\u957f\u5bf9\u5c40"},DELAY_GAME_REJECT:{eventid:510222,eventName:"\u62d2\u7edd\u5ef6\u957f\u5bf9\u5c40"},DELAY_GAME_FAIL:{eventid:510223,eventName:"\u5ef6\u957f\u5bf9\u5c40\u5931\u8d25"},CONTINUE_GAME_SUCCESS:{eventid:510230,eventName:"\u73a9\u5bb6\u6210\u529f\u7eed\u684c"},AGREE_CONTINUE_GAME:{eventid:510231,eventName:"\u73a9\u5bb6\u540c\u610f\u7eed\u684c"}},n.CustomerPointID={LOGIN_CUSTOMER:{eventid:507500,eventName:"\u73a9\u5bb6\u5728\u767b\u9646\u754c\u9762\u8054\u7cfb\u5ba2\u670d"},LOBBY_SETUI_CUSTOMER:{eventid:507501,eventName:"\u73a9\u5bb6\u5728\u5927\u5385\u8054\u7cfb\u5ba2\u670d"},GAME_SETUI_CUSTOMER:{eventid:507502,eventName:"\u73a9\u5bb6\u5728\u6e38\u620f\u8054\u7cfb\u5ba2\u670d"},SHOP_CUSTOMER:{eventid:507503,eventName:"\u73a9\u5bb6\u5728\u5546\u57ce\u754c\u9762\u8054\u7cfb\u5ba2\u670d"}},n.FeedBackPointID={CLICK_ICON:{eventid:507510,eventName:"\u73a9\u5bb6\u5728\u5927\u5385\u5c1d\u8bd5\u8fdb\u884c\u53cd\u9988"},CLICK_CUSTOMER:{eventid:507511,eventName:"\u73a9\u5bb6\u5728\u53cd\u9988\u754c\u9762\u8054\u7cfb\u5ba2\u670d"},ADD_WECHAT:{eventid:507512,eventName:"\u73a9\u5bb6\u6dfb\u52a0\u4f01\u4e1a\u5fae\u4fe1"},COPY_OA:{eventid:507513,eventName:"\u73a9\u5bb6\u590d\u5236\u516c\u4f17\u53f7"},COPY_PHONE:{eventid:507514,eventName:"\u73a9\u5bb6\u590d\u5236\u5ba2\u670d\u7535\u8bdd"}},n.TenYearBoxPointID={EXPOSURE_AUTOPOP:{eventid:702701,eventName:"\u5f3a\u5f39\u6d3b\u52a8\u754c\u9762\u66dd\u5149"},EXPOSURE_POP:{eventid:702702,eventName:"\u6d3b\u52a8\u754c\u9762\u66dd\u5149"},CLICK_ICON:{eventid:702710,eventName:"\u5927\u5385icon\u5165\u53e3\u70b9\u51fb"},CLICK_BUY:{eventid:702712,eventName:"\u8d85\u503c\u8fd4\u5229\u754c\u9762\u70b9\u51fb"}},n.GamePassLevelTaskPointID={CLICK_ICON:{eventid:702730,eventName:"\u70b9\u51fb\u8fc7\u7ea7\u6709\u793c\u6309\u94aeicon"},SHOW:{eventid:702731,eventName:"\u5c55\u793a\u8fc7\u7ea7\u6709\u793c\u754c\u9762"},CLICK_GET:{eventid:702732,eventName:"\u9886\u53d6\u8fc7\u7ea7\u6709\u793c"}},n.GameMultTaskPointID={CLICK_ICON:{eventid:702740,eventName:"\u70b9\u51fb\u7ffb\u500d\u5165\u53e3\u6309\u94aeicon"},SHOW:{eventid:702741,eventName:"\u5c55\u793a\u7ffb\u500d\u5f39\u7a97"},CLICK_PLAZA_TAB:{eventid:702742,eventName:"\u5176\u5b83\u573a\u6b21\u9875\u7b7e\u70b9\u51fb"},CLICK_GET_AWARD:{eventid:702744,eventName:"\u70b9\u51fb\u9886\u53d6\u514d\u8d39\u62bd\u5956"}},n.ChatRecordPoidID={CLICK_TEAM_ITEM_1:{eventid:531001,eventName:"\u70b9\u51fb\u7ec4\u961f\u5feb\u6377\u8bed1"},CLICK_TEAM_ITEM_2:{eventid:531002,eventName:"\u70b9\u51fb\u7ec4\u961f\u5feb\u6377\u8bed2"},CLICK_TEAM_ITEM_3:{eventid:531003,eventName:"\u70b9\u51fb\u7ec4\u961f\u5feb\u6377\u8bed3"},CLICK_TEAM_ITEM_4:{eventid:531004,eventName:"\u70b9\u51fb\u7ec4\u961f\u5feb\u6377\u8bed4"},CLICK_TEAM_ITEM_5:{eventid:531005,eventName:"\u70b9\u51fb\u7ec4\u961f\u5feb\u6377\u8bed5"},CLICK_TEAM_ITEM_6:{eventid:531006,eventName:"\u70b9\u51fb\u7ec4\u961f\u5feb\u6377\u8bed6"},CLICK_TEAM_ITEM_7:{eventid:531007,eventName:"\u70b9\u51fb\u7ec4\u961f\u5feb\u6377\u8bed7"},CLICK_TEAM_ITEM_8:{eventid:531008,eventName:"\u70b9\u51fb\u7ec4\u961f\u5feb\u6377\u8bed8"},CLICK_TEAM_ITEM_9:{eventid:531009,eventName:"\u70b9\u51fb\u7ec4\u961f\u5feb\u6377\u8bed9"},CLICK_TEAM_ITEM_10:{eventid:531010,eventName:"\u70b9\u51fb\u7ec4\u961f\u5feb\u6377\u8bed10"},CLICK_TEAM_ITEM_11:{eventid:531011,eventName:"\u70b9\u51fb\u7ec4\u961f\u5feb\u6377\u8bed11"},CLICK_TEAM_ITEM_12:{eventid:531012,eventName:"\u70b9\u51fb\u7ec4\u961f\u5feb\u6377\u8bed12"},CLICK_TEAM:{eventid:531033,eventName:"\u6309\u4f4f\u8bf4\u8bdd\u6309\u94ae\u5c55\u793a\u6b21\u6570"},CLICK_RECORD:{eventid:531034,eventName:"\u6309\u4f4f\u8bf4\u8bdd\u6309\u94ae\u70b9\u51fb\u6b21\u6570"}},n.FriendMixTeamPointID={BTN_HALL_ENTER_TEAM:{eventid:500101,eventName:"\u5927\u5385\u4e2d\u8fdb\u5165\u597d\u53cb\u7ec4\u961f"},SHOW_TEAM_UI:{eventid:500106,eventName:"\u597d\u53cb\u7ec4\u961f\u754c\u9762\u5c55\u793a"},BTN_JOIN_TEAM:{eventid:500201,eventName:"\u73a9\u5bb6\u4f7f\u7528\u52a0\u5165\u597d\u53cb\u961f\u4f0d\u529f\u80fd"},JOIN_TEAM_SUCCESS_BY_CODE:{eventid:500202,eventName:"\u73a9\u5bb6\u901a\u8fc7\u961f\u4f0d\u7801\u6210\u529f\u52a0\u5165\u597d\u53cb\u961f\u4f0d"},DIRECT_INVITE_SUCCESS:{eventid:500203,eventName:"\u73a9\u5bb6\u4f7f\u7528\u5feb\u6377\u9080\u8bf7\u529f\u80fd\uff08\u6210\u529f\uff09"},DIRECT_INVITE_FAIL:{eventid:500204,eventName:"\u73a9\u5bb6\u4f7f\u7528\u5feb\u6377\u9080\u8bf7\u529f\u80fd\uff08\u5931\u8d25\uff09"},CLICK_INVITE:{eventid:500205,eventName:"\u73a9\u5bb6\u4f7f\u7528\u597d\u53cb\u9080\u8bf7\u529f\u80fd"},JOIN_TEAM_BY_LINK:{eventid:500206,eventName:"\u73a9\u5bb6\u901a\u8fc7\u5206\u4eab\u94fe\u63a5\u5c1d\u8bd5\u52a0\u5165\u961f\u4f0d"},CHANGE_TEAM_FAIL:{eventid:500207,eventName:"\u73a9\u5bb6\u901a\u8fc7\u5206\u4eab\u94fe\u63a5\u5207\u6362\u961f\u4f0d\uff08\u5931\u8d25\uff09"},BACK_TEAM_FAIL:{eventid:500208,eventName:"\u73a9\u5bb6\u901a\u8fc7\u5206\u4eab\u94fe\u63a5\u8fd4\u56de\u961f\u4f0d\uff08\u5931\u8d25\uff09"},CHANGE_TEAM_SUCCESS:{eventid:500209,eventName:"\u73a9\u5bb6\u901a\u8fc7\u5206\u4eab\u94fe\u63a5\u5207\u6362\u961f\u4f0d\uff08\u6210\u529f\uff09"},BACK_TEAM_SUCCESS:{eventid:500210,eventName:"\u73a9\u5bb6\u901a\u8fc7\u5206\u4eab\u94fe\u63a5\u8fd4\u56de\u961f\u4f0d\uff08\u6210\u529f\uff09"},CLICK_SELECT_PLAY_TYPE:{eventid:500301,eventName:"\u961f\u957f\u81ea\u4e3b\u9009\u62e9\u73a9\u6cd5"},DEFAULT_CREATE_PLAY_TYPE:{eventid:500302,eventName:"\u73a9\u5bb6\u9ed8\u8ba4\u9009\u62e9\u73a9\u6cd5"},CLICK_SELECT_FIELD:{eventid:500303,eventName:"\u961f\u957f\u81ea\u4e3b\u9009\u62e9\u573a\u6b21"},TEAMMATE_EXIT:{eventid:500401,eventName:"\u961f\u5458\u73a9\u5bb6\u81ea\u4e3b\u9000\u51fa\u539f\u6709\u961f\u4f0d"},LEADER_EXIT:{eventid:500402,eventName:"\u73a9\u5bb6\u9000\u51fa\u7ec4\u961f\u754c\u9762"},KICK_TEAMMATE:{eventid:500403,eventName:"\u961f\u957f\u73a9\u5bb6\u8e22\u51fa\u961f\u4f0d\u4e2d\u7684\u53e6\u4e00\u4e2a\u73a9\u5bb6"},LEADER_CANCEL_MATCH:{eventid:500501,eventName:"\u961f\u957f\u73a9\u5bb6\u4e2d\u65ad\u5339\u914d"},TEAMMATE_CANCEL_MATCH:{eventid:500502,eventName:"\u961f\u5458\u73a9\u5bb6\u4e2d\u65ad\u5339\u914d"},TEAMMATE_CANCEL_PREPARE:{eventid:500601,eventName:"\u961f\u5458\u73a9\u5bb6\u53d6\u6d88\u51c6\u5907\u72b6\u6001"},TEAMMATE_PREPARE:{eventid:500602,eventName:"\u961f\u5458\u73a9\u5bb6\u8fdb\u5165\u51c6\u5907\u72b6\u6001"},CLICK_START_GAME:{eventid:500701,eventName:"\u6ee1\u5458\u65f6\uff0c\u961f\u957f\u4f7f\u7528\u5f00\u59cb\u6e38\u620f\u529f\u80fd"},SINGLE_CLICK_START:{eventid:500801,eventName:"\u5355\u4eba\u73a9\u5bb6\u5c1d\u8bd5\u5f00\u59cb\u6e38\u620f"},IN_QUEUE_NEED_TIME:{eventid:500802,eventName:"\u7ec4\u961f\u73a9\u5bb6\uff082\u4eba\uff09\u5339\u914d\u6240\u82b1\u7684\u65f6\u95f4"},CONTINUE_NEXT_ROUND_TIME:{eventid:500803,eventName:"\u7ec4\u961f\u73a9\u5bb6\uff082\u4eba\uff09\u5c40\u95f4\u7b49\u5f85\u65f6\u957f\uff08\u684c\u5b50\u672a\u89e3\u6563\uff09"},CONTINUE_NEXT_ROUND_TIME_CHANGE_TABLE:{eventid:500804,eventName:"\u7ec4\u961f\u73a9\u5bb6\uff082\u4eba\uff09\u5c40\u95f4\u7b49\u5f85\u65f6\u957f\uff08\u684c\u5b50\u89e3\u6563\uff09"},CLICK_TEAM_QUICK_START:{eventid:500901,eventName:"\u70b9\u51fb\u5728\u7ebf\u7ec4\u961f"},CLICK_FORCE_AD:{eventid:500902,eventName:"\u70b9\u51fb\u5f3a\u5236\u5e7f\u544a\u56fe"},CLICK_TEAM_REMIND:{eventid:500903,eventName:"\u70b9\u51fb\u50ac\u4fc3"},CLICK_TEAM_QUICK_START_AFTER60:{eventid:500904,eventName:"\u70b9\u51fb\u5feb\u901f\u7ec4\u961f\uff0860s\u672a\u5f00\uff09"},CLICK_TEAM_QUICK_START_DISMISS:{eventid:500905,eventName:"\u70b9\u51fb\u5feb\u901f\u7ec4\u961f\uff08\u961f\u4f0d\u89e3\u6563\uff09"},CLICK_TEAM_QUICK_START_FULL:{eventid:500906,eventName:"\u70b9\u51fb\u5feb\u901f\u7ec4\u961f\uff08\u961f\u4f0d\u5df2\u6ee1\uff09"},LINK_JOIN_FAIL_DISMISS:{eventid:500211,eventName:"\u5361\u7247\u52a0\u5165\u5931\u8d25\uff08\u961f\u4f0d\u89e3\u6563\uff09"},LINK_JOIN_FAIL_FULL:{eventid:500212,eventName:"\u5361\u7247\u52a0\u5165\u5931\u8d25\uff08\u961f\u4f0d\u5df2\u6ee1\uff09"},SHOW_TEAM_UI_NEW:{eventid:502001,eventName:"\u65b0\u7ec4\u961f\u754c\u9762\u66dd\u5149"},SHOW_TEAM_GUIDE_NEW:{eventid:502002,eventName:"\u5185\u5d4c\u5f15\u5bfc\u66dd\u5149"},SHOW_TEAM_AD:{eventid:502003,eventName:"\u7ec4\u961f\u5e7f\u544a\u66dd\u5149"},CLICK_TEAM_AD:{eventid:502004,eventName:"\u70b9\u51fb\u7ec4\u961f\u5e7f\u544a"},CLICK_TEAM_EXIT_NEW:{eventid:502005,eventName:"\u70b9\u51fb\u65b0\u7ec4\u961f\u9000\u51fa"},CLICK_TEAM_REMIND_NEW:{eventid:502006,eventName:"\u70b9\u51fb\u65b0\u7ec4\u961f\u50ac\u4fc3"}},n.MatchTicketSharePointID={SHOW_FREE:{eventid:524001,eventName:"\u514d\u8d39\u9886\u53d6&\u5206\u4eab\u7ffb\u500d\u5f39\u7a97-\u66dd\u5149"},FREE_CLICK_SHARE:{eventid:524002,eventName:"\u514d\u8d39\u9886\u53d6&\u5206\u4eab\u7ffb\u500d\u5f39\u7a97-\u7acb\u5373\u5206\u4eab\u70b9\u51fb"},FREE_CLICK_AWARD:{eventid:524003,eventName:"\u514d\u8d39\u9886\u53d6&\u5206\u4eab\u7ffb\u500d\u5f39\u7a97-\u7acb\u5373\u9886\u53d6\u70b9\u51fb"},SHOW_SHARE:{eventid:524004,eventName:"\u5206\u4eab\u5373\u5f97\u95e8\u7968\u5f39\u7a97-\u66dd\u5149"},SHARE_CLICK_SHARE:{eventid:524005,eventName:"\u5206\u4eab\u5373\u5f97\u95e8\u7968\u5f39\u7a97-\u6309\u94ae\u70b9\u51fb"},SHOW_ASSIST:{eventid:524006,eventName:"\u5206\u4eab\u52a9\u529b\u5f97\u95e8\u7968\u5f39\u7a97-\u66dd\u5149"},ASSIST_CLICK_SHARE:{eventid:524007,eventName:"\u5206\u4eab\u52a9\u529b\u5f97\u95e8\u7968\u5f39\u7a97-\u6309\u94ae\u70b9\u51fb"},SHOW_INVITE:{eventid:524008,eventName:"\u9080\u8bf7\u65b0\u7528\u6237\u5f97\u95e8\u7968\u5f39\u7a97-\u66dd\u5149"},INVITE_CLICK_SHARE:{eventid:524009,eventName:"\u9080\u8bf7\u65b0\u7528\u6237\u5f97\u95e8\u7968\u5f39\u7a97-\u6309\u94ae\u70b9\u51fb"},GOLDEN_TICKET_ADD_CLICK:{eventid:524039,eventName:"\u9876\u90e8\u6ee1\u4eba\u8d5b\u95e8\u7968-\u6309\u94ae\u70b9\u51fb"},WELFARE_TICKET_ADD_CLICK:{eventid:524040,eventName:"\u9876\u90e8\u798f\u5229\u8d5b\u95e8\u7968-\u6309\u94ae\u70b9\u51fb"},EXCHANGE_TICKET_SHOW:{eventid:524041,eventName:"\u95e8\u7968\u5151\u6362\u754c\u9762-\u66dd\u5149"},EXCHANGE_TICKET_CLICK:{eventid:524042,eventName:"\u95e8\u7968\u5151\u6362\u754c\u9762-\u6309\u94ae\u70b9\u51fb"}},n.MatchSignUpSharePointID={SHOW_NORMAL_SIGN_UP:{eventid:524010,eventName:"\u62a5\u540d\u6210\u529f\u666e\u901a\u5206\u4eab-\u66dd\u5149"},NORMAL_SIGN_UP_CLICK_SHARE:{eventid:524011,eventName:"\u62a5\u540d\u6210\u529f\u666e\u901a\u5206\u4eab-\u6309\u94ae\u70b9\u51fb"},SHOW_AWARD_SIGN_UP:{eventid:524012,eventName:"\u62a5\u540d\u6210\u529f\u5956\u52b1\u5f39\u7a97-\u66dd\u5149"},AWARD_SIGN_UP_CLICK_SHARE:{eventid:524013,eventName:"\u62a5\u540d\u6210\u529f\u5956\u52b1\u5206\u4eab-\u6309\u94ae\u70b9\u51fb"}},n.MatchRankSharePointID={SHOW:{eventid:524014,eventName:"\u83b7\u5f97\u540d\u6b21\u5206\u4eab\u66dd\u5149"},CLICK_SHARE:{eventid:524015,eventName:"\u83b7\u5f97\u540d\u6b21\u5206\u4eab-\u6309\u94ae\u70b9\u51fb"}},n.MatchNoRankSharePointID={SHOW:{eventid:524016,eventName:"\u672a\u83b7\u5f97\u540d\u6b21\u5206\u4eab\u66dd\u5149"},CLICK_SHARE:{eventid:524017,eventName:"\u672a\u83b7\u5f97\u540d\u6b21\u5206\u4eab-\u6309\u94ae\u70b9\u51fb"}},n.MatchShareRankAgainPointID={SHOW:{eventid:524043,eventName:"\u518d\u6765\u4e00\u5c40\u6309\u94ae\u66dd\u5149"},CLICK:{eventid:524044,eventName:"\u518d\u6765\u4e00\u5c40\u6309\u94ae\u70b9\u51fb"}},n.MatchSkyFallTicketPointID={SHOW:{eventid:524045,eventName:"\u5929\u964d\u95e8\u7968\u66dd\u5149"},CLICK_AWARD:{eventid:524046,eventName:"\u73a9\u5bb6\u70b9\u51fb\u3010\u9886\u53d6\u5e76\u524d\u5f80\u3011\u6309\u94ae"},CLICK_CLOSE:{eventid:524047,eventName:"\u73a9\u5bb6\u70b9\u51fb\u3010\u5173\u95ed\u3011\u6309\u94ae"}},n.MatchEnterTicketPointID={SHOW:{eventid:524048,eventName:"\u8fdb\u5165\u6bd4\u8d5b\u83b7\u5f97\uff08\u95e8\u7968\uff09"}},n.MatchCreditSharePointID={SHOW_SHARE:{eventid:524018,eventName:"\u4fe1\u8a89\u5206-\u5206\u4eab\u5373\u5f97\u5f39\u7a97\u66dd\u5149"},SHARE_CLICK_SHARE:{eventid:524019,eventName:"\u4fe1\u8a89\u5206-\u5206\u4eab\u5373\u5f97\u5f39\u7a97-\u6309\u94ae\u70b9\u51fb"},SHOW_INVITE:{eventid:524020,eventName:"\u4fe1\u8a89\u5206-\u9080\u8bf7\u597d\u53cb\u5f39\u7a97\u66dd\u5149"},INVITE_CLICK_SHARE:{eventid:524021,eventName:"\u4fe1\u8a89\u5206-\u9080\u8bf7\u597d\u53cb\u5f39\u7a97-\u6309\u94ae\u70b9\u51fb"}},n.MatchGoldenEggPointID={MATCH_CLICK_ICON:{eventid:524022,eventName:"\u9080\u597d\u53cb\u9886\u91d1\u86cb\u5165\u53e3\u70b9\u51fb"},SHOW:{eventid:524023,eventName:"\u9080\u597d\u53cb\u9886\u91d1\u86cb\u4e3b\u9875\u66dd\u5149"},CLICK_INVITE:{eventid:524024,eventName:"\u9080\u597d\u53cb\u9886\u91d1\u86cb-\u7acb\u5373\u9080\u8bf7\u6309\u94ae\u70b9\u51fb"},CLICK_AWARD:{eventid:524025,eventName:"\u9080\u597d\u53cb\u9886\u91d1\u86cb-\u7acb\u5373\u9886\u53d6\u6309\u94ae\u70b9\u51fb"},CLICK_RULE:{eventid:524026,eventName:"\u9080\u597d\u53cb\u9886\u91d1\u86cb-\u6d3b\u52a8\u89c4\u5219\u70b9\u51fb"}},n.MatchShareAssistPointID={SHOW_SUCCESS:{eventid:524027,eventName:"\u52a9\u529b\u6210\u529f\u5f39\u7a97\u66dd\u5149"},SUCCESS_CLICK_BTN:{eventid:524028,eventName:"\u52a9\u529b\u6210\u529f\u5f39\u7a97-\u6309\u94ae\u70b9\u51fb"},SHOW_UP_LIMIT:{eventid:524029,eventName:"\u52a9\u529b\u8fbe\u4e0a\u9650\u5f39\u7a97\u66dd\u5149"},UP_LIMIT_CLICK_BTN:{eventid:524030,eventName:"\u52a9\u529b\u8fbe\u4e0a\u9650\u5f39\u7a97-\u6309\u94ae\u70b9\u51fb"},SHOW_LATE:{eventid:524031,eventName:"\u6765\u665a\u4e86\u5f39\u7a97\u66dd\u5149"},LATE_CLICK_BTN:{eventid:524032,eventName:"\u6765\u665a\u4e86\u5f39\u7a97-\u6309\u94ae\u70b9\u51fb"},SHOW_ASSISTED:{eventid:524033,eventName:"\u5df2\u52a9\u529b\u5f39\u7a97\u66dd\u5149"},ASSISTED_CLICK_BTN:{eventid:524034,eventName:"\u5df2\u52a9\u529b\u5f39\u7a97-\u6309\u94ae\u70b9\u51fb"},SHOW_SELF_FAIL:{eventid:524035,eventName:"\u52a9\u529b\u5931\u8d25\u5f39\u7a97\u66dd\u5149"},SHOW_OVERDUE:{eventid:524036,eventName:"\u52a9\u529b\u5931\u6548\u5f39\u7a97\u66dd\u5149"}},n.MatchPoint={HALL_CLICK_MATCH:{eventid:52e4,eventName:"\u6bd4\u8d5b\u5165\u53e3\u70b9\u51fb"},GOLD_MATCH_HINT_SHOW:{eventid:520001,eventName:"\u91d1\u5e01\u623f\u5185\u5b9a\u65f6\u8d5bbanner\u63d0\u793a-\u5f39\u51fa"},GOLD_MATCH_HINT_CLOSE:{eventid:520002,eventName:"\u91d1\u5e01\u623f\u5185\u5b9a\u65f6\u8d5bbanner\u63d0\u793a-\u70b9\u51fb\u5173\u95ed"},HALL_MATCH_HINT_SHOW:{eventid:520003,eventName:"\u5927\u53853\u5206\u949f\u5f00\u59cb\u63d0\u793a-\u5f39\u51fa\u754c\u9762"},HALL_MATCH_HINT_CLOSE:{eventid:520004,eventName:"\u5927\u53853\u5206\u949f\u5f00\u59cb\u63d0\u793a-\u70b9\u51fb\u5173\u95ed\u6309\u94ae"},HALL_MATCH_HINT_CANCEL:{eventid:520005,eventName:"\u5927\u53853\u5206\u949f\u5f00\u59cb\u63d0\u793a-\u70b9\u51fb\u53d6\u6d88\u62a5\u540d"},HALL_MATCH_HINT_OK:{eventid:520006,eventName:"\u5927\u53853\u5206\u949f\u5f00\u59cb\u63d0\u793a-\u70b9\u51fb\u8fdb\u5165\u6bd4\u8d5b"},MATCH_HINT_SHOW:{eventid:520007,eventName:"\u6bd4\u8d5b\u6a21\u5f0f\u4e2d\u5b9a\u65f6\u8d5b\u62a5\u540d\u63d0\u793a-\u5f39\u51fa"},MATCH_HINT_CLICK:{eventid:520008,eventName:"\u6bd4\u8d5b\u6a21\u5f0f\u4e2d\u5b9a\u65f6\u8d5b\u62a5\u540d\u63d0\u793a-\u70b9\u51fb"},MATCH_EXCHANGE_CLICK:{eventid:520009,eventName:"\u70b9\u51fb\u5151\u8c6a\u793c\u8fdb\u5165\u5151\u8c6a\u793c\u754c\u9762"},MATCH_PLAYER_COUNT_ENTER:{eventid:521001,eventName:"\u6bd4\u8d5b\u62a5\u540d\u5165\u53e3-\u70b9\u51fb"},MATCH_PLAYER_COUNT_ENROLL_CLICK:{eventid:521002,eventName:"\u6bd4\u8d5b\u62a5\u540d\u6309\u94ae\u70b9\u51fb"},MATCH_PLAYER_COUNT_CANCEL_CLCIK:{eventid:521003,eventName:"\u6bd4\u8d5b\u53d6\u6d88\u62a5\u540d\u6309\u94ae\u70b9\u51fb"},MATCH_TIME_ENROLL_HINT_SHOW:{eventid:521004,eventName:"\u5b9a\u65f6\u8d5b\u62a5\u540d\u63d0\u793a\u66dd\u5149"},MATCH_TIME_ENROLL_HINT_OK_CLICK:{eventid:521005,eventName:"\u5b9a\u65f6\u8d5b\u62a5\u540d\u63d0\u793a\u5f39\u7a97\u70b9\u51fb\u3010\u7ee7\u7eed\u62a5\u540d\u3011\u6309\u94ae\u65f6\u4e0a\u629b"},MATCH_TIME_ENROLL_HINT_CANCEL_CLICK:{eventid:521006,eventName:"\u5b9a\u65f6\u8d5b\u62a5\u540d\u63d0\u793a\u5f39\u7a97\u70b9\u51fb\u3010\u6211\u518d\u60f3\u60f3\u3011\u6309\u94ae\u65f6\u4e0a\u629b"},MATCH_PLAYER_ENROLL_HINT_SHOW:{eventid:521007,eventName:"\u6ee1\u4eba\u8d5b\u62a5\u540d\u63d0\u793a\u66dd\u5149"},MATCH_PLAYER_ENROLL_HINT_OK_CLICK:{eventid:521008,eventName:"\u6ee1\u4eba\u8d5b\u62a5\u540d\u63d0\u793a\u5f39\u7a97\u70b9\u51fb\u3010\u7ee7\u7eed\u62a5\u540d\u3011\u6309\u94ae\u65f6\u4e0a\u629b"},MATCH_PLAYER_ENROLL_HINT_CANCEL_CLICK:{eventid:521009,eventName:"\u6ee1\u4eba\u8d5b\u62a5\u540d\u63d0\u793a\u5f39\u7a97\u70b9\u51fb\u3010\u6211\u518d\u60f3\u60f3\u3011\u6309\u94ae\u65f6\u4e0a\u629b"},MATCH_PLAYER_ROUND_HINT_SHOW:{eventid:521010,eventName:"\u6ee1\u4eba\u8d5b\u8f6e\u6b21\u95f4\u5e7f\u64ad\u66dd\u5149\u65f6\u4e0a\u629b"},MATCH_PLAYER_ROUND_HINT_GO:{eventid:521011,eventName:"\u6ee1\u4eba\u8d5b\u8f6e\u6b21\u95f4\u5e7f\u64ad\u3010\u7acb\u5373\u524d\u5f80\u3011\u6309\u94ae\u70b9\u51fb\u65f6\u4e0a\u629b"},MATCH_PLAYER_ROUND_HINT_OK:{eventid:521012,eventName:"\u6ee1\u4eba\u8d5b\u8f6e\u6b21\u95f4\u5e7f\u64ad\u3010\u7acb\u5373\u524d\u5f80\u3011\u4e8c\u6b21\u786e\u8ba4\u3010\u786e\u8ba4\u3011\u6309\u94ae\u70b9\u51fb\u65f6\u4e0a\u629b"},MATCH_PLAYER_ROUND_HINT_CANCEL:{eventid:521013,eventName:"\u6ee1\u4eba\u8d5b\u8f6e\u6b21\u95f4\u5e7f\u64ad\u3010\u7acb\u5373\u524d\u5f80\u3011\u4e8c\u6b21\u786e\u8ba4\u3010\u53d6\u6d88\u3011\u6309\u94ae\u70b9\u51fb\u65f6\u4e0a\u629b"},MATCH_PLAYER_ENROLL_IN_MATCH_SHOW:{eventid:521014,eventName:"{\u6bd4\u8d5b\u8fdb\u884c\u4e2d}\u72b6\u6001\u672a\u7ed3\u675f\u62a5\u540d\u65b0\u6ee1\u4eba\u8d5b\u62a5\u540d\u63d0\u793a\u5f39\u7a97\u66dd\u5149\u65f6\u4e0a\u629b"},MATCH_PLAYER_ENROLL_IN_MATCH_OK:{eventid:521015,eventName:"{\u6bd4\u8d5b\u8fdb\u884c\u4e2d}\u72b6\u6001\u672a\u7ed3\u675f\u62a5\u540d\u65b0\u6ee1\u4eba\u8d5b\u62a5\u540d\u63d0\u793a\u5f39\u7a97\u3010\u786e\u5b9a\u3011\u6309\u94ae\u70b9\u51fb\u65f6\u4e0a\u629b"},MATCH_PLAYER_ENROLL_IN_MATCH_CANCEL:{eventid:521016,eventName:"{\u6bd4\u8d5b\u8fdb\u884c\u4e2d}\u72b6\u6001\u672a\u7ed3\u675f\u62a5\u540d\u65b0\u6ee1\u4eba\u8d5b\u62a5\u540d\u63d0\u793a\u5f39\u7a97\u3010\u53d6\u6d88\u3011\u6309\u94ae\u70b9\u51fb\u65f6\u4e0a\u629b"},MATCH_CHECK_IN_OK_CLICK:{eventid:522001,eventName:"\u70b9\u51fb\u786e\u8ba4\u6309\u94ae"},MATCH_CHECK_IN_OK_AUTO:{eventid:522002,eventName:"\u7b49\u5f855\u79d2\u540e\u81ea\u52a8\u8fdb\u5165"},MATCH_CHECK_IN_CANCEL_CLICK:{eventid:522003,eventName:"\u70b9\u51fb\u9000\u51fa\u6bd4\u8d5b\u786e\u8ba4\u6309\u94ae"},MATCH_HINT_REPLACE:{eventid:522004,eventName:"\u89e6\u53d1\u66ff\u8865\u63d0\u793a\u6b21\u6570"},MATCH_REPLACE_OK_CLICK:{eventid:522005,eventName:"\u70b9\u51fb\u7b49\u5f85\u66ff\u8865\u6309\u94ae\u6b21\u6570"},MATCH_GIVE_UP_MATCH:{eventid:522006,eventName:"\u70b9\u51fb\u9000\u51fa\u6bd4\u8d5b\u6309\u94ae\uff08\u6263\u4fe1\u8a89\u5206\u7684\u754c\u9762\uff09"},MATCH_HINT_TRUST:{eventid:522007,eventName:"\u89e6\u53d1\u6d88\u6781\u6bd4\u8d5b\u63d0\u793a"},MATCH_FREE_SIGN_IN_CLICK:{eventid:524037,eventName:"\u514d\u8d39\u62a5\u540d\u6309\u94ae\u70b9\u51fb"},MATCH_CANCEL_FREE_SIGN_IN_CLICK:{eventid:524038,eventName:"\u514d\u8d39\u62a5\u540d\u540e\u53d6\u6d88\u62a5\u540d"}},n.AnswerAwardPointID={CLICK_ICON:{eventid:709001,eventName:"\u73a9\u5bb6\u70b9\u51fb\u3010\u7b54\u9898\u6709\u5956\u3011\u6d3b\u52a8icon\u89e6\u53d1"},GET_AWARD:{eventid:709002,eventName:"\u73a9\u5bb6\u70b9\u51fb\u3010\u9886\u53d6\u3011\u6309\u94ae\u65f6\u89e6\u53d1"},CLOSE_UI:{eventid:709003,eventName:"\u5bb6\u70b9\u51fb\u3010\u5173\u95ed\u3011\u6309\u94ae\u65f6\u89e6\u53d1"}},n.InviteGiftPointID={SHOW:{eventid:708001,eventName:"\u5c55\u793a\u6d3b\u52a8\u5f39\u7a97"},CLICK_INVITE:{eventid:708002,eventName:"\u70b9\u51fb\u7acb\u5373\u9080\u8bf7"},CLICK_INVITE_GET:{eventid:708003,eventName:"\u70b9\u51fb\u9080\u8bf7\u5956\u52b1\u9886\u53d6"},CLICK_GAME_GET:{eventid:708004,eventName:"\u70b9\u51fb\u6e38\u620f\u5956\u52b1\u9886\u53d6"},CLICK_TASK_GET:{eventid:708005,eventName:"\u70b9\u51fb\u9886\u53d6"}},n.YearBeastPointID={SHOW:{eventid:710001,eventName:"\u5c55\u793a\u5e74\u517d\u6d3b\u52a8\u4e3b\u754c\u9762"},CLICK_TASK:{eventid:710002,eventName:"\u73a9\u5bb6\u70b9\u51fb\u3010\u6bcf\u65e5\u4efb\u52a1\u3011"},CLICK_GAIN_FIRECRACKER:{eventid:710003,eventName:"\u73a9\u5bb6\u70b9\u51fb\u3010\u83b7\u5f97\u97ad\u70ae\u3011"},CLICK_THROW_FIRECRACKER:{eventid:710004,eventName:"\u73a9\u5bb6\u70b9\u51fb\u3010\u4e22\u97ad\u70ae\u3011"},CLICK_THROW_MISSILE:{eventid:710005,eventName:"\u73a9\u5bb6\u70b9\u51fb\u3010\u4e22\u5bfc\u5f39\u3011"},CLICK_MY_AWARD:{eventid:710006,eventName:"\u73a9\u5bb6\u70b9\u51fb\u3010\u6211\u7684\u5956\u52b1\u3011"},CLICK_YEAR_BEAST:{eventid:710007,eventName:"\u73a9\u5bb6\u70b9\u51fb\u3010\u5e74\u517d\u3011"},CLICK_COMPOSE:{eventid:710008,eventName:"\u73a9\u5bb6\u70b9\u51fb\u3010\u5408\u6210\u3011"},CLICK_RULE:{eventid:710009,eventName:"\u73a9\u5bb6\u70b9\u51fb\u6d3b\u52a8\u8bf4\u660e\u3010\u95ee\u53f7\u3011"},CLICK_CLOSE:{eventid:710010,eventName:"\u73a9\u5bb6\u70b9\u51fb\u8fd4\u56de"}},n.MatchGuidePointID={SHOW_LOGIN:{eventid:532001,eventName:"\u767b\u5f55\u6bd4\u8d5b\u5f02\u5f62\u56fe\u66dd\u5149"},CLICK_LOGIN:{eventid:532002,eventName:"\u767b\u5f55\u6bd4\u8d5b\u5f02\u5f62\u56fe\u70b9\u51fb"},SHOW_GAME:{eventid:532003,eventName:"\u5bf9\u5c40\u7ed3\u675f\u6bd4\u8d5b\u5f02\u5f62\u56fe\u66dd\u5149"},CLICK_GAME:{eventid:532004,eventName:"\u5bf9\u5c40\u7ed3\u675f\u6bd4\u8d5b\u5f02\u5f62\u56fe\u70b9\u51fb"}},cc._RF.pop()},{}],DataProps:[function(t,e,n){"use strict";var o;cc._RF.push(e,"6eec3RZS81ARInRwiSAZbg3","DataProps"),Object.defineProperty(n,"__esModule",{value:!0}),n.DataProps=n.PropGoodTypeEnum=n.PropIDEnum=n.PropTypeEnum=void 0;var a,i,r,s=t("./DataRes"),c=t("./DataSpineAni");(function(t){t[t.DIAMOND=0]="DIAMOND",t[t.GOLD=1]="GOLD",t[t.CHARM=2]="CHARM",t[t.SINGLE=3]="SINGLE"})(a=n.PropTypeEnum||(n.PropTypeEnum={})),function(t){t[t.AWARD_TICKET=10010]="AWARD_TICKET",t[t.CHARM_ROSE_RED=10301]="CHARM_ROSE_RED",t[t.CHARM_DIAMOND_PURPLE=10302]="CHARM_DIAMOND_PURPLE",t[t.CHARM_EGG=10303]="CHARM_EGG",t[t.CHARM_TOMATO=10307]="CHARM_TOMATO",t[t.CHARM_ROSE_BLUE=10309]="CHARM_ROSE_BLUE",t[t.CHARM_FIRE_CRACKER=10310]="CHARM_FIRE_CRACKER",t[t.CHARM_MISSILE=101667]="CHARM_MISSILE",t[t.TIME_NOTECARD=3e4]="TIME_NOTECARD",t[t.ONE_DAY_NOTECARD=30001]="ONE_DAY_NOTECARD",t[t.THREE_DAY_NOTECARD=30003]="THREE_DAY_NOTECARD",t[t.SEVEN_DAY_NOTECARD=30007]="SEVEN_DAY_NOTECARD",t[t.THIRTY_DAY_NOTECARD=30030]="THIRTY_DAY_NOTECARD",t[t.TEN_MINUTE_NOTECARD=30110]="TEN_MINUTE_NOTECARD",t[t.TIME_TEAM_NOTECARD=101710]="TIME_TEAM_NOTECARD",t[t.TEAM_ONE_DAY_NOTECARD=101711]="TEAM_ONE_DAY_NOTECARD",t[t.TEAM_SEVEN_DAY_NOTECARD=101712]="TEAM_SEVEN_DAY_NOTECARD",t[t.TEAM_THIRTY_DAY_NOTECARD=101713]="TEAM_THIRTY_DAY_NOTECARD",t[t.PHONE_FEE=101670]="PHONE_FEE",t[t.PHONE_FEE2=101677]="PHONE_FEE2",t[t.PHONE_FEE3=101678]="PHONE_FEE3",t[t.TICKET_GOLDEN_EGG=101679]="TICKET_GOLDEN_EGG",t[t.TICKET_PHONE_FEE=101680]="TICKET_PHONE_FEE",t[t.TICKET_CHAMPION=101681]="TICKET_CHAMPION",t[t.EXCHANGE_GOLDEN_EGG=101682]="EXCHANGE_GOLDEN_EGG",t[t.EXCHANGE_PHONE_FEE_100=101683]="EXCHANGE_PHONE_FEE_100",t[t.EXCHANGE_JDK_200=101734]="EXCHANGE_JDK_200",t[t.EXCHANGE_ENTITY=101684]="EXCHANGE_ENTITY",t[t.NEWYEAR_BIAN_PAO=101694]="NEWYEAR_BIAN_PAO",t[t.NEWYEAR_MISSILE=101695]="NEWYEAR_MISSILE",t[t.NEWYEAR_CARD_XIN=101696]="NEWYEAR_CARD_XIN",t[t.NEWYEAR_CARD_NIAN=101697]="NEWYEAR_CARD_NIAN",t[t.NEWYEAR_CARD_KUAI=101698]="NEWYEAR_CARD_KUAI",t[t.NEWYEAR_CARD_LE=101699]="NEWYEAR_CARD_LE",t[t.EMOJI_ANGRY_CHICK=101700]="EMOJI_ANGRY_CHICK",t[t.EMOJI_APPROVING_CHICK=101701]="EMOJI_APPROVING_CHICK",t[t.EMOJI_PRAY_CHICK=101702]="EMOJI_PRAY_CHICK",t[t.EMOJI_ANGRY_CHICK_FOREVER=101703]="EMOJI_ANGRY_CHICK_FOREVER",t[t.EMOJI_APPROVING_CHICK_FOREVER=101704]="EMOJI_APPROVING_CHICK_FOREVER",t[t.EMOJI_PRAY_CHICK_FOREVER=101705]="EMOJI_PRAY_CHICK_FOREVER"}(i=n.PropIDEnum||(n.PropIDEnum={})),function(t){t.DIAMOND="yb",t.GOLD="sr",t.PROP="prop",t.GIFT="gift",t.JDK="jdk",t.PHONE_FEE="hf"}(r=n.PropGoodTypeEnum||(n.PropGoodTypeEnum={}));var l=((o={}).sr={name:"\u91d1\u5e01",res:s.Res.GOLD,type:a.GOLD},o.sr1={name:"\u91d1\u5e01",res:s.Res.GOLD1,type:a.GOLD},o.sr2={name:"\u91d1\u5e01",res:s.Res.GOLD2,type:a.GOLD},o.sr3={name:"\u91d1\u5e01",res:s.Res.GOLD3,type:a.GOLD},o.sr4={name:"\u91d1\u5e01",res:s.Res.GOLD4,type:a.GOLD},o.sr5={name:"\u91d1\u5e01",res:s.Res.GOLD5,type:a.GOLD},o.sr6={name:"\u91d1\u5e01",res:s.Res.GOLD6,type:a.GOLD},o.sr7={name:"\u91d1\u5e01",res:s.Res.GOLD7,type:a.GOLD},o.sr8={name:"\u91d1\u5e01",res:s.Res.GOLD8,type:a.GOLD},o.yb={name:"\u94bb\u77f3",res:s.Res.DIAMOND,type:a.DIAMOND},o.yb1={name:"\u94bb\u77f3",res:s.Res.DIAMOND1,type:a.DIAMOND},o.yb2={name:"\u94bb\u77f3",res:s.Res.DIAMOND2,type:a.DIAMOND},o.yb3={name:"\u94bb\u77f3",res:s.Res.DIAMOND3,type:a.DIAMOND},o.yb4={name:"\u94bb\u77f3",res:s.Res.DIAMOND4,type:a.DIAMOND},o.yb5={name:"\u94bb\u77f3",res:s.Res.DIAMOND5,type:a.DIAMOND},o.yb6={name:"\u94bb\u77f3",res:s.Res.DIAMOND6,type:a.DIAMOND},o.yb7={name:"\u94bb\u77f3",res:s.Res.DIAMOND7,type:a.DIAMOND},o.ticket1={name:"\u5151\u6362\u5238",res:s.Res.SINGLE_AWARD_TICKE1,type:a.SINGLE},o.ticket2={name:"\u5151\u6362\u5238",res:s.Res.SINGLE_AWARD_TICKE2,type:a.SINGLE},o.ticket3={name:"\u5151\u6362\u5238",res:s.Res.SINGLE_AWARD_TICKE3,type:a.SINGLE},o.ticket4={name:"\u5151\u6362\u5238",res:s.Res.SINGLE_AWARD_TICKE4,type:a.SINGLE},o.phoneFee10={name:"0.1\u5143\u8bdd\u8d39",res:s.Res.PHONE_FEE_10,type:a.SINGLE},o.phoneFee50={name:"0.5\u5143\u8bdd\u8d39",res:s.Res.PHONE_FEE_50,type:a.SINGLE},o.phoneFee1000={name:"10\u5143\u8bdd\u8d39",res:s.Res.PHONE_FEE_1000,type:a.SINGLE},o.phoneFee5000={name:"50\u5143\u8bdd\u8d39",res:s.Res.PHONE_FEE_5000,type:a.SINGLE},o.phoneFee10000={name:"100\u5143\u8bdd\u8d39",res:s.Res.PHONE_FEE_10000,type:a.SINGLE},o.phoneFee20000={name:"200\u5143\u8bdd\u8d39",res:s.Res.PHONE_FEE_20000,type:a.SINGLE},o.phoneFee30000={name:"300\u5143\u8bdd\u8d39",res:s.Res.PHONE_FEE_30000,type:a.SINGLE},o.phoneFee50000={name:"500\u5143\u8bdd\u8d39",res:s.Res.PHONE_FEE_50000,type:a.SINGLE},o.egg1={name:"\u91d1\u86cb",res:s.Res.EXCHANGE_GOLDEN_EGG,type:a.SINGLE},o.egg2={name:"\u91d1\u86cb",res:s.Res.EXCHANGE_GOLDEN_EGG2,type:a.SINGLE},o.egg3={name:"\u91d1\u86cb",res:s.Res.EXCHANGE_GOLDEN_EGGS,type:a.SINGLE},o.jdk={name:"\u4eac\u4e1c\u5361",res:s.Res.JDK_X,type:a.SINGLE},o[i.AWARD_TICKET]={id:i.AWARD_TICKET,name:"\u5151\u6362\u5238",res:s.Res.SINGLE_AWARD_TICKET,type:a.SINGLE},o[i.CHARM_ROSE_RED]={id:i.CHARM_ROSE_RED,name:"\u73ab\u7470",res:s.Res.CHARM_ROSE,type:a.CHARM,buyCoin:1e3,addCharm:1,sort:1},o[i.CHARM_DIAMOND_PURPLE]={id:i.CHARM_DIAMOND_PURPLE,name:"\u7d2b\u8272\u94bb\u77f3",res:s.Res.CHARM_DIAMOND,type:a.CHARM,buyCoin:1e3,addCharm:1,sort:2},o[i.CHARM_ROSE_BLUE]={id:i.CHARM_ROSE_BLUE,name:"\u84dd\u8272\u5996\u59ec",res:s.Res.CHARM_ROSE_BLUE,type:a.CHARM,buyCoin:1e4,addCharm:10,sort:3},o[i.CHARM_EGG]={id:i.CHARM_EGG,name:"\u9e21\u86cb",res:s.Res.CHARM_Egg,type:a.CHARM,buyCoin:1e3,addCharm:-1,sort:4},o[i.CHARM_TOMATO]={id:i.CHARM_TOMATO,name:"\u897f\u7ea2\u67ff",res:s.Res.CHARM_TOMATO,type:a.CHARM,buyCoin:1e3,addCharm:-1,sort:5},o[i.CHARM_FIRE_CRACKER]={id:i.CHARM_FIRE_CRACKER,name:"\u97ad\u70ae",res:s.Res.CHARM_PAO,type:a.CHARM,buyCoin:1e4,addCharm:-10,sort:6},o[i.ONE_DAY_NOTECARD]={id:i.ONE_DAY_NOTECARD,name:"\u8bb0\u724c\u5668(1\u5929)",res:s.Res.SINGLE_NOTECARD,type:a.SINGLE,awardDesc:"\u8bb0\u724c\u5668(1\u5929)"},o[i.THREE_DAY_NOTECARD]={id:i.THREE_DAY_NOTECARD,name:"\u8bb0\u724c\u5668(3\u5929)",res:s.Res.SINGLE_NOTECARD,type:a.SINGLE,awardDesc:"\u8bb0\u724c\u5668(3\u5929)"},o[i.SEVEN_DAY_NOTECARD]={id:i.SEVEN_DAY_NOTECARD,name:"\u8bb0\u724c\u5668(7\u5929)",res:s.Res.SINGLE_NOTECARD,type:a.SINGLE,awardDesc:"\u8bb0\u724c\u5668(7\u5929)"},o[i.THIRTY_DAY_NOTECARD]={id:i.THIRTY_DAY_NOTECARD,name:"\u8bb0\u724c\u5668(30\u5929)",res:s.Res.SINGLE_NOTECARD,type:a.SINGLE,awardDesc:"\u8bb0\u724c\u5668(30\u5929)"},o[i.TEN_MINUTE_NOTECARD]={id:i.TEN_MINUTE_NOTECARD,name:"\u8bb0\u724c\u5668(10\u5206\u949f)",res:s.Res.SINGLE_NOTECARD,type:a.SINGLE,awardDesc:"\u8bb0\u724c\u5668(10\u5206\u949f)"},o[i.TEAM_ONE_DAY_NOTECARD]={id:i.TEAM_ONE_DAY_NOTECARD,name:"\u7ec4\u961f\u8bb0\u724c\u5668(1\u5929)",originPrice:2,res:s.Res.SINGLE_TEAM_NOTECARD,type:a.SINGLE,awardDesc:"\u7ec4\u961f\u8bb0\u724c\u5668(1\u5929)"},o[i.TEAM_SEVEN_DAY_NOTECARD]={id:i.TEAM_SEVEN_DAY_NOTECARD,name:"\u7ec4\u961f\u8bb0\u724c\u5668(7\u5929)",originPrice:14,res:s.Res.SINGLE_TEAM_NOTECARD,type:a.SINGLE,awardDesc:"\u7ec4\u961f\u8bb0\u724c\u5668(7\u5929)"},o[i.TEAM_THIRTY_DAY_NOTECARD]={id:i.TEAM_THIRTY_DAY_NOTECARD,name:"\u7ec4\u961f\u8bb0\u724c\u5668(30\u5929)",originPrice:60,res:s.Res.SINGLE_TEAM_NOTECARD,type:a.SINGLE,awardDesc:"\u7ec4\u961f\u8bb0\u724c\u5668(30\u5929)"},o[i.PHONE_FEE]={id:i.PHONE_FEE,name:"\u8bdd\u8d39",type:a.SINGLE,res:s.Res.CHARM_DIAMOND},o[i.EXCHANGE_GOLDEN_EGG]={id:i.EXCHANGE_GOLDEN_EGG,name:"\u91d1\u86cb",type:a.SINGLE,res:s.Res.EXCHANGE_GOLDEN_EGG},o[i.EXCHANGE_PHONE_FEE_100]={id:i.EXCHANGE_PHONE_FEE_100,name:"100\u5143\u8bdd\u8d39",type:a.SINGLE,res:s.Res.PHONE_FEE_10000},o[i.EXCHANGE_JDK_200]={id:i.EXCHANGE_JDK_200,name:"200\u5143\u4eac\u4e1c\u5361",type:a.SINGLE,res:s.Res.JDK_200,goodType:r.JDK,propValue:200},o[i.EXCHANGE_ENTITY]={id:i.EXCHANGE_ENTITY,name:"\u5b9e\u7269",type:a.SINGLE},o[i.TICKET_GOLDEN_EGG]={id:i.TICKET_GOLDEN_EGG,name:"\u6ee1\u4eba\u8d5b\u95e8\u7968",type:a.SINGLE,res:s.Res.GOLDEN_EGG_TICKET1},o[i.TICKET_PHONE_FEE]={id:i.TICKET_PHONE_FEE,name:"\u798f\u5229\u8d5b\u95e8\u7968",type:a.SINGLE,res:s.Res.WELFARE_TICKET1},o[i.TICKET_CHAMPION]={id:i.TICKET_CHAMPION,name:"\u51a0\u519b\u8d5b\u95e8\u7968",type:a.SINGLE,res:s.Res.WELFARE_TICKET1},o[i.NEWYEAR_BIAN_PAO]={id:i.NEWYEAR_BIAN_PAO,name:"\u97ad\u70ae",type:a.SINGLE,res:s.Res.NEWYEAR_BIAN_PAO},o[i.NEWYEAR_MISSILE]={id:i.NEWYEAR_MISSILE,name:"\u5bfc\u5f39",type:a.SINGLE,res:s.Res.NEWYEAR_MISSILE},o[i.NEWYEAR_CARD_XIN]={id:i.NEWYEAR_CARD_XIN,name:"\u65b0",type:a.SINGLE,res:s.Res.NEWYEAR_CARD_XIN},o[i.NEWYEAR_CARD_NIAN]={id:i.NEWYEAR_CARD_NIAN,name:"\u5e74",type:a.SINGLE,res:s.Res.NEWYEAR_CARD_NIAN},o[i.NEWYEAR_CARD_KUAI]={id:i.NEWYEAR_CARD_KUAI,name:"\u5feb",type:a.SINGLE,res:s.Res.NEWYEAR_CARD_KUAI},o[i.NEWYEAR_CARD_LE]={id:i.NEWYEAR_CARD_LE,name:"\u4e50",type:a.SINGLE,res:s.Res.NEWYEAR_CARD_LE},o[i.EMOJI_ANGRY_CHICK]={id:i.EMOJI_ANGRY_CHICK,name:"\u6124\u6012\u7684\u5c0f\u9e21",type:a.SINGLE,ani:{path:c.DataSpineAniPath.ANI_LIMIT_EMOJI,name:"fennu"},res:s.Res.EMOJI_ANGRY_CHICK},o[i.EMOJI_APPROVING_CHICK]={id:i.EMOJI_ANGRY_CHICK,name:"\u70b9\u8d5e\u7684\u5c0f\u9e21",type:a.SINGLE,ani:{path:c.DataSpineAniPath.ANI_LIMIT_EMOJI,name:"aimu"},res:s.Res.EMOJI_APPROVING_CHICK},o[i.EMOJI_PRAY_CHICK]={id:i.EMOJI_ANGRY_CHICK,name:"\u7948\u798f\u7684\u5c0f\u9e21",type:a.SINGLE,ani:{path:c.DataSpineAniPath.ANI_LIMIT_EMOJI,name:"shaoxiang"},res:s.Res.EMOJI_PRAY_CHICK},o[i.EMOJI_ANGRY_CHICK_FOREVER]={id:i.EMOJI_ANGRY_CHICK,name:"\u6124\u6012\u7684\u5c0f\u9e21(\u6c38\u4e45)",type:a.SINGLE,ani:{path:c.DataSpineAniPath.ANI_LIMIT_EMOJI,name:"fennu"},res:s.Res.EMOJI_ANGRY_CHICK,awardDesc:"\u6124\u6012\u5c0f\u9e21(\u6c38\u4e45)"},o[i.EMOJI_APPROVING_CHICK_FOREVER]={id:i.EMOJI_ANGRY_CHICK,name:"\u70b9\u8d5e\u7684\u5c0f\u9e21(\u6c38\u4e45)",type:a.SINGLE,ani:{path:c.DataSpineAniPath.ANI_LIMIT_EMOJI,name:"aimu"},res:s.Res.EMOJI_APPROVING_CHICK,awardDesc:"\u70b9\u8d5e\u5c0f\u9e21(\u6c38\u4e45)"},o[i.EMOJI_PRAY_CHICK_FOREVER]={id:i.EMOJI_ANGRY_CHICK,name:"\u7948\u798f\u7684\u5c0f\u9e21(\u6c38\u4e45)",type:a.SINGLE,ani:{path:c.DataSpineAniPath.ANI_LIMIT_EMOJI,name:"shaoxiang"},res:s.Res.EMOJI_PRAY_CHICK,awardDesc:"\u7948\u798f\u5c0f\u9e21(\u6c38\u4e45)"},o),u=function(){function t(){}return Object.defineProperty(t,"instance",{get:function(){return null===this._instance&&(this._instance=new t,this._instance.initCharmPropSortArr()),this._instance},enumerable:!1,configurable:!0}),t.prototype.getPropList=function(){return l},t.prototype.getPropConfigByID=function(t){var e=l[t]||null;if(e)return e;console.error("DataProp.getPropConfigByID.id\u4e0d\u5b58\u5728:",t)},t.prototype.getPropName=function(t){var e=l[t]||null;if(e)return e.name;console.error("DataProp.getPropName.id\u4e0d\u5b58\u5728:",t)},t.prototype.getPropRes=function(t){var e=l[t]||null;if(e)return e.res;console.error("DataProp.getPropRes.id\u4e0d\u5b58\u5728:",t)},t.prototype.getPropType=function(t){var e=l[t]||null;if(e)return e.type;console.error("DataProp.getPropType.id\u4e0d\u5b58\u5728:",t)},t.prototype.initCharmPropSortArr=function(){var t=[];for(var e in l){var n=l[e];a.CHARM===n.type&&t.push(n)}t.sort(function(t,e){return t.sort-e.sort}),this._propCharmArr=t},t.prototype.getCharmPropCount=function(){return this._propCharmArr.length},t.prototype.getCharmPropConfigInfoByIndex=function(t){var e=this._propCharmArr;if(t<e.length)return e[t];console.error("\u9b45\u529b\u9053\u5177index\u4e0d\u5b58\u5728:",t)},t.prototype.getPropConfig=function(t,e){var n=this.getPropConfigByID(t);if(!n)return null;if("number"==typeof t&&this.isPhoneFeePropID(t)){var o=this.getPropList()["phoneFee"+e];return o?(n.res=o.res,n.awardDesc=o.name,n.count=1,n):null}return n.count=e,n},t.prototype.isAwardTicketPropID=function(t){return i.AWARD_TICKET===t},t.prototype.isPhoneFeePropID=function(t){return i.PHONE_FEE===t},t.prototype.isGoldenEggPropID=function(t){return i.EXCHANGE_GOLDEN_EGG===t},t.prototype.is100PhoneFeePropID=function(t){return i.EXCHANGE_PHONE_FEE_100===t},t.prototype.isJDKPropID=function(t){if(isNaN(t))return!1;var e=this.getPropConfigByID(t);return e&&e.goodType===r.JDK},t.prototype.is200JDKPropID=function(t){return i.EXCHANGE_JDK_200===t},t.prototype.isTeamNoteCardPropID=function(t){return i.TEAM_ONE_DAY_NOTECARD===t||i.TEAM_SEVEN_DAY_NOTECARD===t||i.TEAM_THIRTY_DAY_NOTECARD===t},t.prototype.getPropOriginPrice=function(t){return this.getPropConfigByID(t).originPrice},t.prototype.getPropAni=function(t){var e=l[t]||null;if(e)return e.ani;console.error("DataProp.id\u4e0d\u5b58\u5728:",t)},t._instance=null,t}();n.DataProps=u,cc._RF.pop()},{"./DataRes":"DataRes","./DataSpineAni":"DataSpineAni"}],DataRes:[function(t,e,n){"use strict";cc._RF.push(e,"c9495A4s+BI85APTLEduD6Y","DataRes"),Object.defineProperty(n,"__esModule",{value:!0}),n.Res=void 0,n.Res={DIAMOND:"img_diamond",DIAMOND1:"img_diamond_1",DIAMOND2:"img_diamond_2",DIAMOND3:"img_diamond_3",DIAMOND4:"img_diamond_4",DIAMOND5:"img_diamond_5",DIAMOND6:"img_diamond_6",DIAMOND7:"img_diamond_7",GOLD:"img_gold",GOLD1:"img_gold_1",GOLD2:"img_gold_2",GOLD3:"img_gold_3",GOLD4:"img_gold_4",GOLD5:"img_gold_5",GOLD6:"img_gold_6",GOLD7:"img_gold_7",GOLD8:"img_gold_8",CHARM_DIAMOND:"img_charm_diamond",CHARM_Egg:"img_charm_egg",CHARM_PAO:"img_charm_pao",CHARM_ROSE:"img_charm_rose",CHARM_ROSE_BLUE:"img_charm_roseb",CHARM_TOMATO:"img_charm_tomato",SINGLE_AWARD_TICKET:"img_award_ticket",SINGLE_AWARD_TICKE1:"img_ticket_1",SINGLE_AWARD_TICKE2:"img_ticket_2",SINGLE_AWARD_TICKE3:"img_ticket_3",SINGLE_AWARD_TICKE4:"img_ticket_4",SINGLE_NOTECARD:"img_jipaiqi",SINGLE_TEAM_NOTECARD:"img_jipaiqi2",PHONE_FEE_10:"phoneFee_0.1",PHONE_FEE_50:"phoneFee_0.5",PHONE_FEE_1000:"phoneFee_10",PHONE_FEE_5000:"phoneFee_50",PHONE_FEE_10000:"phoneFee_100",PHONE_FEE_20000:"phoneFee_200",PHONE_FEE_30000:"phoneFee_300",PHONE_FEE_50000:"phoneFee_500",JDK_X:"jdk_x",JDK_10:"jdk_10",JDK_20:"jdk_20",JDK_100:"jdk_100",JDK_200:"jdk_200",EXCHANGE_GOLDEN_EGG:"img_golden_egg",EXCHANGE_GOLDEN_EGG2:"img_golden_egg2",EXCHANGE_GOLDEN_EGGS:"img_golden_eggs",GOLDEN_EGG_TICKET1:"img_ticket_egg",GOLDEN_EGG_TICKET2:"img_ticket_egg2",GOLDEN_EGG_TICKET3:"img_ticket_egg3",WELFARE_TICKET1:"img_ticket_welfare",WELFARE_TICKET2:"img_ticket_welfare2",WELFARE_TICKET3:"img_ticket_welfare3",NEWYEAR_BIAN_PAO:"img_firecracker",NEWYEAR_MISSILE:"img_missile",NEWYEAR_CARD_XIN:"img_card_xin",NEWYEAR_CARD_NIAN:"img_card_nian",NEWYEAR_CARD_KUAI:"img_card_kuai",NEWYEAR_CARD_LE:"img_card_le",EMOJI_ANGRY_CHICK:"img_emoji_angry_chick",EMOJI_APPROVING_CHICK:"img_emoji_approving_chick",EMOJI_PRAY_CHICK:"img_emoji_pray_chick"},cc._RF.pop()},{}],DataScript:[function(t,e,n){"use strict";var o;cc._RF.push(e,"9e9c0tmwedDmo4K8syKRq+U","DataScript"),Object.defineProperty(n,"__esModule",{value:!0}),n.MatchIMType=n.DataScript=void 0,function(t){t[t.SYNC_WEALTH=4]="SYNC_WEALTH",t[t.SYNC_CREDIT=11]="SYNC_CREDIT",t[t.SYNC_MATCH=12]="SYNC_MATCH",t[t.SYNC_MATCH_PROP=13]="SYNC_MATCH_PROP",t[t.SYNC_MATCH_INFO=14]="SYNC_MATCH_INFO",t[t.SYNC_CHANNEL=2e3]="SYNC_CHANNEL",t[t.SHARE_AWARD=4001]="SHARE_AWARD",t[t.LINK_ENTER_AWARD=4002]="LINK_ENTER_AWARD",t[t.SYNC_OPENID=4003]="SYNC_OPENID",t[t.VIDEO_AD=4004]="VIDEO_AD",t[t.BANKRUPT_AWARD=4005]="BANKRUPT_AWARD",t[t.BIND_WECHAT_INFO=4006]="BIND_WECHAT_INFO",t[t.BIGCARD_SHARE=4007]="BIGCARD_SHARE",t[t.GAME_MOREWIN=4009]="GAME_MOREWIN",t[t.SIGN_IN_AWARD=4011]="SIGN_IN_AWARD",t[t.LUCKY_TURN_TABLE=4014]="LUCKY_TURN_TABLE",t[t.RECORD_SHARE_IN=4015]="RECORD_SHARE_IN",t[t.ACTIVITY_CONFIG=6204]="ACTIVITY_CONFIG",t[t.TEN_YEAR_ACTIVITY=6208]="TEN_YEAR_ACTIVITY",t[t.TEN_YEAR_BOX=6209]="TEN_YEAR_BOX",t[t.PASS_LEVEL_TASK=6210]="PASS_LEVEL_TASK",t[t.MEITUAN_INFO=6213]="MEITUAN_INFO",t[t.GAME_MULT_TASK=6217]="GAME_MULT_TASK",t[t.GET_GAME_ACHIEVEMENT=6238]="GET_GAME_ACHIEVEMENT",t[t.WX_ACTIVITY_ID=6239]="WX_ACTIVITY_ID",t[t.FRIEND_TEAM_RUSH=6241]="FRIEND_TEAM_RUSH",t[t.REQ_POP_QUESTIONNAIRE=6244]="REQ_POP_QUESTIONNAIRE",t[t.MATCH_SHARE=6246]="MATCH_SHARE",t[t.QUESTIONNAIRE_NEW=6249]="QUESTIONNAIRE_NEW",t[t.YEAR_BEAST=6250]="YEAR_BEAST",t[t.YEAR_BEAST_TASK=6251]="YEAR_BEAST_TASK",t[t.INVITE_GIFT=6252]="INVITE_GIFT",t[t.MATCH=8100]="MATCH"}(o||(o={})),n.DataScript={syncWealth:{id:o.SYNC_WEALTH},syncCredit:{id:o.SYNC_CREDIT},syncMatchProp:{id:o.SYNC_MATCH_PROP},syncMatchInfo:{id:o.SYNC_MATCH_INFO},channelInfo:{id:o.SYNC_CHANNEL,func:{setClientInfo:"set_clientinfo"}},hallShareAward:{id:o.SHARE_AWARD,func:{query:1,addShare:2,getJoinAward:3}},linkEnterAward:{id:o.LINK_ENTER_AWARD,func:{getCollectAward:1,getOaAward:2}},syncOpenID:{id:o.SYNC_OPENID,func:{query:1}},videoAd:{id:o.VIDEO_AD,func:{query:1,get:2}},bankruptAward:{id:o.BANKRUPT_AWARD,func:{query:1,getLowAward:2,getBankruptAward:3}},bindWechatInfo:{id:o.BIND_WECHAT_INFO},bigCardShare:{id:o.BIGCARD_SHARE,func:{getCfg:1,getMaxGold:2,getMultiple:3}},moreWin:{id:o.GAME_MOREWIN,file:"lowLoseOrMoreWin",func:{reqGetAward:1}},signIn:{id:o.SIGN_IN_AWARD,func:{queryActivity:1,getNormalAward:2,getSubscribeAward:3,getShareOrResignAward:4}},luckyTurnTable:{id:o.LUCKY_TURN_TABLE,func:{query:1,getFirstAward:2,getAfterAward:3}},activityConfig:{id:o.ACTIVITY_CONFIG,func:{query:"getActivityConfig"}},tenYearActivity:{id:o.TEN_YEAR_ACTIVITY,func:{query:"reqQueryTenYearActInfo",getAward:"reqGetTenYearActAward"}},tenYearBox:{id:o.TEN_YEAR_BOX,func:{query:"reqQueryTenYearActBox2"}},passLevelTask:{id:o.PASS_LEVEL_TASK,func:{query:"reqPassLevelTaskInfo",get:"reqGetPassLevelTaskAward"}},meiTuanInfo:{id:o.MEITUAN_INFO,func:{query:"getMTData"}},gameMultTask:{id:o.GAME_MULT_TASK,func:{query:"reqQueryDoublePlayInfo",get:"reqGetDoublePlayAward"}},getGameAchievement:{id:o.GET_GAME_ACHIEVEMENT,func:{query:"GetGameAchievement"}},wxActivityId:{id:o.WX_ACTIVITY_ID,func:{query:"getActivityID"}},FriendTeamRush:{id:o.FRIEND_TEAM_RUSH,func:{openID:"reqGetFriendOpenID"}},ReqPopQuestionnaire:{id:o.REQ_POP_QUESTIONNAIRE,func:{query:"reqGetUserQuestion",finish:"reqFinishUserQuestion"}},Match:{id:o.MATCH,func:{query:"reqGetMatchList",getMatchConfig:"reqGetMatchConfig",reportLog:"reqMatchLogExchange",getLog:"reqMatchGetLogExchange",endInfo:"reqGetMatchEndInfo",getHead:"reqGetHeadUrl",getMatchSubid:"reqMatchGetSubid"}},MatchShare:{id:o.MATCH_SHARE,func:{config:"reqMatchShareRuleData",query:"reqMatchShareDatas",award:"reqMatchShareAwards",assist:"reqTriggerFriendHelpShare",invite:"reqTriggerNewUserShare",goldenEggQuery:"reqColletGoldEggRuleData",goldenEggAward:"reqCollectGoldEggAwards",goldenEggInvite:"reqTriggerCollectEggNewUser",getSignInType:"reqMatchSignUpType"}},QuestionnaireNew:{id:o.QUESTIONNAIRE_NEW,func:{query:"reqGetUserQuestion",finish:"reqFinishUserQuestion"}},InviteGift:{id:o.INVITE_GIFT,func:{info:"reqGroupGiftRuleData",invite:"reqGroupGiftInviteNewUser",getTaskAward:"reqGroupGiftGetTaskAwards",getPlayerAward:"reqGroupGiftGetPlayerAwards"}},YearBeast:{id:o.YEAR_BEAST,func:{query:"reqYearBeastRuleData",record:"reqYearBeastDropItemRecord",attack:"reqAttackYearBeast",compose:"reqMakeGreatGreetings"}},YearBeastTask:{id:o.YEAR_BEAST_TASK,func:{task:"reqGetYearBeastTaskInfo",getAward:"reqGetYearBeastTaskAward"}}},n.MatchIMType={ELIMINATED:1},cc._RF.pop()},{}],DataSound:[function(t,e,n){"use strict";cc._RF.push(e,"d4576nOmiND7K4i4eataJpY","DataSound"),Object.defineProperty(n,"__esModule",{value:!0}),n.DataSound=n.GameSoundTypeEnum=n.SexEnum=n.SoundTypeEnum=void 0;var o,a,i,r=t("./DataLocalStorageKey");(function(t){t[t.BUTTON_CLICK=0]="BUTTON_CLICK"})(o=n.SoundTypeEnum||(n.SoundTypeEnum={})),function(t){t[t.FEMALE=0]="FEMALE",t[t.MALE=1]="MALE"}(a=n.SexEnum||(n.SexEnum={})),function(t){t[t.EFFECT_1_2=0]="EFFECT_1_2",t[t.EFFECT_1_3=1]="EFFECT_1_3",t[t.EFFECT_1_4=2]="EFFECT_1_4",t[t.EFFECT_1_5=3]="EFFECT_1_5",t[t.EFFECT_1_6=4]="EFFECT_1_6",t[t.EFFECT_1_7=5]="EFFECT_1_7",t[t.EFFECT_1_8=6]="EFFECT_1_8",t[t.EFFECT_1_9=7]="EFFECT_1_9",t[t.EFFECT_1_10=8]="EFFECT_1_10",t[t.EFFECT_1_11=9]="EFFECT_1_11",t[t.EFFECT_1_12=10]="EFFECT_1_12",t[t.EFFECT_1_13=11]="EFFECT_1_13",t[t.EFFECT_1_14=12]="EFFECT_1_14",t[t.EFFECT_1_15=13]="EFFECT_1_15",t[t.EFFECT_1_16=14]="EFFECT_1_16",t[t.EFFECT_2_2=15]="EFFECT_2_2",t[t.EFFECT_2_3=16]="EFFECT_2_3",t[t.EFFECT_2_4=17]="EFFECT_2_4",t[t.EFFECT_2_5=18]="EFFECT_2_5",t[t.EFFECT_2_6=19]="EFFECT_2_6",t[t.EFFECT_2_7=20]="EFFECT_2_7",t[t.EFFECT_2_8=21]="EFFECT_2_8",t[t.EFFECT_2_9=22]="EFFECT_2_9",t[t.EFFECT_2_10=23]="EFFECT_2_10",t[t.EFFECT_2_11=24]="EFFECT_2_11",t[t.EFFECT_2_12=25]="EFFECT_2_12",t[t.EFFECT_2_13=26]="EFFECT_2_13",t[t.EFFECT_2_14=27]="EFFECT_2_14",t[t.EFFECT_3_LIANDUI=28]="EFFECT_3_LIANDUI",t[t.EFFECT_GANGBAN=29]="EFFECT_GANGBAN",t[t.EFFECT_3_ZHANG=30]="EFFECT_3_ZHANG",t[t.EFFECT_SHUNZI=31]="EFFECT_SHUNZI",t[t.EFFECT_3DAI_2=32]="EFFECT_3DAI_2",t[t.EFFECT_THS=33]="EFFECT_THS",t[t.EFFECT_COMB_1=34]="EFFECT_COMB_1",t[t.EFFECT_COM_2=35]="EFFECT_COM_2",t[t.EFFECT_THS_ACT=36]="EFFECT_THS_ACT",t[t.EFFECT_WANG_ZHA_ACT=37]="EFFECT_WANG_ZHA_ACT",t[t.EFFECT_BOMB_ACT=38]="EFFECT_BOMB_ACT",t[t.EFFECT_WIN_ACT=39]="EFFECT_WIN_ACT",t[t.EFFECT_LOSE_ACT=40]="EFFECT_LOSE_ACT",t[t.EFFECT_OUT_CARD=41]="EFFECT_OUT_CARD",t[t.EFFECT_PASS_ACT=42]="EFFECT_PASS_ACT",t[t.EFFECT_CHAT_ACT=43]="EFFECT_CHAT_ACT",t[t.EFFECT_START=44]="EFFECT_START",t[t.EFFECT_CLOCK=45]="EFFECT_CLOCK",t[t.EFFECT_10301=46]="EFFECT_10301",t[t.EFFECT_10302=47]="EFFECT_10302",t[t.EFFECT_10309=48]="EFFECT_10309",t[t.EFFECT_10303=49]="EFFECT_10303",t[t.EFFECT_10307=50]="EFFECT_10307",t[t.EFFECT_10310=51]="EFFECT_10310"}(i=n.GameSoundTypeEnum||(n.GameSoundTypeEnum={}));var s=function(){function t(){}return t.getLobbyBgm=function(){return"bgm/lobby/"+this.LobbyBgm},t.getSoundUrl=function(t){var e=this.getSoundName(t);return e?"bgm/common/"+e:null},t.getSoundName=function(t){var e="";switch(t){case o.BUTTON_CLICK:e="buttonClick"}return e},t.setDubbingSex=function(t){localStorage.setItem(""+r.LocalStorageKey.DUBBING_SEX,JSON.stringify(t))},t.isModifiedDubbingSex=function(){return null!==JSON.parse(localStorage.getItem(""+r.LocalStorageKey.DUBBING_SEX)||null)},t.getDubbingSex=function(t){var e=JSON.parse(localStorage.getItem(""+r.LocalStorageKey.DUBBING_SEX)||null);return null===e?t:Number(e)},t.getGameSoundUrl=function(t,e){e=e||a.FEMALE;var n=this.getGameSoundName(t,e);return n?"bgm/game/"+n:null},t.getGameSoundName=function(t,e){var n="";switch(t){case i.EFFECT_1_2:n=e===a.FEMALE?"Women/":"Men/",n+="2";break;case i.EFFECT_1_3:n=e===a.FEMALE?"Women/":"Men/",n+="3";break;case i.EFFECT_1_4:n=e===a.FEMALE?"Women/":"Men/",n+="4";break;case i.EFFECT_1_5:n=e===a.FEMALE?"Women/":"Men/",n+="5";break;case i.EFFECT_1_6:n=e===a.FEMALE?"Women/":"Men/",n+="6";break;case i.EFFECT_1_7:n=e===a.FEMALE?"Women/":"Men/",n+="7";break;case i.EFFECT_1_8:n=e===a.FEMALE?"Women/":"Men/",n+="8";break;case i.EFFECT_1_9:n=e===a.FEMALE?"Women/":"Men/",n+="9";break;case i.EFFECT_1_10:n=e===a.FEMALE?"Women/":"Men/",n+="10";break;case i.EFFECT_1_11:n=e===a.FEMALE?"Women/":"Men/",n+="11";break;case i.EFFECT_1_12:n=e===a.FEMALE?"Women/":"Men/",n+="12";break;case i.EFFECT_1_13:n=e===a.FEMALE?"Women/":"Men/",n+="13";break;case i.EFFECT_1_14:n=e===a.FEMALE?"Women/":"Men/",n+="14";break;case i.EFFECT_1_15:n=e===a.FEMALE?"Women/":"Men/",n+="15";break;case i.EFFECT_1_16:n=e===a.FEMALE?"Women/":"Men/",n+="16";break;case i.EFFECT_2_2:n=e===a.FEMALE?"Women/":"Men/",n+="22";break;case i.EFFECT_2_3:n=e===a.FEMALE?"Women/":"Men/",n+="33";break;case i.EFFECT_2_4:n=e===a.FEMALE?"Women/":"Men/",n+="44";break;case i.EFFECT_2_5:n=e===a.FEMALE?"Women/":"Men/",n+="55";break;case i.EFFECT_2_6:n=e===a.FEMALE?"Women/":"Men/",n+="66";break;case i.EFFECT_2_7:n=e===a.FEMALE?"Women/":"Men/",n+="77";break;case i.EFFECT_2_8:n=e===a.FEMALE?"Women/":"Men/",n+="88";break;case i.EFFECT_2_9:n=e===a.FEMALE?"Women/":"Men/",n+="99";break;case i.EFFECT_2_10:n=e===a.FEMALE?"Women/":"Men/",n+="1010";break;case i.EFFECT_2_11:n=e===a.FEMALE?"Women/":"Men/",n+="1111";break;case i.EFFECT_2_12:n=e===a.FEMALE?"Women/":"Men/",n+="1212";break;case i.EFFECT_2_13:n=e===a.FEMALE?"Women/":"Men/",n+="1313";break;case i.EFFECT_2_14:n=e===a.FEMALE?"Women/":"Men/",n+="1414";break;case i.EFFECT_3_LIANDUI:n=e===a.FEMALE?"Women/":"Men/",n+="duiduishun";break;case i.EFFECT_GANGBAN:n=e===a.FEMALE?"Women/":"Men/",n+="gangban";break;case i.EFFECT_3_ZHANG:n=e===a.FEMALE?"Women/":"Men/",n+="sanzhang";break;case i.EFFECT_SHUNZI:n=e===a.FEMALE?"Women/":"Men/",n+="shunzi";break;case i.EFFECT_3DAI_2:n=e===a.FEMALE?"Women/":"Men/",n+="three_two";break;case i.EFFECT_THS:n=e===a.FEMALE?"Women/":"Men/",n+="tonghuashun";break;case i.EFFECT_COMB_1:n=e===a.FEMALE?"Women/":"Men/",n+="bombs";break;case i.EFFECT_THS_ACT:n="TongHuaShunAct";break;case i.EFFECT_WANG_ZHA_ACT:n="SiWangAct";break;case i.EFFECT_BOMB_ACT:n="BombAct";break;case i.EFFECT_WIN_ACT:n="sndwin";break;case i.EFFECT_LOSE_ACT:n="sndlost";break;case i.EFFECT_OUT_CARD:n="Out";break;case i.EFFECT_PASS_ACT:n="pass";break;case i.EFFECT_CHAT_ACT:n="gamechat";break;case i.EFFECT_START:n="start";break;case i.EFFECT_CLOCK:n="Clock";break;case i.EFFECT_10301:n="charm/huahua";break;case i.EFFECT_10302:n="charm/zuanshi";break;case i.EFFECT_10309:n="charm/yaoji";break;case i.EFFECT_10303:n="charm/egg";break;case i.EFFECT_10307:n="charm/xihsh";break;case i.EFFECT_10310:n="charm/bianpao"}return n},t.LobbyBgm="bgm_lobby01",t}();n.DataSound=s,cc._RF.pop()},{"./DataLocalStorageKey":"DataLocalStorageKey"}],DataSpineAni:[function(t,e,n){"use strict";cc._RF.push(e,"de119RDJjVINph4btpeF4zx","DataSpineAni"),Object.defineProperty(n,"__esModule",{value:!0}),n.DataSpineAniPath=void 0,function(t){t.ANI_AWARD_GXHD="effect/gxhd/ANI_GXHD",t.ANI_BTN_YELLOW="effect/Common/Ani_BtnYellow",t.ANI_BTN_YELLOW2="effect/Common/Ani_BtnYellow2",t.ANI_GUIDE_FINGER="effect/NewPlayerGift/Ani_FingerClick",t.ANI_PASSLEVEL_TASK="effect/Game/PassLevelTask/Ani_PassLevelTask",t.ANI_ENTRANCE_PARTICLE="effect/IconParticle/Ani_EntranceParticle",t.ANI_BTN_START="effect/Hall/Ani_BtnStart",t.Ani_ActivityShare="effect/ActivityShare/Ani_ActivityShare",t.ANI_HALL_BTN_MULT="effect/Hall/Ani_BtnMult",t.ANI_HALL_BTN_MATCH="effect/Hall/Ani_BtnMatch",t.ANI_HALL_BTN_TEAM="effect/Hall/Ani_BtnTeam",t.ANI_HALL_BTN_SHOP="effect/Hall/Ani_Shop",t.ANI_HALL_BTN_MULT2="effect/Hall/Ani_BtnMult2",t.ANI_HALL_BTN_CLASSIC2="effect/Hall/Ani_BtnClassic2",t.ANI_HALL_BTN_NOSHUFFLE2="effect/Hall/Ani_BtnNoShuffle2",t.ANI_HALL_MORE="effect/Hall/Ani_More",t.ANI_FRIENDTEAM_INVITE_FRIEND="effect/friendTeam/ANI_INVIT_FRIEND",t.ANI_FRIENDTEAM_SELECT_TAB="effect/friendTeam/ANI_SELECT_TAB",t.ANI_BTN_SELECTED="effect/HallGround/Ani_Btn_Selected",t.ANI_NEWPLAYERGIFT="effect/NewPlayerGift/Ani_NewPlayerGift",t.ANI_GAMEMATCHING="effect/Game/GameMatching/Ani_GameMatching",t.ANI_RESULT="effect/Game/GameUI/Ani_Result",t.ANI_RESULT_TUOPAI="effect/Game/GameUI/Ani_Result_A",t.ANI_RESULT_MATCH_TITLE="effect/Game/GameResult/Ani_MatchTitle",t.ANI_RESULT_MATCH_BG="effect/Game/GameResult/Ani_MatchBg",t.ANI_GAMEWINMORE_BG="effect/Game/GameWinMore/Ani_Bg",t.ANI_GUIDE_HAND="effect/Game/GameUI/Ani_Guide_Hand",t.ANI_LUCKYTURNTABLE_CHICK="effect/LuckyTurnTable/ANI_CHICK",t.ANI_LUCKYTURNTABLE_BUTTON="effect/LuckyTurnTable/ANI_BUTTON",t.ANI_LUCKYTURNTABLE_WIN="effect/LuckyTurnTable/ANI_ZHONGJIANG",t.ANI_GAME_KANGGONG="effect/Game/GameUI/Ani_KangGong",t.ANI_GAME_BJDJ="effect/Game/GameUI/Ani_BJDJ",t.ANI_GAME_MULT="effect/Game/GameUI/Ani_Mult",t.ANI_GAME_MULT_NEW="effect/Game/GameUI/Ani_MultNew",t.ANI_GAME_SHOWLABELCARD="effect/Game/GameUI/Ani_LiangPai",t.ANI_GAME_KANGGONG_SMALL="effect/Game/GameUI/Ani_KangGong_Small",t.ANI_GAME_PAIXING1="effect/Game/GameUI/Ani_PaiXing1",t.ANI_GAME_PAIXING2="effect/Game/GameUI/Ani_PaiXing2",t.ANI_GAME_PAIXING3="effect/Game/GameUI/Ani_THS",t.ANI_GAME_DJF="effect/Game/GameUI/Ani_DJF",t.ANI_GAME_HG="effect/Game/GameUI/Ani_HG",t.ANI_GAME_TM="effect/Game/GameUI/Ani_TM",t.ANI_GAME_TS="effect/Game/GameUI/Ani_TS",t.ANI_GAME_TP_RESULT="effect/Game/GameUI/Ani_TP_Result",t.ANI_GAME_JP="effect/Game/GameUI/Ani_JP",t.ANI_GAME_FK="effect/Game/GameUI/Ani_FK",t.ANI_GAME_START_GET="effect/Game/GameWinMore/Ani_StartGet",t.ANI_GAME_ARROW="effect/Game/GameInviteArrow/Ani_Arrow",t.ANI_GAME_NOTECARD_LOOKER="effect/Game/GameUI/Ani_NoteCardLooker",t.ANI_MATCH_SHARE_HIGH_RANK_BG="effect/MatchShare/Ani_HighRankBg",t.ANI_MATCH_SHARE_HIGH_RANK_UP="effect/MatchShare/Ani_HighRankUp",t.ANI_MATCH_SHARE_HIGH_RANK_AWARD="effect/MatchShare/Ani_HighRankAward",t.ANI_MATCH_SHARE_TITLE="effect/MatchShare/Ani_ShareTitle",t.ANI_MATCH_SHARE_SIGN_IN_NORMAL="effect/MatchShare/Ani_SignInNormal",t.ANI_MATCH_SHARE_SIGN_IN_NORMAL_SHARE_BTN="effect/MatchShare/Ani_SignInNormal_ShareBtn",t.ANI_MATCH_SHARE_SIGN_IN_AWARD="effect/MatchShare/Ani_SignInAward",t.ANI_MATCH_SHARE_SIGN_IN_AWARD_SHARE_BTN="effect/MatchShare/Ani_SignInAward_ShareBtn",t.ANI_MATCH_SHARE_SIGN_IN_AWARD_SWEEP="effect/MatchShare/Ani_SignInAward_Sweep",t.ANI_MATCH_GUIDE_BG="effect/MatchGuide/Ani_MatchGuideBg",t.ANI_MATCH_GUIDE_BTN="effect/MatchGuide/Ani_MatchGuideBtn",t.ANI_MATCH_POPAD_BG="effect/PopAd/Ani_PopAd_Bg",t.ANI_MATCH_POPAD_BTN="effect/PopAd/Ani_PopAd_Btn",t.ANI_GOLDENEGG_INVITE="effect/MatchShare/Ani_GoldenEggInvite",t.ANI_GOLDENEGG_ICON="effect/MatchShare/Ani_GoldenEggIcon",t.ANI_GOLDENEGG_BTN="effect/MatchShare/Ani_GoldenEggBtn",t.ANI_MATCH_EXCHANGE_AD="effect/Match/Ani_ExchangeAd",t.ANI_MATCH_JIANGTAI="effect/Match/Ani_JiangTai",t.ANI_MATCH_TITLE="effect/Match/Ani_Title",t.ANI_MATCH_ROCKET="effect/Match/Ani_Rocket",t.ANI_MATCH_BTN_SIGN="effect/MatchSign/Ani_MatchSignBtn",t.ANI_YEAR_BEAST="effect/YearBeast/ANI_YEAR_BEAST",t.ANI_YEAR_BEAST_BOMB="effect/YearBeast/ANI_YEAR_BEAST_BOMB",t.ANI_YEAR_BEAST_FIRECRACKER="effect/YearBeast/ANI_YEAR_BEAST_FIRECRACKER",t.ANI_YEAR_BEAST_MISSILE="effect/YearBeast/ANI_YEAR_BEAST_MISSILE",t.ANI_YEAR_BEAST_MY_AWARD="effect/YearBeast/ANI_YEAR_BEAST_MY_AWARD",t.ANI_YEAR_BEAST_COMPOSE="effect/YearBeast/ANI_YEAR_BEAST_COMPOSE",t.ANI_YEAR_BEAST_BTN_SWEEP="effect/YearBeast/ANI_YEAR_BEAST_BTN_SWEEP",t.ANI_YEAR_BEAST_ENTRANCE="effect/YearBeast/ANI_YEAR_BEAST_ENTRANCE",t.ANI_LIMIT_EMOJI="effect/Game/LimitEmoji/Ani_Emoji"}(n.DataSpineAniPath||(n.DataSpineAniPath={})),cc._RF.pop()},{}],DatazOrder:[function(t,e,n){"use strict";cc._RF.push(e,"40142r9mk5D1a1mLOzR0fTI","DatazOrder"),Object.defineProperty(n,"__esModule",{value:!0}),n.DataZOrder=void 0;var o=function(){function t(){}return t.Bottom=-1,t.Default=0,t.FriendTeamRecordUI=1,t.MatchShareRank=1,t.GameSceneUI=1,t.GameChatUI=2,t.GameCardUI_1=2,t.BuyNoteCardUI=3,t.GameJSUI=3,t.GameCardUI_2=3,t.GameTrustUI=3,t.GameMixPassADissmissUI=3,t.GameShopUI=3,t.GameWinMoreUI=3,t.PayWithCustomerUI=3,t.GameGuideButtonUI=4,t.GameGuideUI=5,t.GuideUI=5,t.GuideDescUI=6,t.GameResult=10,t.BoxRecordUI=11,t.GameContinueTableUI=20,t.GameChatRecordUI=40,t.MAX=1e3,t}();n.DataZOrder=o,cc._RF.pop()},{}],DeclareType:[function(t,e,n){"use strict";cc._RF.push(e,"ca5b9SybDpOh5EDFVMe47B0","DeclareType"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],DefaultPokerCardsConst:[function(t,e,n){"use strict";cc._RF.push(e,"85a4aOUXiZKRLUR+RjRMFYM","DefaultPokerCardsConst");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.PokerCardsType=n.PokerCardValues=n.PokerCardColor=n.PokerCards=void 0;var a=function(){function t(){}return t.None=0,t.FangKuai_A=1,t.FangKuai_2=2,t.FangKuai_3=3,t.FangKuai_4=4,t.FangKuai_5=5,t.FangKuai_6=6,t.FangKuai_7=7,t.FangKuai_8=8,t.FangKuai_9=9,t.FangKuai_10=10,t.FangKuai_J=11,t.FangKuai_Q=12,t.FangKuai_K=13,t.MeiHua_A=14,t.MeiHua_2=15,t.MeiHua_3=16,t.MeiHua_4=17,t.MeiHua_5=18,t.MeiHua_6=19,t.MeiHua_7=20,t.MeiHua_8=21,t.MeiHua_9=22,t.MeiHua_10=23,t.MeiHua_J=24,t.MeiHua_Q=25,t.MeiHua_K=26,t.HongXin_A=27,t.HongXin_2=28,t.HongXin_3=29,t.HongXin_4=30,t.HongXin_5=31,t.HongXin_6=32,t.HongXin_7=33,t.HongXin_8=34,t.HongXin_9=35,t.HongXin_10=36,t.HongXin_J=37,t.HongXin_Q=38,t.HongXin_K=39,t.HeiTao_A=40,t.HeiTao_2=41,t.HeiTao_3=42,t.HeiTao_4=43,t.HeiTao_5=44,t.HeiTao_6=45,t.HeiTao_7=46,t.HeiTao_8=47,t.HeiTao_9=48,t.HeiTao_10=49,t.HeiTao_J=50,t.HeiTao_Q=51,t.HeiTao_K=52,t.XiaoWang=53,t.DaWang=54,o([jsClass("PokerCards")],t)}();n.PokerCards=a;var i=function(){function t(){}return t.None=0,t.FangKuai=1,t.MeiHua=2,t.HongXin=3,t.HeiTao=4,t.Wang=5,o([jsClass("PokerCardColor")],t)}();n.PokerCardColor=i;var r=function(){function t(){}return t.None=0,t.Card_2=1,t.Card_3=2,t.Card_4=3,t.Card_5=4,t.Card_6=5,t.Card_7=6,t.Card_8=7,t.Card_9=8,t.Card_10=9,t.Card_J=10,t.Card_Q=11,t.Card_K=12,t.Card_A=13,t.Card_XiaoWang=14,t.Card_DaWang=15,o([jsClass("PokerCardValues")],t)}();n.PokerCardValues=r;var s=function(){function t(){}return t.Illegitimate=-1,t.None=0,t.DanZhang=1,t.DuiZi=2,t.SanZhang=3,t.SiZhang=4,t.WuZhang=5,t.LiuZhang=6,t.QiZhang=7,t.BaZhang=8,t.JiuZhang=9,t.ShiZhang=10,t.ShunZi=11,t.LianDui=12,t.LianSan=13,t.LianSi=14,t.LianWu=15,t.LianLiu=16,t.LianQi=17,t.LianBa=18,t.HuoJian=19,t.FeiJi=20,t.SanDaiEr=21,t.SanDaiYi=22,t.SiDaiEr=23,t.SiDaiYi=24,t.SiDaiSan=97,t.SanDaiLiangDanZhang=98,t.SanAZha=99,t.TongHuaShun=100,t.WangZha=101,o([jsClass("PokerCardsType")],t)}();n.PokerCardsType=s,cc._RF.pop()},{}],DevelopPlatform:[function(t,e,n){"use strict";cc._RF.push(e,"babe3nSNEZC+o1PBcncHRks","DevelopPlatform");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.DevelopPlatform=void 0;var r=t("./_IPlatform"),s=t("../../../../Framework/Manager/CoroutineManager"),c=t("../../../../Framework/Manager/EventManager"),l=t("./Const/PlatformEventType"),u=t("../../../../Framework/Root/ManagerRoot"),d=t("../../../../Framework/Root/ProxyRoot"),p=t("../../../../Framework/Root/ModelRoot"),h=t("../../../../Framework/Manager/UIManager"),_=t("../../../../Framework/Utils/Extension/ConsoleExtension"),f=t("./Const/Scope"),m=t("../../Data/DataBfConfig"),g=t("./PlatformManager"),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=g.PlatformTypeEnum.Develop,e.TOAST_ICON_MAP={success:"\u2713\n",error:"\u2715\n",loading:"\u27f3\n"},e.BANNER_WIDTH=600,e.BANNER_HEIGHT=160,e.BANNER_AD_IDS=["https://wxresource.gameabc2.com/scmj/mjhl/static/banner/banner_dev_0.jpg","https://wxresource.gameabc2.com/scmj/mjhl/static/banner/banner_dev_1.jpg"],e._bannerAds={},e._whatsNewSubscriptionStatus=r.WhatsNewSubscriptionsStatusEnum.CAN_SUBSCRIBE,e}return a(e,t),Object.defineProperty(e.prototype,"isAppHidden",{get:function(){return this._isAppHidden},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"query",{get:function(){return this._launchArgs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"channel",{get:function(){return+this._launchArgs.channel||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return+this._launchArgs.scene||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chatType",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shareTicket",{get:function(){},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=this,e={},n=location.href.indexOf("?"),o=-1!==n&&location.href.substring(n+1);if(o)for(var a=decodeURIComponent(o).split("&"),i=0,r=a.length;i<r;++i){var u=a[i].split("=");u.length>1&&(e[u[0]]=u[1])}e.user||(e.user="Debug_"+Date.now(),e.devLogin="1"),this._launchArgs=e;var d=this._launchArgs.channel;d&&m.DataBfConfig.setYmnChannel(+d),s.CoroutineManager.instance.frameOnce(1,function(){cc.game.on(cc.game.EVENT_SHOW,function(){t._isAppHidden=!1,c.EventManager.instance.emit(l.PlatformEventType.AppShow)}),cc.game.on(cc.game.EVENT_HIDE,function(){t._isAppHidden=!0,c.EventManager.instance.emit(l.PlatformEventType.AppHide)})},this),c.EventManager.instance.emit(l.PlatformEventType.AppShow),m.DataBfConfig.init(this.query.env,this.name),this.initConsole(),this.initFrameRate();var p=cc.profiler.showStats;cc.profiler.showStats=function(){p&&p(),s.CoroutineManager.instance.late(t.profilerBg,t)},cc.debug.setDisplayStats(!!this._launchArgs.debug),this.exportClasses(),h.UIManager.instance.weakMapEnable=!0},e.prototype.profilerBg=function(){var t=cc.director.getScene().getChildByName("PROFILER-NODE");if(t){var e=t.getChildByName("BG");e||cc.loader.loadRes("ui/DefaultTexture",cc.SpriteFrame,function(n,o){n||(e=new cc.Node("BG"),t.insertChild(e,0),e.addComponent(cc.Sprite).spriteFrame=o,e.setPosition(0,15),e.setAnchorPoint(0,0),e.color=cc.Color.BLACK,e.opacity=160,e.width=200,e.height=90)})}},e.prototype.exportClasses=function(){s.CoroutineManager.instance.late(function(){u.ManagerRoot.instance.forEach(function(t){var e=cc.js.getClassName(t);e&&(window[e]=t.constructor)}),p.ModelRoot.instance.forEach(function(t){var e=cc.js.getClassName(t);e&&(window[e]=t.constructor)}),d.ProxyRoot.instance.forEach(function(t){var e=cc.js.getClassName(t);e&&(window[e]=t.constructor)})},this),window.ConsoleExtension=_.ConsoleExtension,["ConstValue","HttpUtil","UIHelp","UtilTool","PopupConfig"].forEach(function(t){window[t]=cc.js.getClassByName(t)})},e.prototype.initConsole=function(){_.ConsoleExtension.setEnabled(!0),_.ConsoleExtension.setReferEnabled(!0)},e.prototype.initFrameRate=function(){cc.game.setFrameRate(60)},e.prototype.getSystemInfoSync=function(){return this._systemInfo||(this._systemInfo={screenWidth:window.innerWidth,screenHeight:window.innerHeight,pixelRatio:1,platform:"web",system:"Windows",batteryLevel:100})},Object.defineProperty(e.prototype,"performanceLevel",{get:function(){return-1},enumerable:!1,configurable:!0}),e.prototype.isLowPerformance=function(){return!1},e.prototype.login=function(t){console.log("Develop login."),t&&t({code:this._launchArgs.user,os:this.name})},e.prototype.createUserInfoButton=function(){return null},e.prototype.getUserInfo=function(t,e){var n=this;console.log("Develop getUserInfo"),this.showDialog(t,!0,function(t){if(t){var o={nickname:n._launchArgs.nickname,icon:n._launchArgs.icon,gender:+n._launchArgs.gender};console.log("Develop getUserInfo succeed:",o),e&&e(o)}else console.warn("Develop getUserInfo failed: denied"),e&&e(null)},"\u5141\u8bb8","\u62d2\u7edd")},e.prototype.getUserInfoSilent=function(t){console.log("Develop getUserInfoSilent");var e={nickname:this._launchArgs.nickname,icon:this._launchArgs.icon,gender:+this._launchArgs.gender};console.log("Develop getUserInfoSilent succeed:",e),t&&t(e)},e.prototype.getShareInfo=function(t){console.log("Develop getShareInfo"),t&&t(null)},e.prototype.requireScope=function(t,e,n){var o=this;console.log("Develop requireScope"),this.isScopeAuthored(t,function(e){e?n&&n(!0,!0):t===f.Scope.record?o.recordAuthorize(function(t){n&&n(t,e)}):n&&n(null,e)})},e.prototype.isScopeAuthored=function(t,e){var n=this;if(console.log("Develop isScopeAuthored"),t===f.Scope.record)if(this._audioStream)e&&e(!0);else try{navigator.permissions.query({name:"microphone"}).then(function(o){switch(console.log("Develop "+t+" state is",o.state),o.state){case"granted":n.recordAuthorize(e);break;case"denied":e&&e(!1);break;case"prompt":default:e&&e(void 0)}},function(n){console.error("Develop "+t+" state is unknown:",n),e&&e(null)})}catch(o){console.error("Develop "+t+" state is unknown:",o),e&&e(null)}else console.log("Develop "+t+" authored is not support!"),e&&e(!0)},e.prototype.recordAuthorize=function(t){var e=this;if(!1===this._audioStream)t&&s.CoroutineManager.instance.lateWait(function(){return!1!==e._audioStream},function(){t(!!e._audioStream||null===e._audioStream&&null)},this);else if(this._audioStream)t&&t(!0);else try{this._audioStream=!1,console.log("Develop getUserMedia: audio"),navigator.mediaDevices.getUserMedia({audio:!0}).then(function(n){e._audioStream=n,t&&t(!0)},function(n){switch(console.error(n),delete e._audioStream,n.name){case"NotFoundError":return e.showToast("\u672a\u627e\u5230\u5f55\u97f3\u8bbe\u5907\uff0c\u8bf7\u68c0\u67e5\u8bbe\u5907\u8fde\u63a5\u60c5\u51b5\uff01"),void(t&&t(!1));case"NotAllowedError":return e.showToast("\u9ea6\u514b\u98ce\u6743\u9650\u5df2\u88ab\u7981\u7528\uff0c\u8bf7\u70b9\u51fb\u5730\u5740\u680f\u5de6\u4fa7\u6309\u94ae\u542f\u7528\u9ea6\u514b\u98ce\uff01"),void(t&&t(!1));default:return e.showToast("\u6388\u6743\u5931\u8d25\uff01"),void(t&&t(!1))}})}catch(n){this._audioStream=null,this.showToast("\u6388\u6743\u5931\u8d25\uff01"),t&&t(null)}},Object.defineProperty(e.prototype,"hasShare",{get:function(){return!0},set:function(){},enumerable:!1,configurable:!0}),e.prototype.onShareAppMessage=function(){},e.prototype.onShareTimeline=function(){},e.prototype.shareAppMessage=function(t,e,n){console.log("Develop shareAppMessage: ",{title:t,imageUrl:e,query:n});var o=document.createElement("img");o.src=e,o.onload=function(){var e=document.createElement("div");e.innerText=t,e.style.cssText="width:480px;height:420px;padding:15px;border-radius:5px;\n\t\t\t\t\t\t\t\tposition:fixed;top:50%;left:50%;z-index:999999;\n\t\t\t\t\t\t\t\tcolor:rgb(0,0,0);background:rgba(255,255,255,255);\n\t\t\t\t\t\t\t\tfont-size:18px;line-height:20px;text-align:left;\n\t\t\t\t\t\t\t\ttransform:translate(-50%,-50%);\n\t\t\t\t\t\t\t\topacity:0;transition:opacity 0.25s ease-out;",document.body.appendChild(e),o.style.cssText="width:500px;height:400px;position:absolute;left:5px;top:45px;z-index:1000000;",o.style.visibility="visible",e.appendChild(o),setTimeout(function(){e.style.opacity="1",setTimeout(function(){e.style.opacity="0",setTimeout(function(){e.remove(),c.EventManager.instance.emit(l.PlatformEventType.Share,3)},250)},2e3),e.onclick=function(){var t=location.href,e=t.match(/user=[^&]+/);e&&(t=t.replace(e[0],e[0]+"_Share")),n&&(t=t+(t.indexOf("?")?"&":"?")+n),window.open(t)}},100)}},e.prototype.showToast=function(t,e,n,o){console.log("Develop showToast:",t,e,n,o),t=(this.TOAST_ICON_MAP[e]||"")+(t||"");var a=this.createToast(t,o);setTimeout(function(){a.style.opacity="1",setTimeout(function(){a.style.opacity="0",setTimeout(function(){a.remove()},250)},n?Math.max(n,250):2e3)},100),this._hideLoading()},e.prototype.createToast=function(t,e){var n=document.createElement("div");return n.title=t,n.innerText=t,null==e&&(e=.5),n.style.cssText="min-width:150px;height:"+20*t.split("\n").length+"px;\n\t\t\t\t\t\t\t\tpadding:14px;border-radius:4px;\n\t\t\t\t\t\t\t\tposition:fixed;top:"+100*e+"%;left:50%;z-index:999999;\n\t\t\t\t\t\t\t\tfont-size:16px;line-height:20px;text-align:center;\n\t\t\t\t\t\t\t\tcolor:rgb(255,255,255);background:rgba(0,0,0,0.7);\n\t\t\t\t\t\t\t\ttransform:translate(-50%,-50%);\n\t\t\t\t\t\t\t\topacity:0;transition:opacity 0.25s ease-out;",document.body.appendChild(n),n},e.prototype.showLoading=function(t){if(console.log("Develop showLoading:",t),t=this.TOAST_ICON_MAP.loading+(t||""),this._loadingDiv)this._loadingDiv.innerText=t;else{var e=this.createToast(t);setTimeout(function(){return e.style.opacity="1"},100),this._loadingDiv=e}},e.prototype.hideLoading=function(){console.log("Develop hideLoading"),this._hideLoading()},e.prototype._hideLoading=function(){var t=this._loadingDiv;t&&(t.style.opacity="0",setTimeout(function(){return t.remove()},250),this._loadingDiv=null)},e.prototype.showDialog=function(t,e,n){if(e){var o=confirm(t);n&&n(o)}else alert(t),n&&n(!0)},Object.defineProperty(e.prototype,"isSupportVideoAd",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isVideoAdLoaded",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.showVideoAd=function(t){try{t&&t(!0),c.EventManager.instance.emit(l.PlatformEventType.VideoAdClose,!0)}catch(e){console.error(e)}},Object.defineProperty(e.prototype,"hasBannerAd",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.createBannerAd=function(t,e,n,o){if(e=e||{x:.5,y:1,pivotX:.5,pivotY:1},this.hasBannerAd){var a=this.BANNER_AD_IDS[t%this.BANNER_AD_IDS.length];if(a){console.log("Develop Create banner ad: ",t,a,e);var i=document.createElement("img");i.src=a,this._bannerAds[t]=i;var r=this.BANNER_WIDTH,c=this.BANNER_HEIGHT,l=window.innerWidth,u=window.innerHeight;i.style.cssText="width:"+r+"px;height:"+c+"px;position:absolute;left:"+l+"px;top:"+u+"px;z-index:1000000;",document.body.appendChild(i),s.CoroutineManager.instance.late(function(){var t=e.x*l-r*e.pivotX,o=e.y*u-c*e.pivotY;i.style.cssText="width:"+r+"px;height:"+c+"px;position:absolute;left:"+t+"px;top:"+o+"px;z-index:1000000;";var a=r/window.innerWidth,s=c/window.innerHeight,d=t/window.innerWidth,p=o/window.innerHeight;n&&n(d,p,a,s,i.src)},this)}else o&&o(),console.warn("Develop BannerAd id is null or empty!")}else o&&o(),console.warn("Develop BannerAd is not supported!")},Object.defineProperty(e.prototype,"hasGameBannerAd",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.createGameBannerAd=function(t,e,n,o){return this.createBannerAd(t,e,n,o)},Object.defineProperty(e.prototype,"hasGridAd",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.createGridAd=function(t,e,n,o){return this.createBannerAd(t,e,n,o)},e.prototype.showBannerAd=function(t,e,n){var o=this._bannerAds[t];o&&(o.style.visibility="visible",console.log("Develop Show banner ad: ",t),n&&n(!0))},e.prototype.hideBannerAd=function(t){var e=this._bannerAds[t];e&&(e.style.visibility="hidden",console.log("Develop Hide banner ad: ",t))},e.prototype.closeBannerAd=function(t){var e=this._bannerAds[t];e&&(e.remove(),this._bannerAds[t]=null,console.log("Develop Close banner ad: ",t))},Object.defineProperty(e.prototype,"hasGamePortalAd",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.showGamePortalAd=function(t){try{t&&t(!1)}catch(e){console.error(e)}},Object.defineProperty(e.prototype,"canKejin",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.requestKejin=function(t,e){e&&e(!0)},e.prototype.showKeyboard=function(){},e.prototype.updateKeyboard=function(){},e.prototype.hideKeyboard=function(){},e.prototype.navigateToMiniProgram=function(t,e){e&&e(!0)},Object.defineProperty(e.prototype,"canVoiceChat",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.joinVoiceChat=function(t,e,n){n&&n(!0,[])},e.prototype.exitVoiceChat=function(t){t&&t(!0)},e.prototype.updateVoiceChatMuteConfig=function(t,e){e&&e(!0)},e.prototype.onVoiceChatSpeakersChanged=function(){},e.prototype.onVoiceChatMembersChanged=function(){},e.prototype.onVoiceChatInterrupted=function(){},Object.defineProperty(e.prototype,"canFeedback",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.createFeedbackButton=function(){return null},e.prototype.openCustomerServiceConversation=function(t,e){console.log("Develop openCustomerServiceConversation:",t),e&&e(!0)},Object.defineProperty(e.prototype,"canOpenURL",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.openCustomerServiceWithURL=function(t){cc.sys.openURL(t)},e.prototype.clearCache=function(){console.log("Develop clearCache")},e.prototype.exit=function(){console.log("Develop exit")},e.prototype.fix=function(t){t?(this.clearCache(),this.exit()):this.exit()},Object.defineProperty(e.prototype,"canSubscribe",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canWhatNewSubscribe",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.requestSubscribe=function(t,e){e&&e(!0)},e.prototype.requestSubscribeWhatsNew=function(t){var e=this;this._whatsNewSubscriptionStatus==r.WhatsNewSubscriptionsStatusEnum.SUBSCRIBE_OK?t&&t(null,r.WhatsNewSubscriptionsErrorEnum.USER_SUBSCRIBED):this.showDialog("\u6e38\u620f\u66f4\u65b0\u65f6\uff0c\u4f60\u5c06\u6536\u5230\u6d88\u606f\u63d0\u9192\u3002",!0,function(n){n&&(e._whatsNewSubscriptionStatus=r.WhatsNewSubscriptionsStatusEnum.SUBSCRIBE_OK),t&&t(n)})},e.prototype.getWhatsNewSubscriptionsSetting=function(t){t&&t(!0,this._whatsNewSubscriptionStatus)},Object.defineProperty(e.prototype,"networkType",{get:function(){return"wifi"},enumerable:!1,configurable:!0}),e.prototype.getBatteryInfo=function(t){t&&t(100,!0)},e.prototype.getLocation=function(t){console.log("Develop getLocation"),t&&t({latitude:30.2932,longitude:120.1123})},Object.defineProperty(e.prototype,"hasGameRecorder",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameRecording",{get:function(){return null!=this._gameRecordCo},enumerable:!1,configurable:!0}),e.prototype.gameRecorderStart=function(t){var e=this;if(this.gameRecording)console.error("Develop gameRecordStart failed!");else{console.log("Develop gameRecordStart"),this._gameRecordPaused=!1,this._duration=0;var n=Date.now();this._gameRecordCo=s.CoroutineManager.instance.lateWait(function(){if(!e._gameRecordPaused){var t=Date.now();e._duration+=t-n,n=t,c.EventManager.instance.noLogEmit(l.PlatformEventType.GameRecorderTimeUpdate,e._duration)}return!1},function(){},this),c.EventManager.instance.emit(l.PlatformEventType.GameRecorderStart),t&&t()}},e.prototype.gameRecorderPause=function(t){this.gameRecording&&!this._gameRecordPaused?(console.log("Develop gameRecordPause"),this._gameRecordPaused=!0,c.EventManager.instance.emit(l.PlatformEventType.GameRecorderPause),t&&t()):console.error("Develop gameRecordPause failed!")},e.prototype.gameRecorderResume=function(t){this.gameRecording&&this._gameRecordPaused?(console.log("Develop gameRecordResume"),this._gameRecordPaused=!1,c.EventManager.instance.emit(l.PlatformEventType.GameRecorderResume),t&&t()):console.error("Develop gameRecordPause failed!")},e.prototype.gameRecorderStop=function(t){this.gameRecording?(console.log("Develop gameRecordStop"),s.CoroutineManager.instance.stopCo(this._gameRecordCo),this._gameRecordCo=null,c.EventManager.instance.emit(l.PlatformEventType.GameRecorderStop,this._duration),t&&t(this._duration)):console.error("Develop gameRecordStop failed!")},e.prototype.gameRecorderAbort=function(t){console.log("Develop gameRecordAbort"),this.gameRecording?this.gameRecorderStop(function(){c.EventManager.instance.emit(l.PlatformEventType.GameRecorderAbort),t&&t()}):(c.EventManager.instance.emit(l.PlatformEventType.GameRecorderAbort),t&&t())},e.prototype.createGameRecorderShareButton=function(){return console.log("Develop.createGameRecorderShareButton"),null},e.prototype.initRecordManager=function(){if(!this._recorder)if(window.MediaRecorder){this._recorder=new MediaRecorder(this._audioStream);var t=0;this._recorder.onstart=function(e){t=e.timeStamp,console.log("Recorder start."),c.EventManager.instance.emit(l.PlatformEventType.RecorderStart)},this._recorder.ondataavailable=function(e){var n={duration:Math.floor(e.timeStamp-t),tempFilePath:URL.createObjectURL(e.data),fileSize:e.data.size};console.log("Recorder stop:",n),c.EventManager.instance.emit(l.PlatformEventType.RecorderStop,n.duration,n.tempFilePath,n.fileSize)}}else this.showToast("\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u5f55\u97f3\uff0c\u8bf7\u66f4\u6362\u6d4f\u89c8\u5668\u518d\u8bd5\uff01")},e.prototype.startRecord=function(){console.log("Develop startRecord"),this.initRecordManager(),this._recorder&&this._recorder.start()},e.prototype.stopRecord=function(){var t=this;console.log("Develop stopRecord"),s.CoroutineManager.instance.wait(function(){return!1!==t._recorder},function(){t._recorder&&"inactive"!==t._recorder.state&&t._recorder.stop()},this)},e.prototype.setClipboardData=function(t,e){if(null!=t){var n=document.createElement("textarea");document.body.appendChild(n),n.value=t,n.select(),document.execCommand("Copy"),n.remove(),console.log("Develop setClipboardData succeed:",t),this.showToast("\u5185\u5bb9\u5df2\u590d\u5236"),e&&e(!0)}else console.warn("Develop setClipboardData failed: data is null!"),e&&e(!1)},e.prototype.getClipboardData=function(t){console.log("Develop getClipboardData failed: can not get clipboard data on web!"),t&&t(null)},e.prototype.uploadFile=function(t,e,n,o,a,i,r){console.log("Develop uploadFile",t,e,n,o,a,i),fetch(n).then(function(n){console.log("Develop uploadFile load succeed:",n.status),n.blob().then(function(n){console.log("Develop uploadFile blob succeed:",n);var s=new FormData;if(i)for(var c in i)if(i.hasOwnProperty(c)){var l=i[c];s.append(c,l+"")}s.append(o,e),s.append(a,n),fetch(t,{method:"post",body:s}).then(function(n){console.log("Develop uploadFile upload succeed:",n.status),r&&r(t+"/"+e)},function(t){console.error("Develop uploadFile upload failed:",t),r&&r(null)})},function(t){console.error("Develop uploadFile blob failed:",t),r&&r(null)})},function(t){console.error("Develop uploadFile load failed:",t),r&&r(null)})},e.prototype.toTempFilePath=function(t,e,n){this.toDataURL(t,n)},e.prototype.toDataURL=function(t,e){var n;console.log("Develop Canvas.toDataURL");try{n=t.toDataURL(),console.log("Develop Canvas.toDataURL succeed:",n)}catch(o){console.error("Develop Canvas.toDataURL failed:",o)}e&&e(n)},e.prototype.previewImage=function(t,e){t&&t.forEach(function(t){return window.open(t)}),e&&e(!0)},e.prototype.saveImageToPhotosAlbum=function(t,e){e&&e(!0)},e.prototype.setMessageToFriendQuery=function(){},e.prototype.setUserCloudStorage=function(){},e.prototype.postMessage=function(){},e.prototype.reportUserBehaviorBranchAnalytics=function(){},e.prototype.getEnvVersion=function(){return""},Object.defineProperty(e.prototype,"supportAct",{get:function(){return{ACTIVITY_CENTER:!0,SIGN:!0,LUCKY_TURN:!0,SHARE_HAVE_GIFT:!0,TEN_BOX:!0,CUSTOMER:!0,MATCH_AND_FIREND:!0,TEAM_INVITE_GIFT:!0,SKY_FALL_TICKET:!0}},enumerable:!1,configurable:!0}),i([jsClass],e)}(cc.Component);n.DevelopPlatform=y,cc._RF.pop()},{"../../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Manager/UIManager":"UIManager","../../../../Framework/Root/ManagerRoot":"ManagerRoot","../../../../Framework/Root/ModelRoot":"ModelRoot","../../../../Framework/Root/ProxyRoot":"ProxyRoot","../../../../Framework/Utils/Extension/ConsoleExtension":"ConsoleExtension","../../Data/DataBfConfig":"DataBfConfig","./Const/PlatformEventType":"PlatformEventType","./Const/Scope":"Scope","./PlatformManager":"PlatformManager","./_IPlatform":"_IPlatform"}],DialogUI:[function(t,e,n){"use strict";cc._RF.push(e,"7f577O2dotCdrr9QGOA2yZl","DialogUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t};Object.defineProperty(n,"__esModule",{value:!0}),n.DialogUI=void 0;var c,l,u=t("../../../../Framework/UI/BaseUI"),d=t("../../../../Framework/UI/FadeUI"),p=t("../../Data/DataConstant"),h=t("../../Data/DatazOrder");(function(t){t[t.None=0]="None",t[t.Cancel=1]="Cancel",t[t.Confirm=2]="Confirm",t[t.Confirm_Close=3]="Confirm_Close",t[t.Confirm_Cancle=4]="Confirm_Cancle",t[t.Confirm_Cancel_Close=5]="Confirm_Cancel_Close",t[t.FT_Confirm_Cancel_Close=6]="FT_Confirm_Cancel_Close",t[t.Match_Confirm=7]="Match_Confirm"})(c||(c={})),function(t){t[t.Show_Opacity=0]="Show_Opacity",t[t.No_Opacity=1]="No_Opacity"}(l||(l={}));var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._canCloseDialog=!0,e}return a(e,t),Object.defineProperty(e,"willClearOnDestroy",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return u.UIType.Dialog},enumerable:!1,configurable:!0}),e.getPkgName=function(){return p.DataConstant.PKG_COMMON},e.getCompName=function(){return cc.js.getClassName(this)+"_MainPanel"},Object.defineProperty(e,"sortingOrder",{get:function(){return h.DataZOrder.MAX},enumerable:!1,configurable:!0}),e.uiBind=function(){},Object.defineProperty(e.prototype,"confirmAction",{set:function(t){this._confirmAction=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cancelAction",{set:function(t){this._cancelAction=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"closeAction",{set:function(t){this._closeAction=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"btnConfirm",{get:function(){return this._btnConfirm},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"btnFTConfirm",{get:function(){return this._btnFTConfirm},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"btnCancel",{get:function(){return this._btnCancel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"btnFTCancel",{get:function(){return this._btnFTCancel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"btnClose",{get:function(){return this._btnClose},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=this.view.getChild("Window");t&&(this._cType=t.getController("CType"),this._txtContent=t.getChild("text"),this._btnCancel=t.getChild("BtnCancel"),this._btnCancel.onClick(this.onCancelClick,this),this._btnFTCancel=t.getChild("BtnFTCancel"),this._btnFTCancel.onClick(this.onCancelClick,this),this._btnConfirm=t.getChild("BtnConfirm"),this._btnConfirm.onClick(this.onConfirmClick,this),this._btnFTConfirm=t.getChild("BtnFTConfirm"),this._btnFTConfirm.onClick(this.onConfirmClick,this),this._btnClose=t.getChild("BtnClose"),this._btnClose.onClick(this.onCloseClick,this)),this._cColliderOpacityType=this.view.getController("c_colliderOpacity")},e.prototype.init=function(t,e){for(var n,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];this._cType&&(this._cType.selectedIndex=t),this._cColliderOpacityType&&(this._cColliderOpacityType.selectedIndex=l.Show_Opacity),e&&(e.content&&this._txtContent&&(this._txtContent.text=(n=e.content).format.apply(n,s(o))),e.confirm&&this._btnConfirm&&(this._btnConfirm.text=e.confirm),e.cancel&&this._btnCancel&&(this._btnCancel.text=e.cancel),e.btnFTCancel&&this._btnFTCancel&&(this._btnFTCancel.text=e.btnFTCancel),e.btnFTConfirm&&this._btnFTConfirm&&(this._btnFTConfirm.text=e.btnFTConfirm))},e.prototype.initNone=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.init.apply(this,s([c.None,t],e))},e.prototype.initCancel=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.init.apply(this,s([c.Cancel,t],e))},e.prototype.initConfirm=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.init.apply(this,s([c.Confirm,t],e))},e.prototype.initConfirmClose=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.init.apply(this,s([c.Confirm_Close,t],e))},e.prototype.initConfirmCancel=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.init.apply(this,s([c.Confirm_Cancle,t],e))},e.prototype.initConfirmCancelClose=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.init.apply(this,s([c.Confirm_Cancel_Close,t],e))},e.prototype.initFTConfirmCancelClose=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.init.apply(this,s([c.FT_Confirm_Cancel_Close,t],e))},e.prototype.initMatchConfirm=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.init.apply(this,s([c.Match_Confirm,t],e))},e.prototype.setOpacityIsZero=function(t){void 0!==t&&(t?this._cColliderOpacityType&&(this._cColliderOpacityType.selectedIndex=l.No_Opacity):this._cColliderOpacityType&&(this._cColliderOpacityType.selectedIndex=l.Show_Opacity))},e.prototype.showCloseBtnVisible=function(t){void 0!==t&&this._btnClose&&(this._btnClose.visible=t)},e.prototype.initCanClose=function(t){void 0!==t&&(this._canCloseDialog=t)},e.prototype.onConfirmClick=function(){this._canCloseDialog&&t.prototype.onExitClick.call(this),this._confirmAction&&this._confirmAction()},e.prototype.onCancelClick=function(){this._canCloseDialog&&t.prototype.onExitClick.call(this),this._cancelAction&&this._cancelAction()},e.prototype.onCloseClick=function(){this._canCloseDialog&&t.prototype.onExitClick.call(this),this._closeAction&&this._closeAction()},i([jsClass],e)}(d.FadeUI);n.DialogUI=_,cc._RF.pop()},{"../../../../Framework/UI/BaseUI":"BaseUI","../../../../Framework/UI/FadeUI":"FadeUI","../../Data/DataConstant":"DataConstant","../../Data/DatazOrder":"DatazOrder"}],ErrorCodeDbpConfig:[function(t,e,n){"use strict";var o,a;cc._RF.push(e,"ce813JSypZMgr2cFvn0hcNU","ErrorCodeDbpConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.DBPErrorInfo=n.DBPErrorCodeEnum=void 0,function(t){t[t.CLUBFUNC_OK=0]="CLUBFUNC_OK",t[t.CLUBFUNC_E_MINCODE=1]="CLUBFUNC_E_MINCODE",t[t.CLUBFUNC_E_NETWORK_BUSY=10]="CLUBFUNC_E_NETWORK_BUSY",t[t.CLUBFUNC_E_INVALID_REQFLAG=12]="CLUBFUNC_E_INVALID_REQFLAG",t[t.CLUBFUNC_E_INVALID_DBCONN=20]="CLUBFUNC_E_INVALID_DBCONN",t[t.CLUBFUNC_E_NOTFOUND_DBCONN=21]="CLUBFUNC_E_NOTFOUND_DBCONN",t[t.CLUBFUNC_E_DBERR=22]="CLUBFUNC_E_DBERR",t[t.CLUBFUNC_E_SENSITIVEERR=23]="CLUBFUNC_E_SENSITIVEERR",t[t.CLUBFUNC_E_INVALID_REDISID=25]="CLUBFUNC_E_INVALID_REDISID",t[t.CLUBFUNC_E_NOTFOUND_REDISID=26]="CLUBFUNC_E_NOTFOUND_REDISID",t[t.CLUBFUNC_E_INVALID_APPID=30]="CLUBFUNC_E_INVALID_APPID",t[t.CLUBFUNC_E_NOTFOUND_APPID=31]="CLUBFUNC_E_NOTFOUND_APPID",t[t.CLUBFUNC_E_INVALID_SESSION=35]="CLUBFUNC_E_INVALID_SESSION",t[t.CLUBFUNC_E_NOTFOUND_SESSION=36]="CLUBFUNC_E_NOTFOUND_SESSION",t[t.CLUBFUNC_E_INVALID_GAMEID=40]="CLUBFUNC_E_INVALID_GAMEID",t[t.CLUBFUNC_E_NOTFOUND_GAME=41]="CLUBFUNC_E_NOTFOUND_GAME",t[t.CLUBFUNC_E_INVALID_CLUBID=50]="CLUBFUNC_E_INVALID_CLUBID",t[t.CLUBFUNC_E_NOTFOUND_CLUB=51]="CLUBFUNC_E_NOTFOUND_CLUB",t[t.CLUBFUNC_E_INVALID_ROOMID=60]="CLUBFUNC_E_INVALID_ROOMID",t[t.CLUBFUNC_E_NOTFOUND_ROOM=61]="CLUBFUNC_E_NOTFOUND_ROOM",t[t.CLUBFUNC_E_INVALID_ROOMSTAT=70]="CLUBFUNC_E_INVALID_ROOMSTAT",t[t.CLUBFUNC_E_NOTFOUND_ROOMSTAT=71]="CLUBFUNC_E_NOTFOUND_ROOMSTAT",t[t.CLUBFUNC_E_INVALID_MATCHID=80]="CLUBFUNC_E_INVALID_MATCHID",t[t.CLUBFUNC_E_NOTFOUND_MATCHID=81]="CLUBFUNC_E_NOTFOUND_MATCHID",t[t.CLUBFUNC_E_INVALID_TOKEN=90]="CLUBFUNC_E_INVALID_TOKEN",t[t.CLUBFUNC_E_WRONG_TOKEN=91]="CLUBFUNC_E_WRONG_TOKEN",t[t.CLUBFUNC_E_USER_NOT_SETAREA=92]="CLUBFUNC_E_USER_NOT_SETAREA",t[t.CLUBFUNC_E_USER_SETCLIENTINFO=93]="CLUBFUNC_E_USER_SETCLIENTINFO",t[t.CLUBFUNC_E_USER_NOT_IN_CLUB=100]="CLUBFUNC_E_USER_NOT_IN_CLUB",t[t.CLUBFUNC_E_INVALID_PLAYID=101]="CLUBFUNC_E_INVALID_PLAYID",t[t.CLUBFUNC_E_INVALID_PLAYKEY=102]="CLUBFUNC_E_INVALID_PLAYKEY",t[t.CLUBFUNC_E_NOTFOUND_PLAYID=103]="CLUBFUNC_E_NOTFOUND_PLAYID",t[t.CLUBFUNC_E_WRONG_PLAYKEY=104]="CLUBFUNC_E_WRONG_PLAYKEY",t[t.CLUBFUNC_E_WRONG_BANKPWD=105]="CLUBFUNC_E_WRONG_BANKPWD",t[t.CLUBFUNC_E_WRONG_SETBANKPWD=106]="CLUBFUNC_E_WRONG_SETBANKPWD",t[t.CLUBFUNC_E_USER_ALREADY_IN_GAME=110]="CLUBFUNC_E_USER_ALREADY_IN_GAME",t[t.CLUBFUNC_E_USER_NOT_IN_GAME=111]="CLUBFUNC_E_USER_NOT_IN_GAME",t[t.CLUBFUNC_E_USER_NOT_ALLOWED_CREATE_GAME=112]="CLUBFUNC_E_USER_NOT_ALLOWED_CREATE_GAME",t[t.CLUBFUNC_E_USER_NOT_ALLOWED_JOIN_GAME=113]="CLUBFUNC_E_USER_NOT_ALLOWED_JOIN_GAME",t[t.CLUBFUNC_E_USER_NOT_ALLOWED_ENTER_GAME=114]="CLUBFUNC_E_USER_NOT_ALLOWED_ENTER_GAME",t[t.CLUBFUNC_E_USER_NOT_ALLOWED_LEAVE_GAME=115]="CLUBFUNC_E_USER_NOT_ALLOWED_LEAVE_GAME",t[t.CLUBFUNC_E_USER_NOT_ALLOWED_GAME=116]="CLUBFUNC_E_USER_NOT_ALLOWED_GAME",t[t.CLUBFUNC_E_USER_NOT_READY=117]="CLUBFUNC_E_USER_NOT_READY",t[t.CLUBFUNC_E_PHONE_ALREADY_BIND=120]="CLUBFUNC_E_PHONE_ALREADY_BIND",t[t.CLUBFUNC_E_SENDSMS_FAIL=121]="CLUBFUNC_E_SENDSMS_FAIL",t[t.CLUBFUNC_E_INVALID_CAPTCHA=122]="CLUBFUNC_E_INVALID_CAPTCHA",t[t.CLUBFUNC_E_ALREADY_SET=123]="CLUBFUNC_E_ALREADY_SET",t[t.CLUBFUNC_E_INVALID_BOXID=201]="CLUBFUNC_E_INVALID_BOXID",t[t.CLUBFUNC_E_INVALID_BOXKEY=202]="CLUBFUNC_E_INVALID_BOXKEY",t[t.CLUBFUNC_E_NOTFOUND_BOX=203]="CLUBFUNC_E_NOTFOUND_BOX",t[t.CLUBFUNC_E_NOTCREATE_BOX=204]="CLUBFUNC_E_NOTCREATE_BOX",t[t.CLUBFUNC_E_WRONG_BOXKEY=205]="CLUBFUNC_E_WRONG_BOXKEY",t[t.CLUBFUNC_E_WRONG_BOXPWD=206]="CLUBFUNC_E_WRONG_BOXPWD",t[t.CLUBFUNC_E_USER_ALREADY_IN_BOX=210]="CLUBFUNC_E_USER_ALREADY_IN_BOX",t[t.CLUBFUNC_E_USER_NOT_IN_BOX=211]="CLUBFUNC_E_USER_NOT_IN_BOX",t[t.CLUBFUNC_E_USER_NOT_ALLOWED_CREATE_BOX=212]="CLUBFUNC_E_USER_NOT_ALLOWED_CREATE_BOX",t[t.CLUBFUNC_E_USER_NOT_ALLOWED_JOIN_BOX=213]="CLUBFUNC_E_USER_NOT_ALLOWED_JOIN_BOX",t[t.CLUBFUNC_E_USER_NOT_ALLOWED_ENTER_BOX=214]="CLUBFUNC_E_USER_NOT_ALLOWED_ENTER_BOX",t[t.CLUBFUNC_E_USER_NOT_ALLOWED_LEAVE_BOX=215]="CLUBFUNC_E_USER_NOT_ALLOWED_LEAVE_BOX",t[t.CLUBFUNC_E_USER_NOT_OWNER=216]="CLUBFUNC_E_USER_NOT_OWNER",t[t.CLUBFUNC_E_USER_NOT_TEAUSER=217]="CLUBFUNC_E_USER_NOT_TEAUSER",t[t.CLUBFUNC_E_USER_OVER_TEAHOUSE_CNT=218]="CLUBFUNC_E_USER_OVER_TEAHOUSE_CNT",t[t.CLUBFUNC_E_NOTCREATE_TEAHOUSE=219]="CLUBFUNC_E_NOTCREATE_TEAHOUSE",t[t.CLUBFUNC_E_WRONG_TEAMID=220]="CLUBFUNC_E_WRONG_TEAMID",t[t.CLUBFUNC_E_TEAMID_CLOSED=221]="CLUBFUNC_E_TEAMID_CLOSED",t[t.CLUBFUNC_E_WRONG_SETUSER=222]="CLUBFUNC_E_WRONG_SETUSER",t[t.CLUBFUNC_E_WRONG_SETTEAM=223]="CLUBFUNC_E_WRONG_SETTEAM",t[t.CLUBFUNC_E_OVER_MAXADMIN_CNT=224]="CLUBFUNC_E_OVER_MAXADMIN_CNT",t[t.CLUBFUNC_E_USER_NOT_RIGHT=225]="CLUBFUNC_E_USER_NOT_RIGHT",t[t.CLUBFUNC_E_OVER_MAXTEAMUSER_CNT=226]="CLUBFUNC_E_OVER_MAXTEAMUSER_CNT",t[t.CLUBFUNC_E_OVER_MAXTEAMTABLE_CNT=227]="CLUBFUNC_E_OVER_MAXTEAMTABLE_CNT",t[t.CLUBFUNC_E_NOT_ALLOWED_SETTEAMGROUP=228]="CLUBFUNC_E_NOT_ALLOWED_SETTEAMGROUP",t[t.CLUBFUNC_E_OVER_MAXTEAMGROUP_CNT=229]="CLUBFUNC_E_OVER_MAXTEAMGROUP_CNT",t[t.CLUBFUNC_E_WRONG_SETTEAMGROUP=230]="CLUBFUNC_E_WRONG_SETTEAMGROUP",t[t.CLUBFUNC_E_WRONG_GROUPNOEXIST=240]="CLUBFUNC_E_WRONG_GROUPNOEXIST",t[t.CLUBFUNC_E_WRONG_GROUPISFILL=241]="CLUBFUNC_E_WRONG_GROUPISFILL",t[t.CLUBFUNC_E_USER_ALREADY_IN_PARTNER=301]="CLUBFUNC_E_USER_ALREADY_IN_PARTNER",t[t.CLUBFUNC_E_USER_NOT_IN_PARTNER=302]="CLUBFUNC_E_USER_NOT_IN_PARTNER",t[t.CLUBFUNC_E_NOTCREATE_PARTNER=303]="CLUBFUNC_E_NOTCREATE_PARTNER",t[t.CLUBFUNC_E_NOTFOUND_PARTNER=304]="CLUBFUNC_E_NOTFOUND_PARTNER",t[t.CLUBFUNC_E_WRONG_PARTNERPWD=305]="CLUBFUNC_E_WRONG_PARTNERPWD",t[t.CLUBFUNC_E_WRONG_OPERATE_PARTNER=306]="CLUBFUNC_E_WRONG_OPERATE_PARTNER",t[t.CLUBFUNC_E_NOTFOUND_OLD_PARTNER=307]="CLUBFUNC_E_NOTFOUND_OLD_PARTNER",t[t.CLUBFUNC_E_USER_ASSET_UNKNOWN=1e3]="CLUBFUNC_E_USER_ASSET_UNKNOWN",t[t.CLUBFUNC_E_USER_PROP_NOTFOUND=1020]="CLUBFUNC_E_USER_PROP_NOTFOUND",t[t.CLUBFUNC_E_USER_PROP_NOTACTIVE=1021]="CLUBFUNC_E_USER_PROP_NOTACTIVE",t[t.CLUBFUNC_E_USER_MONEY_TOO_LOW=1101]="CLUBFUNC_E_USER_MONEY_TOO_LOW",t[t.CLUBFUNC_E_USER_CHARM_TOO_LOW=1111]="CLUBFUNC_E_USER_CHARM_TOO_LOW",t[t.CLUBFUNC_E_USER_CONTRIBUTION_TOO_LOW=1112]="CLUBFUNC_E_USER_CONTRIBUTION_TOO_LOW",t[t.CLUBFUNC_E_USER_PROPCOUNT_TOO_LOW=1121]="CLUBFUNC_E_USER_PROPCOUNT_TOO_LOW",t[t.CLUBFUNC_E_USER_PROPETIME_TOO_LOW=1122]="CLUBFUNC_E_USER_PROPETIME_TOO_LOW",t[t.CLUBFUNC_E_USER_BANKGOLD_TOO_LOW=1130]="CLUBFUNC_E_USER_BANKGOLD_TOO_LOW",t[t.CLUBFUNC_E_USER_PLAYGOLD_TOO_LOW=1131]="CLUBFUNC_E_USER_PLAYGOLD_TOO_LOW",t[t.CLUBFUNC_E_USER_PLAYBEAN_TOO_LOW=1132]="CLUBFUNC_E_USER_PLAYBEAN_TOO_LOW",t[t.CLUBFUNC_E_USER_GAMESCORE_TOO_LOW=1150]="CLUBFUNC_E_USER_GAMESCORE_TOO_LOW",t[t.CLUBFUNC_E_USER_GAMEEXP_TOO_LOW=1151]="CLUBFUNC_E_USER_GAMEEXP_TOO_LOW",t[t.CLUBFUNC_E_USER_GAMEWIN_TOO_LOW=1152]="CLUBFUNC_E_USER_GAMEWIN_TOO_LOW",t[t.CLUBFUNC_E_USER_GAMELOSE_TOO_LOW=1153]="CLUBFUNC_E_USER_GAMELOSE_TOO_LOW",t[t.CLUBFUNC_E_USER_GAMEDRAW_TOO_LOW=1154]="CLUBFUNC_E_USER_GAMEDRAW_TOO_LOW",t[t.CLUBFUNC_E_USER_GAMEESCAPE_TOO_LOW=1155]="CLUBFUNC_E_USER_GAMEESCAPE_TOO_LOW",t[t.CLUBFUNC_E_USER_MONEY_TOO_HIGH=1201]="CLUBFUNC_E_USER_MONEY_TOO_HIGH",t[t.CLUBFUNC_E_USER_CHARM_TOO_HIGH=1211]="CLUBFUNC_E_USER_CHARM_TOO_HIGH",t[t.CLUBFUNC_E_USER_CONTRIBUTION_TOO_HIGH=1212]="CLUBFUNC_E_USER_CONTRIBUTION_TOO_HIGH",t[t.CLUBFUNC_E_USER_PROPCOUNT_TOO_HIGH=1221]="CLUBFUNC_E_USER_PROPCOUNT_TOO_HIGH",t[t.CLUBFUNC_E_USER_PROPETIME_TOO_HIGH=1222]="CLUBFUNC_E_USER_PROPETIME_TOO_HIGH",t[t.CLUBFUNC_E_USER_BANKGOLD_TOO_HIGH=1230]="CLUBFUNC_E_USER_BANKGOLD_TOO_HIGH",t[t.CLUBFUNC_E_USER_PLAYGOLD_TOO_HIGH=1231]="CLUBFUNC_E_USER_PLAYGOLD_TOO_HIGH",t[t.CLUBFUNC_E_USER_PLAYBEAN_TOO_HIGH=1232]="CLUBFUNC_E_USER_PLAYBEAN_TOO_HIGH",t[t.CLUBFUNC_E_USER_GAMESCORE_TOO_HIGH=1250]="CLUBFUNC_E_USER_GAMESCORE_TOO_HIGH",t[t.CLUBFUNC_E_USER_GAMEEXP_TOO_HIGH=1251]="CLUBFUNC_E_USER_GAMEEXP_TOO_HIGH",t[t.CLUBFUNC_E_USER_GAMEWIN_TOO_HIGH=1252]="CLUBFUNC_E_USER_GAMEWIN_TOO_HIGH",t[t.CLUBFUNC_E_USER_GAMELOSE_TOO_HIGH=1253]="CLUBFUNC_E_USER_GAMELOSE_TOO_HIGH",t[t.CLUBFUNC_E_USER_GAMEDRAW_TOO_HIGH=1254]="CLUBFUNC_E_USER_GAMEDRAW_TOO_HIGH",t[t.CLUBFUNC_E_USER_GAMEESCAPE_TOO_HIGH=1255]="CLUBFUNC_E_USER_GAMEESCAPE_TOO_HIGH",t[t.CLUBFUNC_E_USER_MONEY_SUB_FAIL=1301]="CLUBFUNC_E_USER_MONEY_SUB_FAIL",t[t.CLUBFUNC_E_USER_CHARM_SUB_FAIL=1311]="CLUBFUNC_E_USER_CHARM_SUB_FAIL",t[t.CLUBFUNC_E_USER_CONTRIBUTION_SUB_FAIL=1312]="CLUBFUNC_E_USER_CONTRIBUTION_SUB_FAIL",t[t.CLUBFUNC_E_USER_PROPCOUNT_SUB_FAIL=1321]="CLUBFUNC_E_USER_PROPCOUNT_SUB_FAIL",t[t.CLUBFUNC_E_USER_PROPETIME_SUB_FAIL=1322]="CLUBFUNC_E_USER_PROPETIME_SUB_FAIL",t[t.CLUBFUNC_E_USER_PROPCOUNT_NOT_ENOUGH=1323]="CLUBFUNC_E_USER_PROPCOUNT_NOT_ENOUGH",t[t.CLUBFUNC_E_USER_BANKGOLD_SUB_FAIL=1330]="CLUBFUNC_E_USER_BANKGOLD_SUB_FAIL",t[t.CLUBFUNC_E_USER_PLAYGOLD_SUB_FAIL=1331]="CLUBFUNC_E_USER_PLAYGOLD_SUB_FAIL",t[t.CLUBFUNC_E_USER_PLAYBEAN_SUB_FAIL=1332]="CLUBFUNC_E_USER_PLAYBEAN_SUB_FAIL",t[t.CLUBFUNC_E_USER_GAMESCORE_SUB_FAIL=1350]="CLUBFUNC_E_USER_GAMESCORE_SUB_FAIL",t[t.CLUBFUNC_E_USER_GAMEEXP_SUB_FAIL=1351]="CLUBFUNC_E_USER_GAMEEXP_SUB_FAIL",t[t.CLUBFUNC_E_USER_GAMEWIN_SUB_FAIL=1352]="CLUBFUNC_E_USER_GAMEWIN_SUB_FAIL",t[t.CLUBFUNC_E_USER_GAMELOSE_SUB_FAIL=1353]="CLUBFUNC_E_USER_GAMELOSE_SUB_FAIL",t[t.CLUBFUNC_E_USER_GAMEDRAW_SUB_FAIL=1354]="CLUBFUNC_E_USER_GAMEDRAW_SUB_FAIL",t[t.CLUBFUNC_E_USER_GAMEESCAPE_SUB_FAIL=1355]="CLUBFUNC_E_USER_GAMEESCAPE_SUB_FAIL",t[t.CLUBFUNC_E_USER_MONEY_ADD_FAIL=1401]="CLUBFUNC_E_USER_MONEY_ADD_FAIL",t[t.CLUBFUNC_E_USER_CHARM_ADD_FAIL=1411]="CLUBFUNC_E_USER_CHARM_ADD_FAIL",t[t.CLUBFUNC_E_USER_CONTRIBUTION_ADD_FAIL=1412]="CLUBFUNC_E_USER_CONTRIBUTION_ADD_FAIL",t[t.CLUBFUNC_E_USER_PROPCOUNT_ADD_FAIL=1421]="CLUBFUNC_E_USER_PROPCOUNT_ADD_FAIL",t[t.CLUBFUNC_E_USER_PROPETIME_ADD_FAIL=1422]="CLUBFUNC_E_USER_PROPETIME_ADD_FAIL",t[t.CLUBFUNC_E_USER_BANKGOLD_ADD_FAIL=1430]="CLUBFUNC_E_USER_BANKGOLD_ADD_FAIL",t[t.CLUBFUNC_E_USER_PLAYGOLD_ADD_FAIL=1431]="CLUBFUNC_E_USER_PLAYGOLD_ADD_FAIL",t[t.CLUBFUNC_E_USER_PLAYBEAN_ADD_FAIL=1432]="CLUBFUNC_E_USER_PLAYBEAN_ADD_FAIL",t[t.CLUBFUNC_E_USER_GAMESCORE_ADD_FAIL=1450]="CLUBFUNC_E_USER_GAMESCORE_ADD_FAIL",t[t.CLUBFUNC_E_USER_GAMEEXP_ADD_FAIL=1451]="CLUBFUNC_E_USER_GAMEEXP_ADD_FAIL",t[t.CLUBFUNC_E_USER_GAMEWIN_ADD_FAIL=1452]="CLUBFUNC_E_USER_GAMEWIN_ADD_FAIL",t[t.CLUBFUNC_E_USER_GAMELOSE_ADD_FAIL=1453]="CLUBFUNC_E_USER_GAMELOSE_ADD_FAIL",t[t.CLUBFUNC_E_USER_GAMEDRAW_ADD_FAIL=1454]="CLUBFUNC_E_USER_GAMEDRAW_ADD_FAIL",t[t.CLUBFUNC_E_USER_GAMEESCAPE_ADD_FAIL=1455]="CLUBFUNC_E_USER_GAMEESCAPE_ADD_FAIL",t[t.CLUBFUNC_E_MAXCODE=4095]="CLUBFUNC_E_MAXCODE"}(a=n.DBPErrorCodeEnum||(n.DBPErrorCodeEnum={})),n.DBPErrorInfo=((o={})[a.CLUBFUNC_E_MINCODE]="\u9519\u8bef\u7801\u6700\u5c0f\u503c",o[a.CLUBFUNC_E_NETWORK_BUSY]="\u7f51\u7edc\u7e41\u5fd9",o[a.CLUBFUNC_E_INVALID_REQFLAG]="\u65e0\u6548\u7684\u8bf7\u6c42\u6807\u5fd7",o[a.CLUBFUNC_E_INVALID_DBCONN]="\u65e0\u6548\u7684DB\u8fde\u63a5",o[a.CLUBFUNC_E_NOTFOUND_DBCONN]="\u672a\u627e\u5230DB\u8fde\u63a5",o[a.CLUBFUNC_E_DBERR]="\u6570\u636e\u5e93\u9519\u8bef",o[a.CLUBFUNC_E_SENSITIVEERR]="\u5b58\u5728\u654f\u611f\u8bcd",o[a.CLUBFUNC_E_INVALID_REDISID]="\u65e0\u6548\u7684Redis\u8fde\u63a5",o[a.CLUBFUNC_E_NOTFOUND_REDISID]="\u672a\u627e\u5230Redis\u8fde\u63a5",o[a.CLUBFUNC_E_INVALID_APPID]="\u65e0\u6548\u7684\u8fdb\u7a0bAPPID",o[a.CLUBFUNC_E_NOTFOUND_APPID]="\u672a\u627e\u5230\u8fdb\u7a0bAPPID",o[a.CLUBFUNC_E_INVALID_SESSION]="\u65e0\u6548\u7684\u8fdb\u7a0bSESSION",o[a.CLUBFUNC_E_NOTFOUND_SESSION]="\u672a\u627e\u5230\u8fdb\u7a0bSESSION",o[a.CLUBFUNC_E_INVALID_GAMEID]="\u672a\u627e\u5230\u6e38\u620f",o[a.CLUBFUNC_E_INVALID_CLUBID]="\u65e0\u6548\u7684\u4ff1\u4e50\u90e8ID",o[a.CLUBFUNC_E_NOTFOUND_CLUB]="\u672a\u627e\u5230\u4ff1\u4e50\u90e8",o[a.CLUBFUNC_E_INVALID_ROOMID]="\u65e0\u6548\u7684\u623f\u95f4ID",o[a.CLUBFUNC_E_NOTFOUND_ROOM]="\u672a\u627e\u5230\u623f\u95f4",o[a.CLUBFUNC_E_INVALID_ROOMSTAT]="\u65e0\u6548\u7684\u623f\u95f4\u7edf\u8ba1",o[a.CLUBFUNC_E_NOTFOUND_ROOMSTAT]="\u672a\u627e\u5230\u623f\u95f4\u7edf\u8ba1",o[a.CLUBFUNC_E_INVALID_MATCHID]="\u65e0\u6548\u7684\u6bd4\u8d5bID",o[a.CLUBFUNC_E_NOTFOUND_MATCHID]="\u672a\u627e\u5230\u6bd4\u8d5bID",o[a.CLUBFUNC_E_INVALID_TOKEN]="\u65e0\u6548\u7684\u4ee4\u724c",o[a.CLUBFUNC_E_WRONG_TOKEN]="\u9519\u8bef\u7684\u4ee4\u724c",o[a.CLUBFUNC_E_USER_NOT_SETAREA]="\u73a9\u5bb6\u6ca1\u6709\u8bbe\u7f6e\u5730\u7406\u4f4d\u7f6e",o[a.CLUBFUNC_E_USER_SETCLIENTINFO]="\u73a9\u5bb6\u8bbe\u7f6e\u5ba2\u6237\u7aef\u4fe1\u606f\u5931\u8d25",o[a.CLUBFUNC_E_USER_NOT_IN_CLUB]="\u73a9\u5bb6\u4e0d\u5728\u4ff1\u4e50\u90e8\u4e2d",o[a.CLUBFUNC_E_INVALID_PLAYID]="\u65e0\u6548\u7684\u573a\u6b21ID",o[a.CLUBFUNC_E_INVALID_PLAYKEY]="\u73a9\u5bb6\u8bbe\u7f6e\u5ba2\u6237\u7aef\u4fe1\u606f\u5931\u8d25",o[a.CLUBFUNC_E_NOTFOUND_PLAYID]="\u65e0\u6548\u7684\u573a\u6b21\u5bc6\u94a5",o[a.CLUBFUNC_E_USER_SETCLIENTINFO]="\u672a\u627e\u5230\u573a\u6b21ID",o[a.CLUBFUNC_E_WRONG_PLAYKEY]="\u9519\u8bef\u7684\u573a\u6b21\u5bc6\u94a5",o[a.CLUBFUNC_E_WRONG_BANKPWD]="\u9519\u8bef\u7684\u94f6\u884c\u5bc6\u7801",o[a.CLUBFUNC_E_WRONG_SETBANKPWD]="\u8bbe\u7f6e\u94f6\u884c\u5bc6\u7801\u51fa\u9519",o[a.CLUBFUNC_E_USER_ALREADY_IN_GAME]="\u73a9\u5bb6\u5df2\u5728\u6e38\u620f\u4e2d",o[a.CLUBFUNC_E_USER_NOT_IN_GAME]="\u73a9\u5bb6\u672a\u5728\u6e38\u620f\u4e2d",o[a.CLUBFUNC_E_USER_NOT_ALLOWED_CREATE_GAME]="\u73a9\u5bb6\u4e0d\u5141\u8bb8\u521b\u5efa\u6e38\u620f",o[a.CLUBFUNC_E_USER_NOT_ALLOWED_JOIN_GAME]="\u73a9\u5bb6\u4e0d\u5141\u8bb8\u52a0\u5165\u6e38\u620f",o[a.CLUBFUNC_E_USER_NOT_ALLOWED_ENTER_GAME]="\u73a9\u5bb6\u4e0d\u5141\u8bb8\u8fdb\u5165\u6e38\u620f",o[a.CLUBFUNC_E_USER_NOT_ALLOWED_LEAVE_GAME]="\u73a9\u5bb6\u4e0d\u5141\u8bb8\u79bb\u5f00\u6e38\u620f",o[a.CLUBFUNC_E_USER_NOT_ALLOWED_GAME]="\u73a9\u5bb6\u4e0d\u5141\u8bb8\u6e38\u620f",o[a.CLUBFUNC_E_USER_NOT_READY]="\u73a9\u5bb6\u6ca1\u6709\u51c6\u5907",o[a.CLUBFUNC_E_PHONE_ALREADY_BIND]="\u624b\u673a\u53f7\u5df2\u7ecf\u7ed1\u5b9a",o[a.CLUBFUNC_E_SENDSMS_FAIL]="\u53d1\u77ed\u4fe1\u5931\u8d25",o[a.CLUBFUNC_E_INVALID_CAPTCHA]="\u65e0\u6548\u7684\u77ed\u4fe1\u9a8c\u8bc1\u7801",o[a.CLUBFUNC_E_ALREADY_SET]="\u7528\u6237\u5df2\u7ecf\u8bbe\u7f6e",o[a.CLUBFUNC_E_INVALID_BOXID]="\u65e0\u6548\u7684\u5305\u53a2ID",o[a.CLUBFUNC_E_INVALID_BOXKEY]="\u65e0\u6548\u7684\u5305\u53a2\u5bc6\u94a5",o[a.CLUBFUNC_E_NOTFOUND_BOX]="\u672a\u627e\u5230\u6307\u5b9a\u4ff1\u4e50\u90e8\u5305\u53a2",o[a.CLUBFUNC_E_NOTCREATE_BOX]="\u65e0\u6cd5\u521b\u5efa\u4ff1\u4e50\u90e8\u5305\u53a2",o[a.CLUBFUNC_E_WRONG_BOXKEY]="\u9519\u8bef\u7684\u5305\u53a2\u5bc6\u94a5",o[a.CLUBFUNC_E_WRONG_BOXPWD]="\u9519\u8bef\u7684\u5305\u53a2\u5bc6\u7801",o[a.CLUBFUNC_E_USER_ALREADY_IN_BOX]="\u73a9\u5bb6\u5df2\u5728\u5305\u53a2\u4e2d",o[a.CLUBFUNC_E_USER_NOT_IN_BOX]="\u73a9\u5bb6\u4e0d\u5728\u5305\u53a2\u4e2d",o[a.CLUBFUNC_E_USER_NOT_ALLOWED_CREATE_BOX]="\u73a9\u5bb6\u4e0d\u5141\u8bb8\u521b\u5efa\u5305\u53a2",o[a.CLUBFUNC_E_USER_NOT_ALLOWED_JOIN_BOX]="\u73a9\u5bb6\u4e0d\u5141\u8bb8\u52a0\u5165\u5305\u53a2",o[a.CLUBFUNC_E_USER_NOT_ALLOWED_ENTER_BOX]="\u73a9\u5bb6\u4e0d\u5141\u8bb8\u8fdb\u5165\u5305\u53a2",o[a.CLUBFUNC_E_USER_NOT_ALLOWED_LEAVE_BOX]="\u73a9\u5bb6\u4e0d\u5141\u8bb8\u79bb\u5f00\u5305\u53a2",o[a.CLUBFUNC_E_USER_NOT_OWNER]="\u73a9\u5bb6\u975e\u4ee3\u7406\u8d26\u53f7",o[a.CLUBFUNC_E_USER_NOT_TEAUSER]="\u73a9\u5bb6\u975e\u8336\u9986\u4f1a\u5458",o[a.CLUBFUNC_E_USER_OVER_TEAHOUSE_CNT]="\u521b\u5efa\u8336\u9986\u6570\u91cf\u8d85\u8fc7\u9650\u5236",o[a.CLUBFUNC_E_NOTCREATE_TEAHOUSE]="\u65e0\u6cd5\u521b\u5efa\u4ff1\u4e50\u90e8\u8336\u9986",o[a.CLUBFUNC_E_WRONG_TEAMID]="\u9519\u8bef\u7684teamid",o[a.CLUBFUNC_E_TEAMID_CLOSED]="\u8be5teamid\u5df2\u5173\u95ed",o[a.CLUBFUNC_E_WRONG_SETUSER]="\u8bbe\u7f6e\u4f1a\u5458\u9519\u8bef",o[a.CLUBFUNC_E_WRONG_SETTEAM]="\u8bbe\u7f6e\u8336\u9986\u9519\u8bef",o[a.CLUBFUNC_E_OVER_MAXADMIN_CNT]="\u8d85\u8fc7\u8336\u9986\u7ba1\u7406\u5458\u6570\u91cf\u9650\u5236",o[a.CLUBFUNC_E_USER_NOT_RIGHT]="\u73a9\u5bb6\u6ca1\u6709\u6743\u9650",o[a.CLUBFUNC_E_OVER_MAXTEAMUSER_CNT]="\u8d85\u8fc7\u8336\u9986\u73a9\u5bb6\u6570\u91cf\u9650\u5236",o[a.CLUBFUNC_E_OVER_MAXTEAMTABLE_CNT]="\u8d85\u8fc7\u8336\u9986\u684c\u5b50\u6570\u91cf\u9650\u5236",o[a.CLUBFUNC_E_NOT_ALLOWED_SETTEAMGROUP]="\u4e0d\u5141\u8bb8\u8bbe\u7f6e\u8336\u9986\u5c0f\u961f",o[a.CLUBFUNC_E_OVER_MAXTEAMGROUP_CNT]="\u8d85\u8fc7\u8336\u9986\u5c0f\u961f\u6570\u91cf\u9650\u5236",o[a.CLUBFUNC_E_WRONG_SETTEAMGROUP]="\u8bbe\u7f6e\u8336\u9986\u5c0f\u961f\u5931\u8d25",o[a.CLUBFUNC_E_WRONG_GROUPNOEXIST]="\u597d\u53cb\u7ec4\u961f\u4e0d\u5b58\u5728",o[a.CLUBFUNC_E_WRONG_GROUPISFILL]="\u961f\u4f0d\u5df2\u6ee1\uff0c\u8bf7\u91cd\u65b0\u52a0\u5165\u6216\u521b\u5efa\u65b0\u961f\u4f0d",o[a.CLUBFUNC_E_USER_ALREADY_IN_PARTNER]="\u73a9\u5bb6\u5df2\u5728\u961f\u4f0d\u4e2d",o[a.CLUBFUNC_E_USER_NOT_IN_PARTNER]="\u73a9\u5bb6\u672a\u5728\u961f\u4f0d\u4e2d",o[a.CLUBFUNC_E_NOTCREATE_PARTNER]="\u65e0\u6cd5\u521b\u5efa\u961f\u4f0d",o[a.CLUBFUNC_E_NOTFOUND_PARTNER]="\u961f\u4f0d\u5df2\u89e3\u6563\uff0c\u52a0\u5165\u5931\u8d25",o[a.CLUBFUNC_E_WRONG_PARTNERPWD]="\u9519\u8bef\u7684\u961f\u4f0d\u5bc6\u7801",o[a.CLUBFUNC_E_WRONG_OPERATE_PARTNER]="\u961f\u4f0d\u72b6\u6001\u5904\u7406\u5931\u8d25",o[a.CLUBFUNC_E_NOTFOUND_OLD_PARTNER]="\u66f4\u6362\u961f\u4f0d\u65f6\u672a\u627e\u5230\u65e7\u961f\u4f0d",o[a.CLUBFUNC_E_USER_ASSET_UNKNOWN]="\u73a9\u5bb6\u8d44\u4ea7\u6570\u636e\u6216\u7c7b\u578b\u9519\u8bef",o[a.CLUBFUNC_E_USER_PROP_NOTFOUND]="\u73a9\u5bb6\u9053\u5177\u672a\u627e\u5230",o[a.CLUBFUNC_E_USER_PROP_NOTACTIVE]="\u73a9\u5bb6\u9053\u5177\u672a\u6fc0\u6d3b",o[a.CLUBFUNC_E_USER_MONEY_TOO_LOW]="\u73a9\u5bb6\u94bb\u77f3\u6570\u91cf\u4f4e\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_CHARM_TOO_LOW]="\u73a9\u5bb6\u9b45\u529b\u6570\u91cf\u4f4e\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_CONTRIBUTION_TOO_LOW]="\u73a9\u5bb6\u8d21\u732e\u6570\u91cf\u4f4e\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_PROPCOUNT_TOO_LOW]="\u73a9\u5bb6\u8ba1\u6570\u9053\u5177\u6570\u91cf\u4f4e\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_PROPETIME_TOO_LOW]="\u73a9\u5bb6\u8ba1\u65f6\u9053\u5177\u6570\u91cf\u4f4e\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_BANKGOLD_TOO_LOW]="\u73a9\u5bb6\u94f6\u884c\u8d22\u5bcc\u4f4e\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_PLAYGOLD_TOO_LOW]="\u73a9\u5bb6\u94b1\u5305\u8d22\u5bcc\u4f4e\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_PLAYBEAN_TOO_LOW]="\u73a9\u5bb6\u6e38\u620f\u8c46\u4f4e\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_GAMESCORE_TOO_LOW]="\u73a9\u5bb6\u6e38\u620f\u79ef\u5206\u4f4e\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_GAMEEXP_TOO_LOW]="\u73a9\u5bb6\u6e38\u620f\u7ecf\u9a8c\u4f4e\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_GAMEWIN_TOO_LOW]="\u73a9\u5bb6\u6e38\u620f\u80dc\u5229\u76d8\u6570\u4f4e\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_GAMELOSE_TOO_LOW]="\u73a9\u5bb6\u6e38\u620f\u5931\u8d25\u76d8\u6570\u4f4e\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_GAMEDRAW_TOO_LOW]="\u73a9\u5bb6\u6e38\u620f\u5e73\u5c40\u76d8\u6570\u4f4e\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_GAMEESCAPE_TOO_LOW]="\u73a9\u5bb6\u6e38\u620f\u9003\u8dd1\u6b21\u6570\u4f4e\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_MONEY_TOO_HIGH]="\u73a9\u5bb6\u94bb\u77f3\u6570\u91cf\u9ad8\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_CHARM_TOO_HIGH]="\u73a9\u5bb6\u9b45\u529b\u6570\u91cf\u9ad8\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_CONTRIBUTION_TOO_HIGH]="\u73a9\u5bb6\u8d21\u732e\u6570\u91cf\u9ad8\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_PROPCOUNT_TOO_HIGH]="\u73a9\u5bb6\u8ba1\u6570\u9053\u5177\u6570\u91cf\u6570\u91cf\u9ad8\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_PROPETIME_TOO_HIGH]="\u73a9\u5bb6\u8ba1\u65f6\u9053\u5177\u6570\u91cf\u9ad8\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_BANKGOLD_TOO_HIGH]="\u73a9\u5bb6\u94f6\u884c\u8d22\u5bcc\u9ad8\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_PLAYGOLD_TOO_HIGH]="\u73a9\u5bb6\u94b1\u5305\u8d22\u5bcc\u9ad8\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_PLAYBEAN_TOO_HIGH]="\u73a9\u5bb6\u6e38\u620f\u8c46\u9ad8\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_GAMESCORE_TOO_HIGH]="\u73a9\u5bb6\u6e38\u620f\u79ef\u5206\u9ad8\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_GAMEEXP_TOO_HIGH]="\u73a9\u5bb6\u6e38\u620f\u7ecf\u9a8c\u9ad8\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_GAMEWIN_TOO_HIGH]="\u73a9\u5bb6\u6e38\u620f\u80dc\u5229\u76d8\u6570\u9ad8\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_GAMELOSE_TOO_HIGH]="\u73a9\u5bb6\u6e38\u620f\u5931\u8d25\u76d8\u6570\u9ad8\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_GAMEDRAW_TOO_HIGH]="\u73a9\u5bb6\u6e38\u620f\u5e73\u5c40\u76d8\u6570\u9ad8\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_GAMEESCAPE_TOO_HIGH]="\u73a9\u5bb6\u6e38\u620f\u9003\u8dd1\u6b21\u6570\u9ad8\u4e8e\u6761\u4ef6",o[a.CLUBFUNC_E_USER_MONEY_SUB_FAIL]="\u73a9\u5bb6\u94bb\u77f3\u6570\u91cf\u51cf\u5c11\u5931\u8d25",o[a.CLUBFUNC_E_USER_CHARM_SUB_FAIL]="\u73a9\u5bb6\u9b45\u529b\u6570\u91cf\u51cf\u5c11\u5931\u8d25",o[a.CLUBFUNC_E_USER_CONTRIBUTION_SUB_FAIL]="\u73a9\u5bb6\u8d21\u732e\u6570\u91cf\u51cf\u5c11\u5931\u8d25",o[a.CLUBFUNC_E_USER_PROPCOUNT_SUB_FAIL]="\u73a9\u5bb6\u8ba1\u6570\u9053\u5177\u6570\u91cf\u51cf\u5c11\u5931\u8d25",o[a.CLUBFUNC_E_USER_PROPETIME_SUB_FAIL]="\u73a9\u5bb6\u8ba1\u65f6\u9053\u5177\u6570\u91cf\u51cf\u5c11\u5931\u8d25",o[a.CLUBFUNC_E_USER_PROPCOUNT_NOT_ENOUGH]="\u73a9\u5bb6\u8ba1\u6570\u9053\u5177\u6570\u91cf\u4e0d\u591f\u51cf\u5c11",o[a.CLUBFUNC_E_USER_BANKGOLD_SUB_FAIL]="\u73a9\u5bb6\u94f6\u884c\u8d22\u5bcc\u51cf\u5c11\u5931\u8d25",o[a.CLUBFUNC_E_USER_PLAYGOLD_SUB_FAIL]="\u73a9\u5bb6\u94b1\u5305\u8d22\u5bcc\u51cf\u5c11\u5931\u8d25",o[a.CLUBFUNC_E_USER_PLAYBEAN_SUB_FAIL]="\u73a9\u5bb6\u6e38\u620f\u8c46\u51cf\u5c11\u5931\u8d25",o[a.CLUBFUNC_E_USER_GAMESCORE_SUB_FAIL]="\u73a9\u5bb6\u6e38\u620f\u79ef\u5206\u51cf\u5c11\u5931\u8d25",o[a.CLUBFUNC_E_USER_GAMEEXP_SUB_FAIL]="\u73a9\u5bb6\u6e38\u620f\u7ecf\u9a8c\u51cf\u5c11\u5931\u8d25",o[a.CLUBFUNC_E_USER_GAMEWIN_SUB_FAIL]="\u73a9\u5bb6\u6e38\u620f\u80dc\u5229\u76d8\u6570\u51cf\u5c11\u5931\u8d25",o[a.CLUBFUNC_E_USER_GAMELOSE_SUB_FAIL]="\u73a9\u5bb6\u6e38\u620f\u5931\u8d25\u76d8\u6570\u51cf\u5c11\u5931\u8d25",o[a.CLUBFUNC_E_USER_GAMEDRAW_SUB_FAIL]="\u73a9\u5bb6\u6e38\u620f\u5e73\u5c40\u76d8\u6570\u51cf\u5c11\u5931\u8d25",o[a.CLUBFUNC_E_USER_GAMEESCAPE_SUB_FAIL]="\u73a9\u5bb6\u6e38\u620f\u9003\u8dd1\u6b21\u6570\u51cf\u5c11\u5931\u8d25",o[a.CLUBFUNC_E_USER_MONEY_ADD_FAIL]="\u73a9\u5bb6\u94bb\u77f3\u6570\u91cf\u589e\u52a0\u5931\u8d25",o[a.CLUBFUNC_E_USER_CHARM_ADD_FAIL]="\u73a9\u5bb6\u9b45\u529b\u6570\u91cf\u589e\u52a0\u5931\u8d25",o[a.CLUBFUNC_E_USER_CONTRIBUTION_ADD_FAIL]="\u73a9\u5bb6\u8d21\u732e\u6570\u91cf\u589e\u52a0\u5931\u8d25",o[a.CLUBFUNC_E_USER_PROPCOUNT_ADD_FAIL]="\u73a9\u5bb6\u8ba1\u6570\u9053\u5177\u6570\u91cf\u589e\u52a0\u5931\u8d25",o[a.CLUBFUNC_E_USER_PROPETIME_ADD_FAIL]="\u73a9\u5bb6\u8ba1\u65f6\u9053\u5177\u6570\u91cf\u589e\u52a0\u5931\u8d25",o[a.CLUBFUNC_E_USER_BANKGOLD_ADD_FAIL]="\u73a9\u5bb6\u94f6\u884c\u8d22\u5bcc\u589e\u52a0\u5931\u8d25",o[a.CLUBFUNC_E_USER_PLAYGOLD_ADD_FAIL]="\u73a9\u5bb6\u94b1\u5305\u8d22\u5bcc\u589e\u52a0\u5931\u8d25",o[a.CLUBFUNC_E_USER_PLAYBEAN_ADD_FAIL]="\u73a9\u5bb6\u6e38\u620f\u8c46\u589e\u52a0\u5931\u8d25",o[a.CLUBFUNC_E_USER_GAMESCORE_ADD_FAIL]="\u73a9\u5bb6\u6e38\u620f\u79ef\u5206\u589e\u52a0\u5931\u8d25",o[a.CLUBFUNC_E_USER_GAMEEXP_ADD_FAIL]="\u73a9\u5bb6\u6e38\u620f\u7ecf\u9a8c\u589e\u52a0\u5931\u8d25",o[a.CLUBFUNC_E_USER_GAMEWIN_ADD_FAIL]="\u73a9\u5bb6\u6e38\u620f\u80dc\u5229\u76d8\u6570\u589e\u52a0\u5931\u8d25",o[a.CLUBFUNC_E_USER_GAMELOSE_ADD_FAIL]="\u73a9\u5bb6\u6e38\u620f\u5931\u8d25\u76d8\u6570\u589e\u52a0\u5931\u8d25",o[a.CLUBFUNC_E_USER_GAMEDRAW_ADD_FAIL]="\u73a9\u5bb6\u6e38\u620f\u5e73\u5c40\u76d8\u6570\u589e\u52a0\u5931\u8d25",o[a.CLUBFUNC_E_USER_GAMEESCAPE_ADD_FAIL]="\u73a9\u5bb6\u6e38\u620f\u9003\u8dd1\u6b21\u6570\u589e\u52a0\u5931\u8d25",o),cc._RF.pop()},{}],ErrorCodeGameConfig:[function(t,e,n){"use strict";var o,a;cc._RF.push(e,"8d61d4HKIJOubYhYuOppoQq","ErrorCodeGameConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.GameErrorInfo=n.GameErrorCodeEnum=void 0,function(t){t[t.CLUBGAME_OK=0]="CLUBGAME_OK",t[t.CLUBGAME_E_MINCODE=1]="CLUBGAME_E_MINCODE",t[t.CLUBGAME_E_DBP_SEND_TIMEOUT=20]="CLUBGAME_E_DBP_SEND_TIMEOUT",t[t.CLUBGAME_E_DBP_RECV_TIMEOUT=21]="CLUBGAME_E_DBP_RECV_TIMEOUT",t[t.CLUBGAME_E_DBP_RESP_ERRFLAG=22]="CLUBGAME_E_DBP_RESP_ERRFLAG",t[t.CLUBGAME_E_DBP_RESP_PROTOCOL_NOT_PARSE=23]="CLUBGAME_E_DBP_RESP_PROTOCOL_NOT_PARSE",t[t.CLUBGAME_E_DBP_RESP_PROTOCOL_BROKEN=24]="CLUBGAME_E_DBP_RESP_PROTOCOL_BROKEN",t[t.CLUBGAME_E_INVALID_CLIENT=30]="CLUBGAME_E_INVALID_CLIENT",t[t.CLUBGAME_E_DEFENSE_CLIENT=41]="CLUBGAME_E_DEFENSE_CLIENT",t[t.CLUBGAME_E_USER_LOGINSTEP_ERROR=100]="CLUBGAME_E_USER_LOGINSTEP_ERROR",t[t.CLUBGAME_E_USER_NOT_IN_CLUB=101]="CLUBGAME_E_USER_NOT_IN_CLUB",t[t.CLUBGAME_E_USER_NOT_ALLOWED_LEAVE_GAME=102]="CLUBGAME_E_USER_NOT_ALLOWED_LEAVE_GAME",t[t.CLUBGAME_E_USER_NEWUSER_ERROR=103]="CLUBGAME_E_USER_NEWUSER_ERROR",t[t.CLUBGAME_E_USER_ENTERCHECK_ERROR=104]="CLUBGAME_E_USER_ENTERCHECK_ERROR",t[t.CLUBGAME_E_USER_OTHERLOGIN_ERROR=105]="CLUBGAME_E_USER_OTHERLOGIN_ERROR",t[t.CLUBGAME_E_USER_STATE_ERROR=106]="CLUBGAME_E_USER_STATE_ERROR",t[t.CLUBGAME_E_INVALID_PLAYID=107]="CLUBGAME_E_INVALID_PLAYID",t[t.CLUBGAME_E_INVALID_BOXID=108]="CLUBGAME_E_INVALID_BOXID",t[t.CLUBGAME_E_INVALID_BOXKEY=109]="CLUBGAME_E_INVALID_BOXKEY",t[t.CLUBGAME_E_USER_PLAYING=110]="CLUBGAME_E_USER_PLAYING",t[t.CLUBGAME_E_USER_NOT_IN_TABLE=111]="CLUBGAME_E_USER_NOT_IN_TABLE",t[t.CLUBGAME_E_USER_OUT_CHEATREPORT_CNT=112]="CLUBGAME_E_USER_OUT_CHEATREPORT_CNT",t[t.CLUBGAME_E_BOX_NOT_EXIST=113]="CLUBGAME_E_BOX_NOT_EXIST",t[t.CLUBGAME_E_CONTINUE_TABLE_IS_READY=114]="CLUBGAME_E_CONTINUE_TABLE_IS_READY",t[t.CLUBGAME_E_USER_NEWTABLE_ERROR=120]="CLUBGAME_E_USER_NEWTABLE_ERROR",t[t.CLUBGAME_E_USER_ENTERTABLE_ERROR=121]="CLUBGAME_E_USER_ENTERTABLE_ERROR",t[t.CLUBGAME_E_CONTINUE_TABLE=122]="CLUBGAME_E_CONTINUE_TABLE",t[t.CLUBGAME_E_CONTINUE_TABLE_NOT_READY=123]="CLUBGAME_E_CONTINUE_TABLE_NOT_READY",t[t.CLUBGAME_E_CONTINUE_TABLE_OWNER=124]="CLUBGAME_E_CONTINUE_TABLE_OWNER",t[t.CLUBGAME_E_TABLE_PLAYING=125]="CLUBGAME_E_TABLE_PLAYING",t[t.CLUBGAME_E_TABLE_INVALID_SEAT=126]="CLUBGAME_E_TABLE_INVALID_SEAT",t[t.CLUBGAME_E_TABLE_OVER_PROLONGLIMIT=127]="CLUBGAME_E_TABLE_OVER_PROLONGLIMIT",t[t.CLUBGAME_E_TABLE_NOT_AGAINPROLONG=128]="CLUBGAME_E_TABLE_NOT_AGAINPROLONG",t[t.CLUBGAME_E_TABLE_NOT_GAME=129]="CLUBGAME_E_TABLE_NOT_GAME",t[t.CLUBGAME_E_USER_IS_INROOM_WAITTABLE=130]="CLUBGAME_E_USER_IS_INROOM_WAITTABLE",t[t.CLUBGAME_E_USER_LOW_ENTERLIMIT=131]="CLUBGAME_E_USER_LOW_ENTERLIMIT",t[t.CLUBGAME_E_USER_HIGH_ENTERLIMIT=132]="CLUBGAME_E_USER_HIGH_ENTERLIMIT",t[t.CLUBGAME_E_INVALID_PARTNERID=140]="CLUBGAME_E_INVALID_PARTNERID",t[t.CLUBGAME_E_INVALID_PARTNERKEY=141]="CLUBGAME_E_INVALID_PARTNERKEY",t[t.CLUBGAME_E_PARTNER_NOT_EXIST=142]="CLUBGAME_E_PARTNER_NOT_EXIST",t[t.CLUBGAME_E_PARTNER_IS_FULL=143]="CLUBGAME_E_PARTNER_IS_FULL",t[t.CLUBGAME_E_USER_NOT_IN_PARTNER=144]="CLUBGAME_E_USER_NOT_IN_PARTNER",t[t.CLUBGAME_E_USER_PARTNER_LEAVE_STATE_ERROR=145]="CLUBGAME_E_USER_PARTNER_LEAVE_STATE_ERROR",t[t.CLUBGAME_E_USER_PARTNER_CHAG_STATE_ERROR=146]="CLUBGAME_E_USER_PARTNER_CHAG_STATE_ERROR",t[t.CLUBGAME_E_INVALID_CLUB=147]="CLUBGAME_E_INVALID_CLUB",t[t.CLUBGAME_E_PARTNER_NOT_CREATE=148]="CLUBGAME_E_PARTNER_NOT_CREATE",t[t.CLUBGAME_E_USER_PARTNER_SELT_STATE_ERROR=149]="CLUBGAME_E_USER_PARTNER_SELT_STATE_ERROR",t[t.CLUBGAME_E_PARTNER_NOT_MEMBER=150]="CLUBGAME_E_PARTNER_NOT_MEMBER",t[t.CLUBGAME_E_USER_PARTNER_REDY_STATE_ERROR=151]="CLUBGAME_E_USER_PARTNER_REDY_STATE_ERROR",t[t.CLUBGAME_E_USER_PARTNER_REDY_KICK_ERROR=152]="CLUBGAME_E_USER_PARTNER_REDY_KICK_ERROR",t[t.CLUBGAME_E_USER_PARTNER_REDY_START_ERROR=153]="CLUBGAME_E_USER_PARTNER_REDY_START_ERROR",t[t.CLUBGAME_E_SERVER_BUSY=155]="CLUBGAME_E_SERVER_BUSY",t[t.CLUBGAME_E_MAXCODE=4095]="CLUBGAME_E_MAXCODE"}(a=n.GameErrorCodeEnum||(n.GameErrorCodeEnum={})),n.GameErrorInfo=((o={})[a.CLUBGAME_E_MINCODE]="\u9519\u8bef\u7801\u6700\u5c0f\u503c",o[a.CLUBGAME_E_DBP_SEND_TIMEOUT]="DBP\u63a5\u6536\u6d88\u606f\u8d85\u65f6",o[a.CLUBGAME_E_DBP_RECV_TIMEOUT]="DBP\u56de\u5e94\u6d88\u606f\u8d85\u65f6",o[a.CLUBGAME_E_DBP_RESP_ERRFLAG]="DBP\u56de\u5e94\u9519\u8bef\u6807\u5fd7",o[a.CLUBGAME_E_DBP_RESP_PROTOCOL_NOT_PARSE]="DBP\u56de\u5e94\u534f\u8bae\u65e0\u6cd5\u89e3\u6790",o[a.CLUBGAME_E_DBP_RESP_PROTOCOL_BROKEN]="DBP\u56de\u5e94\u534f\u8bae\u4e0d\u5b8c\u6574",o[a.CLUBGAME_E_INVALID_CLIENT]="\u65e0\u6548\u5ba2\u6237\u7aef\u8bf7\u6c42",o[a.CLUBGAME_E_DEFENSE_CLIENT]="\u9632\u5fa1\u5ba2\u6237\u7aef\u8bf7\u6c42(\u4e0d\u7b26\u5408\u5ba2\u6237\u7aef\u884c\u4e3a\u7b56\u7565)",o[a.CLUBGAME_E_USER_LOGINSTEP_ERROR]="\u7528\u6237\u767b\u5f55\u73af\u8282\u9519\u8bef",o[a.CLUBGAME_E_USER_NOT_IN_CLUB]="\u73a9\u5bb6\u4e0d\u5728\u4ff1\u4e50\u90e8\u4e2d",o[a.CLUBGAME_E_USER_NOT_ALLOWED_LEAVE_GAME]="\u73a9\u5bb6\u4e0d\u5141\u8bb8\u79bb\u5f00\u6e38\u620f",o[a.CLUBGAME_E_USER_NEWUSER_ERROR]="\u521b\u5efa\u7528\u6237\u5931\u8d25",o[a.CLUBGAME_E_USER_ENTERCHECK_ERROR]="\u73a9\u5bb6\u4e0d\u6ee1\u8db3\u8fdb\u5165\u623f\u95f4\u7684\u6761\u4ef6",o[a.CLUBGAME_E_USER_OTHERLOGIN_ERROR]="\u60a8\u7684\u8d26\u53f7\u5728\u5176\u4ed6\u8bbe\u5907\u767b\u5f55\uff0c\u8bf7\u6ce8\u610f\u4fdd\u7ba1\u597d\u60a8\u7684\u8d26\u53f7\uff01",o[a.CLUBGAME_E_USER_STATE_ERROR]="\u73a9\u5bb6\u72b6\u6001\u9519\u8bef",o[a.CLUBGAME_E_INVALID_PLAYID]="\u65e0\u6548\u7684\u573a\u6b21ID",o[a.CLUBGAME_E_INVALID_BOXID]="\u65e0\u6548\u7684\u5305\u53a2ID",o[a.CLUBGAME_E_INVALID_BOXKEY]="\u65e0\u6548\u7684\u5305\u53a2\u5bc6\u94a5",o[a.CLUBGAME_E_USER_PLAYING]="\u73a9\u5bb6\u6e38\u620f\u72b6\u6001",o[a.CLUBGAME_E_USER_NOT_IN_TABLE]="\u73a9\u5bb6\u4e0d\u5728\u684c\u5b50\u4e0a",o[a.CLUBGAME_E_USER_OUT_CHEATREPORT_CNT]="\u73a9\u5bb6\u8d85\u51fa\u4e3e\u62a5\u6b21\u6570",o[a.CLUBGAME_E_BOX_NOT_EXIST]="\u5305\u53a2\u5df2\u4e0d\u5b58\u5728",o[a.CLUBGAME_E_CONTINUE_TABLE_IS_READY]="\u540c\u684c\u73a9\u5bb6\u5df2\u7eed\u73a9\uff0c\u8bf7\u7b49\u5f85",o[a.CLUBGAME_E_USER_NEWTABLE_ERROR]="\u521b\u5efa\u684c\u5b50\u5931\u8d25",o[a.CLUBGAME_E_USER_ENTERTABLE_ERROR]="\u8fdb\u5165\u684c\u5b50\u5931\u8d25",o[a.CLUBGAME_E_CONTINUE_TABLE]="\u7eed\u73a9\u684c\u5b50\u4e0d\u80fd\u76f4\u63a5\u8fdb\u5165",o[a.CLUBGAME_E_CONTINUE_TABLE_NOT_READY]="\u7eed\u73a9\u684c\u5b50\uff0c\u684c\u957f\u672a\u51c6\u5907",o[a.CLUBGAME_E_CONTINUE_TABLE_OWNER]="\u7eed\u73a9\u684c\u5b50\u4e0d\u80fd\u76f4\u63a5\u8fdb\u5165\uff08\u623f\u4e3b\uff09",o[a.CLUBGAME_E_TABLE_PLAYING]="\u684c\u5b50\u5df2\u5f00\u59cb",o[a.CLUBGAME_E_TABLE_INVALID_SEAT]="\u684c\u5b50\u6ca1\u6709\u7a7a\u4f4d\u7f6e",o[a.CLUBGAME_E_TABLE_OVER_PROLONGLIMIT]="\u8d85\u8fc7\u7684\u6700\u5927\u5ef6\u957f\u5c40\u6570",o[a.CLUBGAME_E_TABLE_NOT_AGAINPROLONG]="\u540c\u4e00\u5c40\u4e2d\u53ea\u80fd\u5ef6\u957f\u4e00\u6b21",o[a.CLUBGAME_E_TABLE_NOT_GAME]="\u684c\u5b50\u975e\u6e38\u620f\u72b6\u6001",o[a.CLUBGAME_E_USER_IS_INROOM_WAITTABLE]="\u73a9\u5bb6\u5df2\u7ecf\u5728\u623f\u95f4\u4e2d\u7b49\u5f85\u5206\u914d\u684c\u5b50",o[a.CLUBGAME_E_USER_LOW_ENTERLIMIT]="\u73a9\u5bb6\u4f4e\u4e8e\u8fdb\u5165\u623f\u95f4\u7684\u9650\u5236",o[a.CLUBGAME_E_USER_HIGH_ENTERLIMIT]="\u73a9\u5bb6\u9ad8\u4e8e\u8fdb\u5165\u623f\u95f4\u7684\u9650\u5236",o[a.CLUBGAME_E_INVALID_PARTNERID]="\u65e0\u6548\u7684\u7ec4\u961f\u961f\u4f0dID",o[a.CLUBGAME_E_INVALID_PARTNERKEY]="\u65e0\u6548\u7684\u7ec4\u961f\u961f\u4f0d\u5bc6\u94a5",o[a.CLUBGAME_E_PARTNER_NOT_EXIST]="\u961f\u4f0d\u5df2\u89e3\u6563\uff0c\u52a0\u5165\u5931\u8d25",o[a.CLUBGAME_E_PARTNER_IS_FULL]="\u961f\u4f0d\u5df2\u6ee1\uff0c\u8bf7\u91cd\u65b0\u52a0\u5165\u6216\u521b\u5efa\u65b0\u961f\u4f0d",o[a.CLUBGAME_E_USER_NOT_IN_PARTNER]="\u73a9\u5bb6\u4e0d\u5728\u7ec4\u961f\u961f\u4f0d",o[a.CLUBGAME_E_USER_PARTNER_LEAVE_STATE_ERROR]="\u73a9\u5bb6\u79bb\u5f00\u961f\u4f0d\u72b6\u6001\u9519\u8bef",o[a.CLUBGAME_E_USER_PARTNER_CHAG_STATE_ERROR]="\u73a9\u5bb6\u66f4\u6362\u961f\u4f0d\u72b6\u6001\u9519\u8bef",o[a.CLUBGAME_E_INVALID_CLUB]="\u65e0\u6548\u7684\u7ec4\u961f\u961f\u4f0d\u5bc6\u94a5",o[a.CLUBGAME_E_PARTNER_NOT_CREATE]="\u73a9\u5bb6\u4e0d\u662f\u961f\u4f0d\u521b\u5efa\u8005",o[a.CLUBGAME_E_USER_PARTNER_SELT_STATE_ERROR]="\u73a9\u5bb6\u9009\u573a\u961f\u4f0d\u72b6\u6001\u9519\u8bef",o[a.CLUBGAME_E_PARTNER_NOT_MEMBER]="\u73a9\u5bb6\u4e0d\u662f\u961f\u4f0d\u961f\u5458",o[a.CLUBGAME_E_USER_PARTNER_REDY_STATE_ERROR]="\u73a9\u5bb6\u51c6\u5907\u961f\u4f0d\u72b6\u6001\u9519\u8bef",o[a.CLUBGAME_E_USER_PARTNER_REDY_KICK_ERROR]="\u73a9\u5bb6\u51c6\u5907\u961f\u4f0d\u72b6\u6001\u9519\u8bef",o[a.CLUBGAME_E_USER_PARTNER_REDY_START_ERROR]="\u73a9\u5bb6\u5f00\u59cb\u961f\u4f0d\u72b6\u6001\u9519\u8bef",o[a.CLUBGAME_E_SERVER_BUSY]="\u5f53\u524d\u670d\u52a1\u4e0d\u7a33\u5b9a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",o),cc._RF.pop()},{}],ErrorCodeLobbyConfig:[function(t,e,n){"use strict";var o,a;cc._RF.push(e,"759b44s0G9LfZFbOwi+3X4+","ErrorCodeLobbyConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.LobbyErrorInfo=void 0,function(t){t[t.CLUBLOBBY_OK=0]="CLUBLOBBY_OK",t[t.CLUBLOBBY_E_MINCODE=1]="CLUBLOBBY_E_MINCODE",t[t.CLUBLOBBY_E_DBP_SEND_FAILED=20]="CLUBLOBBY_E_DBP_SEND_FAILED",t[t.CLUBLOBBY_E_DBP_RECV_TIMEOUT=21]="CLUBLOBBY_E_DBP_RECV_TIMEOUT",t[t.CLUBLOBBY_E_DBP_RESP_ERRFLAG=22]="CLUBLOBBY_E_DBP_RESP_ERRFLAG",t[t.CLUBLOBBY_E_DBP_RESP_PROTOCOL_NOT_PARSE=23]="CLUBLOBBY_E_DBP_RESP_PROTOCOL_NOT_PARSE",t[t.CLUBLOBBY_E_DBP_RESP_PROTOCOL_BROKEN=24]="CLUBLOBBY_E_DBP_RESP_PROTOCOL_BROKEN",t[t.CLUBLOBBY_E_INVALID_CLIENT=30]="CLUBLOBBY_E_INVALID_CLIENT",t[t.CLUBLOBBY_E_DEFENSE_CLIENT=41]="CLUBLOBBY_E_DEFENSE_CLIENT",t[t.CLUBLOBBY_E_NOTFOUND_CONF=50]="CLUBLOBBY_E_NOTFOUND_CONF",t[t.CLUBLOBBY_E_INVALID_VERSION=100]="CLUBLOBBY_E_INVALID_VERSION",t[t.CLUBLOBBY_E_LATEST_VERSION=101]="CLUBLOBBY_E_LATEST_VERSION",t[t.CLUBLOBBY_E_UPDATE_VERSION=102]="CLUBLOBBY_E_UPDATE_VERSION",t[t.CLUBLOBBY_E_INVALID_APPID=200]="CLUBLOBBY_E_INVALID_APPID",t[t.CLUBLOBBY_E_NOTFOUND_APPID=201]="CLUBLOBBY_E_NOTFOUND_APPID",t[t.CLUBLOBBY_E_REDIRECT_SERVICE=301]="CLUBLOBBY_E_REDIRECT_SERVICE",t[t.CLUBLOBBY_E_INVALID_FILEINDEX=500]="CLUBLOBBY_E_INVALID_FILEINDEX",t[t.CLUBLOBBY_E_NOTFOUND_FILEINDEX=501]="CLUBLOBBY_E_NOTFOUND_FILEINDEX",t[t.CLUBLOBBY_E_INVALID_TICKETID=1e3]="CLUBLOBBY_E_INVALID_TICKETID",t[t.CLUBLOBBY_E_NOTFOUND_TICKET=1001]="CLUBLOBBY_E_NOTFOUND_TICKET",t[t.CLUBLOBBY_E_NOTSET_TICKETCONFIG=1002]="CLUBLOBBY_E_NOTSET_TICKETCONFIG",t[t.CLUBLOBBY_E_INVALID_AREAID=1010]="CLUBLOBBY_E_INVALID_AREAID",t[t.CLUBLOBBY_E_NOTFOUND_AREA=1011]="CLUBLOBBY_E_NOTFOUND_AREA",t[t.CLUBLOBBY_E_NO_CONF_AREA=1012]="CLUBLOBBY_E_NO_CONF_AREA",t[t.CLUBLOBBY_E_NO_OPEN_AREA=1013]="CLUBLOBBY_E_NO_OPEN_AREA",t[t.CLUBLOBBY_E_INVALID_GAMEID=1020]="CLUBLOBBY_E_INVALID_GAMEID",t[t.CLUBLOBBY_E_NOTFOUND_GAME=1021]="CLUBLOBBY_E_NOTFOUND_GAME",t[t.CLUBLOBBY_E_NO_CONF_GAME=1022]="CLUBLOBBY_E_NO_CONF_GAME",t[t.CLUBLOBBY_E_NO_OPEN_GAME=1023]="CLUBLOBBY_E_NO_OPEN_GAME",t[t.CLUBLOBBY_E_INVALID_CLUBID=1030]="CLUBLOBBY_E_INVALID_CLUBID",t[t.CLUBLOBBY_E_NOTFOUND_CLUB=1031]="CLUBLOBBY_E_NOTFOUND_CLUB",t[t.CLUBLOBBY_E_NO_CONF_CLUB=1032]="CLUBLOBBY_E_NO_CONF_CLUB",t[t.CLUBLOBBY_E_NO_OPEN_CLUB=1033]="CLUBLOBBY_E_NO_OPEN_CLUB",t[t.CLUBLOBBY_E_INVALID_ROOMID=1040]="CLUBLOBBY_E_INVALID_ROOMID",t[t.CLUBLOBBY_E_NOTFOUND_ROOM=1041]="CLUBLOBBY_E_NOTFOUND_ROOM",t[t.CLUBLOBBY_E_NO_CONF_ROOM=1042]="CLUBLOBBY_E_NO_CONF_ROOM",t[t.CLUBLOBBY_E_NO_OPEN_ROOM=1043]="CLUBLOBBY_E_NO_OPEN_ROOM",t[t.CLUBLOBBY_E_INVALID_MATCHID=1050]="CLUBLOBBY_E_INVALID_MATCHID",t[t.CLUBLOBBY_E_NOTFOUND_MATCH=1051]="CLUBLOBBY_E_NOTFOUND_MATCH",t[t.CLUBLOBBY_E_NO_CONF_MATCH=1052]="CLUBLOBBY_E_NO_CONF_MATCH",t[t.CLUBLOBBY_E_NO_OPEN_MATCH=1053]="CLUBLOBBY_E_NO_OPEN_MATCH",t[t.CLUBLOBBY_E_INVALID_MATCHSUBID=1060]="CLUBLOBBY_E_INVALID_MATCHSUBID",t[t.CLUBLOBBY_E_NOTFOUND_MATCHSUB=1061]="CLUBLOBBY_E_NOTFOUND_MATCHSUB",t[t.CLUBLOBBY_E_NO_CONF_MATCHSUB=1062]="CLUBLOBBY_E_NO_CONF_MATCHSUB",t[t.CLUBLOBBY_E_NO_OPEN_MATCHSUB=1063]="CLUBLOBBY_E_NO_OPEN_MATCHSUB",t[t.CLUBLOBBY_E_INVALID_MATCHFEEID=1070]="CLUBLOBBY_E_INVALID_MATCHFEEID",t[t.CLUBLOBBY_E_NOTFOUND_MATCHFEE=1071]="CLUBLOBBY_E_NOTFOUND_MATCHFEE",t[t.CLUBLOBBY_E_NO_CONF_MATCHFEE=1072]="CLUBLOBBY_E_NO_CONF_MATCHFEE",t[t.CLUBLOBBY_E_NO_OPEN_MATCHFEE=1073]="CLUBLOBBY_E_NO_OPEN_MATCHFEE",t[t.CLUBLOBBY_E_INVALID_MATCHAWARDID=1080]="CLUBLOBBY_E_INVALID_MATCHAWARDID",t[t.CLUBLOBBY_E_NOTFOUND_MATCHAWARD=1081]="CLUBLOBBY_E_NOTFOUND_MATCHAWARD",t[t.CLUBLOBBY_E_NO_CONF_MATCHAWARD=1082]="CLUBLOBBY_E_NO_CONF_MATCHAWARD",t[t.CLUBLOBBY_E_NO_OPEN_MATCHAWARD=1083]="CLUBLOBBY_E_NO_OPEN_MATCHAWARD",t[t.CLUBLOBBY_E_INVALID_TEAHOUSEDATA=1090]="CLUBLOBBY_E_INVALID_TEAHOUSEDATA",t[t.CLUBLOBBY_E_TEAHOUSECARDS_TO_LOW=1091]="CLUBLOBBY_E_TEAHOUSECARDS_TO_LOW",t[t.CLUBLOBBY_E_INVALID_TEAHOUSEOWNER=1092]="CLUBLOBBY_E_INVALID_TEAHOUSEOWNER",t[t.CLUBLOBBY_E_INVALID_BOXRULES=1093]="CLUBLOBBY_E_INVALID_BOXRULES",t[t.CLUBLOBBY_E_INVALID_STOREID=1100]="CLUBLOBBY_E_INVALID_STOREID",t[t.CLUBLOBBY_E_ERROR_STOREINFO=1101]="CLUBLOBBY_E_ERROR_STOREINFO",t[t.CLUBLOBBY_E_ERROR_RANKAWARD=1200]="CLUBLOBBY_E_ERROR_RANKAWARD",t[t.CLUBLOBBY_E_MAXCODE=4095]="CLUBLOBBY_E_MAXCODE"}(a||(a={})),n.LobbyErrorInfo=((o={})[a.CLUBLOBBY_E_MINCODE]="\u9519\u8bef\u7801\u6700\u5c0f\u503c",o[a.CLUBLOBBY_E_DBP_SEND_FAILED]="\u53d1\u9001DBP\u6d88\u606f\u5931\u8d25",o[a.CLUBLOBBY_E_DBP_RECV_TIMEOUT]="\u63a5\u6536DBP\u6d88\u606f\u8d85\u65f6",o[a.CLUBLOBBY_E_DBP_RESP_ERRFLAG]="\u63a5\u6536DBP\u9519\u8bef\u6807\u5fd7",o[a.CLUBLOBBY_E_DBP_RESP_PROTOCOL_NOT_PARSE]="\u63a5\u6536DBP\u6d88\u606f\u65e0\u6cd5\u89e3\u6790",o[a.CLUBLOBBY_E_DBP_RESP_PROTOCOL_BROKEN]="\u63a5\u6536DBP\u6d88\u606f\u4e0d\u5b8c\u6574",o[a.CLUBLOBBY_E_INVALID_CLIENT]="\u65e0\u6548\u5ba2\u6237\u7aef\u8bf7\u6c42",o[a.CLUBLOBBY_E_DEFENSE_CLIENT]="\u9632\u5fa1\u5ba2\u6237\u7aef\u8bf7\u6c42",o[a.CLUBLOBBY_E_NOTFOUND_CONF]="\u672a\u627e\u5230\u914d\u7f6e\u4fe1\u606f",o[a.CLUBLOBBY_E_INVALID_VERSION]="\u65e0\u6548\u7248\u672c",o[a.CLUBLOBBY_E_LATEST_VERSION]="\u5df2\u662f\u6700\u65b0\u7248\u672c",o[a.CLUBLOBBY_E_UPDATE_VERSION]="\u9700\u8981\u66f4\u65b0\u7248\u672c",o[a.CLUBLOBBY_E_INVALID_APPID]="\u65e0\u6548\u8fdb\u7a0b(invalid appid)",o[a.CLUBLOBBY_E_NOTFOUND_APPID]="\u672a\u627e\u5230\u8fdb\u7a0b(not found appid)",o[a.CLUBLOBBY_E_REDIRECT_SERVICE]="\u91cd\u5b9a\u5411\u670d\u52a1(redirect service) +1.0.0.1",o[a.CLUBLOBBY_E_INVALID_FILEINDEX]="\u65e0\u6548\u6587\u4ef6\u7d22\u5f15",o[a.CLUBLOBBY_E_NOTFOUND_FILEINDEX]="\u672a\u627e\u5230\u6587\u4ef6\u7d22\u5f15",o[a.CLUBLOBBY_E_INVALID_TICKETID]="\u65e0\u6548\u51ed\u8bc1ID",o[a.CLUBLOBBY_E_NOTFOUND_TICKET]="\u672a\u627e\u5230\u51ed\u8bc1",o[a.CLUBLOBBY_E_NOTSET_TICKETCONFIG]="\u672a\u914d\u7f6e\u51ed\u8bc1config",o[a.CLUBLOBBY_E_INVALID_AREAID]="\u65e0\u6548\u533a\u57dfID(invalid areaid)",o[a.CLUBLOBBY_E_NOTFOUND_AREA]="\u6ca1\u6709\u627e\u5230\u533a\u57df(not found areaid)",o[a.CLUBLOBBY_E_NO_CONF_AREA]="\u6ca1\u6709\u914d\u7f6e\u533a\u57df",o[a.CLUBLOBBY_E_NO_OPEN_AREA]="\u6ca1\u6709\u5f00\u653e\u533a\u57df",o[a.CLUBLOBBY_E_INVALID_GAMEID]="\u65e0\u6548\u6e38\u620fID(invalid gameid)",o[a.CLUBLOBBY_E_NOTFOUND_GAME]="\u6ca1\u6709\u627e\u5230\u6e38\u620f(not found gameid)",o[a.CLUBLOBBY_E_NO_CONF_GAME]="\u6ca1\u6709\u914d\u7f6e\u6e38\u620f",o[a.CLUBLOBBY_E_NO_OPEN_GAME]="\u6ca1\u6709\u5f00\u653e\u6e38\u620f",o[a.CLUBLOBBY_E_INVALID_CLUBID]="\u65e0\u6548\u4ff1\u4e50\u90e8ID(invalid clubid)",o[a.CLUBLOBBY_E_NOTFOUND_CLUB]="\u6ca1\u6709\u627e\u5230\u4ff1\u4e50\u90e8(not found clubid)",o[a.CLUBLOBBY_E_NO_CONF_CLUB]="\u6ca1\u6709\u914d\u7f6e\u4ff1\u4e50\u90e8",o[a.CLUBLOBBY_E_NO_OPEN_CLUB]="\u6ca1\u6709\u5f00\u653e\u4ff1\u4e50\u90e8",o[a.CLUBLOBBY_E_INVALID_ROOMID]="\u65e0\u6548\u623f\u95f4ID(invalid roomid)",o[a.CLUBLOBBY_E_NOTFOUND_ROOM]="\u6ca1\u6709\u627e\u5230\u623f\u95f4(not found roomid)",o[a.CLUBLOBBY_E_NO_CONF_ROOM]="\u6ca1\u6709\u914d\u7f6e\u623f\u95f4",o[a.CLUBLOBBY_E_NO_OPEN_ROOM]="\u6ca1\u6709\u5f00\u653e\u623f\u95f4",o[a.CLUBLOBBY_E_INVALID_MATCHID]="\u65e0\u6548\u6bd4\u8d5bID(invalid matchid)",o[a.CLUBLOBBY_E_NOTFOUND_MATCH]="\u6ca1\u6709\u627e\u5230\u6bd4\u8d5b(not found matchid)",o[a.CLUBLOBBY_E_NO_CONF_MATCH]="\u6ca1\u6709\u914d\u7f6e\u6bd4\u8d5b",o[a.CLUBLOBBY_E_NO_OPEN_MATCH]="\u6ca1\u6709\u5f00\u653e\u6bd4\u8d5b",o[a.CLUBLOBBY_E_INVALID_MATCHSUBID]="\u65e0\u6548\u6bd4\u8d5b\u4e3b\u9898ID(invalid matchsubid)",o[a.CLUBLOBBY_E_NOTFOUND_MATCHSUB]="\u6ca1\u6709\u627e\u5230\u6bd4\u8d5b\u4e3b\u9898(not found matchsubid)",o[a.CLUBLOBBY_E_NO_CONF_MATCHSUB]="\u6ca1\u6709\u914d\u7f6e\u6bd4\u8d5b\u4e3b\u9898",o[a.CLUBLOBBY_E_NO_OPEN_MATCHSUB]="\u6ca1\u6709\u5f00\u653e\u6bd4\u8d5b\u4e3b\u9898",o[a.CLUBLOBBY_E_INVALID_MATCHFEEID]="\u65e0\u6548\u6bd4\u8d5b\u8d39\u7528ID(invalid matchfeeid)",o[a.CLUBLOBBY_E_NOTFOUND_MATCHFEE]="\u6ca1\u6709\u627e\u5230\u6bd4\u8d5b\u8d39\u7528(not found matchfeeid)",o[a.CLUBLOBBY_E_NO_CONF_MATCHFEE]="\u6ca1\u6709\u914d\u7f6e\u6bd4\u8d5b\u8d39\u7528",o[a.CLUBLOBBY_E_NO_OPEN_MATCHFEE]="\u6ca1\u6709\u5f00\u653e\u6bd4\u8d5b\u8d39\u7528",o[a.CLUBLOBBY_E_INVALID_MATCHAWARDID]="\u65e0\u6548\u6bd4\u8d5b\u5956\u52b1ID(invalid matchawardid)",o[a.CLUBLOBBY_E_NOTFOUND_MATCHAWARD]="\u6ca1\u6709\u627e\u5230\u6bd4\u8d5b\u5956\u52b1(not found matchawardid)",o[a.CLUBLOBBY_E_NO_CONF_MATCHAWARD]="\u6ca1\u6709\u914d\u7f6e\u6bd4\u8d5b\u5956\u52b1",o[a.CLUBLOBBY_E_NO_OPEN_MATCHAWARD]="\u6ca1\u6709\u5f00\u653e\u6bd4\u8d5b\u5956\u52b1",o[a.CLUBLOBBY_E_INVALID_TEAHOUSEDATA]="\u65e0\u6548\u7684\u8336\u9986\u914d\u7f6e\u6570\u636e",o[a.CLUBLOBBY_E_TEAHOUSECARDS_TO_LOW]="\u521b\u5efa\u8336\u9986\u7684\u623f\u5361\u6570\u592a\u5c11",o[a.CLUBLOBBY_E_INVALID_TEAHOUSEOWNER]="\u4e0d\u662f\u4ee3\u7406\u8d26\u53f7",o[a.CLUBLOBBY_E_INVALID_BOXRULES]="\u65e0\u6548\u7684\u5305\u53a2\u89c4\u5219",o[a.CLUBLOBBY_E_INVALID_STOREID]="\u65e0\u6548\u5546\u54c1id",o[a.CLUBLOBBY_E_ERROR_STOREINFO]="\u5546\u54c1\u4fe1\u606f\u914d\u7f6e\u9519\u8bef",o[a.CLUBLOBBY_E_ERROR_RANKAWARD]="\u672a\u627e\u5230\u6392\u884c\u699c\u5956\u52b1",o),cc._RF.pop()},{}],EventManager:[function(t,e,n){"use strict";cc._RF.push(e,"1ffe9b4IXtBX53jvPLaq1OO","EventManager");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.EventManager=n.EventHandler=void 0;var l=t("./BaseManager"),u=t("../Root/ManagerRoot"),d=function(){function t(t,e,n){void 0===n&&(n=!1),this._enabled=!0,this._listener=t,this._argArray=e,this._isOnce=n}return Object.defineProperty(t.prototype,"listener",{get:function(){return this._listener},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"argArray",{get:function(){return this._argArray},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOnce",{get:function(){return this._isOnce},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!1,configurable:!0}),i([jsClass("EventHandler")],t)}();n.EventHandler=d;var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._typeCallerMap=new Map,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return u.ManagerRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.has=function(t,e,n){return this.isValidParams(t,e,n)&&null!==this.find(t,e,n)},e.prototype.noLogEmit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this._emit(t,e,!1)},e.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this._emit(t,e,!0)},e.prototype._emit=function(t,e,n){var o,a,i,l,u;if(!t)return console.error("Event type is null!"),!1;n&&console.log.apply(console,s(["trigger "+t+(e.length>0?": ":".")],e));var d=[],p=[],h=this._typeCallerMap.get(t);if(h){try{for(var _=c(h),f=_.next();!f.done;f=_.next()){var m=r(f.value,2),g=m[0],y=m[1];try{for(var I=(i=void 0,c(y)),C=I.next();!C.done;C=I.next()){var M=C.value;d.push(M),p.push(g)}}catch(b){i={error:b}}finally{try{C&&!C.done&&(l=I.return)&&l.call(I)}finally{if(i)throw i.error}}for(var v=y.length-1;v>=0;--v)y[v].isOnce&&y.splice(v,1);y.length<=0&&h.delete(g)}}catch(U){o={error:U}}finally{try{f&&!f.done&&(a=_.return)&&a.call(_)}finally{if(o)throw o.error}}h.size<=0&&this._typeCallerMap.delete(t)}var E=d.length;for(v=0;v<E;++v)if((M=d[v]).enabled)try{(u=M.listener).call.apply(u,s([p[v]],M.argArray||[],e))}catch(S){var A=S.stack.split("at ").splice(1).map(function(t){var e=t.split(/\s+/);return e.splice(e.length-2),e.join(" ")}).join(";"),P=JSON.stringify(e);cc.systemEvent.emit("CatchError",{type:"EventEmit",eventType:t,error:S,stack:A,args:P}),console.error(S)}return E>0},e.prototype.on=function(t,e,n,o,a){return this.addListener(t,e,n,!1,o,a)},e.prototype.once=function(t,e,n,o,a){return this.addListener(t,e,n,!0,o,a)},e.prototype.off=function(t,e,n,o){this.removeBy(function(a,i,r){return!(t&&t!==a||e&&e!==i||n&&n!==r.listener||o&&!r.isOnce)})},e.prototype.offAll=function(t){var e,n,o,a,i=[];try{for(var s=c(this._typeCallerMap),l=s.next();!l.done;l=s.next()){var u=r(l.value,2),d=u[0],p=u[1];p.delete(t),p.size<=0&&i.push(d)}}catch(f){e={error:f}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}try{for(var h=c(i),_=h.next();!_.done;_=h.next())d=_.value,this._typeCallerMap.delete(d)}catch(m){o={error:m}}finally{try{_&&!_.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}},e.prototype.addListener=function(t,e,n,o,a,i){if(!this.isValidParams(t,e,n))return null;var r=this.find(t,e,n);if(r)console.error("Listener is already exist!",t);else{r=new d(n,a,o);var s=this._typeCallerMap.get(t).get(e);i?s.unshift(r):s.push(r)}return r},e.prototype.removeBy=function(t){var e,n,o,a;if(t)try{for(var i=c(this._typeCallerMap),s=i.next();!s.done;s=i.next()){var l=r(s.value,2),u=l[0],d=l[1];try{for(var p=(o=void 0,c(d)),h=p.next();!h.done;h=p.next()){for(var _=r(h.value,2),f=_[0],m=_[1],g=m.length-1;g>=0;--g)t(u,f,m[g])&&m.splice(g,1);m.length<=0&&d.delete(f)}}catch(y){o={error:y}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}d.size<=0&&this._typeCallerMap.delete(u)}}catch(I){e={error:I}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},e.prototype.find=function(t,e,n){var o,a,i,r;this._typeCallerMap.has(t)?i=this._typeCallerMap.get(t):(i=new Map,this._typeCallerMap.set(t,i)),i.has(e)?r=i.get(e):(r=[],i.set(e,r));try{for(var s=c(r),l=s.next();!l.done;l=s.next()){var u=l.value;if(u.listener===n)return u}}catch(d){o={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}return null},e.prototype.isValidParams=function(t,e,n){return t?e?!!n||(console.error("Listener is null!"),!1):(console.error("Caller is null!"),!1):(console.error("Event type is null!"),!1)},i([jsClass],e)}(l.BaseManager);n.EventManager=p,cc._RF.pop()},{"../Root/ManagerRoot":"ManagerRoot","./BaseManager":"BaseManager"}],ExchangeDetailUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"7c8dbAAR5NM67aAI8GtPp1z","ExchangeDetailUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./ExchangeDetailUI_Window"),a=t("./ExchangeDetailUI_MainPanel"),i=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default)},t}();n.default=i,cc._RF.pop()},{"./ExchangeDetailUI_MainPanel":"ExchangeDetailUI_MainPanel","./ExchangeDetailUI_Window":"ExchangeDetailUI_Window"}],ExchangeDetailUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"8d034t1KyRA+Y0BMDpVUHxj","ExchangeDetailUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeDetailUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://pe7vab66emgj9",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ExchangeDetailUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"06e2aGQXxVN+JtjSXkLzu5i","ExchangeDetailUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeDetailUI","Window")},e.prototype.onConstruct=function(){this.m_btnExit=this.getChildAt(1),this.m_loader=this.getChildAt(3),this.m_btnExchange=this.getChildAt(4),this.m_name=this.getChildAt(7),this.m_txtStock=this.getChildAt(9),this.m_txtLimit=this.getChildAt(11)},e.URL="ui://pe7vab66emgj8",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ExchangeDetailUI:[function(t,e,n){"use strict";cc._RF.push(e,"121cePPyL9AmLJjWvIlABDw","ExchangeDetailUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ExchangeDetailUI=void 0;var r,s=t("../../Framework/Manager/UIManager"),c=t("../../Framework/UI/FadeUI"),l=t("../Award/AwardUI"),u=t("../Base/Data/DataProps"),d=t("../Base/View/UIHelp"),p=t("./ExchangeDetailUI/ExchangeDetailUIBinder"),h=t("./ExchangeModel"),_=t("../UserInfo/UserInfoModel"),f=t("../../Framework/Manager/EventManager"),m=t("../Base/Data/DataEvent"),g=t("./ExchangeSureEntityUI"),y=t("./ExchangeSureCardUI"),I=t("../Match/MatchModel"),C=t("../Match/MatchConstant");(function(t){t[t.ONE_DAY_NOTECARD=1403]="ONE_DAY_NOTECARD",t[t.SEVEN_DAY_NOTECARD=1369]="SEVEN_DAY_NOTECARD",t[t.TICKET_GOLDEN_EGG=20039]="TICKET_GOLDEN_EGG"})(r||(r={}));var M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._exGoods=null,e}return a(e,t),e.uiBind=function(){p.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return h.ExchangeModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){this.view.m_Window.m_btnExit.onClick(this.onExitClick,this),this.view.m_Window.m_btnExchange.onClick(this.onBtnExchange,this)},e.prototype.init=function(t){this._exGoods=t,this.initUI(t)},e.prototype.initUI=function(t){this.view.m_Window.m_name.text=t.name,this.view.m_Window.m_loader.url=t.icon,this.view.m_Window.m_txtStock.templateVars={num:t.stock.toString()};var e=t.exchanged,n=t.limit_num,o=n-e;this.view.m_Window.m_txtLimit.text=0===n?"\u65e0\u9650\u5236":o+"/"+n;var a=""+t.price;u.DataProps.instance.isAwardTicketPropID(t.propid)?a="j"+t.price:u.DataProps.instance.isGoldenEggPropID(t.propid)?a="d"+t.price:u.DataProps.instance.is100PhoneFeePropID(t.propid)?a="\u62e5\u6709"+t.price:u.DataProps.instance.is200JDKPropID(t.propid)&&(a="\u62e5\u6709"+t.price),this.view.m_Window.m_btnExchange.title=a},e.prototype.onBtnExchange=function(){var t=this;this._exGoods.exShopListEnum===h.ExShopListEnum.APP_FISH?this._exGoods.type===h.GoodTypeEnum.ENTITY?s.UIManager.instance.open(g.ExchangeSureEntityUI).then(function(e){e.setExchangeCallBack(function(){t.refreshExchangeShop(t._exGoods,t.model.getAddressInfo().phone)}),e.initData(t._exGoods)}):this._exGoods.type===h.GoodTypeEnum.JDK||this._exGoods.type===h.GoodTypeEnum.PHONE_FEE?s.UIManager.instance.open(y.ExchangeSureCardUI).then(function(e){e.setExchangeCallBack(function(){t.refreshExchangeShop(t._exGoods,t.model.getAddressInfo().phone)}),e.initData(t._exGoods)}):this._exGoods.type===h.GoodTypeEnum.PROP&&this.refreshExchangeShop(this._exGoods):this.refreshOldExchangeShop()},e.prototype.refreshOldExchangeShop=function(){var t=this;this._exGoods.stock<=0?d.UIHelp.instance.showDialog("\u5546\u54c1\u5df2\u88ab\u5151\u5b8c\uff0c\u8bf7\u5151\u6362\u5176\u4ed6\u5546\u54c1\uff0c\u6216\u8005\u8bf7\u660e\u65e5\u518d\u6765",function(){}):this._exGoods.limit_num-this._exGoods.exchanged<=0&&this._exGoods.limit_num?d.UIHelp.instance.showDialog("\u60a8\u4eca\u5929\u5151\u6362\u6b64\u5546\u54c1\u7684\u6b21\u6570\u5df2\u7ecf\u7528\u5b8c\u5566\uff0c\u53bb\u770b\u770b\u522b\u7684\u5546\u54c1\u5427",function(){}):_.UserInfoModel.instance.getPropCount(u.PropIDEnum.AWARD_TICKET)<this._exGoods.price?d.UIHelp.instance.showDialog("\u5151\u6362\u5238\u4e0d\u8db3",function(){}):h.ExchangeModel.instance.reqOnExchange(h.ExShopListEnum.H5_NORMAL,this._exGoods.gid,function(e){if(e){var n="prop"==t._exGoods.type?t._exGoods.name+"x1":null,o=[{awardType:u.PropTypeEnum.SINGLE,count:t._exGoods.value,resName:t._exGoods.icon,awardDesc:n}];if(s.UIManager.instance.open(l.AwardUI).then(function(t){t.init(o)}),_.UserInfoModel.instance.addProp(t._exGoods.propid,-t._exGoods.price),"sr"===t._exGoods.type){var a;a=Long.isLong(_.UserInfoModel.instance.userInfo.gold)?Long.fromNumber(t._exGoods.value).add(_.UserInfoModel.instance.userInfo.gold):t._exGoods.value+_.UserInfoModel.instance.userInfo.gold,_.UserInfoModel.instance.setUserInfo({gold:a})}else if("prop"===t._exGoods.type){var i=void 0;r.ONE_DAY_NOTECARD===t._exGoods.gid?i=u.PropIDEnum.ONE_DAY_NOTECARD:r.SEVEN_DAY_NOTECARD===t._exGoods.gid&&(i=u.PropIDEnum.SEVEN_DAY_NOTECARD),_.UserInfoModel.instance.addProp(i,t._exGoods.value)}f.EventManager.instance.emit(m.DataEvent.UserInfoUpdate),t._exGoods.stock-=1,t._exGoods.exchanged+=1,t.initUI(t._exGoods),t.onExitClick()}})},e.prototype.refreshExchangeShop=function(t,e,n){var o=this;if(t.stock<=0)d.UIHelp.instance.showDialog("\u5546\u54c1\u5df2\u88ab\u5151\u5b8c\uff0c\u8bf7\u5151\u6362\u5176\u4ed6\u5546\u54c1\uff0c\u6216\u8005\u8bf7\u660e\u65e5\u518d\u6765",function(){});else if(t.limit_num&&t.limit_num-t.exchanged<=0)d.UIHelp.instance.showDialog("\u60a8\u4eca\u5929\u5151\u6362\u6b64\u5546\u54c1\u7684\u6b21\u6570\u5df2\u7ecf\u7528\u5b8c\u5566\uff0c\u53bb\u770b\u770b\u522b\u7684\u5546\u54c1\u5427",function(){});else{if(u.DataProps.instance.is100PhoneFeePropID(t.propid)){if(_.UserInfoModel.instance.getPropCount(u.PropIDEnum.EXCHANGE_PHONE_FEE_100)<t.price)return void d.UIHelp.instance.showDialog("\u8bdd\u8d39\u9053\u5177\u4e0d\u8db3",function(){})}else if(u.DataProps.instance.is200JDKPropID(t.propid)){if(_.UserInfoModel.instance.getPropCount(u.PropIDEnum.EXCHANGE_JDK_200)<t.price)return void d.UIHelp.instance.showDialog("\u4eac\u4e1c\u5361\u9053\u5177\u4e0d\u8db3",function(){})}else if(_.UserInfoModel.instance.getPropCount(u.PropIDEnum.EXCHANGE_GOLDEN_EGG)<t.price)return void d.UIHelp.instance.showDialog("\u91d1\u86cb\u4e0d\u8db3",function(){});h.ExchangeModel.instance.reqOnExchange(h.ExShopListEnum.APP_FISH,t.gid,function(e){if(e){var a=_.UserInfoModel.instance.userInfo.nickname||"";I.MatchModel.instance.reqUpMatchLogExchange(a+","+t.name,function(t){t&&f.EventManager.instance.emit(C.MatchDataEvent.MatchExchangeLog)}),_.UserInfoModel.instance.addProp(t.propid,-t.price),o._exGoods.type===h.GoodTypeEnum.PROP&&r.TICKET_GOLDEN_EGG===o._exGoods.gid&&_.UserInfoModel.instance.addProp(u.PropIDEnum.TICKET_GOLDEN_EGG,o._exGoods.value),f.EventManager.instance.emit(m.DataEvent.ToastData,"\u5151\u6362\u6210\u529f~"),f.EventManager.instance.emit(m.DataEvent.UpdateProp),f.EventManager.instance.emit(m.DataEvent.UserInfoUpdate),o._exGoods.stock-=1,o._exGoods.exchanged+=1,o.initUI(o._exGoods),n&&n(!0,"\u5151\u6362\u6210\u529f\uff01")}else f.EventManager.instance.emit(m.DataEvent.ToastData,"\u5151\u6362\u5931\u8d25~"),n&&n(!0,"\u5151\u6362\u5931\u8d25\uff01")},e)}},i([jsClass],e)}(c.FadeUI);n.ExchangeDetailUI=M,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/UI/FadeUI":"FadeUI","../Award/AwardUI":"AwardUI","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataProps":"DataProps","../Base/View/UIHelp":"UIHelp","../Match/MatchConstant":"MatchConstant","../Match/MatchModel":"MatchModel","../UserInfo/UserInfoModel":"UserInfoModel","./ExchangeDetailUI/ExchangeDetailUIBinder":"ExchangeDetailUIBinder","./ExchangeModel":"ExchangeModel","./ExchangeSureCardUI":"ExchangeSureCardUI","./ExchangeSureEntityUI":"ExchangeSureEntityUI"}],ExchangeModel:[function(t,e,n){"use strict";cc._RF.push(e,"a5b4fk6PPBLsYFP/z7JN2ak","ExchangeModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ExchangeModel=n.CATEGORY_NAME=n.GoodTypeEnum=n.ExShopListEnum=void 0;var s=t("../../Framework/Model/BaseModel"),c=t("../../Framework/Root/ModelRoot"),l=t("../Base/Data/DataBfConfig"),u=t("../Base/View/UIHelp"),d=t("../UserInfo/UserInfoModel"),p=t("./ExchangeProxy");(function(t){t[t.APP_FISH=6]="APP_FISH",t[t.H5_NORMAL=19]="H5_NORMAL",t[t.H5_PHONE_FEE=74]="H5_PHONE_FEE"})(n.ExShopListEnum||(n.ExShopListEnum={})),function(t){t.DIAMOND="yb",t.GOLD="sr",t.PROP="prop",t.GIFT="gift",t.JDK="jdk",t.PHONE_FEE="hf",t.GIFT_CARD="",t.ENTITY="entity"}(n.GoodTypeEnum||(n.GoodTypeEnum={})),function(t){t.DEFAULT="\u9ed8\u8ba4\u5206\u7c7b",t.PHONE_FEE="\u8bdd\u8d39"}(n.CATEGORY_NAME||(n.CATEGORY_NAME={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._exchangeShops=new Map,e._exAddressInfo=null,e}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return c.ModelRoot.instance.get(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return p.ExchangeProxy.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numID",{get:function(){return d.UserInfoModel.instance.userInfo.numID},enumerable:!1,configurable:!0}),e.prototype.reqGetExShopAddress=function(t,e){var n={aID:t,numID:this.numID};this.proxy.reqExShopAddressGet(n).then(function(t){if(t){var n={name:t.name,phone:t.phone,address:t.address};e&&e(!0,n),console.log("\u62c9\u53d6\u6536\u8d27\u5730\u5740\u6210\u529f",t)}else e&&e(!1),console.error("\u62c9\u53d6\u6536\u8d27\u5730\u5740\u5931\u8d25")})},e.prototype.reqSaveExShopAddress=function(t,e,n){var o={aID:t,numID:this.numID,name:e.name,address:e.address,phone:e.phone};this.proxy.reqExShopAddressSave(o).then(function(t){"ok"===t?(n&&n(!0),console.log("\u4fdd\u5b58\u6536\u8d27\u5730\u5740\u6210\u529f",t)):(n&&n(!1),console.error("\u4fdd\u5b58\u6536\u8d27\u5730\u5740\u5931\u8d25"))})},e.prototype.reqGoodsAavance=function(t,e){var n=this,o={aID:t,channelID:l.DataBfConfig.ymn.channel,numID:this.numID};this.proxy.reqGoodsAdvance(o).then(function(t){if(t){var a={shop_info:t.shop_info,goods:t.goods};n._exchangeShops.set(o.aID,a),e&&e(!0),console.log("\u62c9\u53d6\u5151\u6362\u5217\u8868\u6210\u529f",t)}else e&&e(!1),console.warn("\u62c9\u53d6\u5151\u6362\u5217\u8868\u5931\u8d25")})},e.prototype.reqOnExchange=function(t,e,n,o){var a=this,i={aID:t,channelID:l.DataBfConfig.ymn.channel,gID:e,numID:this.numID,phone:o};this.proxy.reqExchange(i).then(function(){a.updateExtInfo(t,e),n&&n(!0),console.log("\u5151\u6362\u6210\u529f")}).catch(function(t){console.error("\u5151\u6362\u5931\u8d25~"),u.UIHelp.instance.showDialog(t.data,function(){})})},e.prototype.reqGetOrdersRecord=function(t,e){var n={aID:t,numID:this.numID};this.proxy.reqOrdersRecord(n).then(function(t){t?(e&&e(t.list),console.log("\u62c9\u53d6\u5151\u6362\u8bb0\u5f55\u6210\u529f",t)):console.warn("\u62c9\u53d6\u5151\u6362\u8bb0\u5f55\u5931\u8d25")})},e.prototype.updateExtInfo=function(t,e){var n=this.getGoodsInfo(t,e);null!=n&&n.price_ext&&""!=n.price_ext&&"number"==typeof n.price_ext.count&&(n.price_ext.count++,this.setGoodsInfo(t,e,n))},e.prototype.getGoodsInfo=function(t,e){var n,o,a,i;if(!this._exchangeShops.has(t))return null;var s=this._exchangeShops.get(t).goods;try{for(var c=r(s),l=c.next();!l.done;l=c.next()){var u=l.value;try{for(var d=(a=void 0,r(u.goods)),p=d.next();!p.done;p=d.next()){var h=p.value;if(h.gid==e)return h}}catch(_){a={error:_}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}}}catch(f){n={error:f}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}return null},e.prototype.setGoodsInfo=function(t,e,n){var o,a;if(!this._exchangeShops.has(t))return null;var i=this._exchangeShops.get(t).goods;try{for(var s=r(i),c=s.next();!c.done;c=s.next())for(var l=c.value,u=0;u<l.goods.length;u++)l.goods[u].gid==e&&(l.goods[u]=n)}catch(d){o={error:d}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}},e.prototype.getGoodsAdvance=function(t,e,n){var o=this;n||!this._exchangeShops.has(t)?this.reqGoodsAavance(t,function(n){n?(e&&e(o.packGoodsByCategory(o._exchangeShops.get(t).goods)),console.log("\u83b7\u53d6\u5151\u6362\u5217\u8868\u6210\u529f")):(e(null),console.log("\u83b7\u53d6\u5151\u6362\u5217\u8868\u5931\u8d25"))}):e&&e(this.packGoodsByCategory(this._exchangeShops.get(t).goods))},e.prototype.packGoodsByCategory=function(t){var e=[];return t.forEach(function(t){t.goods.forEach(function(t){e.push(t)})}),e},e.prototype.getGoodsAdvanceByCategory=function(t,e,n,o){var a,i,s=this;if(!o&&this._exchangeShops.has(t)){var c=this._exchangeShops.get(t).goods;try{for(var l=r(c),u=l.next();!u.done;u=l.next()){var d=u.value;if(d.category_name==e)return void(n&&n(this.packGoodsByCategory([d])))}}catch(p){a={error:p}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}}this.reqGoodsAavance(t,function(o){var a,i;if(o){var c=s._exchangeShops.get(t).goods;try{for(var l=r(c),u=l.next();!u.done;u=l.next()){var d=u.value;if(d.category_name==e)return void(n&&n(s.packGoodsByCategory([d])))}}catch(p){a={error:p}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}console.log("\u83b7\u53d6\u5151\u6362\u5217\u8868\u6210\u529f")}else n(null),console.log("\u83b7\u53d6\u5151\u6362\u5217\u8868\u5931\u8d25")})},e.prototype.setAddressInfo=function(t){this._exAddressInfo=t},e.prototype.getAddressInfo=function(){return this._exAddressInfo},n=i([jsClass],e)}(s.BaseModel);n.ExchangeModel=h,cc.systemEvent.once("GameRoot.inited",function(){c.ModelRoot.instance.add(h)}),cc._RF.pop()},{"../../Framework/Model/BaseModel":"BaseModel","../../Framework/Root/ModelRoot":"ModelRoot","../Base/Data/DataBfConfig":"DataBfConfig","../Base/View/UIHelp":"UIHelp","../UserInfo/UserInfoModel":"UserInfoModel","./ExchangeProxy":"ExchangeProxy"}],ExchangeProxy:[function(t,e,n){"use strict";cc._RF.push(e,"efa51owvbZKKqdXhGnVRzvE","ExchangeProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function r(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.ExchangeProxy=void 0;var c=t("../../Framework/Proxy/BaseProxy"),l=t("../../Framework/Root/ProxyRoot"),u=t("../Base/Module/ApiHub/LogicApiHub"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SERVER="turbox_exshop",e.METHOD_POST="post",e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return l.ProxyRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.reqExShopAddressGet=function(t){return r(this,void 0,Promise,function(){var e;return s(this,function(n){switch(n.label){case 0:return e={aid:t.aID,numid:t.numID},[4,u.LogicApiHub.apiHubPost(this.SERVER,this.METHOD_POST,"address/get",e)];case 1:return[2,n.sent()]}})})},e.prototype.reqExShopAddressSave=function(t){return r(this,void 0,Promise,function(){var e;return s(this,function(n){switch(n.label){case 0:return e={address:t.address,aid:t.aID,name:t.name,numid:t.numID,phone:t.phone},[4,u.LogicApiHub.apiHubPost(this.SERVER,this.METHOD_POST,"address/save",e)];case 1:return[2,n.sent()]}})})},e.prototype.reqGoodsAdvance=function(t){return r(this,void 0,Promise,function(){var e;return s(this,function(n){switch(n.label){case 0:return e={aid:t.aID,numid:t.numID,channel:t.channelID},[4,u.LogicApiHub.apiHubPost(this.SERVER,this.METHOD_POST,"goods-advance",e)];case 1:return[2,n.sent()]}})})},e.prototype.reqExchange=function(t){return r(this,void 0,Promise,function(){var e;return s(this,function(n){switch(n.label){case 0:return e={aid:t.aID,numid:t.numID,channel:t.channelID,gid:t.gID,phone:t.phone},[4,u.LogicApiHub.apiHubPost(this.SERVER,this.METHOD_POST,"exchange",e)];case 1:return[2,n.sent()]}})})},e.prototype.reqOrdersRecord=function(t){return r(this,void 0,Promise,function(){var e;return s(this,function(n){switch(n.label){case 0:return e={aid:t.aID,numid:t.numID},[4,u.LogicApiHub.apiHubPost(this.SERVER,this.METHOD_POST,"orders",e)];case 1:return[2,n.sent()]}})})},i([jsClass],e)}(c.BaseProxy);n.ExchangeProxy=d,cc.systemEvent.once("GameRoot.inited",function(){l.ProxyRoot.instance.add(d)}),cc._RF.pop()},{"../../Framework/Proxy/BaseProxy":"BaseProxy","../../Framework/Root/ProxyRoot":"ProxyRoot","../Base/Module/ApiHub/LogicApiHub":"LogicApiHub"}],ExchangeRecordUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"0929dO7+YNEh7ggqdL3JIKb","ExchangeRecordUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./ExchangeRecordUI_Window"),a=t("./ExchangeRecordUI_ExcRecordItem"),i=t("./ExchangeRecordUI_MainPanel"),r=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default)},t}();n.default=r,cc._RF.pop()},{"./ExchangeRecordUI_ExcRecordItem":"ExchangeRecordUI_ExcRecordItem","./ExchangeRecordUI_MainPanel":"ExchangeRecordUI_MainPanel","./ExchangeRecordUI_Window":"ExchangeRecordUI_Window"}],ExchangeRecordUI_ExcRecordItem:[function(t,e,n){"use strict";cc._RF.push(e,"bb285mBD0tNDb4GCklGJ9DL","ExchangeRecordUI_ExcRecordItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeRecordUI","ExcRecordItem")},e.prototype.onConstruct=function(){this.m_state=this.getControllerAt(0),this.m_prizeName=this.getChildAt(0),this.m_exchangeTime=this.getChildAt(1),this.m_exchangeState=this.getChildAt(2)},e.URL="ui://p0w0hlr0emgj3",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ExchangeRecordUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"3c0cd4oaQtBXrIgdAU9J3cb","ExchangeRecordUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeRecordUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://p0w0hlr0emgj5",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ExchangeRecordUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"73b77fzbeFIKKoJlPjktQGG","ExchangeRecordUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeRecordUI","Window")},e.prototype.onConstruct=function(){this.m_HaveRecord=this.getControllerAt(0),this.m_btnExit=this.getChildAt(1),this.m_list=this.getChildAt(2),this.m_noRecord=this.getChildAt(7)},e.URL="ui://p0w0hlr0emgj2",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ExchangeRecordUI:[function(t,e,n){"use strict";cc._RF.push(e,"e2943jb0oxH7aAzAIVewvj+","ExchangeRecordUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ExchangeRecordUI=void 0;var r=t("../../Framework/UI/FadeUI"),s=t("./ExchangeModel"),c=t("./ExchangeRecordUI/ExchangeRecordUIBinder"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){c.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initData(),this.view.m_Window.m_HaveRecord.selectedIndex=0},e.prototype.initListener=function(){this.view.m_Window.m_btnExit.onClick(this.onExitClick,this)},e.prototype.initData=function(){var t=this;s.ExchangeModel.instance.reqGetOrdersRecord(s.ExShopListEnum.H5_NORMAL,function(e){t.showRecordItem(e)})},e.prototype.showRecordItem=function(t){if(0!==t.length){this.view.m_Window.m_HaveRecord.selectedIndex=1;var e=this.view.m_Window.m_list;e.itemRenderer=function(e,n){var o=t[e];o&&(n.m_prizeName.text=o.name,n.m_exchangeTime.text=o.time,n.m_state.selectedIndex=0)},e.setVirtual(),e.numItems=t.length,e.refreshVirtualList()}else this.view.m_Window.m_HaveRecord.selectedIndex=0},i([jsClass],e)}(r.FadeUI);n.ExchangeRecordUI=l,cc._RF.pop()},{"../../Framework/UI/FadeUI":"FadeUI","./ExchangeModel":"ExchangeModel","./ExchangeRecordUI/ExchangeRecordUIBinder":"ExchangeRecordUIBinder"}],ExchangeShopRuleUI:[function(t,e,n){"use strict";cc._RF.push(e,"c3b8eu6kVRFjZiyHyp8twm0","ExchangeShopRuleUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ExchangeShopRuleUI=void 0;var r=t("../../Framework/UI/FadeUI"),s=t("./ExchangeShopUI/ExchangeShopUIBinder"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){s.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.getPkgName=function(){return"ExchangeShopUI"},e.getCompName=function(){return"MainPanel_Rule"},e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this)},i([jsClass],e)}(r.FadeUI);n.ExchangeShopRuleUI=c,cc._RF.pop()},{"../../Framework/UI/FadeUI":"FadeUI","./ExchangeShopUI/ExchangeShopUIBinder":"ExchangeShopUIBinder"}],ExchangeShopUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"dc8363CJwVE8JiRqtbGndhF","ExchangeShopUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./ExchangeShopUI_MainPanel"),a=t("./ExchangeShopUI_Window"),i=t("./ExchangeShopUI_Top"),r=t("./ExchangeShopUI_Left"),s=t("./ExchangeShopUI_TabBtn"),c=t("./ExchangeShopUI_shopItem"),l=t("./ExchangeShopUI_MainPanel_Rule"),u=t("./ExchangeShopUI_Window_Rule"),d=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default),fgui.UIObjectFactory.setExtension(l.default.URL,l.default),fgui.UIObjectFactory.setExtension(u.default.URL,u.default)},t}();n.default=d,cc._RF.pop()},{"./ExchangeShopUI_Left":"ExchangeShopUI_Left","./ExchangeShopUI_MainPanel":"ExchangeShopUI_MainPanel","./ExchangeShopUI_MainPanel_Rule":"ExchangeShopUI_MainPanel_Rule","./ExchangeShopUI_TabBtn":"ExchangeShopUI_TabBtn","./ExchangeShopUI_Top":"ExchangeShopUI_Top","./ExchangeShopUI_Window":"ExchangeShopUI_Window","./ExchangeShopUI_Window_Rule":"ExchangeShopUI_Window_Rule","./ExchangeShopUI_shopItem":"ExchangeShopUI_shopItem"}],ExchangeShopUI_Left:[function(t,e,n){"use strict";cc._RF.push(e,"cae76ZjK4JPOoOIY+0wA2g4","ExchangeShopUI_Left");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeShopUI","Left")},e.prototype.onConstruct=function(){this.m_cSelect=this.getControllerAt(0),this.m_tabGoldenEx=this.getChildAt(0),this.m_tabTIcketEx=this.getChildAt(1),this.m_TMoveRight=this.getTransitionAt(0)},e.URL="ui://84dimhx9lbfd4",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ExchangeShopUI_MainPanel_Rule:[function(t,e,n){"use strict";cc._RF.push(e,"ff56fIkd3dNM7UnmX/SIVG7","ExchangeShopUI_MainPanel_Rule");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeShopUI","MainPanel_Rule")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://84dimhx9thxcy",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ExchangeShopUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"a3eb62+ltBOlaz8MsDPsiT5","ExchangeShopUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeShopUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://84dimhx9lbfd0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ExchangeShopUI_TabBtn:[function(t,e,n){"use strict";cc._RF.push(e,"3708d8QtT1GEoRr2wQsxpG7","ExchangeShopUI_TabBtn");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeShopUI","TabBtn")},e.prototype.onConstruct=function(){this.m_cSelect=this.getControllerAt(1),this.m_selected=this.getChildAt(2),this.m_unselected=this.getChildAt(3)},e.URL="ui://84dimhx9lbfd5",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],ExchangeShopUI_Top:[function(t,e,n){"use strict";cc._RF.push(e,"d96a9fTQb1Nx64DTgi9hDlG","ExchangeShopUI_Top");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeShopUI","Top")},e.prototype.onConstruct=function(){this.m_btnBack=this.getChildAt(2),this.m_goldenEggComp=this.getChildAt(3),this.m_phoneFeeComp=this.getChildAt(4),this.m_jdkComp=this.getChildAt(5),this.m_btnWelfare=this.getChildAt(6),this.m_btnRule=this.getChildAt(7),this.m_gContent=this.getChildAt(8),this.m_ani_top=this.getTransitionAt(0)},e.URL="ui://84dimhx9lbfd3",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ExchangeShopUI_Window_Rule:[function(t,e,n){"use strict";cc._RF.push(e,"6af385kDQ5DU7+XQ4KCjK2N","ExchangeShopUI_Window_Rule");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeShopUI","Window_Rule")},e.prototype.onConstruct=function(){this.m_btnClose=this.getChildAt(1)},e.URL="ui://84dimhx9thxcz",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ExchangeShopUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"4309fWtMRdHQbJXVU74wdg+","ExchangeShopUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeShopUI","Window")},e.prototype.onConstruct=function(){this.m_cmpTop=this.getChildAt(0),this.m_tabLeft=this.getChildAt(1),this.m_shopList=this.getChildAt(2),this.m_txtNoList=this.getChildAt(3)},e.URL="ui://84dimhx9lbfd1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ExchangeShopUI_shopItem:[function(t,e,n){"use strict";cc._RF.push(e,"67c52BpQI5B5q/SzuCj8/un","ExchangeShopUI_shopItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeShopUI","shopItem")},e.prototype.onConstruct=function(){this.m_cCanExchange=this.getControllerAt(0),this.m_shopIcon=this.getChildAt(2),this.m_txtName=this.getChildAt(4),this.m_txtStock=this.getChildAt(6),this.m_txtCount=this.getChildAt(9),this.m_gExCount=this.getChildAt(10),this.m_t0=this.getTransitionAt(0)},e.URL="ui://84dimhx9lbfd6",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],ExchangeShopUI:[function(t,e,n){"use strict";cc._RF.push(e,"a8189wXsntKVLHEzXTVRs8h","ExchangeShopUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ExchangeShopUI=void 0;var s,c,l=t("../../Framework/Manager/EventManager"),u=t("../../Framework/Manager/UIManager"),d=t("../../Framework/UI/FadeUI"),p=t("../Base/Data/DataClubClientConfig"),h=t("../Base/Data/DataEvent"),_=t("../Base/Data/DataProps"),f=t("../Base/Utils/UtilView"),m=t("../UserInfo/UserInfoModel"),g=t("./ExchangeDetailUI"),y=t("./ExchangeModel"),I=t("./ExchangeShopRuleUI"),C=t("./ExchangeShopUI/ExchangeShopUIBinder"),M=t("./ExchangeWelfareUI");(function(t){t[t.ENTITY=0]="ENTITY",t[t.OTHER=1]="OTHER"})(s||(s={})),function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"}(c||(c={}));var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){C.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return y.ExchangeModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initUI(),this.getGoodsAdvance()},e.prototype.initListener=function(){l.EventManager.instance.on(h.DataEvent.UserInfoUpdate,this,this.onUserInfoUpdate),this.view.m_Window.m_cmpTop.m_btnBack.onClick(this.onExitClick,this),this.view.m_Window.m_tabLeft.m_cSelect.onChanged(this.onSelectChanged,this),this.view.m_Window.m_shopList.on(fgui.Event.CLICK_ITEM,this.onItemClick,this),this.view.m_Window.m_cmpTop.m_btnWelfare.onClick(this.onBtnWelfare,this),this.view.m_Window.m_cmpTop.m_btnRule.onClick(this.onBtnRule,this)},e.prototype.onUserInfoUpdate=function(){this.updateGoldenEggCount(),this.update100PhoneFeeCount(),this.update200JDKCount(),this.getGoodsAdvance()},e.prototype.onSelectChanged=function(){var t=this;console.log("onSelectChanged"),this.model.getGoodsAdvance(y.ExShopListEnum.APP_FISH,function(e){console.warn("getGoodsAdvance:",e),t.view.m_Window.m_tabLeft.m_cSelect.selectedIndex===s.ENTITY?t.showShopList(e):t.showOhterList(e)})},e.prototype.onItemClick=function(t){var e=t.data;this.isNotStock(e)?l.EventManager.instance.emit(h.DataEvent.ToastData,"\u5546\u54c1\u5df2\u88ab\u5151\u5b8c\uff0c\u8bf7\u5151\u6362\u5176\u4ed6\u5546\u54c1\uff0c\u6216\u8005\u8bf7\u660e\u65e5\u518d\u6765"):this.isDayLimit(e)?l.EventManager.instance.emit(h.DataEvent.ToastData,"\u60a8\u4eca\u5929\u5151\u6362\u6b64\u5546\u54c1\u7684\u6b21\u6570\u5df2\u7ecf\u7528\u5b8c\u5566~"):(e.exShopListEnum=y.ExShopListEnum.APP_FISH,u.UIManager.instance.open(g.ExchangeDetailUI).then(function(t){t.init(e)}))},e.prototype.isNotStock=function(t){return t.stock<=0},e.prototype.isDayLimit=function(t){return t.limit_num&&t.limit_num-t.exchanged<=0},e.prototype.onBtnWelfare=function(){u.UIManager.instance.open(M.ExchangeWelfareUI)},e.prototype.onBtnRule=function(){u.UIManager.instance.open(I.ExchangeShopRuleUI)},e.prototype.initUI=function(){this.adaptFullScreen(),this.updateGoldenEggCount(),this.update100PhoneFeeCount(),this.update200JDKCount()},e.prototype.adaptFullScreen=function(){f.UtilView.isFullScreen()&&(this.view.m_Window.m_cmpTop.x=this.view.m_Window.m_cmpTop.x+44,this.view.m_Window.m_tabLeft.x=this.view.m_Window.m_tabLeft.x+44,this.view.m_Window.m_shopList.x=this.view.m_Window.m_shopList.x+100)},e.prototype.updateGoldenEggCount=function(){this.view.m_Window.m_cmpTop.m_goldenEggComp.title=""+m.UserInfoModel.instance.getPropCount(_.PropIDEnum.EXCHANGE_GOLDEN_EGG)},e.prototype.update100PhoneFeeCount=function(){this.view.m_Window.m_cmpTop.m_phoneFeeComp.title=""+m.UserInfoModel.instance.getPropCount(_.PropIDEnum.EXCHANGE_PHONE_FEE_100)},e.prototype.update200JDKCount=function(){this.view.m_Window.m_cmpTop.m_jdkComp.title=""+m.UserInfoModel.instance.getPropCount(_.PropIDEnum.EXCHANGE_JDK_200)},e.prototype.getGoodsAdvance=function(){var t=this;this.model.getGoodsAdvance(y.ExShopListEnum.APP_FISH,function(e){console.warn("getGoodsAdvance:",e),t.view.m_Window.m_tabLeft.m_cSelect.selectedIndex===s.ENTITY?t.showShopList(e):t.showOhterList(e)},!0)},e.prototype.showShopList=function(t){this.showEntityList(t)},e.prototype.filterGoods=function(t,e){var n=p.DataClubClientConfig.isIosPaySwitchOpen(),o=[];return t.forEach(function(t){var a,i;try{for(var s=r(e),c=s.next();!c.done;c=s.next()){var l=c.value;n?t.type===l&&o.push(t):t.type===l&&t.price<=2e5&&o.push(t)}}catch(u){a={error:u}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}}),o},e.prototype.showEntityList=function(t){var e=this.filterGoods(t,[y.GoodTypeEnum.ENTITY]);this.showItems(e,!0)},e.prototype.showOhterList=function(t){var e=this.filterGoods(t,[y.GoodTypeEnum.PHONE_FEE,y.GoodTypeEnum.JDK,y.GoodTypeEnum.PROP]);this.showItems(e,!0)},e.prototype.showItems=function(t){var e=this;this.view.m_Window.m_txtNoList.visible=t.length<=0;var n=this.view.m_Window.m_shopList;n.visible=!0,n.itemRenderer=function(n,o){var a=t[n];a&&(o.data=a,o.m_shopIcon.url=a.icon,o.m_txtName.text=a.name,o.m_txtStock.text=a.stock.toString(),_.DataProps.instance.is100PhoneFeePropID(a.propid)?o.m_txtCount.text="h"+a.price:_.DataProps.instance.is200JDKPropID(a.propid)?o.m_txtCount.text="k"+a.price:o.m_txtCount.text="d"+a.price,e.isNotStock(a)||e.isDayLimit(a)?o.m_cCanExchange.selectedIndex=c.NO:o.m_cCanExchange.selectedIndex=c.YES)},n.setVirtual(),n.numItems=t.length,n.refreshVirtualList()},i([jsClass],e)}(d.FadeUI);n.ExchangeShopUI=v,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataClubClientConfig":"DataClubClientConfig","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataProps":"DataProps","../Base/Utils/UtilView":"UtilView","../UserInfo/UserInfoModel":"UserInfoModel","./ExchangeDetailUI":"ExchangeDetailUI","./ExchangeModel":"ExchangeModel","./ExchangeShopRuleUI":"ExchangeShopRuleUI","./ExchangeShopUI/ExchangeShopUIBinder":"ExchangeShopUIBinder","./ExchangeWelfareUI":"ExchangeWelfareUI"}],ExchangeSureCardUI:[function(t,e,n){"use strict";cc._RF.push(e,"3e1bcnJRQFIkbwvw3T4HYeC","ExchangeSureCardUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ExchangeSureCardUI=void 0;var r=t("../../Framework/Manager/EventManager"),s=t("../../Framework/UI/FadeUI"),c=t("../Base/Data/DataEvent"),l=t("../Base/View/UIHelp"),u=t("./ExchangeModel"),d=t("./ExchangeWelfareUI/ExchangeWelfareUIBinder"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._addressInfo=null,e._goods=null,e._exchangeCallBack=null,e}return a(e,t),e.uiBind=function(){d.default.bindAll()},e.getPkgName=function(){return"ExchangeWelfareUI"},e.getCompName=function(){return"Card_MainPanel"},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return u.ExchangeModel.instance},enumerable:!1,configurable:!0}),e.prototype.setExchangeCallBack=function(t){this._exchangeCallBack=t},e.prototype.onLoad=function(){this.initListener(),this.initUI()},e.prototype.initData=function(t){this._goods=t},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),this.view.m_Window.m_btnSubmit.onClick(this.onBtnSubmit,this)},e.prototype.initUI=function(){var t=this;this.model.reqGetExShopAddress(u.ExShopListEnum.APP_FISH,function(e,n){e&&(t._addressInfo=n,t.refreshAddressInfo())})},e.prototype.refreshAddressInfo=function(){this._addressInfo&&(this.view.m_Window.m_inputPhone.text=this._addressInfo.phone)},e.prototype.onBtnSubmit=function(){var e=this,n=this.view.m_Window.m_inputPhone.text;if(11===n.length){this._addressInfo.phone=n;var o="\u662f\u5426\u5151\u6362"+this._goods.name+"\u7ed9"+this._addressInfo.phone;l.UIHelp.instance.showDialogConfirmCancel(o,function(n){n&&(e.model.setAddressInfo(e._addressInfo),e._exchangeCallBack&&e._exchangeCallBack()),t.prototype.onExitClick.call(e)})}else r.EventManager.instance.emit(c.DataEvent.ToastData,"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7~")},i([jsClass],e)}(s.FadeUI);n.ExchangeSureCardUI=p,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataEvent":"DataEvent","../Base/View/UIHelp":"UIHelp","./ExchangeModel":"ExchangeModel","./ExchangeWelfareUI/ExchangeWelfareUIBinder":"ExchangeWelfareUIBinder"}],ExchangeSureEntityUI:[function(t,e,n){"use strict";cc._RF.push(e,"4a6a7G6Wa9ETrjCkIPA39Nf","ExchangeSureEntityUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ExchangeSureEntityUI=void 0;var r=t("../../Framework/Manager/EventManager"),s=t("../../Framework/UI/FadeUI"),c=t("../Base/Data/DataEvent"),l=t("../Base/View/UIHelp"),u=t("./ExchangeModel"),d=t("./ExchangeWelfareUI/ExchangeWelfareUIBinder"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._addressInfo=null,e._goods=null,e._exchangeCallBack=null,e}return a(e,t),e.uiBind=function(){d.default.bindAll()},e.getPkgName=function(){return"ExchangeWelfareUI"},e.getCompName=function(){return"Entity_MainPanel"},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return u.ExchangeModel.instance},enumerable:!1,configurable:!0}),e.prototype.setExchangeCallBack=function(t){this._exchangeCallBack=t},e.prototype.onLoad=function(){this.initListener(),this.initUI()},e.prototype.initData=function(t){this._goods=t},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),this.view.m_Window.m_btnSubmit.onClick(this.onBtnSubmit,this)},e.prototype.initUI=function(){var t=this;this.model.reqGetExShopAddress(u.ExShopListEnum.APP_FISH,function(e,n){e&&(t._addressInfo=n,t.refreshAddressInfo())})},e.prototype.refreshAddressInfo=function(){this._addressInfo?(this.view.m_Window.m_inputName.text=this._addressInfo.name,this.view.m_Window.m_inputPhone.text=this._addressInfo.phone,this.view.m_Window.m_inputAddress.text=this._addressInfo.address):(this.view.m_Window.m_inputName.text="",this.view.m_Window.m_inputPhone.text="",this.view.m_Window.m_inputAddress.text="")},e.prototype.onBtnSubmit=function(){var e=this,n=this.view.m_Window.m_inputName.text;if(""!==n){var o=this.view.m_Window.m_inputPhone.text;if(11===o.length){var a=this.view.m_Window.m_inputAddress.text;if(""!==a){this._addressInfo={name:n,phone:o,address:a};var i="\u662f\u5426\u5151\u6362["+this._goods.name+"]\u7ed9["+this._addressInfo.phone+"]";l.UIHelp.instance.showDialogConfirmCancel(i,function(n){n&&(e.model.setAddressInfo(e._addressInfo),e.model.reqSaveExShopAddress(u.ExShopListEnum.APP_FISH,e._addressInfo,function(n){n?e._exchangeCallBack&&e._exchangeCallBack():(r.EventManager.instance.emit(c.DataEvent.ToastData,"\u5151\u6362\u5730\u5740\u9519\u8bef,\u8bf7\u91cd\u65b0\u8f93\u5165~"),e._addressInfo=null,e.refreshAddressInfo()),t.prototype.onExitClick.call(e)}))})}else r.EventManager.instance.emit(c.DataEvent.ToastData,"\u8bf7\u8f93\u5165\u6536\u8d27\u5730\u5740~")}else r.EventManager.instance.emit(c.DataEvent.ToastData,"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7~")}else r.EventManager.instance.emit(c.DataEvent.ToastData,"\u8bf7\u586b\u5199\u59d3\u540d~")},i([jsClass],e)}(s.FadeUI);n.ExchangeSureEntityUI=p,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataEvent":"DataEvent","../Base/View/UIHelp":"UIHelp","./ExchangeModel":"ExchangeModel","./ExchangeWelfareUI/ExchangeWelfareUIBinder":"ExchangeWelfareUIBinder"}],ExchangeUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"09626d4VDVMAKRPPumUFWPm","ExchangeUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./ExchangeUI_Window"),a=t("./ExchangeUI_MainPanel"),i=t("./ExchangeUI_ExchangeItem"),r=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default)},t}();n.default=r,cc._RF.pop()},{"./ExchangeUI_ExchangeItem":"ExchangeUI_ExchangeItem","./ExchangeUI_MainPanel":"ExchangeUI_MainPanel","./ExchangeUI_Window":"ExchangeUI_Window"}],ExchangeUI_ExchangeItem:[function(t,e,n){"use strict";cc._RF.push(e,"f522bRQ9lRAIpXbpbxJBmGY","ExchangeUI_ExchangeItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeUI","ExchangeItem")},e.prototype.onConstruct=function(){this.m_flag=this.getChildAt(1),this.m_LodeIcon=this.getChildAt(2),this.m_txtCost=this.getChildAt(3),this.m_txtNum=this.getChildAt(4)},e.URL="ui://pix1thafmkt6e",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],ExchangeUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"aa127ZtRt1Knb2bgkKegcpk","ExchangeUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://pix1thafemgjd",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ExchangeUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"a825cfS6ihFkYivVIvy4ppY","ExchangeUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeUI","Window")},e.prototype.onConstruct=function(){this.m_btnExit=this.getChildAt(1),this.m_list=this.getChildAt(2),this.m_gold=this.getChildAt(3),this.m_diamond=this.getChildAt(4),this.m_btnRecord=this.getChildAt(5)},e.URL="ui://pix1thafemgj7",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ExchangeUI:[function(t,e,n){"use strict";cc._RF.push(e,"bfa52hjZnNFsI1gnsEPRmlI","ExchangeUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ExchangeUI=void 0;var r=t("../../Framework/Manager/EventManager"),s=t("../../Framework/Manager/UIManager"),c=t("../../Framework/UI/FadeUI"),l=t("../Base/Data/DataEvent"),u=t("../Base/Data/DataProps"),d=t("../Base/Utils/UtilString"),p=t("../Shop/ShopConfig"),h=t("../Shop/ShopModel"),_=t("../UserInfo/UserInfoModel"),f=t("./ExchangeDetailUI"),m=t("./ExchangeModel"),g=t("./ExchangeRecordUI"),y=t("./ExchangeUI/ExchangeUIBinder"),I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){y.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.getGoodsAdvance(),this.refreshData()},e.prototype.initListener=function(){r.EventManager.instance.on(l.DataEvent.UserInfoUpdate,this,this.onUserInfoUpdate),this.view.m_Window.m_btnExit.onClick(this.onExitClick,this),this.view.m_Window.m_btnRecord.onClick(this.onButtonRecord,this),this.view.m_Window.m_list.on(fgui.Event.CLICK_ITEM,this.onItemClick,this),this.view.m_Window.m_gold.getChild("btnAdd").onClick(this.onButtonGold,this)},e.prototype.getGoodsAdvance=function(){var t=this;m.ExchangeModel.instance.getGoodsAdvance(m.ExShopListEnum.H5_NORMAL,function(e){t.showExchangeList(e)})},e.prototype.refreshData=function(){this.view.m_Window.m_gold.title=d.UtilString.getCurrencyShortString(_.UserInfoModel.instance.userInfo.gold),this.view.m_Window.m_diamond.title=d.UtilString.getCurrencyShortString(_.UserInfoModel.instance.getPropCount(u.PropIDEnum.AWARD_TICKET))},e.prototype.showExchangeList=function(t){var e=this.view.m_Window.m_list;e.itemRenderer=function(e,n){var o=t[e];o&&(n.data=o,n.m_LodeIcon.url=o.icon,n.m_txtNum.text=o.name,n.m_txtCost.text="\u5238"+o.price,""!==o.price_ext&&o.price_ext.count<1?n.m_flag.visible=!0:n.m_flag.visible=!1)},e.setVirtual(),e.numItems=t.length,e.refreshVirtualList()},e.prototype.onUserInfoUpdate=function(){this.refreshData(),this.getGoodsAdvance()},e.prototype.onButtonRecord=function(){s.UIManager.instance.open(g.ExchangeRecordUI)},e.prototype.onItemClick=function(t){var e=t.data;s.UIManager.instance.open(f.ExchangeDetailUI).then(function(t){t.init(e)})},e.prototype.onButtonGold=function(){h.ShopModel.instance.showShopUI(p.ShopPageTypeEnum.GOLD)},i([jsClass],e)}(c.FadeUI);n.ExchangeUI=I,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataProps":"DataProps","../Base/Utils/UtilString":"UtilString","../Shop/ShopConfig":"ShopConfig","../Shop/ShopModel":"ShopModel","../UserInfo/UserInfoModel":"UserInfoModel","./ExchangeDetailUI":"ExchangeDetailUI","./ExchangeModel":"ExchangeModel","./ExchangeRecordUI":"ExchangeRecordUI","./ExchangeUI/ExchangeUIBinder":"ExchangeUIBinder"}],ExchangeWelfareUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"582a7kGVY5O270WHLGcHYUs","ExchangeWelfareUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./ExchangeWelfareUI_MainPanel"),a=t("./ExchangeWelfareUI_Window"),i=t("./ExchangeWelfareUI_btnTab"),r=t("./ExchangeWelfareUI_recordItem"),s=t("./ExchangeWelfareUI_Card_Window"),c=t("./ExchangeWelfareUI_Entity_MainPanel"),l=t("./ExchangeWelfareUI_Card_MainPanel"),u=t("./ExchangeWelfareUI_Entity_Window"),d=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default),fgui.UIObjectFactory.setExtension(l.default.URL,l.default),fgui.UIObjectFactory.setExtension(u.default.URL,u.default)},t}();n.default=d,cc._RF.pop()},{"./ExchangeWelfareUI_Card_MainPanel":"ExchangeWelfareUI_Card_MainPanel","./ExchangeWelfareUI_Card_Window":"ExchangeWelfareUI_Card_Window","./ExchangeWelfareUI_Entity_MainPanel":"ExchangeWelfareUI_Entity_MainPanel","./ExchangeWelfareUI_Entity_Window":"ExchangeWelfareUI_Entity_Window","./ExchangeWelfareUI_MainPanel":"ExchangeWelfareUI_MainPanel","./ExchangeWelfareUI_Window":"ExchangeWelfareUI_Window","./ExchangeWelfareUI_btnTab":"ExchangeWelfareUI_btnTab","./ExchangeWelfareUI_recordItem":"ExchangeWelfareUI_recordItem"}],ExchangeWelfareUI_Card_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"db11a5sV+hHAYlonDuiOVkg","ExchangeWelfareUI_Card_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeWelfareUI","Card_MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://806d3j0onsvl11",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ExchangeWelfareUI_Card_Window:[function(t,e,n){"use strict";cc._RF.push(e,"9a35b8i6j5J/b17J/VPhkVL","ExchangeWelfareUI_Card_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeWelfareUI","Card_Window")},e.prototype.onConstruct=function(){this.m_btnClose=this.getChildAt(1),this.m_inputPhone=this.getChildAt(5),this.m_btnSubmit=this.getChildAt(6)},e.URL="ui://806d3j0omu8i10",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ExchangeWelfareUI_Entity_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"2985ckXLrpJhbpztwdXuM0w","ExchangeWelfareUI_Entity_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeWelfareUI","Entity_MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://806d3j0omu8im",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ExchangeWelfareUI_Entity_Window:[function(t,e,n){"use strict";cc._RF.push(e,"1e622UIsZ5GS6N7hIINS2M6","ExchangeWelfareUI_Entity_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeWelfareUI","Entity_Window")},e.prototype.onConstruct=function(){this.m_btnClose=this.getChildAt(1),this.m_inputName=this.getChildAt(10),this.m_inputPhone=this.getChildAt(11),this.m_inputAddress=this.getChildAt(12),this.m_btnSubmit=this.getChildAt(13)},e.URL="ui://806d3j0onsvl12",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ExchangeWelfareUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"40716uayt9M7a/ZINEuwFFu","ExchangeWelfareUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeWelfareUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://806d3j0olbfd0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ExchangeWelfareUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"93b67Vr7YRNYYlJb1Z3SwEz","ExchangeWelfareUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeWelfareUI","Window")},e.prototype.onConstruct=function(){this.m_cTabSelect=this.getControllerAt(0),this.m_cHasRecord=this.getControllerAt(1),this.m_btnClose=this.getChildAt(1),this.m_tabRecord=this.getChildAt(2),this.m_tabAddress=this.getChildAt(3),this.m_noRecord=this.getChildAt(5),this.m_recordList=this.getChildAt(10),this.m_g1=this.getChildAt(11),this.m_gRecord=this.getChildAt(12),this.m_inputName=this.getChildAt(21),this.m_inputPhone=this.getChildAt(22),this.m_inputAddress=this.getChildAt(23),this.m_btnSave=this.getChildAt(24),this.m_gAddress=this.getChildAt(25)},e.URL="ui://806d3j0olbfd1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ExchangeWelfareUI_btnTab:[function(t,e,n){"use strict";cc._RF.push(e,"57e8aAg4aNGcoU3LMgRJa00","ExchangeWelfareUI_btnTab");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeWelfareUI","btnTab")},e.prototype.onConstruct=function(){this.m_cSelect=this.getControllerAt(1),this.m_selected=this.getChildAt(3),this.m_unselected=this.getChildAt(4)},e.URL="ui://806d3j0olbfd2",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],ExchangeWelfareUI_recordItem:[function(t,e,n){"use strict";cc._RF.push(e,"12ba1X8zilPJp3vfD2wh6i2","ExchangeWelfareUI_recordItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ExchangeWelfareUI","recordItem")},e.prototype.onConstruct=function(){this.m_state=this.getControllerAt(0),this.m_txtName=this.getChildAt(0),this.m_txtExTime=this.getChildAt(1),this.m_txtExState=this.getChildAt(2)},e.URL="ui://806d3j0olbfdi",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ExchangeWelfareUI:[function(t,e,n){"use strict";cc._RF.push(e,"7e065OhguFAQ6sADVbNFyPZ","ExchangeWelfareUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ExchangeWelfareUI=void 0;var r,s,c,l=t("../../Framework/Manager/EventManager"),u=t("../../Framework/UI/FadeUI"),d=t("../Base/Data/DataEvent"),p=t("./ExchangeModel"),h=t("./ExchangeWelfareUI/ExchangeWelfareUIBinder");(function(t){t[t.RECORD=0]="RECORD",t[t.ADDRESS=1]="ADDRESS"})(r||(r={})),function(t){t[t.NO_RECORD=0]="NO_RECORD",t[t.HAS_RECORD=1]="HAS_RECORD"}(s||(s={})),function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAIL=1]="FAIL"}(c||(c={}));var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._records=[],e._addressInfo=null,e}return a(e,t),e.uiBind=function(){h.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return p.ExchangeModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initUI()},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),this.view.m_Window.m_cTabSelect.onChanged(this.onSelectChanged,this),this.view.m_Window.m_btnSave.onClick(this.onBtnSave,this)},e.prototype.initUI=function(){var t=this;this.model.reqGetOrdersRecord(p.ExShopListEnum.APP_FISH,function(e){t._records=e,t.showRecordItem(e)})},e.prototype.showRecordItem=function(t){if(0!==t.length){this.view.m_Window.m_cHasRecord.selectedIndex=s.HAS_RECORD;var e=this.view.m_Window.m_recordList;e.itemRenderer=function(e,n){var o=t[e];o&&(n.m_txtName.text=o.name,n.m_txtExTime.text=o.time,n.m_state.selectedIndex=3===o.status?c.SUCCESS:c.FAIL)},e.setVirtual(),e.numItems=t.length,e.refreshVirtualList()}else this.view.m_Window.m_cHasRecord.selectedIndex=s.NO_RECORD},e.prototype.onSelectChanged=function(){var t=this;console.log("onSelectChanged"),this.view.m_Window.m_cTabSelect.selectedIndex===r.RECORD?this.showRecordItem(this._records):this._addressInfo?this.refreshAddressInfo():this.model.reqGetExShopAddress(p.ExShopListEnum.APP_FISH,function(e,n){e&&(t._addressInfo=n,t.refreshAddressInfo())})},e.prototype.refreshAddressInfo=function(){this._addressInfo&&(this.view.m_Window.m_inputName.text=this._addressInfo.name,this.view.m_Window.m_inputPhone.text=this._addressInfo.phone,this.view.m_Window.m_inputAddress.text=this._addressInfo.address)},e.prototype.onBtnSave=function(){var t=this,e=this.view.m_Window.m_inputName.text;if(""!==e){var n=this.view.m_Window.m_inputPhone.text;if(11===n.length){var o=this.view.m_Window.m_inputAddress.text;""!==o?(this._addressInfo={name:e,phone:n,address:o},this.model.reqSaveExShopAddress(p.ExShopListEnum.APP_FISH,this._addressInfo,function(e){e?l.EventManager.instance.emit(d.DataEvent.ToastData,"\u4fdd\u5b58\u6536\u8d27\u5730\u5740\u6210\u529f!"):(l.EventManager.instance.emit(d.DataEvent.ToastData,"\u4fdd\u5b58\u6536\u8d27\u5730\u5740\u5931\u8d25!"),t._addressInfo=null)})):l.EventManager.instance.emit(d.DataEvent.ToastData,"\u8bf7\u8f93\u5165\u6536\u8d27\u5730\u5740~")}else l.EventManager.instance.emit(d.DataEvent.ToastData,"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7~")}else l.EventManager.instance.emit(d.DataEvent.ToastData,"\u8bf7\u586b\u5199\u59d3\u540d~")},i([jsClass],e)}(u.FadeUI);n.ExchangeWelfareUI=_,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataEvent":"DataEvent","./ExchangeModel":"ExchangeModel","./ExchangeWelfareUI/ExchangeWelfareUIBinder":"ExchangeWelfareUIBinder"}],FadeUI:[function(t,e,n){"use strict";cc._RF.push(e,"971e0HpXQxEXL43XsB9nwep","FadeUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t};Object.defineProperty(n,"__esModule",{value:!0}),n.FadeUI=void 0;var c=t("./BaseUI"),l=t("../Manager/UIManager"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._palyTFadeIn=!1,e}return a(e,t),Object.defineProperty(e,"uiType",{get:function(){return c.UIType.Window},enumerable:!1,configurable:!0}),e.prototype.setView=function(e,n,o){t.prototype.setView.call(this,e),this.onSetView(n,o)},e.prototype.onSetView=function(t,e){this._onExit=t,this._onDestroy=e,this.fadeIn()},e.prototype.fadeIn=function(){var t=this;this._palyTFadeIn=!0,this._tFadeIn=this.fade("TFadeIn",function(){t._palyTFadeIn=!1,t.onFadedIn()})},e.prototype.onFadedIn=function(){},Object.defineProperty(e.prototype,"exitClicked",{get:function(){return this._exitClicked},enumerable:!1,configurable:!0}),e.prototype.onExitClick=function(){if(!this._exitClicked&&cc.isValid(this)){this._exitClicked=!0;for(var t=0,e=this.view.numChildren;t<e;++t)this.view.getChildAt(t).touchable=!1;this.onExit(),this._onExit&&this._onExit(),this.fadeOut()}},e.prototype.onExit=function(){},e.prototype.fadeOut=function(){this._palyTFadeIn&&this._tFadeIn&&(this._tFadeIn.stop(),this.onFadedIn()),this.fade("TFadeOut",this.onFadedOut.bind(this))},e.prototype.onFadedOut=function(){this._closeCallBack&&this._closeCallBack(),l.UIManager.instance.close(this)},e.prototype.onDestroy=function(){this._exitClicked||(this.onExit(),this._onExit&&this._onExit()),this._onDestroy&&this._onDestroy(),t.prototype.onDestroy.call(this)},e.prototype.fade=function(t,e){var n=this.view.getTransition(t);return n?n.play(e):e(),n},e.prototype.setCloseCallBack=function(t){this._closeCallBack=t},e.prototype.openNextFadeUI=function(t){for(var e,n=this,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];var i=(e=l.UIManager.instance).open.apply(e,s([t],o));return i.then(function(t){t.setCloseCallBack(n._closeCallBack),n._closeCallBack=null}),i},i([jsClass],e)}(c.BaseUI);n.FadeUI=u,cc._RF.pop()},{"../Manager/UIManager":"UIManager","./BaseUI":"BaseUI"}],FairyGUIExtension:[function(t,e){"use strict";cc._RF.push(e,"fdce3mftcpA6Z4UAiJkbb5F","FairyGUIExtension"),fgui.UIPackage.defaultTexture=new cc.Texture2D;var n=fgui.UIPackage.prototype.getItemAsset;fgui.UIPackage.prototype.getItemAsset=function(t){if(t.type===fgui.PackageItemType.Image){if(!t.decoded){t.decoded=!0;var e=this._sprites[t.id];if(null!=e){var o=this.getItemAsset(e.atlas);if(o||(o=fgui.UIPackage.defaultTexture),null!=o){var a=e.offset.x-(e.originalSize.width-e.rect.width)/2,i=-(e.offset.y-(e.originalSize.height-e.rect.height)/2),r=new cc.SpriteFrame(o,e.rect,e.rotated,new cc.Vec2(a,i),e.originalSize);t.scale9Grid&&(r.insetLeft=t.scale9Grid.x,r.insetTop=t.scale9Grid.y,r.insetRight=t.width-t.scale9Grid.xMax,r.insetBottom=t.height-t.scale9Grid.yMax),t.asset=r}}}return t.asset}return n.call(this,t)},fgui.GComponent.prototype.getAllChildren=function(t){for(var e=[],n=0,o=this.numChildren;n<o;++n){var a=this.getChildAt(n);a.name===t&&e.push(a)}return e},Object.defineProperty(fgui.GObject.prototype,"title",{get:function(){return this.text},set:function(t){this.text=t},enumerable:!1,configurable:!0}),Object.defineProperty(fgui.GObject.prototype,"allTitle",{get:function(){return this.title},set:function(t){this.title=t},enumerable:!1,configurable:!0}),Object.defineProperty(fgui.GObject.prototype,"allIcon",{get:function(){return this.icon},set:function(t){this.icon=t},enumerable:!1,configurable:!0}),Object.defineProperty(fgui.GComponent.prototype,"allTitle",{get:function(){for(var t=this.getAllChildren("title"),e=0,n=t.length;e<n;++e){var o=t[e].allTitle;if(o)return o}},set:function(t){this.getAllChildren("title").forEach(function(e){return e.allTitle=t}),this.updateGear(6)},enumerable:!1,configurable:!0}),Object.defineProperty(fgui.GComponent.prototype,"allIcon",{get:function(){for(var t=this.getAllChildren("icon"),e=0,n=t.length;e<n;++e){var o=t[e].allIcon;if(o)return o}},set:function(t){this.getAllChildren("icon").forEach(function(e){return e.allIcon=t}),this.updateGear(7)},enumerable:!1,configurable:!0}),Object.defineProperty(fgui.GButton.prototype,"allTitle",{get:function(){return this._title},set:function(t){this._title=t,t=this._selected&&this._selectedTitle?this._selectedTitle:this._title,this.getAllChildren("title").forEach(function(e){return e.allTitle=t}),this.updateGear(7)},enumerable:!1,configurable:!0}),Object.defineProperty(fgui.GButton.prototype,"allIcon",{get:function(){return this._icon},set:function(t){this._icon=t,t=this._selected&&this._selectedIcon?this._selectedIcon:this._icon,this.getAllChildren("icon").forEach(function(e){return e.allIcon=t}),this.updateGear(7)},enumerable:!1,configurable:!0}),Object.defineProperty(fgui.GObject.prototype,"templateVars",{get:function(){return null},set:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(fgui.GObject.prototype,"allTemplateVars",{get:function(){return this.templateVars},set:function(t){this.templateVars=t},enumerable:!1,configurable:!0}),Object.defineProperty(fgui.GComponent.prototype,"templateVars",{get:function(){return this._titleObject?this._titleObject.templateVars:null},set:function(t){this._titleObject&&(this._titleObject.templateVars=t,this.updateGear(6))},enumerable:!1,configurable:!0}),Object.defineProperty(fgui.GComponent.prototype,"allTemplateVars",{get:function(){for(var t=this.getAllChildren("title"),e=0,n=t.length;e<n;++e){var o=t[e].allTemplateVars;if(o)return o}},set:function(t){this.getAllChildren("title").forEach(function(e){return e.allTemplateVars=t}),this.updateGear(6)},enumerable:!1,configurable:!0}),Object.defineProperty(fgui.GObject.prototype,"progress",{get:function(){return null},set:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(fgui.GComponent.prototype,"progress",{get:function(){var t=this.getChild("progress");return t&&t.progress},set:function(t){var e=this.getChild("progress");e&&(e.progress=t)},enumerable:!1,configurable:!0}),Object.defineProperty(fgui.GProgressBar.prototype,"progress",{get:function(){return this.value},set:function(t){this.value=t},enumerable:!1,configurable:!0}),Object.defineProperty(fgui.GObject.prototype,"allProgress",{get:function(){return this.progress},set:function(t){this.progress=t},enumerable:!1,configurable:!0}),Object.defineProperty(fgui.GComponent.prototype,"allProgress",{get:function(){for(var t=this.getAllChildren("progress"),e=0,n=t.length;e<n;++e){var o=t[e].allProgress;if(null!=o)return o}},set:function(t){this.getAllChildren("progress").forEach(function(e){return e.progress=t})},enumerable:!1,configurable:!0}),Object.defineProperty(fgui.GObject.prototype,"button",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(fgui.GComponent.prototype,"button",{get:function(){for(var t=this.getAllChildren("button"),e=0,n=t.length;e<n;++e){var o=t[e].button;if(null!=o)return o}return null},enumerable:!1,configurable:!0}),Object.defineProperty(fgui.GButton.prototype,"button",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(fgui.GRoot.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t},enumerable:!0,configurable:!0});var o=fgui.GRoot.prototype.playOneShotSound;fgui.GRoot.prototype.playOneShotSound=function(t,e){this.muted||o.call(this,t,e)},Object.defineProperty(fgui.GLoader.prototype,"loadingExternal",{get:function(){return this._loadingExternal},enumerable:!1,configurable:!0}),Object.defineProperty(fgui.GLoader.prototype,"autoRelease",{get:function(){return this._autoRelease},set:function(t){this._autoRelease=t},enumerable:!1,configurable:!0}),fgui.GLoader.prototype.loadExternal=function(){this._loadingExternal=!0;var t=this,e=this.url,n=function(n,o){t._url==e&&cc.isValid(t._node)&&(n&&console.warn(n),o instanceof cc.SpriteFrame?t.onExternalLoadSuccess(o):o instanceof cc.Texture2D&&t.onExternalLoadSuccess(new cc.SpriteFrame(o)),t._loadingExternal=!1)};if(fgui.ToolSet.startsWith(this._url,"http://")||fgui.ToolSet.startsWith(this._url,"https://")||fgui.ToolSet.startsWith(this._url,"/"))if(cc.assetManager.assets.has(this._url)){var o=cc.assetManager.assets.get(this._url);o instanceof cc.Asset&&o.addRef(),requestAnimationFrame(function(){o instanceof cc.Asset&&o.decRef.call(o,!1),n(null,o)})}else cc.assetManager.loadRemote(this._url,{ext:".png"},n);else cc.resources.load(this._url,cc.Asset,n)},fgui.GLoader.prototype.freeExternal=function(t){this._autoRelease&&cc.assetManager.releaseAsset(t.getTexture())},cc._RF.pop()},{}],FairyGUIFix:[function(t,e){"use strict";cc._RF.push(e,"bea669IO2NGq6SCqUzmv2sV","FairyGUIFix"),Object.defineProperty(fgui.GGraph.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha!==t&&(this._alpha=t,this._node.opacity=255*this._alpha,this.updateGraph(),this.updateGear(3))},enumerable:!0,configurable:!0});var n=fgui.GGraph.prototype.updateGraph;fgui.GGraph.prototype.updateGraph=function(){var t=this._lineColor,e=this._fillColor;this._lineColor=t.clone(),this._lineColor.setA(t.getA()*this._alpha),this._fillColor=e.clone(),this._fillColor.setA(e.getA()*this._alpha),n.call(this),this._lineColor=t,this._fillColor=e},fgui.GButton.prototype.onClick_1=function(){var t=this;if(this._sound){var e,n=fgui.UIPackage.getItemByURL(this._sound);n?(e=n.owner.getItemAsset(n))&&fgui.GRoot.inst.playOneShotSound(e,this._soundVolumeScale):(e=cc.resources.get(this._sound,cc.AudioClip))?fgui.GRoot.inst.playOneShotSound(e,this._soundVolumeScale):cc.resources.load(this._sound,cc.AudioClip,function(e,n){e||fgui.GRoot.inst.playOneShotSound(n,t._soundVolumeScale)})}this._mode===fgui.ButtonMode.Check?this._changeStateOnClick&&(this.selected=!this._selected,this._node.emit(fgui.Event.STATUS_CHANGED,this)):this._mode===fgui.ButtonMode.Radio?this._changeStateOnClick&&!this._selected&&(this.selected=!0,this._node.emit(fgui.Event.STATUS_CHANGED,this)):this._relatedController&&(this._relatedController.selectedPageId=this._relatedPageId)},fgui.GObject.prototype.setSkew=function(t,e){this._skewX==t&&this._skewY==e||(this._skewX=t,this._skewY=e,this._node.skewX=t,this._node.skewY=-e)},fgui.GLoader.prototype.updateLayout=function(){if(null!=this._content2||null!=this._content){var t,e,n=this.sourceWidth,o=this.sourceHeight;if(!this._autoSize||(this._updatingLayout=!0,0==n&&(n=50),0==o&&(o=30),this.setSize(n,o),this._updatingLayout=!1,this._container.setContentSize(this._width,this._height),t=-this.pivotX*this._width,e=this.pivotY*this._height,this._container.setPosition(t,e),this._content2&&(this._content2.setPosition(t+this._width*this.pivotX,e-this._height*this.pivotY),this._content2.setScale(1,1)),n!=this._width||o!=this._height)){var a,i,r=1,s=1;this._fill!=fgui.LoaderFillType.None&&(r=this.width/this.sourceWidth,s=this.height/this.sourceHeight,1==r&&1==s||(this._fill==fgui.LoaderFillType.ScaleMatchHeight?r=s:this._fill==fgui.LoaderFillType.ScaleMatchWidth?s=r:this._fill==fgui.LoaderFillType.Scale?r>s?r=s:s=r:this._fill==fgui.LoaderFillType.ScaleNoBorder&&(r>s?s=r:r=s),this._shrinkOnly&&(r>1&&(r=1),s>1&&(s=1)),n=this.sourceWidth*r,o=this.sourceHeight*s)),this._container.setContentSize(n,o),t=-this.pivotX*this._width,e=this.pivotY*this._height,this._content2&&(this._content2.setPosition(t+this._width*this.pivotX,e-this._height*this.pivotY),this._content2.setScale(r,s)),a=this._align==fgui.AlignType.Left?0:this._align==fgui.AlignType.Center?Math.floor((this._width-n)/2):this._width-n,i=-(i=this._verticalAlign==fgui.VertAlignType.Top?0:this._verticalAlign==fgui.VertAlignType.Middle?Math.floor((this._height-o)/2):this._height-o),this._container.setPosition(t+a,e+i)}}else this._autoSize&&(this._updatingLayout=!0,this.setSize(50,30),this._updatingLayout=!1)};var o=fgui.GProgressBar.prototype.dispose;fgui.GProgressBar.prototype.dispose=function(){fgui.GTween.kill(this,!1,this.update),o.call(this)},fgui.GTextField.prototype.handleGrayedChanged=function(){this.updateFontColor(),this.updateStrokeColor(),this.updateMaterial()},fgui.GTextField.prototype.updateMaterial=function(){var t;this._grayed?((t=this._graySpriteMaterial)||(t=cc.Material.getBuiltinMaterial("2d-gray-sprite")),t=this._graySpriteMaterial=cc.MaterialVariant.create(t,this)):((t=this._spriteMaterial)||(t=cc.Material.getBuiltinMaterial("2d-sprite")),t=this._spriteMaterial=cc.MaterialVariant.create(t,this)),this._label.setMaterial(0,t)},fgui.GTextField.prototype.updateFontSize=function(){var t=this._label.font;if(t instanceof cc.BitmapFont){var e=t._fntConfig;e.resizable?this._label.fontSize=this._fontSize:this._label.fontSize=e.fontSize,this._label.lineHeight=this._label.fontSize+this._leading}else this._label.fontSize=this._fontSize,this._label.lineHeight=this._fontSize+this._leading},Object.defineProperty(fgui.Image.prototype,"grayed",{get:function(){return this._grayed},set:function(t){var e;this._grayed!=t&&(this._grayed=t,t?(this._graySpriteMaterial||(this._graySpriteMaterial=cc.MaterialVariant.create(cc.Material.getBuiltinMaterial("2d-gray-sprite"),this)),e=this._graySpriteMaterial):(this._spriteMaterial||(this._spriteMaterial=cc.MaterialVariant.create(cc.Material.getBuiltinMaterial("2d-sprite"),this)),e=this._spriteMaterial),this.setMaterial(0,e))},enumerable:!1,configurable:!0}),cc._RF.pop()},{}],FeedBackSuggModel:[function(t,e,n){"use strict";cc._RF.push(e,"c83b2Yuy4pARLRvlHaUYHJk","FeedBackSuggModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function r(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.FeedBackSuggModel=void 0;var c=t("../../Framework/Model/BaseModel"),l=t("../../Framework/Root/ModelRoot"),u=t("./FeedBackSuggProxy"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return l.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return u.FeedBackSuggProxy.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){},e.prototype.submitSuggestion=function(t,e){return r(this,void 0,Promise,function(){return s(this,function(n){switch(n.label){case 0:return[4,this.proxy.submitSuggestion(t,function(t){e&&e(t)})];case 1:return n.sent(),[2]}})})},i([jsClass],e)}(c.BaseModel);n.FeedBackSuggModel=d,cc.systemEvent.once("GameRoot.inited",function(){l.ModelRoot.instance.add(d)}),cc._RF.pop()},{"../../Framework/Model/BaseModel":"BaseModel","../../Framework/Root/ModelRoot":"ModelRoot","./FeedBackSuggProxy":"FeedBackSuggProxy"}],FeedBackSuggProxy:[function(t,e,n){"use strict";cc._RF.push(e,"0fb55lrs0NFXJNHEGnWkx7n","FeedBackSuggProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function r(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},c=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.FeedBackSuggProxy=void 0;var l=t("../../Framework/Proxy/BaseProxy"),u=t("../../Framework/Root/ProxyRoot"),d=t("../../Framework/Utils/HttpUtil"),p=t("../Base/Data/DataBfConfig"),h=t("../Base/Utils/UtilTool"),_=t("../UserInfo/UserInfoModel"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SUBMIT_HOST="https://api.bfxiuxianqipai.com",e.SUBMIT_URL="/customer/feedback/submit",e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return u.ProxyRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.submitSuggestion=function(t,e){return r(this,void 0,void 0,function(){var n,o,a,i,r;return s(this,function(s){switch(s.label){case 0:return n={num_id:_.UserInfoModel.instance.userInfo.numID,nickname:_.UserInfoModel.instance.userInfo.nickname,area_id:p.DataBfConfig.areaID,channel_id:p.DataBfConfig.ymn.channel,client_version:p.DataBfConfig.VERSION,contact:t.contact,content:t.content,feedback_type:t.type,feedback_source:t.source,pic_urls:t.picUrls},o=c(this.getSubmitSign(n),3),a=o[0],i=o[1],r=o[2],[4,d.HttpUtil.post(this.SUBMIT_HOST+this.SUBMIT_URL,n,{"Content-Type":"application/json","X-Nonce":a,"X-Timestamp":i,"X-Authorization":r}).then(function(t){console.warn("FeedBackSuggProxy submitSuggestion:",t),e&&e(0===t.code)},function(t){console.error(t),e&&e(null)})];case 1:return s.sent(),[2]}})})},e.prototype.getSubmitSign=function(t){var e=h.UtilTool.getRandNonceStr(),n=Math.floor(_.UserInfoModel.instance.getServerTimestamp()/1e3).toString(),o=Object.deepCopy(t);Object.assign(o,{timestamp:n,nonce:e});for(var a=Object.keys(o).sort(),i="",r=0;r<a.length;r++){i+=a[r],i+="=";var s=o[a[r]];i+="object"==typeof s?JSON.stringify(s):s,r!==a.length-1&&(i+="&")}var c=h.UtilTool.encryptWithMD5(i);return console.warn("getSubmitSign, strSign:",i),console.warn("getSubmitSign, sign:",c),[e,n,c]},i([jsClass],e)}(l.BaseProxy);n.FeedBackSuggProxy=f,cc.systemEvent.once("GameRoot.inited",function(){u.ProxyRoot.instance.add(f)}),cc._RF.pop()},{"../../Framework/Proxy/BaseProxy":"BaseProxy","../../Framework/Root/ProxyRoot":"ProxyRoot","../../Framework/Utils/HttpUtil":"HttpUtil","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Utils/UtilTool":"UtilTool","../UserInfo/UserInfoModel":"UserInfoModel"}],FeedBackSuggUI:[function(t,e,n){"use strict";cc._RF.push(e,"7f789fV5iFJaJ12OiS8raW6","FeedBackSuggUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.FeedBackSuggUI=n.FeedBackSuggSource=void 0;var r,s=t("../../Framework/Manager/EventManager"),c=t("../../Framework/UI/FadeUI"),l=t("../Base/Data/DataEvent"),u=t("./FeedBackSuggModel");(function(t){t[t.GOLD_FRIEND_TEAM=1]="GOLD_FRIEND_TEAM",t[t.FRIEND_ROOM=2]="FRIEND_ROOM",t[t.HALL=3]="HALL",t[t.MATCH=4]="MATCH",t[t.OTHER=99]="OTHER"})(r=n.FeedBackSuggSource||(n.FeedBackSuggSource={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._source=1,e}return a(e,t),e.getPkgName=function(){return"FeedBackUI"},e.getCompName=function(){return"SuggMainPanel"},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return u.FeedBackSuggModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initUI(),this.initListener()},e.prototype.initUI=function(){},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),this.view.m_Window.m_btnSubmit.onClick(this.onBtnSubmit,this)},e.prototype.init=function(t){this._source=t},e.prototype.onBtnSubmit=function(){var t=this,e=this.view.m_Window;if(e.m_ebSugg.text.length<10)s.EventManager.instance.emit(l.DataEvent.ToastData,"\u63cf\u8ff0\u4e0d\u4f4e\u4e8e\u5341\u4e2a\u5b57\uff0c\u8bf7\u5c3d\u91cf\u8be6\u7ec6\u63cf\u8ff0\u4e00\u4e0b\u54e6");else{var n=e.m_cRadio.selectedIndex+1;n>r.HALL&&(n=99);var o=e.m_ebSugg.text,a=e.m_ebContact.text,i={type:n,source:this._source,content:o,contact:a,picUrls:""};this.model.submitSuggestion(i,function(e){e?(s.EventManager.instance.emit(l.DataEvent.ToastData,"\u610f\u89c1\u5df2\u6210\u529f\u63d0\u4ea4\uff0c\u6211\u4eec\u4f1a\u5c3d\u5feb\u5904\u7406\u60a8\u7684\u53cd\u9988"),t.onExitClick()):s.EventManager.instance.emit(l.DataEvent.ToastData,"\u63d0\u4ea4\u5931\u8d25")})}},i([jsClass],e)}(c.FadeUI);n.FeedBackSuggUI=d,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataEvent":"DataEvent","./FeedBackSuggModel":"FeedBackSuggModel"}],FeedBackUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"e878bSfEk9FR5xPE8J9296W","FeedBackUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./FeedBackUI_MainPanel"),a=t("./FeedBackUI_Window"),i=t("./FeedBackUI_SuggMainPanel"),r=t("./FeedBackUI_SuggWindow"),s=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default)},t}();n.default=s,cc._RF.pop()},{"./FeedBackUI_MainPanel":"FeedBackUI_MainPanel","./FeedBackUI_SuggMainPanel":"FeedBackUI_SuggMainPanel","./FeedBackUI_SuggWindow":"FeedBackUI_SuggWindow","./FeedBackUI_Window":"FeedBackUI_Window"}],FeedBackUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"7ed02lu7gBAtaE8XtcWrNdn","FeedBackUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FeedBackUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://42prhe18svvk0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FeedBackUI_SuggMainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"633a2966gVMOY4tVy53QY37","FeedBackUI_SuggMainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FeedBackUI","SuggMainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://42prhe18wv1zd",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FeedBackUI_SuggWindow:[function(t,e,n){"use strict";cc._RF.push(e,"8d02f7a4TBCZaOMK3jpS1Hn","FeedBackUI_SuggWindow");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FeedBackUI","SuggWindow")},e.prototype.onConstruct=function(){this.m_cRadio=this.getControllerAt(0),this.m_btnClose=this.getChildAt(7),this.m_ebSugg=this.getChildAt(11),this.m_ebContact=this.getChildAt(12),this.m_btnSubmit=this.getChildAt(13),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://42prhe18wv1ze",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FeedBackUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"b20dfY7zJRI1q5KifcHkFO6","FeedBackUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FeedBackUI","Window")},e.prototype.onConstruct=function(){this.m_btnClose=this.getChildAt(2),this.m_btnCustomer=this.getChildAt(3),this.m_btnCopyOa=this.getChildAt(4),this.m_btnCopyPhone=this.getChildAt(5),this.m_btnAddWeChat=this.getChildAt(6),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://42prhe18svvk1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FeedBackUI:[function(t,e,n){"use strict";cc._RF.push(e,"5e165gBFdBBzJCx2mBHvRQk","FeedBackUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.FeedBackUI=void 0;var r=t("../../Framework/Manager/EventManager"),s=t("../../Framework/UI/FadeUI"),c=t("../Base/Data/DataEvent"),l=t("../Base/Module/BfAnalytics/BfasManager"),u=t("../Base/Module/BfAnalytics/DataPointID"),d=t("../Base/View/UIHelp"),p=t("../Base/Module/Platform/PlatformManager"),h=t("../Base/Module/Platform/_IPlatform"),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initUI(),this.initListener()},e.prototype.initUI=function(){p.PlatformManager.instance.supportAct.CUSTOMER||(this.view.m_Window.m_btnCustomer.visible=!1)},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),this.view.m_Window.m_btnCustomer.onClick(this.onBtnCustomer,this),this.view.m_Window.m_btnCopyOa.onClick(this.onBtnCopyOa,this),this.view.m_Window.m_btnCopyPhone.onClick(this.onBtnCopyPhone,this),this.view.m_Window.m_btnAddWeChat.onClick(this.onBtnAddWeChat,this)},e.prototype.onBtnCustomer=function(){l.BfasManager.instance.sendEvt(u.FeedBackPointID.CLICK_CUSTOMER),d.UIHelp.instance.openCustomerServiceLink(h.CustomerRequestTypeEnum.CUSTOMER_SERVICE)},e.prototype.onBtnCopyOa=function(){l.BfasManager.instance.sendEvt(u.FeedBackPointID.COPY_OA),p.PlatformManager.instance.platform.setClipboardData("\u63bc\u86cb",function(t){t||r.EventManager.instance.emit(c.DataEvent.ToastData,"\u590d\u5236\u516c\u4f17\u53f7\u5931\u8d25\uff0c\u60a8\u53ef\u81ea\u884c\u641c\u7d22\u6dfb\u52a0\uff01")})},e.prototype.onBtnCopyPhone=function(){l.BfasManager.instance.sendEvt(u.FeedBackPointID.COPY_PHONE),p.PlatformManager.instance.platform.setClipboardData("4007202233",function(t){t||r.EventManager.instance.emit(c.DataEvent.ToastData,"\u590d\u5236\u5ba2\u670d\u7535\u8bdd\u5931\u8d25\uff0c\u60a8\u53ef\u81ea\u884c\u62e8\u6253\uff01")})},e.prototype.onBtnAddWeChat=function(){l.BfasManager.instance.sendEvt(u.FeedBackPointID.ADD_WECHAT),p.PlatformManager.instance.platform.canOpenURL?r.EventManager.instance.emit(c.DataEvent.ToastData,"\u5f53\u524d\u5e73\u53f0\u4e0d\u652f\u6301\u8be5\u529f\u80fd~"):d.UIHelp.instance.openCustomerServiceLink(h.CustomerRequestTypeEnum.WECHAT_GROUP)},i([jsClass],e)}(s.FadeUI);n.FeedBackUI=_,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataEvent":"DataEvent","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Platform/PlatformManager":"PlatformManager","../Base/Module/Platform/_IPlatform":"_IPlatform","../Base/View/UIHelp":"UIHelp"}],ForbidUserModel:[function(t,e,n){"use strict";cc._RF.push(e,"f46b1QGbA9GW6LzS3Mc5oK1","ForbidUserModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ForbidUserModel=void 0;var r=t("../../Framework/Manager/EventManager"),s=t("../../Framework/Manager/UIManager"),c=t("../../Framework/Model/BaseModel"),l=t("../../Framework/Root/ModelRoot"),u=t("../Base/Data/DataEvent"),d=t("../UserInfo/UserInfoModel"),p=t("./ForbidUserUI"),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return l.ModelRoot.instance.get(n)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){r.EventManager.instance.on(u.DataEvent.NotifyForbidAccount,this,this.onNotifyForbidAccount)},e.prototype.onNotifyForbidAccount=function(t){console.log("onNotifyForbidAccount:",t),t&&d.UserInfoModel.instance.setUserInfo({numID:t}),s.UIManager.instance.open(p.ForbidUserUI)},n=i([jsClass],e)}(c.BaseModel);n.ForbidUserModel=h,cc.systemEvent.once("GameRoot.inited",function(){l.ModelRoot.instance.add(h)}),cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/Model/BaseModel":"BaseModel","../../Framework/Root/ModelRoot":"ModelRoot","../Base/Data/DataEvent":"DataEvent","../UserInfo/UserInfoModel":"UserInfoModel","./ForbidUserUI":"ForbidUserUI"}],ForbidUserUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"feb0d5V1dlA37qvcHrTjJ3W","ForbidUserUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./ForbidUserUI_MainPanel"),a=t("./ForbidUserUI_Window"),i=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default)},t}();n.default=i,cc._RF.pop()},{"./ForbidUserUI_MainPanel":"ForbidUserUI_MainPanel","./ForbidUserUI_Window":"ForbidUserUI_Window"}],ForbidUserUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"477a5HGeOpEh7S+CDuY04ze","ForbidUserUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ForbidUserUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://2wmgesnhstwq0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ForbidUserUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"8b89b2mSE1KsoXyk31Ix/DB","ForbidUserUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ForbidUserUI","Window")},e.prototype.onConstruct=function(){this.m_btnExit=this.getChildAt(1),this.m_btnCustomer=this.getChildAt(2),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://2wmgesnhstwq1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ForbidUserUI:[function(t,e,n){"use strict";cc._RF.push(e,"33cb49pUDRGi6Grwq0rvkk/","ForbidUserUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ForbidUserUI=void 0;var r=t("../../Framework/UI/FadeUI"),s=t("../Base/Data/DataConstant"),c=t("../Base/View/UIHelp"),l=t("../Base/Module/Platform/PlatformManager"),u=t("../Base/Module/Platform/_IPlatform"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.getExtPkgNames=function(){return[s.DataConstant.PKG_COMMON]},e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){this.view.m_Window.m_btnExit.onClick(this.onBtnExit,this),this.view.m_Window.m_btnCustomer.onClick(this.onBtnCustomer,this)},e.prototype.onBtnExit=function(){console.log("onBtnExit"),l.PlatformManager.instance.platform.fix(!1)},e.prototype.onBtnCustomer=function(){console.log("onBtnCustomer"),c.UIHelp.instance.openCustomerServiceLink(u.CustomerRequestTypeEnum.CUSTOMER_SERVICE)},i([jsClass],e)}(r.FadeUI);n.ForbidUserUI=d,cc._RF.pop()},{"../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataConstant":"DataConstant","../Base/Module/Platform/PlatformManager":"PlatformManager","../Base/Module/Platform/_IPlatform":"_IPlatform","../Base/View/UIHelp":"UIHelp"}],FriendInviteUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"6d49aybdkVCk4mAvaHVUoUt","FriendInviteUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./FriendInviteUI_MainPanel"),a=t("./FriendInviteUI_Window"),i=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default)},t}();n.default=i,cc._RF.pop()},{"./FriendInviteUI_MainPanel":"FriendInviteUI_MainPanel","./FriendInviteUI_Window":"FriendInviteUI_Window"}],FriendInviteUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"27b9fBypaxLsLxzGn6S15E4","FriendInviteUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendInviteUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Window=this.getChildAt(0),this.m_TFadeIn=this.getTransitionAt(0),this.m_TFadeOut=this.getTransitionAt(1)},e.URL="ui://3uw22f9gnwkh0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendInviteUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"62debfcYApG1a3L0nVaSUmo","FriendInviteUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendInviteUI","Window")},e.prototype.onConstruct=function(){this.m_btnFold=this.getChildAt(1),this.m_loaderWx=this.getChildAt(2),this.m_FadeIn=this.getTransitionAt(0),this.m_FadeOut=this.getTransitionAt(1)},e.URL="ui://3uw22f9gnwkh1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendInviteUI:[function(t,e,n){"use strict";cc._RF.push(e,"e8d0cunPbJCUqKFR9T2GtiT","FriendInviteUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.FriendInviteUI=void 0;var r=t("../../Framework/UI/FadeUI"),s=t("../Base/Utils/UtilView"),c=t("../Base/Module/Share/ShareManager"),l=t("./FriendModel"),u=t("../Base/Module/OpenDataContext/OpenDataContextManager"),d=t("../Game/Common/GameCommonModel"),p=t("../Base/Data/DataConstant"),h=t("./FriendInviteUI/FriendInviteUIBinder"),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){h.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){s.UtilView.isFullScreen()&&(this.view.m_Window.x=this.view.m_Window.x+p.DataConstant.ADAPTER_WIDTH_VALUE+14),this.initListener()},e.prototype.onFadedIn=function(){t.prototype.onFadedIn.call(this),this.initUI()},e.prototype.onDestroy=function(){u.OpenDataContextManager.instance.close(),t.prototype.onDestroy.call(this)},e.prototype.initListener=function(){this.view.m_Window.m_btnFold.onClick(this.onExitClick,this)},e.prototype.initUI=function(){var t=l.FriendModel.instance.getShareArgs(),e=t.title,n=t.imageUrl;u.OpenDataContextManager.instance.setShareArgs(e,n);var o=d.GameCommonModel.instance.getBoxID().toString().padStart(6,"0");u.OpenDataContextManager.instance.setShareQuery(+(c.DirShareTypeEnum.BOX_ROOM+"."+o)),u.OpenDataContextManager.instance.initView(this.view.m_Window.m_loaderWx),u.OpenDataContextManager.instance.show("showFriends","vertical",!0,!0,30)},i([jsClass],e)}(r.FadeUI);n.FriendInviteUI=_,cc._RF.pop()},{"../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataConstant":"DataConstant","../Base/Module/OpenDataContext/OpenDataContextManager":"OpenDataContextManager","../Base/Module/Share/ShareManager":"ShareManager","../Base/Utils/UtilView":"UtilView","../Game/Common/GameCommonModel":"GameCommonModel","./FriendInviteUI/FriendInviteUIBinder":"FriendInviteUIBinder","./FriendModel":"FriendModel"}],FriendModel:[function(t,e,n){"use strict";cc._RF.push(e,"b91d4EGdihDEKQQlhPg5ceL","FriendModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.FriendModel=void 0;var r=t("../../Framework/Manager/EventManager"),s=t("../../Framework/Model/BaseModel"),c=t("../../Framework/Root/ModelRoot"),l=t("../Base/Data/DataBfConfig"),u=t("../Base/Data/DataEvent"),d=t("../Game/Common/GameCommonModel"),p=t("../Game/GuanDan/Model/GameModel"),h=t("../Base/Module/Platform/PlatformManager"),_=t("../Base/Module/Room/RoomModel"),f=t("../Base/Module/Share/ShareManager"),m=t("../UserInfo/UserInfoModel"),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UserCloudStorage="gdwx.UserCloudStorage",e._isUploaded=!1,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return c.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){r.EventManager.instance.on(u.DataEvent.UserInfoUpdate,this,this.onUserInfoUpdate)},e.prototype.onUserInfoUpdate=function(){var t=this;if(!this._isUploaded){var e=m.UserInfoModel.instance.userInfo.numID;if(e){var n=[{key:this.UserCloudStorage,value:JSON.stringify({numId:e})}];h.PlatformManager.instance.platform.setUserCloudStorage(n,function(e){t._isUploaded=e})}}},e.prototype.getShareArgs=function(){var t=_.RoomModel.instance.getClubConfig(d.GameCommonModel.instance.getClubid()),e=p.GameModel.instance.getLogicData(),n=this.getShareTitleArgs(t.gameID,e),o=n.gameType,a=n.gameTotalNum,i=n.baseScore,r=n.roomNumber;return f.ShareManager.instance.getShareArgs(f.ShareType.directInviteFriend,{titleArgs:[o,a,i,r]})},e.prototype.getShareTitleArgs=function(t,e){var n,o="\u597d\u53cb\u623f";l.GameIDInfo.ERREN_GD.id===t?o="\u4e8c\u4eba\u7ecf\u5178\u597d\u53cb\u623f":l.GameIDInfo.TTZ_GD.id===t?o="\u63bc\u86cb\u56e2\u56e2\u8f6c\u597d\u53cb\u623f":l.GameIDInfo.CLASSIC_GD.id===t?o=1===e.isBXP?"\u63bc\u86cb\u4e0d\u6d17\u724c\u597d\u53cb\u623f":"\u7ecf\u5178\u63bc\u86cb\u597d\u53cb\u623f":l.GameIDInfo.TP_GD.id===t&&(o="\u63bc\u86cb\u5e26\u62d6\u597d\u53cb\u623f");var a="10\u5c40";return l.GameIDInfo.ERREN_GD.id===t||l.GameIDInfo.TTZ_GD.id===t?a=e.totalPan+"\u5c40":l.GameIDInfo.CLASSIC_GD.id!==t&&l.GameIDInfo.NO_SHUFFLE_GD.id!==t&&l.GameIDInfo.TP_GD.id!==t||(a=null!==(n=[null,"\u8fc78","\u8fc710","\u8fc7A"][e.strRule])&&void 0!==n?n:"",e.isMult&&(a+=" \u56db\u70b8\u7ffb\u500d")),{gameType:o,gameTotalNum:a,baseScore:1,roomNumber:d.GameCommonModel.instance.getBoxID()}},i([jsClass],e)}(s.BaseModel);n.FriendModel=g,cc.systemEvent.once("GameRoot.inited",function(){c.ModelRoot.instance.add(g)}),cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/Model/BaseModel":"BaseModel","../../Framework/Root/ModelRoot":"ModelRoot","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataEvent":"DataEvent","../Base/Module/Platform/PlatformManager":"PlatformManager","../Base/Module/Room/RoomModel":"RoomModel","../Base/Module/Share/ShareManager":"ShareManager","../Game/Common/GameCommonModel":"GameCommonModel","../Game/GuanDan/Model/GameModel":"GameModel","../UserInfo/UserInfoModel":"UserInfoModel"}],FriendTeamGuideUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"6723e4bYU5JsJTeT305AFhq","FriendTeamGuideUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./FriendTeamGuideUI_MainPanel"),a=t("./FriendTeamGuideUI_Window"),i=t("./FriendTeamGuideUI_Guide"),r=t("./FriendTeamGuideUI_Finger"),s=t("./FriendTeamGuideUI_GuideNew"),c=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default)},t}();n.default=c,cc._RF.pop()},{"./FriendTeamGuideUI_Finger":"FriendTeamGuideUI_Finger","./FriendTeamGuideUI_Guide":"FriendTeamGuideUI_Guide","./FriendTeamGuideUI_GuideNew":"FriendTeamGuideUI_GuideNew","./FriendTeamGuideUI_MainPanel":"FriendTeamGuideUI_MainPanel","./FriendTeamGuideUI_Window":"FriendTeamGuideUI_Window"}],FriendTeamGuideUI_Finger:[function(t,e,n){"use strict";cc._RF.push(e,"dae0aMo+eBLo42q6m9sCfL6","FriendTeamGuideUI_Finger");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamGuideUI","Finger")},e.prototype.onConstruct=function(){this.m_tFinger=this.getTransitionAt(0)},e.URL="ui://lkq6yycqatbri",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamGuideUI_GuideNew:[function(t,e,n){"use strict";cc._RF.push(e,"e9702yeRoJDVpibVMpGO7Xz","FriendTeamGuideUI_GuideNew");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamGuideUI","GuideNew")},e.prototype.onConstruct=function(){this.m_cImage=this.getControllerAt(0),this.m_pos1=this.getChildAt(1),this.m_pos2=this.getChildAt(2),this.m_pos3=this.getChildAt(3),this.m_pos4=this.getChildAt(4),this.m_pos5=this.getChildAt(5),this.m_pos6=this.getChildAt(6),this.m_finger=this.getChildAt(7),this.m_btnReplay=this.getChildAt(9)},e.URL="ui://lkq6yycqdno2v",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamGuideUI_Guide:[function(t,e,n){"use strict";cc._RF.push(e,"132b9AxJr9HK5O3qu++VBmw","FriendTeamGuideUI_Guide");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamGuideUI","Guide")},e.prototype.onConstruct=function(){this.m_cImage=this.getControllerAt(0),this.m_pos1=this.getChildAt(1),this.m_pos2=this.getChildAt(2),this.m_pos3=this.getChildAt(3),this.m_pos4=this.getChildAt(4),this.m_pos5=this.getChildAt(5),this.m_pos6=this.getChildAt(6),this.m_finger=this.getChildAt(7),this.m_btnReplay=this.getChildAt(9)},e.URL="ui://lkq6yycqatbrf",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamGuideUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"43360i3RK5OGZ1gdTqZdTmR","FriendTeamGuideUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamGuideUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://lkq6yycqatbra",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamGuideUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"68378wzCYJBh7c4AXOD9F67","FriendTeamGuideUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamGuideUI","Window")},e.prototype.onConstruct=function(){this.m_cType=this.getControllerAt(0),this.m_btnClose=this.getChildAt(1),this.m_compGuide=this.getChildAt(3),this.m_compGuideNew=this.getChildAt(4)},e.URL="ui://lkq6yycqatbrb",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamGuideUI:[function(t,e,n){"use strict";cc._RF.push(e,"39c13z5jZtGkb5I7Fec2nXC","FriendTeamGuideUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.FriendTeamGuideUI=n.TeamGuideType=void 0;var r,s=t("../../Framework/UI/FadeUI"),c=t("../Base/Module/BfAnalytics/BfasManager"),l=t("../Base/Module/BfAnalytics/DataPointID"),u=t("./FriendTeamGuideUI/FriendTeamGuideUIBinder"),d=t("./FriendTeamModel");(function(t){t[t.OLD=0]="OLD",t[t.NEW=1]="NEW"})(r=n.TeamGuideType||(n.TeamGuideType={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._type=0,e._curIdx=0,e._arrPos=[],e}return a(e,t),e.uiBind=function(){u.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return d.FriendTeamModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.init=function(t){this._type=t,this.view.m_Window.m_cType.selectedIndex=t,this.initData(),this.startAction();var e=this.model.getBfasPlazaData();c.BfasManager.instance.sendEvt(l.FriendMixTeamPointID.SHOW_TEAM_GUIDE_NEW,e)},e.prototype.onDestroy=function(){var e=this.view.m_Window.m_compGuide.m_finger;cc.Tween.stopAllByTarget(e),t.prototype.onDestroy.call(this)},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),this.view.m_Window.m_compGuide.m_btnReplay.onClick(this.onClickReplay,this),this.view.m_Window.m_compGuideNew.m_btnReplay.onClick(this.onClickReplay,this)},e.prototype.initData=function(){var t=this.view.m_Window.m_compGuide;this._type==r.NEW&&(t=this.view.m_Window.m_compGuideNew);for(var e=1;e<=6;e++){var n=t["m_pos"+e],o=new cc.Vec2(n.x-20,n.y-9);this._arrPos.push(o)}},e.prototype.onClickReplay=function(){this.startAction()},e.prototype.startAction=function(){var t=this.view.m_Window.m_compGuide.m_finger;this._type==r.NEW&&(t=this.view.m_Window.m_compGuideNew.m_finger),t.visible=!0,t.setPosition(this._arrPos[0].x,this._arrPos[0].y),this._curIdx=0,this.moveFinger()},e.prototype.moveFinger=function(){var t=this,e=this.view.m_Window.m_compGuide.m_cImage,n=this.view.m_Window.m_compGuide.m_finger;this._type==r.NEW&&(e=this.view.m_Window.m_compGuideNew.m_cImage,n=this.view.m_Window.m_compGuideNew.m_finger),e.selectedIndex=this._curIdx;var o=this._arrPos[this._curIdx];o?(cc.Tween.stopAllByTarget(n),cc.tween(n).to(1,{x:o.x,y:o.y}).call(function(){t.playFingerAni()}).start()):n.visible=!1},e.prototype.playFingerAni=function(){var t=this,e=this.view.m_Window.m_compGuide.m_finger;this._type==r.NEW&&(e=this.view.m_Window.m_compGuideNew.m_finger),e.m_tFinger.play(function(){t._curIdx+=1,t.moveFinger()})},i([jsClass],e)}(s.FadeUI);n.FriendTeamGuideUI=p,cc._RF.pop()},{"../../Framework/UI/FadeUI":"FadeUI","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","./FriendTeamGuideUI/FriendTeamGuideUIBinder":"FriendTeamGuideUIBinder","./FriendTeamModel":"FriendTeamModel"}],FriendTeamJoinUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"75bd6CoMFVCX5zTZ52cA/s1","FriendTeamJoinUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./FriendTeamJoinUI_ButtonNum"),a=t("./FriendTeamJoinUI_MainPanel"),i=t("./FriendTeamJoinUI_Window"),r=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default)},t}();n.default=r,cc._RF.pop()},{"./FriendTeamJoinUI_ButtonNum":"FriendTeamJoinUI_ButtonNum","./FriendTeamJoinUI_MainPanel":"FriendTeamJoinUI_MainPanel","./FriendTeamJoinUI_Window":"FriendTeamJoinUI_Window"}],FriendTeamJoinUI_ButtonNum:[function(t,e,n){"use strict";cc._RF.push(e,"002a3qn/cpC95siOEaFq4e7","FriendTeamJoinUI_ButtonNum");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamJoinUI","ButtonNum")},e.prototype.onConstruct=function(){this.m_delShow=this.getControllerAt(0)},e.URL="ui://rtag90tmh5sa3r",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],FriendTeamJoinUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"7e77du81JVNtrH/A2Jvb2Bo","FriendTeamJoinUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamJoinUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1)},e.URL="ui://rtag90tmh5sa40",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamJoinUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"a0ce9IIUKxMwZjtpQ5wojQN","FriendTeamJoinUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamJoinUI","Window")},e.prototype.onConstruct=function(){this.m_btnClose=this.getChildAt(0),this.m_btnNum1=this.getChildAt(3),this.m_btnNum2=this.getChildAt(4),this.m_btnNum3=this.getChildAt(5),this.m_btnNum4=this.getChildAt(6),this.m_btnNum5=this.getChildAt(7),this.m_btnNum6=this.getChildAt(8),this.m_btnNum7=this.getChildAt(9),this.m_btnNum8=this.getChildAt(10),this.m_btnNum9=this.getChildAt(11),this.m_btnNum0=this.getChildAt(12),this.m_btndelall=this.getChildAt(13),this.m_btndelone=this.getChildAt(14),this.m_txtInputeTeamid=this.getChildAt(15)},e.URL="ui://rtag90tmh5sa41",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamJoinUI:[function(t,e,n){"use strict";cc._RF.push(e,"20e69H2F9NK/5Q7b+z2HXrl","FriendTeamJoinUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Framework/Manager/EventManager"),s=t("../../Framework/UI/FadeUI"),c=t("../Base/Data/DataEvent"),l=t("../Base/Utils/UtilClub"),u=t("../FriendTeam/FriendTeamModel"),d=t("./FriendTeamJoinUI/FriendTeamJoinUIBinder"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){d.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return u.FriendTeamModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){this.view.m_Collider.onClick(this.onExitClick,this);for(var t=this.view.m_Window,e=0;e<10;e++)t["m_btnNum"+e].onClick(this.clickNumBtn,this);t.m_btndelall.onClick(this.btnDelAllClick,this),t.m_btndelone.onClick(this.btnDelOneClick,this),t.m_btnClose.onClick(this.btnCloseClick,this)},e.prototype.clickNumBtn=function(t){var e=this,n=fgui.GObject.cast(t.currentTarget).title,o=this.view.m_Window.m_txtInputeTeamid;if(!(6<=o.text.length)&&(o.text+=n,6===o.text.length)){var a=Number(o.text);if(a===this.mode.teamInfo.partnerid)return void r.EventManager.instance.emit(c.DataEvent.ToastData,"\u5df2\u5728\u961f\u4f0d\u4e2d\uff0c\u4e0d\u7528\u66f4\u6362");this.mode.changeTeam(a,u.FTTeamTypeEnum.FREE,function(t,n){if(t)e.mode.evtJoinTeam(),e.onExitClick();else{var o;o=304===n.code?"\u961f\u4f0d\u5df2\u89e3\u6563\u6216\u8f93\u5165\u6709\u8bef\uff0c\u8bf7\u91cd\u65b0\u52a0\u5165\u6216\u521b\u5efa\u65b0\u961f\u4f0d":l.UtilClub.getErrorText(n),r.EventManager.instance.emit(c.DataEvent.ToastData,o)}})}},e.prototype.btnDelAllClick=function(){this.view.m_Window.m_txtInputeTeamid.text=""},e.prototype.btnDelOneClick=function(){var t=this.view.m_Window.m_txtInputeTeamid,e=t.text,n=e.length;0!==n&&(t.text=e.substring(0,n-1))},e.prototype.btnCloseClick=function(){r.EventManager.instance.emit(c.DataEvent.FriendTeamJoinClose),this.onExitClick()},i([jsClass],e)}(s.FadeUI);n.default=p,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataEvent":"DataEvent","../Base/Utils/UtilClub":"UtilClub","../FriendTeam/FriendTeamModel":"FriendTeamModel","./FriendTeamJoinUI/FriendTeamJoinUIBinder":"FriendTeamJoinUIBinder"}],FriendTeamModel:[function(t,e,n){"use strict";cc._RF.push(e,"0096cuf9l9PmYdlRuClSGLZ","FriendTeamModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.FriendTeamModel=n.SelectPlayTypeEnum=n.FTChatTypeEnum=n.FTChooseFieldEnum=n.FTReadyStateEnum=n.LeaveTeamReasonEnum=n.TeamStateEnum=n.UserLinkStepEnum=n.EnterTypeEnum=n.DirectShareResultEnum=n.FTTeamTypeEnum=n.FriendTeamStatusEnum=void 0;var r,s,c,l,u,d,p,h,_,f=t("../../Framework/Manager/EventManager"),m=t("../../Framework/Manager/UIManager"),g=t("../../Framework/Model/BaseModel"),y=t("../../Framework/Root/ModelRoot"),I=t("../Bankrupt/BankruptModel"),C=t("../Base/Data/DataBfConfig"),M=t("../Base/Data/DataEvent"),v=t("../Base/Data/DataLocalStorageKey"),E=t("../Base/Module/BfAnalytics/BfasManager"),A=t("../Base/Module/BfAnalytics/DataPointID"),P=t("../Base/Utils/UtilClub"),b=t("../Base/Utils/UtilTool"),U=t("../Base/View/Common/DialogUI"),S=t("../Game/GuanDan/GameEvent"),T=t("../Game/GuanDan/GameUI"),R=t("../Base/Module/Network/Base/Processid"),w=t("../Base/Module/Network/Base/ProtocolManager"),D=t("../Base/Module/Network/SocketUtils"),O=t("../Base/Module/OpenDataContext/OpenDataContextManager"),L=t("../Base/Module/Platform/PlatformManager"),G=t("../Base/Module/Room/ClubConfig"),B=t("../Base/Module/Room/RoomModel"),N=t("../Base/Module/Room/RoomProxy"),F=t("../Base/Module/Share/ShareManager"),k=t("../UserInfo/UserInfoModel"),x=t("../Base/Module/ClubError/ErrorCodeDbpConfig"),j=t("../Base/Module/ClubError/ErrorCodeGameConfig"),H=t("./FriendTeamProxy"),W=t("../Base/Data/DataScript"),Y=t("../Base/View/UIHelp"),V=t("./FriendTeamRecordUI"),q=t("./FriendTeamUI"),K=t("../Hall/HallModel"),X=t("../Base/Module/Platform/Const/PlatformEventType"),J=t("../HallGround/HallGroundModel"),z=t("./FriendTeamGuideUI"),Q=t("../Hall/HallUI");(function(t){t[t.NONE=0]="NONE",t[t.LEADER=1]="LEADER",t[t.MEMBER=2]="MEMBER"})(r=n.FriendTeamStatusEnum||(n.FriendTeamStatusEnum={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.FREE=1]="FREE",t[t.GOLD=2]="GOLD",t[t.GOLD_INLINE=3]="GOLD_INLINE",t[t.ACT_CHALLENGE=4]="ACT_CHALLENGE",t[t.ACT_INVITE=5]="ACT_INVITE"}(s=n.FTTeamTypeEnum||(n.FTTeamTypeEnum={})),function(t){t[t.CANCEL=1]="CANCEL",t[t.SUCCESS=2]="SUCCESS",t[t.NOT_WX_FRIEND=3]="NOT_WX_FRIEND"}(c=n.DirectShareResultEnum||(n.DirectShareResultEnum={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.TEAM_SINGLE=1]="TEAM_SINGLE",t[t.GOLD_INLINE_SINGLE=2]="GOLD_INLINE_SINGLE"}(l=n.EnterTypeEnum||(n.EnterTypeEnum={})),function(t){t[t.OFFLINE=4]="OFFLINE"}(n.UserLinkStepEnum||(n.UserLinkStepEnum={})),function(t){t[t.INIT=0]="INIT",t[t.CREATE=1]="CREATE",t[t.JOIN=2]="JOIN",t[t.READY=3]="READY",t[t.START=4]="START",t[t.PLAYING=5]="PLAYING"}(u=n.TeamStateEnum||(n.TeamStateEnum={})),function(t){t[t.DISMISS=1]="DISMISS",t[t.QUIT=2]="QUIT",t[t.CHAOSHIDISMISS=3]="CHAOSHIDISMISS"}(d=n.LeaveTeamReasonEnum||(n.LeaveTeamReasonEnum={})),function(t){t[t.READY=3]="READY",t[t.CANCEL=4]="CANCEL"}(p=n.FTReadyStateEnum||(n.FTReadyStateEnum={})),function(t){t[t.SUCCESS=0]="SUCCESS",t[t.BANKRUPT=1]="BANKRUPT",t[t.LOW=2]="LOW",t[t.HIGH=3]="HIGH",t[t.RECOMMEND=4]="RECOMMEND",t[t.ERROR=5]="ERROR"}(h=n.FTChooseFieldEnum||(n.FTChooseFieldEnum={})),function(t){t[t.ANIMATION=0]="ANIMATION",t[t.TEXT=1]="TEXT"}(n.FTChatTypeEnum||(n.FTChatTypeEnum={})),function(t){t[t.CLASSIC_FREE=0]="CLASSIC_FREE",t[t.CLASSIC_GOLD=1]="CLASSIC_GOLD",t[t.MULT=2]="MULT"}(_=n.SelectPlayTypeEnum||(n.SelectPlayTypeEnum={}));var Z=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._friendOpenIDs={},e._minGold=-1,e._teamInfo={},e._preTempTeamInfo={},e._players=[],e._teamRecord=[],e._canPopRecord=!1,e._enterPlayTypeSubId=0,e._preStateIsReady=!1,e._needJoin=!0,e}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return y.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return H.FriendTeamProxy.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"teamInfo",{get:function(){return this._teamInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"preTempTeamInfo",{get:function(){return this._preTempTeamInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"players",{get:function(){return this._players},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"teamRecord",{get:function(){return this._teamRecord},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canPopRecord",{get:function(){return this._canPopRecord},set:function(t){this._canPopRecord=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"preStateIsReady",{get:function(){return this._preStateIsReady},set:function(t){this._preStateIsReady=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){D.SocketUtils.instance.register(R.Processid.clubGame,club.client.game.MSGID.PARTNER_INFO,this,this.onReceivePartnerInfo,null,!0),D.SocketUtils.instance.register(R.Processid.clubGame,club.client.game.MSGID.PLAYER_USERINFO,this,this.onReceivePlayerUserInfo,null,!0),D.SocketUtils.instance.register(R.Processid.clubGame,club.client.game.MSGID.PLAYER_GAMEINFO,this,this.onReceivePlayerGameInfo,null,!0),D.SocketUtils.instance.register(R.Processid.clubGame,club.client.game.MSGID.RESP_LEAVEPARTNER,this,this.onReceiveLeavePartner,null,!0),D.SocketUtils.instance.register(R.Processid.clubGame,club.client.game.MSGID.RESP_PARTNERKICK,this,this.onReceivePartnerKick,null,!0),D.SocketUtils.instance.register(R.Processid.clubGame,club.client.game.MSGID.RESP_STARTPARTNER,this,this.respStartPartner,null,!0),D.SocketUtils.instance.register(R.Processid.clubGame,club.client.game.MSGID.RESP_ENTERPARTNERGAME,this,this.respEnterPartnerGame,null,!0),D.SocketUtils.instance.register(R.Processid.award,award_cli.ClientXYID.kRespAwardInfo,this,this.respTeamRecord,null,!0),f.EventManager.instance.on(M.DataEvent.FriendTeamNotifyLocation,this,this.onReceiveNotifyLocation)},e.prototype.onReceivePartnerInfo=function(t){if(console.log("FriendTeamModel onReceivePartnerInfo.p: ",t),this._teamInfo.partnerid=t.partnerid,this._teamInfo.state=t.state,this._teamInfo.partnertype=t.partnertype,t.creator&&(this._teamInfo.creator=t.creator),t.member&&(this._teamInfo.member=t.member),t.selectclub&&(this._teamInfo.playType=t.selectclub),t.selectsubid&&(this._teamInfo.playTypeSubid=t.selectsubid),t.selectgameid&&C.GameIDInfo.CLASSIC_GD.id===t.selectgameid)this._teamInfo.gameid=t.selectgameid,localStorage.setItem(v.LocalStorageKey.FRIEND_TEAM_GAME_ID,String(t.selectgameid));else{var e=localStorage.getItem(v.LocalStorageKey.FRIEND_TEAM_GAME_ID);e?this._teamInfo.gameid=Number(e):(this._teamInfo.gameid=C.GameIDInfo.CLASSIC_GD.id,localStorage.setItem(v.LocalStorageKey.FRIEND_TEAM_GAME_ID,String(C.GameIDInfo.CLASSIC_GD.id)))}if(s.FREE===this._teamInfo.partnertype)this._teamInfo.playTypeSubid=t.selectsubid;else{var n=t.selectsubid||this._enterPlayTypeSubId||this._teamInfo.playTypeSubid||0;if(n){var o=null,a=B.RoomModel.instance.getPlazaInfoBySubID(n);a&&(o={min:a.minSr,max:a.partnerMax});var i=!0;if(o.max&&this._minGold>o.max&&(i=!1),i&&this._minGold>=o.min)this._teamInfo.playTypeSubid=n,!t.selectsubid&&this.isTeamLeader()&&t.state<u.START&&this.reqTeamSelectClubType();else{var c=B.RoomModel.instance.getRecPlazaSubIDByCarryGold(this._minGold,this._teamInfo.gameid,a.multType>0,!0,!0);this._teamInfo.playTypeSubid!==c&&(this._teamInfo.playTypeSubid=c,this.isTeamLeader()&&t.state<u.START&&this.reqTeamSelectClubType())}}else{var l=!1;this.getLastSelectPlayType()===_.MULT&&(l=!0);var d=B.RoomModel.instance.getRecPlazaSubIDByCarryGold(this._minGold,this._teamInfo.gameid,l,!0,!0);this._teamInfo.playTypeSubid!==d&&(this._teamInfo.playTypeSubid=d,this.isTeamLeader()&&t.state<u.START&&this.reqTeamSelectClubType())}}this._enterPlayTypeSubId=0,this._preTempTeamInfo=this._teamInfo;var p=this.isTeamLeader()?r.LEADER:r.MEMBER,h={gameid:this._teamInfo.gameid,clubid:t.clubid,appid:this._teamInfo.appid,subid:this._teamInfo.playTypeSubid,partnerid:this._teamInfo.partnerid,partnerkey:this._teamInfo.partnerkey,memberflag:p,state:this._teamInfo.state,partnertype:this._teamInfo.partnertype};k.UserInfoModel.instance.setPartnerLocation(h),this.postTeamShareQuery(),f.EventManager.instance.emit(M.DataEvent.FriendTeamUpdateUserInfo)},e.prototype.onReceivePlayerUserInfo=function(t){if(console.log("FriendTeamModel onReceivePlayerUserInfo:",t),!m.UIManager.instance.isExist(T.GameUI)){for(var e=0;e<this.players.length;++e)if(this._players[e].numid===t.numid)return this._players[e].username=b.UtilTool.easyUTF8(t.username),this._players[e].nickname=b.UtilTool.easyUTF8(t.nickname),this._players[e].actorid=t.actorid,this._players[e].head=t.avatar,this._players[e].headurl=bf33.Utils.bytesToString(t.headurl),this._players[e].linkstep=t.linkstep,void(void 0!==this._teamInfo.gameid&&f.EventManager.instance.emit(M.DataEvent.FriendTeamUpdateUserInfo));var n=this.newPlayerInfoData();n.username=b.UtilTool.easyUTF8(t.username),n.nickname=b.UtilTool.easyUTF8(t.nickname),n.actorid=t.actorid,n.head=t.avatar,n.headurl=bf33.Utils.bytesToString(t.headurl),n.numid=t.numid,n.areaid=t.areaid,n.linkstep=t.linkstep,this._players.push(n),void 0!==this._teamInfo.gameid&&f.EventManager.instance.emit(M.DataEvent.FriendTeamUpdateUserInfo),f.EventManager.instance.emit(M.DataEvent.FriendTeamUpdateChar),console.log("------\x3e onReceivePlayerUserInfo p: ",t," players: ",this._players)}},e.prototype.onReceivePlayerGameInfo=function(t){if(console.log("FriendTeamModel onReceivePlayerGameInfo:",t),!m.UIManager.instance.isExist(T.GameUI)){for(var e=0;e<this.players.length;++e)if(this._players[e].numid===t.numid)return this._players[e].gamebean=t.gamebean,this._players[e].gamegold=t.gamegold,this._players[e].gamescore=t.gamescore,this.calMinGold(),void(void 0!==this._teamInfo.gameid&&f.EventManager.instance.emit(M.DataEvent.FriendTeamUpdateUserInfo));var n=this.newPlayerInfoData();n.numid=t.numid,n.gamebean=t.gamebean,n.gamegold=t.gamegold,n.gamescore=t.gamescore,this._players.push(n),this.calMinGold(),void 0!==this._teamInfo.gameid&&f.EventManager.instance.emit(M.DataEvent.FriendTeamUpdateUserInfo)}},e.prototype.calMinGold=function(){for(var t=null,e=0;e<this.players.length;e++){var n=this.players[e].gamegold;console.log("------\x3e tmpPlayerGold: ",n," tmpMinGold: ",t),"number"==typeof t?n<t&&(t=n):t=n}this.updateMinGold(t)},e.prototype.updateMinGold=function(t){if(console.log("updateMingold.minGold: ",this._minGold,"====>gold: ",t,this._teamInfo.partnertype),this._minGold!==t&&(this._minGold=t,m.UIManager.instance.isExist(q.FriendTeamUI)&&s.FREE!=this._teamInfo.partnertype&&void 0!==this._teamInfo.gameid&&this.isTeamLeader())){var e=B.RoomModel.instance.getPlazaInfoBySubID(this._teamInfo.playTypeSubid);this._teamInfo.playTypeSubid=B.RoomModel.instance.getRecPlazaSubIDByCarryGold(this._minGold,this._teamInfo.gameid,e&&e.multType>0,!0,!0),this.reqTeamSelectClubType();var n=B.RoomModel.instance.getPlazaInfoBySubID(this._teamInfo.playTypeSubid);if(this.isTeamFull()&&e.subID!=n.subID){var o=B.RoomModel.instance.getRoomDesc(n.subID);f.EventManager.instance.emit(M.DataEvent.ToastData,"\u961f\u53cb\u7684\u91d1\u5e01\u4e0d\u6ee1\u8db3\u5f53\u524d\u573a\u6b21\u8981\u6c42\uff0c\u5df2\u4e3a\u60a8\u5207\u6362\u81f3["+o+"]")}}},e.prototype.onReceiveLeavePartner=function(t){if(console.log("FriendTeamModel onReceiveLeavePartner:",t),0===P.UtilClub.dealClubErrorCode(t.errcode).code){var e=Number(k.UserInfoModel.instance.userInfo.gold);if(d.CHAOSHIDISMISS===t.reason)return this._minGold=e,f.EventManager.instance.emit(M.DataEvent.ToastData,"\u961f\u4f0d\u957f\u65f6\u95f4\u672a\u5f00\u59cb\u6e38\u620f\uff0c\u5df2\u81ea\u52a8\u89e3\u6563"),f.EventManager.instance.emit(M.DataEvent.FriendTeamOverTimeDismiss),this.resetData(),void(m.UIManager.instance.isExist(T.GameUI)&&f.EventManager.instance.emit(S.GameEvent.PARNTER_GAME_EXIT));var n=d.DISMISS===t.reason?this._teamInfo.creator:this._teamInfo.member;if(n!==k.UserInfoModel.instance.userInfo.numID){var o=this.getPlayerIndexByNumid(n);if(-1!==o){var a="";if(d.QUIT===t.reason)a="\u961f\u53cb\u5df2\u79bb\u5f00\u961f\u4f0d",this.players.splice(o,1),this.updateMinGold(e);else{f.EventManager.instance.emit(X.PlatformEventType.RealTimeVoiceClose);var i=this.getSelectPlayType(),r=this.getPreSubIdAndTeamType(),s=r.playTypeSubid,c=r.teamType;this.resetData(),m.UIManager.instance.isExist(q.FriendTeamUI)?(a="\u961f\u4f0d\u5df2\u89e3\u6563\uff0c\u5df2\u91cd\u65b0\u521b\u5efa\u961f\u4f0d",this.createTeam(i,s,c)):(a="\u539f\u961f\u4f0d\u5df2\u89e3\u6563",f.EventManager.instance.emit(M.DataEvent.FriendTeamOverTimeDismiss))}f.EventManager.instance.emit(M.DataEvent.ToastData,a)}else console.error("_onReceiveLeavePartner index error")}else this.resetData()}},e.prototype.onReceivePartnerKick=function(t){console.log("FriendTeamModel onReceivePartnerKick:",t);var e=P.UtilClub.dealClubErrorCode(t.errcode);if(0===e.code){var n=this.getPlayerIndexByNumid(this._teamInfo.member);if(-1===n)return void console.error("_onReceivePartnerKick index error");if(this.isTeamLeader())return this.players.splice(n,1),void this.updateMinGold(Number(k.UserInfoModel.instance.userInfo.gold));f.EventManager.instance.emit(X.PlatformEventType.RealTimeVoiceClose);var o=this.getSelectPlayType(),a=this.getPreSubIdAndTeamType(),i=a.playTypeSubid,r=a.teamType;if(this.resetData(),m.UIManager.instance.isExist(q.FriendTeamUI))return f.EventManager.instance.emit(M.DataEvent.ToastData,"\u961f\u4f0d\u5df2\u89e3\u6563\uff0c\u5df2\u91cd\u65b0\u521b\u5efa\u961f\u4f0d"),void this.createTeam(o,i,r);f.EventManager.instance.emit(M.DataEvent.ToastData,"\u539f\u961f\u4f0d\u5df2\u89e3\u6563")}this.isTeamLeader()&&f.EventManager.instance.emit(M.DataEvent.ToastData,P.UtilClub.getErrorText(e))},e.prototype.respStartPartner=function(t){var e=P.UtilClub.dealClubErrorCode(t.errcode);if(0===e.code){var n={};n.clubID=t.clubid,n.subID=t.subid,n.appID=t.appid,n.playID=t.playid,n.playKey=t.playkey||0,n.callback=function(t,e){B.RoomModel.instance.enterGameUI(t,e)},N.RoomProxy.instance.reqEnterGame(n)}else{var o=P.UtilClub.getErrorText(e);j.GameErrorCodeEnum.CLUBGAME_E_USER_LOW_ENTERLIMIT===e.code?(f.EventManager.instance.emit(M.DataEvent.ToastData,"\u73a9\u5bb6\u4f4e\u4e8e\u8fdb\u5165\u623f\u95f4\u7684\u9650\u5236"),m.UIManager.instance.isExist(T.GameUI)&&f.EventManager.instance.emit(S.GameEvent.PARNTER_GAME_EXIT)):N.JoinRoomFlag.GOLD_LIMIT===e.code?f.EventManager.instance.emit(M.DataEvent.ToastData,"\u8f93\u8d62\u4e0a\u4e0b\u9650"):""===o?f.EventManager.instance.emit(M.DataEvent.ToastData,"\u8fdb\u5165\u6e38\u620f\u9519\u8bef,\u9519\u8bef\u7801:"+e.code):f.EventManager.instance.emit(M.DataEvent.ToastData,o)}},e.prototype.respEnterPartnerGame=function(t){var e=this._teamInfo.playTypeSubid,n=B.RoomModel.instance.getClubIDBysubID(e),o={};o.subID=e,o.clubID=n,o.appID=t.appid,o.callback=function(t,e){B.RoomModel.instance.enterGameUI(t,e)},w.ProtocolManager.instance.setProcess2Appid(R.Processid.clubGame,o.appID),console.log("===>respEnterPartnerGame: ",JSON.stringify(o));var a={askid:t.askid,errcode:t.errcode,matchid:t.matchid,partnerid:t.partnerid,memberflag:t.memberflag,partnernumid:t.partnernumid,appid:t.appid,partnertype:t.partnertype};N.RoomProxy.instance.enterGameRespFunc(a,o)},e.prototype.onReceiveNotifyLocation=function(t){if(0===t){var e=L.PlatformManager.instance.platform.query;if(e){if(e.shareMessageToFriendScene){var n=e.shareMessageToFriendScene.split(".");if(-1!=[F.DirShareTypeEnum.FREE_FRIEND_TEAM,F.DirShareTypeEnum.GOLD_CLASSICAL_TEAM,F.DirShareTypeEnum.GOLD_MULT_TEAM,F.DirShareTypeEnum.FRIEND_TEAM_CALL_START,F.DirShareTypeEnum.FRIEND_TEAM_CALL_PREPARE,F.DirShareTypeEnum.GOLD_INLINE_TEAM].indexOf(Number(n[0])))return}if(e.friendTeamid)return}if(this._needJoin){var o=k.UserInfoModel.instance.getPartnerLocation();console.log("====>onReceiveNotifyLocation: ",o),o&&this.joinTeam(o.partnerid,o.partnertype)}else this._needJoin=!0}else m.UIManager.instance.isExist(q.FriendTeamUI)&&(m.UIManager.instance.close(q.FriendTeamUI),f.EventManager.instance.emit(M.DataEvent.ToastData,"\u7ec4\u961f\u5df2\u89e3\u6563"))},e.prototype.setNotJoin=function(){this._needJoin=!1},e.prototype.updateLastSelectPlayType=function(){var t=this.getSelectPlayType();console.error("updateLastSelectPlayType:",t),localStorage.setItem(v.DataLocalStorage.addKeyWithNumID(v.LocalStorageKey.FRIEND_TEAM_SELECT_PLAYTYPE),t.toString())},e.prototype.getLastSelectPlayType=function(){var t=localStorage.getItem(v.DataLocalStorage.addKeyWithNumID(v.LocalStorageKey.FRIEND_TEAM_SELECT_PLAYTYPE)),e=t?+t:null;return null!=e?e:_.CLASSIC_GOLD},e.prototype.isInTeam=function(){var t=!1,e=k.UserInfoModel.instance.getPartnerLocation();return e&&e.partnerid&&(t=!0),console.log("-----\x3eisInTeam.location:",e,"======>isinTeam: ",t),t},e.prototype.getFriendTeamAppId=function(){return this._teamInfo.appid},e.prototype.isBankrupt=function(){return I.BankruptModel.instance.getTriggerBankruptLine()>k.UserInfoModel.instance.userInfo.gold},e.prototype.isBelowMinSr=function(t,e){var n=B.RoomModel.instance.getPlazainfoByLevel(B.RoomLevelEnum.PRIMARY_LEVEL,t,e,!0),o=k.UserInfoModel.instance.userInfo.gold;return(n?n.minSr:I.BankruptModel.instance.getTriggerBankruptLine())>o},e.prototype.isMemberBanrupt=function(){return I.BankruptModel.instance.getTriggerBankruptLine()>this._minGold},e.prototype.getLeaderNumID=function(){return this._teamInfo.creator},e.prototype.getMemberNumID=function(){return this._teamInfo.member},e.prototype.newPlayerInfoData=function(){return{numid:void 0,actorid:void 0,extdata:void 0,regtime:void 0,nickname:void 0,username:void 0,sex:void 0,head:void 0,right:void 0,headurl:void 0,headframe:void 0,gamebean:void 0,gamegold:void 0,playscore:void 0,playtype:void 0,total_escape:void 0,total_lose:void 0,total_win:void 0,total_draw:void 0,total_exp:void 0,countprops:void 0,timeprops:void 0,charm:void 0,tableid:void 0,tablestate:void 0,seatid:void 0,playstate:void 0,empty:!0}},e.prototype.resetData=function(){this._players=[],this._teamInfo={},k.UserInfoModel.instance.clearPartnerLocation()},e.prototype.dealEnterTeamByLink=function(t,e){var n=this;if(k.UserInfoModel.instance.isOpenFriendTeam()&&!m.UIManager.instance.isExist(T.GameUI)){L.PlatformManager.instance.platform.query.shareMessageToFriendScene=null,L.PlatformManager.instance.platform.query.friendTeamid=null;var o=_.CLASSIC_FREE===e?s.FREE:s.GOLD,a=L.PlatformManager.instance.platform.query,i={playType:e,inviterId:a.inviterId,friendTeamid:t,shareId:a.shareId,leader:a.inviterId,subID:a.friendTeamSubId,actShare:0};if(i=Object.assign(i,this.bfasParamUserType),E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.JOIN_TEAM_BY_LINK,i),k.UserInfoModel.instance.getUserLocation())f.EventManager.instance.emit(M.DataEvent.ToastData,"\u5df2\u5728\u623f\u95f4\u4e2d\uff0c\u65e0\u6cd5\u8fdb\u5165\u7ec4\u961f");else{var c=k.UserInfoModel.instance.getPartnerLocation();if(console.log("========> dealEnterTeamByLink location: ",c," teamInfo: ",this._teamInfo),c&&(this._teamInfo.appid=c.appid,this._teamInfo.partnerid=c.partnerid,this._teamInfo.partnerkey=c.partnerkey,this._teamInfo.state=c.state),this._teamInfo.appid)return this._teamInfo.partnerid===t?void this.joinTeam(t,this._teamInfo.partnertype,function(t){var e=t?A.FriendMixTeamPointID.BACK_TEAM_SUCCESS:A.FriendMixTeamPointID.BACK_TEAM_FAIL;E.BfasManager.instance.sendEvt(e,i)}):void m.UIManager.instance.open(U.DialogUI).then(function(e){e.initFTConfirmCancelClose({content:"\u60a8\u5df2\u5728\u961f\u4f0d\u91cc\uff0c\u662f\u8fd4\u56de\u539f\u961f\u4f0d\u8fd8\u662f\u52a0\u5165\u65b0\u961f\u4f0d\uff1f"}),e.confirmAction=function(){var e=r.NONE;e=c?c.memberflag:n.isTeamLeader()?r.LEADER:r.MEMBER,n.isFriendTeamReady()&&r.MEMBER===e?n.operateReadyOrNotReady(p.CANCEL,function(){n.changeTeamByLink(t,o,i)}):n.changeTeamByLink(t,o,i)},e.cancelAction=function(){n.joinTeam(n._teamInfo.partnerid,n._teamInfo.partnertype,function(t){var e=t?A.FriendMixTeamPointID.BACK_TEAM_SUCCESS:A.FriendMixTeamPointID.BACK_TEAM_FAIL;E.BfasManager.instance.sendEvt(e,i)})},e.closeAction=function(){n.joinTeam(n._teamInfo.partnerid,n._teamInfo.partnertype,function(t){var e=t?A.FriendMixTeamPointID.BACK_TEAM_SUCCESS:A.FriendMixTeamPointID.BACK_TEAM_FAIL;E.BfasManager.instance.sendEvt(e,i)})}});this.joinRoomByLink(t,o,e,function(t){var e=t?A.FriendMixTeamPointID.CHANGE_TEAM_SUCCESS:A.FriendMixTeamPointID.CHANGE_TEAM_FAIL;E.BfasManager.instance.sendEvt(e,i)},i)}}},e.prototype.changeTeamByLink=function(t,e,n){var o=this;this.changeTeam(t,e,function(t,e){var a;t?(a=A.FriendMixTeamPointID.CHANGE_TEAM_SUCCESS,o.showFriendTeamUI()):(a=A.FriendMixTeamPointID.CHANGE_TEAM_FAIL,o.joinFailOprate(e,function(){return o.leaveTeamToStartGoldGame()}),o.joinTeam(o._teamInfo.partnerid,o._teamInfo.partnertype)),E.BfasManager.instance.sendEvt(a,n)})},e.prototype.joinRoomByLink=function(t,e,n,o,a){var i=this;this.proxy.reqJoinFriendTeam(t,e,function(t,e,r){t?i.proxy.reqEnterFriendTeam(r.partnerid,r.appid,function(t,e){t?(i._teamInfo=r,o&&o(!0),i.showFriendTeamUI()):(o&&o(!1),i.joinFailOprate(e,function(){return i.toStartGoldRoom(n)},a))}):(o&&o(!1),i.joinFailOprate(e,function(){return i.toStartGoldRoom(n)},a))})},e.prototype.joinFailOprate=function(t,e,n,o){var a=this,i="";x.DBPErrorCodeEnum.CLUBFUNC_E_NOTFOUND_PARTNER===t.code||j.GameErrorCodeEnum.CLUBGAME_E_PARTNER_NOT_EXIST===t.code?(E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.LINK_JOIN_FAIL_DISMISS,o),i="\u961f\u4f0d\u5df2\u89e3\u6563\uff0c\u7cfb\u7edf\u4e3a\u60a8\u627e\u5230\u5728\u7ebf\u9ad8\u624b\u7ec4\u961f\uff0c\u662f\u5426\u5feb\u901f\u5f00\u4e00\u628a\uff1f"):x.DBPErrorCodeEnum.CLUBFUNC_E_WRONG_GROUPISFILL!==t.code&&j.GameErrorCodeEnum.CLUBGAME_E_PARTNER_IS_FULL!==t.code||(E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.LINK_JOIN_FAIL_FULL,o),i="\u961f\u4f0d\u4eba\u6570\u5df2\u6ee1\uff0c\u7cfb\u7edf\u4e3a\u60a8\u627e\u5230\u5728\u7ebf\u9ad8\u624b\u7ec4\u961f\uff0c\u662f\u5426\u5feb\u901f\u5f00\u4e00\u628a\uff1f"),i?m.UIManager.instance.open(U.DialogUI).then(function(n){n.initConfirmClose({content:i,confirm:"\u7acb\u5373\u5f00\u59cb"}),n.confirmAction=function(){x.DBPErrorCodeEnum.CLUBFUNC_E_NOTFOUND_PARTNER===t.code||j.GameErrorCodeEnum.CLUBGAME_E_PARTNER_NOT_EXIST===t.code?E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.CLICK_TEAM_QUICK_START_DISMISS,o):x.DBPErrorCodeEnum.CLUBFUNC_E_WRONG_GROUPISFILL!==t.code&&j.GameErrorCodeEnum.CLUBGAME_E_PARTNER_IS_FULL!==t.code||E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.CLICK_TEAM_QUICK_START_FULL,o),e&&e()},n.closeAction=function(){return a.createTeam()}}):f.EventManager.instance.emit(M.DataEvent.ToastData,P.UtilClub.getErrorText(t))},e.prototype.leaveTeamToStartGoldGame=function(){var t=!1;if(s.FREE!==this._teamInfo.partnertype){var e=this.getRoomInfo();t=e&&e.multType>0}this.startSingleGameWithQuickStart(t)},e.prototype.toStartGoldRoom=function(t){var e=t==_.MULT,n=this.getRecRoomInfoWithSingle(C.GameIDInfo.CLASSIC_GD.id,e);J.HallGroundModel.instance.reqEnterGameFromTeam(null,n.subID,null,l.TEAM_SINGLE),t=e?_.MULT:_.CLASSIC_GOLD,localStorage.setItem(v.DataLocalStorage.addKeyWithNumID(v.LocalStorageKey.FRIEND_TEAM_SELECT_PLAYTYPE),t.toString())},e.prototype.getPreSubIdAndTeamType=function(){var t=null,e=null;return k.UserInfoModel.instance.isGoldInlineTeam()&&(t=this._teamInfo.playTypeSubid,e=this._teamInfo.partnertype),{playTypeSubid:t,teamType:e}},e.prototype.createTeam=function(t,e,n,o){var a=this;this.createTeamOnly(t,e,n,o,function(t,e,n){e?a.enterTeam(t,function(){},o):f.EventManager.instance.emit(M.DataEvent.ToastData,P.UtilClub.getErrorText(n))})},e.prototype.createTeamOnly=function(t,e,n,o,a){var i=k.UserInfoModel.instance.getUserLocation();if(!i||!i.subid&&G.ClubModeEnum.FRIEND_ROOM!==i.clubmode){var r=k.UserInfoModel.instance.getPartnerLocation();if(r&&r.appid)this.joinTeam(r.partnerid,r.partnertype);else{var c=s.FREE;t||(t=this.getLastSelectPlayType()),c=t===_.CLASSIC_FREE?s.FREE:s.GOLD,n&&(c=n),this._enterPlayTypeSubId=e,E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.DEFAULT_CREATE_PLAY_TYPE,Object.assign({playType:t},this.bfasParamUserType)),console.log("FT.createTeam.type:",c),this.proxy.reqCreateFriendTeam(c,function(t,e,n){a&&a(n,t,e)})}}else B.RoomModel.instance.doEnterGameInRoom()},e.prototype.enterTeam=function(t,e,n){var o=this;this.proxy.reqEnterFriendTeam(t.partnerid,t.appid,function(a,i){a?(o._teamInfo=t,o.showFriendTeamUI(n),e&&e(!0)):(e&&e(!1),f.EventManager.instance.emit(M.DataEvent.ToastData,P.UtilClub.getErrorText(i)))})},e.prototype.joinTeam=function(t,e,n){var o=this;this.proxy.reqJoinFriendTeam(t,e,function(t,e,a){t?o.enterTeam(a,n):(n&&n(!1),f.EventManager.instance.emit(M.DataEvent.ToastData,P.UtilClub.getErrorText(e)))})},e.prototype.leaveTeam=function(t,e){this.proxy.reqLeaveTeam(this._teamInfo.appid,function(n,o){console.log("====>leaveTeam.reqLeaveTeam:",n),n?(f.EventManager.instance.emit(X.PlatformEventType.RealTimeVoiceClose),t()):(e&&e(),f.EventManager.instance.emit(M.DataEvent.ToastData,P.UtilClub.getErrorText(o)))})},e.prototype.registerOnceLeaveTeam=function(t,e,n){var o=this;t&&D.SocketUtils.instance.registerOnce(R.Processid.clubGame,club.client.game.MSGID.RESP_LEAVEPARTNER,this,function(t){if(d.QUIT===t.reason){o.resetData();var a=null,i=null;k.UserInfoModel.instance.isGoldInlineTeam()&&(a=o.preTempTeamInfo.playTypeSubid,i=o.preTempTeamInfo.partnertype),o.createTeam(e,a,i)}else{if(!m.UIManager.instance.isExist(q.FriendTeamUI))return;n&&n()}})},e.prototype.changeTeam=function(t,e,n){var o=this;this.proxy.reqJoinFriendTeam(t,e,function(e,a,i){e?o.proxy.reqChangeTeam(i.appid,t,i.partnerkey,function(t,e){if(t)return f.EventManager.instance.emit(X.PlatformEventType.RealTimeVoiceClose),o.resetData(),o._teamInfo=i,void n(!0);n(!1,e)}):n(!1,a)})},e.prototype.operateReadyOrNotReady=function(t,e){this.proxy.reqFriendTeamReady(t,this._teamInfo.appid,function(t,n){t?console.log("operateReadyOrNotReady.success"):f.EventManager.instance.emit(M.DataEvent.ToastData,P.UtilClub.getErrorText(n)),e&&e()})},e.prototype.operateStart=function(){var t=this,e=B.RoomModel.instance.getPlazaInfoBySubID(this._teamInfo.playTypeSubid);this.proxy.reqTeamSelectClub(this._teamInfo.appid,e.clubID,this._teamInfo.playTypeSubid,this._teamInfo.gameid,this._teamInfo.partnertype,function(e,n){e?t.proxy.reqFriendTeamStart(t._teamInfo.partnerid,t._teamInfo.appid):f.EventManager.instance.emit(M.DataEvent.ToastData,P.UtilClub.getErrorText(n))})},e.prototype.startFriendFreeTeam=function(){this.proxy.reqFriendTeamStart(this._teamInfo.partnerid,this._teamInfo.appid)},e.prototype.startSingleGameWithQuickStart=function(t,e){var n=this,o=this._teamInfo.gameid;this.updateLastSelectPlayType(),this.leaveTeam(function(){var a=n.getRecRoomInfoWithSingle(o,t);J.HallGroundModel.instance.reqEnterGameFromTeam(null,a.subID,null,e)})},e.prototype.startSingleGame=function(t,e){var n=this._teamInfo.playTypeSubid;this.updateLastSelectPlayType(),this.leaveTeam(function(){e&&e(),J.HallGroundModel.instance.reqEnterGameFromTeam(null,n,null,t)})},e.prototype.reqActivityId=function(t){if(L.PlatformManager.instance.isWeiXinPlatForm()){var e=F.ShareManager.instance.getShareArgs(this.getShareType(),{extData:this.shareExtData,titleArgs:this.titleArgs}).query,n=L.PlatformManager.instance.platform.getEnvVersion();this.proxy.reqActivityId(this._teamInfo.partnerid,"?"+e,n,t)}else t&&t(null)},e.prototype.reqTeamSelectClubType=function(){var t=B.RoomModel.instance.getClubIDBysubID(this._teamInfo.playTypeSubid);this.proxy.reqTeamSelectClub(this._teamInfo.appid,t,this._teamInfo.playTypeSubid,this._teamInfo.gameid,this._teamInfo.partnertype,function(t,e){t||m.UIManager.instance.getScene().tag==Q.HallUI&&f.EventManager.instance.emit(M.DataEvent.ToastData,P.UtilClub.getErrorText(e))})},e.prototype.reqKickMember=function(){var t=this.getPlayerIndexByNumid(this._teamInfo.member);if(-1!==t){console.log("===>reqKickMember.teamInfo: ",this._teamInfo);var e=this._players[t].areaid;this.proxy.reqFriendTeamKick(this._teamInfo.appid,this._teamInfo.partnerid,this._teamInfo.member,e)}else console.error("_onReceivePartnerKick index error")},e.prototype.reqTeamRecord=function(){Y.UIHelp.instance.showLoading(),this.proxy.reqTeamRecord()},e.prototype.respTeamRecord=function(t){var e=this;if(t.askid==W.DataScript.getGameAchievement.id)if(Y.UIHelp.instance.hideLoading(),0==t.flag){var n=bf33.Utils.bytesToString(t.msg);console.log("FriendTeamProxy.reqTeamRecord:",n),JSON.parse(n).forEach(function(t){if(0==t.flag){1==t.index&&(e._teamRecord=[]);var n={result:t.result,timeStamp:t.timestamp,friendLevel:t.friend_level,enemyLevel:t.enemy_level,friendAvatarID:t.friend_avatar_id,friendFaceUrl:t.friend_face_url,friendPassLevel:t.friend_pass_level,enemyPassLevel:t.enemy_pass_level,totalGameCount:t.total_game_count};e._teamRecord.push(n),t.total==t.index&&(e._teamRecord.sort(function(t,e){return e.timeStamp-t.timeStamp}),f.EventManager.instance.emit(M.DataEvent.FriendTeamGetRecord,!0))}else t.flag,f.EventManager.instance.emit(M.DataEvent.FriendTeamGetRecord,!1)})}else f.EventManager.instance.emit(M.DataEvent.FriendTeamGetRecord,!1)},e.prototype.autoPopup=function(){this.canPopRecord&&(m.UIManager.instance.open(V.FriendTeamRecordUI),this.canPopRecord=!1)},e.prototype.stopPopup=function(){m.UIManager.instance.close(V.FriendTeamRecordUI)},e.prototype.popupTeamGuide=function(){var t=+localStorage.getItem(v.DataLocalStorage.addKeyWithNumID(v.LocalStorageKey.GOLDINLINE_TEAMGUIDE_TRIGGER_POP_COUNT))||0;t>=1||(t+=1,localStorage.setItem(v.DataLocalStorage.addKeyWithNumID(v.LocalStorageKey.GOLDINLINE_TEAMGUIDE_TRIGGER_POP_COUNT),t.toString()),m.UIManager.instance.open(z.FriendTeamGuideUI).then(function(t){t.init(z.TeamGuideType.NEW)}))},e.prototype.stopPopupTeamGuide=function(){m.UIManager.instance.close(z.FriendTeamGuideUI)},e.prototype.showFriendTeamUI=function(t){m.UIManager.instance.isExist(q.FriendTeamUI)||m.UIManager.instance.open(q.FriendTeamUI).then(function(e){t&&e.popUpEnterGoldInlineTeam()})},e.prototype.isFriendTeamReady=function(){return this._teamInfo.state>u.JOIN},e.prototype.isTeamLeader=function(){return k.UserInfoModel.instance.userInfo.numID===this.getLeaderNumID()},e.prototype.isTeamFull=function(){return this._players.length>1},e.prototype.getRoomInfo=function(){return console.log("-----\x3e minGold: ",this._minGold," ftGameid: ",this._teamInfo.gameid," subGameid: ",this._teamInfo.playTypeSubid),B.RoomModel.instance.getPlazaInfoBySubID(this._teamInfo.playTypeSubid)},e.prototype.getRecRoomInfoByGameID=function(t,e){var n=B.RoomModel.instance.getRecPlazaSubIDByCarryGold(this._minGold,t,e,!0,!0);return B.RoomModel.instance.getPlazaInfoBySubID(n)},e.prototype.getBfasPlazaData=function(){var t=this.getRoomInfo();if(t)return{subID:t.subID}},e.prototype.getRecRoomInfoWithSingle=function(t,e){var n=B.RoomModel.instance.getRecPlazaSubIDByCarryGold(k.UserInfoModel.instance.userInfo.gold,t,e,!0,!0);return B.RoomModel.instance.getPlazaInfoBySubID(n)},e.prototype.getPlayerIndexByNumid=function(t){for(var e=0;e<this.players.length;e++)if(t===this.players[e].numid)return e;return-1},e.prototype.getPlayerNameByNumid=function(t){for(var e=0;e<this.players.length;e++){var n=this.players[e];if(t===n.numid)return n.nickname}return""},e.prototype.checkChoose=function(t){for(var e=B.RoomModel.instance.getPlazaGoldArea(t),n=this.getPlayerChooseState(this._minGold,e),o=null,a=null,i=0;i<this.players.length;++i)this.players[i].numid===k.UserInfoModel.instance.userInfo.numID?o=this.getPlayerChooseState(this.players[i].gamegold,e):a=this.getPlayerChooseState(this.players[i].gamegold,e);return[n,o,a]},e.prototype.getPlayerChooseState=function(t,e){return e?t>=e.min&&(t<=e.max||0===e.max)?h.SUCCESS:t<e.min&&t<I.BankruptModel.instance.getTriggerBankruptLine()?h.BANKRUPT:t<e.min?h.LOW:h.HIGH:h.ERROR},e.prototype.getSelectPlayType=function(){if(s.FREE===this._teamInfo.partnertype)return _.CLASSIC_FREE;var t=this.getRoomInfo();return t&&t.multType>0?_.MULT:_.CLASSIC_GOLD},e.prototype.getShareType=function(){if(k.UserInfoModel.instance.isGoldInlineTeam()&&this._teamInfo.partnertype===s.GOLD_INLINE)return F.ShareType.goldInlineTeamShare;if(s.FREE===this._teamInfo.partnertype)return F.ShareType.friendFreeTeamShare;var t=this.getRoomInfo();return t&&t.multType>0?F.ShareType.friendMultTeamShare:F.ShareType.friendGoldTeamShare},e.prototype.getDirShareTypeEnum=function(){if(k.UserInfoModel.instance.isGoldInlineTeam()&&this._teamInfo.partnertype===s.GOLD_INLINE)return F.DirShareTypeEnum.GOLD_INLINE_TEAM;if(s.FREE===this._teamInfo.partnertype)return F.DirShareTypeEnum.FREE_FRIEND_TEAM;var t=this.getRoomInfo();return t&&t.multType>0?F.DirShareTypeEnum.GOLD_MULT_TEAM:F.DirShareTypeEnum.GOLD_CLASSICAL_TEAM},e.prototype.isEnterFromGoldInlineTeam=function(){return k.UserInfoModel.instance.isGoldInlineTeam()&&this._preTempTeamInfo.partnertype===s.GOLD_INLINE},e.prototype.evtJoinTeam=function(){var t=this;D.SocketUtils.instance.registerOnce(R.Processid.clubGame,club.client.game.MSGID.PARTNER_INFO,this,function(e){E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.JOIN_TEAM_SUCCESS_BY_CODE,Object.assign(t.bfasParam,{leader:e.creator},n.instance.bfasTeamIdNSubId))})},Object.defineProperty(e.prototype,"bfasParam",{get:function(){var t;return Object.assign({playType:this.getSelectPlayType(),friendTeamid:null===(t=this._teamInfo)||void 0===t?void 0:t.partnerid},this.bfasParamUserType)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bfasTeamIdNSubId",{get:function(){var t,e;return{friendTeamid:null===(t=this._teamInfo)||void 0===t?void 0:t.partnerid,subID:null===(e=this._teamInfo)||void 0===e?void 0:e.playTypeSubid}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bfasParamUserType",{get:function(){return{userType:k.UserInfoModel.instance.userInfo.teamUserType,userType2:k.UserInfoModel.instance.userInfo.teamUserType2}},enumerable:!1,configurable:!0}),e.prototype.postTeamShareArgs=function(){var t=F.ShareManager.instance.getShareArgs(this.getShareType(),{extData:this.shareExtData,titleArgs:this.titleArgs}),e=t.title,n=t.imageUrl;O.OpenDataContextManager.instance.setShareArgs(e,n)},Object.defineProperty(e.prototype,"shareExtData",{get:function(){return"friendTeamid="+this._teamInfo.partnerid+"&friendTeamTab="+this.getSelectPlayType()+"&friendTeamSubId="+this._teamInfo.playTypeSubid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"titleArgs",{get:function(){var t=K.default.instance.getUserNickName();return[Y.UIHelp.formatNicknameL(t)]},enumerable:!1,configurable:!0}),e.prototype.postTeamShareQuery=function(){var t=this._teamInfo.partnerid.toString().padStart(6,"0");O.OpenDataContextManager.instance.setShareQuery(+(this.getDirShareTypeEnum()+"."+t))},e.prototype.showQuickFriends=function(){O.OpenDataContextManager.instance.show("showMixed","vertical",!0,!0,20,!0)},e.prototype.initShareView=function(t){O.OpenDataContextManager.instance.initView(t)},e.prototype.postCloseLayout=function(){O.OpenDataContextManager.instance.close()},e.prototype.canClickInviteBtn=function(t){t?O.OpenDataContextManager.instance.clickEnable():O.OpenDataContextManager.instance.clickNotEnable()},e.prototype.friendTeamCallStart=function(t){var e=this,n=this._teamInfo.creator,o=F.ShareType.teamFriendCallStart,a=F.DirShareTypeEnum.FRIEND_TEAM_CALL_START;t&&(n=this._teamInfo.member,o=F.ShareType.teamFriendCallPrepare,a=F.DirShareTypeEnum.FRIEND_TEAM_CALL_PREPARE),this.getFriendOpenID(n,function(t){if(t){var n=F.ShareManager.instance.getShareArgs(o,{titleArgs:e.titleArgs}),i=n.title,r=n.imageUrl,s=+(a+"."+e._teamInfo.partnerid);e.directShare(t,i,r,s,function(t){c.NOT_WX_FRIEND===t&&e.friendTeamCallStartShare(o),e.postTeamShareArgs(),e.postTeamShareQuery()})}else e.friendTeamCallStartShare(o)})},e.prototype.friendTeamCallStartShare=function(t){F.ShareManager.instance.share(t,{extData:this.shareExtData,titleArgs:this.titleArgs})},e.prototype.directShare=function(t,e,n,o,a){f.EventManager.instance.once(X.PlatformEventType.ShareToFriend,this,function(t,e){console.warn("directShare: ",t,e);var n=t?c.SUCCESS:e.includes("cancel")?c.CANCEL:c.NOT_WX_FRIEND;a&&a(n)}),O.OpenDataContextManager.instance.setShareArgs(e,n),O.OpenDataContextManager.instance.setShareQuery(o),O.OpenDataContextManager.instance.directShareToFriend(t)},e.prototype.inlineTeamAdShare=function(){F.ShareManager.instance.share(F.ShareType.goldInlineTeamAdShare,{extData:this.shareExtData,titleArgs:this.titleArgs})},e.prototype.getFriendOpenID=function(t,e){var n=this;this._friendOpenIDs[t]?e&&e(this._friendOpenIDs[t]):this.proxy.reqFriendOpenID(t,function(o){n._friendOpenIDs[t]=o,e&&e(o)})},n=i([jsClass],e)}(g.BaseModel);n.FriendTeamModel=Z,cc.systemEvent.once("GameRoot.inited",function(){y.ModelRoot.instance.add(Z)}),cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/Model/BaseModel":"BaseModel","../../Framework/Root/ModelRoot":"ModelRoot","../Bankrupt/BankruptModel":"BankruptModel","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../Base/Data/DataScript":"DataScript","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/ClubError/ErrorCodeDbpConfig":"ErrorCodeDbpConfig","../Base/Module/ClubError/ErrorCodeGameConfig":"ErrorCodeGameConfig","../Base/Module/Network/Base/Processid":"Processid","../Base/Module/Network/Base/ProtocolManager":"ProtocolManager","../Base/Module/Network/SocketUtils":"SocketUtils","../Base/Module/OpenDataContext/OpenDataContextManager":"OpenDataContextManager","../Base/Module/Platform/Const/PlatformEventType":"PlatformEventType","../Base/Module/Platform/PlatformManager":"PlatformManager","../Base/Module/Room/ClubConfig":"ClubConfig","../Base/Module/Room/RoomModel":"RoomModel","../Base/Module/Room/RoomProxy":"RoomProxy","../Base/Module/Share/ShareManager":"ShareManager","../Base/Utils/UtilClub":"UtilClub","../Base/Utils/UtilTool":"UtilTool","../Base/View/Common/DialogUI":"DialogUI","../Base/View/UIHelp":"UIHelp","../Game/GuanDan/GameEvent":"GameEvent","../Game/GuanDan/GameUI":"GameUI","../Hall/HallModel":"HallModel","../Hall/HallUI":"HallUI","../HallGround/HallGroundModel":"HallGroundModel","../UserInfo/UserInfoModel":"UserInfoModel","./FriendTeamGuideUI":"FriendTeamGuideUI","./FriendTeamProxy":"FriendTeamProxy","./FriendTeamRecordUI":"FriendTeamRecordUI","./FriendTeamUI":"FriendTeamUI"}],FriendTeamProxy:[function(t,e,n){"use strict";cc._RF.push(e,"3533fExf39A25gTDbdo1WKd","FriendTeamProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.FriendTeamProxy=void 0;var r=t("../../Framework/Proxy/BaseProxy"),s=t("../../Framework/Root/ProxyRoot"),c=t("../Base/Data/DataBfConfig"),l=t("../Base/Utils/UtilClub"),u=t("../Base/Module/Network/Base/Processid"),d=t("../Base/Module/Network/Base/ProtocolManager"),p=t("../Base/Module/Network/protocol/ClubGameProtocol"),h=t("../Base/Module/Network/protocol/ClubLobbyProtocol"),_=t("../Base/Module/Network/SocketUtils"),f=t("../Base/Module/Network/protocol/AwardProtocol"),m=t("../Base/Data/DataScript"),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return s.ProxyRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.reqCreateFriendTeam=function(t,e){_.SocketUtils.instance.notify(new h.ClubLobbyProtocol.ReqCreatePartner({askid:0,clubid:c.DataBfConfig.friendTeamClubID,teamid:0,partnertype:t})),_.SocketUtils.instance.registerOnce(u.Processid.clubLobby,club.client.lobby.MSGID.RESP_CREATEPARTNER,this,function(t){console.log("===>respCreateFriendTeam.p: ",t);var n=l.UtilClub.dealClubErrorCode(t.errcode);if(console.log("===>respCreatFriendTeam.errorInfo: ",n),0!==n.code)e(!1,n);else{var o={appid:t.appid,partnerid:t.partnerid,partnerkey:t.partnerkey,partnertype:t.partnertype};e(!0,n,o)}})},e.prototype.reqJoinFriendTeam=function(t,e,n){_.SocketUtils.instance.notify(new h.ClubLobbyProtocol.ReqJoinPartner({askid:0,clubid:c.DataBfConfig.friendTeamClubID,teamid:0,partnerid:t,partnertype:e})),_.SocketUtils.instance.registerOnce(u.Processid.clubLobby,club.client.lobby.MSGID.RESP_JOINPARTNER,this,function(t){var e=l.UtilClub.dealClubErrorCode(t.errcode);if(console.log("===>respJoinFriendTeam: ",t,e),0!==e.code)n(!1,e);else{var o={appid:t.appid,partnerid:t.partnerid,partnerkey:t.partnerkey,partnertype:t.partnertype};n(!0,e,o)}})},e.prototype.reqEnterFriendTeam=function(t,e,n){console.log("===>reqEnterFriendTeam:",e),d.ProtocolManager.instance.setProcess2Appid(u.Processid.clubGame,e),_.SocketUtils.instance.notify(new p.ClubGameProtocol.ReqEnterPartner({askid:0,clubid:c.DataBfConfig.friendTeamClubID,teamid:0,partnerid:t,partnerkey:0})),_.SocketUtils.instance.registerOnce(u.Processid.clubGame,club.client.game.MSGID.RESP_ENTERPARTNER,this,function(t){var e=l.UtilClub.dealClubErrorCode(t.errcode);console.log("respEnterFriendTeam:",e),0!==e.code?n(!1,e):n(!0,e)})},e.prototype.reqFriendTeamReady=function(t,e,n){console.log("===>reqFriendTeamReady: ",t," pAppID: ",e),d.ProtocolManager.instance.setProcess2Appid(u.Processid.clubGame,e),_.SocketUtils.instance.notify(new p.ClubGameProtocol.ReqReadyPartner({readytype:t})),_.SocketUtils.instance.registerOnce(u.Processid.clubGame,club.client.game.MSGID.RESP_READYPARTNER,this,function(t){console.log("===>respFriendTeamReady.p:",t);var e=l.UtilClub.dealClubErrorCode(t.errcode);console.log("respFriendTeamReady.errorInfo:",e),0!==e.code?n&&n(!1,e):n&&n(!0,e)})},e.prototype.reqFriendTeamStart=function(t,e){console.log("===>reqFriendTeamStart: ",t," pAppID: ",e),d.ProtocolManager.instance.setProcess2Appid(u.Processid.clubGame,e),_.SocketUtils.instance.notify(new p.ClubGameProtocol.ReqStartPartner({partnerid:t}))},e.prototype.reqTeamSelectClub=function(t,e,n,o,a,i){console.log("===>reqTeamSelectClub.pAppid: ",t," clubid: ",e," subid: ",n),d.ProtocolManager.instance.setProcess2Appid(u.Processid.clubGame,t),_.SocketUtils.instance.notify(new p.ClubGameProtocol.ReqPartnerSelectClub({selectclub:e,selectsubid:n,selectgameid:o,partnertype:a})),_.SocketUtils.instance.registerOnce(u.Processid.clubGame,club.client.game.MSGID.RESP_PARTNERSELECTCLUB,this,function(t){var e=l.UtilClub.dealClubErrorCode(t.errcode);console.log("respFriendPlayType:",e),0!==e.code?i(!1,e):i(!0,e)})},e.prototype.reqLeaveTeam=function(t,e){d.ProtocolManager.instance.setProcess2Appid(u.Processid.clubGame,t),_.SocketUtils.instance.notify(new p.ClubGameProtocol.ReqLeavePartner({askid:0})),_.SocketUtils.instance.registerOnce(u.Processid.clubGame,club.client.game.MSGID.RESP_LEAVEPARTNER,this,function(t){var n=l.UtilClub.dealClubErrorCode(t.errcode);console.log("===>reqLeaveTeam.code:",n.code," p=",t),0!==n.code?e(!1,n):e(!0,n)})},e.prototype.reqFriendTeamKick=function(t,e,n,o){d.ProtocolManager.instance.setProcess2Appid(u.Processid.clubGame,t),_.SocketUtils.instance.notify(new p.ClubGameProtocol.ReqPartnerKick({askid:0,clubid:c.DataBfConfig.friendTeamClubID,teamid:0,partnerid:e,areaid:o,numid:n}))},e.prototype.reqChangeTeam=function(t,e,n,o){console.log("===>reqChangeTeam.appid: ",t," partnerid: ",e," partnerKey: ",n),d.ProtocolManager.instance.setProcess2Appid(u.Processid.clubGame,t),_.SocketUtils.instance.notify(new p.ClubGameProtocol.ReqChangePartner({askid:0,clubid:c.DataBfConfig.friendTeamClubID,teamid:0,partnerid:e,partnerkey:n})),_.SocketUtils.instance.registerOnce(u.Processid.clubGame,club.client.game.MSGID.RESP_CHANGEPARTNER,this,function(t){var e=l.UtilClub.dealClubErrorCode(t.errcode);console.log("respChangeTeam:errorInfo=",e," p=",t),0!==e.code?o(!1,e):o(!0,e)})},e.prototype.reqTeamRecord=function(){var t=new f.AwardProtocol.ReqAwardInfo({askid:m.DataScript.getGameAchievement.id,type:m.DataScript.getGameAchievement.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+m.DataScript.getGameAchievement.func.query+"';")});_.SocketUtils.instance.notify(t)},e.prototype.reqActivityId=function(t,e,n,o){var a=new f.AwardProtocol.ReqAwardInfo({type:m.DataScript.wxActivityId.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+m.DataScript.wxActivityId.func.query+"';partnerid="+t+";path='"+e+"';versionType='"+n+"';")});console.log("jp-log  reqActivityId",t,n,e),_.SocketUtils.instance.request(a,function(t){if(0==t.flag){var e=bf33.Utils.bytesToString(t.msg);console.log(">>reqActivityId.decode:",e);var n=JSON.parse(e);0===n.flag?o&&o(n.activityID):o&&o(null)}else o&&o(null)})},e.prototype.reqFriendOpenID=function(t,e){var n=new f.AwardProtocol.ReqAwardInfo({type:m.DataScript.FriendTeamRush.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+m.DataScript.FriendTeamRush.func.openID+"',friendNumID="+t)});_.SocketUtils.instance.request(n,function(t){if(0==t.flag){var n=bf33.Utils.bytesToString(t.msg),o=JSON.parse(n);e&&e(o&&o.openID)}else e&&e(null)})},i([jsClass],e)}(r.BaseProxy);n.FriendTeamProxy=g,cc.systemEvent.once("GameRoot.inited",function(){s.ProxyRoot.instance.add(g)}),cc._RF.pop()},{"../../Framework/Proxy/BaseProxy":"BaseProxy","../../Framework/Root/ProxyRoot":"ProxyRoot","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataScript":"DataScript","../Base/Module/Network/Base/Processid":"Processid","../Base/Module/Network/Base/ProtocolManager":"ProtocolManager","../Base/Module/Network/SocketUtils":"SocketUtils","../Base/Module/Network/protocol/AwardProtocol":"AwardProtocol","../Base/Module/Network/protocol/ClubGameProtocol":"ClubGameProtocol","../Base/Module/Network/protocol/ClubLobbyProtocol":"ClubLobbyProtocol","../Base/Utils/UtilClub":"UtilClub"}],FriendTeamQuickInviteUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"10087ICNZZOApG3THVmI9oE","FriendTeamQuickInviteUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./FriendTeamQuickInviteUI_Window"),a=t("./FriendTeamQuickInviteUI_MainPanel"),i=t("./FriendTeamQuickInviteUI_InviteComp"),r=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default)},t}();n.default=r,cc._RF.pop()},{"./FriendTeamQuickInviteUI_InviteComp":"FriendTeamQuickInviteUI_InviteComp","./FriendTeamQuickInviteUI_MainPanel":"FriendTeamQuickInviteUI_MainPanel","./FriendTeamQuickInviteUI_Window":"FriendTeamQuickInviteUI_Window"}],FriendTeamQuickInviteUI_InviteComp:[function(t,e,n){"use strict";cc._RF.push(e,"40d598BGS1BX6lMn9CAU8g1","FriendTeamQuickInviteUI_InviteComp");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamQuickInviteUI","InviteComp")},e.prototype.onConstruct=function(){this.m_state=this.getControllerAt(0),this.m_inviteBg=this.getChildAt(0),this.m_txtTeamCode=this.getChildAt(2),this.m_btnFold=this.getChildAt(3),this.m_btnJoin=this.getChildAt(4),this.m_btnReqRight=this.getChildAt(6),this.m_loaderWx=this.getChildAt(8),this.m_btnRefresh=this.getChildAt(10),this.m_FadeIn=this.getTransitionAt(0),this.m_FadeOut=this.getTransitionAt(1)},e.URL="ui://w1btvf8zn8a129",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamQuickInviteUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"13c63n/R5hMM4Q59GLSnyqB","FriendTeamQuickInviteUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamQuickInviteUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0),this.m_TFadeOut=this.getTransitionAt(1)},e.URL="ui://w1btvf8zbo9j1z",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamQuickInviteUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"22389Kvtl5FdLBgX95eIDK4","FriendTeamQuickInviteUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamQuickInviteUI","Window")},e.prototype.onConstruct=function(){this.m_inviteComp=this.getChildAt(0),this.m_FadeIn=this.getTransitionAt(0),this.m_FadeOut=this.getTransitionAt(1)},e.URL="ui://w1btvf8zbo9j1w",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamQuickInviteUI:[function(t,e,n){"use strict";cc._RF.push(e,"e772160npxH/Imv9KTuGj97","FriendTeamQuickInviteUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.FriendTeamQuickInviteUI=void 0;var r,s=t("../../Framework/UI/FadeUI"),c=t("./FriendTeamQuickInviteUI/FriendTeamQuickInviteUIBinder"),l=t("../../Framework/Manager/EventManager"),u=t("../Base/Module/Platform/Const/PlatformEventType"),d=t("../Base/Module/BfAnalytics/BfasManager"),p=t("../Base/Module/BfAnalytics/DataPointID"),h=t("./FriendTeamModel"),_=t("../Base/Module/Platform/PlatformManager"),f=t("../Base/Module/Platform/Const/Scope"),m=t("../Base/Data/DataEvent"),g=t("../Base/Data/DataBfConfig"),y=t("../../Framework/Manager/UIManager"),I=t("./FriendTeamJoinUI"),C=t("./FriendTeamUI"),M=t("../../Framework/UI/BaseUI");(function(t){t[t.NONE=0]="NONE",t[t.AUTHOR=1]="AUTHOR",t[t.LIST=2]="LIST"})(r||(r={}));var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){c.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return M.UIType.ScenePart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return h.FriendTeamModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.view.m_Window.m_inviteComp.m_txtTeamCode.text=""+this.model.teamInfo.partnerid},e.prototype.onFadedIn=function(){t.prototype.onFadedIn.call(this),this.initUI()},e.prototype.onDestroy=function(){this.model.postCloseLayout(),t.prototype.onDestroy.call(this)},e.prototype.initListener=function(){this.view.m_Collider.onClick(this.onExitClick,this),this.view.m_Window.m_inviteComp.m_btnFold.onClick(this.onExitClick,this),this.view.m_Window.m_inviteComp.m_btnJoin.onClick(this.onClickJoin,this),this.view.m_Window.m_inviteComp.m_btnRefresh.onClick(this.btnRefreshClick,this),this.view.m_Window.m_inviteComp.m_btnReqRight.onClick(this.btnReqRightClick,this),l.EventManager.instance.on(u.PlatformEventType.ShareToFriend,this,this.onShareToFriend),l.EventManager.instance.on(m.DataEvent.FriendTeamUpdateUserInfo,this,this.updateUserInfo)},e.prototype.onShareToFriend=function(t){console.log("======> onShareToFriend succeed: ",t);var e=Object.assign(this.model.bfasParam,this.model.bfasTeamIdNSubId);Object.assign(e,{teamUIType:C.FTTeamUITypeEnum.LEADER_NEW});var n=t?p.FriendMixTeamPointID.DIRECT_INVITE_SUCCESS:p.FriendMixTeamPointID.DIRECT_INVITE_FAIL;d.BfasManager.instance.sendEvt(n,e)},e.prototype.updateUserInfo=function(){this.model.isTeamLeader()&&this.model.isTeamFull()&&this.onExitClick()},e.prototype.onClickJoin=function(){var t=this;this.model.preStateIsReady=this.model.isFriendTeamReady(),d.BfasManager.instance.sendEvt(p.FriendMixTeamPointID.BTN_JOIN_TEAM,this.model.bfasParam),this.model.isTeamLeader()||!this.model.isFriendTeamReady()?(y.UIManager.instance.open(I.default),this.onExitClick()):this.model.operateReadyOrNotReady(h.FTReadyStateEnum.CANCEL,function(){y.UIManager.instance.open(I.default),t.onExitClick()})},e.prototype.btnRefreshClick=function(){this.model.showQuickFriends()},e.prototype.btnReqRightClick=function(){this.requireScope(function(){g.DataBfConfig.isWebPlatform()&&l.EventManager.instance.emit(m.DataEvent.ToastData,"\u5f53\u524d\u4e0d\u652f\u6301\u9080\u8bf7\u597d\u53cb\u54e6~")})},e.prototype.initUI=function(){this.requireScope()},e.prototype.requireScope=function(t){var e=this;_.PlatformManager.instance.platform.requireScope(f.Scope.friendsList,"\u5f00\u542f\u597d\u53cb\u6743\u9650\u624d\u53ef\u4ee5\u62c9\u53d6\u597d\u53cb\u4fe1\u606f",function(n){e.view&&e.view.m_Window&&(n?(e.updateInviteUI(),e.view.m_Window.m_inviteComp.m_state.selectedIndex=r.LIST):(t&&t(),e.view.m_Window.m_inviteComp.m_state.selectedIndex=r.AUTHOR))})},e.prototype.updateInviteUI=function(){var t=this.view.m_Window.m_inviteComp.m_loaderWx;this.model.postCloseLayout(),this.model.postTeamShareArgs(),this.model.postTeamShareQuery(),this.model.initShareView(t),this.model.showQuickFriends()},i([jsClass],e)}(s.FadeUI);n.FriendTeamQuickInviteUI=v,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/UI/BaseUI":"BaseUI","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataEvent":"DataEvent","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Platform/Const/PlatformEventType":"PlatformEventType","../Base/Module/Platform/Const/Scope":"Scope","../Base/Module/Platform/PlatformManager":"PlatformManager","./FriendTeamJoinUI":"FriendTeamJoinUI","./FriendTeamModel":"FriendTeamModel","./FriendTeamQuickInviteUI/FriendTeamQuickInviteUIBinder":"FriendTeamQuickInviteUIBinder","./FriendTeamUI":"FriendTeamUI"}],FriendTeamRecordUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"36781twx+NClIms/MnjNo9G","FriendTeamRecordUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./FriendTeamRecordUI_CompItem"),a=t("./FriendTeamRecordUI_CompHead"),i=t("./FriendTeamRecordUI_MainPanel"),r=t("./FriendTeamRecordUI_Window"),s=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default)},t}();n.default=s,cc._RF.pop()},{"./FriendTeamRecordUI_CompHead":"FriendTeamRecordUI_CompHead","./FriendTeamRecordUI_CompItem":"FriendTeamRecordUI_CompItem","./FriendTeamRecordUI_MainPanel":"FriendTeamRecordUI_MainPanel","./FriendTeamRecordUI_Window":"FriendTeamRecordUI_Window"}],FriendTeamRecordUI_CompHead:[function(t,e,n){"use strict";cc._RF.push(e,"415a8pTbCdL0bjvKk4LxKtZ","FriendTeamRecordUI_CompHead");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamRecordUI","CompHead")},e.prototype.onConstruct=function(){this.m_cSelf=this.getControllerAt(0),this.m_imgHead=this.getChildAt(1)},e.URL="ui://p7taqvbrfmdkb",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamRecordUI_CompItem:[function(t,e,n){"use strict";cc._RF.push(e,"01f70kGnqdCBZeUUSCaUGGr","FriendTeamRecordUI_CompItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamRecordUI","CompItem")},e.prototype.onConstruct=function(){this.m_cRstType=this.getControllerAt(0),this.m_txtJu=this.getChildAt(6),this.m_compHead1=this.getChildAt(7),this.m_compHead2=this.getChildAt(8),this.m_txtLevel1=this.getChildAt(11),this.m_txtLevel2=this.getChildAt(12),this.m_txtTime=this.getChildAt(13)},e.URL="ui://p7taqvbra79aa",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamRecordUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"dbe51cTEnRDLIPNb9jz0A5K","FriendTeamRecordUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamRecordUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://p7taqvbrfmdkc",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamRecordUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"b8a3422hxRBjafFHb0Ungq6","FriendTeamRecordUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamRecordUI","Window")},e.prototype.onConstruct=function(){this.m_cNoRecord=this.getControllerAt(0),this.m_btnClose=this.getChildAt(2),this.m_listItem=this.getChildAt(3)},e.URL="ui://p7taqvbrfmdkd",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamRecordUI:[function(t,e,n){"use strict";cc._RF.push(e,"829628j4lRBw4amVqIzwwSD","FriendTeamRecordUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.FriendTeamRecordUI=void 0;var r,s=t("../../Framework/Manager/EventManager"),c=t("../../Framework/UI/FadeUI"),l=t("../Base/Data/DataConstant"),u=t("../Base/Data/DataEvent"),d=t("../Base/Data/DatazOrder"),p=t("../Base/Utils/UtilTool"),h=t("../Hall/HallModel"),_=t("./FriendTeamModel"),f=t("./FriendTeamRecordUI/FriendTeamRecordUIBinder");(function(t){t[t.WIN=0]="WIN",t[t.LOSE=1]="LOSE",t[t.DRAW=2]="DRAW"})(r||(r={}));var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){f.default.bindAll()},Object.defineProperty(e,"sortingOrder",{get:function(){return d.DataZOrder.FriendTeamRecordUI},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return _.FriendTeamModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.updateData()},e.prototype.initListener=function(){s.EventManager.instance.on(u.DataEvent.FriendTeamGetRecord,this,this.updateList),this.view.m_Window.m_btnClose.onClick(this.onExitClick,this)},e.prototype.updateData=function(){this.model.reqTeamRecord()},e.prototype.updateList=function(t){var e=this;if(t){this.view.m_Window.m_cNoRecord.selectedIndex=0;var n=this.model.teamRecord,o=this.view.m_Window.m_listItem,a=n.length;o.itemRenderer=function(t,o){var a=n[t];if(a){var i=r.WIN;3==a.result?i=r.LOSE:1==a.result&&(i=r.DRAW),o.m_cRstType.selectedIndex=i,o.m_compHead1.m_cSelf.selectedIndex=1;var s=h.default.instance.getUserHeadUrl();o.m_compHead1.m_imgHead.url=s,o.m_compHead2.m_imgHead.url=e.getFriendHead(a.friendFaceUrl,a.friendAvatarID),o.m_txtLevel1.text=e.parseLevel(a.friendLevel,a.friendPassLevel),o.m_txtLevel2.text=e.parseLevel(a.enemyLevel,a.enemyPassLevel),o.m_txtTime.text=e.parseTime(a.timeStamp),o.m_txtJu.text=a.totalGameCount+"\u5c40"}},o.setVirtual(),o.numItems=a,o.refreshVirtualList()}else this.view.m_Window.m_cNoRecord.selectedIndex=1},e.prototype.parseLevel=function(t,e){var n=t.toString();11==t?n="J":12==t?n="Q":13==t?n="K":14==t&&(n="A");var o="\u6253";return e>0&&(o="\u8fc7"),o+n},e.prototype.parseTime=function(t){return new Date(t*=1e3).toCustomString("yyyy-MM-dd HH:mm:ss")},e.prototype.getFriendHead=function(t,e){return p.UtilTool.checkHeadurl(t)?t:l.DataConstant.getDefaultAvatar(e)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),console.log("ttt.onDestroy")},i([jsClass],e)}(c.FadeUI);n.FriendTeamRecordUI=m,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataConstant":"DataConstant","../Base/Data/DataEvent":"DataEvent","../Base/Data/DatazOrder":"DatazOrder","../Base/Utils/UtilTool":"UtilTool","../Hall/HallModel":"HallModel","./FriendTeamModel":"FriendTeamModel","./FriendTeamRecordUI/FriendTeamRecordUIBinder":"FriendTeamRecordUIBinder"}],FriendTeamUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"b0369LHxcpInrerLY7nuoWy","FriendTeamUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./FriendTeamUI_WaitStartHint"),a=t("./FriendTeamUI_BtnShout"),i=t("./FriendTeamUI_MainPanel"),r=t("./FriendTeamUI_Window"),s=t("./FriendTeamUI_Top"),c=t("./FriendTeamUI_Center"),l=t("./FriendTeamUI_PlayerInfo"),u=t("./FriendTeamUI_InviteComp"),d=t("./FriendTeamUI_ChooseModeComp"),p=t("./FriendTeamUI_QuickInviteComp"),h=t("./FriendTeamUI_playTypeItem"),_=t("./FriendTeamUI_LeftTabBtn"),f=t("./FriendTeamUI_WindowMember"),m=t("./FriendTeamUI_BtnQuickStartHint"),g=t("./FriendTeamUI_BtnShoutNew"),y=t("./FriendTeamUI_WindowLeader"),I=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default),fgui.UIObjectFactory.setExtension(l.default.URL,l.default),fgui.UIObjectFactory.setExtension(u.default.URL,u.default),fgui.UIObjectFactory.setExtension(d.default.URL,d.default),fgui.UIObjectFactory.setExtension(p.default.URL,p.default),fgui.UIObjectFactory.setExtension(h.default.URL,h.default),fgui.UIObjectFactory.setExtension(_.default.URL,_.default),fgui.UIObjectFactory.setExtension(f.default.URL,f.default),fgui.UIObjectFactory.setExtension(m.default.URL,m.default),fgui.UIObjectFactory.setExtension(g.default.URL,g.default),fgui.UIObjectFactory.setExtension(y.default.URL,y.default)},t}();n.default=I,cc._RF.pop()},{"./FriendTeamUI_BtnQuickStartHint":"FriendTeamUI_BtnQuickStartHint","./FriendTeamUI_BtnShout":"FriendTeamUI_BtnShout","./FriendTeamUI_BtnShoutNew":"FriendTeamUI_BtnShoutNew","./FriendTeamUI_Center":"FriendTeamUI_Center","./FriendTeamUI_ChooseModeComp":"FriendTeamUI_ChooseModeComp","./FriendTeamUI_InviteComp":"FriendTeamUI_InviteComp","./FriendTeamUI_LeftTabBtn":"FriendTeamUI_LeftTabBtn","./FriendTeamUI_MainPanel":"FriendTeamUI_MainPanel","./FriendTeamUI_PlayerInfo":"FriendTeamUI_PlayerInfo","./FriendTeamUI_QuickInviteComp":"FriendTeamUI_QuickInviteComp","./FriendTeamUI_Top":"FriendTeamUI_Top","./FriendTeamUI_WaitStartHint":"FriendTeamUI_WaitStartHint","./FriendTeamUI_Window":"FriendTeamUI_Window","./FriendTeamUI_WindowLeader":"FriendTeamUI_WindowLeader","./FriendTeamUI_WindowMember":"FriendTeamUI_WindowMember","./FriendTeamUI_playTypeItem":"FriendTeamUI_playTypeItem"}],FriendTeamUI_BtnQuickStartHint:[function(t,e,n){"use strict";cc._RF.push(e,"776achqzxNPsrI0AZPNTSq/","FriendTeamUI_BtnQuickStartHint");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamUI","BtnQuickStartHint")},e.prototype.onConstruct=function(){this.m_cQSHint=this.getControllerAt(0),this.m_imgQuickStartHint=this.getChildAt(1)},e.URL="ui://w272b4rqtquv5w",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],FriendTeamUI_BtnShoutNew:[function(t,e,n){"use strict";cc._RF.push(e,"db9feJ6TP1GmaY6LyNcqQHI","FriendTeamUI_BtnShoutNew");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamUI","BtnShoutNew")},e.prototype.onConstruct=function(){this.m_cActChallenge=this.getControllerAt(0)},e.URL="ui://w272b4rqxa8p6z",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],FriendTeamUI_BtnShout:[function(t,e,n){"use strict";cc._RF.push(e,"9354cVoZk1FU7MrYOxYa5nM","FriendTeamUI_BtnShout");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamUI","BtnShout")},e.prototype.onConstruct=function(){this.m_t0=this.getTransitionAt(0)},e.URL="ui://w272b4rq8km86b",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],FriendTeamUI_Center:[function(t,e,n){"use strict";cc._RF.push(e,"63b58kU9MdD/LerBAid8hpq","FriendTeamUI_Center");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamUI","Center")},e.prototype.onConstruct=function(){this.m_btnState=this.getControllerAt(0),this.m_cShowQuick=this.getControllerAt(1),this.m_teamCode=this.getChildAt(2),this.m_btnGuide=this.getChildAt(3),this.m_btnChangeTeam=this.getChildAt(4),this.m_btnStart=this.getChildAt(5),this.m_btnReady=this.getChildAt(6),this.m_btnNoReady=this.getChildAt(7),this.m_btnRemind=this.getChildAt(9),this.m_btnMicrophone=this.getChildAt(10),this.m_btnEarphone=this.getChildAt(11),this.m_btnQuickStart=this.getChildAt(12),this.m_btnQuickStartHint=this.getChildAt(13)},e.URL="ui://w272b4rqhku37",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamUI_ChooseModeComp:[function(t,e,n){"use strict";cc._RF.push(e,"667e4CoRchA8rXBNomLaCIO","FriendTeamUI_ChooseModeComp");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamUI","ChooseModeComp")},e.prototype.onConstruct=function(){this.m_field=this.getControllerAt(0),this.m_selectType=this.getControllerAt(1),this.m_btnClose=this.getChildAt(0),this.m_list=this.getChildAt(2),this.m_fieldName=this.getChildAt(6),this.m_fntBaseScore=this.getChildAt(7),this.m_btnOpen=this.getChildAt(8),this.m_btnOpenArea=this.getChildAt(9)},e.URL="ui://w272b4rqhku3q",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamUI_InviteComp:[function(t,e,n){"use strict";cc._RF.push(e,"b4fe9yR5RBCyIGTTIdhe8yb","FriendTeamUI_InviteComp");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamUI","InviteComp")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(1)},e.URL="ui://w272b4rqhku3o",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],FriendTeamUI_LeftTabBtn:[function(t,e,n){"use strict";cc._RF.push(e,"1fd8aaLMpFMnJEUen1hpjVJ","FriendTeamUI_LeftTabBtn");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamUI","LeftTabBtn")},e.prototype.onConstruct=function(){this.m_cPlazaPlayType=this.getControllerAt(0),this.m_cFlagBackWin=this.getControllerAt(1),this.m_cFlagFree=this.getControllerAt(2),this.m_pCount=this.getChildAt(4),this.m_flagBlackWin=this.getChildAt(5),this.m_flagFree=this.getChildAt(6)},e.URL="ui://w272b4rqrxb64w",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],FriendTeamUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"624bfM74LlH+5iR7aLbdJT/","FriendTeamUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamUI","MainPanel")},e.prototype.onConstruct=function(){this.m_cCharType=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_WindowMember=this.getChildAt(2),this.m_WindowLeader=this.getChildAt(3)},e.URL="ui://w272b4rqhku30",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamUI_PlayerInfo:[function(t,e,n){"use strict";cc._RF.push(e,"7cbc52rZx5BrINNueKlzRYR","FriendTeamUI_PlayerInfo");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamUI","PlayerInfo")},e.prototype.onConstruct=function(){this.m_teammateState=this.getControllerAt(0),this.m_mateReadyState=this.getControllerAt(1),this.m_playerState=this.getControllerAt(2),this.m_cTeamType=this.getControllerAt(3),this.m_hearLoderLeader=this.getChildAt(1),this.m_nameLeader=this.getChildAt(6),this.m_goldCompLeader=this.getChildAt(7),this.m_gLeader=this.getChildAt(8),this.m_btnInvite=this.getChildAt(10),this.m_hearLoderNoraml=this.getChildAt(12),this.m_nameNormal=this.getChildAt(14),this.m_goldCompNormal=this.getChildAt(15),this.m_btnLeaveNormal=this.getChildAt(16),this.m_gNormal=this.getChildAt(19)},e.URL="ui://w272b4rqhku3f",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamUI_QuickInviteComp:[function(t,e,n){"use strict";cc._RF.push(e,"14e180tGxVJVJl1KkhmahmH","FriendTeamUI_QuickInviteComp");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamUI","QuickInviteComp")},e.prototype.onConstruct=function(){this.m_state=this.getControllerAt(0),this.m_inviteBg=this.getChildAt(0),this.m_btnReqRight=this.getChildAt(2),this.m_loaderWx=this.getChildAt(4),this.m_btnRefresh=this.getChildAt(5),this.m_FadeIn=this.getTransitionAt(0),this.m_FadeOut=this.getTransitionAt(1)},e.URL="ui://w272b4rqjwk55m",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamUI_Top:[function(t,e,n){"use strict";cc._RF.push(e,"0e5b9erkv5NNqWIeMcx+DQ0","FriendTeamUI_Top");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamUI","Top")},e.prototype.onConstruct=function(){this.m_btnClose=this.getChildAt(1),this.m_goldCom=this.getChildAt(3),this.m_diamondComp=this.getChildAt(4),this.m_btnRule=this.getChildAt(5),this.m_btnFeedback=this.getChildAt(6)},e.URL="ui://w272b4rqhku34",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamUI_WaitStartHint:[function(t,e,n){"use strict";cc._RF.push(e,"4e288cUdPBCuZU/FMLzzD+R","FriendTeamUI_WaitStartHint");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamUI","WaitStartHint")},e.prototype.onConstruct=function(){this.m_aniHint=this.getTransitionAt(0)},e.URL="ui://w272b4rq8km85x",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamUI_WindowLeader:[function(t,e,n){"use strict";cc._RF.push(e,"4ea48zkLZJM2pHHshk8fOT6","FriendTeamUI_WindowLeader");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamUI","WindowLeader")},e.prototype.onConstruct=function(){this.m_btnState=this.getControllerAt(0),this.m_cOffline=this.getControllerAt(1),this.m_cPlayerState=this.getControllerAt(2),this.m_cTeamType=this.getControllerAt(3),this.m_cTeammateState=this.getControllerAt(4),this.m_bg=this.getChildAt(0),this.m_txtPlazaInfo=this.getChildAt(2),this.m_btnClose=this.getChildAt(3),this.m_imgLeftTop=this.getChildAt(4),this.m_btnRemind=this.getChildAt(7),this.m_btnDirectInvite=this.getChildAt(8),this.m_btnMicrophone=this.getChildAt(9),this.m_btnEarphone=this.getChildAt(10),this.m_btnStart=this.getChildAt(12),this.m_btnSingleStart=this.getChildAt(13),this.m_gQuickStart=this.getChildAt(14),this.m_hearLoderSelf=this.getChildAt(15),this.m_goldCompSelf=this.getChildAt(17),this.m_gSelf=this.getChildAt(18),this.m_btnInvite=this.getChildAt(19),this.m_hearLoderPartner=this.getChildAt(23),this.m_namePartner=this.getChildAt(27),this.m_txtGoldPartner=this.getChildAt(28),this.m_gPartner=this.getChildAt(29)},e.URL="ui://w272b4rqxa8p75",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamUI_WindowMember:[function(t,e,n){"use strict";cc._RF.push(e,"a1f1dAvBSZFNpsieu+R8NjV","FriendTeamUI_WindowMember");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamUI","WindowMember")},e.prototype.onConstruct=function(){this.m_btnState=this.getControllerAt(0),this.m_cOffline=this.getControllerAt(1),this.m_cPlayerState=this.getControllerAt(2),this.m_cTeamType=this.getControllerAt(3),this.m_bg=this.getChildAt(0),this.m_txtPlazaInfo=this.getChildAt(2),this.m_btnClose=this.getChildAt(3),this.m_imgLeftTop=this.getChildAt(4),this.m_btnReady=this.getChildAt(7),this.m_btnRemind=this.getChildAt(8),this.m_btnMicrophone=this.getChildAt(10),this.m_btnEarphone=this.getChildAt(11),this.m_btnQuickStart=this.getChildAt(13),this.m_gQuickStart=this.getChildAt(14),this.m_hearLoderSelf=this.getChildAt(15),this.m_goldCompSelf=this.getChildAt(16),this.m_gSelf=this.getChildAt(18),this.m_hearLoderPartner=this.getChildAt(20),this.m_namePartner=this.getChildAt(23),this.m_txtGoldPartner=this.getChildAt(24),this.m_gPartner=this.getChildAt(25)},e.URL="ui://w272b4rqsr9i6h",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"258caeKFi1EK5CvKV7FcOCV","FriendTeamUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamUI","Window")},e.prototype.onConstruct=function(){this.m_cSelectPlayType=this.getControllerAt(0),this.m_top=this.getChildAt(0),this.m_tabClassicFree=this.getChildAt(1),this.m_tabClassicGold=this.getChildAt(2),this.m_tabMult=this.getChildAt(3),this.m_center=this.getChildAt(4),this.m_playerInfo=this.getChildAt(5),this.m_playTypeChoose=this.getChildAt(6),this.m_btnRecord=this.getChildAt(7),this.m_compQuickInvite=this.getChildAt(8),this.m_nodeSelectSpine=this.getChildAt(9)},e.URL="ui://w272b4rqhku32",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamUI_playTypeItem:[function(t,e,n){"use strict";cc._RF.push(e,"271dbNLxttFTLBrM4bF+IF6","FriendTeamUI_playTypeItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("FriendTeamUI","playTypeItem")},e.prototype.onConstruct=function(){this.m_selectType=this.getControllerAt(0),this.m_fieldName=this.getChildAt(3),this.m_baseGold=this.getChildAt(4),this.m_limitGold=this.getChildAt(6)},e.URL="ui://w272b4rqqpz619",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],FriendTeamUI:[function(t,e,n){"use strict";cc._RF.push(e,"7bb98kg5uZGRpxsdEfU512s","FriendTeamUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.FriendTeamUI=n.FTTeamUITypeEnum=void 0;var s,c,l,u,d,p,h,_,f,m,g=t("../../Framework/Manager/EventManager"),y=t("../../Framework/Manager/UIManager"),I=t("../../Framework/UI/FadeUI"),C=t("../Base/Data/DataBfConfig"),M=t("../Base/Data/DataConstant"),v=t("../Base/Data/DataEvent"),E=t("../Base/Module/BfAnalytics/BfasManager"),A=t("../Base/Module/BfAnalytics/DataPointID"),P=t("../Base/View/UIHelp"),b=t("../Base/View/Common/DialogUI"),U=t("../FeedBack/FeedBackSuggUI"),S=t("../Hall/HallModel"),T=t("../HallGround/HallGroundModel"),R=t("../Base/Module/Room/RoomModel"),w=t("../Rule/RuleUI"),D=t("../Base/Module/Share/ShareManager"),O=t("../Shop/ShopConfig"),L=t("../Shop/ShopModel"),G=t("../UserInfo/UserInfoModel"),B=t("./FriendTeamModel"),N=t("../Base/Utils/UtilString"),F=t("../Base/Utils/UtilCC"),k=t("../Base/Data/DataSpineAni"),x=t("../Base/Utils/UtilTool"),j=t("./FriendTeamJoinUI"),H=t("./FriendTeamQuickInviteUI"),W=t("./FriendTeamRecordUI"),Y=t("../Base/Module/Room/ClubConfig"),V=t("./FriendTeamGuideUI"),q=t("../../Framework/UI/BaseUI"),K=t("../Base/Module/Platform/Const/PlatformEventType"),X=t("../Base/Module/Platform/PlatformManager"),J=t("../Base/Module/Platform/Const/Scope"),z=t("../Base/Utils/UtilView"),Q=t("../Base/Module/Popup/PopupManager"),Z=t("../Hall/HallUI"),$=t("../Game/Common/RealTimeVoice/RealTimeVoiceModel"),tt=t("../Bankrupt/BankruptModel");(function(t){t[t.LEADER=0]="LEADER",t[t.MEMBER=1]="MEMBER",t[t.LEADER_NEW=2]="LEADER_NEW"})(s=n.FTTeamUITypeEnum||(n.FTTeamUITypeEnum={})),function(t){t[t.NO_MEMBER=0]="NO_MEMBER",t[t.HAVE_MEMEBER=1]="HAVE_MEMEBER"}(c||(c={})),function(t){t[t.IS_LEADER=0]="IS_LEADER",t[t.NOT_LEADER=1]="NOT_LEADER"}(l||(l={})),function(t){t[t.NOT_READY=0]="NOT_READY",t[t.READY=1]="READY"}(u||(u={})),function(t){t[t.SHOW_START=0]="SHOW_START",t[t.SHOW_READY=1]="SHOW_READY",t[t.SHOW_CANCEL_READY=2]="SHOW_CANCEL_READY"}(d||(d={})),function(t){t[t.NOT_SHOW=0]="NOT_SHOW",t[t.SHOW=1]="SHOW"}(p||(p={})),function(t){t[t.NO_SHUFFLE=0]="NO_SHUFFLE",t[t.CLASSIC=1]="CLASSIC",t[t.MULT=2]="MULT"}(h||(h={})),function(t){t[t.NOT_SELECT=0]="NOT_SELECT",t[t.SELECT=1]="SELECT"}(_||(_={})),function(t){t[t.NONE=0]="NONE",t[t.AUTHOR=1]="AUTHOR",t[t.LIST=2]="LIST"}(f||(f={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(m||(m={}));var et=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._curSelectGameID=0,e._isMultPlaza=!1,e._preSelectedPlayIndex=B.SelectPlayTypeEnum.CLASSIC_FREE,e}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return B.FriendTeamModel.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return q.UIType.ScenePart},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.adaptFullScreen(),this.initUI(),Q.PopupManager.instance.stopPopup(),g.EventManager.instance.emit(v.DataEvent.FriendTeamHideHall),E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.SHOW_TEAM_UI,this.mode.bfasParamUserType)},e.prototype.initListener=function(){var t=this.view.m_Window.m_top;t.m_btnClose.onClick(this.closeUIClick,this),t.m_btnRule.onClick(this.btnRuleClick,this),t.m_diamondComp.onClick(this.btnDiamondClick,this),t.m_goldCom.onClick(this.btnGoldClick,this),t.m_btnFeedback.onClick(this.btnFeedbackClick,this);var e=this.view.m_Window.m_center;e.m_btnStart.onClick(this.btnStartClick,this),e.m_btnChangeTeam.onClick(this.btnChangeTeamClick,this),e.m_btnGuide.onClick(this.btnGuide,this),e.m_btnReady.onClick(this.btnReadyClick,this),e.m_btnNoReady.onClick(this.btnNoReadyClick,this),e.m_btnQuickStart.onClick(this.btnQuickStart,this),e.m_btnRemind.onClick(this.btnRemind,this),e.m_btnQuickStartHint.onClick(this.btnQuickStartHint,this),e.m_btnMicrophone.onClick(this.btnMicrophone,this),e.m_btnEarphone.onClick(this.btnEarphone,this);var n=this.view.m_Window.m_playerInfo;n.m_btnInvite.onClick(this.invitFriendClick,this),n.m_btnLeaveNormal.onClick(this.btnLeaveOrKickClick,this);var o=this.view.m_Window.m_playTypeChoose;o.m_btnOpenArea.onClick(this.btnOpenPlayTypeClick,this),o.m_btnClose.onClick(this.btnClosePlayTypeClick,this),o.m_list.on(fgui.Event.CLICK_ITEM,this.onItemClick,this),this.view.m_Window.m_btnRecord.onClick(this.btnRecordClick,this),this.view.m_Window.m_tabClassicFree.onClick(this.onBtnLeftTab,this),this.view.m_Window.m_tabClassicGold.onClick(this.onBtnLeftTab,this),this.view.m_Window.m_tabMult.onClick(this.onBtnLeftTab,this),this.view.m_Window.m_compQuickInvite.m_btnReqRight.onClick(this.onClickQIRight,this),this.view.m_Window.m_compQuickInvite.m_btnRefresh.onClick(this.onClickQIRefresh,this),this.view.m_cCharType.onChanged(this.onCharType,this);var a=this.view.m_WindowLeader;a.m_btnClose.onClick(this.closeUIClick,this),a.m_goldCompSelf.onClick(this.btnGoldClick,this),a.m_btnRemind.onClick(this.btnRemindMember,this),a.m_btnDirectInvite.onClick(this.btnDirectInviteClick,this),a.m_btnInvite.onClick(this.invitFriendClick,this),a.m_btnStart.onClick(this.btnStartNewClick,this),a.m_btnSingleStart.onClick(this.btnSingleStartClick,this),a.m_btnMicrophone.onClick(this.btnMicrophone,this),a.m_btnEarphone.onClick(this.btnEarphone,this);var i=this.view.m_WindowMember;i.m_btnClose.onClick(this.closeUIClick,this),i.m_goldCompSelf.onClick(this.btnGoldClick,this),i.m_btnReady.onClick(this.btnReadyClick,this),i.m_btnRemind.onClick(this.btnRemind,this),i.m_btnQuickStart.onClick(this.btnQuickStartMember,this),i.m_btnMicrophone.onClick(this.btnMicrophone,this),i.m_btnEarphone.onClick(this.btnEarphone,this),g.EventManager.instance.on(v.DataEvent.PopUIOpen,this,this.onPopUIOpen),g.EventManager.instance.on(v.DataEvent.PopUIClose,this,this.onPopUIClose),g.EventManager.instance.on(v.DataEvent.FriendTeamUpdateChar,this,this.initUI),g.EventManager.instance.on(v.DataEvent.UserInfoUpdate,this,this.updateTopInfo),g.EventManager.instance.on(v.DataEvent.FriendTeamUpdateUserInfo,this,this.updateUserInfo),g.EventManager.instance.on(v.DataEvent.FriendTeamOverTimeDismiss,this,this.onClickExit),g.EventManager.instance.on(v.DataEvent.FriendTeamJoinClose,this,this.onFriendTeamJoinClose),g.EventManager.instance.on(v.DataEvent.LoginReqLocationSuccess,this,this.onLoginReqLocationSuccess),g.EventManager.instance.on(v.DataEvent.ReceiveAuthAwardInfo,this,this.onReceiveAuthAwardInfo),g.EventManager.instance.on(K.PlatformEventType.RealTimeVoiceUpdate,this,this.onUpdateRealTimeVoice),g.EventManager.instance.on(K.PlatformEventType.ShareToFriend,this,this.onShareToFriend)},e.prototype.adaptFullScreen=function(){if(z.UtilView.isFullScreen()){var t=this.view.m_WindowLeader,e=this.view.m_WindowMember;t.m_imgLeftTop.x+=44,t.m_gSelf.x+=44,t.m_btnDirectInvite.x-=44,t.m_btnMicrophone.x-=44,t.m_btnEarphone.x-=44,e.m_imgLeftTop.x+=44,e.m_gSelf.x+=44,e.m_btnMicrophone.x-=44,e.m_btnEarphone.x-=44}},e.prototype.initUI=function(){this.updateUserInfo(),this.updateTopInfo(),this.initTabSelectSpine(),this.onUpdateRealTimeVoice(),this.updateOnlineCount(),this.updateQuickStartBtn(),this.requireScope()},e.prototype.popUpEnterGoldInlineTeam=function(){this.mode.isTeamLeader()&&(console.log("popUpEnterGoldInlineTeam.leader"),Q.PopupManager.instance.popupOnEnterToGoldInlineTeam())},e.prototype.onDestroy=function(){this.stopTeamCountDown(),y.UIManager.instance.isExist(H.FriendTeamQuickInviteUI)&&y.UIManager.instance.close(H.FriendTeamQuickInviteUI),this.mode.postCloseLayout(),t.prototype.onDestroy.call(this)},e.prototype.onPopUIOpen=function(){y.UIManager.instance.list([q.UIType.Window]).length>0&&this.mode.isTeamLeader()&&this.mode.canClickInviteBtn(!1)},e.prototype.onPopUIClose=function(){0==y.UIManager.instance.list([q.UIType.Window]).length&&this.mode.isTeamLeader()&&this.mode.canClickInviteBtn(!0)},e.prototype.onReceiveAuthAwardInfo=function(){this.updateQuickStartBtn()},e.prototype.updateQuickStartBtn=function(){var t=!G.UserInfoModel.instance.userInfo.hideTeamSingleOnline&&!G.UserInfoModel.instance.isGoldInlineTeam();this.view.m_Window.m_center.m_btnQuickStart.visible=t,this.view.m_Window.m_center.m_btnQuickStartHint.visible=t},e.prototype.updateTopInfo=function(){var t=this.view.m_Window.m_top,e=G.UserInfoModel.instance.userInfo;t.m_goldCom.title=N.UtilString.getCurrencyShortString(e.gold),t.m_diamondComp.title=N.UtilString.getCurrencyShortString(e.diamond)},e.prototype.updateUserInfo=function(){this.mode.isEnterFromGoldInlineTeam()?this.view.m_cCharType.selectedIndex=this.mode.isTeamLeader()?s.LEADER_NEW:s.MEMBER:this.view.m_cCharType.selectedIndex=this.mode.isTeamLeader()?s.LEADER:s.MEMBER,this.mode.isTeamLeader()||g.EventManager.instance.emit(v.DataEvent.StopManagerPop),this.view.m_Window.m_playerInfo.m_teammateState.selectedIndex=c.NO_MEMBER,this.view.m_WindowLeader.m_cTeammateState.selectedIndex=c.NO_MEMBER,console.log("updateUserInfo.players: ",this.mode.players),this.mode.players.length<2&&this.playInviteAnim();for(var t=0;t<this.mode.players.length;++t){var e=this.mode.players[t].numid;e&&e===this.mode.getLeaderNumID()?this.updateLeaderInfo(t):e&&e===this.mode.getMemberNumID()&&this.updateMemberInfo(t)}var n=this.view.m_WindowLeader,o=this.view.m_WindowMember,a=this.view.m_Window.m_center;if(this.mode.isTeamLeader())a.m_btnState.selectedIndex=d.SHOW_START,a.m_cShowQuick.selectedIndex=this.mode.isTeamFull()?p.NOT_SHOW:p.SHOW,!this.mode.isFriendTeamReady()&&this.mode.isTeamFull()?n.m_btnState.selectedIndex=d.SHOW_READY:n.m_btnState.selectedIndex=d.SHOW_START;else{this.mode.isFriendTeamReady()?(a.m_btnState.selectedIndex=d.SHOW_CANCEL_READY,o.m_btnState.selectedIndex=d.SHOW_CANCEL_READY,this.startTeamCountDown()):(a.m_btnState.selectedIndex=d.SHOW_READY,o.m_btnState.selectedIndex=d.SHOW_READY,this.stopTeamCountDown());var i=this.mode.getSelectPlayType();o.m_btnState.selectedIndex==d.SHOW_CANCEL_READY&&i!=B.SelectPlayTypeEnum.CLASSIC_FREE&&this.mode.isBankrupt()&&this.operateReadyOrNotReady(B.FTReadyStateEnum.CANCEL)}a.m_teamCode.text=""+this.mode.teamInfo.partnerid,this.updatePlazaInfo(),this.updateSelectPlayType()},e.prototype.startTeamCountDown=function(){var t=this;this.stopTeamCountDown(),cc.tween(this.view).delay(60).call(function(){t.showMemberQuickStart(!0)}).start()},e.prototype.stopTeamCountDown=function(){cc.Tween.stopAllByTarget(this.view),this.showMemberQuickStart(!1)},e.prototype.onCharType=function(){var t=this.view.m_cCharType.selectedIndex;if(t==s.LEADER)this.requireScope();else if(t==s.MEMBER)this.mode.postCloseLayout();else if(t==s.LEADER_NEW){this.mode.postCloseLayout(),this.mode.isTeamFull()||this.btnDirectInviteClick();var e=this.mode.getBfasPlazaData();E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.SHOW_TEAM_UI_NEW,e)}},e.prototype.showMemberQuickStart=function(t){this.view.m_WindowMember.m_gQuickStart.visible=t},e.prototype.playInviteAnim=function(){var t=this.view.m_cCharType.selectedIndex;if(t==s.LEADER){var e=this.view.m_Window.m_playerInfo.m_btnInvite;e.m_spineNode.node.removeAllChildren(),F.UtilCC.instantiatePrefab(k.DataSpineAniPath.ANI_FRIENDTEAM_INVITE_FRIEND,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"txk_loop",!0)},e.m_spineNode.node)}else if(t==s.LEADER_NEW){var n=this.view.m_WindowLeader.m_btnInvite;n.m_spineNode.node.removeAllChildren(),F.UtilCC.instantiatePrefab(k.DataSpineAniPath.ANI_FRIENDTEAM_INVITE_FRIEND,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"txk_loop",!0)},n.m_spineNode.node)}},e.prototype.updateLeaderInfo=function(t){var e=this.mode.players[t],n=this.mode.isTeamLeader()?l.IS_LEADER:l.NOT_LEADER,o=this.view.m_Window.m_playerInfo;o.m_hearLoderLeader.url=this.getFriendHead(e.headurl,e.head),o.m_nameLeader.text=P.UIHelp.formatNicknameS(e.nickname),o.m_goldCompLeader.title=N.UtilString.getCurrencyShortString(e.gamegold);var a=this.view.m_WindowLeader;a.m_hearLoderSelf.url=this.getFriendHead(e.headurl,e.head),a.m_goldCompSelf.title=N.UtilString.getCurrencyShortString(e.gamegold),a.m_cPlayerState.selectedIndex=n;var i=this.view.m_WindowMember;i.m_hearLoderPartner.url=this.getFriendHead(e.headurl,e.head),i.m_namePartner.text=P.UIHelp.formatNicknameL(e.nickname,8),i.m_txtGoldPartner.text=N.UtilString.getCurrencyShortString(e.gamegold),i.m_cPlayerState.selectedIndex=n,e.linkstep==B.UserLinkStepEnum.OFFLINE?i.m_cOffline.selectedIndex=p.SHOW:i.m_cOffline.selectedIndex=p.NOT_SHOW},e.prototype.updateMemberInfo=function(t){var e=this.mode.players[t],n=this.view.m_Window.m_playerInfo;n.m_hearLoderNoraml.url=this.getFriendHead(e.headurl,e.head),n.m_nameNormal.text=P.UIHelp.formatNicknameS(e.nickname),n.m_goldCompNormal.title=N.UtilString.getCurrencyShortString(e.gamegold);var o=this.mode.isTeamLeader()?l.IS_LEADER:l.NOT_LEADER;n.m_playerState.selectedIndex=o,n.m_mateReadyState.selectedIndex=this.mode.isFriendTeamReady()?u.READY:u.NOT_READY,n.m_teammateState.selectedIndex=c.HAVE_MEMEBER;var a=this.view.m_WindowLeader;a.m_hearLoderPartner.url=this.getFriendHead(e.headurl,e.head),a.m_namePartner.text=P.UIHelp.formatNicknameL(e.nickname,8),a.m_txtGoldPartner.text=N.UtilString.getCurrencyShortString(e.gamegold),a.m_cTeammateState.selectedIndex=c.HAVE_MEMEBER,a.m_cPlayerState.selectedIndex=o;var i=this.view.m_WindowMember;i.m_hearLoderSelf.url=this.getFriendHead(e.headurl,e.head),i.m_goldCompSelf.title=N.UtilString.getCurrencyShortString(e.gamegold),i.m_cPlayerState.selectedIndex=o,e.linkstep==B.UserLinkStepEnum.OFFLINE?a.m_cOffline.selectedIndex=p.SHOW:a.m_cOffline.selectedIndex=p.NOT_SHOW},e.prototype.getFriendHead=function(t,e){return x.UtilTool.checkHeadurl(t)?t:M.DataConstant.getDefaultAvatar(e)},e.prototype.updatePlazaInfo=function(){var t=this.mode.getRoomInfo();if(t){this._isMultPlaza=t.multType>0,this._curSelectGameID=this.mode.teamInfo.gameid;var e=R.RoomModel.instance.parsePlazaSingleName(t.name);this.view.m_Window.m_playTypeChoose.m_fieldName.text=e,this.view.m_Window.m_playTypeChoose.m_fntBaseScore.text=t.base.toString(),B.FTTeamTypeEnum.FREE!=this.mode.teamInfo.partnertype?(this.view.m_WindowLeader.m_txtPlazaInfo.text=R.RoomModel.instance.parsePlazaFullName(t.name)+" \u5e95 "+t.base,this.view.m_WindowMember.m_txtPlazaInfo.text=R.RoomModel.instance.parsePlazaFullName(t.name)+" \u5e95 "+t.base):(this.view.m_WindowLeader.m_txtPlazaInfo.text="",this.view.m_WindowMember.m_txtPlazaInfo.text="")}},e.prototype.updateSelectPlayType=function(){var t=this.mode.getSelectPlayType();this.view.m_Window.m_cSelectPlayType.selectedIndex=t,this._preSelectedPlayIndex=t;var e=null;switch(t){case B.SelectPlayTypeEnum.CLASSIC_FREE:e=this.view.m_Window.m_tabClassicFree;break;case B.SelectPlayTypeEnum.CLASSIC_GOLD:e=this.view.m_Window.m_tabClassicGold;break;case B.SelectPlayTypeEnum.MULT:e=this.view.m_Window.m_tabMult}this.view.m_Window.m_nodeSelectSpine.node.setPosition(e.node.getPosition()),t===B.SelectPlayTypeEnum.CLASSIC_FREE?(this.view.m_Window.m_playerInfo.m_cTeamType.selectedIndex=p.NOT_SHOW,this.view.m_WindowMember.m_cTeamType.selectedIndex=p.NOT_SHOW,this.view.m_WindowLeader.m_cTeamType.selectedIndex=p.NOT_SHOW):(this.view.m_Window.m_playerInfo.m_cTeamType.selectedIndex=p.SHOW,this.view.m_WindowMember.m_cTeamType.selectedIndex=p.SHOW,this.view.m_WindowLeader.m_cTeamType.selectedIndex=p.SHOW)},e.prototype.initTabSelectSpine=function(){var t=this.view.m_Window.m_nodeSelectSpine;t.node.removeAllChildren(),F.UtilCC.instantiatePrefab(k.DataSpineAniPath.ANI_FRIENDTEAM_SELECT_TAB,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"xuanzhong",!0)},t.node)},e.prototype.onUpdateRealTimeVoice=function(){var t=X.PlatformManager.instance.platform.canVoiceChat,e=$.RealTimeVoiceModel.instance.muteMicrophone,n=$.RealTimeVoiceModel.instance.muteEarphone,o=this.view.m_Window.m_center,a=this.view.m_WindowLeader,i=this.view.m_WindowMember;o.m_btnMicrophone.visible=t,o.m_btnEarphone.visible=t,a.m_btnMicrophone.visible=t,a.m_btnEarphone.visible=t,i.m_btnMicrophone.visible=t,i.m_btnEarphone.visible=t,o.m_btnMicrophone.selected=!e,o.m_btnEarphone.selected=!n,a.m_btnMicrophone.selected=!e,a.m_btnEarphone.selected=!n,i.m_btnMicrophone.selected=!e,i.m_btnEarphone.selected=!n},e.prototype.updateOnlineCount=function(){var t=T.HallGroundModel.instance.getRoomOnlineCount(Y.ClubSubIDConfig.CLASSIC_GD.PRIMARY);this.view.m_Window.m_tabClassicFree.m_pCount.text=t.toString();var e=R.RoomModel.instance.getClassicNormalPlazaList(!0),n=0;e.forEach(function(t){n+=T.HallGroundModel.instance.getRoomOnlineCount(t.subID)}),this.view.m_Window.m_tabClassicGold.m_pCount.text=n.toString(),e=R.RoomModel.instance.getClassicMultPlazaList();var o=0;e.forEach(function(t){o+=T.HallGroundModel.instance.getRoomOnlineCount(t.subID)}),this.view.m_Window.m_tabMult.m_pCount.text=o.toString()},e.prototype.closeUIClick=function(){var t=this;if(this.view.m_cCharType.selectedIndex==s.LEADER_NEW){var e=this.mode.getBfasPlazaData();E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.CLICK_TEAM_EXIT_NEW,e)}else E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.LEADER_EXIT,Object.assign(this.mode.bfasParamUserType,this.mode.bfasTeamIdNSubId));if(this.mode.isTeamFull()){var n="\u786e\u8ba4\u79bb\u5f00\u961f\u4f0d\u5e76\u91cd\u65b0\u521b\u5efa\u961f\u4f0d\uff1f";this.mode.isTeamLeader()&&(n="\u786e\u8ba4\u89e3\u6563\u961f\u4f0d\u8fd4\u56de\u5927\u5385\uff1f"),P.UIHelp.instance.showDialogConfirmCancel(n,function(e){e&&t.exitTeam()})}else y.UIManager.instance.open(b.DialogUI).then(function(e){e.initFTConfirmCancelClose({content:"\u662f\u5426\u9000\u51fa\u5e76\u89e3\u6563\u5f53\u524d\u961f\u4f0d?\n(\u6682\u65f6\u79bb\u5f00\u540e\u961f\u4f0d\u4ecd\u4f1a\u4fdd\u755930\u5206\u949f)",btnFTConfirm:"\u6682\u65f6\u79bb\u5f00",btnFTCancel:"\u786e\u5b9a\u89e3\u6563"}),e.confirmAction=function(){t.onClickExit()},e.cancelAction=function(){t.exitTeam()}})},e.prototype.exitTeam=function(){var t=this;!this.mode.isFriendTeamReady()||this.mode.isTeamLeader()?this.trueLeaveTeam():this.operateReadyOrNotReady(B.FTReadyStateEnum.CANCEL,function(){t.trueLeaveTeam()})},e.prototype.trueLeaveTeam=function(){var t=this,e=this.mode.teamInfo.member==G.UserInfoModel.instance.userInfo.numID;this.mode.registerOnceLeaveTeam(e,this.mode.getSelectPlayType(),this.clearAndExit),this.mode.leaveTeam(function(){e||t.clearAndExit()},function(){t.clearAndExit()})},e.prototype.clearAndExit=function(){G.UserInfoModel.instance.clearPartnerLocation(),this.onClickExit()},e.prototype.operateReadyOrNotReady=function(t,e){this.mode.operateReadyOrNotReady(t,e)},e.prototype.btnRuleClick=function(){y.UIManager.instance.open(w.RuleUI)},e.prototype.btnDiamondClick=function(){L.ShopModel.instance.showShopUI(O.ShopPageTypeEnum.DIAMOND)},e.prototype.btnGoldClick=function(){L.ShopModel.instance.showShopUI(O.ShopPageTypeEnum.GOLD)},e.prototype.btnStartClick=function(){this.view.m_Window.m_cSelectPlayType.selectedIndex===B.SelectPlayTypeEnum.CLASSIC_FREE?this.startFreeTeam():this.startGoldTeam()},e.prototype.btnStartNewClick=function(){var t=this.view.m_Window.m_cSelectPlayType;B.TeamStateEnum.JOIN>this.mode.teamInfo.state?(t.selectedIndex==B.SelectPlayTypeEnum.CLASSIC_FREE&&(t.selectedIndex=B.SelectPlayTypeEnum.CLASSIC_GOLD),this.startGoldTeamSingle(!1)):t.selectedIndex===B.SelectPlayTypeEnum.CLASSIC_FREE?this.startFreeTeam():this.startGoldTeam()},e.prototype.btnSingleStartClick=function(){if(!(B.TeamStateEnum.JOIN<=this.mode.teamInfo.state)){var t=this.view.m_Window.m_cSelectPlayType;t.selectedIndex==B.SelectPlayTypeEnum.CLASSIC_FREE&&(t.selectedIndex=B.SelectPlayTypeEnum.CLASSIC_GOLD),this.startGoldTeamSingle(!1)}},e.prototype.startFreeTeam=function(){B.TeamStateEnum.JOIN>this.mode.teamInfo.state?this.singleStartTeam():(E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.CLICK_START_GAME,Object.assign(this.mode.bfasParamUserType,this.mode.bfasTeamIdNSubId)),this.mode.isFriendTeamReady()?this.mode.startFriendFreeTeam():g.EventManager.instance.emit(v.DataEvent.ToastData,"\u961f\u53cb\u8fd8\u672a\u51c6\u5907"))},e.prototype.singleStartTeam=function(){var t=this;E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.SINGLE_CLICK_START,this.mode.bfasParamUserType),P.UIHelp.instance.showDialogConfirmCancel("\u8bf7\u9080\u8bf7\u597d\u53cb\u4e00\u8d77\u7ec4\u961f\u6e38\u620f~",function(e){e&&t.inviteFriend()})},e.prototype.inviteFriend=function(t){var e=this;this.mode.reqActivityId(function(n){var o=null;n&&(o={activityId:n,current:e.mode.players.length,total:2}),D.ShareManager.instance.share(e.mode.getShareType(),{extData:e.mode.shareExtData,activityData:o,titleArgs:e.mode.titleArgs},t)})},e.prototype.startGoldTeam=function(){if(B.TeamStateEnum.JOIN>this.mode.teamInfo.state)this.singleStartTeam();else{if(E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.CLICK_START_GAME,Object.assign(this.mode.bfasParamUserType,this.mode.bfasTeamIdNSubId)),this.mode.isFriendTeamReady())return this.mode.isBankrupt()?(tt.BankruptModel.instance.showBankrupt(),void g.EventManager.instance.emit(v.DataEvent.ToastData,"\u91d1\u5e01\u4e0d\u8db3\uff0c\u65e0\u6cd5\u5f00\u59cb\u6e38\u620f")):void(this.mode.isMemberBanrupt()?g.EventManager.instance.emit(v.DataEvent.ToastData,"\u961f\u53cb\u7684\u91d1\u5e01\u6570\u672a\u8fbe\u5230\u573a\u6b21\u51c6\u5165\u9650\u5236\u54e6~"):this.mode.operateStart());g.EventManager.instance.emit(v.DataEvent.ToastData,"\u961f\u53cb\u8fd8\u672a\u51c6\u5907")}},e.prototype.startGoldTeamSingle=function(t){var e=this;if(!(B.TeamStateEnum.JOIN<=this.mode.teamInfo.state)){if(this.mode.isBankrupt())return tt.BankruptModel.instance.showBankrupt(),void g.EventManager.instance.emit(v.DataEvent.ToastData,"\u91d1\u5e01\u4e0d\u8db3\uff0c\u65e0\u6cd5\u5f00\u59cb\u6e38\u620f");var n;n=this.view.m_cCharType.selectedIndex===s.LEADER_NEW?B.EnterTypeEnum.GOLD_INLINE_SINGLE:B.EnterTypeEnum.TEAM_SINGLE,t?this.mode.startSingleGameWithQuickStart(this._isMultPlaza,n):this.mode.startSingleGame(n,function(){e.clearAndExit()})}},e.prototype.btnChangeTeamClick=function(){this.mode.preStateIsReady=this.mode.isFriendTeamReady(),E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.BTN_JOIN_TEAM,this.mode.bfasParam),this.mode.isTeamLeader()||!this.mode.isFriendTeamReady()?y.UIManager.instance.open(j.default):this.operateReadyOrNotReady(B.FTReadyStateEnum.CANCEL,function(){y.UIManager.instance.open(j.default)})},e.prototype.btnGuide=function(){y.UIManager.instance.open(V.FriendTeamGuideUI).then(function(t){t.init(V.TeamGuideType.OLD)})},e.prototype.btnReadyClick=function(){if(E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.TEAMMATE_PREPARE,Object.assign(this.mode.bfasParamUserType,this.mode.bfasTeamIdNSubId)),this.view.m_Window.m_cSelectPlayType.selectedIndex!=B.SelectPlayTypeEnum.CLASSIC_FREE&&this.mode.isBelowMinSr(this._curSelectGameID,this._isMultPlaza))return tt.BankruptModel.instance.showBankrupt(),void g.EventManager.instance.emit(v.DataEvent.ToastData,"\u91d1\u5e01\u4e0d\u8db3\uff0c\u65e0\u6cd5\u51c6\u5907");this.operateReadyOrNotReady(B.FTReadyStateEnum.READY)},e.prototype.btnNoReadyClick=function(){E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.TEAMMATE_CANCEL_PREPARE,Object.assign(this.mode.bfasParamUserType,this.mode.bfasTeamIdNSubId)),this.operateReadyOrNotReady(B.FTReadyStateEnum.CANCEL)},e.prototype.btnFeedbackClick=function(){y.UIManager.instance.open(U.FeedBackSuggUI).then(function(t){t.init(U.FeedBackSuggSource.GOLD_FRIEND_TEAM)})},e.prototype.invitFriendClick=function(){var t=this;this.inviteFriend(function(e,n,o){var a=Object.assign(t.mode.bfasParam,{shareId:o});E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.CLICK_INVITE,Object.assign(a,{teamUIType:t.view.m_cCharType.selectedIndex},t.mode.bfasTeamIdNSubId))})},e.prototype.btnLeaveOrKickClick=function(){var t=this;if(this.mode.isTeamLeader())return E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.KICK_TEAMMATE,Object.assign(this.mode.bfasParamUserType,this.mode.bfasTeamIdNSubId)),void this.mode.reqKickMember();E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.TEAMMATE_EXIT,Object.assign(this.mode.bfasParamUserType,this.mode.bfasTeamIdNSubId));var e=this.view.m_Window.m_cSelectPlayType.selectedIndex,n=this.mode.getPreSubIdAndTeamType(),o=n.playTypeSubid,a=n.teamType;!this.mode.isFriendTeamReady()||this.mode.isTeamLeader()?this.mode.leaveTeam(function(){t.mode.createTeam(e,o,a)}):this.operateReadyOrNotReady(B.FTReadyStateEnum.CANCEL,function(){t.mode.leaveTeam(function(){t.mode.createTeam(e,o,a)})})},e.prototype.btnOpenPlayTypeClick=function(){if(G.UserInfoModel.instance.userInfo.numID!==this.mode.getMemberNumID()){if(this.mode.isBankrupt())return tt.BankruptModel.instance.showBankrupt(),void g.EventManager.instance.emit(v.DataEvent.ToastData,"\u91d1\u5e01\u4e0d\u8db3\uff0c\u65e0\u6cd5\u64cd\u4f5c");if(this.mode.isMemberBanrupt())g.EventManager.instance.emit(v.DataEvent.ToastData,"\u961f\u53cb\u91d1\u5e01\u6570\u91cf\u4f4e\u4e8e\u6700\u4f4e\u573a\u6b21\u8981\u6c42");else{var t=this.view.m_Window.m_playTypeChoose.m_field.selectedIndex;t=p.NOT_SHOW===t?p.SHOW:p.NOT_SHOW,this.view.m_Window.m_playTypeChoose.m_field.selectedIndex=t,p.NOT_SHOW!==t&&S.default.instance.doPullRoomListSucessCo(this.waitConfigPullSuccess.bind(this))}}else g.EventManager.instance.emit(v.DataEvent.ToastData,"\u53ea\u6709\u961f\u957f\u624d\u53ef\u4ee5\u9009\u62e9\u5bf9\u5c40\u7684\u73a9\u6cd5\u548c\u573a\u6b21\u54e6")},e.prototype.waitConfigPullSuccess=function(){this._curSelectGameID=this.mode.teamInfo.gameid,C.GameIDInfo.NO_SHUFFLE_GD.id===this._curSelectGameID?this.view.m_Window.m_playTypeChoose.m_selectType.selectedIndex=h.NO_SHUFFLE:this._isMultPlaza?this.view.m_Window.m_playTypeChoose.m_selectType.selectedIndex=h.MULT:this.view.m_Window.m_playTypeChoose.m_selectType.selectedIndex=h.CLASSIC,this.updateFieldPlayTypeList()},e.prototype.updateFieldPlayTypeList=function(){var t,e,n=[],o=[T.GroundItemLine.LINE_1,T.GroundItemLine.LINE_2];try{for(var a=r(o),i=a.next();!i.done;i=a.next()){var s=i.value,c=T.HallGroundModel.instance.getGroundInfo(this._curSelectGameID,s,this._isMultPlaza,!0);c&&c.forEach(function(t){t.level<=R.RoomLevelEnum.MASTER_LEVEL&&n.push(t)})}}catch(p){t={error:p}}finally{try{i&&!i.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}if(0!==n.length){var l=this.mode.getRecRoomInfoByGameID(this._curSelectGameID,this._isMultPlaza),u=this.view.m_Window.m_playTypeChoose.m_list,d=0;u.itemRenderer=function(t,e){var o=n[t];if(o){e.m_fieldName.text=R.RoomModel.instance.parsePlazaSingleName(o.name),e.m_baseGold.text=""+o.baseScore;var a,i=N.UtilString.getCurrencyShortString(o.minScore),r=N.UtilString.getCurrencyShortString(o.partnerMax);a=0!==o.partnerMax?i+"~"+r:i+"\u4ee5\u4e0a",e.m_limitGold.text=a,l&&l.subID===o.subID?(e.m_selectType.selectedIndex=_.SELECT,d=t):e.m_selectType.selectedIndex=_.NOT_SELECT,e.data=o}},u.setVirtual(),u.numItems=n.length,u.refreshVirtualList(),u.scrollPane.scrollToView(u.getChildAt(d)),console.log("groundInfos",n),this.mode.isMemberBanrupt()&&g.EventManager.instance.emit(v.DataEvent.ToastData,"\u961f\u53cb\u7684\u91d1\u5e01\u6570\u672a\u8fbe\u5230\u573a\u6b21\u51c6\u5165\u9650\u5236\u54e6~")}else g.EventManager.instance.emit(v.DataEvent.ToastData,"\u73a9\u6cd5\u6570\u636e\u83b7\u53d6\u9519\u8bef\uff0c\u8bf7\u9000\u51fa\u91cd\u8fdb!")},e.prototype.btnClosePlayTypeClick=function(){this.view.m_Window.m_playTypeChoose.m_field.selectedIndex=p.NOT_SHOW},e.prototype.onItemClick=function(t){var e=this,n=t.data;console.log("onItemClick info: ",n);var o=this.mode.checkChoose(n.subID);switch(o[0]){case B.FTChooseFieldEnum.SUCCESS:this.mode.teamInfo.gameid=this._curSelectGameID,this.mode.teamInfo.playTypeSubid=n.subID,this.mode.teamInfo.partnertype=B.FTTeamTypeEnum.GOLD,this.mode.reqTeamSelectClubType(),this.view.m_Window.m_playTypeChoose.m_field.selectedIndex=p.NOT_SHOW;break;case B.FTChooseFieldEnum.BANKRUPT:console.log(" checkChoose bankrupt");break;case B.FTChooseFieldEnum.LOW:case B.FTChooseFieldEnum.HIGH:var a,i;if(void 0===(a=this.mode.getRecRoomInfoByGameID(this._curSelectGameID,this._isMultPlaza)))return;i=R.RoomModel.instance.getRoomDesc(a.subID);var r;P.UIHelp.instance.hideLoading(),r=B.FTChooseFieldEnum.LOW===o[0]?B.FTChooseFieldEnum.LOW===o[1]&&B.FTChooseFieldEnum.LOW===o[2]?"\u60a8\u548c\u961f\u53cb\u91d1\u5e01\u90fd\u4e0d\u8db3,\u53ef\u4ee5\u53bb ["+i+"] \u8fdb\u884c\u6e38\u620f\u54e6~":B.FTChooseFieldEnum.LOW===o[1]?"\u60a8\u91d1\u5e01\u4e0d\u8db3,\u53ef\u4ee5\u53bb ["+i+"] \u8fdb\u884c\u6e38\u620f\u54e6~":"\u961f\u53cb\u91d1\u5e01\u4e0d\u8db3,\u53ef\u4ee5\u53bb ["+i+"] \u8fdb\u884c\u6e38\u620f\u54e6~":"\u7ec4\u961f\u73a9\u5bb6\u91d1\u5e01\u6570\u5747\u9ad8\u4e8e\u8be5\u573a\u4e0a\u9650,\u5feb\u53bb ["+i+"] \u8fdb\u884c\u6e38\u620f\u5427~",P.UIHelp.instance.showDialogConfirmCancel(r,function(t){t&&(e.mode.teamInfo.gameid=e._curSelectGameID,e.mode.teamInfo.playTypeSubid=a.subID,e.mode.teamInfo.partnertype=B.FTTeamTypeEnum.GOLD,e.mode.reqTeamSelectClubType(),e.view.m_Window.m_playTypeChoose.m_field.selectedIndex=p.NOT_SHOW)});break;case B.FTChooseFieldEnum.ERROR:console.error(" checkChoose error")}E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.CLICK_SELECT_FIELD,Object.assign({field:n.subID},this.mode.bfasParamUserType))},e.prototype.btnDirectInviteClick=function(){y.UIManager.instance.isExist(H.FriendTeamQuickInviteUI)||y.UIManager.instance.open(H.FriendTeamQuickInviteUI)},e.prototype.btnRecordClick=function(){y.UIManager.instance.open(W.FriendTeamRecordUI)},e.prototype.btnQuickStart=function(){var t=this.mode.getBfasPlazaData();E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.CLICK_TEAM_QUICK_START,t);var e=this.view.m_Window.m_cSelectPlayType;e.selectedIndex==B.SelectPlayTypeEnum.CLASSIC_FREE&&(e.selectedIndex=B.SelectPlayTypeEnum.CLASSIC_GOLD),this.startGoldTeamSingle(!0)},e.prototype.btnQuickStartMember=function(){var t=this,e=this.mode.getBfasPlazaData();Object.assign(e,{leader:this.mode.teamInfo.creator}),E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.CLICK_TEAM_QUICK_START_AFTER60,e),this.operateReadyOrNotReady(B.FTReadyStateEnum.CANCEL,function(){if(t.mode.isBankrupt())return tt.BankruptModel.instance.showBankrupt(),void g.EventManager.instance.emit(v.DataEvent.ToastData,"\u91d1\u5e01\u4e0d\u8db3\uff0c\u65e0\u6cd5\u5f00\u59cb\u6e38\u620f");var e;e=t.view.m_cCharType.selectedIndex===s.LEADER_NEW?B.EnterTypeEnum.GOLD_INLINE_SINGLE:B.EnterTypeEnum.TEAM_SINGLE,t.mode.startSingleGameWithQuickStart(t._isMultPlaza,e)})},e.prototype.btnRemind=function(){var t=this.mode.getBfasPlazaData();Object.assign(t,{leader:this.mode.teamInfo.creator}),E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.CLICK_TEAM_REMIND,t),this.mode.friendTeamCallStart()},e.prototype.btnRemindMember=function(){var t=this.mode.getBfasPlazaData();E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.CLICK_TEAM_REMIND_NEW,t),this.mode.friendTeamCallStart(!0)},e.prototype.btnQuickStartHint=function(){var t=this.view.m_Window.m_center.m_btnQuickStartHint.m_cQSHint;t.selectedIndex==m.HIDE?t.selectedIndex=m.SHOW:t.selectedIndex=m.HIDE},e.prototype.btnMicrophone=function(){var t=this.mode.teamInfo.partnerid,e=this.view.m_Window.m_center,n=this.view.m_WindowLeader,o=this.view.m_WindowMember,a=this.mode.isTeamLeader()?this.view.m_cCharType.selectedIndex==s.LEADER_NEW?n.m_btnMicrophone:e.m_btnMicrophone:o.m_btnMicrophone;a.selected=!a.selected,e.m_btnEarphone.selected?$.RealTimeVoiceModel.instance.updateMuteConfig(a.selected,!1):$.RealTimeVoiceModel.instance.joinChat(t.toString())},e.prototype.btnEarphone=function(){var t=this.mode.teamInfo.partnerid,e=this.view.m_Window.m_center,n=this.view.m_WindowLeader,o=this.view.m_WindowMember,a=this.mode.isTeamLeader()?this.view.m_cCharType.selectedIndex==s.LEADER_NEW?n.m_btnEarphone:e.m_btnEarphone:o.m_btnEarphone;a.selected=!a.selected,e.m_btnEarphone.selected?$.RealTimeVoiceModel.instance.exitChat():$.RealTimeVoiceModel.instance.joinChat(t.toString())},e.prototype.onSelectPlayType=function(){if(this.mode.isTeamLeader()){this.mode.teamInfo.gameid=C.GameIDInfo.CLASSIC_GD.id;var t=this.view.m_Window.m_cSelectPlayType.selectedIndex;switch(t){case B.SelectPlayTypeEnum.CLASSIC_FREE:this.mode.teamInfo.playTypeSubid=Y.ClubSubIDConfig.CLASSIC_GD.PRIMARY,this.mode.teamInfo.partnertype=B.FTTeamTypeEnum.FREE;break;case B.SelectPlayTypeEnum.CLASSIC_GOLD:case B.SelectPlayTypeEnum.MULT:var e=this.mode.getRecRoomInfoByGameID(C.GameIDInfo.CLASSIC_GD.id,t===B.SelectPlayTypeEnum.MULT);this.mode.teamInfo.playTypeSubid=e.subID,this.mode.teamInfo.partnertype=B.FTTeamTypeEnum.GOLD}this.mode.reqTeamSelectClubType()}},e.prototype.onBtnLeftTab=function(){if(this.mode.isTeamLeader()){var t=this.view.m_Window.m_cSelectPlayType.selectedIndex;if(t==this._preSelectedPlayIndex)return;this.onSelectPlayType(),E.BfasManager.instance.sendEvt(A.FriendMixTeamPointID.CLICK_SELECT_PLAY_TYPE,Object.assign({playType:t},this.mode.bfasParamUserType))}else g.EventManager.instance.emit(v.DataEvent.ToastData,"\u53ea\u6709\u961f\u957f\u624d\u53ef\u4ee5\u9009\u62e9\u5bf9\u5c40\u7684\u73a9\u6cd5\u548c\u573a\u6b21\u54e6"),this.view.m_Window.m_cSelectPlayType.selectedIndex=this._preSelectedPlayIndex},e.prototype.onClickExit=function(){y.UIManager.instance.isExist(b.DialogUI)&&y.UIManager.instance.close(b.DialogUI),t.prototype.onExitClick.call(this),this.mode.isEnterFromGoldInlineTeam()?(g.EventManager.instance.emit(v.DataEvent.BackHall,Z.HallUITab.GROUND,this.mode.preTempTeamInfo.gameid,this._isMultPlaza),Q.PopupManager.instance.popupOnBackToHall_goldInlineTeam()):g.EventManager.instance.emit(v.DataEvent.BackHall)},e.prototype.onFriendTeamJoinClose=function(){this.mode.isTeamLeader()||this.mode.isFriendTeamReady()||!this.mode.preStateIsReady||this.operateReadyOrNotReady(B.FTReadyStateEnum.READY)},e.prototype.onLoginReqLocationSuccess=function(){var t=G.UserInfoModel.instance.getUserLocation();if(t&&t.subid){var e=function(){R.RoomModel.instance.haveRoomBackGame()};y.UIManager.instance.open(b.DialogUI).then(function(t){t.initConfirm({content:"\u60a8\u5df2\u5728\u6e38\u620f\u4e2d\uff0c\u662f\u5426\u524d\u5f80?"}),t.confirmAction=e,t.closeAction=e})}},e.prototype.onClickQIRight=function(){this.requireScope(function(){C.DataBfConfig.isWebPlatform()&&g.EventManager.instance.emit(v.DataEvent.ToastData,"\u5f53\u524d\u4e0d\u652f\u6301\u9080\u8bf7\u597d\u53cb\u54e6~")})},e.prototype.onClickQIRefresh=function(){this.mode.showQuickFriends()},e.prototype.onShareToFriend=function(t){if(this.view.m_cCharType.selectedIndex!=s.LEADER_NEW){console.log("FriendTeamUI onShareToFriend succeed: ",t);var e=Object.assign(this.mode.bfasParam,this.mode.bfasTeamIdNSubId);Object.assign(e,{teamUIType:this.view.m_cCharType.selectedIndex});var n=t?A.FriendMixTeamPointID.DIRECT_INVITE_SUCCESS:A.FriendMixTeamPointID.DIRECT_INVITE_FAIL;E.BfasManager.instance.sendEvt(n,e)}},e.prototype.requireScope=function(t){var e=this;X.PlatformManager.instance.platform.requireScope(J.Scope.friendsList,"\u5f00\u542f\u597d\u53cb\u6743\u9650\u624d\u53ef\u4ee5\u62c9\u53d6\u597d\u53cb\u4fe1\u606f",function(n){e.view&&e.view.m_Window&&(n?(e.updateInviteUI(),e.view.m_Window.m_compQuickInvite.m_state.selectedIndex=f.LIST):(t&&t(),e.view.m_Window.m_compQuickInvite.m_state.selectedIndex=f.AUTHOR))})},e.prototype.updateInviteUI=function(){if(this.view.m_cCharType.selectedIndex==s.LEADER){var t=this.view.m_Window.m_compQuickInvite.m_loaderWx;this.mode.postCloseLayout(),this.mode.postTeamShareArgs(),this.mode.postTeamShareQuery(),this.mode.initShareView(t),this.mode.showQuickFriends()}else this.mode.postCloseLayout()},i([jsClass],e)}(I.FadeUI);n.FriendTeamUI=et,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/UI/BaseUI":"BaseUI","../../Framework/UI/FadeUI":"FadeUI","../Bankrupt/BankruptModel":"BankruptModel","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataConstant":"DataConstant","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataSpineAni":"DataSpineAni","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Platform/Const/PlatformEventType":"PlatformEventType","../Base/Module/Platform/Const/Scope":"Scope","../Base/Module/Platform/PlatformManager":"PlatformManager","../Base/Module/Popup/PopupManager":"PopupManager","../Base/Module/Room/ClubConfig":"ClubConfig","../Base/Module/Room/RoomModel":"RoomModel","../Base/Module/Share/ShareManager":"ShareManager","../Base/Utils/UtilCC":"UtilCC","../Base/Utils/UtilString":"UtilString","../Base/Utils/UtilTool":"UtilTool","../Base/Utils/UtilView":"UtilView","../Base/View/Common/DialogUI":"DialogUI","../Base/View/UIHelp":"UIHelp","../FeedBack/FeedBackSuggUI":"FeedBackSuggUI","../Game/Common/RealTimeVoice/RealTimeVoiceModel":"RealTimeVoiceModel","../Hall/HallModel":"HallModel","../Hall/HallUI":"HallUI","../HallGround/HallGroundModel":"HallGroundModel","../Rule/RuleUI":"RuleUI","../Shop/ShopConfig":"ShopConfig","../Shop/ShopModel":"ShopModel","../UserInfo/UserInfoModel":"UserInfoModel","./FriendTeamGuideUI":"FriendTeamGuideUI","./FriendTeamJoinUI":"FriendTeamJoinUI","./FriendTeamModel":"FriendTeamModel","./FriendTeamQuickInviteUI":"FriendTeamQuickInviteUI","./FriendTeamRecordUI":"FriendTeamRecordUI"}],GDProtocol:[function(t,e,n){"use strict";cc._RF.push(e,"21ce4+nYD9JM65w0yeRsIw8","GDProtocol");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.GDProtocol=void 0;var i=t("../../../../Base/Module/Network/Base/ProtocolManager"),r=t("../../../../Base/Module/Network/Base/BaseGameProtocol"),s=t("../../../Common/PlayerInfoModel");(function(t){var e,n=i.ProtocolManager.instance;(function(t){t[t.GLXY_FIRST_ID=11280]="GLXY_FIRST_ID",t[t.GLXY_LOGICDATA=11281]="GLXY_LOGICDATA",t[t.GLXY_GAMEDATA=11282]="GLXY_GAMEDATA",t[t.GLXY_NOWROUNDINFO=11283]="GLXY_NOWROUNDINFO",t[t.GLXY_CONTRIBUTEDATA=11284]="GLXY_CONTRIBUTEDATA",t[t.GLXY_FIGHTCONTRIBUTE=11285]="GLXY_FIGHTCONTRIBUTE",t[t.GLXY_PARTNERHANDCARD=11286]="GLXY_PARTNERHANDCARD",t[t.GLXY_RESULT=11287]="GLXY_RESULT",t[t.GLXY_ENDTOTALGAME=11288]="GLXY_ENDTOTALGAME",t[t.GLXY_LABELCARDPARTNER=11289]="GLXY_LABELCARDPARTNER",t[t.GLXY_MATCHINFOR=11290]="GLXY_MATCHINFOR",t[t.GLXY_DLMATCHRULE=11291]="GLXY_DLMATCHRULE",t[t.GLXY_DLMATCHWINLOST=11292]="GLXY_DLMATCHWINLOST",t[t.GLXY_GDBOMBMULT=11294]="GLXY_GDBOMBMULT",t[t.GLXY_PASSLEVELAWARD=11295]="GLXY_PASSLEVELAWARD",t[t.GLXY_ESCAPEPUNISH=11296]="GLXY_ESCAPEPUNISH",t[t.GLXY_OUTCARDCOUNT=11297]="GLXY_OUTCARDCOUNT",t[t.GLXY_NEWRECVCARDS=11298]="GLXY_NEWRECVCARDS",t[t.GLXY_SELFCREATEALLSCORE=11299]="GLXY_SELFCREATEALLSCORE",t[t.GLXY_SELFCREATESCORE=11300]="GLXY_SELFCREATESCORE",t[t.GLXY_SELFCREATETOTALSCORE=11301]="GLXY_SELFCREATETOTALSCORE",t[t.GLXY_DISMISSTABLE=11302]="GLXY_DISMISSTABLE",t[t.GLXY_CONFIRMDISMISSTABLE=11303]="GLXY_CONFIRMDISMISSTABLE",t[t.GLXY_DEALDISMISSTABLE=11304]="GLXY_DEALDISMISSTABLE",t[t.GLXY_RESPDISMISSTABLE=11305]="GLXY_RESPDISMISSTABLE",t[t.GLXY_DISMISSTABLERESULT=11306]="GLXY_DISMISSTABLERESULT",t[t.GLXY_NOTICE_CHANGE_SEAT=11307]="GLXY_NOTICE_CHANGE_SEAT",t[t.GLXY_PLAYER_SELECT_CARD=11308]="GLXY_PLAYER_SELECT_CARD",t[t.GLXY_SELF_SELECT_CARD=11310]="GLXY_SELF_SELECT_CARD",t[t.GLXY_ROLE_CAST_SKILL=11311]="GLXY_ROLE_CAST_SKILL",t[t.GLXY_CONTINUEROUNDDATA=11312]="GLXY_CONTINUEROUNDDATA",t[t.GLXY_TUO_PAI_SCORE=11313]="GLXY_TUO_PAI_SCORE",t[t.GLXY_TUOPAI_RANK=11314]="GLXY_TUOPAI_RANK",t[t.GLXY_TUOPAI_FOLLOW_SEAT=11315]="GLXY_TUOPAI_FOLLOW_SEAT",t[t.GLXY_MIXPASSA_REQ_DISMISS=11316]="GLXY_MIXPASSA_REQ_DISMISS",t[t.GLXY_MIXPASSA_RESP_DISMISS=11317]="GLXY_MIXPASSA_RESP_DISMISS",t[t.GLXY_MIXPASSA_DISMISS_RESULT=11318]="GLXY_MIXPASSA_DISMISS_RESULT",t[t.GLXY_MIXPASSA_BIG_RESULT=11319]="GLXY_MIXPASSA_BIG_RESULT",t[t.GLXY_MIXPASSA_TOTALSCORE=11320]="GLXY_MIXPASSA_TOTALSCORE",t[t.GLXY_CALL_MULT=11321]="GLXY_CALL_MULT",t[t.GLXY_RECORDER_DATA=11322]="GLXY_RECORDER_DATA",t[t.GLXY_PARTNERHANDCARD2=11323]="GLXY_PARTNERHANDCARD2",t[t.GLXY_TEST_ENDGAME=11400]="GLXY_TEST_ENDGAME"})(e=t.xyid||(t.xyid={}));var o=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_LOGICDATA,n.baseGold=0,n.servicePay=0,n.totalPan=0,n.nowPan=0,n.gameType=0,n.rule=0,n.isFixLevel=!1,n.shouDong=0,n.ipBan=0,n.trust=0,n.strRule=0,n.canPlayRoundNums=0,n.nowPlayRoundNums=0,n.isBXP=0,n.isMult=0,n.isUpSpec=0,n.isVoIP=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.baseGold=e.readInt(),this.servicePay=e.readInt(),this.totalPan=e.readInt(),e.avail()&&(this.nowPan=e.readInt()),e.avail()&&(this.gameType=e.readInt()),e.avail()&&(this.rule=e.readInt()),e.avail()&&(this.isFixLevel=e.readBool()),e.avail()&&(this.shouDong=e.readInt()),e.avail()&&(this.ipBan=e.readInt()),e.avail()&&(this.trust=e.readInt()),e.avail()&&(this.strRule=e.readInt()),e.avail()&&(this.canPlayRoundNums=e.readInt()),e.avail()&&(this.nowPlayRoundNums=e.readInt()),e.avail()&&(this.isBXP=e.readInt()),e.avail()&&(this.isMult=e.readInt()),e.avail()&&(this.isUpSpec=e.readInt()),e.avail()&&(this.isVoIP=e.readInt()),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeInt(this.baseGold),t.writeInt(this.servicePay),t.writeInt(this.totalPan),t.writeInt(this.nowPan),t.writeInt(this.gameType),t.writeInt(this.rule),t.writeBool(this.isFixLevel),t.writeInt(this.shouDong),t.writeInt(this.ipBan),t.writeInt(this.trust),t.writeInt(this.strRule),t.writeInt(this.canPlayRoundNums),t.writeInt(this.nowPlayRoundNums),t.writeInt(this.isBXP),t.writeInt(this.isMult),t.writeInt(this.isUpSpec),t.writeInt(this.isVoIP),t},n}(r.BaseGameProtocol);t.msgLogicData=o,n.setGameProtocol(e.GLXY_LOGICDATA,o);var c=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_GAMEDATA,n.level=0,n.team=0,n.rank=0,n.seat=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.level=e.readByte(),this.team=e.readByte(),this.rank=e.readByte(),this.seat=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.level),t.writeByte(this.team),t.writeByte(this.rank),t.writeByte(this.seat),t},n}(r.BaseGameProtocol);t.msgGameData=c,n.setGameProtocol(e.GLXY_GAMEDATA,c);var l=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_NOWROUNDINFO,n.nowRoundLevel=0,n.nowRoundTeam=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.nowRoundLevel=e.readByte(),this.nowRoundTeam=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.nowRoundLevel),t.writeByte(this.nowRoundTeam),t},n}(r.BaseGameProtocol);t.msgNowRoundInfo=l,n.setGameProtocol(e.GLXY_NOWROUNDINFO,l);var u=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_CONTRIBUTEDATA,n.cardValue=0,n.seat=0,n.contributeType=0,n.obtainSeat=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.cardValue=e.readByte(),this.seat=e.readByte(),this.contributeType=e.readByte(),this.obtainSeat=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.cardValue),t.writeByte(this.seat),t.writeByte(this.contributeType),t.writeByte(this.obtainSeat),t},n}(r.BaseGameProtocol);t.msgContributeData=u,n.setGameProtocol(e.GLXY_CONTRIBUTEDATA,u);var d=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_FIGHTCONTRIBUTE,n.fightContributeSeatNum1=0,n.fightContributeSeatNum2=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.fightContributeSeatNum1=e.readByte(),this.fightContributeSeatNum2=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.fightContributeSeatNum1),t.writeByte(this.fightContributeSeatNum2),t},n}(r.BaseGameProtocol);t.msgFightContribute=d,n.setGameProtocol(e.GLXY_FIGHTCONTRIBUTE,d);var p=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_PARTNERHANDCARD,n.seat=0,n.count=0,n.cards=[],n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.seat=e.readByte(),this.count=e.readByte(),this.cards=e.readByteArr(this.count),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.seat),t.writeByte(this.count),t.writeByteArr(this.cards),t},n}(r.BaseGameProtocol);t.msgPartnerHandCard=p,n.setGameProtocol(e.GLXY_PARTNERHANDCARD,p);var h=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_RESULT,n.nIntegralWinLost=[],n.nWinLost=[],n.nRenWu=[],n.nGuessMult=[],n.nReturnType=[],n.nResultType=[],n.baseMul=0,n.nAwardGoldsValue=[],n.nAwardGoldsSkill=[],n.nTrustPunish=[],n.bWinner=[],n.playRank=[],n.upLevel=0,n.passLevel=0,n}return a(n,t),n.prototype.bistream=function(t,e){e=e||new bf33.ProtocolBistream(t);for(var n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.nIntegralWinLost[n]=e.readInt();for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.nWinLost[n]=e.readInt();for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.nRenWu[n]=e.readByte();if(e.avail())for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.nGuessMult[n]=e.readInt();if(e.avail())for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.nReturnType[n]=e.readInt();if(e.avail())for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.nResultType[n]=e.readInt();if(e.avail()&&(this.baseMul=e.readInt()),e.avail())for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.nAwardGoldsValue[n]=e.readInt();if(e.avail())for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.nAwardGoldsSkill[n]=e.readByte();if(e.avail())for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.nTrustPunish[n]=e.readShort();if(e.avail())for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.bWinner[n]=e.readBool();if(e.avail())for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.playRank[n]=e.readInt();return e.avail()&&(this.upLevel=e.readInt()),e.avail()&&(this.passLevel=e.readInt()),e},n.prototype.bostream=function(t){t=t||new bf33.ProtocolBostream;for(var e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.nIntegralWinLost[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.nWinLost[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeByte(this.nRenWu[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.nGuessMult[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.nReturnType[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.nResultType[e]);for(t.writeInt(this.baseMul),e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.nAwardGoldsValue[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeByte(this.nAwardGoldsSkill[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeShort(this.nTrustPunish[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeBool(this.bWinner[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.playRank[e]);return t.writeInt(this.upLevel),t.writeInt(this.passLevel),t},n}(r.BaseGameProtocol);t.msgResult=h,n.setGameProtocol(e.GLXY_RESULT,h);var _=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_ENDTOTALGAME,n.nFlag=0,n.nTotalIntegralWinLost=[],n.nTotalWinLost=[],n}return a(n,t),n.prototype.bistream=function(t,e){e=e||new bf33.ProtocolBistream(t),this.nFlag=e.readByte();for(var n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.nTotalIntegralWinLost[n]=e.readLong();for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.nTotalWinLost[n]=e.readLong();return e},n.prototype.bostream=function(t){(t=t||new bf33.ProtocolBostream).writeByte(this.nFlag);for(var e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeLong(this.nTotalIntegralWinLost[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeLong(this.nTotalWinLost[e]);return t},n}(r.BaseGameProtocol);t.msgEndTotalGame=_,n.setGameProtocol(e.GLXY_ENDTOTALGAME,_);var f=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_LABELCARDPARTNER,n.labelCardValue=0,n.labelCardPartnerNum1=0,n.labelCardPartnerNum2=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.labelCardValue=e.readByte(),this.labelCardPartnerNum1=e.readByte(),this.labelCardPartnerNum2=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.labelCardValue),t.writeByte(this.labelCardPartnerNum1),t.writeByte(this.labelCardPartnerNum2),t},n}(r.BaseGameProtocol);t.msgLabelCardPartner=f,n.setGameProtocol(e.GLXY_LABELCARDPARTNER,f);var m=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_MATCHINFOR,n.integral=[],n.nowPanIntegral=[],n.matchRank=[],n.totalRound=0,n.totalPan=0,n.nowRound=0,n.nowPan=0,n.promotion=!1,n}return a(n,t),n.prototype.bistream=function(t,e){e=e||new bf33.ProtocolBistream(t);for(var n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.integral[n]=e.readInt();for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.nowPanIntegral[n]=e.readInt();for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.matchRank[n]=e.readInt();return this.totalRound=e.readByte(),this.totalPan=e.readByte(),this.nowRound=e.readByte(),this.nowPan=e.readByte(),this.promotion=e.readBool(),e},n.prototype.bostream=function(t){t=t||new bf33.ProtocolBostream;for(var e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.integral[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.nowPanIntegral[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.matchRank[e]);return t.writeByte(this.totalRound),t.writeByte(this.totalPan),t.writeByte(this.nowRound),t.writeByte(this.nowPan),t.writeBool(this.promotion),t},n}(r.BaseGameProtocol);t.msgMatchInfo=m,n.setGameProtocol(e.GLXY_MATCHINFOR,m);var g=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_NEWRECVCARDS,n.seat=0,n.data="",n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.seat=e.readByte(),this.data=e.readString(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.seat),t.writeString(this.data),t},n}(r.BaseGameProtocol);t.msgNewRecvCards=g,n.setGameProtocol(e.GLXY_NEWRECVCARDS,g);var y=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_GDBOMBMULT,n.nSeat=0,n.nAddMul=0,n.nType=0,n.nMult=0,n.nBombMul=0,n.nSeat=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.nAddMul=e.readShort(),this.nType=e.readByte(),this.nMult=e.readInt(),e.avail()&&(this.nBombMul=e.readLong(),this.nSeat=e.readInt()),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeShort(this.nAddMul),t.writeByte(this.nType),t.writeInt(this.nMult),t},n}(r.BaseGameProtocol);t.msgGDMult=y,n.setGameProtocol(e.GLXY_GDBOMBMULT,y);var I=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_PASSLEVELAWARD,n.level=0,n.passType=0,n.award=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.level=e.readByte(),this.passType=e.readByte(),this.award=e.readInt(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.level),t.writeByte(this.passType),t.writeInt(this.award),t},n}(r.BaseGameProtocol);t.msgPassAwardLevel=I,n.setGameProtocol(e.GLXY_PASSLEVELAWARD,I);var C=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_ESCAPEPUNISH,n.punishMult=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.punishMult=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.punishMult),t},n}(r.BaseGameProtocol);t.msgEscapePunish=C,n.setGameProtocol(e.GLXY_ESCAPEPUNISH,C);var M=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_OUTCARDCOUNT,n.seat=0,n.card3count=0,n.card4count=0,n.card5count=0,n.card6count=0,n.card7count=0,n.card8count=0,n.card9count=0,n.card10count=0,n.cardJcount=0,n.cardQcount=0,n.cardKcount=0,n.cardAcount=0,n.card2count=0,n.cardFcount=0,n.cardZcount=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.seat=e.readShort(),this.card3count=e.readByte(),this.card4count=e.readByte(),this.card5count=e.readByte(),this.card6count=e.readByte(),this.card7count=e.readByte(),this.card8count=e.readByte(),this.card9count=e.readByte(),this.card10count=e.readByte(),this.cardJcount=e.readByte(),this.cardQcount=e.readByte(),this.cardKcount=e.readByte(),this.cardAcount=e.readByte(),this.card2count=e.readByte(),this.cardFcount=e.readByte(),this.cardZcount=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeShort(this.seat),t.writeByte(this.card3count),t.writeByte(this.card4count),t.writeByte(this.card5count),t.writeByte(this.card6count),t.writeByte(this.card7count),t.writeByte(this.card8count),t.writeByte(this.card9count),t.writeByte(this.card10count),t.writeByte(this.cardJcount),t.writeByte(this.cardQcount),t.writeByte(this.cardKcount),t.writeByte(this.cardAcount),t.writeByte(this.card2count),t.writeByte(this.cardFcount),t.writeByte(this.cardZcount),t},n}(r.BaseGameProtocol);t.msgOutcardCount=M,n.setGameProtocol(e.GLXY_OUTCARDCOUNT,M);var v=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_SELFCREATEALLSCORE,n.pan=0,n.score=[],n.allScore=[],n.boomNums=[],n.isOver=!1,n.tryPassTargetLevelStatus=0,n}return a(n,t),n.prototype.bistream=function(t,e){e=e||new bf33.ProtocolBistream(t),this.pan=e.readInt();for(var n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.score[n]=e.readInt();for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.allScore[n]=e.readInt();for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.boomNums[n]=e.readInt();return this.isOver=e.readBool(),e.avail()&&(this.tryPassTargetLevelStatus=e.readShort()),e},n.prototype.bostream=function(t){(t=t||new bf33.ProtocolBostream).writeInt(this.pan);for(var e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.score[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.allScore[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.boomNums[e]);return t.writeBool(this.isOver),t.writeShort(this.tryPassTargetLevelStatus),t},n}(r.BaseGameProtocol);t.msgSelfCreateAllScore=v,n.setGameProtocol(e.GLXY_SELFCREATEALLSCORE,v);var E=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_SELFCREATESCORE,n.pan=0,n.score=[],n}return a(n,t),n.prototype.bistream=function(t,e){e=e||new bf33.ProtocolBistream(t),this.pan=e.readInt();for(var n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.score[n]=e.readInt();return e},n.prototype.bostream=function(t){(t=t||new bf33.ProtocolBostream).writeInt(this.pan);for(var e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.score[e]);return t},n}(r.BaseGameProtocol);t.msgSelfCreateScore=E,n.setGameProtocol(e.GLXY_SELFCREATESCORE,E);var A=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_SELFCREATETOTALSCORE,n.pan=0,n.score=[],n.rankOne=[],n.winNums=[],n.loseNums=[],n.time=0,n.isDisMiss=!1,n.teamLev=[],n.teams=[],n}return a(n,t),n.prototype.bistream=function(t,e){e=e||new bf33.ProtocolBistream(t),this.pan=e.readInt();for(var n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.score[n]=e.readInt();for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.rankOne[n]=e.readInt();for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.winNums[n]=e.readInt();for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.loseNums[n]=e.readInt();for(this.time=e.readLong(),this.isDisMiss=e.readBool(),n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)e.avail()&&(this.teamLev[n]=e.readInt());for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)e.avail()&&(this.teams[n]=e.readInt());return e},n.prototype.bostream=function(t){(t=t||new bf33.ProtocolBostream).writeInt(this.pan);for(var e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.score[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.rankOne[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.winNums[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.loseNums[e]);for(t.writeLong(this.time),t.writeBool(this.isDisMiss),e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.teamLev[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.teams[e]);return t},n}(r.BaseGameProtocol);t.msgSelfCreateTotalScore=A,n.setGameProtocol(e.GLXY_SELFCREATETOTALSCORE,A);var P=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_NOTICE_CHANGE_SEAT,n.numID1=0,n.brandID1=0,n.srcseat1=0,n.numID2=0,n.brandID2=0,n.srcseat2=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.numID1=e.readInt(),this.brandID1=e.readInt(),this.srcseat1=e.readInt(),this.numID2=e.readInt(),this.brandID2=e.readInt(),this.srcseat2=e.readInt(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeInt(this.numID1),t.writeInt(this.brandID1),t.writeInt(this.srcseat1),t.writeInt(this.numID2),t.writeInt(this.brandID2),t.writeInt(this.srcseat2),t},n}(r.BaseGameProtocol);t.msgNoticeChangeSeat=P,n.setGameProtocol(e.GLXY_NOTICE_CHANGE_SEAT,P);var b=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_SELF_SELECT_CARD,n.seat=0,n.isSelectCard=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.seat=e.readShort(),this.isSelectCard=e.readInt(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeShort(this.seat),t.writeInt(this.isSelectCard),t},n}(r.BaseGameProtocol);t.msgSelectCard=b,n.setGameProtocol(e.GLXY_SELF_SELECT_CARD,b);var U=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_ROLE_CAST_SKILL,n.seat=0,n.actorid=0,n.skillid=0,n.skillstate=0,n.skillvalue=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.seat=e.readByte(),this.actorid=e.readInt(),this.skillid=e.readInt(),this.skillstate=e.readInt(),this.skillvalue=e.readInt(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.seat),t.writeInt(this.actorid),t.writeInt(this.skillid),t.writeInt(this.skillstate),t.writeInt(this.skillvalue),t},n}(r.BaseGameProtocol);t.msgRoleCastSkillData=U,n.setGameProtocol(e.GLXY_ROLE_CAST_SKILL,U);var S=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_CONTINUEROUNDDATA,n.canPlayRoundNums=0,n.nowPlayRoundNums=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.canPlayRoundNums=e.readInt(),this.nowPlayRoundNums=e.readInt(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeInt(this.canPlayRoundNums),t.writeInt(this.nowPlayRoundNums),t},n}(r.BaseGameProtocol);t.msgContinueRoundData=S,n.setGameProtocol(e.GLXY_CONTINUEROUNDDATA,S);var T=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_TUO_PAI_SCORE,n.nowRoundTuoPaiScore=[],n.playerLaveHandCardsStr=[],n.isNowPanGameEnd=!1,n}return a(n,t),n.prototype.bistream=function(t,e){e=e||new bf33.ProtocolBistream(t);for(var n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.nowRoundTuoPaiScore[n]=e.readInt();return e.avail()&&(this.playerLaveHandCardsStr=e.readByteArr()),e.avail&&(this.isNowPanGameEnd=e.readBool()),e},n.prototype.bostream=function(t){t=t||new bf33.ProtocolBostream;for(var e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.nowRoundTuoPaiScore[e]);return t.writeByteArr(this.playerLaveHandCardsStr),t.writeBool(this.isNowPanGameEnd),t},n}(r.BaseGameProtocol);t.msgTuoPaiScore=T,n.setGameProtocol(e.GLXY_TUO_PAI_SCORE,T);var R=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_TUOPAI_RANK,n.rank=0,n.seat=0,n.tuopaiScore=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.rank=e.readByte(),e.avail()&&(this.seat=e.readByte()),e.avail&&(this.tuopaiScore=e.readByte()),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.rank),t.writeByte(this.seat),t.writeByte(this.tuopaiScore),t},n}(r.BaseGameProtocol);t.msgTuoPaiRank=R,n.setGameProtocol(e.GLXY_TUOPAI_RANK,R);var w=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_TUOPAI_FOLLOW_SEAT,n.followSeat=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.followSeat=e.readByte(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.followSeat),t},n}(r.BaseGameProtocol);t.msgTuoPaiFollowSeat=w,n.setGameProtocol(e.GLXY_TUOPAI_FOLLOW_SEAT,w);var D=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_MIXPASSA_REQ_DISMISS,n.seat=0,n.flag=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.seat=e.readInt(),this.flag=e.readInt(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeInt(this.seat),t.writeInt(this.flag),t},n}(r.BaseGameProtocol);t.msgMixPassAReqDismiss=D,n.setGameProtocol(e.GLXY_MIXPASSA_REQ_DISMISS,D);var O=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_MIXPASSA_RESP_DISMISS,n.remainingTime=0,n.state=[],n.winLost=[],n.trustState=[],n}return a(n,t),n.prototype.bistream=function(t,e){e=e||new bf33.ProtocolBistream(t),this.remainingTime=e.readInt();for(var n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.state[n]=e.readInt();if(e.avail())for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.winLost[n]=e.readInt();if(e.avail())for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.trustState[n]=e.readInt();return e},n.prototype.bostream=function(t){(t=t||new bf33.ProtocolBostream).writeInt(this.remainingTime);for(var e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.state[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.winLost[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.trustState[e]);return t},n}(r.BaseGameProtocol);t.msgMixPassARespDismiss=O,n.setGameProtocol(e.GLXY_MIXPASSA_RESP_DISMISS,O);var L=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_MIXPASSA_DISMISS_RESULT,n.flag=0,n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.flag=e.readInt(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeInt(this.flag),t},n}(r.BaseGameProtocol);t.msgMixPassADismissResult=L,n.setGameProtocol(e.GLXY_MIXPASSA_DISMISS_RESULT,L);var G=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_MIXPASSA_BIG_RESULT,n.isPassAOver=!1,n.winLost=[],n.trustState=[],n.totalScore=[],n.isWiner=[],n}return a(n,t),n.prototype.bistream=function(t,e){if(e=e||new bf33.ProtocolBistream(t),this.isPassAOver=e.readBool(),e.avail())for(var n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.winLost[n]=e.readInt();if(e.avail())for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.trustState[n]=e.readInt();if(e.avail())for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.totalScore[n]=e.readInt();if(e.avail())for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.isWiner[n]=e.readBool();return e},n.prototype.bostream=function(t){(t=t||new bf33.ProtocolBostream).writeBool(this.isPassAOver);for(var e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.winLost[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.trustState[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.totalScore[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeBool(this.isWiner[e]);return t},n}(r.BaseGameProtocol);t.msgMixPassABigResult=G,n.setGameProtocol(e.GLXY_MIXPASSA_BIG_RESULT,G);var B=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_MIXPASSA_TOTALSCORE,n.pan=0,n.totalScore=[],n.smallScore=[],n}return a(n,t),n.prototype.bistream=function(t,e){if(e=e||new bf33.ProtocolBistream(t),this.pan=e.readInt(),this.flag=e.readInt(),e.avail())for(var n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.totalScore[n]=e.readInt();if(e.avail())for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.smallScore[n]=e.readInt();return e},n.prototype.bostream=function(t){(t=t||new bf33.ProtocolBostream).writeInt(this.pan),t.writeInt(this.flag);for(var e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.totalScore[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.smallScore[e]);return t},n}(r.BaseGameProtocol);t.msgMixPassATotalScore=B,n.setGameProtocol(e.GLXY_MIXPASSA_TOTALSCORE,B);var N=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_TEST_ENDGAME,n.testEndGameFlag=0,n.ranks=[],n.trustState=[0,0,0,0],n.extraMults=[1,1,1,1],n}return a(n,t),n.prototype.bistream=function(t,e){if(e=e||new bf33.ProtocolBistream(t),this.testEndGameFlag=e.readInt(),e.avail())for(var n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.ranks[n]=e.readInt();if(e.avail())for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.trustState[n]=e.readInt();if(e.avail())for(n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.extraMults[n]=e.readFloat();return e},n.prototype.bostream=function(t){(t=t||new bf33.ProtocolBostream).writeInt(this.testEndGameFlag);for(var e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.ranks[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeInt(this.trustState[e]);for(e=0;e<s.PlayerInfoModel.instance.getNowGamePlayer();++e)t.writeFloat(this.extraMults[e]);return t},n}(r.BaseGameProtocol);t.msgTestEndGame=N,n.setGameProtocol(e.GLXY_TEST_ENDGAME,N);var F=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_CALL_MULT,n.seat=0,n.callMult=-1,n.totalMult=[1,1,1,1],n.canCallMult=!0,n}return a(n,t),n.prototype.bistream=function(t,e){e=e||new bf33.ProtocolBistream(t),this.seat=e.readShort(),this.callMult=e.readInt();for(var n=0;n<s.PlayerInfoModel.instance.getNowGamePlayer();++n)this.totalMult[n]=e.readFloat();return this.canCallMult=e.readBool(),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeShort(this.seat),t.writeInt(this.callMult),t},n}(r.BaseGameProtocol);t.msgCallMult=F,n.setGameProtocol(e.GLXY_CALL_MULT,F);var k=function(t){function n(){var n=t.call(this)||this;return n.cmdid=e.GLXY_PARTNERHANDCARD2,n.seat=0,n.count=0,n.cards=[],n}return a(n,t),n.prototype.bistream=function(t,e){return e=e||new bf33.ProtocolBistream(t),this.seat=e.readByte(),this.count=e.readByte(),this.cards=e.readByteArr(this.count),e},n.prototype.bostream=function(t){return(t=t||new bf33.ProtocolBostream).writeByte(this.seat),t.writeByte(this.count),t.writeByteArr(this.cards),t},n}(r.BaseGameProtocol);t.msgPartnerHandCard2=k,n.setGameProtocol(e.GLXY_PARTNERHANDCARD2,k)})(n.GDProtocol||(n.GDProtocol={})),cc._RF.pop()},{"../../../../Base/Module/Network/Base/BaseGameProtocol":"BaseGameProtocol","../../../../Base/Module/Network/Base/ProtocolManager":"ProtocolManager","../../../Common/PlayerInfoModel":"PlayerInfoModel"}],GameBoxDelayPannleUI:[function(t,e,n){"use strict";cc._RF.push(e,"0ec25SQEhpHa7Lm6YRFRgBg","GameBoxDelayPannleUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameBoxDelayPannleUI=void 0;var r,s=t("../../../../Framework/Manager/EventManager"),c=t("../../../../Framework/UI/FadeUI"),l=t("../../../Base/Data/DataEvent"),u=t("../../../Base/Module/BfAnalytics/BfasManager"),d=t("../../../Base/Module/BfAnalytics/DataPointID"),p=t("../../../UserInfo/UserInfoModel"),h=t("../../Common/GameCommonModel"),_=t("../../Common/PlayerInfoModel"),f=t("../GameEvent");(function(t){t[t.SELF_REQ=0]="SELF_REQ",t[t.OTHER_REQ=1]="OTHER_REQ"})(r||(r={}));var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._cutDownTimer=null,e}return a(e,t),Object.defineProperty(e,"willClearOnDestroy",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.getPkgName=function(){return"GameSceneUI"},e.getCompName=function(){return"BoxDelayHintMainPanel"},e.prototype.setView=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this._view=t;var o=e[0];this._delayNodePos=o},e.prototype.onLoad=function(){this.initListener(),this.initUI()},e.prototype.initListener=function(){s.EventManager.instance.on(l.DataEvent.RefreshDelayPannelInfo,this,this.refreshPannleInfo),this.view.m_Window.m_btnCancel.onClick(this.onExitHide,this),this.view.m_Window.m_btnOk.onClick(this.onBtnOk,this),this.view.m_Window.m_btnReject.onClick(this.onBtnReject,this),this.view.m_Window.m_btnAgree.onClick(this.onBtnAgree,this)},e.prototype.onExitHide=function(){this.stopCutDownTimer(),t.prototype.onExitClick.call(this)},e.prototype.initUI=function(){this.view.m_Window.setPosition(this._delayNodePos.x,this._delayNodePos.y+70)},e.prototype.init=function(t){this.setPannelBtnController(!0),this.showHintText(t)},e.prototype.setPannelBtnController=function(t){this.view.m_Window.m_c_selfPanel.selectedIndex=t?r.SELF_REQ:r.OTHER_REQ},e.prototype.showHintText=function(t){this.view.m_Window.m_txtHint.text=t},e.prototype.refreshPannleInfo=function(t,e){this.setPannelBtnController(!1),this.cutDownTimeBySecond(t.remaintime),this.refreshDelayUI(t,e)},e.prototype.refreshDelayUI=function(t,e){if(t.numid===p.UserInfoModel.instance.userInfo.numID&&1===t.state&&0===t.userstate)s.EventManager.instance.emit(f.GameEvent.SHOW_PROLONGBOX_HINT,!0,"\u5ef6\u957f\u5bf9\u5c40\u8bf7\u6c42\u5df2\u53d1\u8d77\uff0c\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u5e94\u7b54\u4e2d..."),s.EventManager.instance.emit(f.GameEvent.BOXROOM_DELAY_BTN_ENABLE,!1),this.onExitHide();else if(t.numid===p.UserInfoModel.instance.userInfo.numID&&1===t.state&&1===t.userstate)s.EventManager.instance.emit(f.GameEvent.SHOW_PROLONGBOX_HINT,!0,"\u60a8\u5df2\u540c\u610f\u5ef6\u957f\u5bf9\u5c40\uff0c\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u5e94\u7b54\u4e2d..."),s.EventManager.instance.emit(f.GameEvent.BOXROOM_DELAY_BTN_ENABLE,!1),this.onExitHide();else if(3===t.state||4===t.state)u.BfasManager.instance.evt(d.BoxRoomPointID.DELAY_GAME_SUCCESS.eventid,null,!0,d.BoxRoomPointID.DELAY_GAME_SUCCESS.eventName),s.EventManager.instance.emit(l.DataEvent.ToastData,"\u5bf9\u5c40\u5ef6\u957f\u6210\u529f"),s.EventManager.instance.emit(f.GameEvent.SHOW_PROLONGBOX_HINT,!1),s.EventManager.instance.emit(f.GameEvent.PROLONGBOX_SUCCESS,!0),s.EventManager.instance.emit(f.GameEvent.BOXROOM_DELAY_BTN_ENABLE,!0),this.onExitHide();else if(5===t.state)u.BfasManager.instance.evt(d.BoxRoomPointID.DELAY_GAME_FAIL.eventid,null,!0,d.BoxRoomPointID.DELAY_GAME_FAIL.eventName),s.EventManager.instance.emit(l.DataEvent.ToastData,"\u6e38\u620f\u5df2\u7ed3\u675f\uff0c\u5ef6\u957f\u5bf9\u5c40\u5931\u8d25"),s.EventManager.instance.emit(f.GameEvent.SHOW_PROLONGBOX_HINT,!1),s.EventManager.instance.emit(f.GameEvent.BOXROOM_DELAY_BTN_ENABLE,!0),this.onExitHide();else if(6===t.state)u.BfasManager.instance.evt(d.BoxRoomPointID.DELAY_GAME_FAIL.eventid,null,!0,d.BoxRoomPointID.DELAY_GAME_FAIL.eventName),s.EventManager.instance.emit(l.DataEvent.ToastData,"\u56e0\u90e8\u5206\u73a9\u5bb6\u7248\u672c\u8f83\u65e7\uff0c\u65e0\u6cd5\u5ef6\u957f\u5bf9\u5c40"),s.EventManager.instance.emit(f.GameEvent.SHOW_PROLONGBOX_HINT,!1),s.EventManager.instance.emit(f.GameEvent.BOXROOM_DELAY_BTN_ENABLE,!0),this.onExitHide();else if(7===t.state)u.BfasManager.instance.evt(d.BoxRoomPointID.DELAY_GAME_FAIL.eventid,null,!0,d.BoxRoomPointID.DELAY_GAME_FAIL.eventName),s.EventManager.instance.emit(l.DataEvent.ToastData,"\u623f\u95f4\u5df2\u89e3\u6563\uff0c\u5ef6\u957f\u5bf9\u5c40\u5931\u8d25"),s.EventManager.instance.emit(f.GameEvent.SHOW_PROLONGBOX_HINT,!1),s.EventManager.instance.emit(f.GameEvent.BOXROOM_DELAY_BTN_ENABLE,!0),this.onExitHide();else if(t.numid===p.UserInfoModel.instance.userInfo.numID&&2===t.userstate)u.BfasManager.instance.evt(d.BoxRoomPointID.DELAY_GAME_REJECT.eventid,null,!0,d.BoxRoomPointID.DELAY_GAME_REJECT.eventName),s.EventManager.instance.emit(l.DataEvent.ToastData,"\u60a8\u5df2\u62d2\u7edd\u4e86\u5ef6\u957f\u5bf9\u5c40"),s.EventManager.instance.emit(f.GameEvent.SHOW_PROLONGBOX_HINT,!1),s.EventManager.instance.emit(f.GameEvent.BOXROOM_DELAY_BTN_ENABLE,!0),this.onExitHide();else if(t.numid!==p.UserInfoModel.instance.userInfo.numID&&2===t.userstate)(n=_.PlayerInfoModel.instance.getPlayerByNumid(t.numid))&&(u.BfasManager.instance.evt(d.BoxRoomPointID.DELAY_GAME_REJECT.eventid,null,!0,d.BoxRoomPointID.DELAY_GAME_REJECT.eventName),s.EventManager.instance.emit(l.DataEvent.ToastData,"\u73a9\u5bb6["+(n.nickname||"")+"]\u62d2\u7edd\u4e86\u5ef6\u957f\u5bf9\u5c40")),s.EventManager.instance.emit(f.GameEvent.SHOW_PROLONGBOX_HINT,!1),s.EventManager.instance.emit(f.GameEvent.BOXROOM_DELAY_BTN_ENABLE,!0),this.onExitHide();else if(t.numid!==p.UserInfoModel.instance.userInfo.numID&&1===t.state&&0===t.userstate){var n;if(n=_.PlayerInfoModel.instance.getPlayerByNumid(t.numid)){var o="\u73a9\u5bb6["+(n.nickname||"")+"]\u9080\u8bf7\u60a8\u672c\u8f6e\u6e38\u620f\u7ed3\u675f\u540e"+e;this.showHintText(o)}else this.showHintText("\u6709\u73a9\u5bb6\u9080\u8bf7\u60a8\u672c\u8f6e\u6e38\u620f\u7ed3\u675f\u540e"+e);s.EventManager.instance.emit(f.GameEvent.SHOW_PROLONGBOX_HINT,!1),s.EventManager.instance.emit(f.GameEvent.BOXROOM_DELAY_BTN_ENABLE,!1)}},e.prototype.onBtnOk=function(){this.onReqDelayGame(),this.onExitHide()},e.prototype.onBtnReject=function(){h.GameCommonModel.instance.reqProlongBox(h.ReqProlongBoxEnum.FLAG_REFUSE),this.onExitHide()},e.prototype.onBtnAgree=function(){h.GameCommonModel.instance.reqProlongBox(h.ReqProlongBoxEnum.FLAG_AGREE),this.onExitHide()},e.prototype.onReqDelayGame=function(){h.GameCommonModel.instance.reqProlongBox(h.ReqProlongBoxEnum.FLAG_REQ)},e.prototype.cutDownTimeBySecond=function(t){var e=this;this.updateSureBtnByTime(t),this.stopCutDownTimer(),this._cutDownTimer=setInterval(function(){t=Math.max(t-1,0),e.updateSureBtnByTime(t),0===t&&(e.stopCutDownTimer(),e.onBtnAgree())},1e3)},e.prototype.updateSureBtnByTime=function(t){void 0!==t&&(this.view.m_Window.m_btnAgree.text="\u540c\u610f"+t.toString()+"s")},e.prototype.stopCutDownTimer=function(){this._cutDownTimer&&(clearTimeout(this._cutDownTimer),this._cutDownTimer=null)},i([jsClass],e)}(c.FadeUI);n.GameBoxDelayPannleUI=m,cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/UI/FadeUI":"FadeUI","../../../Base/Data/DataEvent":"DataEvent","../../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../../UserInfo/UserInfoModel":"UserInfoModel","../../Common/GameCommonModel":"GameCommonModel","../../Common/PlayerInfoModel":"PlayerInfoModel","../GameEvent":"GameEvent"}],GameCardUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"0f44cC+t9RA+58PIk2VdrlR","GameCardUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./GameCardUI_HandCardUI"),a=t("./GameCardUI_HandCardUI_Heng"),i=t("./GameCardUI_HandCardUI_Shu"),r=t("./GameCardUI_SelfHandCards"),s=t("./GameCardUI_MainPanel"),c=t("./GameCardUI_SelectCardsPanel"),l=t("./GameCardUI_TestSelfHandCards"),u=t("./GameCardUI_OutCards_Right"),d=t("./GameCardUI_OutCards_Top"),p=t("./GameCardUI_CardUI_Out"),h=t("./GameCardUI_OutCards_Left"),_=t("./GameCardUI_OutCards_Self"),f=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default),fgui.UIObjectFactory.setExtension(l.default.URL,l.default),fgui.UIObjectFactory.setExtension(u.default.URL,u.default),fgui.UIObjectFactory.setExtension(d.default.URL,d.default),fgui.UIObjectFactory.setExtension(p.default.URL,p.default),fgui.UIObjectFactory.setExtension(h.default.URL,h.default),fgui.UIObjectFactory.setExtension(_.default.URL,_.default)},t}();n.default=f,cc._RF.pop()},{"./GameCardUI_CardUI_Out":"GameCardUI_CardUI_Out","./GameCardUI_HandCardUI":"GameCardUI_HandCardUI","./GameCardUI_HandCardUI_Heng":"GameCardUI_HandCardUI_Heng","./GameCardUI_HandCardUI_Shu":"GameCardUI_HandCardUI_Shu","./GameCardUI_MainPanel":"GameCardUI_MainPanel","./GameCardUI_OutCards_Left":"GameCardUI_OutCards_Left","./GameCardUI_OutCards_Right":"GameCardUI_OutCards_Right","./GameCardUI_OutCards_Self":"GameCardUI_OutCards_Self","./GameCardUI_OutCards_Top":"GameCardUI_OutCards_Top","./GameCardUI_SelectCardsPanel":"GameCardUI_SelectCardsPanel","./GameCardUI_SelfHandCards":"GameCardUI_SelfHandCards","./GameCardUI_TestSelfHandCards":"GameCardUI_TestSelfHandCards"}],GameCardUIData:[function(t,e,n){"use strict";cc._RF.push(e,"6f975l4SI9E0b97UaXZVjTb","GameCardUIData");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameCardUIData=n.CShowOutCardTypeEnum=void 0,function(t){t[t.NORMAL_SHOW_PUT=1]="NORMAL_SHOW_PUT",t[t.TANPAI_SHOW_PUT=2]="TANPAI_SHOW_PUT"}(n.CShowOutCardTypeEnum||(n.CShowOutCardTypeEnum={}));var a=function(){function t(){}return t.setPutCardActionNeedDt=function(t){this._putCardActionNeedDt=t},t.getPutCardActionNeedDt=function(){return this._putCardActionNeedDt},t._putCardActionNeedDt=.1,o([jsClass],t)}();n.GameCardUIData=a,cc._RF.pop()},{}],GameCardUILeftOutModel:[function(t,e,n){"use strict";cc._RF.push(e,"f1e9crYLIhCboRLXuh1Gj2d","GameCardUILeftOutModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameCardUILeftOutModel=void 0;var r=t("../../../../Framework/Root/ModelRoot"),s=t("./GameCardUIOutModelBase"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._seat=0,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return r.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.putCardsEndAction=function(t,e,n){n%=14;var o=t.getPosition(),a=(n+1)*s.TANPAI_ACTION_DT;t.setPosition(cc.v2(e.x+8*n,o.y)),cc.tween(t).to(a,{position:cc.v3(o.x,o.y,0)},{easing:"backOut"}).start()},i([jsClass],e)}(s.GameCardUIOutModelBase);n.GameCardUILeftOutModel=c,cc.systemEvent.once("GameRoot.inited",function(){r.ModelRoot.instance.add(c)}),cc._RF.pop()},{"../../../../Framework/Root/ModelRoot":"ModelRoot","./GameCardUIOutModelBase":"GameCardUIOutModelBase"}],GameCardUIOutModelBase:[function(t,e,n){"use strict";cc._RF.push(e,"4dac5tldHhJ6IlusQlEzksx","GameCardUIOutModelBase");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameCardUIOutModelBase=n.TANPAI_ACTION_DT=void 0;var r,s=t("../GameCardUI/CardUIOut"),c=t("./CardCommonFunc"),l=t("../../../../Framework/Model/BaseModel"),u=t("./GameCardUISelfHandModel"),d=t("../../CommonLogic/CardLogic/DefaultPokerCardsConst"),p=t("../Model/GameModel"),h=t("./GameCardUIData");(function(t){t[t.PUT_TYPE=0]="PUT_TYPE",t[t.TAN_NORMAL=1]="TAN_NORMAL",t[t.TAN_11=2]="TAN_11",t[t.TAN_12=3]="TAN_12",t[t.TAN_13=4]="TAN_13",t[t.TAN_14=5]="TAN_14"})(r||(r={})),n.TANPAI_ACTION_DT=.05;var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._currOutCardsUIArr=[],e._seat=-1,e._view=null,e}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onDestroy=function(){},e.prototype.init=function(t){this._view=t,this._currOutCardsUIArr=[],this.initData(),this.initListener()},e.prototype.initData=function(){for(var t=1;t<=c.ONE_HANDCARDS_COUNT;t++){var e=this.getCardComp(t),n=new s.CardUIOut;n.setCardNodeObj(e),n.showNode(!1),this._currOutCardsUIArr.push(n)}this.updateOutCardsUI({cards:[]})},e.prototype.initListener=function(){},e.prototype.getCardComp=function(t){return this.view["m_card"+t]},e.prototype.updateOutCardsUI=function(t){t.putType||(t.putType=h.CShowOutCardTypeEnum.NORMAL_SHOW_PUT),t.putType===h.CShowOutCardTypeEnum.TANPAI_SHOW_PUT&&this.sortCards(t),this.doUpdateOutCardsUI(t),this._putCardsAction(t)},e.prototype.sortCards=function(t){u.GameCardUISelfHandModel.instance.getGameCardLogic().sortByWeight(t.cards),t.cards.reverse()},e.prototype.doUpdateOutCardsUI=function(t){c.CardCommonFunc.updateOutCardsUI(this._currOutCardsUIArr,t),this.setCardsTypeByControl(t)},e.prototype.setCardsTypeByControl=function(t){if(t.putType===h.CShowOutCardTypeEnum.TANPAI_SHOW_PUT)if(p.GameModel.instance.isTuoPaiModel()){var e=t.cards.length;this.view.m_c_showInfo&&(e>10?(e=e>14?14:e,this.view.m_c_showInfo.selectedIndex=r["TAN_"+e]):this.view.m_c_showInfo.selectedIndex=r.TAN_NORMAL)}else this.view.m_c_showInfo.selectedIndex=r.TAN_NORMAL;else this.view.m_c_showInfo.selectedIndex=r.PUT_TYPE},e.prototype._putCardsAction=function(t){if(0!==t.cards.length)for(var e=this._currOutCardsUIArr[0].rootNode.getPosition(),n=0;n<this._currOutCardsUIArr.length;n++){var o=this._currOutCardsUIArr[n];if(!o.isNodeVisible())break;if(t.putType===h.CShowOutCardTypeEnum.TANPAI_SHOW_PUT)this.putCardsEndAction(o.rootNode,e,n);else{var a=0;switch(h.GameCardUIData.setPutCardActionNeedDt(.1),t.typeID){case d.PokerCardsType.DanZhang:case d.PokerCardsType.DuiZi:case d.PokerCardsType.SanZhang:this._putCardsSmallToBigAction(o.rootNode);break;case d.PokerCardsType.LianSan:a=1.4,this._putCardsLeftToRightAction(o.rootNode,e,n);break;case d.PokerCardsType.ShunZi:case d.PokerCardsType.LianDui:case d.PokerCardsType.SanDaiEr:a=1,this._putCardsLeftToRightAction(o.rootNode,e,n);break;case d.PokerCardsType.SiZhang:case d.PokerCardsType.WuZhang:case d.PokerCardsType.LiuZhang:case d.PokerCardsType.QiZhang:case d.PokerCardsType.BaZhang:case d.PokerCardsType.JiuZhang:case d.PokerCardsType.ShiZhang:a=.8,this._putCardsBigToSmallAction(o.rootNode);break;case d.PokerCardsType.TongHuaShun:a=1.4,this._putCardsBigToSmallAction(o.rootNode);break;case d.PokerCardsType.WangZha:a=2,this._putCardsBigToSmallAction(o.rootNode)}a>h.GameCardUIData.getPutCardActionNeedDt()&&h.GameCardUIData.setPutCardActionNeedDt(a)}}},e.prototype.putCardsEndAction=function(t,e,o){var a=t.getPosition(),i=(o+1)*n.TANPAI_ACTION_DT;t.setPosition(cc.v2(e.x+8*o,a.y)),cc.tween(t).to(i,{position:cc.v3(a.x,a.y,0)},{easing:"backOut"}).start()},e.prototype._putCardsSmallToBigAction=function(t){t.scale=.1,cc.tween(t).to(.08,{scale:1.1}).to(.02,{scale:1}).start(),h.GameCardUIData.setPutCardActionNeedDt(.1)},e.prototype._putCardsLeftToRightAction=function(t,e,n){var o=t.getPosition(),a=e.x-3*n;t.scale=1.1,cc.tween(t).sequence(cc.tween().parallel(cc.tween().to(.1,{position:cc.v3(a,o.y,0)}),cc.tween().to(.1,{scale:1})),cc.tween().parallel(cc.tween().to(.2,{position:cc.v3(o.x-10,o.y,0)}),cc.tween().by(.15,{angle:-5})),cc.tween().parallel(cc.tween().to(.1,{position:o}),cc.tween().by(.1,{angle:5}))).start(),h.GameCardUIData.setPutCardActionNeedDt(.4)},e.prototype._putCardsBigToSmallAction=function(t){t.opacity=125,t.scale=1.3,cc.tween(t).parallel(cc.tween().to(.11,{scale:.9}),cc.tween().to(.11,{opacity:255})).to(.04,{scale:1}).start(),h.GameCardUIData.setPutCardActionNeedDt(.15)},e.prototype.getPlayCardsAnimationPosAndParent=function(t){for(var e={pos:cc.v2(0,0),parent:null},n=[],o=0;o<this._currOutCardsUIArr.length;o++){var a=this._currOutCardsUIArr[o];if(a.isNodeVisible()&&o<14&&n.push(a),t===c.PlayCardsAniDirectionEnum.LEFT||t===c.PlayCardsAniDirectionEnum.RIGHT)a.isNodeVisible()&&(e={pos:this.getAniPos(a),parent:this.view.node});else if(t===c.PlayCardsAniDirectionEnum.FRAME_CENTER){var i=cc.view.getVisibleSize();e={pos:cc.v2(.5*i.width,.5*-i.height),parent:this.view.node}}else if(!a.isNodeVisible()&&n.length>0){var r=this.getCenterPos(n);if(t===c.PlayCardsAniDirectionEnum.CENTER)return{pos:r,parent:this.view.node};if(t===c.PlayCardsAniDirectionEnum.CENTER_UP)return r.y=r.y+.7*n[0].node.height,{pos:r,parent:this.view.node}}if(!a.isNodeVisible())break}return e},e.prototype.getAniPos=function(t){var e=t.getRootPosition();return cc.v2(t.getRealPosX(),e.y)},e.prototype.getCenterPos=function(t){var e=t[Math.floor(t.length/2)],n=this.getAniPos(e);return 0==t.length%2&&(2===this._seat?n.x=n.x+15:n.x=n.x-15),n},i([jsClass],e)}(l.BaseModel);n.GameCardUIOutModelBase=_,cc._RF.pop()},{"../../../../Framework/Model/BaseModel":"BaseModel","../../CommonLogic/CardLogic/DefaultPokerCardsConst":"DefaultPokerCardsConst","../GameCardUI/CardUIOut":"CardUIOut","../Model/GameModel":"GameModel","./CardCommonFunc":"CardCommonFunc","./GameCardUIData":"GameCardUIData","./GameCardUISelfHandModel":"GameCardUISelfHandModel"}],GameCardUIRightOutModel:[function(t,e,n){"use strict";cc._RF.push(e,"95430PFpftCBaGMVHNNkqJR","GameCardUIRightOutModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameCardUIRightOutModel=void 0;var r=t("../../../../Framework/Root/ModelRoot"),s=t("./GameCardUIOutModelBase"),c=t("./CardCommonFunc"),l=t("./GameCardUISelfHandModel"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._seat=2,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return r.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.doUpdateOutCardsUI=function(t){t.cards.reverse(),c.CardCommonFunc.updateOutCardsUI(this._currOutCardsUIArr,t),this.setCardsTypeByControl(t)},e.prototype.sortCards=function(t){l.GameCardUISelfHandModel.instance.getGameCardLogic().sortByWeight(t.cards)},e.prototype.putCardsEndAction=function(t,e,n){n%=14;var o=t.getPosition(),a=(n+1)*s.TANPAI_ACTION_DT;t.setPosition(cc.v2(e.x+8*n,o.y)),cc.tween(t).to(a,{position:cc.v3(o.x,o.y,0)},{easing:"backOut"}).start()},i([jsClass],e)}(s.GameCardUIOutModelBase);n.GameCardUIRightOutModel=u,cc.systemEvent.once("GameRoot.inited",function(){r.ModelRoot.instance.add(u)}),cc._RF.pop()},{"../../../../Framework/Root/ModelRoot":"ModelRoot","./CardCommonFunc":"CardCommonFunc","./GameCardUIOutModelBase":"GameCardUIOutModelBase","./GameCardUISelfHandModel":"GameCardUISelfHandModel"}],GameCardUISelfHandModel:[function(t,e,n){"use strict";cc._RF.push(e,"38179dKbUZAxoGEJGmIBN6r","GameCardUISelfHandModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameCardUISelfHandModel=void 0;var r,s,c=t("../GameCardUI/CardUISelfHand"),l=t("../../../../Framework/Manager/EventManager"),u=t("./CardCommonFunc"),d=t("../GuanDanCardLogic"),p=t("../../CommonLogic/CommonFunc/ToolLuaFunc"),h=t("../../../../Framework/Model/BaseModel"),_=t("../../../../Framework/Root/ModelRoot"),f=t("../Model/GameModel"),m=t("../../../Setting/SettingModel"),g=t("../GameEvent"),y=t("../../../Base/Data/DataEvent");(function(t){t[t.LEFT=0]="LEFT",t[t.CENTER=1]="CENTER",t[t.RIGHT=2]="RIGHT"})(r||(r={})),function(t){t[t.CARD_SORT_DAXIAO=1]="CARD_SORT_DAXIAO",t[t.CARD_SORT_HUASE=2]="CARD_SORT_HUASE",t[t.CARD_SORT_COUNT=3]="CARD_SORT_COUNT"}(s||(s={}));var I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._view=null,e._hengCardsUIArr=[],e._shuCardsUIArr=[],e._currUseCardsUIArr=[],e._isHorizonalLayout=!0,e._touchId=-1,e._prePos=cc.v2(0,0),e._touchMoveFixLength=30,e._currSelectCardObj=null,e._currSelectLength=0,e._selectCardsArr=[],e._preSelectCardsArr=[],e._currPutIndexArr=[],e._gameCardLogic=null,e._cardSortType=0,e._hintCombArr={},e._hintIndex=0,e._hintTongHuaShunIndexArr={1:0,2:0,3:0,4:0},e._liPaiInfo={leftArr:[],centerArr:[],rightArr:[]},e._liPaiCardType={leftArr:[],rightArr:[]},e._selfSeat=0,e._liPaiIndex=0,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return _.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.onDestroy=function(){},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.getGameCardLogic=function(){return this._gameCardLogic},e.prototype.getSelfHands=function(){return this._gameCardLogic.getHandCards(this._selfSeat)},e.prototype.getHandCardsLength=function(t){return this._gameCardLogic.getHandCardsLength(t)},e.prototype.init=function(t){this._view=t,this._hintIndex=0,this._currSelectLength=0,this._hintCombArr=[],this._hengCardsUIArr=[],this._shuCardsUIArr=[],this._currUseCardsUIArr=[],this._selectCardsArr=[],this._preSelectCardsArr=[],this._currPutIndexArr=[],this._hintTongHuaShunIndexArr={1:0,2:0,3:0,4:0},this._liPaiInfo={leftArr:[],centerArr:[],rightArr:[]},this._liPaiCardType={leftArr:[],rightArr:[]},this._gameCardLogic=new d.GuanDanCardLogic,this._cardSortType=s.CARD_SORT_DAXIAO,this._liPaiIndex=0,this.initData()},e.prototype.initData=function(){for(var t=1;t<=u.ONE_HANDCARDS_COUNT;t++){var e=this.getCardObj(t);new c.CardUISelfHand(e.m_CardHengPai).node.active=!1,new c.CardUISelfHand(e.m_CardShuPai).node.active=!1,this._hengCardsUIArr.push(new c.CardUISelfHand(e.m_CardHengPai)),this._shuCardsUIArr.push(new c.CardUISelfHand(e.m_CardShuPai))}this._isHorizonalLayout=m.SettingModel.instance.isLiPaiHorizonal(),l.EventManager.instance.emit(g.GameEvent.SETTING_CHANGE_LAYOUT,this._isHorizonalLayout)},e.prototype.getCardObj=function(t){return this.view["m_card"+t]},e.prototype.updateLayoutType=function(t){this._isHorizonalLayout=t,this._isHorizonalLayout?this.clickHorizonalBtn():this.clickVerticalBtn()},e.prototype.clickHorizonalBtn=function(){--this._cardSortType,this.showHandCardsNode(this._isHorizonalLayout),this.updateHandCardsAndPos()},e.prototype.clickVerticalBtn=function(){--this._cardSortType,this.showHandCardsNode(this._isHorizonalLayout),this.updateHandCardsAndPos()},e.prototype.showHandCardsNode=function(t){for(var e=u.ONE_HANDCARDS_COUNT;e>=1;e--)this._hengCardsUIArr[e-1].node.active=t,this._shuCardsUIArr[e-1].node.active=!t;this._currUseCardsUIArr=[].concat(t?this._hengCardsUIArr:this._shuCardsUIArr)},e.prototype.updateHandCardsAndPos=function(){++this._cardSortType,(this._cardSortType>s.CARD_SORT_COUNT||this._cardSortType<s.CARD_SORT_DAXIAO)&&(this._cardSortType=s.CARD_SORT_DAXIAO),this.sortCenterCards();var t=this.getHandCardsLength(this._selfSeat);u.CardCommonFunc.updateShowHandCardsUI(this._currUseCardsUIArr,t),this._isHorizonalLayout?u.CardCommonFunc.updateHorizonalHandCardsAndPos(this._currUseCardsUIArr,this._liPaiInfo):u.CardCommonFunc.updateVerticalHandCardsAndPos(this._currUseCardsUIArr,this._liPaiInfo,this._liPaiCardType),l.EventManager.instance.emit(g.GameEvent.TOUCH_CARD_CALLBACK_LP,this.getSelectCardsInfo().putCards)},e.prototype.sortCenterCards=function(){this.initLiPaiCenterArr();var t=this._liPaiInfo.centerArr;this._cardSortType===s.CARD_SORT_DAXIAO?this.sortCenterLiPaiArr(t,this._gameCardLogic.sortByWeight):this._cardSortType===s.CARD_SORT_HUASE?this.sortCenterLiPaiArr(t,this._gameCardLogic.sortByColor):this._cardSortType===s.CARD_SORT_COUNT&&this.sortCenterLiPaiArr(t,this._gameCardLogic.sortByCount),this._isHorizonalLayout||(this._liPaiInfo.centerArr=this._gameCardLogic.getVerticalSortCards(t[0]))},e.prototype.initLiPaiCenterArr=function(){for(var t=this._liPaiInfo.centerArr,e=[],n=0;n<t.length;n++)for(var o=t[n],a=0;a<o.length;a++)e.push(o[a]);this.setLiPaiArr(e,r.CENTER)},e.prototype.setLiPaiArr=function(t,e,n){r.LEFT===e?(++this._liPaiIndex,t.unshift(this._liPaiIndex),this._liPaiInfo.leftArr.unshift(t.concat()),this._liPaiCardType.leftArr.unshift(n)):r.RIGHT===e?(++this._liPaiIndex,t.unshift(this._liPaiIndex),this._liPaiInfo.rightArr[this._liPaiInfo.rightArr.length]=t.concat(),this._liPaiCardType.rightArr[this._liPaiCardType.rightArr.length]=n):(this._liPaiInfo.centerArr=[],this._liPaiInfo.centerArr[0]=t.concat())},e.prototype.sortCenterLiPaiArr=function(t,e){var n=t.length;if(n>0)for(var o=0;o<n;o++)e.call(this._gameCardLogic,t[o])},e.prototype.getSelectCardsInfo=function(){var t=[],e=[],n=0;return this._currUseCardsUIArr.forEach(function(o){o.isUP&&o.isNodeVisible()&&(e.push(n),t.push(o.cardValue)),++n}),{putCards:t,selectIndexArr:e}},e.prototype.updateHandsUI=function(t){this._selfSeat=t.seat;var e=t.cards;this._gameCardLogic.setHandCards(this._selfSeat,e),this._gameCardLogic.checkHintCardsAllTongHua(e),this.initLiPaiCardsArr(),this.showHandCardsNode(this._isHorizonalLayout),--this._cardSortType,this.updateHandCardsAndPos()},e.prototype.initLiPaiCardsArr=function(){this._liPaiInfo={leftArr:[],centerArr:[],rightArr:[]},this._liPaiCardType={leftArr:[],rightArr:[]},this.setLiPaiArr(this.getSelfHands(),r.CENTER)},e.prototype.updateHandsData=function(t){this._selfSeat=t.seat;var e=t.cards;this._gameCardLogic.setHandCards(this._selfSeat,e),this._gameCardLogic.checkHintCardsAllTongHua(e),this.playCardsUpdateUI(this.isTrust())},e.prototype.isTrust=function(){return f.GameModel.instance.isTrust()},e.prototype.playCardsUpdateUI=function(t){if(t){var e=this.getSelfHands().concat(),n=[];for(var o in this._liPaiInfo)for(var a=this._liPaiInfo[o],i=0;i<a.length;i++){var r=a[i],s=0;for("leftArr"!==o&&"rightArr"!==o||(s=1);s<r.length;s++)n.push(r[s])}for(i=0;i<e.length;i++){var c=e[i],l=n.indexOf(c);l>=0&&n.splice(l,1)}for(i=0;i<n.length;i++)this.trustDeleteCards(n[i])}else{var u=this._currPutIndexArr;u.length>0&&this.deletLiPaiIndex(u),this._currPutIndexArr=[]}--this._cardSortType,this.updateHandCardsAndPos(),0===this._liPaiInfo.leftArr.length&&0===this._liPaiInfo.rightArr.length&&(this._liPaiIndex=0),this._gameCardLogic.sendRecvCardsData(this._liPaiInfo)},e.prototype.trustDeleteCards=function(t){for(var e=this._liPaiInfo.leftArr,n=[this._liPaiInfo.centerArr,this._liPaiInfo.rightArr,e],o=this._liPaiCardType.leftArr,a=[[],this._liPaiCardType.rightArr,o],i=0;i<n.length;i++)for(var r=n[i],s=0;s<r.length;s++){var c=r[s],l=c.indexOf(t);if(i>0&&l>0||0===i&&l>=0)return c.splice(l,1),void((0==i&&0===c.length||i>0&&1===c.length)&&(r.splice(s,1),a[i].length>0&&a[i].splice(s,1)))}},e.prototype.deletLiPaiIndex=function(t){var e=0;for(var n in this._liPaiInfo){var o=this._liPaiInfo[n];if(o.length>0)for(var a=0;a<o.length;a++){for(var i=o[a],r=!1,s=0;s<i.length;)if(0!==s||"leftArr"!==n&&"rightArr"!==n){var c=t.indexOf(e);if(c>=0){if(t.splice(c,1),i.splice(s,1),"centerArr"===n&&0===i.length||("leftArr"===n||"rightArr"===n)&&1===i.length?(o.splice(a,1),"leftArr"!==n&&"rightArr"!==n||this._liPaiCardType[n].splice(a,1),r=!1,a--):"leftArr"!==n&&"rightArr"!==n||(r=!0),0===t.length){if(r){d=(d=i.concat()).splice(1);var l=this._gameCardLogic.testMaxCardComb(d),u=this._gameCardLogic.changeFCardType(l.type.id);this._liPaiCardType[n][a]=u}return}}else s++;++e}else s++;var d;if(r)d=(d=i.concat()).splice(1),l=this._gameCardLogic.testMaxCardComb(d),u=this._gameCardLogic.changeFCardType(l.type.id),this._liPaiCardType[n][a]=u}}},e.prototype.updateLevelCards=function(t){this._gameCardLogic.setLevelCard(t.level),this.updateHandsUI(t)},e.prototype.checkCanPutCards=function(t){var e=this.getSelectCardsInfo().putCards;if(0===e.length)return!1;var n=f.GameModel.instance.getPlayCardData(),o=this._gameCardLogic.canOutFromMaxComb(e,n);if(null===o)return!1;if(0===p.ToolLuaFunc.getListLength(o.cards))return!1;var a=[];for(var i in o.cards){var r=o.cards[i];a.push(r)}return o.cards=a,!!this._gameCardLogic.canOutByCardComb(o,n)&&(t.cardCount=o.cards.length,t.cards=o.cards,t.typeID=o.type.id,t.power=o.type.power,this._currPutIndexArr=this.getSelectCardsInfo().selectIndexArr.concat(),l.EventManager.instance.emit(g.GameEvent.TOUCH_CARD_CALLBACK_LP,[]),!0)},e.prototype.clickRestoreBtn=function(){0===this.getSelectCardsInfo().selectIndexArr.length?(this.initLiPaiCardsArr(),this._liPaiIndex=0):this.restoreSelectCardsByAllCardsLiPai(),--this._cardSortType,this.updateHandCardsAndPos(),this._gameCardLogic.sendRecvCardsData(this._liPaiInfo),this.checkHadBidCards()},e.prototype.restoreSelectCardsByAllCardsLiPai=function(){var t=this.getSelectCardsInfo(),e=t.selectIndexArr;if(e.length>0){this.deletLiPaiIndex(e),this.initLiPaiCenterArr();var n=t.putCards,o=this._liPaiInfo;o.centerArr[0]=o.centerArr[0].concat(n)}},e.prototype.isShowRestoreBtn=function(){var t=this.getSelectCardsInfo().selectIndexArr;if(0===t.length)return this._liPaiInfo.leftArr.length>0||this._liPaiInfo.rightArr.length>0;var e=0;for(var n in this._liPaiInfo){var o=this._liPaiInfo[n],a=o.length;if(a>0)for(var i=0;i<a;i++)for(var r=o[i].concat(),s=0;s<r.length;)if("centerArr"===n||0!==s){var c=t.indexOf(e);if(c>=0){if("centerArr"===n)return!1;t.splice(c,1),r.splice(s,1)}else s++;++e}else s++;if(0===t.length)break}return this._liPaiInfo.leftArr.length>0||this._liPaiInfo.rightArr.length>0},e.prototype.checkHadBidCards=function(){this._hintIndex=0;var t=this.getSelfHands(),e=f.GameModel.instance.getPlayCardData();return 0===e.cards.length?this._hintCombArr=this._gameCardLogic.hintCards(this._liPaiInfo,t,null):this._hintCombArr=this._gameCardLogic.hintCards(this._liPaiInfo,t,e),this._hintCombArr.length>0},e.prototype.clickHintBtn=function(){return 0!==this._hintCombArr.length&&(this._hintIndex>=this._hintCombArr.length&&(this._hintIndex=0),this.showHintPaiUIByArr(this._hintCombArr[this._hintIndex]),++this._hintIndex,!0)},e.prototype.showHintPaiUIByArr=function(t){this.hintCardsUp(t),this._selectCardsArr=[]},e.prototype.hintCardsUp=function(t){if(t&&t.cards){var e=t.cards.concat();this._selectCardsArr=e;var n=this._currUseCardsUIArr.length;if(t.liPaiRight){for(var o=n-1;o>=0;o--)if((s=this._currUseCardsUIArr[o]).showSelectCardUP(!1),s.isNodeVisible())for(var a=0;a<e.length;a++)if(c=e[a]===s.cardValue){s.showSelectCardUP(c),e.splice(a,1);break}}else{if(o=0,t.isNoLiPai&&this._liPaiInfo.leftArr.length>0)for(o=this._gameCardLogic.getLiPaiCardsAllCount(this._liPaiInfo.leftArr),a=0;a<n;a++)(s=this._currUseCardsUIArr[a]).showSelectCardUP(!1);for(var i=t.isAllSame?2:1,r=[];o<n;o++){var s;if((s=this._currUseCardsUIArr[o]).showSelectCardUP(!1),s.isNodeVisible())for(a=0;a<e.length;a++){var c=!1;if(e[a]===s.cardValue&&(c=!0,r[a]||(r[a]=0),r[a]++),c&&r[a]==i){s.showSelectCardUP(c),e.splice(a,1),r.splice(a,1);break}}}}l.EventManager.instance.emit(g.GameEvent.TOUCH_CARD_CALLBACK,this.getSelectCardsInfo().putCards)}},e.prototype.clickLiPaiBtn=function(){var t=this.getSelectCardsInfo(),e=t.putCards;if(e.length>0){var n=t.selectIndexArr,o=this._gameCardLogic.testMaxCardComb(e),a=this._gameCardLogic.changeFCardType(o.type.id);this.deletLiPaiIndex(n),this._gameCardLogic.isLiPaiLeft(a)?(console.log("\u653e\u5728\u5de6\u4fa7:"+e),this.setLiPaiArr(e,r.LEFT,a)):(console.log("\u653e\u5728\u53f3\u4fa7:"+e),this.setLiPaiArr(e,r.RIGHT,a)),--this._cardSortType,this.updateHandCardsAndPos(),this._gameCardLogic.sendRecvCardsData(this._liPaiInfo),this.checkHadBidCards()}},e.prototype.updateLiPaiHandsUI=function(t){var e=t.data;if("#"!==e){var n=e.split("#"),o="",a="";2===n.length?(o=n[0],a=n[1]):e.indexOf("#")>0?o=n[0]:a=n[0];var i={leftArr:[],centerArr:[],rightArr:[]},s={leftArr:[],rightArr:[]},c=this.getSelfHands().concat();if(""!==o){var l=o.split(";"),u=[],d=[];for(var p in l)if(""!==(I=l[p])){var h=this.getLiPaiNumArr(I);if(!this.serverDeleteLiPaiHands(h,c))return console.error("_____ \u670d\u52a1\u5668\u7406\u724c\u6570\u636e\u6709\u95ee\u9898 ____"+c),void this.fixServerLiPaiData();u.push(h),C=(C=h.concat()).splice(1);var _=this._gameCardLogic.testMaxCardComb(C),f=this._gameCardLogic.changeFCardType(_.type.id);d.push(f)}i.leftArr=u,s.leftArr=d}if(""!==a){var m=a.split(";"),g=[],y=[];for(var p in m){var I;if(""!==(I=m[p])){var C;if(h=this.getLiPaiNumArr(I),!this.serverDeleteLiPaiHands(h,c))return console.error("_____ \u670d\u52a1\u5668\u7406\u724c\u6570\u636e\u6709\u95ee\u9898 ____"+c),void this.fixServerLiPaiData();g.push(h),C=(C=h.concat()).splice(1),_=this._gameCardLogic.testMaxCardComb(C),f=this._gameCardLogic.changeFCardType(_.type.id),y.push(f)}}i.rightArr=g,s.rightArr=y}this._liPaiInfo=i,this._liPaiCardType=s,this.setLiPaiArr(c,r.CENTER),--this._cardSortType,this.updateHandCardsAndPos(),this.checkHadBidCards()}else this.fixServerLiPaiData()},e.prototype.getLiPaiNumArr=function(t){for(var e=t.split(","),n=[],o=0;o<e.length;o++){var a=e[o];0!==a.length&&n.push(Number(a))}return n},e.prototype.serverDeleteLiPaiHands=function(t,e){for(var n=0;n<t.length;n++){var o=t[n];if(n>0){var a=e.indexOf(o);if(!(a>=0))return!1;e.splice(a,1)}}return!0},e.prototype.fixServerLiPaiData=function(){this.initLiPaiCardsArr(),--this._cardSortType,this.updateHandCardsAndPos()},e.prototype.isTongHuShunByColor=function(t){return this._gameCardLogic.getTongHuaShuTable(t).length>0},e.prototype.clickTongHuaShuBtn=function(t){var e=this._gameCardLogic.getTongHuaShuTable(t);if(0!==e.length){for(var n=[],o=0;o<e.length;o++)this._gameCardLogic.isFirstPutTuoCards(e[o].cards)||n.push(e[o]);var a=this._hintTongHuaShunIndexArr[t];a>=n.length&&(a=0,this._hintTongHuaShunIndexArr[t]=0);var i=n[a];++this._hintTongHuaShunIndexArr[t],this.showHintPaiUIByArr({cards:i.cards,isAllSame:i.isAllSame}),l.EventManager.instance.emit(g.GameEvent.TOUCH_CARD_CALLBACK_LP,this.getSelectCardsInfo().putCards)}else this.showHintPaiUIByArr({cards:[]})},e.prototype.getContributeCards=function(){var t=f.GameModel.instance.getContributeType();return f.ContributeTypeEnum.GIVE===t?this._gameCardLogic.getJinGongCards():this._gameCardLogic.getHuanGongCards()},e.prototype.onTouchDown=function(t){if(f.GameModel.instance.isNoStartGame()||0===f.GameModel.instance.getCardCount(1))l.EventManager.instance.emit(g.GameEvent.TOUCH_CARD_CALLBACK);else if(-1===this._touchId){this._touchId=t.touchId,this._currSelectCardObj=null,this._selectCardsArr=[];var e=this.changeTouchPos(t.pos);this._prePos=e,this.touchSelectCardsArr(e,!0),(this._selectCardsArr.length>0?this._selectCardsArr[0]:-1)>=0?(this._currSelectLength=this._selectCardsArr.length,t.captureTouch(),l.EventManager.instance.emit(g.GameEvent.TOUCH_CARD_BEGIN,!0)):(this._touchId=-1,this.downAllCards(),l.EventManager.instance.emit(g.GameEvent.TOUCH_CARD_BEGIN,!1)),this.showSelectPaiImg()}},e.prototype.onTouchMove=function(t){if(-1!==this._touchId&&t.touchId===this._touchId)for(var e=this.changeTouchPos(t.pos),n=this.getMoveTouchPosArr(e),o=0;o<n.length;o++)e=n[o],this.touchSelectCardsArr(e,!1),this._currSelectLength!==this._selectCardsArr.length&&this.showSelectPaiImg(),this._currSelectLength=this._selectCardsArr.length,this._prePos=e},e.prototype.onTouchEnd=function(t){-1!==this._touchId&&t.touchId===this._touchId&&(this._touchId=-1,this.selectPaiUp(),this._preSelectCardsArr=this.getSelectCardsInfo().selectIndexArr.concat(),l.EventManager.instance.emit(g.GameEvent.TOUCH_CARD_END),l.EventManager.instance.emit(g.GameEvent.TOUCH_CARD_CALLBACK_LP,[]))},e.prototype.changeTouchPos=function(t){var e=fgui.GRoot.inst.height;return new cc.Vec2(t.x,e-t.y)},e.prototype.touchSelectCardsArr=function(t,e){for(var n=this._currUseCardsUIArr.length-1;n>=0;n--){var o=this._currUseCardsUIArr[n];if(this.isCanSelect(o,t)){if(this._currSelectCardObj===o)break;if(this._gameCardLogic.isFirstPutTuoCard(o.cardNum))return void(e&&(f.GameModel.instance.isContributeStep()||l.EventManager.instance.emit(y.DataEvent.ToastData,"\u62d6\u724c\u4e0d\u80fd\u9886\u51fa!")));if(this.getSelectCardsArrIndex(n)>=0){this.cancelSelectCardsArr(this._currUseCardsUIArr.indexOf(this._currSelectCardObj)),this._currSelectCardObj=o;break}this.setSelectCardsArr(n),this._currSelectCardObj=o;break}}},e.prototype.isCanSelect=function(t,e){return t.isNodeVisible()&&t.isCanTouch&&this.isTouchCard(t,e)},e.prototype.isTouchCard=function(t,e){var n=t.size,o=t.worldPos;return cc.rect(o.x-.5*n.width,o.y,n.width,n.height).contains(e)},e.prototype.getSelectCardsArrIndex=function(t){return this._selectCardsArr.indexOf(t)},e.prototype.cancelSelectCardsArr=function(t){var e=this._selectCardsArr.indexOf(t);e>0&&this._selectCardsArr.splice(e,1)},e.prototype.setSelectCardsArr=function(t){this.getSelectCardsArrIndex(t)<0&&this._selectCardsArr.push(t)},e.prototype.downAllCards=function(){this._preSelectCardsArr=[];for(var t=this._currUseCardsUIArr.length,e=0;e<t;e++)this._currUseCardsUIArr[e].showSelectCardUP(!1);l.EventManager.instance.emit(g.GameEvent.TOUCH_CARD_CALLBACK,this.getSelectCardsInfo().putCards),l.EventManager.instance.emit(g.GameEvent.TOUCH_CARD_CALLBACK_LP,[])},e.prototype.selectPaiUp=function(){for(var t=this._currUseCardsUIArr.length,e=0;e<t;e++){var n=this._selectCardsArr.indexOf(e)>=0,o=this._currUseCardsUIArr[e];n&&o.showSelectCardUP(!o.isUP)}l.EventManager.instance.emit(g.GameEvent.TOUCH_CARD_CALLBACK,this.getSelectCardsInfo().putCards)},e.prototype.showSelectPaiImg=function(){for(var t=this._currUseCardsUIArr.length,e=0;e<t;e++){var n=this._selectCardsArr.indexOf(e)>=0,o=this._currUseCardsUIArr[e];o.isUP&&(n=!(n&&this._preSelectCardsArr.indexOf(e)>=0)),o.showSelectCardBg(n)}},e.prototype.getMoveTouchPosArr=function(t){var e=Math.abs(t.x-this._prePos.x),n=Math.abs(t.y-this._prePos.y),o=this._touchMoveFixLength,a=[];if(e>=o||n>=o){for(var i=t.sub(this._prePos).normalize(),r=0;;){++r;var s=this._prePos.x+o*i.x*r,c=this._prePos.y+o*i.y*r,l=cc.v2(s,c),u=t.sub(l).normalize();if(i.x*u.x<0||i.y*u.y<0||r>20)break;a.push(l)}a.push(t)}else a.push(t);return a},e.prototype.takeFirstAction=function(){for(var t=cc.view.getVisibleSize(),e=this._currUseCardsUIArr,n=e[0],o=new cc.Vec2(.5*t.width-.5*n.size.width,-n.size.height),a=0;a<e.length;a++){var i=e[a];i.initPos();var r=i.rootNode.getPosition();i.rootNode.setPosition(o),i.rootNode.opacity=0,i.rootNode.stopAllActions();var s=Math.random()/3,c=Math.random()/2;cc.tween(i.rootNode).delay(c).parallel(cc.tween().to(s,{position:cc.v2(r.x,r.y)}),cc.tween().to(s,{opacity:255})).start()}},i([jsClass],e)}(h.BaseModel);n.GameCardUISelfHandModel=I,cc.systemEvent.once("GameRoot.inited",function(){_.ModelRoot.instance.add(I)}),cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Model/BaseModel":"BaseModel","../../../../Framework/Root/ModelRoot":"ModelRoot","../../../Base/Data/DataEvent":"DataEvent","../../../Setting/SettingModel":"SettingModel","../../CommonLogic/CommonFunc/ToolLuaFunc":"ToolLuaFunc","../GameCardUI/CardUISelfHand":"CardUISelfHand","../GameEvent":"GameEvent","../GuanDanCardLogic":"GuanDanCardLogic","../Model/GameModel":"GameModel","./CardCommonFunc":"CardCommonFunc"}],GameCardUISelfOutModel:[function(t,e,n){"use strict";cc._RF.push(e,"5dc4aJFtzJNS5HFagajw69q","GameCardUISelfOutModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameCardUISelfOutModel=void 0;var r=t("./CardCommonFunc"),s=t("../../../../Framework/Root/ModelRoot"),c=t("./GameCardUIOutModelBase"),l=t("../../../../Framework/Manager/EventManager"),u=t("../GameEvent"),d=t("../Model/GameModel"),p=t("./GameCardUIData"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._seat=1,e._isLiPaiHeng=!1,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return s.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.initListener=function(){l.EventManager.instance.on(u.GameEvent.SETTING_CHANGE_LAYOUT,this,this._updateCardsUIPos)},e.prototype._updateCardsUIPos=function(t){this._isLiPaiHeng=t,this._currOutCardsUIArr.forEach(function(e){e.changeOutCardPosYByLiPai(t)})},e.prototype.doUpdateOutCardsUI=function(t){t.putType===p.CShowOutCardTypeEnum.TANPAI_SHOW_PUT&&this._updateCardsUIPos(!0),r.CardCommonFunc.updateOutCardsUI(this._currOutCardsUIArr,t),this.setCardsTypeByControl(t),r.CardCommonFunc.updateSelfOutCardsPosSort(this._currOutCardsUIArr,t.cards),t.putType!==p.CShowOutCardTypeEnum.TANPAI_SHOW_PUT||this._isLiPaiHeng||this._updateCardsUIPos(this._isLiPaiHeng)},e.prototype.putCardsEndAction=function(t,e,n){if(d.GameModel.instance.isTuoPaiModel()){var o=t.getPosition(),a=(n+1)*c.TANPAI_ACTION_DT;t.setPosition(cc.v2(e.x+8*n,o.y)),cc.tween(t).to(a,{position:cc.v3(o.x,o.y,0)},{easing:"backOut"}).start()}},e.prototype.onDestroy=function(){l.EventManager.instance.off(u.GameEvent.SETTING_CHANGE_LAYOUT,this,this._updateCardsUIPos)},i([jsClass],e)}(c.GameCardUIOutModelBase);n.GameCardUISelfOutModel=h,cc.systemEvent.once("GameRoot.inited",function(){s.ModelRoot.instance.add(h)}),cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Root/ModelRoot":"ModelRoot","../GameEvent":"GameEvent","../Model/GameModel":"GameModel","./CardCommonFunc":"CardCommonFunc","./GameCardUIData":"GameCardUIData","./GameCardUIOutModelBase":"GameCardUIOutModelBase"}],GameCardUITestHandModel:[function(t,e,n){"use strict";cc._RF.push(e,"a8138DA581AI51VOfg9P3oK","GameCardUITestHandModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameCardUITestHandModel=void 0;var r,s=t("../GameCardUI/CardUISelfTestHand"),c=t("./CardCommonFunc"),l=t("../../CommonLogic/CardLogic/DefaultPokerCardsConst"),u=t("../../../../Framework/Model/BaseModel"),d=t("../../../../Framework/Root/ModelRoot");(function(t){t[t.MOVE_NONE=0]="MOVE_NONE",t[t.MOVE_RIGHT=1]="MOVE_RIGHT",t[t.MOVE_LEFT=2]="MOVE_LEFT"})(r||(r={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._testAllCardsUIArr=[],e._selectCardsArr=[],e._touchId=-1,e._startPos=new cc.Vec2,e._curMoveDirection=r.MOVE_NONE,e._currSelectLength=0,e._view=null,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return d.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.onDestroy=function(){},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.init=function(t){this._view=t,this._testAllCardsUIArr=[],this._selectCardsArr=[],this._touchId=-1,this._startPos=new cc.Vec2,this._curMoveDirection=r.MOVE_NONE,this._currSelectLength=0,this.initUI()},e.prototype.initUI=function(){this._testAllCardsUIArr=[];for(var t=["FangKuai","MeiHua","HongXin","HeiTao"],e=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],n=[],o=0;o<e.length;o++)for(var a=0;a<t.length;a++)for(var i=0;i<2;i++)n.push(t[a]+"_"+e[o]);n.push("XiaoWang"),n.push("XiaoWang"),n.push("DaWang"),n.push("DaWang");var r=0;for(a=1;a<5;a++)for(var c=this.view["m_TestSelfHandCards"+a],u=1;u<=27;u++){var d=c["m_card"+u],p=new s.CardUISelfTestHand(d.m_CardHengPai);p.rootNode.active=!1,p.setCardInfo(l.PokerCards[n[r]]),++r}},e.prototype.updateCardsUI=function(t){t.sort(function(t,e){return t-e}),this._testAllCardsUIArr=[];for(var e=0,n=1;n<5;n++)for(var o=this.view["m_TestSelfHandCards"+n],a=1;a<=27;a++){var i=o["m_card"+a],r=new s.CardUISelfTestHand(i.m_CardHengPai);e>=t.length?r.rootNode.active=!1:(r.rootNode.active=!0,r.setCardInfo(t[e]),this._testAllCardsUIArr.push(r)),++e}},e.prototype.onTouchDown=function(t){if(-1===this._touchId){this._touchId=t.touchId,this._curMoveDirection=r.MOVE_NONE,this._selectCardsArr=[];var e=this.changeTouchPos(t.pos);this._startPos=e,this.touchSelectCardsArr(e),(this._selectCardsArr.length>0?this._selectCardsArr[0]:-1)>=0?(this._currSelectLength=this._selectCardsArr.length,t.captureTouch()):(this._touchId=-1,this.downAllCards()),this.showSelectPaiImg()}},e.prototype.onTouchMove=function(t){if(-1!=this._touchId&&t.touchId===this._touchId){var e=this.changeTouchPos(t.pos);e.x>this._startPos.x?this._curMoveDirection=r.MOVE_RIGHT:this._curMoveDirection=r.MOVE_LEFT,this.touchSelectCardsArr(e),this._currSelectLength!=this._selectCardsArr.length&&this.showSelectPaiImg(),this._currSelectLength=this._selectCardsArr.length}},e.prototype.onTouchEnd=function(t){if(-1!=this._touchId&&t.touchId===this._touchId){this._touchId=-1;var e=this.changeTouchPos(t.pos);this.touchSelectCardsArr(e),this.selectPaiUp()}},e.prototype.changeTouchPos=function(t){var e=fgui.GRoot.inst.height;return new cc.Vec2(t.x,e-t.y)},e.prototype.downAllCards=function(){for(var t=this._testAllCardsUIArr.length,e=0;e<t;e++)this._testAllCardsUIArr[e].showSelectCardUP(!1)},e.prototype.showSelectPaiImg=function(){for(var t=this._testAllCardsUIArr.length,e=0;e<t;e++){var n=this._selectCardsArr.indexOf(e)>=0,o=this._testAllCardsUIArr[e];o.isUP&&(n=!0),o.showSelectCardBg(n)}},e.prototype.selectPaiUp=function(){for(var t=this._testAllCardsUIArr.length,e=0;e<t;e++){var n=this._selectCardsArr.indexOf(e)>=0,o=this._testAllCardsUIArr[e];n&&o.showSelectCardUP(!o.isUP)}},e.prototype.touchSelectCardsArr=function(t){for(var e=-1,n=-1,o=this._testAllCardsUIArr.length,a=c.CardCommonFunc.HORIZONAL_HANDCARD_INTERVAL_LR,i=o-1;i>=0;i--){var s=this._testAllCardsUIArr[i];this.isCanSelect(s,t)&&(null===e||e<s.getCardZOrder())?-1===n&&(e=s.getCardZOrder(),this.setSelectCardsArr(i),n=i):this._curMoveDirection===r.MOVE_RIGHT?s.worldPos.x-.5*s.size.width>t.x&&this.cancelSelectCardsArr(i):this._curMoveDirection===r.MOVE_LEFT&&s.worldPos.x-.5*s.size.width+a<t.x&&this.cancelSelectCardsArr(i)}},e.prototype.setSelectCardsArr=function(t){this._selectCardsArr.indexOf(t)<0&&this._selectCardsArr.push(t)},e.prototype.cancelSelectCardsArr=function(t){var e=this._selectCardsArr.indexOf(t);e>0&&this._selectCardsArr.splice(e,1)},e.prototype.isCanSelect=function(t,e){return t.isNodeVisible()&&this.isTouchCard(t,e)},e.prototype.isTouchCard=function(t,e){var n=t.size,o=t.worldPos;return cc.rect(o.x-.5*n.width,o.y,n.width,n.height).contains(e)},e.prototype.getSelectCards=function(){var t=[];return this._testAllCardsUIArr.forEach(function(e){e.isUP&&(e.rootNode.active=!0,t.push(e.cardValue))}),t},i([jsClass],e)}(u.BaseModel);n.GameCardUITestHandModel=p,cc.systemEvent.once("GameRoot.inited",function(){d.ModelRoot.instance.add(p)}),cc._RF.pop()},{"../../../../Framework/Model/BaseModel":"BaseModel","../../../../Framework/Root/ModelRoot":"ModelRoot","../../CommonLogic/CardLogic/DefaultPokerCardsConst":"DefaultPokerCardsConst","../GameCardUI/CardUISelfTestHand":"CardUISelfTestHand","./CardCommonFunc":"CardCommonFunc"}],GameCardUITopOutModel:[function(t,e,n){"use strict";cc._RF.push(e,"35732YgwzZCEKq4mnWf0Bby","GameCardUITopOutModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameCardUITopOutModel=void 0;var r=t("./CardCommonFunc"),s=t("../../../../Framework/Root/ModelRoot"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._seat=3,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return s.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.doUpdateOutCardsUI=function(t){r.CardCommonFunc.updateOutCardsUI(this._currOutCardsUIArr,t),this.setCardsTypeByControl(t),r.CardCommonFunc.updateSelfOutCardsPosSort(this._currOutCardsUIArr,t.cards)},i([jsClass],e)}(t("./GameCardUIOutModelBase").GameCardUIOutModelBase);n.GameCardUITopOutModel=c,cc.systemEvent.once("GameRoot.inited",function(){s.ModelRoot.instance.add(c)}),cc._RF.pop()},{"../../../../Framework/Root/ModelRoot":"ModelRoot","./CardCommonFunc":"CardCommonFunc","./GameCardUIOutModelBase":"GameCardUIOutModelBase"}],GameCardUI_CardUI_Out:[function(t,e,n){"use strict";cc._RF.push(e,"53dfejIoTlEYb/PDv3eBWeG","GameCardUI_CardUI_Out");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameCardUI","CardUI_Out")},e.prototype.onConstruct=function(){this.m_paiControl=this.getControllerAt(0),this.m_selectControl=this.getControllerAt(1),this.m_num=this.getChildAt(1),this.m_smallHua=this.getChildAt(2),this.m_bigHua=this.getChildAt(3),this.m_wang=this.getChildAt(4),this.m_tuoImg=this.getChildAt(5),this.m_selectBg=this.getChildAt(6)},e.URL="ui://mqzvkp1om5kg2w",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameCardUI_HandCardUI_Heng:[function(t,e,n){"use strict";cc._RF.push(e,"b9491H0cURJgIcFDvJJGeJj","GameCardUI_HandCardUI_Heng");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameCardUI","HandCardUI_Heng")},e.prototype.onConstruct=function(){this.m_paiControl=this.getControllerAt(0),this.m_selectControl=this.getControllerAt(1),this.m_liPaiZiControl=this.getControllerAt(2),this.m_liPaiBgControl=this.getControllerAt(3),this.m_cSelectArea=this.getControllerAt(4),this.m_bg=this.getChildAt(0),this.m_num=this.getChildAt(1),this.m_smallHua=this.getChildAt(2),this.m_bigHua=this.getChildAt(3),this.m_wang=this.getChildAt(4),this.m_imgLiPai=this.getChildAt(5),this.m_tuoImg=this.getChildAt(6),this.m_liPaiBg=this.getChildAt(7),this.m_select=this.getChildAt(8),this.m_selectArea=this.getChildAt(9)},e.URL="ui://mqzvkp1ogjyu2q",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameCardUI_HandCardUI_Shu:[function(t,e,n){"use strict";cc._RF.push(e,"3460cHmeThFR46l4AEa7uZA","GameCardUI_HandCardUI_Shu");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameCardUI","HandCardUI_Shu")},e.prototype.onConstruct=function(){this.m_paiControl=this.getControllerAt(0),this.m_selectControl=this.getControllerAt(1),this.m_liPaiZiControl=this.getControllerAt(2),this.m_liPaiBgControl=this.getControllerAt(3),this.m_cSelectArea=this.getControllerAt(4),this.m_bg=this.getChildAt(0),this.m_num=this.getChildAt(1),this.m_smallHua=this.getChildAt(2),this.m_bigHua=this.getChildAt(3),this.m_wang=this.getChildAt(4),this.m_imgLiPai=this.getChildAt(5),this.m_tuoImg=this.getChildAt(6),this.m_select=this.getChildAt(8),this.m_selectArea=this.getChildAt(9)},e.URL="ui://mqzvkp1ogjyu2r",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameCardUI_HandCardUI:[function(t,e,n){"use strict";cc._RF.push(e,"36de0xxYZFIIL6mK2cVFGZt","GameCardUI_HandCardUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameCardUI","HandCardUI")},e.prototype.onConstruct=function(){this.m_CardHengPai=this.getChildAt(0),this.m_CardShuPai=this.getChildAt(1)},e.URL="ui://mqzvkp1ogjyu2p",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameCardUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"9d87aC3Ry5IWZwreyi+JpYj","GameCardUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameCardUI","MainPanel")},e.prototype.onConstruct=function(){this.m_outCards_Top=this.getChildAt(0),this.m_outCards_Left=this.getChildAt(1),this.m_outCards_Right=this.getChildAt(2),this.m_touchArea=this.getChildAt(3),this.m_selfHandCards=this.getChildAt(4),this.m_outCards_Self=this.getChildAt(5),this.m_handImg=this.getChildAt(6)},e.URL="ui://mqzvkp1ogjyu2u",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameCardUI_OutCards_Left:[function(t,e,n){"use strict";cc._RF.push(e,"f7eedP9T0BFg7cEDNIFqKwC","GameCardUI_OutCards_Left");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameCardUI","OutCards_Left")},e.prototype.onConstruct=function(){this.m_c_showInfo=this.getControllerAt(0),this.m_card1=this.getChildAt(0),this.m_card2=this.getChildAt(1),this.m_card3=this.getChildAt(2),this.m_card4=this.getChildAt(3),this.m_card5=this.getChildAt(4),this.m_card6=this.getChildAt(5),this.m_card7=this.getChildAt(6),this.m_card8=this.getChildAt(7),this.m_card9=this.getChildAt(8),this.m_card10=this.getChildAt(9),this.m_card11=this.getChildAt(10),this.m_card12=this.getChildAt(11),this.m_card13=this.getChildAt(12),this.m_card14=this.getChildAt(13),this.m_card15=this.getChildAt(14),this.m_card16=this.getChildAt(15),this.m_card17=this.getChildAt(16),this.m_card18=this.getChildAt(17),this.m_card19=this.getChildAt(18),this.m_card20=this.getChildAt(19),this.m_card21=this.getChildAt(20),this.m_card22=this.getChildAt(21),this.m_card23=this.getChildAt(22),this.m_card24=this.getChildAt(23),this.m_card25=this.getChildAt(24),this.m_card26=this.getChildAt(25),this.m_card27=this.getChildAt(26)},e.URL="ui://mqzvkp1om5kg2z",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameCardUI_OutCards_Right:[function(t,e,n){"use strict";cc._RF.push(e,"ed868dwNNxEI5JtuKA5hoI1","GameCardUI_OutCards_Right");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameCardUI","OutCards_Right")},e.prototype.onConstruct=function(){this.m_c_showInfo=this.getControllerAt(0),this.m_card14=this.getChildAt(0),this.m_card13=this.getChildAt(1),this.m_card12=this.getChildAt(2),this.m_card11=this.getChildAt(3),this.m_card10=this.getChildAt(4),this.m_card9=this.getChildAt(5),this.m_card8=this.getChildAt(6),this.m_card7=this.getChildAt(7),this.m_card6=this.getChildAt(8),this.m_card5=this.getChildAt(9),this.m_card4=this.getChildAt(10),this.m_card3=this.getChildAt(11),this.m_card2=this.getChildAt(12),this.m_card1=this.getChildAt(13),this.m_card27=this.getChildAt(14),this.m_card26=this.getChildAt(15),this.m_card25=this.getChildAt(16),this.m_card24=this.getChildAt(17),this.m_card23=this.getChildAt(18),this.m_card22=this.getChildAt(19),this.m_card21=this.getChildAt(20),this.m_card20=this.getChildAt(21),this.m_card19=this.getChildAt(22),this.m_card18=this.getChildAt(23),this.m_card17=this.getChildAt(24),this.m_card16=this.getChildAt(25),this.m_card15=this.getChildAt(26)},e.URL="ui://mqzvkp1olgps3o",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameCardUI_OutCards_Self:[function(t,e,n){"use strict";cc._RF.push(e,"03802QNVxJCLpyYiOcolAMA","GameCardUI_OutCards_Self");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameCardUI","OutCards_Self")},e.prototype.onConstruct=function(){this.m_c_showInfo=this.getControllerAt(0),this.m_card1=this.getChildAt(0),this.m_card2=this.getChildAt(1),this.m_card3=this.getChildAt(2),this.m_card4=this.getChildAt(3),this.m_card5=this.getChildAt(4),this.m_card6=this.getChildAt(5),this.m_card7=this.getChildAt(6),this.m_card8=this.getChildAt(7),this.m_card9=this.getChildAt(8),this.m_card10=this.getChildAt(9),this.m_card11=this.getChildAt(10),this.m_card12=this.getChildAt(11),this.m_card13=this.getChildAt(12),this.m_card14=this.getChildAt(13),this.m_card15=this.getChildAt(14),this.m_card16=this.getChildAt(15),this.m_card17=this.getChildAt(16),this.m_card18=this.getChildAt(17),this.m_card19=this.getChildAt(18),this.m_card20=this.getChildAt(19),this.m_card21=this.getChildAt(20),this.m_card22=this.getChildAt(21),this.m_card23=this.getChildAt(22),this.m_card24=this.getChildAt(23),this.m_card25=this.getChildAt(24),this.m_card26=this.getChildAt(25),this.m_card27=this.getChildAt(26)},e.URL="ui://mqzvkp1ooz7j3i",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameCardUI_OutCards_Top:[function(t,e,n){"use strict";cc._RF.push(e,"6f7759kLglK5bFr0f8lMYnO","GameCardUI_OutCards_Top");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameCardUI","OutCards_Top")},e.prototype.onConstruct=function(){this.m_c_showInfo=this.getControllerAt(0),this.m_card1=this.getChildAt(0),this.m_card2=this.getChildAt(1),this.m_card3=this.getChildAt(2),this.m_card4=this.getChildAt(3),this.m_card5=this.getChildAt(4),this.m_card6=this.getChildAt(5),this.m_card7=this.getChildAt(6),this.m_card8=this.getChildAt(7),this.m_card9=this.getChildAt(8),this.m_card10=this.getChildAt(9),this.m_card11=this.getChildAt(10),this.m_card12=this.getChildAt(11),this.m_card13=this.getChildAt(12),this.m_card14=this.getChildAt(13),this.m_card15=this.getChildAt(14),this.m_card16=this.getChildAt(15),this.m_card17=this.getChildAt(16),this.m_card18=this.getChildAt(17),this.m_card19=this.getChildAt(18),this.m_card20=this.getChildAt(19),this.m_card21=this.getChildAt(20),this.m_card22=this.getChildAt(21),this.m_card23=this.getChildAt(22),this.m_card24=this.getChildAt(23),this.m_card25=this.getChildAt(24),this.m_card26=this.getChildAt(25),this.m_card27=this.getChildAt(26)},e.URL="ui://mqzvkp1olgps3p",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameCardUI_SelectCardsPanel:[function(t,e,n){"use strict";cc._RF.push(e,"6634357IIFJf7M5hfylUw4N","GameCardUI_SelectCardsPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameCardUI","SelectCardsPanel")},e.prototype.onConstruct=function(){this.m_touchArea=this.getChildAt(0),this.m_TestSelfHandCards4=this.getChildAt(1),this.m_TestSelfHandCards3=this.getChildAt(2),this.m_TestSelfHandCards2=this.getChildAt(3),this.m_TestSelfHandCards1=this.getChildAt(4),this.m_okbtn=this.getChildAt(5)},e.URL="ui://mqzvkp1okzmn37",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameCardUI_SelfHandCards:[function(t,e,n){"use strict";cc._RF.push(e,"31429wQ7OFLSrLZJJWhQ7S+","GameCardUI_SelfHandCards");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameCardUI","SelfHandCards")},e.prototype.onConstruct=function(){this.m_card1=this.getChildAt(0),this.m_card2=this.getChildAt(1),this.m_card3=this.getChildAt(2),this.m_card4=this.getChildAt(3),this.m_card5=this.getChildAt(4),this.m_card6=this.getChildAt(5),this.m_card7=this.getChildAt(6),this.m_card8=this.getChildAt(7),this.m_card9=this.getChildAt(8),this.m_card10=this.getChildAt(9),this.m_card11=this.getChildAt(10),this.m_card12=this.getChildAt(11),this.m_card13=this.getChildAt(12),this.m_card14=this.getChildAt(13),this.m_card15=this.getChildAt(14),this.m_card16=this.getChildAt(15),this.m_card17=this.getChildAt(16),this.m_card18=this.getChildAt(17),this.m_card19=this.getChildAt(18),this.m_card20=this.getChildAt(19),this.m_card21=this.getChildAt(20),this.m_card22=this.getChildAt(21),this.m_card23=this.getChildAt(22),this.m_card24=this.getChildAt(23),this.m_card25=this.getChildAt(24),this.m_card26=this.getChildAt(25),this.m_card27=this.getChildAt(26)},e.URL="ui://mqzvkp1ogjyu2s",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameCardUI_TestSelfHandCards:[function(t,e,n){"use strict";cc._RF.push(e,"75eaa00KaFDJIvht23BWRlV","GameCardUI_TestSelfHandCards");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameCardUI","TestSelfHandCards")},e.prototype.onConstruct=function(){this.m_card1=this.getChildAt(0),this.m_card2=this.getChildAt(1),this.m_card3=this.getChildAt(2),this.m_card4=this.getChildAt(3),this.m_card5=this.getChildAt(4),this.m_card6=this.getChildAt(5),this.m_card7=this.getChildAt(6),this.m_card8=this.getChildAt(7),this.m_card9=this.getChildAt(8),this.m_card10=this.getChildAt(9),this.m_card11=this.getChildAt(10),this.m_card12=this.getChildAt(11),this.m_card13=this.getChildAt(12),this.m_card14=this.getChildAt(13),this.m_card15=this.getChildAt(14),this.m_card16=this.getChildAt(15),this.m_card17=this.getChildAt(16),this.m_card18=this.getChildAt(17),this.m_card19=this.getChildAt(18),this.m_card20=this.getChildAt(19),this.m_card21=this.getChildAt(20),this.m_card22=this.getChildAt(21),this.m_card23=this.getChildAt(22),this.m_card24=this.getChildAt(23),this.m_card25=this.getChildAt(24),this.m_card26=this.getChildAt(25),this.m_card27=this.getChildAt(26)},e.URL="ui://mqzvkp1okzmn38",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameCardUI:[function(t,e,n){"use strict";cc._RF.push(e,"796f5lDQeBBl7jL5EEWBy80","GameCardUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameCardUI=void 0;var r=t("../../../Framework/UI/BaseUI"),s=t("../../../Framework/Manager/EventManager"),c=t("./GameCardModel/GameCardUISelfHandModel"),l=t("./GameEvent"),u=t("./GameCardModel/ManagerOutModel"),d=t("../../Base/Utils/UtilView"),p=t("../../Base/Data/DataConstant"),h=t("../Common/PlayerInfoModel"),_=t("../../Base/Data/DatazOrder"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"sortingOrder",{get:function(){return _.DataZOrder.Default},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return r.UIType.ScenePart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._selfHandModelObj.onDestroy(),u.ManagerOutModel.instance.onDestroy()},e.prototype.onLoad=function(){this.view.m_touchArea.node.opacity=0,this.initData(),this.initListener(),this.initUI()},e.prototype.initData=function(){this._selfHandModelObj=c.GameCardUISelfHandModel.instance},e.prototype.initListener=function(){s.EventManager.instance.on(l.GameEvent.UPDATE_HAND_CARDS,this,this.onUpdateHandsUI),s.EventManager.instance.on(l.GameEvent.UPDATE_HAND_CARDS_DATA,this,this.onUpdateHandsData),s.EventManager.instance.on(l.GameEvent.UPDATE_LIPAI_CARDS,this,this.onUpdateLiPaiHandsUI),s.EventManager.instance.on(l.GameEvent.UPDATE_OUT_CARDS,this,this.onUpdateOutCardsUI),s.EventManager.instance.on(l.GameEvent.UPDATE_LEVEL_CARDS,this,this.onUpdateLevelCards),s.EventManager.instance.on(l.GameEvent.SETTING_CHANGE_LAYOUT,this,this.onUpdateSettingChangeLayout),s.EventManager.instance.on(l.GameEvent.TAKE_FIRST_ACTION,this,this.onTakeFirstAction),s.EventManager.instance.on(l.GameEvent.TOUCH_CARD_BEGIN,this,this.onTouchBeginCallBack),s.EventManager.instance.on(l.GameEvent.TOUCH_CARD_END,this,this.onTouchEndCallBack),this.view.m_touchArea.on(fgui.Event.TOUCH_BEGIN,this.onTouchDown,this),this.view.m_touchArea.on(fgui.Event.TOUCH_MOVE,this.onTouchMove,this),this.view.m_touchArea.on(fgui.Event.TOUCH_END,this.onTouchEnd,this)},e.prototype.initUI=function(){u.ManagerOutModel.instance.initOutUIModelObj(this.view),this._selfHandModelObj.init(this.view.m_selfHandCards),this.adapterUI()},e.prototype.adapterUI=function(){d.UtilView.isFullScreen()&&(this.view.m_outCards_Left.node.x+=p.DataConstant.ADAPTER_WIDTH_VALUE,this.view.m_outCards_Right.node.x-=p.DataConstant.ADAPTER_WIDTH_VALUE,this.view.m_selfHandCards.node.y+=10)},e.prototype.onUpdateHandsUI=function(t){this._selfHandModelObj.updateHandsUI(t)},e.prototype.onUpdateHandsData=function(t){this._selfHandModelObj.updateHandsData(t)},e.prototype.onUpdateLiPaiHandsUI=function(t){this._selfHandModelObj.updateLiPaiHandsUI(t)},e.prototype.onUpdateOutCardsUI=function(t){var e=this._selfHandModelObj.getGameCardLogic().changeFCardType(t.typeID||-1);if(t.putType=t.putType||1,t.seat!==h.LocalSeatEnum.ERROR){var n={seat:t.seat,typeID:e,cards:t.cards,putType:t.putType};u.ManagerOutModel.instance.updateOutCardsUI(n)}},e.prototype.onUpdateLevelCards=function(t){this._selfHandModelObj.updateLevelCards(t)},e.prototype.onUpdateSettingChangeLayout=function(t){this._selfHandModelObj.updateLayoutType(t)},e.prototype.onTakeFirstAction=function(){this._selfHandModelObj.takeFirstAction()},e.prototype.onTouchBeginCallBack=function(t){this.view.sortingOrder=t?_.DataZOrder.GameCardUI_1:_.DataZOrder.Default},e.prototype.onTouchEndCallBack=function(){this.view.sortingOrder=_.DataZOrder.Default},e.prototype.onTouchDown=function(t){this._selfHandModelObj.onTouchDown(t)},e.prototype.onTouchMove=function(t){this._selfHandModelObj.onTouchMove(t)},e.prototype.onTouchEnd=function(t){this._selfHandModelObj.onTouchEnd(t)},i([jsClass],e)}(r.BaseUI);n.GameCardUI=f,cc._RF.pop()},{"../../../Framework/Manager/EventManager":"EventManager","../../../Framework/UI/BaseUI":"BaseUI","../../Base/Data/DataConstant":"DataConstant","../../Base/Data/DatazOrder":"DatazOrder","../../Base/Utils/UtilView":"UtilView","../Common/PlayerInfoModel":"PlayerInfoModel","./GameCardModel/GameCardUISelfHandModel":"GameCardUISelfHandModel","./GameCardModel/ManagerOutModel":"ManagerOutModel","./GameEvent":"GameEvent"}],GameChatModel:[function(t,e,n){"use strict";cc._RF.push(e,"1bc89wms51J1aNTcoAO2WCd","GameChatModel");var o,a,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameChatModel=n.Limit_chat_emoji=n.LIMIT_EMOJI_INDEX=n.EMOJI_INDEX=n.ChatTab=n.ChatType=void 0;var s=t("../../../../Framework/Manager/EventManager"),c=t("../../../../Framework/Model/BaseModel"),l=t("../../../../Framework/Root/ModelRoot"),u=t("../../../Base/Data/DataEvent"),d=t("../../../Base/Data/DataProps"),p=t("../../../Base/Module/Network/SocketUtils"),h=t("../../GuanDan/GameEvent"),_=t("../../GuanDan/Proxy/Protocol/BaseProtocol"),f=t("../PlayerInfoModel");(function(t){t[t.NORMAL=0]="NORMAL",t[t.TEAM=1]="TEAM"})(n.ChatType||(n.ChatType={})),function(t){t[t.ALL=0]="ALL",t[t.EMOJI=1]="EMOJI",t[t.TEAM=2]="TEAM",t[t.LIMITEMOJI=3]="LIMITEMOJI"}(n.ChatTab||(n.ChatTab={})),function(t){t[t.MIN=0]="MIN",t[t.MAX=21]="MAX"}(n.EMOJI_INDEX||(n.EMOJI_INDEX={})),function(t){t[t.MIN=32]="MIN",t[t.MAX=34]="MAX"}(n.LIMIT_EMOJI_INDEX||(n.LIMIT_EMOJI_INDEX={})),n.Limit_chat_emoji=((a={})[0]={index:0,propID:d.PropIDEnum.EMOJI_ANGRY_CHICK},a[1]={index:1,propID:d.PropIDEnum.EMOJI_APPROVING_CHICK},a[2]={index:2,propID:d.PropIDEnum.EMOJI_PRAY_CHICK},a[d.PropIDEnum.EMOJI_ANGRY_CHICK]={index:0,propID:d.PropIDEnum.EMOJI_ANGRY_CHICK},a[d.PropIDEnum.EMOJI_APPROVING_CHICK]={index:1,propID:d.PropIDEnum.EMOJI_APPROVING_CHICK},a[d.PropIDEnum.EMOJI_PRAY_CHICK]={index:2,propID:d.PropIDEnum.EMOJI_PRAY_CHICK},a);var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e,"instance",{get:function(){return l.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.onDestroy=function(){},e.prototype.startListener=function(){this.initListener()},e.prototype.initListener=function(){p.SocketUtils.instance.registerGame(_.BaseProtocol.xyid.BXY_USE_PROP,this,this.onUseProp)},e.prototype.getAllChatStr=function(){var t=["\u4e0d\u6015\u795e\u4e00\u6837\u7684\u5bf9\u624b\uff0c\u5c31\u6015\u4f60\u8fd9\u6837\u7684\u961f\u53cb","\u724c\u634f\u624b\u91cc\u53c8\u4e0d\u4f1a\u4e0b\u86cb","\u80fd\u4e0d\u80fd\u5feb\u70b9\u554a\uff0c\u6211\u7b49\u5230\u82b1\u513f\u90fd\u8c22\u4e86","\u8d76\u7d27\u7684\u554a\uff0c\u6041\u58a8\u8ff9\u7684","\u724c\u6253\u6210\u8fd9\u6837\uff0c\u8fd8\u597d\u610f\u601d\u602a\u522b\u4eba","\u8fd9\u628a\u9760\u4f60\u4e86","\u8fd9\u4e2a\u724c\uff0c\u4f60\u4eec\u4ee8\u4e00\u8d77\u4e0a\u5427\uff0c\u6211\u8d76\u65f6\u95f4","\u9047\u5230\u6211\u662f\u4f60\u4e00\u751f\u7684\u5e78\u8fd0","\u624b\u6296\u4e86\u4e0b\uff0c\u51fa\u9519\u724c\u4e86","\u6253\u5f97\u4e0d\u9519\u54e6"];return 2===f.PlayerInfoModel.instance.getNowGamePlayer()&&(t=t.filter(function(t,e){return 0!=e&&(e<4||e>7)})),t},e.prototype.getTeamChatStr=function(){return["\u5f00\u706b\uff0c\u70b8\u4ed6\uff01","\u8ba9\u6211\u6765\uff0c\u6211\u80fd\u63a5","\u522b\u6025\uff0c\u8fc7\u4e00\u624b\u770b\u770b","\u4e3a\u4f60\u75af\u72c2\u6253call","\u8fd9\u724c\u6211\u88c2\u5f00\u4e86","\u8fd9\u628a\u6211\u6765\u51b2\uff0c\u4f60\u8f85\u52a9","\u6211\u7684\u5f39\u836f\u6253\u5149\u4e86\uff0c\u5269\u4e0b\u9760\u4f60\u4e86","\u6211\u542c\u724c\u4e86\uff0c\u4f60\u968f\u610f","\u4e0d\u597d\u6253\u5c31\u8fc7\u5457\uff0c\u540e\u9762\u8fd8\u6709\u4eba\u5462","\u67ff\u5b50\u62e3\u8f6f\u7684\u634f","\u559d\u6c34\u585e\u7259\uff0c\u6253\u5565\u6ca1\u5565","\u8001\u94c1\uff0c\u8fd9\u4e48\u51fa\u826f\u5fc3\u4e0d\u4f1a\u75db\u5417\uff1f"]},e.prototype.useProp=function(t){var e=new _.BaseProtocol.msgUseProp;e.propID=t.propID,e.fromAreaID=t.fromAreaID,e.fromNumID=t.fromNumID,e.toAreaID=t.toAreaID,e.toNumID=t.toNumID,e.nErrorCode=t.errorCode,p.SocketUtils.instance.notify(e)},e.prototype.onUseProp=function(t){0==t.nErrorCode?s.EventManager.instance.emit(h.GameEvent.SEND_PROP,{fromId:t.fromNumID,toId:t.toNumID,propId:t.propID}):s.EventManager.instance.emit(u.DataEvent.ToastData,"\u9053\u5177\u4f7f\u7528\u5931\u8d25")},r([jsClass],e)}(c.BaseModel);n.GameChatModel=m,cc.systemEvent.once("GameRoot.inited",function(){l.ModelRoot.instance.add(m)}),cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Model/BaseModel":"BaseModel","../../../../Framework/Root/ModelRoot":"ModelRoot","../../../Base/Data/DataEvent":"DataEvent","../../../Base/Data/DataProps":"DataProps","../../../Base/Module/Network/SocketUtils":"SocketUtils","../../GuanDan/GameEvent":"GameEvent","../../GuanDan/Proxy/Protocol/BaseProtocol":"BaseProtocol","../PlayerInfoModel":"PlayerInfoModel"}],GameChatRecordModel:[function(t,e,n){"use strict";cc._RF.push(e,"b3c86FXuYdGYpG9Br8L0T3l","GameChatRecordModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameChatRecordModel=n.RecordTouchStateEnum=void 0;var r,s=t("../../../../Framework/Manager/AudioManager"),c=t("../../../../Framework/Manager/CoroutineManager"),l=t("../../../../Framework/Manager/EventManager"),u=t("../../../../Framework/Manager/UIManager"),d=t("../../../../Framework/Model/BaseModel"),p=t("../../../../Framework/Root/ModelRoot"),h=t("../../../Base/Data/DataBfConfig"),_=t("../../../Base/Data/DataEvent"),f=t("../../../Base/Module/Platform/Const/PlatformEventType"),m=t("../../../Base/Module/Platform/Const/Scope"),g=t("../../../Base/Module/Platform/PlatformManager"),y=t("../../../UserInfo/UserInfoModel"),I=t("../../GuanDan/GameEvent"),C=t("../GameCommonModel"),M=t("./GameChatRecordProxy"),v=t("./GameChatRecordUI");(function(t){t[t.BEGIN=0]="BEGIN",t[t.MOVE_CANCEL=1]="MOVE_CANCEL",t[t.END=2]="END"})(r=n.RecordTouchStateEnum||(n.RecordTouchStateEnum={}));var E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return p.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return M.GameChatRecordProxy.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){l.EventManager.instance.on(I.GameEvent.NOtifyChatRecordStateChanged,this,this.onRecordStateChanged),l.EventManager.instance.on(f.PlatformEventType.RecorderStart,this,this.onRecorderStart),l.EventManager.instance.on(f.PlatformEventType.RecorderStop,this,this.onRecorderStop)},e.prototype.onRecordStateChanged=function(t){var e=this;c.CoroutineManager.instance.wait(function(){return!e._scopeRequiring},function(){switch(t){case r.BEGIN:e.requireScope(function(t,n){n?e.startRecord():t&&g.PlatformManager.instance.platform.showToast("\u6388\u6743\u6210\u529f\uff0c\u8bf7\u6309\u8bed\u97f3\u6309\u94ae")});break;case r.MOVE_CANCEL:e.cancelRecord();break;case r.END:e.stopRecord()}},this)},e.prototype.requireScope=function(t){var e=this;this._scopeRequiring=!0,g.PlatformManager.instance.platform.requireScope(m.Scope.record,"\u9700\u8981\u83b7\u53d6\u5f55\u97f3\u6743\u9650\u7528\u4e8e\u8bed\u97f3\u804a\u5929\uff01",function(n,o){e._scopeRequiring=!1,t&&t(n,o)})},e.prototype.startRecord=function(){console.warn("startRecord"),this._recording||(this._recording=!0,this._curRecordState=r.BEGIN,u.UIManager.instance.isExist(v.default)?u.UIManager.instance.get(v.default).then(function(t){t.changeRecordState(v.COpenRecordEnum.START)}):u.UIManager.instance.open(v.default).then(function(t){t.changeRecordState(v.COpenRecordEnum.START)}),g.PlatformManager.instance.platform.startRecord({duration:15e3,sampleRate:8e3,numberOfChannels:1,encodeBitRate:16e3,format:"mp3"}))},e.prototype.cancelRecord=function(){console.warn("cancelRecord"),this._recording&&(this._recording=!1,this._curRecordState=r.MOVE_CANCEL,u.UIManager.instance.isExist(v.default)&&u.UIManager.instance.get(v.default).then(function(t){t.changeRecordState(v.COpenRecordEnum.MOVE_CANCEL)}),g.PlatformManager.instance.platform.stopRecord())},e.prototype.stopRecord=function(){console.warn("stopRecord"),this._recording&&(this._recording=!1,g.PlatformManager.instance.platform.stopRecord()),this._curRecordState===r.BEGIN&&(this._curRecordState=r.END),u.UIManager.instance.isExist(v.default)&&u.UIManager.instance.close(v.default)},e.prototype.onRecorderStart=function(){console.warn("onRecorderStart"),s.AudioManager.instance.pauseEffect(),s.AudioManager.instance.pauseMusic()},e.prototype.onRecorderStop=function(t,e,n){console.warn("onRecorderStop:",t,e,n),s.AudioManager.instance.resumeEffect(),s.AudioManager.instance.resumeMusic(),this._curRecordState!==r.MOVE_CANCEL?t<=1e3?(console.warn("onRecorderStop:chat recording stopped, too short to upload"),l.EventManager.instance.emit(_.DataEvent.ToastData,"\u8bf4\u8bdd\u65f6\u95f4\u592a\u77ed\u54e6~",1,!1)):(this._curRecordState===r.BEGIN&&(u.UIManager.instance.isExist(v.default)&&u.UIManager.instance.close(v.default),l.EventManager.instance.emit(_.DataEvent.ToastData,"\u5355\u6b21\u8bed\u97f3\u65f6\u95f4\u4e0d\u53ef\u4ee5\u592a\u957f\u54e6~",1,!1)),console.warn("onRecorderStop:chat recording stopped, uploading"),e&&n&&this.uploadRecord(e,function(t){t?C.GameCommonModel.instance.reqChatMessage({numID:y.UserInfoModel.instance.userInfo.numID,areaID:h.DataBfConfig.areaID,msg:t,channel:club.client.common.ChatMessage.CHANNELS.GROUP,type:club.client.common.ChatMessage.TYPES.CT_AD_1}):l.EventManager.instance.emit(_.DataEvent.ToastData,"\u5f55\u97f3\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5")})):console.warn("onRecorderStop:chat recording stopped by cancel")},e.prototype.uploadRecord=function(t,e){var n=this;this.checkOssData(function(){var o=n._ossData.dir+"fpftrrdlrs_"+y.UserInfoModel.instance.userInfo.numID+"_"+Math.floor(Date.now()/1e3)+".mp3";console.log("uploadRecord:",o),console.log("uploadRecord.host:",n._ossData.host),g.PlatformManager.instance.platform.uploadFile(n._ossData.host,o,t,"key","file",n._ossData,e)})},e.prototype.checkOssData=function(t){var e=this;this._ossData&&Date.now()<this._ossExpire-3e4?t&&t():this.proxy.reqOssH5("guandan_h5_record",300).then(function(n){e._ossData={host:n.host,dir:n.dir,policy:n.policy,signature:n.signature,expire:n.expire+"",OSSAccessKeyId:n.accessid},e._ossExpire=Date.now()+3e5,t&&t()},function(t){return console.error("ApiHub oss_h5 error:",t)})},i([jsClass],e)}(d.BaseModel);n.GameChatRecordModel=E,cc.systemEvent.once("GameRoot.inited",function(){p.ModelRoot.instance.add(E)}),cc._RF.pop()},{"../../../../Framework/Manager/AudioManager":"AudioManager","../../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Manager/UIManager":"UIManager","../../../../Framework/Model/BaseModel":"BaseModel","../../../../Framework/Root/ModelRoot":"ModelRoot","../../../Base/Data/DataBfConfig":"DataBfConfig","../../../Base/Data/DataEvent":"DataEvent","../../../Base/Module/Platform/Const/PlatformEventType":"PlatformEventType","../../../Base/Module/Platform/Const/Scope":"Scope","../../../Base/Module/Platform/PlatformManager":"PlatformManager","../../../UserInfo/UserInfoModel":"UserInfoModel","../../GuanDan/GameEvent":"GameEvent","../GameCommonModel":"GameCommonModel","./GameChatRecordProxy":"GameChatRecordProxy","./GameChatRecordUI":"GameChatRecordUI"}],GameChatRecordProxy:[function(t,e,n){"use strict";cc._RF.push(e,"0e780U/RkBJ35ciruJQOKHZ","GameChatRecordProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function r(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.GameChatRecordProxy=void 0;var c=t("../../../../Framework/Proxy/BaseProxy"),l=t("../../../../Framework/Root/ProxyRoot"),u=t("../../../Base/Module/ApiHub/LogicApiHub"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SERVER="storage",e.METHOD="get",e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return l.ProxyRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.reqOssH5=function(t,e){return void 0===e&&(e=300),r(this,void 0,Promise,function(){var n;return s(this,function(o){switch(o.label){case 0:return n={dir:t,expire:e},[4,u.LogicApiHub.apiHubPost(this.SERVER,this.METHOD,"oss/h5",n)];case 1:return[2,o.sent()]}})})},i([jsClass],e)}(c.BaseProxy);n.GameChatRecordProxy=d,cc.systemEvent.once("GameRoot.inited",function(){l.ProxyRoot.instance.add(d)}),cc._RF.pop()},{"../../../../Framework/Proxy/BaseProxy":"BaseProxy","../../../../Framework/Root/ProxyRoot":"ProxyRoot","../../../Base/Module/ApiHub/LogicApiHub":"LogicApiHub"}],GameChatRecordUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"b1c2aThufFC4JserSTsoEK6","GameChatRecordUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./GameChatRecordUI_MainPanel"),a=t("./GameChatRecordUI_Window"),i=t("./GameChatRecordUI_record"),r=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default)},t}();n.default=r,cc._RF.pop()},{"./GameChatRecordUI_MainPanel":"GameChatRecordUI_MainPanel","./GameChatRecordUI_Window":"GameChatRecordUI_Window","./GameChatRecordUI_record":"GameChatRecordUI_record"}],GameChatRecordUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"d08eaBWC2JI+KSyqnl9naqi","GameChatRecordUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameChatRecordUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Window=this.getChildAt(0)},e.URL="ui://ce110woak39v0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameChatRecordUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"e8f65+5FGFLp73oM2mB56Z3","GameChatRecordUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameChatRecordUI","Window")},e.prototype.onConstruct=function(){this.m_COpenState=this.getControllerAt(0)},e.URL="ui://ce110woak39v1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameChatRecordUI_record:[function(t,e,n){"use strict";cc._RF.push(e,"2ad86Wckq9CxbGhlAE2ad/l","GameChatRecordUI_record");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameChatRecordUI","record")},e.prototype.onConstruct=function(){this.m_t0=this.getTransitionAt(0)},e.URL="ui://ce110woawtx7q",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameChatRecordUI:[function(t,e,n){"use strict";cc._RF.push(e,"258d9pHMB1JdLB4FPaNH6TZ","GameChatRecordUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.COpenRecordEnum=void 0;var r=t("../../../../Framework/UI/BaseUI"),s=t("../../../../Framework/UI/FadeUI"),c=t("../../../Base/Data/DatazOrder");(function(t){t[t.START=0]="START",t[t.TIME_TOO_SHORT=1]="TIME_TOO_SHORT",t[t.MOVE_CANCEL=2]="MOVE_CANCEL"})(n.COpenRecordEnum||(n.COpenRecordEnum={}));var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"uiType",{get:function(){return r.UIType.ScenePart},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sortingOrder",{get:function(){return c.DataZOrder.GameChatRecordUI},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"willShowLoading",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){},e.prototype.changeRecordState=function(t){this.view.m_Window.m_COpenState.selectedIndex=t},i([jsClass],e)}(s.FadeUI);n.default=l,cc._RF.pop()},{"../../../../Framework/UI/BaseUI":"BaseUI","../../../../Framework/UI/FadeUI":"FadeUI","../../../Base/Data/DatazOrder":"DatazOrder"}],GameChatUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"d6956+WOZhPmYjBd0zsPIk1","GameChatUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./GameChatUI_BtnLimitEmoji"),a=t("./GameChatUI_MainPanel"),i=t("./GameChatUI_ChatWindow"),r=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default)},t}();n.default=r,cc._RF.pop()},{"./GameChatUI_BtnLimitEmoji":"GameChatUI_BtnLimitEmoji","./GameChatUI_ChatWindow":"GameChatUI_ChatWindow","./GameChatUI_MainPanel":"GameChatUI_MainPanel"}],GameChatUI_BtnLimitEmoji:[function(t,e,n){"use strict";cc._RF.push(e,"e5712OKUg1EULc4wqt1hnnH","GameChatUI_BtnLimitEmoji");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameChatUI","BtnLimitEmoji")},e.prototype.onConstruct=function(){this.m_cLock=this.getControllerAt(0),this.m_cCount=this.getControllerAt(1),this.m_txtCount=this.getChildAt(5)},e.URL="ui://s1f2dmkrl21g39",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],GameChatUI_ChatWindow:[function(t,e,n){"use strict";cc._RF.push(e,"4c76c1hli9BxLgit3Cu9w+i","GameChatUI_ChatWindow");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameChatUI","ChatWindow")},e.prototype.onConstruct=function(){this.m_ctrlTab=this.getControllerAt(0),this.m_ctrlType=this.getControllerAt(1),this.m_listAll=this.getChildAt(2),this.m_listTeam=this.getChildAt(3),this.m_listEmoji=this.getChildAt(4),this.m_listLimitEmoji=this.getChildAt(5),this.m_btnVoice=this.getChildAt(6),this.m_btnShield=this.getChildAt(7),this.m_btnAll=this.getChildAt(8),this.m_btnEmoji=this.getChildAt(9),this.m_btnLimitEmoji=this.getChildAt(10),this.m_btnTeam=this.getChildAt(11),this.m_btnAll2=this.getChildAt(12),this.m_btnEmoji2=this.getChildAt(13),this.m_btnLimitEmoji2=this.getChildAt(14)},e.URL="ui://s1f2dmkrxfp31b",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameChatUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"83f43QWTS1A4K40qkI6uIKf","GameChatUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameChatUI","MainPanel")},e.prototype.onConstruct=function(){this.m_exitBg=this.getChildAt(0),this.m_chatWindow=this.getChildAt(1)},e.URL="ui://s1f2dmkrxfp31a",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameChatUI:[function(t,e,n){"use strict";cc._RF.push(e,"255ccR9vahK2aN2uchvufdo","GameChatUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameChatUI=void 0;var r,s,c=t("../../../../Framework/UI/FadeUI"),l=t("../../../../Framework/UI/BaseUI"),u=t("./GameChatModel"),d=t("../../../Base/Data/DataBfConfig"),p=t("../../../UserInfo/UserInfoModel"),h=t("../GameCommonModel"),_=t("../PlayerInfoModel"),f=t("../../../Base/Utils/UtilView"),m=t("../../../Base/Data/DataConstant"),g=t("../../../Base/Data/DataLocalStorageKey"),y=t("../../../Base/Data/DataEvent"),I=t("../../../../Framework/Manager/EventManager"),C=t("../../GuanDan/GameEvent"),M=t("../GameChatRecordUI/GameChatRecordModel"),v=t("../../../Base/Module/BfAnalytics/BfasManager"),E=t("../../../Base/Module/BfAnalytics/DataPointID"),A=t("../../../Base/Data/DatazOrder");(function(t){t[t.UNLOCK=0]="UNLOCK",t[t.LOCK=1]="LOCK"})(r||(r={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(s||(s={}));var P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrChatAll=[],e.arrChatTeam=[],e._touchID=-1,e}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return u.GameChatModel.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return l.UIType.ScenePart},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sortingOrder",{get:function(){return A.DataZOrder.GameChatUI},enumerable:!1,configurable:!0}),Object.defineProperty(e,"willClearOnDestroy",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.init=function(t){this.view.m_chatWindow.m_ctrlType.selectedIndex=t,this.initData(),this.initListener(),this.initUI()},e.prototype.initData=function(){this.arrChatAll=this.model.getAllChatStr(),this.arrChatTeam=this.model.getTeamChatStr()},e.prototype.initListener=function(){this.view.m_exitBg.onClick(this.onClickExitBg,this),this.view.m_chatWindow.m_btnAll.onClick(this.onClickAll,this),this.view.m_chatWindow.m_btnAll2.onClick(this.onClickAll,this),this.view.m_chatWindow.m_btnEmoji.onClick(this.onClickEmoji,this),this.view.m_chatWindow.m_btnEmoji2.onClick(this.onClickEmoji,this),this.view.m_chatWindow.m_btnTeam.onClick(this.onClickTeam,this),this.view.m_chatWindow.m_btnShield.onClick(this.onClickShield,this),this.view.m_chatWindow.m_btnLimitEmoji.onClick(this.onClickLimitEmoji,this),this.view.m_chatWindow.m_btnLimitEmoji2.onClick(this.onClickLimitEmoji,this),this.view.m_chatWindow.m_btnVoice.on(fgui.Event.TOUCH_BEGIN,this.onChatRecordTouchBegin,this),this.view.m_chatWindow.m_btnVoice.on(fgui.Event.TOUCH_MOVE,this.onChatRecordTouchMove,this),this.view.m_chatWindow.m_btnVoice.on(fgui.Event.TOUCH_END,this.onChatRecordTouchEnd,this),this.view.m_chatWindow.m_listAll.on(fgui.Event.CLICK_ITEM,this.onClickChatItem,this),this.view.m_chatWindow.m_listTeam.on(fgui.Event.CLICK_ITEM,this.onClickTeamItem,this),this.view.m_chatWindow.m_listEmoji.on(fgui.Event.CLICK_ITEM,this.onClickEmojiItem,this),this.view.m_chatWindow.m_listLimitEmoji.on(fgui.Event.CLICK_ITEM,this.onClickLimitEmojiItem,this),I.EventManager.instance.on(C.GameEvent.SEND_PROP,this,this.onSendProp)},e.prototype.initUI=function(){f.UtilView.isFullScreen()&&(this.view.m_chatWindow.x-=m.DataConstant.ADAPTER_WIDTH_VALUE);var t=this.view.m_chatWindow.m_listAll;t.itemRenderer=this.renderAllItem.bind(this),t.setVirtual(),t.numItems=this.arrChatAll.length;var e=localStorage.getItem(g.DataLocalStorage.addKeyWithNumID(g.LocalStorageKey.SHEILD_ALL_CHAT));if(e=!!e&&1==Number(e),this.view.m_chatWindow.m_btnShield.selected=e,this.view.m_chatWindow.m_ctrlType.selectedIndex==u.ChatType.NORMAL)n=(n=localStorage.getItem(g.DataLocalStorage.addKeyWithNumID(g.LocalStorageKey.CHAT_INDEX)))?Number(n):u.ChatTab.ALL,this.view.m_chatWindow.m_ctrlTab.selectedIndex=n;else{var n,o=this.view.m_chatWindow.m_listTeam;o.itemRenderer=this.renderTeamItem.bind(this),o.numItems=this.arrChatTeam.length,n=(n=localStorage.getItem(g.DataLocalStorage.addKeyWithNumID(g.LocalStorageKey.TEAM_CHAT_INDEX)))?Number(n):u.ChatTab.TEAM,this.view.m_chatWindow.m_ctrlTab.selectedIndex=n,u.ChatTab.TEAM==n&&v.BfasManager.instance.sendEvt(E.ChatRecordPoidID.CLICK_TEAM)}this.initLimitEmoji()},e.prototype.renderAllItem=function(t,e){e.text=this.arrChatAll[t]},e.prototype.renderTeamItem=function(t,e){e.text=this.arrChatTeam[t]},e.prototype.onClickExitBg=function(){-1===this._touchID&&this.onExitClick()},e.prototype.onClickAll=function(){this.view.m_chatWindow.m_ctrlType.selectedIndex==u.ChatType.NORMAL?localStorage.setItem(g.DataLocalStorage.addKeyWithNumID(g.LocalStorageKey.CHAT_INDEX),""+u.ChatTab.ALL):localStorage.setItem(g.DataLocalStorage.addKeyWithNumID(g.LocalStorageKey.TEAM_CHAT_INDEX),""+u.ChatTab.ALL)},e.prototype.onClickEmoji=function(){this.view.m_chatWindow.m_ctrlType.selectedIndex==u.ChatType.NORMAL?localStorage.setItem(g.DataLocalStorage.addKeyWithNumID(g.LocalStorageKey.CHAT_INDEX),""+u.ChatTab.EMOJI):localStorage.setItem(g.DataLocalStorage.addKeyWithNumID(g.LocalStorageKey.TEAM_CHAT_INDEX),""+u.ChatTab.EMOJI)},e.prototype.onClickLimitEmoji=function(){this.view.m_chatWindow.m_ctrlType.selectedIndex==u.ChatType.NORMAL?localStorage.setItem(g.DataLocalStorage.addKeyWithNumID(g.LocalStorageKey.CHAT_INDEX),""+u.ChatTab.LIMITEMOJI):localStorage.setItem(g.DataLocalStorage.addKeyWithNumID(g.LocalStorageKey.TEAM_CHAT_INDEX),""+u.ChatTab.LIMITEMOJI),this.initLimitEmoji()},e.prototype.onClickTeam=function(){v.BfasManager.instance.sendEvt(E.ChatRecordPoidID.CLICK_TEAM),localStorage.setItem(g.DataLocalStorage.addKeyWithNumID(g.LocalStorageKey.TEAM_CHAT_INDEX),""+u.ChatTab.TEAM)},e.prototype.onChatRecordTouchBegin=function(t){this.checkCanClick(function(){I.EventManager.instance.emit(y.DataEvent.ToastData,"\u6682\u65f6\u65e0\u6cd5\u53d1\u8bed\u97f3\uff0c\u5f00\u5c40\u5373\u53ef\u6062\u590d")})&&-1===this._touchID&&(v.BfasManager.instance.sendEvt(E.ChatRecordPoidID.CLICK_RECORD),this._touchID=t.touchId,this._chatRecordTouchPos=this.convertTouchPosToGL(t.pos),I.EventManager.instance.emit(C.GameEvent.NOtifyChatRecordStateChanged,M.RecordTouchStateEnum.BEGIN),t.captureTouch())},e.prototype.onChatRecordTouchMove=function(t){if(-1!=this._touchID&&t.touchId===this._touchID&&this._chatRecordTouchPos){var e=this.convertTouchPosToGL(t.pos);this.isTouchComp(this.view.m_chatWindow.m_btnVoice,e)||(this._chatRecordTouchPos=null,I.EventManager.instance.emit(C.GameEvent.NOtifyChatRecordStateChanged,M.RecordTouchStateEnum.MOVE_CANCEL))}},e.prototype.onChatRecordTouchEnd=function(t){-1!=this._touchID&&t.touchId===this._touchID&&(this._touchID=-1,this._chatRecordTouchPos&&(this._chatRecordTouchPos=null),I.EventManager.instance.emit(C.GameEvent.NOtifyChatRecordStateChanged,M.RecordTouchStateEnum.END))},e.prototype.convertTouchPosToGL=function(t){var e=fgui.GRoot.inst.height;return new cc.Vec2(t.x,e-t.y)},e.prototype.isTouchComp=function(t,e){var n=t.height,o=t.width,a=t.node.parent.parent.convertToWorldSpaceAR(t.node.getPosition());return cc.rect(a.x-.5*o,a.y-.5*n,o,n).contains(e)},e.prototype.onClickShield=function(){var t=this.view.m_chatWindow.m_btnShield.selected?"1":"0";localStorage.setItem(g.DataLocalStorage.addKeyWithNumID(g.LocalStorageKey.SHEILD_ALL_CHAT),t)},e.prototype.onClickChatItem=function(t){if(this.checkCanClick(function(){I.EventManager.instance.emit(y.DataEvent.ToastData,"\u6682\u65f6\u65e0\u6cd5\u53d1\u8a00\uff0c\u5f00\u5c40\u5373\u53ef\u6062\u590d")})){var e={numID:p.UserInfoModel.instance.userInfo.numID,areaID:d.DataBfConfig.areaID,msg:t.text};h.GameCommonModel.instance.reqChatMessage(e),this.onExitClick()}},e.prototype.onClickTeamItem=function(t){if(this.checkCanClick(function(){I.EventManager.instance.emit(y.DataEvent.ToastData,"\u6682\u65f6\u65e0\u6cd5\u53d1\u8a00\uff0c\u5f00\u5c40\u5373\u53ef\u6062\u590d")})){var e=this.view.m_chatWindow.m_listTeam.getChildIndex(t);v.BfasManager.instance.sendEvt(E.ChatRecordPoidID["CLICK_TEAM_ITEM_"+(e+1)]);var n={numID:p.UserInfoModel.instance.userInfo.numID,areaID:d.DataBfConfig.areaID,channel:club.client.common.ChatMessage.CHANNELS.GROUP,msg:t.text};h.GameCommonModel.instance.reqChatMessage(n),this.onExitClick()}},e.prototype.onClickEmojiItem=function(t){if(this.checkCanClick(function(){I.EventManager.instance.emit(y.DataEvent.ToastData,"\u6682\u65f6\u65e0\u6cd5\u53d1\u8868\u60c5\uff0c\u5f00\u5c40\u5373\u53ef\u6062\u590d")})){var e={numID:p.UserInfoModel.instance.userInfo.numID,areaID:d.DataBfConfig.areaID,msg:"/"+this.view.m_chatWindow.m_listEmoji.getChildIndex(t)};h.GameCommonModel.instance.reqChatMessage(e),this.onExitClick()}},e.prototype.onClickLimitEmojiItem=function(t){var e;if(this.checkCanClick(function(){I.EventManager.instance.emit(y.DataEvent.ToastData,"\u6682\u65f6\u65e0\u6cd5\u53d1\u8868\u60c5\uff0c\u5f00\u5c40\u5373\u53ef\u6062\u590d")})){var n=this.view.m_chatWindow.m_listLimitEmoji.getChildIndex(t),o={numID:p.UserInfoModel.instance.userInfo.numID,areaID:d.DataBfConfig.areaID,msg:"/"+(n+u.LIMIT_EMOJI_INDEX.MIN)},a=(null===(e=u.Limit_chat_emoji[n])||void 0===e?void 0:e.propID)||0;if(p.UserInfoModel.instance.isTimePropActive(a))h.GameCommonModel.instance.reqChatMessage(o),this.onExitClick();else if(p.UserInfoModel.instance.getPropCount(a)>0){var i={propID:a,fromAreaID:d.DataBfConfig.areaID,toAreaID:d.DataBfConfig.areaID,fromNumID:p.UserInfoModel.instance.userInfo.numID,toNumID:p.UserInfoModel.instance.userInfo.numID,errorCode:0};this.model.useProp(i)}}},e.prototype.onSendProp=function(t){var e=u.Limit_chat_emoji[t.propId];if(e){var n=e.index,o={numID:p.UserInfoModel.instance.userInfo.numID,areaID:d.DataBfConfig.areaID,msg:"/"+(n+u.LIMIT_EMOJI_INDEX.MIN)};h.GameCommonModel.instance.reqChatMessage(o),p.UserInfoModel.instance.addProp(t.propId,-1),this.onExitClick()}},e.prototype.checkCanClick=function(t){var e=_.PlayerInfoModel.instance.getPlayerByLocalSeat(_.LocalSeatEnum.SELF);return e&&e.playstate!==club.client.game.PlayState.PLAYSTATES.PLAYSTATE_IN_ROOM&&e.playstate!==club.client.game.PlayState.PLAYSTATES.PLAYSTATE_IN_QUEUE||(t&&t(),!1)},e.prototype.initLimitEmoji=function(){for(var t,e=this.view.m_chatWindow.m_listLimitEmoji.numItems,n=0;n<e;n++){var o=this.view.m_chatWindow.m_listLimitEmoji.getChildAt(n),a=(null===(t=u.Limit_chat_emoji[n])||void 0===t?void 0:t.propID)||0;p.UserInfoModel.instance.isTimePropActive(a)?(o.m_cLock.selectedIndex=r.UNLOCK,o.m_cCount.selectedIndex=s.HIDE):p.UserInfoModel.instance.getPropCount(a)>0?(o.m_cLock.selectedIndex=r.UNLOCK,o.m_cCount.selectedIndex=s.SHOW,o.m_txtCount.text=p.UserInfoModel.instance.getPropCount(a)+""):(o.m_cLock.selectedIndex=r.LOCK,o.m_cCount.selectedIndex=s.HIDE,o.enabled=!1)}},i([jsClass],e)}(c.FadeUI);n.GameChatUI=P,cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/UI/BaseUI":"BaseUI","../../../../Framework/UI/FadeUI":"FadeUI","../../../Base/Data/DataBfConfig":"DataBfConfig","../../../Base/Data/DataConstant":"DataConstant","../../../Base/Data/DataEvent":"DataEvent","../../../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../../../Base/Data/DatazOrder":"DatazOrder","../../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../../Base/Utils/UtilView":"UtilView","../../../UserInfo/UserInfoModel":"UserInfoModel","../../GuanDan/GameEvent":"GameEvent","../GameChatRecordUI/GameChatRecordModel":"GameChatRecordModel","../GameCommonModel":"GameCommonModel","../PlayerInfoModel":"PlayerInfoModel","./GameChatModel":"GameChatModel"}],GameCommonModel:[function(t,e,n){"use strict";cc._RF.push(e,"2e36fo6dlVOapQvu8dX+wh5","GameCommonModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameCommonModel=n.LeaveResonEnum=n.ReqProlongBoxEnum=void 0;var r,s=t("../../../Framework/Manager/EventManager"),c=t("../../../Framework/Model/BaseModel"),l=t("../../../Framework/Root/ModelRoot"),u=t("../../Base/Module/Network/SocketUtils"),d=t("../../Base/Module/Network/Base/Processid"),p=t("./PlayerInfoModel"),h=t("../GuanDan/Proxy/GameTableProxy"),_=t("../GuanDan/Proxy/GameProxy"),f=t("./GameCommonProxy"),m=t("../../Base/Module/Network/protocol/CommonProtocol"),g=t("../../../Framework/Utils/Base64"),y=t("../GuanDan/GameEvent"),I=t("../../UserInfo/UserInfoModel"),C=t("../../Base/Utils/UtilClub"),M=t("../../../Framework/Manager/UIManager"),v=t("../../Base/Module/Room/RoomModel"),E=t("../GuanDan/Proxy/Protocol/BaseProtocol"),A=t("./GameJSUI/GameJSUI"),P=t("../../Base/Data/DataEvent"),b=t("../../Base/View/Common/DialogUI"),U=t("../../Base/Module/Room/RoomProxy"),S=t("../GuanDan/Model/GameModel"),T=t("../../CreateRoomUI/CreateRoomModel/CreateRoomManagerModel"),R=t("../../Base/Data/DataBfConfig"),w=t("../GuanDan/GameUI"),D=t("../GuanDan/ChangeSeatUI"),O=t("../GuanDan/GameContinueTable/GameContinueTableModel"),L=t("../../Base/Module/BfAnalytics/BfasManager"),G=t("../../Base/Module/BfAnalytics/DataPointID"),B=t("../../FriendTeam/FriendTeamModel"),N=t("../../Match/MatchModel"),F=t("../../Match/MatchConstant");(function(t){t[t.FLAG_REQ=0]="FLAG_REQ",t[t.FLAG_AGREE=1]="FLAG_AGREE",t[t.FLAG_REFUSE=2]="FLAG_REFUSE"})(n.ReqProlongBoxEnum||(n.ReqProlongBoxEnum={})),function(t){t[t.CANCEL_INQUEUE=1]="CANCEL_INQUEUE"}(r=n.LeaveResonEnum||(n.LeaveResonEnum={}));var k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isStartGameListener=!1,e._enterType=B.FTTeamTypeEnum.DEFAULT,e._matchSubID=null,e._subID=0,e._clubID=0,e._appID=0,e._boxID=0,e._boxKey=0,e._creator=0,e._memberFlag=B.FriendTeamStatusEnum.NONE,e._partnerId=0,e._partnernumId=0,e._partnerType=null,e._robotNumid={},e}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return l.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return f.GameCommonProxy.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){},e.prototype.isStartGameListener=function(){return this._isStartGameListener},e.prototype.setEnterType=function(t){this._enterType=t},e.prototype.getEnterType=function(){return this._enterType},e.prototype.saveEnterMatchInfo=function(t){this._matchSubID=t},e.prototype.isMatchRoomModel=function(){return null!==this._matchSubID},e.prototype.resetEnterMatchInfo=function(){this._matchSubID=null},e.prototype.startListener=function(){this._isStartGameListener=!0,h.GameTableProxy.instance.startListener(),_.GameProxy.instance.startListener(),u.SocketUtils.instance.register(d.Processid.clubGame,club.client.game.MSGID.PLAYER_USERINFO,this,this.onPlayerUserInfo,null,!0),u.SocketUtils.instance.register(d.Processid.clubGame,club.client.game.MSGID.PLAYER_GAMEINFO,this,this.onGameInfo,null,!0),u.SocketUtils.instance.register(d.Processid.clubGame,club.client.game.MSGID.PLAYER_PROPINFO,this,this.onPropInfo,null,!0),u.SocketUtils.instance.register(d.Processid.clubGame,club.client.game.MSGID.PLAYSTATE,this,this.onPlayerState,null,!0),u.SocketUtils.instance.register(d.Processid.clubGame,club.client.game.MSGID.TABLESTATE,this,this.onTableState,null,!0),u.SocketUtils.instance.register(d.Processid.clubGame,club.client.game.MSGID.RESP_CHANGESEAT,this,this.onChangeSeat,null,!0),u.SocketUtils.instance.register(d.Processid.clubGame,club.client.common.MSGID.CHATMESSAGE,this,this.respChatMessage,null,!0),u.SocketUtils.instance.register(d.Processid.clubGame,club.client.game.MSGID.RESP_PARTNERLEAVEGAME,this,this.respPartnerLeaveGame,null,!0),u.SocketUtils.instance.register(d.Processid.clubGame,club.client.game.MSGID.RESP_PARTNERCHANGETABLE,this,this.respPartnerChangeTable,null,!0),u.SocketUtils.instance.register(d.Processid.clubGame,club.client.game.MSGID.PUSH_TOCLIENT,this,function(){},null,!0),u.SocketUtils.instance.register(d.Processid.clubGame,club.client.game.MSGID.NOTIFY_OPERATE_EXCHANGE_SEAT,this,this.onOperateExchangeSeat,null,!0),u.SocketUtils.instance.register(d.Processid.clubGame,club.client.game.MSGID.NOTIFY_APPLY_EXCHANGE_SEAT_RESULT,this,this.onApplyExchangeSeatResult,null,!0),u.SocketUtils.instance.register(d.Processid.clubGame,club.client.game.MSGID.NOTIFY_EXCHANGE_SEAT,this,this.onExchangeSeat,null,!0),u.SocketUtils.instance.register(d.Processid.clubGame,club.client.game.MSGID.RESP_PARTNERLEAVEGAME,this,this.respPartnerLeaveGame,null,!0),u.SocketUtils.instance.register(d.Processid.clubGame,club.client.game.MSGID.RESP_PARTNERCHANGETABLE,this,this.respPartnerChangeTable,null,!0),u.SocketUtils.instance.register(d.Processid.clubGame,club.client.game.MSGID.PUSH_TOCLIENT,this,function(){},null,!0),u.SocketUtils.instance.register(d.Processid.clubGame,club.client.game.MSGID.RESP_PROLONGBOX,this,this.onRespProlongBox,null,!0),u.SocketUtils.instance.register(d.Processid.clubGame,club.client.game.MSGID.PUSH_PROLONGBOXINFO,this,this.onPushProlongBoxInfo,null,!0),u.SocketUtils.instance.register(d.Processid.clubGame,club.client.game.MSGID.PUSH_CONTINUEBOXINFO,this,this.onPushContinueBoxInfo,null,!0),u.SocketUtils.instance.registerGame(E.BaseProtocol.xyid.BXY_RESP_JIESAN,this,this.onPlayerJS),u.SocketUtils.instance.registerGame(E.BaseProtocol.xyid.BXY_JIESAN_RESULT,this,this.onJSReult),s.EventManager.instance.on(P.DataEvent.LoginSuccess,this,this.onReEnterGame),u.SocketUtils.instance.saveEmitFlag=!0},e.prototype.stopListener=function(){this._isStartGameListener=!1,h.GameTableProxy.instance.stopListener(),_.GameProxy.instance.stopListener(),u.SocketUtils.instance.unregisterByCaller(this),p.PlayerInfoModel.instance.clearData(),S.GameModel.instance.clearAllData(),this.clearData(),s.EventManager.instance.off(P.DataEvent.LoginSuccess,this,this.onReEnterGame),u.SocketUtils.instance.saveEmitFlag=!1},e.prototype.onReEnterGame=function(){S.GameModel.instance.isNormalModel()&&(n.instance.isMatchRoomModel()?N.MatchModel.instance.reqMatchSubID(function(){if(N.MatchModel.instance.getMatchLocationAppID()>0){var t=N.MatchModel.instance.getMatchLocation();N.MatchModel.instance.relinkMatch(t.appid,t.matchid,t.matchsubid)}else M.UIManager.instance.open(b.DialogUI).then(function(t){t.initConfirm({content:"\u6bd4\u8d5b\u5df2\u7ed3\u675f~"}),t.confirmAction=function(){s.EventManager.instance.emit(F.MatchDataEvent.MatchExitGame)},t.closeAction=function(){s.EventManager.instance.emit(F.MatchDataEvent.MatchExitGame)}})}):v.RoomModel.instance.queryUserLocation(function(t){if(0===t){var e=I.UserInfoModel.instance.getUserLocation();if(!e||e.appid!==n.instance.getAppid())return void M.UIManager.instance.open(b.DialogUI).then(function(t){t.initConfirm({content:"\u8fdb\u5165\u623f\u95f4\u5f02\u5e38,\u8bf7\u7a0d\u540e\u5c1d\u8bd5"}),t.confirmAction=function(){s.EventManager.instance.emit(y.GameEvent.BACKTOLOBBY)},t.closeAction=function(){s.EventManager.instance.emit(y.GameEvent.BACKTOLOBBY)}});if(n.instance.getRoomType()===v.ClubShowFlags.CLUBS_LIST){var o={};o.appID=n.instance.getAppid(),o.clubID=n.instance.getClubid(),o.subID=n.instance.getSubid(),o.playID=n.instance.getBoxID(),o.playKey=n.instance.getBoxKey(),o.callback=function(){},U.RoomProxy.instance.reqEnterGame(o)}else n.instance.getRoomType()===v.ClubShowFlags.BOXS_LIST&&U.RoomProxy.instance.reqEnterBox({clubID:n.instance.getClubid(),playID:n.instance.getBoxID(),playKey:n.instance.getBoxKey(),appID:n.instance.getAppid()},function(t,e){if(t);else{var n;n=e===T.ECodeEnum.PLAY_GAME?"\u60a8\u5df2\u7ecf\u5728\u5176\u4ed6\u5305\u53a2\u4e2d!":e===T.ECodeEnum.SAME_IP?"\u6709\u73a9\u5bb6ip\u76f8\u540c\uff0c\u65e0\u6cd5\u5750\u4e0b\uff01!":e===T.ECodeEnum.ROOM_FULL?"\u8be5\u597d\u53cb\u623f\u73a9\u5bb6\u5df2\u6ee1\uff0c\u5165\u5ea7\u5931\u8d25!":"\u8be5\u597d\u53cb\u623f\u4e0d\u5b58\u5728!",s.EventManager.instance.emit(P.DataEvent.ToastData,n)}})}else t===U.UserLocationEnum.GAME_FINISH?M.UIManager.instance.open(b.DialogUI).then(function(t){t.initConfirm({content:"\u5bf9\u5c40\u623f\u95f4\u5df2\u89e3\u6563\uff0c\u8bf7\u5f00\u59cb\u65b0\u7684\u6e38\u620f\uff01"}),t.confirmAction=function(){s.EventManager.instance.emit(y.GameEvent.BACKTOLOBBY)},t.closeAction=function(){s.EventManager.instance.emit(y.GameEvent.BACKTOLOBBY)},M.UIManager.instance.isExist(A.GameJSUI)&&M.UIManager.instance.close(A.GameJSUI)}):M.UIManager.instance.open(b.DialogUI).then(function(t){t.initConfirm({content:"\u8fdb\u5165\u623f\u95f4\u5f02\u5e38,\u8bf7\u7a0d\u540e\u5c1d\u8bd5"}),t.confirmAction=function(){s.EventManager.instance.emit(y.GameEvent.BACKTOLOBBY)},t.closeAction=function(){s.EventManager.instance.emit(y.GameEvent.BACKTOLOBBY)}})}))},e.prototype.onPlayerJS=function(t){M.UIManager.instance.isExist(A.GameJSUI)?s.EventManager.instance.emit(y.GameEvent.ROOM_JS,t):M.UIManager.instance.open(A.GameJSUI).then(function(e){e.initData(t)})},e.prototype.onJSReult=function(t){p.PlayerInfoModel.instance.saveTempPlayers(),s.EventManager.instance.emit(y.GameEvent.ROOM_JS_RESULT,t.flag)},e.prototype.reqJieSan=function(t){this.proxy.reqJieSan(t)},e.prototype.onChangeSeat=function(t){console.log("onChangeSeat");var e=C.UtilClub.dealClubErrorCode(t.errcode);0===e.code?p.PlayerInfoModel.instance.changeSeat(t.seatid,t.toseatid)?s.EventManager.instance.emit(y.GameEvent.CHANGE_SEAT):s.EventManager.instance.emit(P.DataEvent.ToastData,"\u6362\u4f4d\u5931\u8d25"):this.proxy.toastErrorGameCodeMsg(e.code)},e.prototype.onPlayerUserInfo=function(t){p.PlayerInfoModel.instance.updatePlayerUserInfo(t)},e.prototype.onGameInfo=function(t){p.PlayerInfoModel.instance.updatePlayerGameInfo(t)},e.prototype.onPropInfo=function(t){p.PlayerInfoModel.instance.updatePlayerPropInfo(t)},e.prototype.onPlayerState=function(t){p.PlayerInfoModel.instance.updatePlayerState(t)},e.prototype.onTableState=function(t){p.PlayerInfoModel.instance.onTableState(t)},e.prototype.onOperateExchangeSeat=function(t){var e=this;if(!(t.remain_time<=0)){var n=p.PlayerInfoModel.instance.getPlayerByServiceSeat(t.exchange_seat_id);M.UIManager.instance.open(D.ChangeSeatUI).then(function(o){o.init({content:n.nickname+"\u8bf7\u6c42\u4e0e\u60a8\u4ea4\u6362\u4f4d\u7f6e",confirm:"\u540c\u610f",cancel:"\u62d2\u7edd",remainTime:t.remain_time,callback:function(t){e.reqOperateExchangeSeat(t)}})})}},e.prototype.onApplyExchangeSeatResult=function(t){if(!t.isAccepted){var e=p.PlayerInfoModel.instance.getPlayerByServiceSeat(t.accepted_seat_id);s.EventManager.instance.emit(P.DataEvent.ToastData,e.nickname+"\u62d2\u7edd\u4e0e\u60a8\u4ea4\u6362\u4f4d\u7f6e")}},e.prototype.onExchangeSeat=function(t){p.PlayerInfoModel.instance.switchSeat(t.from_seat_id,t.to_seat_id)?(L.BfasManager.instance.evt(G.BoxRoomPointID.RESP_CHANGE_SEAT_SUCCESS.eventid,null,!0,G.BoxRoomPointID.RESP_CHANGE_SEAT_SUCCESS.eventName),s.EventManager.instance.emit(y.GameEvent.CHANGE_SEAT)):s.EventManager.instance.emit(P.DataEvent.ToastData,"\u4ea4\u6362\u5ea7\u4f4d\u5931\u8d25")},e.prototype.reqChangeTable=function(t){this.proxy.reqChangeTable(t)},e.prototype.reqPlayGame=function(t){this.proxy.reqPlayGame(t)},e.prototype.reqLeaveGame=function(t,e){this.proxy.reqLeaveGame(t,e)},e.prototype.reqChatMessage=function(t){var e={};e.channel=t.channel||club.client.common.ChatMessage.CHANNELS.ROOM,e.type=t.type||club.client.common.ChatMessage.TYPES.CT_COMMON,e.areaid=t.areaID,e.numid=t.numID,e.content=g.Base64.encode(t.msg);var n=new m.CommonProtocol.ReqChatMsg(e);u.SocketUtils.instance.notify(n)},e.prototype.respChatMessage=function(t){s.EventManager.instance.emit(y.GameEvent.SEND_CHATMESSAGE,t)},e.prototype.respPartnerLeaveGame=function(t){if(0===C.UtilClub.dealClubErrorCode(t.errcode).code){if(t.type===f.ReqLeaveGameTypeEnum.UP_OR_DOWN_LEAVE)return void s.EventManager.instance.emit(y.GameEvent.PARNTER_GAME_SHENGCHANG_TIP);var e=p.PlayerInfoModel.instance.getLocalSeatByNumid(I.UserInfoModel.instance.userInfo.numID);e&&e.data&&e.data.playstate===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_IN_QUEUE?(s.EventManager.instance.emit(P.DataEvent.ToastData,"\u961f\u53cb\u53d6\u6d88\u4e86\u5339\u914d!"),s.EventManager.instance.emit(y.GameEvent.PARNTER_GAME_EXIT,r.CANCEL_INQUEUE)):M.UIManager.instance.isExist(w.GameUI)&&(s.EventManager.instance.emit(P.DataEvent.ToastData,"\u961f\u53cb\u5df2\u79bb\u5f00\u6e38\u620f\uff0c\u91cd\u65b0\u56de\u5230\u961f\u4f0d~"),s.EventManager.instance.emit(y.GameEvent.PARNTER_GAME_EXIT),this.isFreeTeamModel()&&(B.FriendTeamModel.instance.canPopRecord=!0))}},e.prototype.respPartnerChangeTable=function(t){var e=C.UtilClub.dealClubErrorCode(t.errcode);0===e.code?s.EventManager.instance.emit(y.GameEvent.PARNTER_CHANGE_TABLE):s.EventManager.instance.emit(P.DataEvent.ToastData,"\u961f\u53cb\u6362\u684c\u63d0\u793a\u9519\u8bef:"+e.code)},e.prototype.reqProlongBox=function(t){this.proxy.reqProlongBox(t)},e.prototype.onRespProlongBox=function(t){console.warn("onRespProlongBox",t);var e=C.UtilClub.dealClubErrorCode(t.errcode);0===e.code?s.EventManager.instance.emit(y.GameEvent.RESP_PROLONGBOX,t):s.EventManager.instance.emit(P.DataEvent.ToastData,"\u5ef6\u957f\u5bf9\u5c40\u64cd\u4f5c\u5931\u8d25!code="+e.code)},e.prototype.onPushProlongBoxInfo=function(t){console.warn("onPushProlongBoxInfo",t),s.EventManager.instance.emit(y.GameEvent.PUSH_PROLONGBOXINFO,t)},e.prototype.reqContinueBox=function(t){var e=this.getBoxID();console.log("reqContinueBox.boxid:",e),this.proxy.reqContinueBox(e,t)},e.prototype.onPushContinueBoxInfo=function(t){console.warn("onPushContinueBoxInfo",t),O.GameContinueTableModel.instance.setContinueBoxInfo(t),s.EventManager.instance.emit(y.GameEvent.PUSH_CONTINUEBOXINFO,t)},e.prototype.getBoxKey=function(){return this._boxKey},e.prototype.setGameId=function(t){this._gameID=t,this._gameID===R.GameIDInfo.ERREN_GD.id&&p.PlayerInfoModel.instance.setNowGamePlayer(p.ER_CNT)},e.prototype.getGameId=function(){return this._gameID},e.prototype.saveFriendTeamInfo=function(t){this._memberFlag=B.FriendTeamStatusEnum.NONE,this._partnerId=0,this._partnernumId=0,t.partnerid&&(this._memberFlag=t.memberflag,this._partnerId=t.partnerid,this._partnernumId=t.partnernumid,this._partnerType=t.partnertype)},e.prototype.isTeamModel=function(){return this.isGoldTeamModel()||this.isFreeTeamModel()},e.prototype.isGoldTeamModel=function(){return this._partnerType===B.FTTeamTypeEnum.GOLD||this._partnerType===B.FTTeamTypeEnum.GOLD_INLINE||this._partnerType===B.FTTeamTypeEnum.ACT_CHALLENGE||this._partnerType===B.FTTeamTypeEnum.ACT_INVITE},e.prototype.isFreeTeamModel=function(){return this._partnerType===B.FTTeamTypeEnum.FREE},e.prototype.isFriendTeamLeader=function(){return this._memberFlag===B.FriendTeamStatusEnum.LEADER},e.prototype.isFriendTeamPartner=function(t){return this._partnernumId===t},Object.defineProperty(e.prototype,"parnterId",{get:function(){return this._partnernumId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"friendTeamId",{get:function(){return this._partnerId},enumerable:!1,configurable:!0}),e.prototype.isFriendReady=function(){var t=p.PlayerInfoModel.instance.getLocalSeatByNumid(this.parnterId);return!(!t||!t.data||t.data.playstate!==club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_READYED&&t.data.playstate!==club.client.game.PlayState.PLAYSTATES.PLAYSTATE_IN_QUEUE)},e.prototype.getFriendGold=function(){var t=p.PlayerInfoModel.instance.getLocalSeatByNumid(this.parnterId);return t&&t.data?t.data.gamegold:-1},e.prototype.saveRoomInfo=function(t,e){this._roomData=t,this._roomType=e,e===v.ClubShowFlags.CLUBS_LIST?(this._subID=t.subID,this._clubID=t.clubID,this._appID=t.appID,this._boxID=t.playID,this._boxKey=t.playKey):e===v.ClubShowFlags.BOXS_LIST&&(this._clubID=t.clubID,this._boxID=t.playID,this._boxKey=t.playKey,this._appID=t.appID)},e.prototype.clearData=function(){this._creator=0,this._roomData=null,this._roomType=0,this._subID=0,this._clubID=0,this._appID=0,this._boxID=0,this._boxKey=0},e.prototype.getBoxID=function(){return this._boxID},e.prototype.saveBoxCreator=function(t){this._creator=t},e.prototype.getBoxCreator=function(){return this._creator},e.prototype.isBoxCreator=function(){return this._creator===I.UserInfoModel.instance.userInfo.numID},e.prototype.getRoomType=function(){return this._roomType},e.prototype.isBoxRoom=function(){return this.getRoomType()===v.ClubShowFlags.BOXS_LIST},e.prototype.isGoldRoom=function(){return this.getRoomType()===v.ClubShowFlags.CLUBS_LIST},e.prototype.getRoomInfo=function(){return this._roomData},e.prototype.getSubid=function(){return this._subID},e.prototype.getClubid=function(){return this._clubID},e.prototype.getAppid=function(){return this._appID},e.prototype.dealRobotNumid=function(t){if(t<4e7){if(this._robotNumid[t])return this._robotNumid[t];var e=I.UserInfoModel.instance.userInfo.numID.toString(),n=e.substr(0,2)+t.toString();if(n.length<e.length){var o=e.length-2;n=e.substr(0,2);for(var a=0;a<o;++a)n+=this.getRandomNum(0,9).toString()}return this._robotNumid[t]=Number(n),this._robotNumid[t]}return t},e.prototype.getRandomNum=function(t,e){var n=e-t,o=Math.random();return t+Math.round(o*n)},e.prototype.reqChangeSeat=function(t,e){this.proxy.reqChangeSeat(t,e)},e.prototype.reqLeaveBox=function(t){this.proxy.reqLeaveBox(t)},e.prototype.initGameCommonData=function(){this._memberFlag=B.FriendTeamStatusEnum.NONE,this._partnerId=0,this._partnernumId=0,this._partnerType=null},e.prototype.reqApplyExchangeSeat=function(t,e){this.proxy.reqApplyExchangeSeat(t,e)},e.prototype.reqOperateExchangeSeat=function(t,e){this.proxy.reqOperateExchangeSeat(t,e)},e.prototype.isMixPassARoom=function(){var t=this.getSubid();return v.RoomModel.instance.checkIsMixPassARoom(t)},e.prototype.isHasCallMultStep=function(){var t=this.getSubid();return v.RoomModel.instance.checkIsCallMultStep(t)},e.prototype.reqQueryRoomStatus=function(t){var e=this.getClubid(),n=this.getAppid();v.RoomModel.instance.reqQueryRoomStatus(e,n,function(e){t&&t(e)})},n=i([jsClass],e)}(c.BaseModel);n.GameCommonModel=k,cc.systemEvent.once("GameRoot.inited",function(){l.ModelRoot.instance.add(k)}),cc._RF.pop()},{"../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/Model/BaseModel":"BaseModel","../../../Framework/Root/ModelRoot":"ModelRoot","../../../Framework/Utils/Base64":"Base64","../../Base/Data/DataBfConfig":"DataBfConfig","../../Base/Data/DataEvent":"DataEvent","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../Base/Module/Network/Base/Processid":"Processid","../../Base/Module/Network/SocketUtils":"SocketUtils","../../Base/Module/Network/protocol/CommonProtocol":"CommonProtocol","../../Base/Module/Room/RoomModel":"RoomModel","../../Base/Module/Room/RoomProxy":"RoomProxy","../../Base/Utils/UtilClub":"UtilClub","../../Base/View/Common/DialogUI":"DialogUI","../../CreateRoomUI/CreateRoomModel/CreateRoomManagerModel":"CreateRoomManagerModel","../../FriendTeam/FriendTeamModel":"FriendTeamModel","../../Match/MatchConstant":"MatchConstant","../../Match/MatchModel":"MatchModel","../../UserInfo/UserInfoModel":"UserInfoModel","../GuanDan/ChangeSeatUI":"ChangeSeatUI","../GuanDan/GameContinueTable/GameContinueTableModel":"GameContinueTableModel","../GuanDan/GameEvent":"GameEvent","../GuanDan/GameUI":"GameUI","../GuanDan/Model/GameModel":"GameModel","../GuanDan/Proxy/GameProxy":"GameProxy","../GuanDan/Proxy/GameTableProxy":"GameTableProxy","../GuanDan/Proxy/Protocol/BaseProtocol":"BaseProtocol","./GameCommonProxy":"GameCommonProxy","./GameJSUI/GameJSUI":"GameJSUI","./PlayerInfoModel":"PlayerInfoModel"}],GameCommonProxy:[function(t,e,n){"use strict";cc._RF.push(e,"e4518grL4pDaKYcRJJ4MGxX","GameCommonProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameCommonProxy=n.ReqLeaveGameTypeEnum=void 0;var r,s=t("../../../Framework/Proxy/BaseProxy"),c=t("../../../Framework/Root/ProxyRoot"),l=t("../../Base/Module/Network/SocketUtils"),u=t("../../Base/Module/Network/protocol/ClubGameProtocol"),d=t("../../Base/Module/Network/Base/Processid"),p=t("../../../Core/Base/Utils/UtilClub"),h=t("../GuanDan/Proxy/Protocol/BaseProtocol"),_=t("../Common/PlayerInfoModel"),f=t("../../../Framework/Manager/EventManager"),m=t("../../Base/Data/DataEvent");(function(t){t[t.NORMAL_LEAVE=0]="NORMAL_LEAVE",t[t.UP_OR_DOWN_LEAVE=1]="UP_OR_DOWN_LEAVE"})(r=n.ReqLeaveGameTypeEnum||(n.ReqLeaveGameTypeEnum={}));var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return c.ProxyRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.reqChangeTable=function(t){l.SocketUtils.instance.notify(new u.ClubGameProtocol.ReqChangeTable({askid:0})),l.SocketUtils.instance.registerOnce(d.Processid.clubGame,club.client.game.MSGID.RESP_CHANGETABLE,this,function(e){var n=p.UtilClub.dealClubErrorCode(e.errcode);t&&t(n.code)})},e.prototype.reqLeaveGame=function(t,e){e=e||r.NORMAL_LEAVE,l.SocketUtils.instance.notify(new u.ClubGameProtocol.ReqLeaveGame({askid:0,type:e})),l.SocketUtils.instance.registerOnce(d.Processid.clubGame,club.client.game.MSGID.RESP_LEAVEGAME,this,function(e){var n=p.UtilClub.dealClubErrorCode(e.errcode);t&&t(n.code)})},e.prototype.reqChangeSeat=function(t,e){l.SocketUtils.instance.notify(new u.ClubGameProtocol.ReqChangeSeat({askid:0,seatid:t})),l.SocketUtils.instance.registerOnce(d.Processid.clubGame,club.client.game.MSGID.RESP_CHANGESEAT,this,function(t){var n=p.UtilClub.dealClubErrorCode(t.errcode);e&&e(n.code)})},e.prototype.reqApplyExchangeSeat=function(t,e){var n=this;l.SocketUtils.instance.notify(new u.ClubGameProtocol.ReqApplyExchangeSeat({ask_id:0,target_seat_id:t})),l.SocketUtils.instance.registerOnce(d.Processid.clubGame,club.client.game.MSGID.RESP_APPLY_EXCHANGE_SEAT,this,function(t){var o=p.UtilClub.dealClubErrorCode(t.errcode);n.toastErrorGameCodeMsg(o.code)&&e&&e(o.code)})},e.prototype.reqOperateExchangeSeat=function(t,e){var n=this;l.SocketUtils.instance.notify(new u.ClubGameProtocol.ReqOperateExchangeSeat({ask_id:0,isAccepted:t})),l.SocketUtils.instance.registerOnce(d.Processid.clubGame,club.client.game.MSGID.RESP_OPERATE_EXCHANGE_SEAT,this,function(t){var o=p.UtilClub.dealClubErrorCode(t.errcode);n.toastErrorGameCodeMsg(o.code)&&e&&e(o.code)})},e.prototype.reqJieSan=function(t){var e=new h.BaseProtocol.msgReqJieSan;e.seat=_.PlayerInfoModel.instance.getSelfSeat(),e.flag=t,l.SocketUtils.instance.notify(e)},e.prototype.reqLeaveBox=function(t){l.SocketUtils.instance.notify(new u.ClubGameProtocol.ReqLeaveBox({askid:0})),l.SocketUtils.instance.registerOnce(d.Processid.clubGame,club.client.game.MSGID.RESP_LEAVEBOX,this,function(e){var n=p.UtilClub.dealClubErrorCode(e.errcode);t&&t(n.code)})},e.prototype.reqPlayGame=function(t){l.SocketUtils.instance.notify(new u.ClubGameProtocol.ReqPlayGame({askid:0})),l.SocketUtils.instance.registerOnce(d.Processid.clubGame,club.client.game.MSGID.RESP_PLAYGAME,this,function(e){var n=p.UtilClub.dealClubErrorCode(e.errcode);t&&t(n.code)})},e.prototype.reqProlongBox=function(t){l.SocketUtils.instance.notify(new u.ClubGameProtocol.ReqProlongBox({askid:0,flag:t}))},e.prototype.reqContinueBox=function(t,e){l.SocketUtils.instance.notify(new u.ClubGameProtocol.ReqContinueBox({askid:0,boxid:t})),l.SocketUtils.instance.register(d.Processid.clubGame,club.client.game.MSGID.RESP_CONTINUEBOX,this,function(t){var n=p.UtilClub.dealClubErrorCode(t.errcode);console.log("reqContinueBox.resp:",t),e&&e(n.code,t)})},e.prototype.toastErrorGameCodeMsg=function(t){var e;if(0!=t){var n=((e={})[club.errcode.game.ERRCODE.CLUBGAME_E_USER_NOT_IN_CLUB]="\u8be5\u73a9\u5bb6\u5df2\u79bb\u5f00\uff0c\u6362\u5ea7\u5931\u8d25",e[club.errcode.game.ERRCODE.CLUBGAME_E_USER_ENTERTABLE_ERROR]="\u8be5\u4f4d\u7f6e\u5df2\u6709\u73a9\u5bb6\u5750\u4e0b",e[club.errcode.game.ERRCODE.CLUBGAME_E_USER_IS_BUSY_EXCHANGE_SEAT]="\u60a8\u6709\u5f85\u5904\u7406\u7684\u6362\u5ea7\u7533\u8bf7",e[club.errcode.game.ERRCODE.CLUBGAME_E_USER_INVALID_EXCHANGE_SEAT_ID]="\u65e0\u6548\u7684\u4ea4\u6362\u5ea7\u4f4d\u4f4d\u7f6e\u53f7",e[club.errcode.game.ERRCODE.CLUBGAME_E_USER_EXCHANGE_SEAT_TIMEOUT]="\u73a9\u5bb6\u4ea4\u6362\u5ea7\u4f4d\u8d85\u65f6",e[club.errcode.game.ERRCODE.CLUBGAME_E_USER_FRIEND_IS_BUSY_EXCHANGE_SEAT]="\u8be5\u73a9\u5bb6\u6b63\u5728\u4e0e\u5176\u4ed6\u73a9\u5bb6\u6362\u5ea7\u4e2d",e);n[t]&&f.EventManager.instance.emit(m.DataEvent.ToastData,n[t])}return 0===t},i([jsClass],e)}(s.BaseProxy);n.GameCommonProxy=g,cc.systemEvent.once("GameRoot.inited",function(){c.ProxyRoot.instance.add(g)}),cc._RF.pop()},{"../../../Core/Base/Utils/UtilClub":"UtilClub","../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Proxy/BaseProxy":"BaseProxy","../../../Framework/Root/ProxyRoot":"ProxyRoot","../../Base/Data/DataEvent":"DataEvent","../../Base/Module/Network/Base/Processid":"Processid","../../Base/Module/Network/SocketUtils":"SocketUtils","../../Base/Module/Network/protocol/ClubGameProtocol":"ClubGameProtocol","../Common/PlayerInfoModel":"PlayerInfoModel","../GuanDan/Proxy/Protocol/BaseProtocol":"BaseProtocol"}],GameContinueTableModel:[function(t,e,n){"use strict";cc._RF.push(e,"b7d62lfQkFEQajN0sbmjqcy","GameContinueTableModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameContinueTableModel=void 0;var r=t("../../../../Framework/Model/BaseModel"),s=t("../../../../Framework/Root/ModelRoot"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._continueBoxInfo=null,e}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return s.ModelRoot.instance.get(n)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){},e.prototype.getContinueBoxInfo=function(){return this._continueBoxInfo},e.prototype.setContinueBoxInfo=function(t){this._continueBoxInfo=t},e.prototype.clearContinueBoxInfo=function(){this._continueBoxInfo=null},e.prototype.getIsOtherContinueBox=function(){return null!=this._continueBoxInfo&&null!=this._continueBoxInfo},n=i([jsClass],e)}(r.BaseModel);n.GameContinueTableModel=c,cc.systemEvent.once("GameRoot.inited",function(){s.ModelRoot.instance.add(c)}),cc._RF.pop()},{"../../../../Framework/Model/BaseModel":"BaseModel","../../../../Framework/Root/ModelRoot":"ModelRoot"}],GameContinueTableUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"c0283z5K/9BE5wjg9anw6tz","GameContinueTableUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./GameContinueTableUI_MainPanel"),a=t("./GameContinueTableUI_Window"),i=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default)},t}();n.default=i,cc._RF.pop()},{"./GameContinueTableUI_MainPanel":"GameContinueTableUI_MainPanel","./GameContinueTableUI_Window":"GameContinueTableUI_Window"}],GameContinueTableUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"6900922eglDAbzl/ZFGFDvx","GameContinueTableUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameContinueTableUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://4mky5rrgjavr0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameContinueTableUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"ab034awwhxJua8/dM6GEGcD","GameContinueTableUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameContinueTableUI","Window")},e.prototype.onConstruct=function(){this.m_btnClose=this.getChildAt(1),this.m_btnCancel=this.getChildAt(2),this.m_btnConfirm=this.getChildAt(3),this.m_text=this.getChildAt(4)},e.URL="ui://4mky5rrgjavr2",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],GameContinueTableUI:[function(t,e,n){"use strict";cc._RF.push(e,"7d7feVoBfBJyrhwJQK+TWfB","GameContinueTableUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameContinueTableUI=void 0;var r=t("../../../../Framework/Manager/EventManager"),s=t("../../../../Framework/Manager/UIManager"),c=t("../../../../Framework/UI/BaseUI"),l=t("../../../../Framework/UI/FadeUI"),u=t("../../../Base/Data/DataEvent"),d=t("../../../Base/Module/BfAnalytics/BfasManager"),p=t("../../../Base/Module/BfAnalytics/DataPointID"),h=t("../../../Base/Utils/UtilTool"),_=t("../../../Base/View/UIHelp"),f=t("../../../Base/Module/Room/RoomProxy"),m=t("../../Common/GameCommonModel"),g=t("../../Common/GameResultUI/GameResultUI"),y=t("../GameEvent"),I=t("./GameContinueTableModel"),C=t("../../../Base/Data/DatazOrder"),M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return c.UIType.Window},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sortingOrder",{get:function(){return C.DataZOrder.GameContinueTableUI},enumerable:!1,configurable:!0}),Object.defineProperty(e,"willShowLoading",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onClickClose,this),this.view.m_Window.m_btnCancel.onClick(this.onClickCancel,this),this.view.m_Window.m_btnConfirm.onClick(this.onClickContinue,this)},e.prototype.initLayer=function(t){var e;if(t){var n=I.GameContinueTableModel.instance.getContinueBoxInfo();e="["+_.UIHelp.formatNicknameS(h.UtilTool.easyUTF8(n.owner_nickname))+"]\u9080\u8bf7\u60a8\u7ee7\u7eed\u6e38\u620f,\u662f\u5426\u7ee7\u7eed?"}else I.GameContinueTableModel.instance.getIsOtherContinueBox()?(n=I.GameContinueTableModel.instance.getContinueBoxInfo(),e="["+_.UIHelp.formatNicknameS(h.UtilTool.easyUTF8(n.owner_nickname))+"]\u5df2\u7ee7\u7eed\u6e38\u620f,\u662f\u5426\u52a0\u5165?"):e="\u4e0a\u8f6e\u6e38\u620f\u5df2\u7ed3\u675f,\u662f\u5426\u7ee7\u7eed?";this.initClickContinueGame(e)},e.prototype.initClickContinueGame=function(t){this.view.m_Window.m_text.text=t},e.prototype.onClickClose=function(){t.prototype.onExitClick.call(this)},e.prototype.onClickCancel=function(){t.prototype.onExitClick.call(this)},e.prototype.onClickContinue=function(){if(I.GameContinueTableModel.instance.getIsOtherContinueBox()){d.BfasManager.instance.evt(p.BoxRoomPointID.AGREE_CONTINUE_GAME.eventid,null,!0,p.BoxRoomPointID.AGREE_CONTINUE_GAME.eventName),_.UIHelp.instance.showLoading("\u52a0\u5165\u623f\u95f4\u4e2d");var t=I.GameContinueTableModel.instance.getContinueBoxInfo(),e={clubID:t.clubid,appID:t.appid,playID:t.boxid,playKey:t.boxkey};this.enterBoxRoom(e)}else d.BfasManager.instance.evt(p.BoxRoomPointID.CONTINUE_GAME_SUCCESS.eventid,null,!0,p.BoxRoomPointID.CONTINUE_GAME_SUCCESS.eventName),_.UIHelp.instance.showLoading("\u7eed\u73a9\u4e2d"),this.continueCreateBox()},e.prototype.enterBoxRoom=function(t){var e=this;f.RoomProxy.instance.reqEnterBox(t,function(t,n){if(_.UIHelp.instance.hideLoading(),t)console.log("enterBoxRoom.\u52a0\u5165\u5305\u53a2\u623f\u95f4\u6210\u529f~"),s.UIManager.instance.isExist(g.GameResultUI)&&s.UIManager.instance.close(g.GameResultUI),r.EventManager.instance.emit(y.GameEvent.CLEAR_GAMESCENE_UI);else{var o;o=125===n?"\u8be5\u623f\u95f4\u5df2\u5f00\u59cb\u6e38\u620f~":126===n?"\u8be5\u623f\u95f4\u5df2\u6ee1~":203===n||108==n?"\u623f\u95f4\u5df2\u88ab\u623f\u4e3b\u89e3\u6563\uff0c\u52a0\u5165\u5931\u8d25":"\u8fdb\u5165\u623f\u95f4\u5f02\u5e38,\u8bf7\u7a0d\u540e\u5c1d\u8bd5",r.EventManager.instance.emit(u.DataEvent.ToastData,o)}I.GameContinueTableModel.instance.clearContinueBoxInfo(),e.onExitClick()})},e.prototype.continueCreateBox=function(){var t=this;m.GameCommonModel.instance.reqContinueBox(function(e,n){if(_.UIHelp.instance.hideLoading(),0===e){_.UIHelp.instance.showLoading("\u52a0\u5165\u623f\u95f4\u4e2d");var o={clubID:n.clubid,appID:n.appid,playID:n.boxid,playKey:n.boxkey};t.enterBoxRoom(o)}else 123===e?r.EventManager.instance.emit(u.DataEvent.ToastData,"\u8bf7\u7b49\u5f85\u623f\u4e3b\u9009\u62e9\u7eed\u684c"):114===e?r.EventManager.instance.emit(u.DataEvent.ToastData,"\u540c\u684c\u73a9\u5bb6\u5df2\u7eed\u73a9\uff0c\u8bf7\u7b49\u5f85"):150===e?(r.EventManager.instance.emit(u.DataEvent.ToastData,"\u5305\u53a2\u5df2\u89e3\u6563"),t.backToHall()):108!==e&&101!==e&&23!==e||(r.EventManager.instance.emit(u.DataEvent.ToastData,"\u7eed\u73a9\u9519\u8bef"),t.backToHall())})},e.prototype.backToHall=function(){I.GameContinueTableModel.instance.clearContinueBoxInfo(),r.EventManager.instance.emit(y.GameEvent.BACKTOLOBBY)},i([jsClass],e)}(l.FadeUI);n.GameContinueTableUI=M,cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Manager/UIManager":"UIManager","../../../../Framework/UI/BaseUI":"BaseUI","../../../../Framework/UI/FadeUI":"FadeUI","../../../Base/Data/DataEvent":"DataEvent","../../../Base/Data/DatazOrder":"DatazOrder","../../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../../Base/Module/Room/RoomProxy":"RoomProxy","../../../Base/Utils/UtilTool":"UtilTool","../../../Base/View/UIHelp":"UIHelp","../../Common/GameCommonModel":"GameCommonModel","../../Common/GameResultUI/GameResultUI":"GameResultUI","../GameEvent":"GameEvent","./GameContinueTableModel":"GameContinueTableModel"}],GameControlEnum:[function(t,e,n){"use strict";cc._RF.push(e,"95f56sKxpxCJbHjCCH2rcPz","GameControlEnum"),Object.defineProperty(n,"__esModule",{value:!0}),n.CGameFriendShowChallengeState=n.CCallMultTagEnum=n.CHeadCallMultTagEnum=n.CPassLevelTaskStateEnum=n.CShowPassLevelPannel=n.CShowPassLevelTask=n.CRuleGuideEnum=n.WinMoreActionTypeControlTypeEnum=n.WinMoreTextTypeControlTypeEnum=n.WinMoreVideoTypeControlTypeEnum=n.COhterHeadRoomTypeEnum=n.CSelfHeadRoomTypeEnum=n.CHeadSeatTypeEnum=n.HeadResultAnimationControlTypeEnum=n.HeadCardPosControlTypeEnum=n.THSBarControlTypeEnum=n.ButtonLayerYQControlTypeEnum=n.CButtonLayerRoomTypEnum=n.ButtonLayerCanPlayControlTypeEnum=n.ClockControlTypeEnum=n.TopRightChangeSeatControlTypeEnum=n.TopRightOwnerControlTypeEnum=n.CTopRightExistNoteCardEnum=n.CTopLeftRankLevelEnum=n.CTopLeftGameTypeEnum=n.TopLeftMultControlTypeEnum=n.CNoteCardTypeEnum=n.CNoteCardNumColorEnum=n.CImgTypeEnum=n.HeadTeamTypeEnum=n.HeadCreatorControlTypeEnum=n.HeadResultControlTypeEnum=n.HeadWinLoseControlTypeEnum=n.HeadCardControlTypeEnum=n.HeadBJControlTypeEnum=n.CGameSceneRoomTypeEnum=n.ShowMenuControlTypeEnum=n.ResultBgControlTypeEnum=n.CTopRightRoomTypeEnum=n.PointLayerBJDJControlTypeEnum=n.PointLayerHintControlTypeEnum=n.MenuControlTypeEnum=n.BoxInfoControlTypeEnum=n.LPControlTypeEnum=void 0,function(t){t[t.NOT_LP=0]="NOT_LP",t[t.CAN_LP=1]="CAN_LP",t[t.RESTORE_LP=2]="RESTORE_LP"}(n.LPControlTypeEnum||(n.LPControlTypeEnum={})),function(t){t[t.NOT_SZFB=0]="NOT_SZFB",t[t.NEED_SZFB=1]="NEED_SZFB"}(n.BoxInfoControlTypeEnum||(n.BoxInfoControlTypeEnum={})),function(t){t[t.PLAZA_GOLD=0]="PLAZA_GOLD",t[t.PLAZA_BOX_NOT_START=1]="PLAZA_BOX_NOT_START",t[t.PLAZA_BOX_START=2]="PLAZA_BOX_START"}(n.MenuControlTypeEnum||(n.MenuControlTypeEnum={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW_FRIEND_CARD=1]="SHOW_FRIEND_CARD",t[t.SHOW_NOT_PLAY=2]="SHOW_NOT_PLAY"}(n.PointLayerHintControlTypeEnum||(n.PointLayerHintControlTypeEnum={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(n.PointLayerBJDJControlTypeEnum||(n.PointLayerBJDJControlTypeEnum={})),function(t){t[t.PLAZA_GOLD=0]="PLAZA_GOLD",t[t.PLAZA_BOX=1]="PLAZA_BOX",t[t.FREE_FRIENDTEAM=2]="FREE_FRIENDTEAM",t[t.MATCH_ROOM=3]="MATCH_ROOM"}(n.CTopRightRoomTypeEnum||(n.CTopRightRoomTypeEnum={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(n.ResultBgControlTypeEnum||(n.ResultBgControlTypeEnum={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(n.ShowMenuControlTypeEnum||(n.ShowMenuControlTypeEnum={})),function(t){t[t.PLAZA_GOLD=0]="PLAZA_GOLD",t[t.PLAZA_BOX=1]="PLAZA_BOX",t[t.PLAZA_BOX_ER=2]="PLAZA_BOX_ER",t[t.FREE_FRIENDTEAM=3]="FREE_FRIENDTEAM"}(n.CGameSceneRoomTypeEnum||(n.CGameSceneRoomTypeEnum={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(n.HeadBJControlTypeEnum||(n.HeadBJControlTypeEnum={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(n.HeadCardControlTypeEnum||(n.HeadCardControlTypeEnum={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW_WIN=1]="SHOW_WIN",t[t.SHOW_LOSE=2]="SHOW_LOSE"}(n.HeadWinLoseControlTypeEnum||(n.HeadWinLoseControlTypeEnum={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW_WIN=1]="SHOW_WIN",t[t.SHOW_LOSE=2]="SHOW_LOSE"}(n.HeadResultControlTypeEnum||(n.HeadResultControlTypeEnum={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(n.HeadCreatorControlTypeEnum||(n.HeadCreatorControlTypeEnum={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(n.HeadTeamTypeEnum||(n.HeadTeamTypeEnum={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW_NOT_PLAY=1]="SHOW_NOT_PLAY",t[t.SHOW_READY=2]="SHOW_READY",t[t.SHOW_MULT=3]="SHOW_MULT",t[t.SHOW_NOT_MULT=4]="SHOW_NOT_MULT",t[t.SHOW_WAIT_PLAY_CARD=5]="SHOW_WAIT_PLAY_CARD"}(n.CImgTypeEnum||(n.CImgTypeEnum={})),function(t){t[t.SHOW_COLOR=0]="SHOW_COLOR",t[t.HIDE_COLOR=1]="HIDE_COLOR"}(n.CNoteCardNumColorEnum||(n.CNoteCardNumColorEnum={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.TEAM=1]="TEAM",t[t.LOOKER=2]="LOOKER"}(n.CNoteCardTypeEnum||(n.CNoteCardTypeEnum={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(n.TopLeftMultControlTypeEnum||(n.TopLeftMultControlTypeEnum={})),function(t){t[t.GD_NORMAL=0]="GD_NORMAL",t[t.TTZ=1]="TTZ",t[t.MATCH_ROOM=2]="MATCH_ROOM"}(n.CTopLeftGameTypeEnum||(n.CTopLeftGameTypeEnum={})),function(t){t[t.NONE=0]="NONE",t[t.SHOW_SELF=1]="SHOW_SELF",t[t.SHOW_OTHER=2]="SHOW_OTHER"}(n.CTopLeftRankLevelEnum||(n.CTopLeftRankLevelEnum={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(n.CTopRightExistNoteCardEnum||(n.CTopRightExistNoteCardEnum={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW",t[t.GAME_START=2]="GAME_START"}(n.TopRightOwnerControlTypeEnum||(n.TopRightOwnerControlTypeEnum={})),function(t){t[t.CAN_CHANGE=0]="CAN_CHANGE",t[t.NOT_CAN_CHANGE=1]="NOT_CAN_CHANGE"}(n.TopRightChangeSeatControlTypeEnum||(n.TopRightChangeSeatControlTypeEnum={})),function(t){t[t.NONE=0]="NONE",t[t.ACTION=1]="ACTION"}(n.ClockControlTypeEnum||(n.ClockControlTypeEnum={})),function(t){t[t.CAN_PLAY=0]="CAN_PLAY",t[t.NOT_CAN_PLAY=1]="NOT_CAN_PLAY"}(n.ButtonLayerCanPlayControlTypeEnum||(n.ButtonLayerCanPlayControlTypeEnum={})),function(t){t[t.PLAZA_GOLD=0]="PLAZA_GOLD",t[t.PLAZA_BOX=1]="PLAZA_BOX"}(n.CButtonLayerRoomTypEnum||(n.CButtonLayerRoomTypEnum={})),function(t){t[t.NOT_MEDIUM=0]="NOT_MEDIUM",t[t.MEDIUM=1]="MEDIUM"}(n.ButtonLayerYQControlTypeEnum||(n.ButtonLayerYQControlTypeEnum={})),function(t){t[t.NONE=0]="NONE",t[t.SHOW=1]="SHOW"}(n.THSBarControlTypeEnum||(n.THSBarControlTypeEnum={})),function(t){t[t.RIGHT=0]="RIGHT",t[t.LEFT=1]="LEFT"}(n.HeadCardPosControlTypeEnum||(n.HeadCardPosControlTypeEnum={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW",t[t.HIDE_OTHER=2]="HIDE_OTHER",t[t.SHOW_OTHER=3]="SHOW_OTHER"}(n.HeadResultAnimationControlTypeEnum||(n.HeadResultAnimationControlTypeEnum={})),function(t){t[t.NONE=0]="NONE",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT"}(n.CHeadSeatTypeEnum||(n.CHeadSeatTypeEnum={})),function(t){t[t.PLAZA_GOLD=0]="PLAZA_GOLD",t[t.PLAZA_BOX=1]="PLAZA_BOX",t[t.PLAZA_GOLD_MIXPASSA=2]="PLAZA_GOLD_MIXPASSA",t[t.PLAZA_FREIENDTEAM_FREE=3]="PLAZA_FREIENDTEAM_FREE",t[t.MATCH_ROOM=4]="MATCH_ROOM"}(n.CSelfHeadRoomTypeEnum||(n.CSelfHeadRoomTypeEnum={})),function(t){t[t.PLAZA_NORMAL=0]="PLAZA_NORMAL",t[t.PLAZA_FREIENDTEAM_NEW=1]="PLAZA_FREIENDTEAM_NEW"}(n.COhterHeadRoomTypeEnum||(n.COhterHeadRoomTypeEnum={})),function(t){t[t.IS_VIDEO=0]="IS_VIDEO",t[t.NOT_VIDEO=1]="NOT_VIDEO"}(n.WinMoreVideoTypeControlTypeEnum||(n.WinMoreVideoTypeControlTypeEnum={})),function(t){t[t.WIN=0]="WIN",t[t.LOSE=1]="LOSE"}(n.WinMoreTextTypeControlTypeEnum||(n.WinMoreTextTypeControlTypeEnum={})),function(t){t[t.STOP=0]="STOP",t[t.ACTION=1]="ACTION"}(n.WinMoreActionTypeControlTypeEnum||(n.WinMoreActionTypeControlTypeEnum={})),function(t){t[t.GUIDE_1=0]="GUIDE_1",t[t.GUIDE_2=1]="GUIDE_2",t[t.GUIDE_3=2]="GUIDE_3"}(n.CRuleGuideEnum||(n.CRuleGuideEnum={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(n.CShowPassLevelTask||(n.CShowPassLevelTask={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(n.CShowPassLevelPannel||(n.CShowPassLevelPannel={})),function(t){t[t.NOT_GET=0]="NOT_GET",t[t.CAN_GET=1]="CAN_GET"}(n.CPassLevelTaskStateEnum||(n.CPassLevelTaskStateEnum={})),function(t){t[t.NOT_CALLMULT_STEP=0]="NOT_CALLMULT_STEP",t[t.HAS_CALLMULT_STEP=1]="HAS_CALLMULT_STEP"}(n.CHeadCallMultTagEnum||(n.CHeadCallMultTagEnum={})),function(t){t[t.SELF_MULT=0]="SELF_MULT",t[t.SELF_NOT_MULT=1]="SELF_NOT_MULT",t[t.OTHER_MULT=2]="OTHER_MULT",t[t.OTHER_NOT_MULT=3]="OTHER_NOT_MULT"}(n.CCallMultTagEnum||(n.CCallMultTagEnum={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(n.CGameFriendShowChallengeState||(n.CGameFriendShowChallengeState={})),cc._RF.pop()},{}],GameEvent:[function(t,e,n){"use strict";cc._RF.push(e,"8471aD57S5LS47ujo3lO12J","GameEvent");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameEvent=void 0;var a=function(){function t(){}return t.PLAYER_ENTER="PLAYER_ENTER",t.LOGIC_DATA="LOGIC_DATA",t.PLAYER_STATE_CHANGE="PLAYER_STATE_CHANGE",t.PLAYER_GLOD_CHANGE="PLAYER_GLOD_CHANGE",t.PLAYER_LEAVE="PLAYER_LEAVE",t.REFRESH_PLAYER_CARDS_NUMS="REFRESH_PLAYER_CARDS_NUMS",t.REFRESH_LEVEL="REFRESH_LEVEL",t.REFRESH_TRUST="REFRESH_TRUST",t.REFRESH_POWER="REFRESH_POWER",t.REFRESH_STEP="REFRESH_STEP",t.REFRESH_CLOCK="REFRESH_CLOCK",t.REFRESH_PLAYCARD="REFRESH_PLAYCARD",t.REFRESH_PROP_UI="REFRESH_PROP_UI",t.GAME_START="GAME_START",t.GAME_END="GAME_END",t.REFRESH_THS="REFRESH_THS",t.TOUCH_CARD_CALLBACK="TOUCH_CARD_CALLBACK",t.REFRESH_GAME_DATA="REFRESH_GAME_DATA",t.REFRESH_NOTECARD_MINUS_HANDCARDS="REFRESH_NOTECARD_MINUS_HANDCARDS",t.REFRESH_RELINK_OUTCARD_COUNT="REFRESH_RELINK_OUTCARD_COUNT",t.REFRESH_PLAYCARD_NOTECARD_NUM="REFRESH_PLAYCARD_NOTECARD_NUM",t.REFRESH_NOTECARD_FOLLOW_PARTNER="REFRESH_NOTECARD_FOLLOW_PARTNER",t.FIGHTING="FIGHTING",t.GDMULT="GDMULT",t.WAIT_CLOCK="WAIT_CLOCK",t.PLAYER_START="PLAYER_START",t.CONTRIBUTE_DATA="CONTRIBUTE_DATA",t.COMMON_EVENT="COMMON_EVENT",t.RESULT="RESULT",t.TTZ_LIANGPAI="TTZ_LIANGPAI",t.NOTICE_MATCHINFO="NOTICE_MATCHINFO",t.ROOM_JS_RESULT="ROOM_JS_RESULT",t.NOTICE_CHANGE_SEAT="NOTICE_CHANGE_SEAT",t.ROOM_JS="ROOM_JS",t.CHANGE_SEAT="CHANGE_SEAT",t.TABLE_STATE_CHANGE="TABLE_STATE_CHANGE",t.TOUCH_CARD_CALLBACK_LP="TOUCH_CARD_CALLBACK_LP",t.REFRESH_BOXROOM_SCORE="REFRESH_BOXROOM_SCORE",t.BOXROOM_RESULT="BOXROOM_RESULT",t.TOUCH_CARD_BEGIN="TOUCH_CARD_BEGIN",t.TOUCH_CARD_END="TOUCH_CARD_END",t.BACKTOLOBBY="BACKTOLOBBY",t.TOUCH_BG="TOUCH_BG",t.REFRESH_PLAZA_TEXT="REFRESH_PLAZA_TEXT",t.BOXROOM_BIG_RESULT="BOXROOM_BIG_RESULT",t.TUO_PAI_RANK_DATA="TUO_PAI_RANK_DATA",t.TUO_PAI_RESULT_DATA="TUO_PAI_RESULT_DATA",t.PLAY_TUO_PAI_RESULT_DATA="PLAY_TUO_PAI_RESULT_DATA",t.RESP_XY_TEST_CARDS="RESP_XY_TEST_CARDS",t.SEND_XY_TEST_CARDS="SEND_XY_TEST_CARDS",t.UPDATE_HAND_CARDS="UPDATE_HAND_CARDS",t.UPDATE_HAND_CARDS_DATA="UPDATE_HAND_CARDS_DATA",t.UPDATE_LIPAI_CARDS="UPDATE_LIPAI_CARDS",t.UPDATE_OUT_CARDS="UPDATE_OUT_CARDS",t.TAKE_FIRST_ACTION="TAKE_FIRST_ACTION",t.SETTING_CHANGE_LAYOUT="SETTING_CHANGE_LAYOUT",t.UPDATE_LEVEL_CARDS="UPDATE_LEVEL_CARDS",t.SEND_CHATMESSAGE="SEND_CHATMESSAGE",t.GUIDE_STEP="GUIDE_STEP",t.SEND_PROP="SEND_PROP",t.PARNTER_GAME_EXIT="PARNTER_GAME_EXIT",t.PARNTER_GAME_SHENGCHANG_TIP="PARNTER_GAME_SHENGCHANG_TIP",t.PARNTER_CHANGE_TABLE="PARNTER_CHANGE_TABLE",t.PARNTER_ENTER_GAME_GOLD_LESS="PARNTER_ENTER_GAME_GOLD_LESS",t.REMOVE_WIN_MORE_BTN_UI="REMOVE_WIN_MORE_BTN_UI",t.GUIDE_STEP_GET="GUIDE_STEP_GET",t.NEW_PLAYER_GUIDE="NEW_PLAYER_GUIDE",t.GUIDE_SHOW_DESC="GUIDE_SHOW_DESC",t.GUIDE_SHOW_NO_TOUCH_UI="GUIDE_SHOW_NO_TOUCH_UI",t.GUIDE_SHOW_HAND_CARDS="GUIDE_SHOW_HAND_CARDS",t.GUIDE_SHOW_HAND_TGS_CARDS="GUIDE_SHOW_HAND_TGS_CARDS",t.GUIDE_INIT_HAND_CARDS_OPACITY="GUIDE_INIT_HAND_CARDS_OPACITY",t.GUIDE_END="GUIDE_END",t.WIN_MORE="WIN_MORE",t.CLEAR_GAMESCENE_UI="clear_gamesceneUI",t.RESP_PROLONGBOX="box_RespProlongBox",t.PUSH_PROLONGBOXINFO="box_PushProlongBoxInfo",t.SHOW_PROLONGBOX_HINT="box_ShowProlongBox_hint",t.PROLONGBOX_SUCCESS="box_prolongBox_success",t.BOXROOM_CONTINUE_ROUNDDATA="box_ContiueRoundData",t.BOXROOM_DELAY_BTN_ENABLE="box_DelayBtnEnable",t.PUSH_CONTINUEBOXINFO="box_PushContinueBoxInfo",t.NotifyClosePassLevelTask="passLevel_closeTask",t.NotifyShowPassLevelTaskPannel="passLevel_showTaskPannel",t.NotifyUpdatePassLevelTask="passLevel_updateTask",t.NotifyMixPassATotalScore="mixPassA_totalScore",t.NotifyMixPassADismissPanel="mixPassA_dismissPanel",t.NotifyMixPassADismissResult="mixPassA_dismissResult",t.NotifyMixPassABigResult="mixPassA_bigResult",t.NotifyCallMultData="callmult_data",t.NotifyCloseGameMultTask="gameMultTask_close",t.NotifyUpdateGameMultTask="gameMultTask_update",t.NotifyShowGameMultTaskAward="gameMultTask_showAward",t.NOtifyChatRecordStateChanged="chatRecord_stateChanged",o([jsClass],t)}();n.GameEvent=a,cc._RF.pop()},{}],GameGuideButtonUI:[function(t,e,n){"use strict";cc._RF.push(e,"dd13f8I8XVFAobFMPH1uGhf","GameGuideButtonUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameGuideButtonUI=n.CGuideBtnMaskShowTypeEnum=n.CShowGuideBtnTypeEnum=void 0;var r=t("../../../../Framework/Manager/EventManager"),s=t("../../../../Framework/UI/BaseUI"),c=t("../../../Base/Data/DatazOrder"),l=t("../../GuanDan/GameEvent"),u=t("./GameGuideModel"),d=t("./GameGuideUIBinder");(function(t){t[t.NONE=0]="NONE",t[t.FIRST_PLAY=1]="FIRST_PLAY",t[t.PLAY=2]="PLAY"})(n.CShowGuideBtnTypeEnum||(n.CShowGuideBtnTypeEnum={})),function(t){t[t.NONE=0]="NONE",t[t.PLAY=1]="PLAY",t[t.NOT_PLAY=2]="NOT_PLAY"}(n.CGuideBtnMaskShowTypeEnum||(n.CGuideBtnMaskShowTypeEnum={}));var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"uiType",{get:function(){return s.UIType.ScenePart},enumerable:!1,configurable:!0}),e.uiBind=function(){d.default.bindAll()},e.getPkgName=function(){return"GameGuideUI"},e.getCompName=function(){return"GameGuideButtonUI"},Object.defineProperty(e,"sortingOrder",{get:function(){return c.DataZOrder.GameGuideButtonUI},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.showUI=function(t,e){this.view.m_buttonType.selectedIndex=t,this.view.m_showType.selectedIndex=e},e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){this.view.m_btn_bc.onClick(this.onBtnNext,this),this.view.m_btn_cp.onClick(this.onBtnNext,this)},e.prototype.onBtnNext=function(){u.GameGuideModel.instance.runNextStep(),r.EventManager.instance.emit(l.GameEvent.GUIDE_INIT_HAND_CARDS_OPACITY)},i([jsClass],e)}(s.BaseUI);n.GameGuideButtonUI=p,cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/UI/BaseUI":"BaseUI","../../../Base/Data/DatazOrder":"DatazOrder","../../GuanDan/GameEvent":"GameEvent","./GameGuideModel":"GameGuideModel","./GameGuideUIBinder":"GameGuideUIBinder"}],GameGuideCardUISelfHandModel:[function(t,e,n){"use strict";cc._RF.push(e,"224f5RhhrFF9q8veReU7ad2","GameGuideCardUISelfHandModel");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameGuideCardUISelfHandModel=void 0;var a=t("./GameCardUISelfHandModel"),i=function(){function t(){this._selfHandModelObj=null,this._mustSelectCards=[],this._view=null,this._isCanTouch=!1}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return e._guideSelfHandModelObj||(e._guideSelfHandModelObj=new e,e._guideSelfHandModelObj._selfHandModelObj=a.GameCardUISelfHandModel.instance),e._guideSelfHandModelObj},enumerable:!1,configurable:!0}),t.prototype.setView=function(t){this._view=t},Object.defineProperty(t.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),t.prototype.setCanTouch=function(t){this._isCanTouch=t},Object.defineProperty(t.prototype,"isCanTouch",{get:function(){return this._isCanTouch},enumerable:!1,configurable:!0}),t.prototype.updateGuideHandsUI=function(t){this.setCanTouch(!0),this._mustSelectCards=t.cards.concat();var e=t.cards,n=[];this._selfHandModelObj._currUseCardsUIArr.forEach(function(t){if(t.isNodeVisible){var o=e.indexOf(t.cardValue);o>=0?(n.push(t),e.splice(o,1)):t.setCanTouch(!1)}}),this.showGuideSelectArea(n,t.showHand)},t.prototype.showGuideSelectArea=function(t,e){if(e=!1!==e,!this._selfHandModelObj._isHorizonalLayout){var n={};for(var o in t.forEach(function(t){var e=Math.floor(t.getRootPosition().x),o=Math.floor(t.getRootPosition().y);if(n[""+e]){var a=n[""+e];a.topCardObj.y<o?(a.topCardObj.obj=t,a.topCardObj.y=o):a.bottomCardObj.y>o&&(a.bottomCardObj.obj=t,a.bottomCardObj.y=o)}else n[""+e]={topCardObj:{obj:t,y:o},bottomCardObj:{obj:t,y:o}}}),n){var a=n[o],i=a.topCardObj.obj;if((l=a.bottomCardObj.obj).showSelectArea(!0),i!==l){var r=a.topCardObj.y,s=a.bottomCardObj.y;l.setSelectAreaSizeHieght(l.rootNode.height+Math.abs(r-s)-30)}}var c=Object.keys(n);if(e&&c.length>0){var l=n[c[c.length-1]].bottomCardObj.obj;this.showHandImg(l.cardUIGCom)}else this.hideHandImg()}},t.prototype.showHandImg=function(t){var e=this;this.view.m_handImg.visible=!0;var n=t.localToGlobal(0,0),o=this.view.globalToLocal(n.x,n.y);this.view.m_handImg.setPosition(o.x-10,o.y-50);var a=this.view.m_handImg.node.x,i=this.view.m_handImg.node.y;cc.tween(this.view.m_handImg.node).repeatForever(cc.tween().call(function(){e.view.m_handImg.node.opacity=0,e.view.m_handImg.node.setPosition(a,i)}).parallel(cc.tween().to(.8,{position:cc.v2(a,i+130)}),cc.tween().to(.3,{opacity:255})).to(.3,{opacity:0}).delay(.5)).start()},t.prototype.hideHandImg=function(){this.view.m_handImg.node.stopAllActions(),this.view.m_handImg.visible=!1},t.prototype.selectCardsEnd=function(t){t.length>0&&this.hideHandImg(),t.length===this._mustSelectCards.length?(this.setCanTouch(!1),console.log("\u9009\u62e9\u724c\u7ed3\u675f")):console.log("\u8fd8\u6709\u724c\u6ca1\u6709\u9009\u62e9")},t.prototype.initCardsOpacity=function(){var t=this;this._selfHandModelObj._currUseCardsUIArr.forEach(function(e){e.isNodeVisible&&t._mustSelectCards.indexOf(e.cardValue)<0&&e.setCanTouch(!0)})},t.prototype.guideEnd=function(){this.setCanTouch(!0)},t.prototype.onDestroy=function(){e._guideSelfHandModelObj=null},t._guideSelfHandModelObj=null,e=o([jsClass],t)}();n.GameGuideCardUISelfHandModel=i,cc._RF.pop()},{"./GameCardUISelfHandModel":"GameCardUISelfHandModel"}],GameGuideCardUI:[function(t,e,n){"use strict";cc._RF.push(e,"36f1f4SmKtNJbePQRdQD84Z","GameGuideCardUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameGuideCardUI=void 0;var r=t("../../../Framework/Manager/EventManager"),s=t("./GameEvent"),c=t("./GameCardUI"),l=t("./GameCardModel/GameGuideCardUISelfHandModel"),u=t("./Model/GameModel"),d=t("../../Base/Data/DatazOrder"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.getPkgName=function(){return"GameCardUI"},e.prototype.initData=function(){t.prototype.initData.call(this),this._guideSelfHandModelObj=l.GameGuideCardUISelfHandModel.instance,this._guideSelfHandModelObj.setView(this.view)},e.prototype.initListener=function(){t.prototype.initListener.call(this),r.EventManager.instance.on(s.GameEvent.GUIDE_SHOW_HAND_CARDS,this,this.onUpdateGuideHandsUI),r.EventManager.instance.on(s.GameEvent.GUIDE_INIT_HAND_CARDS_OPACITY,this,this.onInitCardsOpacity),r.EventManager.instance.on(s.GameEvent.GUIDE_SHOW_HAND_TGS_CARDS,this,this.onShowTongHuaShun),r.EventManager.instance.on(s.GameEvent.GUIDE_END,this,this.onGuideEnd)},e.prototype.onUpdateGuideHandsUI=function(t){t?(this.view.sortingOrder=d.DataZOrder.GameCardUI_1,this.view.m_touchArea.node.opacity=178.5,this._guideSelfHandModelObj.updateGuideHandsUI(t)):this._guideSelfHandModelObj.hideHandImg()},e.prototype.onInitCardsOpacity=function(){this.view.m_touchArea.node.opacity=0,this.view.sortingOrder=d.DataZOrder.Default,this._guideSelfHandModelObj.initCardsOpacity()},e.prototype.onShowTongHuaShun=function(t){this._selfHandModelObj.showHintPaiUIByArr({cards:t}),this.onUpdateGuideHandsUI({cards:t,showHand:!1})},e.prototype.onGuideEnd=function(){this.onInitCardsOpacity(),this._guideSelfHandModelObj.guideEnd()},e.prototype.onTouchDown=function(e){this._guideSelfHandModelObj.isCanTouch&&t.prototype.onTouchDown.call(this,e)},e.prototype.onTouchEnd=function(e){if(t.prototype.onTouchEnd.call(this,e),u.GameModel.instance.isGuideModel()){var n=this._selfHandModelObj.getSelectCardsInfo();this._guideSelfHandModelObj.selectCardsEnd(n.putCards)}},e.prototype.onTouchBeginCallBack=function(e){u.GameModel.instance.isGuideModel()||t.prototype.onTouchBeginCallBack.call(this,e)},e.prototype.onTouchEndCallBack=function(){u.GameModel.instance.isGuideModel()?(this.view.m_touchArea.node.opacity=178.5,this.view.sortingOrder=d.DataZOrder.GameCardUI_2):t.prototype.onTouchEndCallBack.call(this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._guideSelfHandModelObj.onDestroy()},i([jsClass],e)}(c.GameCardUI);n.GameGuideCardUI=p,cc._RF.pop()},{"../../../Framework/Manager/EventManager":"EventManager","../../Base/Data/DatazOrder":"DatazOrder","./GameCardModel/GameGuideCardUISelfHandModel":"GameGuideCardUISelfHandModel","./GameCardUI":"GameCardUI","./GameEvent":"GameEvent","./Model/GameModel":"GameModel"}],GameGuideModel:[function(t,e,n){"use strict";cc._RF.push(e,"047c2RJ7alBJ5YmkIsszNZQ","GameGuideModel");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameGuideModel=n.GuideEventEnum=void 0;var a,i=t("../../../../Framework/Manager/CoroutineManager"),r=t("../../../../Framework/Manager/EventManager"),s=t("../../../../Framework/Manager/UIManager"),c=t("../../../Award/AwardUINewPlayer"),l=t("../../../Base/Module/BfAnalytics/BfasManager"),u=t("../../../Base/Module/BfAnalytics/DataPointID"),d=t("../../../Hall/HallModel"),p=t("../../../Base/Module/Network/protocol/ClubGameProtocol"),h=t("../../CommonLogic/CardLogic/DefaultPokerCardsConst"),_=t("../../GuanDan/GameEvent"),f=t("../../GuanDan/Model/GameModel"),m=t("../../GuanDan/Proxy/GameProxy"),g=t("../../GuanDan/Proxy/Protocol/CardProtocol"),y=t("../../GuanDan/Proxy/Protocol/GDProtocol"),I=t("../GameCommonModel"),C=t("../PlayerInfoModel"),M=t("./GameGuideButtonUI"),v=t("./GameGuideUI");(function(t){t[t.PLAYER_INFO_EVENT=0]="PLAYER_INFO_EVENT",t[t.TAKE_FIRST_EVENT=1]="TAKE_FIRST_EVENT",t[t.SHOW_JP_EVENT=2]="SHOW_JP_EVENT",t[t.FIRST_PLAY=3]="FIRST_PLAY",t[t.GUIDE_1=4]="GUIDE_1",t[t.ROBOT_PLAY_1_1=5]="ROBOT_PLAY_1_1",t[t.ROBOT_PLAY_1_2=6]="ROBOT_PLAY_1_2",t[t.ROBOT_PLAY_1_3=7]="ROBOT_PLAY_1_3",t[t.ROBOT_PLAY_1_0=8]="ROBOT_PLAY_1_0",t[t.GUIDE_2=9]="GUIDE_2",t[t.ROBOT_PLAY_2_1=10]="ROBOT_PLAY_2_1",t[t.ROBOT_PLAY_2_2=11]="ROBOT_PLAY_2_2",t[t.ROBOT_PLAY_2_3=12]="ROBOT_PLAY_2_3",t[t.ROBOT_PLAY_2_0=13]="ROBOT_PLAY_2_0",t[t.GUIDE_3=14]="GUIDE_3",t[t.ROBOT_PLAY_3_1=15]="ROBOT_PLAY_3_1",t[t.ROBOT_PLAY_3_2=16]="ROBOT_PLAY_3_2",t[t.ROBOT_PLAY_3_3=17]="ROBOT_PLAY_3_3",t[t.ROBOT_PLAY_3_0=18]="ROBOT_PLAY_3_0",t[t.GUIDE_4=19]="GUIDE_4",t[t.ROBOT_PLAY_4_1=20]="ROBOT_PLAY_4_1",t[t.ROBOT_PLAY_4_2=21]="ROBOT_PLAY_4_2",t[t.ROBOT_PLAY_4_3=22]="ROBOT_PLAY_4_3",t[t.ROBOT_PLAY_4_0=23]="ROBOT_PLAY_4_0",t[t.GUIDE_5=24]="GUIDE_5",t[t.ROBOT_PLAY_5_1=25]="ROBOT_PLAY_5_1",t[t.ROBOT_PLAY_5_2=26]="ROBOT_PLAY_5_2",t[t.ROBOT_PLAY_5_3=27]="ROBOT_PLAY_5_3",t[t.ROBOT_PLAY_5_0=28]="ROBOT_PLAY_5_0",t[t.GUIDE_6=29]="GUIDE_6",t[t.ROBOT_PLAY_6_1=30]="ROBOT_PLAY_6_1",t[t.END_EVENT=31]="END_EVENT"})(a=n.GuideEventEnum||(n.GuideEventEnum={}));var E=function(){function t(){this._stepList=[],this._nowStepID=0,this._takeFirstcards=[28,41,15,50,51,52,24,11,11,48,49,9,35,46,20,33,33,7,43,43]}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return null==e._instance&&(e._instance=new e,e._instance.initStepList()),e._instance},enumerable:!1,configurable:!0}),t.prototype.initStepList=function(){this.addPlayCardStep(a.FIRST_PLAY,0,[29,42],h.PokerCardsType.DuiZi,3,!0,!0),this.addGuideStep(a.GUIDE_1,!1,6),this.addPlayCardStep(a.ROBOT_PLAY_1_1,1,[43,43],h.PokerCardsType.DuiZi,4,!0,!1),this.addPlayCardStep(a.ROBOT_PLAY_1_2,2,[2,2],h.PokerCardsType.DuiZi,2,!0,!0),this.addPlayCardStep(a.ROBOT_PLAY_1_3,3,[12,38,25,25],h.PokerCardsType.SiZhang,12,!0,!0),this.addPlayCardStep(a.ROBOT_PLAY_1_0,0,[],h.PokerCardsType.None,0,!0,!0),this.addGuideStep(a.GUIDE_2,!1,6),this.addPlayCardStep(a.ROBOT_PLAY_2_1,1,[],h.PokerCardsType.None,0,!0,!1),this.addPlayCardStep(a.ROBOT_PLAY_2_2,2,[],h.PokerCardsType.None,0,!0,!0),this.addPlayCardStep(a.ROBOT_PLAY_2_3,3,[26,13,13,14,40,27],h.PokerCardsType.LianSan,14,!0,!0),this.addPlayCardStep(a.ROBOT_PLAY_2_0,0,[44,44,18,18,31],h.PokerCardsType.WuZhang,5,!0,!0),this.addGuideStep(a.GUIDE_3,!1,6),this.addPlayCardStep(a.ROBOT_PLAY_3_1,1,[48,49,50,51,52],h.PokerCardsType.TongHuaShun,13,!0,!1),this.addPlayCardStep(a.ROBOT_PLAY_3_2,2,[],h.PokerCardsType.None,0,!0,!0),this.addPlayCardStep(a.ROBOT_PLAY_3_3,3,[],h.PokerCardsType.None,0,!0,!0),this.addPlayCardStep(a.ROBOT_PLAY_3_0,0,[],h.PokerCardsType.None,0,!0,!0),this.addGuideStep(a.GUIDE_4,!1,4),this.addPlayCardStep(a.ROBOT_PLAY_4_1,1,[11,11,24,9,35],h.PokerCardsType.SanDaiEr,11,!0,!1),this.addPlayCardStep(a.ROBOT_PLAY_3_2,2,[3,4,5,6,7],h.PokerCardsType.TongHuaShun,3,!0,!0),this.addPlayCardStep(a.ROBOT_PLAY_3_3,3,[],h.PokerCardsType.None,0,!0,!0),this.addPlayCardStep(a.ROBOT_PLAY_3_0,0,[],h.PokerCardsType.None,0,!0,!0),this.addGuideStep(a.GUIDE_5,!1,6),this.addPlayCardStep(a.ROBOT_PLAY_5_1,1,[7,33,33,20,46,28],h.PokerCardsType.LiuZhang,7,!0,!1),this.addPlayCardStep(a.ROBOT_PLAY_5_2,2,[],h.PokerCardsType.None,0,!0,!0),this.addPlayCardStep(a.ROBOT_PLAY_5_3,3,[],h.PokerCardsType.None,0,!0,!0),this.addPlayCardStep(a.ROBOT_PLAY_5_0,0,[],h.PokerCardsType.None,0,!0,!0),this.addGuideStep(a.GUIDE_6,!1,4),this.addPlayCardStep(a.ROBOT_PLAY_6_1,1,[15,41],h.PokerCardsType.DuiZi,2,!0,!1)},t.prototype.addGuideStep=function(t,e,n){var o={};o.stepID=t,o.isShow=e,o.power=n,this._stepList.push(o)},t.prototype.addPlayCardStep=function(t,e,n,o,a,i,r){var s=new g.CardProtocol.msgPlayCard;s.cards=n,s.cardCount=n.length,s.power=a,s.typeID=o,s.seat=C.PlayerInfoModel.instance.localToServer(e);var c={};c.obj=s,c.stepID=t,c.isShow=i,c.isNeedWait=r,this._stepList.push(c)},t.prototype.setNowStepID=function(t){this._nowStepID=t},t.prototype.getNowStepID=function(){return this._nowStepID},t.prototype.startGuide=function(){this.resetClosePackageFunction(),this.updateUserInfo(),this.takeFirst()},t.prototype.resetClosePackageFunction=function(){this._iteratorFunc=this.getClosePackageFunction()},t.prototype.getClosePackageFunction=function(){var t=this,e=0;return this._nowStepID=0,function(){if(e>=t._stepList.length)return s.UIManager.instance.open(c.AwardUINewPlayer).then(function(t){t.showUI(c.NewPlayerAwardSourceEnum.FINISH)}),s.UIManager.instance.isExist(v.GameGuideUI)&&s.UIManager.instance.close(v.GameGuideUI),I.GameCommonModel.instance.stopListener(),r.EventManager.instance.emit(_.GameEvent.GUIDE_STEP,a.END_EVENT),r.EventManager.instance.emit(_.GameEvent.GUIDE_END),void(s.UIManager.instance.isExist(M.GameGuideButtonUI)&&s.UIManager.instance.close(M.GameGuideButtonUI));var n=e++;t._nowStepID=t._stepList[n].stepID,r.EventManager.instance.emit(_.GameEvent.GUIDE_STEP,t._stepList[n].stepID),t._stepList[n].isShow?t.dealPlayCard(t._stepList[n]):(t.onClock(C.PlayerInfoModel.instance.localToServer(C.LocalSeatEnum.SELF)),t.onPower(C.PlayerInfoModel.instance.localToServer(C.LocalSeatEnum.SELF),t._stepList[n].power))}},t.prototype.dealPlayCard=function(t){var e=this;this.onClock(t.obj.seat);var n=function(){m.GameProxy.instance.onPlayCard(t.obj),e.runNextStep()};t.isNeedWait?i.CoroutineManager.instance.once(1,function(){e._nowStepID!==a.END_EVENT&&n()}):n()},t.prototype.onClock=function(t){var e=new g.CardProtocol.msgClock;e.seat=t,e.time=15,m.GameProxy.instance.onClock(e)},t.prototype.onPower=function(t,e){var n=new g.CardProtocol.msgPower;n.seat=t,n.power=e,m.GameProxy.instance.onPower(n)},t.prototype.updateUserInfo=function(){for(var t=0;t<C.MAX_PLAYER;++t){var e=t===C.LocalSeatEnum.SELF?d.default.instance.getNumID():t,n=new p.ClubGameProtocol.PlayState;n.numid=e,n.seatid=C.PlayerInfoModel.instance.localToServer(t),C.PlayerInfoModel.instance.updatePlayerState(n);var o=new p.ClubGameProtocol.PlayerUserInfo;o.numid=e,C.PlayerInfoModel.instance.updatePlayerUserInfo(o);var a=new p.ClubGameProtocol.PlayerGameInfo;a.numid=e,C.PlayerInfoModel.instance.updatePlayerGameInfo(a)}},t.prototype.takeFirst=function(){for(var t=0;t<C.MAX_PLAYER;++t){var e=new g.CardProtocol.msgHandCard;e.seat=C.PlayerInfoModel.instance.localToServer(t),e.cards=t===C.LocalSeatEnum.SELF?this._takeFirstcards:[55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55],e.count=e.cards.length,m.GameProxy.instance.onHandCard(e)}var n=new y.GDProtocol.msgNowRoundInfo;n.nowRoundLevel=2,n.nowRoundTeam=1,m.GameProxy.instance.onNowRoundInfo(n),f.GameModel.instance.setGameStep(f.GameStepEnum.GAME_STEP_PLAY_CARD),r.EventManager.instance.emit(_.GameEvent.TAKE_FIRST_ACTION)},t.prototype.runNextStep=function(){this._nowStepID!==a.SHOW_JP_EVENT&&this._nowStepID!==a.GUIDE_1&&this._nowStepID!==a.GUIDE_2&&this._nowStepID!==a.GUIDE_3&&this._nowStepID!==a.GUIDE_4&&this._nowStepID!==a.GUIDE_5&&this._nowStepID!==a.GUIDE_6||(r.EventManager.instance.emit(_.GameEvent.NEW_PLAYER_GUIDE),r.EventManager.instance.emit(_.GameEvent.GUIDE_SHOW_DESC),r.EventManager.instance.emit(_.GameEvent.GUIDE_SHOW_NO_TOUCH_UI,!0),s.UIManager.instance.isExist(M.GameGuideButtonUI)&&s.UIManager.instance.close(M.GameGuideButtonUI)),this.dealDataPoint(this._nowStepID),this._iteratorFunc()},t.prototype.dealDataPoint=function(t){t===a.SHOW_JP_EVENT?l.BfasManager.instance.sendEvt(u.NewPlayerPointID.finishLevelGuide):t===a.GUIDE_1?l.BfasManager.instance.sendEvt(u.NewPlayerPointID.finishFollowGuide):t===a.GUIDE_2?l.BfasManager.instance.sendEvt(u.NewPlayerPointID.finishNotGuide):t===a.GUIDE_3?l.BfasManager.instance.sendEvt(u.NewPlayerPointID.finishTHSGuide):t===a.GUIDE_4?l.BfasManager.instance.sendEvt(u.NewPlayerPointID.finishFirstGuide):t===a.GUIDE_5?l.BfasManager.instance.sendEvt(u.NewPlayerPointID.finishJokerGuide):t===a.GUIDE_6&&l.BfasManager.instance.sendEvt(u.NewPlayerPointID.finishAllGuide)},t._instance=null,e=o([jsClass],t)}();n.GameGuideModel=E,cc._RF.pop()},{"../../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Manager/UIManager":"UIManager","../../../Award/AwardUINewPlayer":"AwardUINewPlayer","../../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../../Base/Module/Network/protocol/ClubGameProtocol":"ClubGameProtocol","../../../Hall/HallModel":"HallModel","../../CommonLogic/CardLogic/DefaultPokerCardsConst":"DefaultPokerCardsConst","../../GuanDan/GameEvent":"GameEvent","../../GuanDan/Model/GameModel":"GameModel","../../GuanDan/Proxy/GameProxy":"GameProxy","../../GuanDan/Proxy/Protocol/CardProtocol":"CardProtocol","../../GuanDan/Proxy/Protocol/GDProtocol":"GDProtocol","../GameCommonModel":"GameCommonModel","../PlayerInfoModel":"PlayerInfoModel","./GameGuideButtonUI":"GameGuideButtonUI","./GameGuideUI":"GameGuideUI"}],GameGuideUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"e0a2eNwcxRImJ8Raq/K4h5R","GameGuideUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./GameGuideUI_windows"),a=t("./GameGuideUI_MainPanel"),i=t("./GameGuideUI_GameGuideButtonUI"),r=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default)},t}();n.default=r,cc._RF.pop()},{"./GameGuideUI_GameGuideButtonUI":"GameGuideUI_GameGuideButtonUI","./GameGuideUI_MainPanel":"GameGuideUI_MainPanel","./GameGuideUI_windows":"GameGuideUI_windows"}],GameGuideUI_GameGuideButtonUI:[function(t,e,n){"use strict";cc._RF.push(e,"59cd54uX1pIOapDrrfuXZd/","GameGuideUI_GameGuideButtonUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameGuideUI","GameGuideButtonUI")},e.prototype.onConstruct=function(){this.m_buttonType=this.getControllerAt(0),this.m_showType=this.getControllerAt(1),this.m_btn_bc=this.getChildAt(1),this.m_btn_cp=this.getChildAt(2),this.m_btn_ts=this.getChildAt(3)},e.URL="ui://vglqgnz9x7qmc",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameGuideUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"9c76ch8rlVERZR8mgU+TRx2","GameGuideUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameGuideUI","MainPanel")},e.prototype.onConstruct=function(){this.m_guideType=this.getControllerAt(0),this.m_showType=this.getControllerAt(1),this.m_window=this.getChildAt(1),this.m_bg=this.getChildAt(2),this.m_desctxt=this.getChildAt(6),this.m_btn_skip=this.getChildAt(7)},e.URL="ui://vglqgnz9j7o31",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameGuideUI_windows:[function(t,e,n){"use strict";cc._RF.push(e,"34ee3sLU4VGcb5vGrk0Ns8B","GameGuideUI_windows");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameGuideUI","windows")},e.prototype.onConstruct=function(){this.m_btn_new=this.getChildAt(1),this.m_btn_old=this.getChildAt(2)},e.URL="ui://vglqgnz9j7o30",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameGuideUI:[function(t,e,n){"use strict";cc._RF.push(e,"cb105quzRVJlb6BFsQ7kGao","GameGuideUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameGuideUI=void 0;var r,s,c=t("../../../../Framework/Manager/EventManager"),l=t("../../../../Framework/Manager/UIManager"),u=t("../../../../Framework/UI/BaseUI"),d=t("../../../../Framework/UI/FadeUI"),p=t("../../../Award/AwardUINewPlayer"),h=t("../../../Base/Module/BfAnalytics/BfasManager"),_=t("../../../Base/Module/BfAnalytics/DataPointID"),f=t("../../../Base/Utils/UtilView"),m=t("../../../Base/View/Common/DialogUI"),g=t("../../../Hall/HallModel"),y=t("../../../Base/Module/Platform/Const/PlatformEventType"),I=t("../../GameGuide/GuideDescUI"),C=t("../../GameGuide/GuideUI"),M=t("../../GuanDan/GameEvent"),v=t("../../GuanDan/GameGuideCardUI"),E=t("../../GuanDan/GameUI"),A=t("../../GuanDan/Model/GameModel"),P=t("../GameCommonModel"),b=t("./GameGuideButtonUI"),U=t("./GameGuideModel"),S=t("../../../Base/Data/DatazOrder");(function(t){t[t.WAIT=0]="WAIT",t[t.GUIDING=1]="GUIDING"})(r||(r={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(s||(s={}));var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return a(e,t),n=e,Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return u.UIType.Dialog},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sortingOrder",{get:function(){return S.DataZOrder.GameGuideUI},enumerable:!1,configurable:!0}),e.prototype.setView=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this._view=t,A.GameModel.instance.setGuided(!0),l.UIManager.instance.open(v.GameGuideCardUI).then(function(){console.error(Date.now()/1e3)})},e.prototype.setCallBack=function(t){this._callback=t},e.prototype.onLoad=function(){this.initListener(),this.initUI()},e.prototype.initListener=function(){c.EventManager.instance.on(y.PlatformEventType.AppHide,this,this.onAppHide),this.view.m_window.m_btn_new.onClick(this.onBtnNew,this),this.view.m_window.m_btn_old.onClick(this.onBtnOld,this),this.view.m_btn_skip.onClick(this.onBtnSkip,this),this.view.m_bg.onClick(this.onBtnNext,this)},e.prototype.initUI=function(){f.UtilView.isFullScreen()&&(this.view.m_btn_skip.x+=44)},e.prototype.onAppHide=function(){console.log(">----\x3eonAppHide.GameGuideUI"),l.UIManager.instance.isExist(n)&&h.BfasManager.instance.sendEvt(_.UserConvertLinkPointID.CLOSE_NEW_GUIDE)},e.prototype.onBtnNew=function(){h.BfasManager.instance.sendEvt(_.NewPlayerPointID.touchBtnNew),A.GameModel.instance.setGuideState(A.GuideTypeEnum.GUIDE),this.view.m_guideType.selectedIndex=r.GUIDING;var t=function(){U.GameGuideModel.instance.startGuide(),l.UIManager.instance.open(C.GuideUI).then(function(){l.UIManager.instance.open(I.GuideDescUI)}),l.UIManager.instance.get(E.GameUI).then(function(t){t.preLoadOtherPackage()})};l.UIManager.instance.isExist(v.GameGuideCardUI)?t():l.UIManager.instance.open(v.GameGuideCardUI).then(function(){t()})},e.prototype.onBtnOld=function(){h.BfasManager.instance.sendEvt(_.NewPlayerPointID.touchBtnOld),c.EventManager.instance.emit(M.GameEvent.GUIDE_END),this.startMathing(),this.onExitClick()},e.prototype.startMathing=function(){A.GameModel.instance.setGuideState(A.GuideTypeEnum.FIRST_GAME),g.default.instance.doQuickStartToGame()},e.prototype.onBtnSkip=function(){var t=this;h.BfasManager.instance.sendEvt(_.NewPlayerPointID.touchBtnSkip),l.UIManager.instance.open(m.DialogUI).then(function(e){e.initConfirmCancelClose({content:"\u7ec8\u6b62\u672c\u6b21\u6559\u7a0b\u540e\uff0c\u5c06\u65e0\u6cd5\u518d\u6b21\u8fdb\u884c\uff0c\u662f\u5426\u786e\u8ba4\u8df3\u8fc7\uff1f"}),e.confirmAction=function(){h.BfasManager.instance.sendEvt(_.NewPlayerPointID.touchBtnSkip2),l.UIManager.instance.open(p.AwardUINewPlayer).then(function(t){t.showUI(p.NewPlayerAwardSourceEnum.SKIP)}),l.UIManager.instance.isExist(I.GuideDescUI)&&l.UIManager.instance.close(I.GuideDescUI),l.UIManager.instance.isExist(C.GuideUI)&&l.UIManager.instance.close(C.GuideUI),P.GameCommonModel.instance.stopListener(),c.EventManager.instance.emit(M.GameEvent.GUIDE_STEP,U.GuideEventEnum.END_EVENT),l.UIManager.instance.isExist(b.GameGuideButtonUI)&&l.UIManager.instance.close(b.GameGuideButtonUI),c.EventManager.instance.emit(M.GameEvent.GUIDE_END),t.onExitClick()}})},e.prototype.onBtnNext=function(){this._callback&&this._callback(),this.view.m_showType.selectedIndex=s.HIDE,U.GameGuideModel.instance.runNextStep()},e.prototype.showGuideFirst=function(){U.GameGuideModel.instance.setNowStepID(U.GuideEventEnum.SHOW_JP_EVENT),this.view.m_showType.selectedIndex=s.SHOW,this.view.m_guideType.selectedIndex=r.GUIDING},n=i([jsClass],e)}(d.FadeUI);n.GameGuideUI=T,cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Manager/UIManager":"UIManager","../../../../Framework/UI/BaseUI":"BaseUI","../../../../Framework/UI/FadeUI":"FadeUI","../../../Award/AwardUINewPlayer":"AwardUINewPlayer","../../../Base/Data/DatazOrder":"DatazOrder","../../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../../Base/Module/Platform/Const/PlatformEventType":"PlatformEventType","../../../Base/Utils/UtilView":"UtilView","../../../Base/View/Common/DialogUI":"DialogUI","../../../Hall/HallModel":"HallModel","../../GameGuide/GuideDescUI":"GuideDescUI","../../GameGuide/GuideUI":"GuideUI","../../GuanDan/GameEvent":"GameEvent","../../GuanDan/GameGuideCardUI":"GameGuideCardUI","../../GuanDan/GameUI":"GameUI","../../GuanDan/Model/GameModel":"GameModel","../GameCommonModel":"GameCommonModel","./GameGuideButtonUI":"GameGuideButtonUI","./GameGuideModel":"GameGuideModel"}],GameJSUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"06429+02qpP8qYeVrLPfmqy","GameJSUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./GameJSUI_MainPanel"),a=t("./GameJSUI_Player"),i=t("./GameJSUI_window"),r=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default)},t}();n.default=r,cc._RF.pop()},{"./GameJSUI_MainPanel":"GameJSUI_MainPanel","./GameJSUI_Player":"GameJSUI_Player","./GameJSUI_window":"GameJSUI_window"}],GameJSUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"9f107hjE+RFArfF5hutlQ9S","GameJSUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameJSUI","MainPanel")},e.prototype.onConstruct=function(){this.m_window=this.getChildAt(1)},e.URL="ui://fqoj34odjvjw0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameJSUI_Player:[function(t,e,n){"use strict";cc._RF.push(e,"fdb1azbo5lJrrEQRt57fFGu","GameJSUI_Player");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameJSUI","Player")},e.prototype.onConstruct=function(){this.m_status=this.getControllerAt(0),this.m_name=this.getChildAt(0)},e.URL="ui://fqoj34odjvjw1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameJSUI_window:[function(t,e,n){"use strict";cc._RF.push(e,"9d98eKxabtF1IgUAVRnMQVp","GameJSUI_window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameJSUI","window")},e.prototype.onConstruct=function(){this.m_isSelect=this.getControllerAt(0),this.m_content=this.getChildAt(2),this.m_player_0=this.getChildAt(3),this.m_player_1=this.getChildAt(4),this.m_player_2=this.getChildAt(5),this.m_player_3=this.getChildAt(6),this.m_btn_agree=this.getChildAt(7),this.m_btn_refuse=this.getChildAt(8),this.m_time=this.getChildAt(9),this.m_content2=this.getChildAt(10),this.m_time2=this.getChildAt(11)},e.URL="ui://fqoj34odjvjw9",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameJSUI:[function(t,e,n){"use strict";cc._RF.push(e,"03e80JV1pFHr74h8SgWijHo","GameJSUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameJSUI=n.JSStateEnum=void 0;var r,s,c,l=t("../../../../Framework/Manager/EventManager"),u=t("../../../../Framework/UI/FadeUI"),d=t("../GameCommonModel"),p=t("../../../../Framework/UI/BaseUI"),h=t("../../GuanDan/GameEvent"),_=t("../PlayerInfoModel"),f=t("../../../../Framework/Manager/CoroutineManager"),m=t("../../../Base/Data/DataEvent"),g=t("../../../Base/View/UIHelp"),y=t("../../../Base/Data/DatazOrder");(function(t){t[t.NOT_SELECT_TYPE=0]="NOT_SELECT_TYPE",t[t.SELECT_TYPE=1]="SELECT_TYPE"})(r||(r={})),function(t){t[t.SELECT_TYPE=0]="SELECT_TYPE",t[t.SURE_TYPE=1]="SURE_TYPE"}(s||(s={})),function(t){t[t.WAIT_TYPE=-1]="WAIT_TYPE",t[t.REQ_JS_TYPE=0]="REQ_JS_TYPE",t[t.AGREE_TYPE=1]="AGREE_TYPE",t[t.REFUSE_TYPE=2]="REFUSE_TYPE"}(c=n.JSStateEnum||(n.JSStateEnum={}));var I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e,"willShowLoading",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return p.UIType.Dialog},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},Object.defineProperty(e,"sortingOrder",{get:function(){return y.DataZOrder.GameJSUI},enumerable:!1,configurable:!0}),e.prototype.initData=function(t){this.initUI(t),this.onRoomJS(t),this.initTime(t)},e.prototype.initUI=function(t){for(var e=0;e<_.PlayerInfoModel.instance.getNowGamePlayer();++e){var n=_.PlayerInfoModel.instance.getTempPlayerByServiceSeat(e);if(!n&&(n=_.PlayerInfoModel.instance.getPlayerByServiceSeat(e)),n){if(t.m_state[e]===c.REQ_JS_TYPE){var o=g.UIHelp.formatNicknameL(n.nickname,12);this.view.m_window.m_content.text="["+o+"]\u53d1\u8d77\u6295\u7968\u89e3\u6563\u623f\u95f4\uff0c"+(_.PlayerInfoModel.instance.getNowGamePlayer()/2+1)+"\u4eba\u540c\u610f\u5373\u89e3\u6563"}this.view.m_window["m_player_"+e].visible=!0,this.view.m_window["m_player_"+e].m_name.url=_.PlayerInfoModel.instance.getHead(n.numid)}}},e.prototype.initTime=function(t){var e=this;if(!this._corouId){var n=Date.now()+1e3*t.m_remainingTime;this._corouId=f.CoroutineManager.instance.loop(1,function(){return e.view.m_window.m_time.title=Math.floor((n-Date.now())/1e3)+"s",e.view.m_window.m_time2.title=Math.floor((n-Date.now())/1e3)+"s",!1},this)}},e.prototype.initListener=function(){l.EventManager.instance.on(h.GameEvent.ROOM_JS,this,this.onRoomJS),this.view.m_window.m_btn_agree.onClick(this.onBtnAgree,this),this.view.m_window.m_btn_refuse.onClick(this.onBtnRefuse,this)},e.prototype.onRoomJS=function(t){for(var e=0;e<_.PlayerInfoModel.instance.getNowGamePlayer();++e)if(t.m_state[e]===c.REQ_JS_TYPE||t.m_state[e]===c.AGREE_TYPE)this.view.m_window["m_player_"+e].m_status.selectedIndex=s.SURE_TYPE;else if(t.m_state[e]===c.WAIT_TYPE)this.view.m_window["m_player_"+e].m_status.selectedIndex=s.SELECT_TYPE;else if(t.m_state[e]===c.REFUSE_TYPE)return void l.EventManager.instance.emit(m.DataEvent.ToastData,"\u6709\u73a9\u5bb6\u62d2\u7edd\u89e3\u6563\u623f\u95f4\uff0c\u6e38\u620f\u7ee7\u7eed\uff01");var n=_.PlayerInfoModel.instance.getSelfSeat();t.m_state[n]===c.REQ_JS_TYPE||t.m_state[n]===c.AGREE_TYPE?(this.view.m_window.m_content2.title="\u60a8\u5df2\u540c\u610f\uff0c\u6b63\u5728\u7b49\u5f85\u5176\u4ed6\u4eba\u3002",this.view.m_window.m_isSelect.selectedIndex=r.SELECT_TYPE):t.m_state[n]===c.REFUSE_TYPE?(this.view.m_window.m_content2.title="\u60a8\u5df2\u62d2\u7edd\uff0c\u6b63\u5728\u7b49\u5f85\u5176\u4ed6\u4eba\u3002",this.view.m_window.m_isSelect.selectedIndex=r.SELECT_TYPE):this.view.m_window.m_isSelect.selectedIndex=r.NOT_SELECT_TYPE,this.initTime(t)},e.prototype.onBtnAgree=function(){d.GameCommonModel.instance.reqJieSan(c.AGREE_TYPE)},e.prototype.onBtnRefuse=function(){d.GameCommonModel.instance.reqJieSan(c.REFUSE_TYPE)},i([jsClass],e)}(u.FadeUI);n.GameJSUI=I,cc._RF.pop()},{"../../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/UI/BaseUI":"BaseUI","../../../../Framework/UI/FadeUI":"FadeUI","../../../Base/Data/DataEvent":"DataEvent","../../../Base/Data/DatazOrder":"DatazOrder","../../../Base/View/UIHelp":"UIHelp","../../GuanDan/GameEvent":"GameEvent","../GameCommonModel":"GameCommonModel","../PlayerInfoModel":"PlayerInfoModel"}],GameMakeCardUI:[function(t,e,n){"use strict";cc._RF.push(e,"8e387tWbwVJaZBrldQ4R/yE","GameMakeCardUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameMakeCardUI=void 0;var r=t("../../../Framework/UI/BaseUI"),s=t("../../../Framework/Manager/EventManager"),c=t("./GameCardModel/GameCardUITestHandModel"),l=t("./GameEvent"),u=t("./Proxy/GameProxy"),d=t("../../../Framework/Manager/UIManager"),p=t("../../Base/Data/DatazOrder"),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return a(e,t),n=e,e.getPkgName=function(){return"GameCardUI"},e.getCompName=function(){return"SelectCardsPanel"},Object.defineProperty(e,"sortingOrder",{get:function(){return p.DataZOrder.MAX},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return r.UIType.ScenePart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._selfModelObj.onDestroy()},e.prototype.onLoad=function(){this.initData(),this.initListener(),this.initUI()},e.prototype.initData=function(){this._selfModelObj=c.GameCardUITestHandModel.instance},e.prototype.initListener=function(){s.EventManager.instance.on(l.GameEvent.RESP_XY_TEST_CARDS,this,this.respSelectCards),this.view.m_okbtn.onClick(this.clickOk,this),this.view.m_touchArea.on(fgui.Event.TOUCH_BEGIN,this.onTouchDown,this),this.view.m_touchArea.on(fgui.Event.TOUCH_MOVE,this.onTouchMove,this),this.view.m_touchArea.on(fgui.Event.TOUCH_END,this.onTouchEnd,this)},e.prototype.initUI=function(){this._selfModelObj.init(this.view)},e.prototype.respSelectCards=function(t){this._selfModelObj.updateCardsUI(t.cards)},e.prototype.clickOk=function(){this.sendSelectCards()},e.prototype.sendSelectCards=function(){var t=this._selfModelObj.getSelectCards();u.GameProxy.instance.sendMakeCardData(t),d.UIManager.instance.isExist(n)&&d.UIManager.instance.close(n)},e.prototype.onTouchDown=function(t){this._selfModelObj.onTouchDown(t)},e.prototype.onTouchMove=function(t){this._selfModelObj.onTouchMove(t)},e.prototype.onTouchEnd=function(t){this._selfModelObj.onTouchEnd(t)},n=i([jsClass],e)}(r.BaseUI);n.GameMakeCardUI=h,cc._RF.pop()},{"../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/UI/BaseUI":"BaseUI","../../Base/Data/DatazOrder":"DatazOrder","./GameCardModel/GameCardUITestHandModel":"GameCardUITestHandModel","./GameEvent":"GameEvent","./Proxy/GameProxy":"GameProxy"}],GameMatchResultUI:[function(t,e,n){"use strict";cc._RF.push(e,"ff756bHhFRNHrhWFUaK3agi","GameMatchResultUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameMatchResultUI=void 0;var r,s,c=t("../../../../Framework/UI/FadeUI"),l=t("../../../UserInfo/UserInfoModel"),u=t("../../../../Framework/UI/BaseUI"),d=t("../PlayerInfoModel"),p=t("../../GuanDan/Model/GameModel"),h=t("../../../Base/Module/BfAnalytics/BfasManager"),_=t("../../../Base/Module/BfAnalytics/DataPointID"),f=t("../../../Base/Utils/UtilCC"),m=t("../../../Base/View/UIHelp"),g=t("../../../Base/Data/DataSpineAni"),y=t("../../../Base/Data/DatazOrder"),I=t("../../../../Framework/Manager/CoroutineManager"),C=t("../../../MatchShare/MatchShareModel"),M=t("../../../Match/MatchModel");(function(t){t[t.NOT_SELF=0]="NOT_SELF",t[t.IS_SELF=1]="IS_SELF"})(r||(r={})),function(t){t[t.WIN_TYPE=0]="WIN_TYPE",t[t.LOSE_TYPE=1]="LOSE_TYPE"}(s||(s={}));var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._playerNums=0,e._players=[],e._clockDownCorout=null,e}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.getPkgName=function(){return"GameResultUI"},e.getCompName=function(){return"MainPanel_Match"},Object.defineProperty(e,"willShowLoading",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return u.UIType.Window},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sortingOrder",{get:function(){return y.DataZOrder.GameResult},enumerable:!1,configurable:!0}),e.prototype.setMatchContinueCallBack=function(t){this._matchContinueCallFunc=t},e.prototype.setMatchReadyCallBack=function(t){this._matchReadyCallFunc=t},e.prototype.onLoad=function(){this.initData(),this.initListener(),this.initUI(),h.BfasManager.instance.sendEvt(_.BoxRoomPointID.SHOW_BIG_RESULT,{type:2})},e.prototype.initData=function(){this._playerNums=d.PlayerInfoModel.instance.getNowGamePlayer();for(var t=0;t<this._playerNums;++t)this._players.push(this.newPlayerResultInfo())},e.prototype.initListener=function(){this.view.m_compFingerTouch.on(fgui.Event.TOUCH_BEGIN,this.onTouchDown,this),this.view.m_compFingerTouch.on(fgui.Event.TOUCH_MOVE,this.onTouchMove,this),this.view.m_compFingerTouch.on(fgui.Event.TOUCH_END,this.onTouchEnd,this),this.view.m_btnMatchContinue.onClick(this.onBtnMatchContinue,this)},e.prototype.initUI=function(){this.playMatchSpineAnimation()},e.prototype.newPlayerResultInfo=function(){return{winFlag:0,nickname:"",numid:0,winLost:0,firstCnt:0,winCnt:0,isCreator:0,isSelf:0,headurl:"",totalScore:0,isPassAOver:!1,trustState:0,isWiner:!1,serverSeat:-1}},e.prototype.initMatchReusltUI=function(t){this.updatePlayerInfoWithMatch(t),this.refreshResultMatchUI(),this.playClockDown()},e.prototype.updatePlayerInfoWithMatch=function(t){var e=d.PlayerInfoModel.instance.players,n=d.PlayerInfoModel.instance.tempplayers;console.log("ttt.updatePlayerInfoWithMatchnow1:",e),console.log("ttt.updatePlayerInfoWithMatchtmep2:",n);for(var o=0;o<this._playerNums;++o){var a=d.PlayerInfoModel.instance.getTempPlayerByServerSeat(o);void 0===a.nickname&&(a=d.PlayerInfoModel.instance.getPlayerByServerSeat(o)),a&&(this._players[o].isSelf=a.numid===l.UserInfoModel.instance.userInfo.numID?r.IS_SELF:r.NOT_SELF,this._players[o].nickname=m.UIHelp.formatNicknameL(a.nickname,8),this._players[o].numid=a.numid,this._players[o].headurl=d.PlayerInfoModel.instance.getHead(a.numid),this._players[o].winLost=t.nWinLost[o],this._players[o].isWiner=t.bWinner[o],this._players[o].playRank=t.playRank[o],this._players[o].winFlag=t.bWinner[o]?1:0,this._players[o].totalScore=t.nIntegralWinLost[o],this._players[o].serverSeat=o)}this.sortPlayerByMatch()},e.prototype.getNode=function(t,e){return e===d.MAX_PLAYER?this.view.m_players["m_node_"+t]:e===d.ER_CNT?this.view.m_players["m_node_"+(t+1)]:void 0},e.prototype.sortPlayerByMatch=function(){this._players.sort(function(t,e){return t.winFlag===e.winFlag?t.playRank-e.playRank:e.winFlag-t.winFlag})},e.prototype.refreshResultMatchUI=function(){var t=this;if(p.GameModel.instance.isMatchFinalRound()){var e=p.GameModel.instance.getLastMatchInfo().nowPan||1;console.log("ttt.isMatchFinalRound.pan:",e),this.view.m_txtMatchTitle.text="\u51b3\u8d5b\u7b2c"+e+"\u5c40"}else this.view.m_txtMatchTitle.text="\u672c\u5c40\u7ed3\u7b97";for(var n=0;n<this._players.length;++n){var o=this.getNode(n+1,this._playerNums);o.m_isSelf.selectedIndex=this._players[n].isSelf,o.m_nickname.text=this._players[n].nickname,o.m_headUrl.url=d.PlayerInfoModel.instance.getHead(this._players[n].numid),0===n?o.m_matchFirstTitle.visible=!0:1===n?(o.m_matchWinTitle.visible=!0,o.m_matchWinTitle.text=this.convertPlayRank(this._players[n].playRank)):(o.m_matchLoseTitle.visible=!0,o.m_matchLoseTitle.text=this.convertPlayRank(this._players[n].playRank)),o.m_score.x=o.m_score.x+10,o.m_score2.x=o.m_score2.x+10;var a=this._players[n].winLost>0?"+"+this._players[n].winLost.toString():this._players[n].winLost.toString(),i=this._players[n].totalScore.toString();p.GameModel.instance.isMatchFinalRound()?(o.m_gMatchFinal.visible=!0,p.GameModel.instance.isMatchFinalRoundEnd()?(o.m_score.text="\u603b\u79ef\u5206:"+i,o.m_score2.text="\u603b\u79ef\u5206:"+i,o.m_txtFinalTitle.text="\u672c\u5c40\u79ef\u5206\uff1a",o.m_matchFinalScore.text=a):(o.m_score.text=a,o.m_score2.text=a,o.m_txtFinalTitle.text="\u51b3\u8d5b\u79ef\u5206\uff1a",o.m_matchFinalScore.text=i)):(o.m_gMatchFinal.visible=!1,o.m_score.text=a,o.m_score2.text=a),o.m_cWinlose.selectedIndex=1===this._players[n].winFlag?s.WIN_TYPE:s.LOSE_TYPE}var r=M.MatchModel.instance.getCurMatchID();M.MatchModel.instance.reqGetMatchEndInfo(r.mid,r.msid,function(e){if(e)for(var n=0;n<t._players.length;++n){var o=t.getNode(n+1,t._playerNums);if(o.m_imgRank.visible=!1,p.GameModel.instance.isMatchFinalRoundEnd()){var a=M.MatchModel.instance.getFinalRankByNumid(t._players[n].numid);a>0&&(o.m_imgRank.visible=!0,o.m_imgRank.url="ui://GameResultUI/img_rank_"+a)}}})},e.prototype.playMatchSpineAnimation=function(){this.view.m_titleSpineNode.node.removeAllChildren(),f.UtilCC.instantiatePrefab(g.DataSpineAniPath.ANI_RESULT_MATCH_TITLE,function(t){t.setPosition(cc.v2(0,0)),t.getComponent(sp.Skeleton).setAnimation(0,"ani2_bsc",!0)},this.view.m_titleSpineNode.node),this.view.m_bgSpindeNode.node.removeAllChildren(),f.UtilCC.instantiatePrefab(g.DataSpineAniPath.ANI_RESULT_MATCH_BG,function(t){var e=t.getComponent(sp.Skeleton);e.setMix("chusheng","loop",0),e.setAnimation(0,"chusheng",!1),e.addAnimation(0,"loop",!0)},this.view.m_bgSpindeNode.node)},e.prototype.convertPlayRank=function(t){var e="";switch(t){case 1:e="\u5934\u6e38";break;case 2:e="\u4e8c\u6e38";break;case 3:e="\u4e09\u6e38";break;default:e="\u672b\u6e38"}return e},e.prototype.playClockDown=function(){var t=this;this._clockDownCorout&&I.CoroutineManager.instance.stopCo(this._clockDownCorout);var e=6;this.view.m_btnMatchContinue.text="\u7ee7\u7eed\u6bd4\u8d5b"+e.toString()+"s",this._clockDownCorout=I.CoroutineManager.instance.loop(1,function(){if(--e<=0)return t.onBtnMatchContinue(),!0;t.view.m_btnMatchContinue.text="\u7ee7\u7eed\u6bd4\u8d5b"+e.toString()+"s"},this)},e.prototype.onTouchDown=function(t){console.log("onTouchDown"),this._fingerTouchPos=t.pos,this.view.m_gContent.visible=!1},e.prototype.onTouchMove=function(t){if(console.log("onTouchMove"),this._fingerTouchPos){var e=t.pos.x-this._fingerTouchPos.x,n=t.pos.y-this._fingerTouchPos.y;e*e+n*n>1e3&&(this._fingerTouchPos=null,this.view.m_gContent.visible=!0)}},e.prototype.onTouchEnd=function(){console.log("onTouchEnd"),this._fingerTouchPos=null,this.view.m_gContent.visible=!0},e.prototype.onBtnMatchContinue=function(){if(console.log("onBtnMatchContinue"),this._clockDownCorout&&I.CoroutineManager.instance.stopCo(this._clockDownCorout),this.onExitClick(),M.MatchModel.instance.isMatchEnd()){this._matchContinueCallFunc&&this._matchContinueCallFunc();var t=M.MatchModel.instance.getCurMatchData(),e=M.MatchModel.instance.getSelfFinalRank();console.log("ttt.onBtnMatchContinue.end:",t.type,e,t.mid,t.msid,t.name),C.MatchShareModel.instance.showMatchRankShare(e,t)}else p.GameModel.instance.isMatchFinalRound()?p.GameModel.instance.isMatchFinalRoundEnd()?(this._matchContinueCallFunc&&this._matchContinueCallFunc(),t=M.MatchModel.instance.getCurMatchData(),e=M.MatchModel.instance.getSelfFinalRank(),console.log("ttt.onBtnMatchContinue.end:",t.type,e,t.mid,t.msid,t.name),C.MatchShareModel.instance.showMatchRankShare(e,t)):(console.log("ttt.onBtnMatchContinue.ready"),this._matchReadyCallFunc&&this._matchReadyCallFunc()):(console.log("ttt.onBtnMatchContinue.backToRoundUI"),this._matchContinueCallFunc&&this._matchContinueCallFunc())},e.prototype.onExitClick=function(){t.prototype.onExitClick.call(this)},i([jsClass],e)}(c.FadeUI);n.GameMatchResultUI=v,cc._RF.pop()},{"../../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../../Framework/UI/BaseUI":"BaseUI","../../../../Framework/UI/FadeUI":"FadeUI","../../../Base/Data/DataSpineAni":"DataSpineAni","../../../Base/Data/DatazOrder":"DatazOrder","../../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../../Base/Utils/UtilCC":"UtilCC","../../../Base/View/UIHelp":"UIHelp","../../../Match/MatchModel":"MatchModel","../../../MatchShare/MatchShareModel":"MatchShareModel","../../../UserInfo/UserInfoModel":"UserInfoModel","../../GuanDan/Model/GameModel":"GameModel","../PlayerInfoModel":"PlayerInfoModel"}],"GameMatchingForMatchUI ":[function(t,e,n){"use strict";cc._RF.push(e,"bb8b1VWzEFLUYw1mGBvCkON","GameMatchingForMatchUI ");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameMatchingForMatchUI=void 0;var r=t("../../../../Framework/Manager/CoroutineManager"),s=t("../../../../Framework/UI/BaseUI"),c=t("../../../../Framework/UI/FadeUI"),l=t("./GameMatchingUI/GameMatchingUIBinder"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._clockTimeCoroutine=null,e}return a(e,t),e.uiBind=function(){l.default.bindAll()},Object.defineProperty(e,"uiType",{get:function(){return s.UIType.ScenePart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.getPkgName=function(){return"GameMatchingUI"},e.getCompName=function(){return"MatchMainPanel"},e.prototype.onLoad=function(){this.initTime()},e.prototype.initTime=function(){var t=this,e=0;this._clockTimeCoroutine&&r.CoroutineManager.instance.startCo(this._clockTimeCoroutine),this._clockTimeCoroutine=r.CoroutineManager.instance.loop(1,function(){return t.view.m_matching.m_time.title=e.toString()+"s",e++,!1},this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._clockTimeCoroutine&&r.CoroutineManager.instance.startCo(this._clockTimeCoroutine)},i([jsClass],e)}(c.FadeUI);n.GameMatchingForMatchUI=u,cc._RF.pop()},{"../../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../../Framework/UI/BaseUI":"BaseUI","../../../../Framework/UI/FadeUI":"FadeUI","./GameMatchingUI/GameMatchingUIBinder":"GameMatchingUIBinder"}],GameMatchingForNormalUI:[function(t,e,n){"use strict";cc._RF.push(e,"cd5616uGF1JGKX4iXW1E7qk","GameMatchingForNormalUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameMatchingForNormalUI=void 0;var r=t("../../../../Framework/Manager/CoroutineManager"),s=t("../../../../Framework/UI/BaseUI"),c=t("../../../../Framework/UI/FadeUI"),l=t("./GameMatchingUI/GameMatchingUIBinder"),u=t("../../../Base/Utils/UtilCC"),d=t("../../../Base/Data/DataSpineAni"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"uiType",{get:function(){return s.UIType.ScenePart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.getPkgName=function(){return"GameMatchingUI"},e.uiBind=function(){l.default.bindAll()},e.prototype.onLoad=function(){this.initTime(),this.initUI()},e.prototype.initTime=function(){var t=this,e=Date.now();r.CoroutineManager.instance.loop(.5,function(){return t.view.m_match.m_time.title=Math.floor((Date.now()-e)/1e3+1)+"s",!1},this)},e.prototype.initUI=function(){var t=this;u.UtilCC.instantiatePrefab(d.DataSpineAniPath.ANI_GAMEMATCHING,function(e){e.getComponent(sp.Skeleton).setAnimation(0,"pipei",!0),t.view&&t.view.m_match&&(t.view.m_match.m_time.visible=!0)},this.view.m_match.m_ani.node)},i([jsClass],e)}(c.FadeUI);n.GameMatchingForNormalUI=p,cc._RF.pop()},{"../../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../../Framework/UI/BaseUI":"BaseUI","../../../../Framework/UI/FadeUI":"FadeUI","../../../Base/Data/DataSpineAni":"DataSpineAni","../../../Base/Utils/UtilCC":"UtilCC","./GameMatchingUI/GameMatchingUIBinder":"GameMatchingUIBinder"}],GameMatchingUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"ac665kKYX5Jn76aBwB62xWG","GameMatchingUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./GameMatchingUI_MainPanel"),a=t("./GameMatchingUI_MatchMainPanel"),i=t("./GameMatchingUI_matchWait"),r=t("./GameMatchingUI_Matching"),s=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default)},t}();n.default=s,cc._RF.pop()},{"./GameMatchingUI_MainPanel":"GameMatchingUI_MainPanel","./GameMatchingUI_MatchMainPanel":"GameMatchingUI_MatchMainPanel","./GameMatchingUI_Matching":"GameMatchingUI_Matching","./GameMatchingUI_matchWait":"GameMatchingUI_matchWait"}],GameMatchingUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"8585cwgyl9LCaTK5id/92h5","GameMatchingUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameMatchingUI","MainPanel")},e.prototype.onConstruct=function(){this.m_match=this.getChildAt(0)},e.URL="ui://fte8bps5a69g3w",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameMatchingUI_MatchMainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"a4137EM3I1PmaeN4cE/feiA","GameMatchingUI_MatchMainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameMatchingUI","MatchMainPanel")},e.prototype.onConstruct=function(){this.m_matching=this.getChildAt(0)},e.URL="ui://fte8bps5ki3o3x",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameMatchingUI_Matching:[function(t,e,n){"use strict";cc._RF.push(e,"da8f0ErhqZG07xjX7OmwxEl","GameMatchingUI_Matching");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameMatchingUI","Matching")},e.prototype.onConstruct=function(){this.m_ani=this.getChildAt(0),this.m_time=this.getChildAt(1),this.m_action=this.getTransitionAt(0)},e.URL="ui://fte8bps5vrzd0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameMatchingUI_matchWait:[function(t,e,n){"use strict";cc._RF.push(e,"6f369fWSE9CwoYu2R/wgqVu","GameMatchingUI_matchWait");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameMatchingUI","matchWait")},e.prototype.onConstruct=function(){this.m_time=this.getChildAt(11),this.m_aniHint=this.getTransitionAt(0)},e.URL="ui://fte8bps5ki3o3y",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameMixPassADismissModel:[function(t,e,n){"use strict";cc._RF.push(e,"81acalpIxxHJaPaGVZp5n5L","GameMixPassADismissModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameMixPassADismissModel=n.DismissStateEnum=n.BadTrustEnum=void 0;var r,s=t("../../../../Framework/Manager/EventManager"),c=t("../../../../Framework/Manager/UIManager"),l=t("../../../../Framework/Model/BaseModel"),u=t("../../../../Framework/Root/ModelRoot"),d=t("../../../Base/Data/DataEvent"),p=t("../../GuanDan/GameEvent"),h=t("../../GuanDan/Proxy/GameProxy"),_=t("../PlayerInfoModel"),f=t("./GameMixPassADismissUI");(function(t){t[t.NOT_TRUST=0]="NOT_TRUST",t[t.BAD_TRUST=1]="BAD_TRUST"})(n.BadTrustEnum||(n.BadTrustEnum={})),function(t){t[t.AGREE=1]="AGREE",t[t.REFUSE=2]="REFUSE"}(n.DismissStateEnum||(n.DismissStateEnum={})),function(t){t[t.DISMISS_NORMAL=0]="DISMISS_NORMAL",t[t.DISMISS_TIMEOUT=1]="DISMISS_TIMEOUT",t[t.DISMISS_FAILED=2]="DISMISS_FAILED"}(r||(r={}));var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return u.ModelRoot.instance.get(n)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){s.EventManager.instance.on(p.GameEvent.NotifyMixPassADismissPanel,this,this.onNotifyMixPassADismissPanel),s.EventManager.instance.on(p.GameEvent.NotifyMixPassADismissResult,this,this.onNotifyMixPassADismissResult)},e.prototype.onNotifyMixPassADismissPanel=function(t){c.UIManager.instance.isExist(f.GameMixPassADismissUI)?c.UIManager.instance.get(f.GameMixPassADismissUI).then(function(e){e.initUI(t)}):c.UIManager.instance.open(f.GameMixPassADismissUI).then(function(e){e.initUI(t)})},e.prototype.onNotifyMixPassADismissResult=function(t){r.DISMISS_NORMAL===t||r.DISMISS_TIMEOUT===t?(c.UIManager.instance.isExist(f.GameMixPassADismissUI)&&c.UIManager.instance.close(f.GameMixPassADismissUI),s.EventManager.instance.emit(d.DataEvent.ToastData,"\u5bf9\u5c40\u5df2\u89e3\u6563\uff0c\u60a8\u53ef\u4ee5\u7ee7\u7eed\u5f00\u59cb\u60a8\u7684\u5bf9\u5c40")):(c.UIManager.instance.isExist(f.GameMixPassADismissUI)&&c.UIManager.instance.close(f.GameMixPassADismissUI),s.EventManager.instance.emit(d.DataEvent.ToastData,"\u591a\u540d\u73a9\u5bb6\u62d2\u7edd\u89e3\u6563\uff0c\u5bf9\u5c40\u7ee7\u7eed"))},e.prototype.sendMixPassADismissChoice=function(t){var e=_.PlayerInfoModel.instance.getSelfSeat();h.GameProxy.instance.sendMixPassADismissChoice(e,t)},n=i([jsClass],e)}(l.BaseModel);n.GameMixPassADismissModel=m,cc.systemEvent.once("GameRoot.inited",function(){u.ModelRoot.instance.add(m)}),cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Manager/UIManager":"UIManager","../../../../Framework/Model/BaseModel":"BaseModel","../../../../Framework/Root/ModelRoot":"ModelRoot","../../../Base/Data/DataEvent":"DataEvent","../../GuanDan/GameEvent":"GameEvent","../../GuanDan/Proxy/GameProxy":"GameProxy","../PlayerInfoModel":"PlayerInfoModel","./GameMixPassADismissUI":"GameMixPassADismissUI"}],GameMixPassADismissUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"d2128nGmgVMT6x2OCU9hLwP","GameMixPassADismissUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./GameMixPassADismissUI_MainPanel"),a=t("./GameMixPassADismissUI_Window"),i=t("./GameMixPassADismissUI_Player"),r=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default)},t}();n.default=r,cc._RF.pop()},{"./GameMixPassADismissUI_MainPanel":"GameMixPassADismissUI_MainPanel","./GameMixPassADismissUI_Player":"GameMixPassADismissUI_Player","./GameMixPassADismissUI_Window":"GameMixPassADismissUI_Window"}],GameMixPassADismissUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"9074b3vqu1AgrbrPLUoLOkY","GameMixPassADismissUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameMixPassADismissUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://cxhe3shnnz4p0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameMixPassADismissUI_Player:[function(t,e,n){"use strict";cc._RF.push(e,"70547r0P3lH0bMULcPHqLbC","GameMixPassADismissUI_Player");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameMixPassADismissUI","Player")},e.prototype.onConstruct=function(){this.m_cDismissState=this.getControllerAt(0),this.m_head=this.getChildAt(1),this.m_nickname=this.getChildAt(2),this.m_txtState=this.getChildAt(4),this.m_tagBadTrust=this.getChildAt(5)},e.URL="ui://cxhe3shnnz4p3",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameMixPassADismissUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"6e456nJICRHGrIDs0dB1RCq","GameMixPassADismissUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameMixPassADismissUI","Window")},e.prototype.onConstruct=function(){this.m_cBtnShow=this.getControllerAt(0),this.m_player_0=this.getChildAt(1),this.m_player_1=this.getChildAt(2),this.m_player_2=this.getChildAt(3),this.m_player_3=this.getChildAt(4),this.m_txtDismissResult=this.getChildAt(5),this.m_btnDisagree=this.getChildAt(6),this.m_btnAgree=this.getChildAt(7),this.m_time=this.getChildAt(8)},e.URL="ui://cxhe3shnnz4p1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameMixPassADismissUI:[function(t,e,n){"use strict";cc._RF.push(e,"58248twXnhD2a6nTMDgQk8Q","GameMixPassADismissUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameMixPassADismissUI=void 0;var r,s,c=t("../../../../Framework/UI/FadeUI"),l=t("../../../../Framework/UI/BaseUI"),u=t("../PlayerInfoModel"),d=t("./GameMixPassADismissModel"),p=t("../../../Base/View/UIHelp"),h=t("../../../Base/Data/DatazOrder");(function(t){t[t.NOT_CHOICE=0]="NOT_CHOICE",t[t.HAD_CHOICE=1]="HAD_CHOICE",t[t.BAD_TRUST=2]="BAD_TRUST"})(r||(r={})),function(t){t[t.SHOW=0]="SHOW",t[t.HIDE=1]="HIDE"}(s||(s={}));var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._countDownTimerID=null,e}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e,"willShowLoading",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return l.UIType.Window},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sortingOrder",{get:function(){return h.DataZOrder.GameMixPassADissmissUI},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return d.GameMixPassADismissModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){this.view.m_Window.m_btnAgree.onClick(this.onBtnAgree,this),this.view.m_Window.m_btnDisagree.onClick(this.onBtnDisagree,this)},e.prototype.initUI=function(t){this.updatePlayerUI(t),this.showDismissHintText(t.winLost),this.updateBtnShowState(t.state)},e.prototype.updatePlayerUI=function(t){for(var e=this,n=[],o=0;o<u.PlayerInfoModel.instance.getNowGamePlayer();++o){var a=u.PlayerInfoModel.instance.getTempPlayerByServiceSeat(o);if(!a&&(a=u.PlayerInfoModel.instance.getPlayerByServiceSeat(o)),a){var i=this.view.m_Window["m_player_"+o];i.visible=!0,i.m_head.url=u.PlayerInfoModel.instance.getHead(a.numid),i.m_nickname.text=p.UIHelp.formatNicknameL(a.nickname,12),t.trustState[o]===d.BadTrustEnum.BAD_TRUST?i.m_cDismissState.selectedIndex=r.BAD_TRUST:t.state[o]===d.DismissStateEnum.AGREE?(i.m_cDismissState.selectedIndex=r.HAD_CHOICE,i.m_txtState.text="\u5df2\u540c\u610f"):t.state[o]===d.DismissStateEnum.REFUSE?(i.m_cDismissState.selectedIndex=r.HAD_CHOICE,i.m_txtState.text="\u5df2\u62d2\u7edd"):n.push(o)}}if(this.stopCountDownTimer(),n.length>0){var s=t.remainingTime,c=u.PlayerInfoModel.instance.getSelfSeat();if(s>0){var l="00:"+s;s<10&&(l="00:0"+s),n.forEach(function(t){e.view.m_Window["m_player_"+t].m_txtState.text=l,t===c&&(e.view.m_Window.m_time.text=s+"s")}),s-=1,this._countDownTimerID=setInterval(function(){if(s>0){var t="00:"+s;s<10&&(t="00:0"+s),n.forEach(function(n){e.view.m_Window["m_player_"+n].m_txtState.text=t,n===c&&(e.view.m_Window.m_time.text=s+"s")}),s-=1}else e.stopCountDownTimer()},1e3)}}},e.prototype.showDismissHintText=function(t){var e,n=u.PlayerInfoModel.instance.getSelfSeat();e=t[n]>0?"\u89e3\u6563\u540e\uff0c\u60a8\u5c06\u83b7\u5f97"+t[n]+"\u91d1\u5e01":0===t[n]?"\u89e3\u6563\u540e\uff0c\u60a8\u672c\u573a\u5bf9\u5c40\u6ca1\u6709\u91d1\u5e01\u8f93\u8d62":"\u89e3\u6563\u540e\uff0c\u60a8\u5c06\u6263\u9664"+t[n]+"\u91d1\u5e01",this.view.m_Window.m_txtDismissResult.text=e},e.prototype.updateBtnShowState=function(t){var e=u.PlayerInfoModel.instance.getSelfSeat();t[e]===d.DismissStateEnum.AGREE||t[e]===d.DismissStateEnum.REFUSE?this.view.m_Window.m_cBtnShow.selectedIndex=s.HIDE:this.view.m_Window.m_cBtnShow.selectedIndex=s.SHOW},e.prototype.stopCountDownTimer=function(){this._countDownTimerID&&(clearInterval(this._countDownTimerID),this._countDownTimerID=null)},e.prototype.onBtnAgree=function(){console.log("onBtnAgree"),this.view.m_Window.m_cBtnShow.selectedIndex=s.HIDE,this.model.sendMixPassADismissChoice(!0)},e.prototype.onBtnDisagree=function(){console.log("onBtnDisagree"),this.view.m_Window.m_cBtnShow.selectedIndex=s.HIDE,this.model.sendMixPassADismissChoice(!1)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.stopCountDownTimer()},i([jsClass],e)}(c.FadeUI);n.GameMixPassADismissUI=_,cc._RF.pop()},{"../../../../Framework/UI/BaseUI":"BaseUI","../../../../Framework/UI/FadeUI":"FadeUI","../../../Base/Data/DatazOrder":"DatazOrder","../../../Base/View/UIHelp":"UIHelp","../PlayerInfoModel":"PlayerInfoModel","./GameMixPassADismissModel":"GameMixPassADismissModel"}],GameModel:[function(t,e,n){"use strict";cc._RF.push(e,"89b80TJGL5Mg7OfRmtjVQ4T","GameModel");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameModel=n.YEAR_BEAST_SHOW=n.NoteCardTypeEnum=n.ContributeTypeEnum=n.CallMultNumEnum=n.MixPassAScoreFlagEnum=n.GuideTypeEnum=n.GameReusltTipEnum=n.WaitClockEnum=n.ShengChangEnum=n.PowerEnum=n.CButtonLayerTypeEnum=n.BombMultTypeEnum=n.GameTeamEnum=n.GameRankEnum=n.GameStepEnum=void 0;var i,r,s,c,l,u,d,p=t("../../../../Framework/Manager/EventManager"),h=t("../../Common/PlayerInfoModel"),_=t("../../GuanDan/GameEvent"),f=t("../../../Base/View/UIHelp"),m=t("../../Common/GameCommonModel"),g=t("../../../Base/Module/Room/RoomModel"),y=t("../../../UserInfo/UserInfoModel"),I=t("../../../Base/Data/DataBfConfig"),C=t("../../../Base/Module/BfAnalytics/DataPointID"),M=t("../../../Base/Module/BfAnalytics/BfasManager"),v=t("../../../Base/Data/DataLocalStorageKey"),E=t("../../Common/GameCommonProxy"),A=t("../../../Base/Utils/UtilTime"),P=t("../../../Bankrupt/BankruptModel"),b=t("../../CommonLogic/CardRule/CardConstants"),U=t("../../../FriendTeam/FriendTeamModel"),S=t("../../../Base/Data/DataProps");(function(t){t[t.GAME_STEP_NONE=0]="GAME_STEP_NONE",t[t.GAME_STEP_START_GAME=1]="GAME_STEP_START_GAME",t[t.GAME_STEP_TAKE_FIRST=2]="GAME_STEP_TAKE_FIRST",t[t.GAME_STEP_PLAY_CARD=7]="GAME_STEP_PLAY_CARD",t[t.GAME_STEP_WIN_LOST=8]="GAME_STEP_WIN_LOST",t[t.GAME_STEP_END_GAME=9]="GAME_STEP_END_GAME",t[t.GAME_STEP_SPECF_CARD=11]="GAME_STEP_SPECF_CARD",t[t.GAME_STEP_CONTRIBUTE=15]="GAME_STEP_CONTRIBUTE",t[t.GAME_STEP_SHOW_CONTRIBUTE=16]="GAME_STEP_SHOW_CONTRIBUTE",t[t.GAME_STEP_CHANGE_SEAT=17]="GAME_STEP_CHANGE_SEAT",t[t.GAME_STEP_PLAY_ANI=18]="GAME_STEP_PLAY_ANI",t[t.GAME_STEP_GAME_WAIT=19]="GAME_STEP_GAME_WAIT",t[t.GAME_STEP_CUT_CARDS=20]="GAME_STEP_CUT_CARDS",t[t.GAME_STEP_PLAY_CUT_CARDS_ACT=21]="GAME_STEP_PLAY_CUT_CARDS_ACT",t[t.GAME_STEP_SMALLEND_DISMISS=22]="GAME_STEP_SMALLEND_DISMISS",t[t.GAME_STEP_CALL_MULT=23]="GAME_STEP_CALL_MULT",t[t.GAME_STEP_SHOW_CALLMULT_ANI=24]="GAME_STEP_SHOW_CALLMULT_ANI"})(i=n.GameStepEnum||(n.GameStepEnum={})),function(t){t[t.FIRST_RANK=1]="FIRST_RANK",t[t.SECOND_RANK=2]="SECOND_RANK",t[t.THIRD_RANK=3]="THIRD_RANK",t[t.FOURTH_RANK=4]="FOURTH_RANK"}(r=n.GameRankEnum||(n.GameRankEnum={})),function(t){t[t.TEAM_ONE=1]="TEAM_ONE",t[t.TEAM_TWO=2]="TEAM_TWO"}(n.GameTeamEnum||(n.GameTeamEnum={})),function(t){t[t.BASE_MULT=0]="BASE_MULT",t[t.BOMB4_MULT=4]="BOMB4_MULT",t[t.BOMB5_MULT=5]="BOMB5_MULT",t[t.BOMB6_MULT=6]="BOMB6_MULT",t[t.BOMB7_MULT=7]="BOMB7_MULT",t[t.BOMB8_MULT=8]="BOMB8_MULT",t[t.BOMB9_MULT=9]="BOMB9_MULT",t[t.BOMB10_MULT=10]="BOMB10_MULT",t[t.BOMBTHS_MULT=105]="BOMBTHS_MULT",t[t.BOMBWZ_MULT=106]="BOMBWZ_MULT"}(s=n.BombMultTypeEnum||(n.BombMultTypeEnum={})),function(t){t[t.NONE=0]="NONE",t[t.READY=1]="READY",t[t.PLAY_CARD=2]="PLAY_CARD",t[t.JG=3]="JG",t[t.HG=4]="HG",t[t.FIRST_PLAY_CARD=5]="FIRST_PLAY_CARD",t[t.TEMP_READY=6]="TEMP_READY",t[t.BOX_AUTO_READY=7]="BOX_AUTO_READY",t[t.CALL_MULT=8]="CALL_MULT",t[t.FRIENDTEAM_READY=9]="FRIENDTEAM_READY"}(n.CButtonLayerTypeEnum||(n.CButtonLayerTypeEnum={})),function(t){t[t.CAN_NOT_PLAY=2]="CAN_NOT_PLAY",t[t.CAN_PLAY=4]="CAN_PLAY"}(n.PowerEnum||(n.PowerEnum={})),function(t){t[t.NONE=0]="NONE",t[t.ERROR=1]="ERROR",t[t.BROKEN=2]="BROKEN",t[t.UP=3]="UP",t[t.DOWN=4]="DOWN"}(c=n.ShengChangEnum||(n.ShengChangEnum={})),function(t){t[t.KILL_CLOCK=1]="KILL_CLOCK",t[t.SHOW_WAIT=2]="SHOW_WAIT"}(n.WaitClockEnum||(n.WaitClockEnum={})),function(t){t[t.TIP_NONE=0]="TIP_NONE",t[t.TIP_CEIL=1]="TIP_CEIL",t[t.TIP_BROKE=2]="TIP_BROKE"}(n.GameReusltTipEnum||(n.GameReusltTipEnum={})),function(t){t[t.NONE=0]="NONE",t[t.WAIT=1]="WAIT",t[t.GUIDE=2]="GUIDE",t[t.FIRST_GAME=3]="FIRST_GAME",t[t.MULT_GUIDE=4]="MULT_GUIDE",t[t.MIX_PASSA=5]="MIX_PASSA",t[t.MULT_CRIT=6]="MULT_CRIT",t[t.BROAD_MULT=7]="BROAD_MULT",t[t.BOTH_NEW_MULT=8]="BOTH_NEW_MULT"}(l=n.GuideTypeEnum||(n.GuideTypeEnum={})),function(t){t[t.IN_GAME=0]="IN_GAME",t[t.IN_RESULT=1]="IN_RESULT"}(n.MixPassAScoreFlagEnum||(n.MixPassAScoreFlagEnum={})),function(t){t[t.NONE=-1]="NONE",t[t.NOT_CALL=0]="NOT_CALL",t[t.MULT_CALL=1]="MULT_CALL"}(u=n.CallMultNumEnum||(n.CallMultNumEnum={})),function(t){t[t.NONE=0]="NONE",t[t.GIVE=1]="GIVE",t[t.GIVEBACK=2]="GIVEBACK",t[t.FIGHT=3]="FIGHT"}(d=n.ContributeTypeEnum||(n.ContributeTypeEnum={})),function(t){t[t.NORAML=0]="NORAML",t[t.TEAM=1]="TEAM"}(n.NoteCardTypeEnum||(n.NoteCardTypeEnum={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(n.YEAR_BEAST_SHOW||(n.YEAR_BEAST_SHOW={}));var T=function(){function t(){this._playerdata=[],this._GameData=this.newGameData(),this._contributeData={},this._contriteType=null,this._contributeState={},this._cardLevelData=this.newCardLevelData(),this._nowLevel=0,this._levelDiff=0,this._passA=!1,this._curGuidePlazaSubID=null,this._isMisPassAGameEnd=!1,this._canCallMult=[!0,!0,!0,!0],this._hadPlayGame=!1,this._isReceiveParterHandCard=!1,this._thsBombMult=1,this._wangBombMult=1,this._10BombMult=1,this._9BombMult=1,this._8BombMult=1,this._7BombMult=1,this._6BombMult=1,this._5BombMult=1,this._4BombMult=1,this._baseMult=1,this._preMult=1,this._trustFlag=!1,this._hgSeat=-1,this._isSelfPlay=!1,this._isFirstPlay=!0,this._lastCards={},this._isGuided=!1,this._guideState=l.NONE;for(var t=0;t<h.MAX_PLAYER;++t)this._playerdata.push(this.newPlayerInfoData())}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),t.prototype.onDestroy=function(){e._instance=null},t.prototype.newPlayerInfoData=function(){return{cards:[],game_data:{level:0,rank:0,seat:0,team:0}}},t.prototype.getCardCount=function(t){return t>=this._playerdata.length?0:this._playerdata[t].cards.length},t.prototype.getGameData=function(t){return this._playerdata[t].game_data},t.prototype.getTeamByLSeat=function(t){return this._playerdata[t].game_data.team},t.prototype.getGameDataByTeam=function(t){for(var e=0;e<h.MAX_PLAYER;++e)if(this._playerdata[e].game_data.team===t)return this._playerdata[e].game_data},t.prototype.getGameWinByTeam=function(){for(var t=0;t<h.MAX_PLAYER;++t)if(this._playerdata[t].game_data.rank===r.FIRST_RANK)return this._playerdata[t].game_data.team},t.prototype.getGameWinSeatByTeam=function(){for(var t=0;t<h.MAX_PLAYER;++t)if(this._playerdata[t].game_data.rank===r.FIRST_RANK)return this._playerdata[t].game_data.seat},t.prototype.getGameWinLevelByTeam=function(){for(var t=0;t<h.MAX_PLAYER;++t)if(this._playerdata[t].game_data.rank===r.FIRST_RANK)return this._playerdata[t].game_data.level},t.prototype.updateHandCardsData=function(t,e){this._playerdata[t].cards=e,p.EventManager.instance.emit(_.GameEvent.REFRESH_PLAYER_CARDS_NUMS,{seat:t,nums:this.getCardCount(t)})},t.prototype.exchangeHandCards=function(t,e){var n=h.PlayerInfoModel.instance.getSelfSeat();if(t!==n&&e!==n){var o=h.PlayerInfoModel.instance.serverToLocal(t),a=h.PlayerInfoModel.instance.serverToLocal(e),i=this._playerdata[o].cards;this._playerdata[o].cards=[],this._playerdata[o].cards=this._playerdata[a].cards,this._playerdata[a].cards=[],this._playerdata[a].cards=i}},t.prototype.getHandCards=function(t){return this._playerdata[t].cards},t.prototype.dealPlayCardData=function(t,e){if(t===h.LocalSeatEnum.SELF||h.PlayerInfoModel.instance.isPartner(t,h.LocalSeatEnum.SELF)&&0===this.getCardCount(h.LocalSeatEnum.SELF))this.deleteCards(this._playerdata[t].cards,e);else for(var n=0;n<e.length;++n)this._playerdata[t].cards.pop();p.EventManager.instance.emit(_.GameEvent.REFRESH_PLAYER_CARDS_NUMS,{seat:t,nums:this.getCardCount(t)})},t.prototype.deleteCards=function(t,e){for(var n=0;n<e.length;n++){var o=t.indexOf(e[n]);-1!==o&&t.splice(o,1)}return t},t.prototype.getWinCnt=function(){for(var t=0,e=0;e<h.PlayerInfoModel.instance.getNowGamePlayer();++e)0===this._playerdata[e].cards.length&&t++;return t},t.prototype.setLogicData=function(t){this._logicData=t},t.prototype.getLogicData=function(){return this._logicData},t.prototype.setContributeData=function(t,e){this._contributeData[t]=e},t.prototype.getContributeData=function(t){return this._contributeData[t]},t.prototype.getContributeType=function(){return this._contriteType},t.prototype.setContributeType=function(t){this._contriteType=t},t.prototype.setContributeState=function(t,e){this._contributeState[t]=e},t.prototype.getContributeState=function(){return this._contributeState},t.prototype.clearContributeData=function(){this._contributeData={},this._contributeState={}},t.prototype.isSelfNotContributeInStep=function(){if(this.isContributeStep()){var t=this.getContributeData(h.LocalSeatEnum.SELF);return!t||!(t.cardValue>0||t.contributeType===d.NONE)}return!1},t.prototype.isNoteCardActive=function(){return y.UserInfoModel.instance.isTimePropActive(S.PropIDEnum.TIME_NOTECARD)},t.prototype.isTeamNoteCardActive=function(){return y.UserInfoModel.instance.isTimePropActive(S.PropIDEnum.TIME_TEAM_NOTECARD)},t.prototype.checkShowLookerNoteCard=function(){return!!h.PlayerInfoModel.instance.isGamePlay()&&!!this.isReceivePartnerHandCard()},t.prototype.newGameData=function(){return{game_step:0,out_card_data:{seat:0,cardCount:0,cards:[],typeID:0,power:0}}},t.prototype.setOutCardData=function(t,e){this._GameData.out_card_data.seat=t,this._GameData.out_card_data.cardCount=e.cardCount,this._GameData.out_card_data.cards=e.cards,this._GameData.out_card_data.power=e.power,this._GameData.out_card_data.typeID=e.typeID},t.prototype.clearOutCardData=function(t,e){return!(null!=e&&!this.isCurTurnEndWithNotPlay(e)||(this._GameData.out_card_data.seat=-1,this._GameData.out_card_data.cardCount=0,this._GameData.out_card_data.cards=[],this._GameData.out_card_data.power=0,this._GameData.out_card_data.typeID=0,t&&this.clearOutCard(h.MAX_PLAYER),0))},t.prototype.getPreOutLocalSeat=function(){return this._GameData.out_card_data.seat},t.prototype.clearOutCard=function(t){if(t!==h.MAX_PLAYER)p.EventManager.instance.emit(_.GameEvent.UPDATE_OUT_CARDS,{seat:t,cards:[]});else for(var e=0;e<h.MAX_PLAYER;++e)p.EventManager.instance.emit(_.GameEvent.UPDATE_OUT_CARDS,{seat:e,cards:[]})},t.prototype.clearHandCard=function(){p.EventManager.instance.emit(_.GameEvent.UPDATE_HAND_CARDS,{seat:h.LocalSeatEnum.SELF,cards:[]})},t.prototype.isCurTurnEndWithNotPlay=function(t){for(var e=h.PlayerInfoModel.instance.getNowGamePlayer(),n=0;n<e;n++){var o=(t+n+1)%e;if(o===this._GameData.out_card_data.seat)return!0;if(this._playerdata.length<=o)return console.error("isCurTurnEndWithNotPlay:",t,o,this._playerdata),!1;if(this._playerdata[o].cards.length>0)return!1}return!1},t.prototype.setGameStep=function(t){this._GameData.game_step=t},t.prototype.getGameStep=function(){return this._GameData.game_step},t.prototype.saveBoxBigResultInfo=function(t){this._boxBigResultInfo=t},t.prototype.getBoxBigResultInfo=function(){return this._boxBigResultInfo},t.prototype.isNextSeatExist=function(t){var e=h.PlayerInfoModel.instance.nextSeat(t);return!(0===this._playerdata[e].cards.length)},t.prototype.getNowMaxLevel=function(){for(var t=0,e=0;e<h.MAX_PLAYER;++e)this._playerdata[e].game_data.level>t&&(t=this._playerdata[e].game_data.level);return t},t.prototype.isMixPassAFirstRound=function(){return!(this.getNowMaxLevel()>b.CardConstants.cardNums.CN_2)},t.prototype.getPlayCardData=function(){return{cards:this._GameData.out_card_data.cards,type:this._GameData.out_card_data.typeID,maxCard:this._GameData.out_card_data.power}},t.prototype.newCardLevelData=function(){return{cardLevel:0,cardLevel_team:0,cardLevel_1:0,cardLevel_2:0}},t.prototype.getCardLevelData=function(){return this._cardLevelData},t.prototype.getCardLevel=function(){return this._cardLevelData.cardLevel},t.prototype.updateNowCardLevel=function(t){this._cardLevelData.cardLevel=t.nowRoundLevel,this._cardLevelData.cardLevel_team=t.nowRoundTeam,p.EventManager.instance.emit(_.GameEvent.REFRESH_LEVEL)},t.prototype.getLevelDiff=function(){return this._levelDiff},t.prototype.getNowLevel=function(){return 0===this._nowLevel?14:this._nowLevel},t.prototype.updateCardLevel=function(t,e){if(0!==this._playerdata[t].game_data.level){var n=e.level-this._playerdata[t].game_data.level;n>this._levelDiff&&(this._levelDiff=n),this._playerdata[t].game_data.level!==e.level&&(this._nowLevel=e.level)}this._playerdata[t].game_data.level=e.level,this._playerdata[t].game_data.rank=e.rank,this._playerdata[t].game_data.seat=e.seat,this._playerdata[t].game_data.team=e.team,this._playerdata[t].game_data.team===r.FIRST_RANK?this._cardLevelData.cardLevel_1=e.level:this._playerdata[t].game_data.team===r.SECOND_RANK&&(this._cardLevelData.cardLevel_2=e.level),p.EventManager.instance.emit(_.GameEvent.REFRESH_GAME_DATA,e)},t.prototype.newPlayCardData=function(){return{seat:0,cardCount:0,cards:[],typeID:0,power:0}},t.prototype.setEscapePunish=function(t){this._escapePunish=t},t.prototype.getEscapePunish=function(){return this._escapePunish},t.prototype.setPassA=function(t){this._passA=t},t.prototype.getPassA=function(){return this._passA},t.prototype.setCurGuidePlazaSubID=function(t){this._curGuidePlazaSubID=t},t.prototype.getCurGuidePlazaSubID=function(){return this._curGuidePlazaSubID},t.prototype.setMixPassAGameEnd=function(t){this._isMisPassAGameEnd=t},t.prototype.isMixPassAGameEnd=function(){return this._isMisPassAGameEnd},t.prototype.setCanCallMult=function(t,e){this._canCallMult[t]=e},t.prototype.isCanCallMult=function(t){return this._canCallMult[t]},t.prototype.setHadPlayGame=function(t){this._hadPlayGame=t},t.prototype.isHadPlayGame=function(){return this._hadPlayGame},t.prototype.setMatchInfo=function(t){this._matchInfo=t},t.prototype.getMatchInfo=function(){return this._matchInfo},t.prototype.isMatchRoundFirstGame=function(){return 1===this._matchInfo.nowPan},t.prototype.updateLastMatchInfo=function(){this._lastMatchInfo=this._matchInfo},t.prototype.getLastMatchInfo=function(){return this._lastMatchInfo},t.prototype.isMatchFinalRound=function(){return this._lastMatchInfo&&this._lastMatchInfo.totalPan>1},t.prototype.isMatchFinalRoundStart=function(){return this.isMatchFinalRound()&&1===this._lastMatchInfo.nowPan},t.prototype.isMatchFinalRoundEnd=function(){return this.isMatchFinalRound()&&3===this._lastMatchInfo.nowPan},t.prototype.setReceivePartnerHandCard=function(t){this._isReceiveParterHandCard=t},t.prototype.isReceivePartnerHandCard=function(){return this._isReceiveParterHandCard},t.prototype.setGDMult=function(t,e){return t===s.BASE_MULT?this._baseMult=e:t===s.BOMB4_MULT?this._4BombMult=e:t===s.BOMB5_MULT?this._5BombMult=e:t===s.BOMB6_MULT?this._6BombMult=e:t===s.BOMB7_MULT?this._7BombMult=e:t===s.BOMB8_MULT?this._8BombMult=e:t===s.BOMB9_MULT?this._9BombMult=e:t===s.BOMB10_MULT?this._10BombMult=e:t===s.BOMBTHS_MULT?this._thsBombMult=e:t===s.BOMBWZ_MULT&&(this._wangBombMult=e),this.getAllMult()>this._preMult?(this._preMult=this.getAllMult(),!0):(this._preMult=this.getAllMult(),!1)},t.prototype.clearData=function(){this._baseMult=1,this._4BombMult=1,this._5BombMult=1,this._6BombMult=1,this._7BombMult=1,this._8BombMult=1,this._9BombMult=1,this._10BombMult=1,this._thsBombMult=1,this._wangBombMult=1,this.resetPlayerData(),this._levelDiff=0,this._nowLevel=0,this.setReceivePartnerHandCard(!1)},t.prototype.clearEndData=function(){this._GameData=this.newGameData(),this._isFirstPlay=!0},t.prototype.clearAllData=function(){this.clearData(),this.clearEndData(),this._passA=!1,this.setHadPlayGame(!1)},t.prototype.resetPlayerData=function(){for(var t=0;t<h.MAX_PLAYER;++t)this._playerdata[t]=this.newPlayerInfoData()},t.prototype.getPreMult=function(){return this._preMult},t.prototype.getAllMult=function(){return this._thsBombMult*this._wangBombMult*this._10BombMult*this._9BombMult*this._8BombMult*this._7BombMult*this._6BombMult*this._5BombMult*this._4BombMult*this._baseMult},t.prototype.isNoStartGame=function(){return this._GameData.game_step===i.GAME_STEP_NONE||this._GameData.game_step===i.GAME_STEP_WIN_LOST},t.prototype.isContributeStep=function(){return this._GameData.game_step===i.GAME_STEP_CONTRIBUTE},t.prototype.isShowContributeStep=function(){return this._GameData.game_step===i.GAME_STEP_SHOW_CONTRIBUTE},t.prototype.isQueueOtherPlayers=function(){return h.PlayerInfoModel.instance.getPlayerByNumid(y.UserInfoModel.instance.userInfo.numID).playstate===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_IN_QUEUE},t.prototype.isTrust=function(){return this._trustFlag},t.prototype.setTrust=function(t){this._trustFlag=t},t.prototype.delCard=function(t,e){for(var n=[],o=0;o<t.length;++o)n.push(t[o]);return this.deleteCards(t,e)},t.prototype.checkPlayerContinueGame=function(t,e){var n=this,o=g.RoomModel.instance.getPlazaGoldArea(e);if(!o)return console.error(">----\x3echeckPlayerContinue.error",e),!1;if(!(t>=o.min&&(t<=o.max||0===o.max))){if(t<P.BankruptModel.instance.getTriggerBankruptLine())return this.showBrokeDialog(),!1;if(m.GameCommonModel.instance.isMixPassARoom()&&!this.isMixPassAGameEnd())return!0;var i=g.RoomModel.instance.getRecRoomInfo(),r=h=g.RoomModel.instance.getRoomDesc(i.subID);return r=t<o.min?"\u4f60\u7684\u91d1\u5e01\u4e0d\u591f\u5566,\u53ef\u4ee5\u53bb ["+h+"] \u8fdb\u884c\u6e38\u620f\u5662~":"\u4f60\u7684\u91d1\u5e01\u592a\u591a\u5566,\u5feb\u53bb ["+h+"] \u8fdb\u884c\u6e38\u620f\u5427~",f.UIHelp.instance.showDialogConfirmCancel(r,function(t){t&&n.guidToSuitableRoom(i.subID)}),!1}var s=a(this.checkSatisfyRiseGuid(t,e),2),c=s[0],l=s[1];if(m.GameCommonModel.instance.getEnterType()===U.EnterTypeEnum.TEAM_SINGLE&&c&&g.RoomModel.instance.getPlazaInfoBySubID(l).iconID>g.RoomLevelEnum.MASTER_LEVEL&&(c=!1),!c)return!0;var u,d=g.RoomModel.instance.getPlazaInfoBySubID(e),p=g.RoomModel.instance.getPlazaInfoBySubID(l),h=g.RoomModel.instance.getRoomDesc(l);u=d.iconID>=g.RoomLevelEnum.HIGH_LEVEL?"\u6709\u724c\u53cb\u5728[color=#D50804]"+h+"[/color]\u6b21\u5411\u4f60\u53d1\u8d77\u7ea6\u6218\uff0c\u662f\u5426\u524d\u5f80\u6311\u6218\uff1f\n\u66f4\u9ad8\u6c34\u5e73\u66f4\u523a\u6fc0\uff0c\u91d1\u5e01\u6eda\u6eda\u6765\uff01":"\u60a8\u7684\u724c\u6280\u5df2\u51fb\u8d25\u672c\u573a90%\u73a9\u5bb6\uff01\n\u63a8\u8350\u60a8\u53bb[color=#D50804]"+h+"[/color]\n\u73a9\u5f97\u66f4\u723d\uff0c\u79f0\u9738\u5168\u573a\uff01",f.UIHelp.instance.showDialogConfirmCancel(u,function(t){t?n.guidToSuitableRoom(p.subID):v.DataLocalStorage.setIsRiseGuidStop(!0)})},t.prototype.checkSatisfyRiseGuid=function(t,e){if(m.GameCommonModel.instance.isMixPassARoom()&&!this.isMixPassAGameEnd())return[!1,null];if(!h.PlayerInfoModel.instance.isHasPlayerLeave())return[!1,null];var n=g.RoomModel.instance.getPlazaGoldArea(e),o=g.RoomModel.instance.getGuidRiseHighRate(e);if(t>=n.min&&(0===n.max||t>=n.max*o&&t<n.max))if(v.DataLocalStorage.isRiseGuidStop()){var a=v.DataLocalStorage.getRiseGuidLastTriggerDay();if(!(A.UtilTime.getDayCount()-a>=g.STOP_TRIGGER_GUID_RISE_DAY))return[!1,null];if(v.DataLocalStorage.setIsRiseGuidStop(!1),i=g.RoomModel.instance.guidToHighPlazaInGame(t,e))return v.DataLocalStorage.addRiseGuidDayTriggerCount(),v.DataLocalStorage.updateRiseGuidLastTriggerDay(),[!0,i]}else{var i;if(v.DataLocalStorage.getRiseGuidDayTriggerCount()<g.MAX_GUID_RISE_TRIGGER_COUNT&&(i=g.RoomModel.instance.guidToHighPlazaInGame(t,e)))return v.DataLocalStorage.addRiseGuidDayTriggerCount(),v.DataLocalStorage.updateRiseGuidLastTriggerDay(),[!0,i]}return[!1,null]},t.prototype.guidToSuitableRoom=function(t,e){m.GameCommonModel.instance.reqLeaveGame(function(n){0===n&&(e?g.RoomModel.instance.reqStartPartnerChange(t,m.GameCommonModel.instance.friendTeamId):g.RoomModel.instance.reqJoinRoom(t,m.GameCommonModel.instance.getEnterType()))},E.ReqLeaveGameTypeEnum.UP_OR_DOWN_LEAVE)},t.prototype.checkPlayerContinueGameFriendTeam=function(t,e,n){var o=this,a=g.RoomModel.instance.getPlazaGoldArea(n,!0);if(!a)return console.error("checkPlayerContinueGameFriendTeam.error"),!1;if(t>=a.min&&(t<=a.max||0===a.max))return!0;if(e<P.BankruptModel.instance.getTriggerBankruptLine())return this.showBrokeDialog(),!1;var i=m.GameCommonModel.instance.isGoldTeamModel();if(i&&!m.GameCommonModel.instance.isFriendTeamLeader())return!0;var r,s=g.RoomModel.instance.getRecRoomInfo(!0),c=g.RoomModel.instance.getRoomDesc(s.subID);return r=t<a.min?t===e?"\u60a8\u7684\u91d1\u5e01\u4e0d\u591f\u5566,\u53ef\u4ee5\u53bb ["+c+"] \u8fdb\u884c\u6e38\u620f\u5662~":"\u961f\u53cb\u7684\u91d1\u5e01\u4e0d\u6ee1\u8db3\u5f53\u524d\u573a\u6b21\u8981\u6c42,\u662f\u5426\u964d\u81f3 ["+c+"] \u8fdb\u884c\u6e38\u620f":t===e?"\u60a8\u7684\u91d1\u5e01\u592a\u591a\u5566,\u5feb\u53bb ["+c+"] \u8fdb\u884c\u6e38\u620f\u5427~":"\u961f\u53cb\u7684\u91d1\u5e01\u4e0d\u6ee1\u8db3\u5f53\u524d\u573a\u6b21\u8981\u6c42,\u662f\u5426\u5347\u81f3 ["+c+"] \u8fdb\u884c\u6e38\u620f",f.UIHelp.instance.showDialogConfirmCancel(r,function(t){t&&o.guidToSuitableRoom(s.subID,i)}),!1},t.prototype.isFriendTeamNeedUpOrDown=function(t,e,n){var o=g.RoomModel.instance.getPlazaGoldArea(n);if(!o)return console.error("isFriendTeamNeedUpOrDown.error"),{status:c.ERROR,roomDesc:"\u5347\u964d\u573a\u9519\u8bef!"};if(t>=o.min&&(t<=o.max||0===o.max))return{status:c.NONE,roomDesc:"\u4e0d\u9700\u8981\u5347\u964d\u573a"};if(e<P.BankruptModel.instance.getTriggerBankruptLine())return{status:c.BROKEN,roomDesc:"\u91d1\u5e01\u4e0d\u8db3"};var a=g.RoomModel.instance.getRecRoomInfo(!0),i=g.RoomModel.instance.getRoomDesc(a.subID),r="",s=c.NONE;return t<o.min?(r="\u964d\u573a\uff0c\u961f\u4f0d\u5df2\u8fdb\u5165"+i,s=c.DOWN):(r="\u5347\u573a\uff0c\u961f\u4f0d\u5df2\u8fdb\u5165"+i,s=c.UP),{status:s,roomDesc:r,roomName:i}},t.prototype.showBrokeDialog=function(){var t=C.ActivityPointID.bankruptScene,e={time:v.DataLocalStorage.getBankruptTimes()};M.BfasManager.instance.evt(t.triggerInGame.eventid,e,!0,t.triggerInGame.eventName),P.BankruptModel.instance.showBankrupt(m.GameCommonModel.instance.getAppid())},t.prototype.getSeatByRank=function(t){for(var e=0;e<h.MAX_PLAYER;++e)if(this._playerdata[e].game_data.rank===t)return this._playerdata[e].game_data.seat},t.prototype.setHGSeat=function(t){this._hgSeat=t},t.prototype.isHGParnter=function(){return!!this.isContributeStep()&&h.PlayerInfoModel.instance.getNowGamePlayer()===h.MAX_PLAYER&&!(this._hgSeat<0)&&h.PlayerInfoModel.instance.isPartner(h.LocalSeatEnum.SELF,this._hgSeat)},t.prototype.isSelfPlay=function(){return this._isSelfPlay},t.prototype.setSelfPlay=function(t){this._isSelfPlay=t},t.prototype.isTuoPaiFirstPlay=function(){if(!this.isTuoPaiModel())return!1;if(this.getGameStep()!==i.GAME_STEP_PLAY_CARD)return!1;if(!this._isFirstPlay)return!1;for(var t=0;t<h.MAX_PLAYER;++t)if(27!==this.getCardCount(t))return this._isFirstPlay=!1,!1;return this.isSelfPlay()},t.prototype.isTuoPaiModel=function(){var t=g.RoomModel.instance.getClubConfig(m.GameCommonModel.instance.getClubid());return!!t&&t.gameID===I.GameIDInfo.TP_GD.id&&m.GameCommonModel.instance.getRoomType()===g.ClubShowFlags.BOXS_LIST},t.prototype.getTuoPaiLevel=function(){var t=2;return 2===this._cardLevelData.cardLevel&&(t=3),t},t.prototype.dealLastShowCards=function(t){for(var e=0;e<h.MAX_PLAYER;++e)this._lastCards[e]=[];var n=t.split(";");for(e=0;e<n.length;++e)if(""!==n[e])for(var o=n[e].split(","),a=0;a<o.length;++a)""!==o[a]&&this._lastCards[e].push(Number(o[a]))},t.prototype.getLastShowCardsBySeat=function(t){return this._lastCards[t]},t.prototype.isGuideModel=function(){return this._guideState===l.GUIDE},t.prototype.isNormalModel=function(){return this._guideState===l.NONE||this._guideState===l.FIRST_GAME},t.prototype.isGuideMixPassARuleModel=function(){return this._guideState===l.MIX_PASSA},t.prototype.isGuideMultModel=function(){return this._guideState===l.MULT_GUIDE},t.prototype.isGuideMultCritModel=function(){return this._guideState===l.MULT_CRIT},t.prototype.isGuideBroadMultModel=function(){return this._guideState===l.BROAD_MULT},t.prototype.isGuideBothNewMultModel=function(){return this._guideState===l.BOTH_NEW_MULT},t.prototype.isGuided=function(){return this._isGuided},t.prototype.setGuided=function(t){this._isGuided=t},t.prototype.isFirstGame=function(){return this._guideState===l.FIRST_GAME},t.prototype.isWaitModel=function(){return this._guideState===l.WAIT},t.prototype.getGuideState=function(){return this._guideState},t.prototype.setGuideState=function(t){this._guideState=t},t.prototype.checkHasCallMult=function(t){return t===u.NOT_CALL||t===u.MULT_CALL},t._instance=null,e=o([jsClass],t)}();n.GameModel=T,cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../Bankrupt/BankruptModel":"BankruptModel","../../../Base/Data/DataBfConfig":"DataBfConfig","../../../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../../../Base/Data/DataProps":"DataProps","../../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../../Base/Module/Room/RoomModel":"RoomModel","../../../Base/Utils/UtilTime":"UtilTime","../../../Base/View/UIHelp":"UIHelp","../../../FriendTeam/FriendTeamModel":"FriendTeamModel","../../../UserInfo/UserInfoModel":"UserInfoModel","../../Common/GameCommonModel":"GameCommonModel","../../Common/GameCommonProxy":"GameCommonProxy","../../Common/PlayerInfoModel":"PlayerInfoModel","../../CommonLogic/CardRule/CardConstants":"CardConstants","../../GuanDan/GameEvent":"GameEvent"}],GameMultTaskModel:[function(t,e,n){"use strict";cc._RF.push(e,"37f5agGRTNCyJ78ZigUr22w","GameMultTaskModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameMultTaskModel=n.GameMultTaskStateEnum=void 0;var r,s=t("../../../../Framework/Manager/EventManager"),c=t("../../../../Framework/Model/BaseModel"),l=t("../../../../Framework/Root/ModelRoot"),u=t("../../../Base/Data/DataEvent"),d=t("../../../Base/Data/DataLocalStorageKey"),p=t("../../../Base/Utils/UtilTime"),h=t("../../../UserInfo/UserInfoModel"),_=t("../../GuanDan/GameEvent"),f=t("./GameMultTaskProxy");(function(t){t[t.NOT_GET=0]="NOT_GET",t[t.CAN_GET=1]="CAN_GET"})(r=n.GameMultTaskStateEnum||(n.GameMultTaskStateEnum={}));var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._gameMultTaskInfo={},e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return l.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return f.GameMultTaskProxy.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){},e.prototype.init=function(t){this.onNotifyReqGameMultTaskInfo(t)},e.prototype.onNotifyReqGameMultTaskInfo=function(t){var e=this;this.reqGameMultTaskInfo(function(n){if(n)return e.updateMultTaskLastTriggerDay(),s.EventManager.instance.emit(_.GameEvent.NotifyUpdateGameMultTask,e._gameMultTaskInfo),void(t&&t(!0));s.EventManager.instance.emit(_.GameEvent.NotifyCloseGameMultTask),t&&t(!1)})},e.prototype.reqGameMultTaskInfo=function(t){var e=this,n=this.getGameMultTaskConfig(),o=n.version||"",a=n.taskConfig||[];this.proxy.reqGameMultTaskInfo(o,function(n,i){if(n&&i.isOpen){if(e._gameMultTaskInfo.version=o,e._gameMultTaskInfo.taskConfig=a,Object.assign(e._gameMultTaskInfo,i),void 0!==i.taskConfig){var r={version:i.version,taskConfig:i.taskConfig};e.setGameMultTaskConfig(r)}t&&t(!0)}else t&&t(!1)})},e.prototype.reqGetGameMultTaskAward=function(t,e){var n=this;this.proxy.reqGetGameMultTaskAward(t,function(t,o,a,i,r){if(t)return n._gameMultTaskInfo.awardCount=a,n.updateActivityRateInfo(i),void(e&&e(!0,o));s.EventManager.instance.emit(u.DataEvent.ToastData,r+"\uff0c\u8bf7\u91cd\u65b0\u5237\u65b0\u6d3b\u52a8~"),e&&e(!1)})},e.prototype.getTaskConfigByID=function(t){var e=this._gameMultTaskInfo.taskConfig;if(e)for(var n=0;n<e.length;n++)if(e[n].id===t)return e[n]},e.prototype.getTaskRateInfoByID=function(t){var e=this._gameMultTaskInfo.rateInfo;if(e)for(var n=0;n<e.length;n++)if(e[n].id===t)return e[n]},e.prototype.isCompleteTaskToday=function(){return this._gameMultTaskInfo.awardCount>=this._gameMultTaskInfo.awardLimitCount},e.prototype.canDraw=function(t){return this.getTaskRateInfoByID(t).state===r.CAN_GET},e.prototype.updateActivityRateInfo=function(t){var e=this._gameMultTaskInfo.rateInfo;if(e)for(var n=0;n<e.length;n++)if(e[n].id===t.id)return e[n]=t,void s.EventManager.instance.emit(_.GameEvent.NotifyUpdateGameMultTask,this._gameMultTaskInfo,t.id)},e.prototype.getAwardByDraw=function(t,e){for(var n=this.getTaskConfigByID(t),o=0;o<n.awards.length;o++)if(n.awards[o].seqNo===e)return[o,n.awards[o]]},e.prototype.isNeedPullConfig=function(){var t=h.UserInfoModel.instance.getServerTimestamp();return p.UtilTime.getServerDayCountWith4Clock(t)!==this.getMultTaskLastTriggerDay()},e.prototype.setGameMultTaskConfig=function(t){d.DataLocalStorage.setJson(d.DataLocalStorage.addKeyWithNumID(d.LocalStorageKey.GAME_MULT_TASK_CONFIG),t)},e.prototype.getGameMultTaskConfig=function(){return d.DataLocalStorage.getJson([d.DataLocalStorage.addKeyWithNumID(d.LocalStorageKey.GAME_MULT_TASK_CONFIG)])},e.prototype.updateMultTaskLastTriggerDay=function(){var t=h.UserInfoModel.instance.getServerTimestamp(),e=p.UtilTime.getServerDayCountWith4Clock(t);localStorage.setItem(d.DataLocalStorage.addKeyWithNumID(d.LocalStorageKey.GAME_MULT_TASK_TRIGGER_DAY),e.toString())},e.prototype.getMultTaskLastTriggerDay=function(){return+localStorage.getItem(d.DataLocalStorage.addKeyWithNumID(d.LocalStorageKey.GAME_MULT_TASK_TRIGGER_DAY))},i([jsClass],e)}(c.BaseModel);n.GameMultTaskModel=m,cc.systemEvent.once("GameRoot.inited",function(){l.ModelRoot.instance.add(m)}),cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Model/BaseModel":"BaseModel","../../../../Framework/Root/ModelRoot":"ModelRoot","../../../Base/Data/DataEvent":"DataEvent","../../../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../../../Base/Utils/UtilTime":"UtilTime","../../../UserInfo/UserInfoModel":"UserInfoModel","../../GuanDan/GameEvent":"GameEvent","./GameMultTaskProxy":"GameMultTaskProxy"}],GameMultTaskProxy:[function(t,e,n){"use strict";cc._RF.push(e,"46db3TKcONITLMZviZtyaFo","GameMultTaskProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameMultTaskProxy=void 0;var r=t("../../../../Framework/Proxy/BaseProxy"),s=t("../../../../Framework/Root/ProxyRoot"),c=t("../../../Base/Data/DataBfConfig"),l=t("../../../Base/Data/DataScript"),u=t("../../../Base/Module/Network/protocol/AwardProtocol"),d=t("../../../Base/Module/Network/SocketUtils"),p=t("../GameCommonModel"),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return s.ProxyRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.reqGameMultTaskInfo=function(t,e){var n=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.gameMultTask.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.gameMultTask.func.query+"';channelID="+c.DataBfConfig.ymn.channel+";version='"+t+"';")});d.SocketUtils.instance.request(n,function(t){if(0===t.flag){var n=bf33.Utils.bytesToString(t.msg);console.warn(">-----\x3ereqGameMultTaskInfo:",n);var o=JSON.parse(n),a=0===o.flag,i={};i.flag=o.flag,i.isOpen=1===o.isOpen,i.version=o.version,i.endTime=o.endTime,i.awardLimitCount=o.awardLimit,i.awardCount=o.awardCount,void 0!==o.configs&&(i.taskConfig=o.configs),i.rateInfo=o.info||[],i.errorMsg=o.errorMsg||"",e&&e(a,i)}})},e.prototype.reqGetGameMultTaskAward=function(t,e){var n=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.gameMultTask.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.gameMultTask.func.get+"';id="+t+";channelID="+c.DataBfConfig.ymn.channel+";roomID="+p.GameCommonModel.instance.getAppid()+";")});d.SocketUtils.instance.request(n,function(t){if(0===t.flag){var n=bf33.Utils.bytesToString(t.msg);console.warn(">-----\x3ereqGetGameMultTaskAward:",n);var o=JSON.parse(n),a=0===o.flag,i=o.seqNo,r=o.awardCount,s={id:o.info.id,rate:o.info.rate,state:o.info.state},c=o.errorMsg||"";e&&e(a,i,r,s,c)}})},i([jsClass],e)}(r.BaseProxy);n.GameMultTaskProxy=h,cc.systemEvent.once("GameRoot.inited",function(){s.ProxyRoot.instance.add(h)}),cc._RF.pop()},{"../../../../Framework/Proxy/BaseProxy":"BaseProxy","../../../../Framework/Root/ProxyRoot":"ProxyRoot","../../../Base/Data/DataBfConfig":"DataBfConfig","../../../Base/Data/DataScript":"DataScript","../../../Base/Module/Network/SocketUtils":"SocketUtils","../../../Base/Module/Network/protocol/AwardProtocol":"AwardProtocol","../GameCommonModel":"GameCommonModel"}],GameMultTaskUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"b3aedysAkhDnqkuemhNiASI","GameMultTaskUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./GameMultTaskUI_MainPanel"),a=t("./GameMultTaskUI_Window"),i=t("./GameMultTaskUI_BtnPlaza"),r=t("./GameMultTaskUI_AwardItem"),s=t("./GameMultTaskUI_CompRule"),c=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default)},t}();n.default=c,cc._RF.pop()},{"./GameMultTaskUI_AwardItem":"GameMultTaskUI_AwardItem","./GameMultTaskUI_BtnPlaza":"GameMultTaskUI_BtnPlaza","./GameMultTaskUI_CompRule":"GameMultTaskUI_CompRule","./GameMultTaskUI_MainPanel":"GameMultTaskUI_MainPanel","./GameMultTaskUI_Window":"GameMultTaskUI_Window"}],GameMultTaskUI_AwardItem:[function(t,e,n){"use strict";cc._RF.push(e,"1ab96jkbc9I5Ld/9vx3qzgZ","GameMultTaskUI_AwardItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameMultTaskUI","AwardItem")},e.prototype.onConstruct=function(){this.m_cSelectState=this.getControllerAt(0),this.m_normalBg=this.getChildAt(0),this.m_selectBg=this.getChildAt(1),this.m_selectFrame=this.getChildAt(2)},e.URL="ui://bjwe63qoto95u",e}(fgui.GLabel);n.default=i,cc._RF.pop()},{}],GameMultTaskUI_BtnPlaza:[function(t,e,n){"use strict";cc._RF.push(e,"a0a90nwwx1BC5a0kp4fVHVa","GameMultTaskUI_BtnPlaza");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameMultTaskUI","BtnPlaza")},e.prototype.onConstruct=function(){this.m_cBtnChoice=this.getControllerAt(1),this.m_txtTitle=this.getChildAt(3)},e.URL="ui://bjwe63qoto95k",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],GameMultTaskUI_CompRule:[function(t,e,n){"use strict";cc._RF.push(e,"f8ae00u3KZKxZwqL1Bw7zL1","GameMultTaskUI_CompRule");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameMultTaskUI","CompRule")},e.prototype.onConstruct=function(){this.m_btnBgBlack=this.getChildAt(0),this.m_txtPlaza=this.getChildAt(7),this.m_txtAward1=this.getChildAt(8),this.m_txtAward2=this.getChildAt(9),this.m_txtAward3=this.getChildAt(10),this.m_txtAward4=this.getChildAt(11),this.m_txtAward5=this.getChildAt(12),this.m_txtProb1=this.getChildAt(13),this.m_txtProb2=this.getChildAt(14),this.m_txtProb3=this.getChildAt(15),this.m_txtProb4=this.getChildAt(16),this.m_txtProb5=this.getChildAt(17)},e.URL="ui://bjwe63qoto95v",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameMultTaskUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"14b435Lde1FqLfaIZqRH0T2","GameMultTaskUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameMultTaskUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://bjwe63qona720",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameMultTaskUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"a5b2dtAekdM0I9FOSUzqC8x","GameMultTaskUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameMultTaskUI","Window")},e.prototype.onConstruct=function(){this.m_cRoomLevel=this.getControllerAt(0),this.m_btnPrimary=this.getChildAt(1),this.m_btnMiddle=this.getChildAt(2),this.m_btnHigh=this.getChildAt(3),this.m_btnMaster=this.getChildAt(4),this.m_btnLocalTycoon=this.getChildAt(5),this.m_btnSupreme=this.getChildAt(6),this.m_award1=this.getChildAt(8),this.m_award2=this.getChildAt(9),this.m_award3=this.getChildAt(10),this.m_award4=this.getChildAt(11),this.m_award5=this.getChildAt(12),this.m_btnClose=this.getChildAt(13),this.m_btnFreeDraw=this.getChildAt(14),this.m_btnRule=this.getChildAt(15),this.m_txtHint=this.getChildAt(16),this.m_compRule=this.getChildAt(17)},e.URL="ui://bjwe63qona721",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameMultTaskUI:[function(t,e,n){"use strict";cc._RF.push(e,"4223eXeBzBB3oywTi8O+FiW","GameMultTaskUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameMultTaskUI=void 0;var c,l=t("../../../../Framework/Manager/EventManager"),u=t("../../../../Framework/Manager/UIManager"),d=t("../../../../Framework/UI/FadeUI"),p=t("../../../Award/AwardModel"),h=t("../../../Award/AwardUI"),_=t("../../../Base/Data/DataEvent"),f=t("../../../Base/Data/DataProps"),m=t("../../../Base/Data/DataScript"),g=t("../../../Base/Module/BfAnalytics/BfasManager"),y=t("../../../Base/Module/BfAnalytics/DataPointID"),I=t("../../../Base/View/UIHelp"),C=t("../../../Base/Module/Room/RoomModel"),M=t("../../GuanDan/GameEvent"),v=t("../GameCommonModel"),E=t("./GameMultTaskModel");(function(t){t[t.NOT_CHOICE=0]="NOT_CHOICE",t[t.HAD_CHOICE=1]="HAD_CHOICE"})(c||(c={}));var A=4,P=["\u521d\u7ea7\u573a","\u4e2d\u7ea7\u573a","\u9ad8\u7ea7\u573a","\u5927\u5e08\u573a","\u571f\u8c6a\u573a","\u81f3\u5c0a\u573a"],b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isStartDraw=!1,e._iFrameTime=0,e._selectIndex=0,e._speedCoef=A,e._targetIndex=1,e._awardArrayItems=[],e._clickTitleSubID=null,e._drawSeqNo=0,e}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e,"willShowLoading",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return E.GameMultTaskModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initData(),g.BfasManager.instance.sendEvt(y.GameMultTaskPointID.SHOW,{subID:v.GameCommonModel.instance.getSubid()})},e.prototype.initListener=function(){l.EventManager.instance.on(M.GameEvent.NotifyUpdateGameMultTask,this,this.onNotifyUpdateGameMultTask),l.EventManager.instance.on(M.GameEvent.NotifyShowGameMultTaskAward,this,this.onNotifyShowGameMultTaskAward),this.view.m_Window.m_cRoomLevel.on(fgui.Event.STATUS_CHANGED,this.onBtnTitleChanged,this),this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),this.view.m_Window.m_btnFreeDraw.onClick(this.onBtnFreeDraw,this),this.view.m_Window.m_btnRule.onClick(this.onBtnRule,this),this.view.m_Window.m_compRule.m_btnBgBlack.onClick(this.onClickRuleBg,this)},e.prototype.initData=function(){this._awardArrayItems=[this.view.m_Window.m_award1,this.view.m_Window.m_award2,this.view.m_Window.m_award3,this.view.m_Window.m_award4,this.view.m_Window.m_award5]},e.prototype.onNotifyUpdateGameMultTask=function(t,e){console.log("onNotifyUpdateGameMultTask.ui:",t),this._clickTitleSubID===e&&this.initUI(this._clickTitleSubID)},e.prototype.onNotifyShowGameMultTaskAward=function(){var t=this.model.getAwardByDraw(this._clickTitleSubID,this._drawSeqNo)[1],e={sr:t.sr,yb:t.yb,prop:t.prop},n=p.AwardModel.instance.adaptAwardsFormat(e),o=p.AwardModel.instance.getAwardsFormat(n);u.UIManager.instance.open(h.AwardUI).then(function(t){t.init(o),l.EventManager.instance.emit(_.DataEvent.DelayAwardListener,m.DataScript.gameMultTask.id)})},e.prototype.initUI=function(t){this._clickTitleSubID=t,this.updateTitleInfo(t),this.updateAwardInfo(t),this.updateDrawBtn(t),this.updateHintText(t)},e.prototype.updateTitleInfo=function(t){var e=[this.view.m_Window.m_btnPrimary,this.view.m_Window.m_btnMiddle,this.view.m_Window.m_btnHigh,this.view.m_Window.m_btnMaster,this.view.m_Window.m_btnLocalTycoon,this.view.m_Window.m_btnSupreme],n=C.RoomModel.instance.getPlazaInfoBySubID(t).iconID-1;this.view.m_Window.m_cRoomLevel.selectedIndex=n;for(var o=0;o<e.length;o++)e[o].m_txtTitle.text=P[o],e[o].m_txtTitle.font=o===n?"ui://GameMultTaskUI/fnt-sfanxz":"ui://GameMultTaskUI/fnt-sfwx"},e.prototype.updateAwardInfo=function(t){for(var e,n,o=this.model.getTaskConfigByID(t).awards,a=0;a<o.length;a++){var i=o[a];if(this._awardArrayItems[a].title=i.name,i.sr&&i.sr>0){var c=f.DataProps.instance.getPropRes("sr"+i.pic);this._awardArrayItems[a].icon=I.UIHelp.getPropIcon(f.PropTypeEnum.GOLD,c)}else if(i.yb&&i.yb>0)c=f.DataProps.instance.getPropRes("yb"+i.pic),this._awardArrayItems[a].icon=I.UIHelp.getPropIcon(f.PropTypeEnum.DIAMOND,c);else if(i.prop)try{for(var l=(e=void 0,r(Object.entries(i.prop))),u=l.next();!u.done;u=l.next()){var d=s(u.value,2),p=d[0];d[1],c="",c=f.DataProps.instance.isAwardTicketPropID(+p)?f.DataProps.instance.getPropRes("ticket"+i.pic):f.DataProps.instance.getPropRes(+p),this._awardArrayItems[a].icon=I.UIHelp.getPropIcon(f.PropTypeEnum.SINGLE,c)}}catch(h){e={error:h}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}}},e.prototype.updateDrawBtn=function(t){var e;e=!this.model.isCompleteTaskToday()&&this.model.canDraw(t),this.view.m_Window.m_btnFreeDraw.enabled=!!e,this.view.m_Window.m_btnFreeDraw.touchable=!!e},e.prototype.updateHintText=function(t){var e="";if(this.model.isCompleteTaskToday())e="\u4eca\u65e5\u62bd\u5956\u673a\u4f1a\u5df2\u7528\u5b8c\uff0c\u660e\u65e5\u7ee7\n\u7eed\u54e6~";else{var n=E.GameMultTaskModel.instance.getTaskConfigByID(t),o=E.GameMultTaskModel.instance.getTaskRateInfoByID(t);n&&o&&(e=o.state===E.GameMultTaskStateEnum.NOT_GET?"\u518d\u8d62[size=24][color=#fdf275]"+(n.target-o.rate)+"\u5c40[/color][/size]\uff0c\u83b7\u5f97\u514d\u8d39\u62bd\u5956\u673a\u4f1a":"\u672c\u6b21\u4efb\u52a1\u5df2\u5b8c\u6210\uff0c\u9a6c\u4e0a\u62bd\u5956\u5427~")}this.view.m_Window.m_txtHint.text=e},e.prototype.touchEnableTitleBtn=function(t){this.view.m_Window.m_btnPrimary.touchable=t,this.view.m_Window.m_btnMiddle.touchable=t,this.view.m_Window.m_btnHigh.touchable=t,this.view.m_Window.m_btnMaster.touchable=t,t?this.view.m_Window.m_cRoomLevel.on(fgui.Event.STATUS_CHANGED,this.onBtnTitleChanged,this):this.view.m_Window.m_cRoomLevel.off(fgui.Event.STATUS_CHANGED,this.onBtnTitleChanged,this)},e.prototype.onBtnTitleChanged=function(){this._awardArrayItems[this._selectIndex].m_cSelectState.selectedIndex=c.NOT_CHOICE,this._selectIndex=0;var t=+this.view.m_Window.m_cRoomLevel.selectedPage;console.log("onBtnTitleChanged:",t),g.BfasManager.instance.sendEvt(y.GameMultTaskPointID.CLICK_PLAZA_TAB,{subID:t}),this.initUI(t)},e.prototype.onBtnFreeDraw=function(){var t=this;console.log("onBtnFreeDraw\uff1a",this._clickTitleSubID),g.BfasManager.instance.sendEvt(y.GameMultTaskPointID.CLICK_GET_AWARD,{subID:this._clickTitleSubID}),I.UIHelp.instance.showLoading(),this.model.reqGetGameMultTaskAward(this._clickTitleSubID,function(e,n){I.UIHelp.instance.hideLoading(),e&&(t._awardArrayItems[t._selectIndex].m_cSelectState.selectedIndex=c.NOT_CHOICE,t._awardArrayItems[0].m_cSelectState.selectedIndex=c.HAD_CHOICE,t._iFrameTime=0,t._selectIndex=0,t._speedCoef=A,t._drawSeqNo=n,t._targetIndex=t.model.getAwardByDraw(t._clickTitleSubID,n)[0],console.log("\u5f53\u524d\u5956\u52b1\u662f\uff1a",n,t._targetIndex),t._isStartDraw=!0,t.touchEnableTitleBtn(!1))})},e.prototype.onBtnRule=function(){console.log("onBtnRule"),this.showRuleComp(!0),this.updateProbUI()},e.prototype.onClickRuleBg=function(){this.showRuleComp(!1)},e.prototype.showRuleComp=function(t){this.view.m_Window.m_compRule.visible=t},e.prototype.updateProbUI=function(){var t=C.RoomModel.instance.getPlazaInfoBySubID(this._clickTitleSubID).iconID-1;this.view.m_Window.m_compRule.m_txtPlaza.text=P[t];for(var e=this.model.getTaskConfigByID(this._clickTitleSubID).awards,n=0;n<e.length;n++)this.view.m_Window.m_compRule["m_txtAward"+(n+1)].text=e[n].name,this.view.m_Window.m_compRule["m_txtProb"+(n+1)].text=e[n].prob+"%"},e.prototype.update=function(){if(this._isStartDraw&&(this._iFrameTime++,this._iFrameTime>this._speedCoef)){this._iFrameTime=0,this._selectIndex++,this._selectIndex>=this._awardArrayItems.length&&(this._selectIndex=0,this._speedCoef++),this._speedCoef===A+2&&(this._speedCoef=9),10===this._speedCoef&&this._selectIndex===this._targetIndex&&(this._isStartDraw=!1,this.touchEnableTitleBtn(!0),cc.tween(this.node).delay(.8).call(function(){l.EventManager.instance.emit(M.GameEvent.NotifyShowGameMultTaskAward)}).start());var t=this._selectIndex-1<0?this._awardArrayItems.length-1:this._selectIndex-1;this._awardArrayItems[t].m_cSelectState.selectedIndex=c.NOT_CHOICE,this._awardArrayItems[this._selectIndex].m_cSelectState.selectedIndex=c.HAD_CHOICE}},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._isStartDraw=!1,l.EventManager.instance.emit(_.DataEvent.DelayAwardListener,m.DataScript.gameMultTask.id),l.EventManager.instance.off(M.GameEvent.NotifyUpdateGameMultTask,this,this.onNotifyUpdateGameMultTask)},i([jsClass],e)}(d.FadeUI);n.GameMultTaskUI=b,cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Manager/UIManager":"UIManager","../../../../Framework/UI/FadeUI":"FadeUI","../../../Award/AwardModel":"AwardModel","../../../Award/AwardUI":"AwardUI","../../../Base/Data/DataEvent":"DataEvent","../../../Base/Data/DataProps":"DataProps","../../../Base/Data/DataScript":"DataScript","../../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../../Base/Module/Room/RoomModel":"RoomModel","../../../Base/View/UIHelp":"UIHelp","../../GuanDan/GameEvent":"GameEvent","../GameCommonModel":"GameCommonModel","./GameMultTaskModel":"GameMultTaskModel"}],GameProxy:[function(t,e,n){"use strict";cc._RF.push(e,"93cebCHMYZL8phUNOgPB+jw","GameProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameProxy=n.TrustEnum=void 0;var r,s=t("../../../../Framework/Proxy/BaseProxy"),c=t("../../../../Framework/Root/ProxyRoot"),l=t("../../../Base/Module/Network/SocketUtils"),u=t("../Model/GameModel"),d=t("./Protocol/CardProtocol"),p=t("./Protocol/GDProtocol"),h=t("../../../../Framework/Manager/EventManager"),_=t("../../Common/PlayerInfoModel"),f=t("../GameEvent"),m=t("../../../Base/Utils/UtilTool"),g=t("../../../../Framework/Manager/UIManager"),y=t("../GameMakeCardUI"),I=t("../../../../Framework/Manager/CoroutineManager"),C=t("../GameCardModel/ManagerOutModel"),M=t("../GameCardModel/GameCardUIOutModelBase"),v=t("../../Common/GameCommonModel");(function(t){t[t.NOT_TRUST=0]="NOT_TRUST",t[t.TRUST=1]="TRUST"})(r=n.TrustEnum||(n.TrustEnum={}));var E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isTuoQiangJF=!1,e._taiPaiMaxLength=0,e._lastOut={},e}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return c.ProxyRoot.instance.get(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return u.GameModel.instance},enumerable:!1,configurable:!0}),e.prototype.startListener=function(){this.initListener()},e.prototype.stopListener=function(){l.SocketUtils.instance.unregisterGameByCaller(this)},e.prototype.initListener=function(){l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_ALL_BACK,this,this.onAllBack),l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_BASE_CARD,this,this.onBaseCard),l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_BASE_BACK,this,this.onBaseBack),l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_HAND_CARD,this,this.onHandCard),l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_HAND_BACK,this,this.onHandBack),l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_OUT_CARD,this,this.onOutCard),l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_BANKER,this,this.onBanker),l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_GAME_STEP,this,this.onGameStep),l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_POWER,this,this.onPower),l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_CLOCK,this,this.onClock),l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_TAKE_FIRST,this,this.onFirstTake),l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_ADD_BASE,this,this.onAddBase),l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_PLAY_CARD,this,this.onPlayCard),l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_END_WAIT,this,this.onEndWait),l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_TURN_DATA,this,this.onTurnData),l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_START_GAME,this,this.onStartGame),l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_END_GAME,this,this.onEndGame),l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_RELINK_ENTER,this,this.onRelinkEnter),l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_TRUST,this,this.onTrust),l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_SPECF_DATA,this,this.onSpecfData),l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_SPECF_HAND,this,this.onSpecfHand),l.SocketUtils.instance.registerGame(d.CardProtocol.xyid.CLXY_END_STEP,this,this.onEndStep),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_LOGICDATA,this,this.onLogicData),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_GAMEDATA,this,this.onGameData),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_NOWROUNDINFO,this,this.onNowRoundInfo),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_CONTRIBUTEDATA,this,this.onContributeData),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_FIGHTCONTRIBUTE,this,this.onFightContribute),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_PARTNERHANDCARD,this,this.onPartnerHandCard),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_RESULT,this,this.onResult),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_ENDTOTALGAME,this,this.onEndTotalGame),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_LABELCARDPARTNER,this,this.onLabelCardPartner),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_MATCHINFOR,this,this.onMatchInfo),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_GDBOMBMULT,this,this.onGDBombMult),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_PASSLEVELAWARD,this,this.onPassLevelAward),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_ESCAPEPUNISH,this,this.onEscapePunish),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_OUTCARDCOUNT,this,this.onOutCardCount),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_NEWRECVCARDS,this,this.onNewRecvCards),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_NOTICE_CHANGE_SEAT,this,this.onNoticeChangeSeat),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_SELFCREATEALLSCORE,this,this.onBoxRoomResultScore),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_SELFCREATESCORE,this,this.onBoxRoomScore),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_SELFCREATETOTALSCORE,this,this.onBoxRoomTotalScore),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_CONTINUEROUNDDATA,this,this.onMsgContinueRoundData),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_TUO_PAI_SCORE,this,this.onBoxTuoPaiScore),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_TUOPAI_RANK,this,this.onBoxTuoPaiRank),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_TUOPAI_FOLLOW_SEAT,this,this.onBoxTuoPaiFollow),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_MIXPASSA_RESP_DISMISS,this,this.onMixPassARespDismiss),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_MIXPASSA_DISMISS_RESULT,this,this.onMixPassADismissResult),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_MIXPASSA_BIG_RESULT,this,this.onMixPassABigResult),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_MIXPASSA_TOTALSCORE,this,this.onMixPassATotalScore),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_CALL_MULT,this,this.onMsgCallMult),l.SocketUtils.instance.registerGame(p.GDProtocol.xyid.GLXY_PARTNERHANDCARD2,this,this.onMsgTeamPartnerHandCard)},e.prototype.onMsgTeamPartnerHandCard=function(t){console.log("onMsgTeamPartnerHandCard:",t);var e=_.PlayerInfoModel.instance.serverToLocal(t.seat);v.GameCommonModel.instance.isTeamModel()&&e===_.LocalSeatEnum.PARTNER&&console.warn("onMsgTeamPartnerHandCard.partner:",t.cards.join("|")),u.GameModel.instance.updateHandCardsData(e,t.cards),h.EventManager.instance.emit(f.GameEvent.REFRESH_NOTECARD_MINUS_HANDCARDS,{type:u.NoteCardTypeEnum.TEAM,seat:e,cards:t.cards})},e.prototype.onMsgCallMult=function(t){console.log("onMsgCallMult:",t),u.GameModel.instance.setCanCallMult(t.seat,t.canCallMult),h.EventManager.instance.emit(f.GameEvent.NotifyCallMultData,t)},e.prototype.onMixPassATotalScore=function(t){console.log("onMixPassATotalScore:",t),h.EventManager.instance.emit(f.GameEvent.NotifyMixPassATotalScore,t)},e.prototype.onMixPassARespDismiss=function(t){console.log("onMixPassARespDismiss:",t),h.EventManager.instance.emit(f.GameEvent.NotifyMixPassADismissPanel,t)},e.prototype.onMixPassADismissResult=function(t){console.log("onMixPassADismissResult:",t),h.EventManager.instance.emit(f.GameEvent.NotifyMixPassADismissResult,t.flag)},e.prototype.onMixPassABigResult=function(t){console.log("onMixPassABigResult:",t),u.GameModel.instance.setMixPassAGameEnd(!0),h.EventManager.instance.emit(f.GameEvent.NotifyMixPassABigResult,t)},e.prototype.onBoxTuoPaiFollow=function(t){console.log("onBoxTuoPaiFollow"),_.PlayerInfoModel.instance.getSelfSeat()===t.followSeat&&(this._isTuoQiangJF=!0),h.EventManager.instance.emit(f.GameEvent.COMMON_EVENT,{type:3,lseat:_.PlayerInfoModel.instance.serverToLocal(t.followSeat)})},e.prototype.onBoxTuoPaiRank=function(t){console.log("onBoxTuoPaiRank"),h.EventManager.instance.emit(f.GameEvent.TUO_PAI_RANK_DATA,t)},e.prototype.onBoxTuoPaiScore=function(t){if(console.log("onBoxTuoPaiScore"),t.isNowPanGameEnd){var e=m.UtilTool.easyUTF8(new Uint8Array(t.playerLaveHandCardsStr));u.GameModel.instance.dealLastShowCards(e),h.EventManager.instance.emit(f.GameEvent.TUO_PAI_RESULT_DATA,t)}},e.prototype.onBoxRoomTotalScore=function(t){console.log("onBoxRoomTotalScore"),u.GameModel.instance.saveBoxBigResultInfo(t),I.CoroutineManager.instance.once(C.ManagerOutModel.instance.getPlayPutCardActionNeedDt()+M.TANPAI_ACTION_DT*this._taiPaiMaxLength,function(){h.EventManager.instance.emit(f.GameEvent.BOXROOM_BIG_RESULT,t)})},e.prototype.onMsgContinueRoundData=function(t){console.log("onMsgContinueRoundData"),h.EventManager.instance.emit(f.GameEvent.BOXROOM_CONTINUE_ROUNDDATA,t)},e.prototype.onBoxRoomScore=function(t){console.log("onBoxRoomScore"),h.EventManager.instance.emit(f.GameEvent.REFRESH_BOXROOM_SCORE,t)},e.prototype.onBoxRoomResultScore=function(t){console.log("onBoxRoomResultScore"),I.CoroutineManager.instance.once(C.ManagerOutModel.instance.getPlayPutCardActionNeedDt()+M.TANPAI_ACTION_DT*this._taiPaiMaxLength,function(){h.EventManager.instance.emit(f.GameEvent.BOXROOM_RESULT,t)}),this._taiPaiMaxLength=0},e.prototype.onPassLevelAward=function(){console.log("onPassLevelAward")},e.prototype.onEscapePunish=function(t){console.log("onEscapePunish"),u.GameModel.instance.setEscapePunish(t.punishMult)},e.prototype.onOutCardCount=function(t){console.log("onOutCardCount:",t),h.EventManager.instance.emit(f.GameEvent.REFRESH_RELINK_OUTCARD_COUNT,t)},e.prototype.onNewRecvCards=function(t){console.log("onNewRecvCards:",t),h.EventManager.instance.emit(f.GameEvent.UPDATE_LIPAI_CARDS,t)},e.prototype.onGameData=function(t){console.log("onGameData");var e=_.PlayerInfoModel.instance.serverToLocal(t.seat);u.GameModel.instance.updateCardLevel(e,t)},e.prototype.onNowRoundInfo=function(t){console.log("onNowRoundInfo"),u.GameModel.instance.updateNowCardLevel(t);var e=u.GameModel.instance.getHandCards(_.LocalSeatEnum.SELF);h.EventManager.instance.emit(f.GameEvent.UPDATE_LEVEL_CARDS,{cards:e,level:t.nowRoundLevel})},e.prototype.onContributeData=function(t){console.log("onContributeData:",t),t.seat===_.PlayerInfoModel.instance.getSelfSeat()&&u.GameModel.instance.setContributeType(t.contributeType),h.EventManager.instance.emit(f.GameEvent.CONTRIBUTE_DATA,t)},e.prototype.onFightContribute=function(t){console.log("onFightContribute"),h.EventManager.instance.emit(f.GameEvent.FIGHTING,t)},e.prototype.onPartnerHandCard=function(t){console.log("onPartnerHandCard"),u.GameModel.instance.setReceivePartnerHandCard(!0),u.GameModel.instance.updateHandCardsData(_.PlayerInfoModel.instance.getPartnerSeat(_.LocalSeatEnum.SELF),t.cards),h.EventManager.instance.emit(f.GameEvent.UPDATE_HAND_CARDS,{seat:_.LocalSeatEnum.SELF,cards:t.cards}),h.EventManager.instance.emit(f.GameEvent.COMMON_EVENT,{type:1}),h.EventManager.instance.emit(f.GameEvent.REFRESH_NOTECARD_FOLLOW_PARTNER,t.cards)},e.prototype.onResult=function(t){console.log("onResult",t),v.GameCommonModel.instance.isMatchRoomModel()&&u.GameModel.instance.updateLastMatchInfo(),I.CoroutineManager.instance.once(C.ManagerOutModel.instance.getPlayPutCardActionNeedDt()+M.TANPAI_ACTION_DT*this._taiPaiMaxLength,function(){h.EventManager.instance.emit(f.GameEvent.RESULT,t)})},e.prototype.onEndTotalGame=function(){console.log("onEndTotalGame"),u.GameModel.instance.setPassA(!0)},e.prototype.onLabelCardPartner=function(t){console.log("onLabelCardPartner"),h.EventManager.instance.emit(f.GameEvent.TTZ_LIANGPAI,t)},e.prototype.onMatchInfo=function(t){console.log("ttt.onMatchInfo",t),u.GameModel.instance.setMatchInfo(t),h.EventManager.instance.emit(f.GameEvent.NOTICE_MATCHINFO,t)},e.prototype.onGDBombMult=function(t){console.log("onGDBombMult:",t);var e=t.nMult;t.nBombMul>0&&(e=t.nBombMul);var n=u.GameModel.instance.setGDMult(t.nType,e);h.EventManager.instance.emit(f.GameEvent.GDMULT,n,t)},e.prototype.onLogicData=function(t){console.log("onLogicData"),u.GameModel.instance.setLogicData(t),h.EventManager.instance.emit(f.GameEvent.LOGIC_DATA,t)},e.prototype.onAllBack=function(){console.log("onAllBack")},e.prototype.onBaseCard=function(){console.log("onBaseCard")},e.prototype.onBaseBack=function(){console.log("onBaseBack")},e.prototype.onHandCard=function(t){console.log("onHandCard:",t);var e=_.PlayerInfoModel.instance.serverToLocal(t.seat);if(u.GameModel.instance.updateHandCardsData(e,t.cards),e===_.LocalSeatEnum.SELF&&27===t.cards.length&&console.warn("onHandCard.self:",t.cards.join("|")),u.GameModel.instance.getGameStep()!==u.GameStepEnum.GAME_STEP_WIN_LOST)h.EventManager.instance.emit(f.GameEvent.REFRESH_NOTECARD_MINUS_HANDCARDS,{type:u.NoteCardTypeEnum.NORAML,seat:e,cards:t.cards}),h.EventManager.instance.emit(f.GameEvent.REFRESH_NOTECARD_MINUS_HANDCARDS,{type:u.NoteCardTypeEnum.TEAM,seat:e,cards:t.cards}),h.EventManager.instance.emit(f.GameEvent.UPDATE_HAND_CARDS,{seat:e,cards:t.cards}),e===_.LocalSeatEnum.SELF&&h.EventManager.instance.emit(f.GameEvent.REFRESH_THS);else if(u.GameModel.instance.isTuoPaiModel()){var n=u.GameModel.instance.getLastShowCardsBySeat(t.seat);I.CoroutineManager.instance.once(C.ManagerOutModel.instance.getPlayPutCardActionNeedDt(),function(){h.EventManager.instance.emit(f.GameEvent.UPDATE_OUT_CARDS,{seat:_.PlayerInfoModel.instance.serverToLocal(t.seat),cards:n,putType:2}),t.seat===_.LocalSeatEnum.SELF&&h.EventManager.instance.emit(f.GameEvent.PLAY_TUO_PAI_RESULT_DATA)}),n.length>this._taiPaiMaxLength&&(this._taiPaiMaxLength=n.length)}else e!==_.LocalSeatEnum.SELF&&t.cards.length>0&&(I.CoroutineManager.instance.once(C.ManagerOutModel.instance.getPlayPutCardActionNeedDt(),function(){h.EventManager.instance.emit(f.GameEvent.UPDATE_OUT_CARDS,{seat:_.PlayerInfoModel.instance.serverToLocal(t.seat),cards:t.cards,putType:2})}),t.cards.length>this._taiPaiMaxLength&&(this._taiPaiMaxLength=t.cards.length))},e.prototype.onHandBack=function(t){console.log("onHandBack");for(var e=_.PlayerInfoModel.instance.serverToLocal(t.seat),n=[],o=0;o<t.count;++o)n.push(55);u.GameModel.instance.updateHandCardsData(e,n)},e.prototype.onOutCard=function(t){console.log("onOutCard"),this._lastOut[t.seat]=t;var e=_.PlayerInfoModel.instance.serverToLocal(t.seat),n=e;h.EventManager.instance.emit(f.GameEvent.UPDATE_OUT_CARDS,{seat:e,cards:t.cards,putType:null,typeID:t.typeID}),h.EventManager.instance.emit(f.GameEvent.REFRESH_PLAYCARD,{seat:n,p:t})},e.prototype.onBanker=function(){console.log("onBanker")},e.prototype.onGameStep=function(t){console.log("onGameStep"),u.GameModel.instance.setGameStep(t.stepID),h.EventManager.instance.emit(f.GameEvent.REFRESH_STEP)},e.prototype.onPower=function(t){if(console.log("onPower:",t.seat,t.power),t.power&u.PowerEnum.CAN_PLAY){if(!(t.power&u.PowerEnum.CAN_NOT_PLAY))if(h.EventManager.instance.emit(f.GameEvent.REFRESH_PLAYCARD,{seat:_.MAX_PLAYER}),this._isTuoQiangJF&&u.GameModel.instance.isTuoPaiModel())u.GameModel.instance.clearOutCardData(!1,null);else{u.GameModel.instance.clearOutCardData(!0,null);for(var e=0;e<_.MAX_PLAYER;++e)h.EventManager.instance.emit(f.GameEvent.UPDATE_OUT_CARDS,{seat:e,cards:[]})}u.GameModel.instance.setSelfPlay(t.seat===_.PlayerInfoModel.instance.getSelfSeat())}this._isTuoQiangJF&&u.GameModel.instance.isTuoPaiModel()||u.GameModel.instance.clearOutCard(_.PlayerInfoModel.instance.serverToLocal(t.seat)),this._isTuoQiangJF=!1,t.seat===_.PlayerInfoModel.instance.getSelfSeat()&&h.EventManager.instance.emit(f.GameEvent.REFRESH_POWER,t)},e.prototype.onClock=function(t){u.GameModel.instance.setSelfPlay(t.seat===_.PlayerInfoModel.instance.getSelfSeat()),h.EventManager.instance.emit(f.GameEvent.UPDATE_OUT_CARDS,{seat:_.PlayerInfoModel.instance.serverToLocal(t.seat),cards:[]}),h.EventManager.instance.emit(f.GameEvent.REFRESH_CLOCK,t)},e.prototype.onFirstTake=function(){console.log("onFirstTake"),h.EventManager.instance.emit(f.GameEvent.TAKE_FIRST_ACTION)},e.prototype.onAddBase=function(){console.log("onAddBase")},e.prototype.onPlayCard=function(t){console.log("onPlayCard");var e=_.PlayerInfoModel.instance.serverToLocal(t.seat);if(u.GameModel.instance.dealPlayCardData(e,t.cards),!u.GameModel.instance.isNextSeatExist(e)){var n=_.PlayerInfoModel.instance.nextSeat(e);h.EventManager.instance.emit(f.GameEvent.UPDATE_OUT_CARDS,{seat:n,cards:[]})}if(0!==t.cardCount)u.GameModel.instance.setOutCardData(e,t),e===_.LocalSeatEnum.SELF?(h.EventManager.instance.emit(f.GameEvent.UPDATE_HAND_CARDS_DATA,{seat:e,cards:u.GameModel.instance.getHandCards(_.LocalSeatEnum.SELF)}),h.EventManager.instance.emit(f.GameEvent.REFRESH_THS)):_.PlayerInfoModel.instance.isPartner(_.LocalSeatEnum.SELF,e)&&0===u.GameModel.instance.getCardCount(_.LocalSeatEnum.SELF)&&h.EventManager.instance.emit(f.GameEvent.UPDATE_HAND_CARDS,{seat:_.LocalSeatEnum.SELF,cards:u.GameModel.instance.getHandCards(e)}),h.EventManager.instance.emit(f.GameEvent.UPDATE_OUT_CARDS,{seat:e,cards:t.cards,putType:null,typeID:t.typeID});else{var o=u.GameModel.instance.isCurTurnEndWithNotPlay(e),a=u.GameModel.instance.getPreOutLocalSeat();if(_.PlayerInfoModel.instance.getNowGamePlayer()===_.MAX_PLAYER&&o&&0===u.GameModel.instance.getCardCount(a)&&(h.EventManager.instance.emit(f.GameEvent.COMMON_EVENT,{type:3,lseat:_.PlayerInfoModel.instance.getPartnerSeat(a)}),h.EventManager.instance.emit(f.GameEvent.REFRESH_PLAYCARD,{seat:_.MAX_PLAYER,p:t})),u.GameModel.instance.clearOutCardData(!0,e)){h.EventManager.instance.emit(f.GameEvent.REFRESH_PLAYCARD,{seat:e,p:t});for(var i=0;i<_.MAX_PLAYER;++i)h.EventManager.instance.emit(f.GameEvent.UPDATE_OUT_CARDS,{seat:i,cards:[]});return void h.EventManager.instance.emit(f.GameEvent.REFRESH_PLAYCARD,{seat:_.MAX_PLAYER,p:t})}}h.EventManager.instance.emit(f.GameEvent.REFRESH_PLAYCARD_NOTECARD_NUM,{seat:e,p:t}),h.EventManager.instance.emit(f.GameEvent.REFRESH_PLAYCARD,{seat:e,p:t})},e.prototype.onEndWait=function(){console.log("onEndWait")},e.prototype.onTurnData=function(t){console.log("onTurnData");var e=this._lastOut[t.preSeat];if(e){var n=_.PlayerInfoModel.instance.serverToLocal(e.seat);u.GameModel.instance.setOutCardData(n,e)}},e.prototype.onStartGame=function(){console.log("ttt.onStartGame"),u.GameModel.instance.setMixPassAGameEnd(!1)},e.prototype.onEndGame=function(){console.log("onEndGame"),h.EventManager.instance.emit(f.GameEvent.GAME_END)},e.prototype.onRelinkEnter=function(){console.log("onRelinkEnter"),this._lastOut={}},e.prototype.onTrust=function(t){console.log("onTrust"),u.GameModel.instance.setTrust(t.flag===r.TRUST),h.EventManager.instance.emit(f.GameEvent.REFRESH_TRUST,t)},e.prototype.onSpecfData=function(t){console.log("onSpecfData"),g.UIManager.instance.open(y.GameMakeCardUI).then(function(){h.EventManager.instance.emit(f.GameEvent.RESP_XY_TEST_CARDS,{cards:t.cards})})},e.prototype.onSpecfHand=function(){console.log("onSpecfHand")},e.prototype.onEndStep=function(){console.log("onEndStep")},e.prototype.onNoticeChangeSeat=function(t){console.log("onNoticeChangeSeat",t),h.EventManager.instance.emit(f.GameEvent.NOTICE_CHANGE_SEAT,t)},e.prototype.sendTrust=function(t){var e=new d.CardProtocol.msgTrust;e.seat=_.PlayerInfoModel.instance.getSelfSeat(),e.flag=t,l.SocketUtils.instance.notify(e)},e.prototype.sendPlayCard=function(t){var e=new d.CardProtocol.msgPlayCard;m.UtilTool.setData(e,t),e.seat=_.PlayerInfoModel.instance.getSelfSeat(),l.SocketUtils.instance.notify(e)},e.prototype.sendRecvCardsData=function(t){var e=new p.GDProtocol.msgNewRecvCards;e.seat=_.PlayerInfoModel.instance.getSelfSeat(),e.data=t,l.SocketUtils.instance.notify(e)},e.prototype.sendContributeCardsData=function(t){var e=new p.GDProtocol.msgContributeData;e.seat=_.PlayerInfoModel.instance.getSelfSeat(),e.cardValue=t,l.SocketUtils.instance.notify(e)},e.prototype.sendMakeCardData=function(t){var e=new d.CardProtocol.msgSpecfHand;e.seat=_.PlayerInfoModel.instance.getSelfSeat(),e.cards=t,e.count=t.length,l.SocketUtils.instance.notify(e)},e.prototype.sendTestEndGame=function(t,e,n){var o=new p.GDProtocol.msgTestEndGame;o.testEndGameFlag=1,o.ranks=t,o.trustState=e,o.extraMults=n,l.SocketUtils.instance.notify(o)},e.prototype.sendMixPassADismissChoice=function(t,e){void 0===e&&(e=!0);var n=new p.GDProtocol.msgMixPassAReqDismiss;n.seat=t,n.flag=e?1:2,l.SocketUtils.instance.notify(n)},e.prototype.sendCallMult=function(t,e){var n=new p.GDProtocol.msgCallMult;n.seat=t,n.callMult=e,l.SocketUtils.instance.notify(n)},n=i([jsClass],e)}(s.BaseProxy);n.GameProxy=E,cc.systemEvent.once("GameRoot.inited",function(){c.ProxyRoot.instance.add(E)}),cc._RF.pop()},{"../../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Manager/UIManager":"UIManager","../../../../Framework/Proxy/BaseProxy":"BaseProxy","../../../../Framework/Root/ProxyRoot":"ProxyRoot","../../../Base/Module/Network/SocketUtils":"SocketUtils","../../../Base/Utils/UtilTool":"UtilTool","../../Common/GameCommonModel":"GameCommonModel","../../Common/PlayerInfoModel":"PlayerInfoModel","../GameCardModel/GameCardUIOutModelBase":"GameCardUIOutModelBase","../GameCardModel/ManagerOutModel":"ManagerOutModel","../GameEvent":"GameEvent","../GameMakeCardUI":"GameMakeCardUI","../Model/GameModel":"GameModel","./Protocol/CardProtocol":"CardProtocol","./Protocol/GDProtocol":"GDProtocol"}],GameResultUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"33ac6/bQthOXrKYC9rc6bU2","GameResultUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./GameResultUI_sweep_dayingjia"),a=t("./GameResultUI_DaYingJia"),i=t("./GameResultUI_PlayerInfo"),r=t("./GameResultUI_MainPanel_Match"),s=t("./GameResultUI_Players_Match"),c=t("./GameResultUI_Player_Match"),l=t("./GameResultUI_PlayerInfos"),u=t("./GameResultUI_MainPanel"),d=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default),fgui.UIObjectFactory.setExtension(l.default.URL,l.default),fgui.UIObjectFactory.setExtension(u.default.URL,u.default)},t}();n.default=d,cc._RF.pop()},{"./GameResultUI_DaYingJia":"GameResultUI_DaYingJia","./GameResultUI_MainPanel":"GameResultUI_MainPanel","./GameResultUI_MainPanel_Match":"GameResultUI_MainPanel_Match","./GameResultUI_PlayerInfo":"GameResultUI_PlayerInfo","./GameResultUI_PlayerInfos":"GameResultUI_PlayerInfos","./GameResultUI_Player_Match":"GameResultUI_Player_Match","./GameResultUI_Players_Match":"GameResultUI_Players_Match","./GameResultUI_sweep_dayingjia":"GameResultUI_sweep_dayingjia"}],GameResultUI_DaYingJia:[function(t,e,n){"use strict";cc._RF.push(e,"088a45khPJKrreXhPY8kGM1","GameResultUI_DaYingJia");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameResultUI","\u5927\u8d62\u5bb6")},e.prototype.onConstruct=function(){this.m_winType=this.getControllerAt(0),this.m_str_text=this.getChildAt(4),this.m_str_text2=this.getChildAt(9),this.m_\u5927\u8d62\u5bb6=this.getTransitionAt(0)},e.URL="ui://x8xelpmfmwo57",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameResultUI_MainPanel_Match:[function(t,e,n){"use strict";cc._RF.push(e,"19779RfJIpNU65enQ7fG15w","GameResultUI_MainPanel_Match");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameResultUI","MainPanel_Match")},e.prototype.onConstruct=function(){this.m_bg=this.getChildAt(0),this.m_titleSpineNode=this.getChildAt(1),this.m_bgSpindeNode=this.getChildAt(2),this.m_txtMatchTitle=this.getChildAt(3),this.m_players=this.getChildAt(4),this.m_btnMatchContinue=this.getChildAt(5),this.m_gContent=this.getChildAt(6),this.m_compFingerTouch=this.getChildAt(7),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://x8xelpmfnx3c2y",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameResultUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"3a847imSbJN4pHkW6vbMSrF","GameResultUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameResultUI","MainPanel")},e.prototype.onConstruct=function(){this.m_cGameType=this.getControllerAt(0),this.m_cPlayerNum=this.getControllerAt(1),this.m_cPassAWIinLose=this.getControllerAt(2),this.m_bg=this.getChildAt(0),this.m_resultExt=this.getChildAt(2),this.m_players=this.getChildAt(3),this.m_first_img=this.getChildAt(4),this.m_second_img=this.getChildAt(5),this.m_tuoPaiAniNode=this.getChildAt(6),this.m_btn_back=this.getChildAt(7),this.m_btnBoxRecord=this.getChildAt(8),this.m_btnBoxContinueAgain=this.getChildAt(9),this.m_btnLeave=this.getChildAt(10),this.m_btnChangeTable=this.getChildAt(11),this.m_btnContinue=this.getChildAt(12),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://x8xelpmftlz11r",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameResultUI_PlayerInfos:[function(t,e,n){"use strict";cc._RF.push(e,"3e0cdtlB9NIKpgE22cd2Puv","GameResultUI_PlayerInfos");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameResultUI","PlayerInfos")},e.prototype.onConstruct=function(){this.m_node_3=this.getChildAt(0),this.m_node_4=this.getChildAt(1),this.m_node_1=this.getChildAt(2),this.m_node_2=this.getChildAt(3),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://x8xelpmftlz11q",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameResultUI_PlayerInfo:[function(t,e,n){"use strict";cc._RF.push(e,"40ebdAMP2dNgKkqhs9rg+gX","GameResultUI_PlayerInfo");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameResultUI","PlayerInfo")},e.prototype.onConstruct=function(){this.m_cWinlose=this.getControllerAt(0),this.m_isOwner=this.getControllerAt(1),this.m_isSelf=this.getControllerAt(2),this.m_cRoomType=this.getControllerAt(3),this.m_cBadTrust=this.getControllerAt(4),this.m_headUrl=this.getChildAt(6),this.m_nickname=this.getChildAt(8),this.m_numid=this.getChildAt(12),this.m_first_cnt=this.getChildAt(13),this.m_win_cnt=this.getChildAt(14),this.m_totalScore=this.getChildAt(15),this.m_score=this.getChildAt(16),this.m_score2=this.getChildAt(17)},e.URL="ui://x8xelpmfmwo5e",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameResultUI_Player_Match:[function(t,e,n){"use strict";cc._RF.push(e,"71f18L1PndLdpOBxH5hI8Vi","GameResultUI_Player_Match");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameResultUI","Player_Match")},e.prototype.onConstruct=function(){this.m_cWinlose=this.getControllerAt(0),this.m_isSelf=this.getControllerAt(1),this.m_mainBg=this.getChildAt(0),this.m_titleBg=this.getChildAt(1),this.m_scoreBg=this.getChildAt(2),this.m_matchFirstTitle=this.getChildAt(3),this.m_matchWinTitle=this.getChildAt(4),this.m_matchLoseTitle=this.getChildAt(5),this.m_headUrl=this.getChildAt(6),this.m_imgRank=this.getChildAt(8),this.m_nickname=this.getChildAt(9),this.m_score=this.getChildAt(12),this.m_score2=this.getChildAt(13),this.m_scoreFlag=this.getChildAt(14),this.m_txtFinalTitle=this.getChildAt(15),this.m_matchFinalScore=this.getChildAt(16),this.m_gMatchFinal=this.getChildAt(17)},e.URL="ui://x8xelpmfnx3c30",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameResultUI_Players_Match:[function(t,e,n){"use strict";cc._RF.push(e,"7b359WNvkBP5LGNyFl8k37t","GameResultUI_Players_Match");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameResultUI","Players_Match")},e.prototype.onConstruct=function(){this.m_node_3=this.getChildAt(0),this.m_node_4=this.getChildAt(1),this.m_node_1=this.getChildAt(2),this.m_node_2=this.getChildAt(3),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://x8xelpmfnx3c2z",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameResultUI_sweep_dayingjia:[function(t,e,n){"use strict";cc._RF.push(e,"162e7sgbxBLu66UGNyz/RY5","GameResultUI_sweep_dayingjia");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameResultUI","sweep_dayingjia")},e.prototype.onConstruct=function(){this.m_sweep=this.getTransitionAt(0)},e.URL="ui://x8xelpmfmwo55",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameResultUI:[function(t,e,n){"use strict";cc._RF.push(e,"87fcaz1+D9P44y7XbGqPNia","GameResultUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameResultUI=void 0;var r,s,c,l,u,d,p,h,_,f=t("../../../../Framework/Manager/UIManager"),m=t("../../../../Framework/UI/FadeUI"),g=t("../../../UserInfo/UserInfoModel"),y=t("../GameCommonModel"),I=t("../../../../Framework/UI/BaseUI"),C=t("../PlayerInfoModel"),M=t("../../../Base/Data/DataBfConfig"),v=t("../../GuanDan/Model/GameModel"),E=t("../../GuanDan/GameContinueTable/GameContinueTableUI"),A=t("../../../Base/Module/Room/RoomModel"),P=t("../../../Base/Module/BfAnalytics/BfasManager"),b=t("../../../Base/Module/BfAnalytics/DataPointID"),U=t("../../../Base/Utils/UtilString"),S=t("../../../Base/Utils/UtilCC"),T=t("../../../Base/View/UIHelp"),R=t("../../../Base/Data/DataSpineAni"),w=t("../../../Base/Data/DatazOrder");(function(t){t[t.TYPE_NOT_TP=0]="TYPE_NOT_TP",t[t.TYPE_TP=1]="TYPE_TP",t[t.TYPE_MIX_PASSA=2]="TYPE_MIX_PASSA"})(r||(r={})),function(t){t[t.FOUR=0]="FOUR",t[t.TWO=1]="TWO"}(s||(s={})),function(t){t[t.WIN=0]="WIN",t[t.LOSE=1]="LOSE"}(c||(c={})),function(t){t[t.NOT_OWNER=0]="NOT_OWNER",t[t.OWNER=1]="OWNER"}(l||(l={})),function(t){t[t.NOT_SELF=0]="NOT_SELF",t[t.IS_SELF=1]="IS_SELF"}(u||(u={})),function(t){t[t.WIN_TYPE=0]="WIN_TYPE",t[t.LOSE_TYPE=1]="LOSE_TYPE"}(d||(d={})),function(t){t[t.BOX_ROOM=0]="BOX_ROOM",t[t.MIX_PASSA=1]="MIX_PASSA"}(p||(p={})),function(t){t[t.NOT_TRUST=0]="NOT_TRUST",t[t.BAD_TRUST=1]="BAD_TRUST"}(h||(h={})),function(t){t[t.LOSE=0]="LOSE",t[t.WIN=1]="WIN"}(_||(_={}));var D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._playerNums=0,e._players=[],e._isMixPassARoom=!1,e}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e,"willShowLoading",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return I.UIType.Window},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sortingOrder",{get:function(){return w.DataZOrder.GameResult},enumerable:!1,configurable:!0}),e.prototype.setBackCallBack=function(t){this._backCallFunc=t},e.prototype.setBoxRecordBackCallBack=function(t){this._boxRecordCallFunc=t},e.prototype.setMixPassALeaveCallback=function(t){this._mixPassALeaveFunc=t},e.prototype.setMixPassAChangeTableCallback=function(t){this._mixPassAChangeTableFunc=t},e.prototype.setMixPassAContinueFunc=function(t){this._mixPassAContinueFunc=t},e.prototype.onLoad=function(){this.initData(),this.initListener();var t=0;this._isMixPassARoom&&(t=1),P.BfasManager.instance.sendEvt(b.BoxRoomPointID.SHOW_BIG_RESULT,{type:t})},e.prototype.initData=function(){var t;this._gameID=null===(t=A.RoomModel.instance.getClubConfig(y.GameCommonModel.instance.getClubid()))||void 0===t?void 0:t.gameID,this._isMixPassARoom=y.GameCommonModel.instance.isMixPassARoom(),this._playerNums=C.PlayerInfoModel.instance.getNowGamePlayer();for(var e=0;e<this._playerNums;++e)this._players.push(this.newPlayerResultInfo())},e.prototype.initListener=function(){this.view.m_btn_back.onClick(this.onBtnBack,this),this.view.m_btnBoxRecord.onClick(this.onBtnBoxRecord,this),this.view.m_btnBoxContinueAgain.onClick(this.onBtnBoxConinueAgain,this),this.view.m_btnLeave.onClick(this.onBtnLeave,this),this.view.m_btnChangeTable.onClick(this.onBtnChangeTable,this),this.view.m_btnContinue.onClick(this.onBtnContinue,this)},e.prototype.newPlayerResultInfo=function(){return{winFlag:0,nickname:"",numid:0,winLost:0,firstCnt:0,winCnt:0,isCreator:0,isSelf:0,headurl:"",totalScore:0,isPassAOver:!1,trustState:0,isWiner:!1,serverSeat:-1}},e.prototype.initBoxResultUI=function(t,e){this.view.m_cGameType.selectedIndex=this._gameID===M.GameIDInfo.TP_GD.id?r.TYPE_TP:r.TYPE_NOT_TP,this.view.m_btnBoxContinueAgain.enabled=!e,this.updatePlayerInfoWithBoxRoom(t),this.updateTwoPlayerNumsBg();var n=v.GameModel.instance.getGameDataByTeam(v.GameTeamEnum.TEAM_ONE),o=v.GameModel.instance.getGameDataByTeam(v.GameTeamEnum.TEAM_TWO),a=Math.max(n.level,o.level),i=Math.min(n.level,o.level),s=this._gameID!==M.GameIDInfo.TTZ_GD.id;if(this.view.m_second_img.node.opacity=s?255:0,!s&&(this.view.m_first_img.visible=!1),s){this.view.m_second_img.m_winType.selectedIndex=c.LOSE;var l="\u7ea7"+U.UtilString.convertToStrCardNum(i);if(this.view.m_second_img.m_str_text.text=l,this.view.m_second_img.m_str_text2.text=l,this._gameID===M.GameIDInfo.TP_GD.id&&v.GameModel.instance.getPassA())this.view.m_first_img.visible=!1,this.playTuoPaiPassASpineAni();else{this.view.m_first_img.visible=!0,this.view.m_first_img.scaleX=0,this.view.m_first_img.m_winType.selectedIndex=c.WIN;var u=(!e&&v.GameModel.instance.getPassA()&&this._gameID!==M.GameIDInfo.ERREN_GD.id?"\u8fc7":"\u7ea7")+U.UtilString.convertToStrCardNum(a);this.view.m_first_img.m_str_text.text=u,this.view.m_first_img.m_str_text2.text=u}}this.refreshResultUI(),this.playResultExtAnimation()},e.prototype.updatePlayerInfoWithBoxRoom=function(t){for(var e=!1,n=0;n<t.score.length;++n)0!==t.score[n]&&(e=!0);for(n=0;n<this._playerNums;++n){var o=C.PlayerInfoModel.instance.serverToLocal(n),a=C.PlayerInfoModel.instance.getTempPlayerByLocalSeat(o);if(a||(a=C.PlayerInfoModel.instance.getPlayerByLocalSeat(o)),a)if(this._players[n].firstCnt=t.rankOne[n],this._players[n].isCreator=a.numid===y.GameCommonModel.instance.getBoxCreator()?l.OWNER:l.NOT_OWNER,this._players[n].isSelf=a.numid===g.UserInfoModel.instance.userInfo.numID?u.IS_SELF:u.NOT_SELF,this._players[n].nickname=T.UIHelp.formatNicknameL(a.nickname,8),this._players[n].numid=a.numid,this._players[n].winCnt=t.winNums[n],this._players[n].winLost=t.score[n],this._players[n].headurl=C.PlayerInfoModel.instance.getHead(a.numid),e)this._players[n].winFlag=t.score[n]>0?1:0;else{var i=!1;o===C.LocalSeatEnum.SELF?i=!0:o===C.LocalSeatEnum.PARTNER&&C.PlayerInfoModel.instance.getNowGamePlayer()===C.MAX_PLAYER&&(i=!0),this._players[n].winFlag=i?1:0}}this.sortPlayer()},e.prototype.updateTwoPlayerNumsBg=function(){this._playerNums===C.ER_CNT&&(this.view.m_players.m_node_1.visible=!1,this.view.m_players.m_node_4.visible=!1,this.view.m_cPlayerNum.selectedIndex=s.TWO)},e.prototype.sortPlayer=function(){this._players.sort(function(t,e){return t.winFlag===e.winFlag?e.isCreator-t.isCreator:e.winFlag-t.winFlag})},e.prototype.initPassAReusltUI=function(t){this.view.m_cGameType.selectedIndex=r.TYPE_MIX_PASSA;var e=C.PlayerInfoModel.instance.getSelfSeat();this.view.m_cPassAWIinLose.selectedIndex=t.isWiner[e]?_.WIN:_.LOSE,this.updatePlayerInfoWithMixPassA(t),this.updateTwoPlayerNumsBg(),this.updateLevelUI(),this.refreshResultUI()},e.prototype.updatePlayerInfoWithMixPassA=function(t){for(var e=0;e<this._playerNums;++e){var n=C.PlayerInfoModel.instance.serverToLocal(e),o=C.PlayerInfoModel.instance.getTempPlayerByLocalSeat(n);o||(o=C.PlayerInfoModel.instance.getPlayerByLocalSeat(n)),o&&(this._players[e].isSelf=o.numid===g.UserInfoModel.instance.userInfo.numID?u.IS_SELF:u.NOT_SELF,this._players[e].nickname=T.UIHelp.formatNicknameL(o.nickname,8),this._players[e].numid=o.numid,this._players[e].headurl=C.PlayerInfoModel.instance.getHead(o.numid),this._players[e].winLost=t.winLost[e],this._players[e].isWiner=t.isWiner[e],this._players[e].isPassAOver=t.isPassAOver,this._players[e].trustState=t.trustState[e],this._players[e].totalScore=t.totalScore[e],this._players[e].winFlag=t.isWiner[e]?1:0,this._players[e].serverSeat=e)}this.sortPlayer()},e.prototype.playTuoPaiPassASpineAni=function(){this.view.m_tuoPaiAniNode.node.removeAllChildren(),S.UtilCC.instantiatePrefab(R.DataSpineAniPath.ANI_RESULT_TUOPAI,function(t){t.setPosition(cc.v2(0,0)),t.getComponent(sp.Skeleton).setAnimation(0,"JiA",!1)},this.view.m_tuoPaiAniNode.node)},e.prototype.updateLevelUI=function(){var t=this._players[0],e=this._players[2],n=v.GameModel.instance.getGameData(C.PlayerInfoModel.instance.serverToLocal(t.serverSeat)),o=v.GameModel.instance.getGameData(C.PlayerInfoModel.instance.serverToLocal(e.serverSeat)),a=n.level,i=o.level;this.view.m_first_img.visible=!0,this.view.m_first_img.scaleX=0,this.view.m_first_img.m_winType.selectedIndex=c.WIN;var r=(t.isPassAOver?"\u8fc7":"\u7ea7")+U.UtilString.convertToStrCardNum(a);this.view.m_first_img.m_str_text.text=r,this.view.m_first_img.m_str_text2.text=r,this.view.m_second_img.m_winType.selectedIndex=c.LOSE;var s="\u7ea7"+U.UtilString.convertToStrCardNum(i);this.view.m_second_img.m_str_text.text=s,this.view.m_second_img.m_str_text2.text=s},e.prototype.refreshResultUI=function(){for(var t=0;t<this._players.length;++t){var e=this.getNode(t+1,this._playerNums);e.m_isSelf.selectedIndex=this._players[t].isSelf,e.m_nickname.text=this._players[t].nickname,e.m_headUrl.url=C.PlayerInfoModel.instance.getHead(this._players[t].numid),this._isMixPassARoom?(e.m_cRoomType.selectedIndex=p.MIX_PASSA,e.m_totalScore.text="\u79ef\u5206\uff1a"+this._players[t].totalScore,e.m_cBadTrust.selectedIndex=1===this._players[t].trustState?h.BAD_TRUST:h.NOT_TRUST,e.m_score.x=e.m_score.x+16,e.m_score2.x=e.m_score2.x+16):(e.m_cRoomType.selectedIndex=p.BOX_ROOM,e.m_isOwner.selectedIndex=l.NOT_OWNER,e.m_numid.text=this._players[t].numid.toString(),e.m_first_cnt.text="\u5934\u6e38\u6b21\u6570\uff1a"+this._players[t].firstCnt,e.m_win_cnt.text="\u80dc\u5229\u6b21\u6570\uff1a"+this._players[t].winCnt),this._players[t].winLost>0?(e.m_score.text="+"+this._players[t].winLost.toString(),e.m_score2.text="+"+this._players[t].winLost.toString()):(e.m_score.text=this._players[t].winLost.toString(),e.m_score2.text=this._players[t].winLost.toString()),e.m_cWinlose.selectedIndex=1===this._players[t].winFlag?d.WIN_TYPE:d.LOSE_TYPE}},e.prototype.getNode=function(t,e){return e===C.MAX_PLAYER?this.view.m_players["m_node_"+t]:e===C.ER_CNT?this.view.m_players["m_node_"+(t+1)]:void 0},e.prototype.playResultExtAnimation=function(){this.view.m_resultExt.node.removeAllChildren(),S.UtilCC.instantiatePrefab(R.DataSpineAniPath.ANI_RESULT,function(t){t.setPosition(cc.v2(0,0)),t.getComponent(sp.Skeleton).setAnimation(0,"ani4_js_hy_loop",!0)},this.view.m_resultExt.node)},e.prototype.onBtnBack=function(){var t=this;this._isMixPassARoom?this.onExitClick():y.GameCommonModel.instance.reqLeaveBox(function(e){console.log("onBtnBack:",e),t.onExitClick(),t._backCallFunc&&t._backCallFunc()})},e.prototype.onBtnBoxRecord=function(){this._boxRecordCallFunc&&this._boxRecordCallFunc()},e.prototype.onBtnBoxConinueAgain=function(){f.UIManager.instance.open(E.GameContinueTableUI).then(function(t){t.initLayer(!1)})},e.prototype.onBtnLeave=function(){console.log("onBtnLeave"),this._mixPassALeaveFunc&&this._mixPassALeaveFunc()},e.prototype.onBtnChangeTable=function(){console.log("onBtnChangeTable"),this.onExitClick(),this._mixPassAChangeTableFunc&&this._mixPassAChangeTableFunc()},e.prototype.onBtnContinue=function(){console.log("onBtnContinue"),this.onExitClick(),this._mixPassAContinueFunc&&this._mixPassAContinueFunc()},e.prototype.onExitClick=function(){t.prototype.onExitClick.call(this)},i([jsClass],e)}(m.FadeUI);n.GameResultUI=D,cc._RF.pop()},{"../../../../Framework/Manager/UIManager":"UIManager","../../../../Framework/UI/BaseUI":"BaseUI","../../../../Framework/UI/FadeUI":"FadeUI","../../../Base/Data/DataBfConfig":"DataBfConfig","../../../Base/Data/DataSpineAni":"DataSpineAni","../../../Base/Data/DatazOrder":"DatazOrder","../../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../../Base/Module/Room/RoomModel":"RoomModel","../../../Base/Utils/UtilCC":"UtilCC","../../../Base/Utils/UtilString":"UtilString","../../../Base/View/UIHelp":"UIHelp","../../../UserInfo/UserInfoModel":"UserInfoModel","../../GuanDan/GameContinueTable/GameContinueTableUI":"GameContinueTableUI","../../GuanDan/Model/GameModel":"GameModel","../GameCommonModel":"GameCommonModel","../PlayerInfoModel":"PlayerInfoModel"}],GameRoot:[function(t,e,n){"use strict";cc._RF.push(e,"b73a9sc20xLvKkce6dLj6WL","GameRoot");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameRoot=void 0;var r=t("./BaseRoot"),s=t("./ManagerRoot"),c=t("./ModelRoot"),l=t("./ProxyRoot"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return this.sGameMain},enumerable:!1,configurable:!0}),e.prototype.onAwake=function(){n.sGameMain=this,this.add(s.ManagerRoot),this.add(c.ModelRoot),this.add(l.ProxyRoot)},n=i([jsClass],e)}(r.Root);n.GameRoot=u,cc._RF.pop()},{"./BaseRoot":"BaseRoot","./ManagerRoot":"ManagerRoot","./ModelRoot":"ModelRoot","./ProxyRoot":"ProxyRoot"}],GameSceneFreeTeamUI:[function(t,e,n){"use strict";cc._RF.push(e,"1d917wpHshNg7K5G33amvib","GameSceneFreeTeamUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameSceneFreeTeamUI=void 0;var r=t("../../../Framework/Manager/UIManager"),s=t("./Model/GameModel"),c=t("../../../Framework/Manager/EventManager"),l=t("../Common/GameCommonModel"),u=t("./GameEvent"),d=t("../Common/PlayerInfoModel"),p=t("../Common/GameMatching/GameMatchingForNormalUI"),h=t("../../../Framework/Manager/CoroutineManager"),_=t("../../UserInfo/UserInfoModel"),f=t("../../Base/View/Common/DialogUI"),m=t("./GameTrustUI"),g=t("../../Setting/SettingModel"),y=t("../../Base/Data/DataEvent"),I=t("../Common/GameControlEnum"),C=t("./GameSceneUI"),M=t("../../Base/Utils/UtilString"),v=t("../../Base/View/UIHelp"),E=t("../../../Framework/Manager/AudioManager"),A=t("../../Base/Data/DataSound"),P=t("../../Base/Utils/UtilCC"),b=t("../../Base/Data/DataSpineAni"),U=t("../../Base/Module/BfAnalytics/BfasManager"),S=t("../../Base/Module/BfAnalytics/DataPointID"),T=t("./Proxy/GameProxy"),R=t("../Common/GameChatUI/GameChatUI"),w=t("../Common/GameChatUI/GameChatModel"),D=t("../../Base/Data/DataLocalStorageKey"),O=t("../../FriendTeam/FriendTeamModel"),L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._inQueueStartTime=0,e._nextGameStartTime=0,e._countTimeCorout=null,e}return a(e,t),e.getPkgName=function(){return"GameSceneUI"},e.prototype.initListener=function(){t.prototype.initListener.call(this),c.EventManager.instance.on(u.GameEvent.PARNTER_GAME_EXIT,this,this.backToLobby)},e.prototype.stopCoroutine=function(){},e.prototype.clearUI=function(){t.prototype.clearUI.call(this)},e.prototype.onBtnHead_0=function(){console.log("onBtnHead_0")},e.prototype.onBtnHead_1=function(){console.log("onBtnHead_1")},e.prototype.onBtnHead_2=function(){console.log("onBtnHead_2")},e.prototype.onBtnHead_3=function(){console.log("onBtnHead_3")},e.prototype.onBtnChat=function(){s.GameModel.instance.isGuideModel()||(this.view.m_bottom.m_groupChatHint.visible&&(this.view.m_bottom.m_groupChatHint.visible=!1),r.UIManager.instance.open(R.GameChatUI).then(function(t){t.init(w.ChatType.TEAM)}))},e.prototype.onSendProp=function(t){console.log("onSendProp:",t)},e.prototype.initFriendFreeTeamUI=function(){if(this.view.m_roomType.selectedIndex=I.CGameSceneRoomTypeEnum.FREE_FRIENDTEAM,this.view.m_head_0.m_cRoomType.selectedIndex=I.COhterHeadRoomTypeEnum.PLAZA_FREIENDTEAM_NEW,this.view.m_head_1.m_cRoomtype.selectedIndex=I.CSelfHeadRoomTypeEnum.PLAZA_FREIENDTEAM_FREE,this.view.m_head_2.m_cRoomType.selectedIndex=I.COhterHeadRoomTypeEnum.PLAZA_FREIENDTEAM_NEW,this.view.m_head_3.m_cRoomType.selectedIndex=I.COhterHeadRoomTypeEnum.PLAZA_FREIENDTEAM_NEW,this.view.m_right_top.m_cRoomType.selectedIndex=I.CTopRightRoomTypeEnum.FREE_FRIENDTEAM,0==D.DataLocalStorage.getChatGuidePopCount()){D.DataLocalStorage.addChatGuidePopCount(),this.view.m_bottom.m_btnChatHint.onClick(this.onBtnChat,this);var t=this.view.m_bottom.m_groupChatHint;cc.tween(t.node).delay(5).call(function(){t.visible=!0}).delay(3).call(function(){t.visible=!1}).start()}},e.prototype.showAdaptCallMultAni=function(t){var e=this;if(this._countTimeCorout&&h.CoroutineManager.instance.stopCo(this._countTimeCorout),this.view.m_callMultAdaptAni.visible=t,t){var n=4;this.view.m_callMultAdaptAni.m_countTime.text=n.toString(),this._countTimeCorout=h.CoroutineManager.instance.loop(1,function(){if(--n<0)return e.view.m_callMultAdaptAni.visible=!1,!0;e.view.m_callMultAdaptAni.m_countTime.text=n.toString()},this)}},e.prototype.showServicePayAnimation=function(t){console.log("showServicePayAnimation:",t)},e.prototype.onNotifyCallMultData=function(t){console.log("onNotifyCallMultData:",t);var e=d.PlayerInfoModel.instance.serverToLocal(t.seat);if(s.GameModel.instance.getGameStep()===s.GameStepEnum.GAME_STEP_CALL_MULT&&d.LocalSeatEnum.SELF===e&&!s.GameModel.instance.checkHasCallMult(t.callMult)){var n=Math.randomRangeInt(0,2);cc.tween(this.view.node).delay(n).call(function(){var t=d.PlayerInfoModel.instance.getSelfSeat(),e=1===Math.randomRangeInt(0,2)?s.CallMultNumEnum.MULT_CALL:s.CallMultNumEnum.NOT_CALL;T.GameProxy.instance.sendCallMult(t,e)}).start()}},e.prototype.onPlayerStateChange=function(t){var e=this;console.log("onPlayerStateChange:",t);var n=d.PlayerInfoModel.instance.getLocalSeatByNumid(t.numid),o=t.numid===_.UserInfoModel.instance.userInfo.numID;if(o){var a=n.data.playstate;a===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_ENTERED?o?(r.UIManager.instance.isExist(p.GameMatchingForNormalUI)&&r.UIManager.instance.close(p.GameMatchingForNormalUI),this._reqLeaveFlag||(this.view.m_button_layer.m_buttonType.selectedIndex=s.CButtonLayerTypeEnum.READY)):this.showImg(n.lseat,!1,I.CImgTypeEnum.HIDE):a===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_READYED?(o&&(r.UIManager.instance.isExist(p.GameMatchingForNormalUI)&&r.UIManager.instance.close(p.GameMatchingForNormalUI),this.view.m_button_layer.m_buttonType.selectedIndex=s.CButtonLayerTypeEnum.NONE,this.view.m_resultBg.selectedIndex=I.ResultBgControlTypeEnum.HIDE),this.showImg(d.LocalSeatEnum.SELF,!0,I.CImgTypeEnum.SHOW_READY),l.GameCommonModel.instance.isFriendTeamLeader()||(this.view.m_waitLeaderReady.visible=!0)):a===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_PLAYING?(this.reportPointGameEndToStartGame(),o&&(r.UIManager.instance.isExist(p.GameMatchingForNormalUI)&&r.UIManager.instance.close(p.GameMatchingForNormalUI),this.view.m_resultBg.selectedIndex=I.ResultBgControlTypeEnum.HIDE,this.view.m_button_layer.m_buttonType.selectedIndex=s.CButtonLayerTypeEnum.NONE)):a===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_IN_QUEUE?(this._inQueueStartTime=Date.now(),this.reportPointGameEndToInQueue(),o&&(this.clearUI(),!r.UIManager.instance.isExist(p.GameMatchingForNormalUI)&&r.UIManager.instance.open(p.GameMatchingForNormalUI).then(function(){e.view.m_button_layer.m_buttonType.selectedIndex=s.CButtonLayerTypeEnum.NONE}),this.showPlayerHead(d.MAX_PLAYER,!1),this.hideCallMultHeadTag(d.MAX_PLAYER),this.view.m_resultBg.selectedIndex=I.ResultBgControlTypeEnum.HIDE),this.showImg(d.LocalSeatEnum.SELF,!1,I.CImgTypeEnum.HIDE),this.showImg(d.LocalSeatEnum.PARTNER,!1,I.CImgTypeEnum.HIDE)):a===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_IN_ROOM||a===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_STARTED&&(this._inQueueStartTime=0,0===this._nextGameStartTime&&(this._nextGameStartTime=Date.now())),this.isGamePlay()&&g.SettingModel.instance.data.isLiPaiHeng?this.view.m_button_layer.y=this._buttonLayer_y+120:this.view.m_button_layer.y=this._buttonLayer_y}this.onPlayerGoldChange(t.numid)},e.prototype.onPlayerGoldChange=function(t){var e=d.PlayerInfoModel.instance.getLocalSeatByNumid(t);if(e.lseat===d.LocalSeatEnum.ERROR)return t===_.UserInfoModel.instance.userInfo.numID&&e.data&&(e.data.gamegold&&!this.isBoxRoom()&&(this.view.m_head_1.m_score.text=M.UtilString.getCurrencyShortString(e.data.playscore)),e.data.headurl&&(this.view.m_head_1.m_head.m_name.m_head.url=d.PlayerInfoModel.instance.getHead(e.data.numid)),e.data.playstate===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_READYED&&(this.showImg(e.lseat,!0,I.CImgTypeEnum.SHOW_READY),this.view.m_waitLeaderReady.visible=!0)),void this.updateParnterHeadUI(d.PlayerInfoModel.instance.getLocalSeatByNumid(l.GameCommonModel.instance.parnterId));var n=this.view["m_head_"+e.lseat];s.GameModel.instance.isGuideModel()?(n.m_name.text=e.lseat===d.LocalSeatEnum.PARTNER?"\u4f60\u7684\u961f\u53cb":"\u4f60\u7684\u5bf9\u624b",n.m_score.text=""):(n.m_name.text=v.UIHelp.formatNicknameL(e.data.nickname,8),this.isBoxRoom()||(n.m_score.text=M.UtilString.getCurrencyShortString(e.data.playscore))),n.visible=!0,n.m_head.m_name.m_head.url=d.PlayerInfoModel.instance.getHead(e.data.numid),this.showSit(e.lseat,!1),e.data.playstate===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_READYED&&(this.showImg(e.lseat,!0,I.CImgTypeEnum.SHOW_READY),l.GameCommonModel.instance.isFriendTeamPartner(e.data.numid)&&(this.view.m_waitLeaderReady.visible=!1))},e.prototype.updateParnterHeadUI=function(t){if(t.data&&t.data.nickname){var e=this.view.m_head_3;e.visible=!0,e.m_head.m_name.m_head.url=d.PlayerInfoModel.instance.getHead(t.data.numid),e.m_name.text=v.UIHelp.formatNicknameL(t.data.nickname,8),e.m_score.text=""+t.data.gamegold,t.data.playstate===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_READYED?this.showImg(d.LocalSeatEnum.PARTNER,!0,I.CImgTypeEnum.SHOW_READY):this.showImg(d.LocalSeatEnum.PARTNER,!1,I.CImgTypeEnum.HIDE)}},e.prototype.onShowResult=function(t){if(!this.isBoxRoom()){if(0===t.bWinner.length)for(var e=0;e<t.nWinLost.length;e++)t.bWinner[e]=t.nWinLost[e]>=0;this._resultData=t,this.goFriendTeamResult()}},e.prototype.goFriendTeamResult=function(){var t=d.PlayerInfoModel.instance.getPlayerByNumid(_.UserInfoModel.instance.userInfo.numID);t&&t.playstate!==club.client.game.PlayState.PLAYSTATES.PLAYSTATE_IN_QUEUE&&t.playstate!==club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_PLAYING&&(this.view.m_resultBg.selectedIndex=I.ResultBgControlTypeEnum.SHOW),t&&t.playstate!==club.client.game.PlayState.PLAYSTATES.PLAYSTATE_IN_QUEUE&&t.playstate!==club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_PLAYING&&this.continueGameShowReadyBtn(),this.showFriendTeamResultAnimation()},e.prototype.continueGameShowReadyBtn=function(){this.view.m_button_layer.m_buttonType.selectedIndex=s.CButtonLayerTypeEnum.FRIENDTEAM_READY,l.GameCommonModel.instance.isFriendTeamLeader()?this.view.m_button_layer.m_btn_zb.text="\u7ee7\u7eed":this.view.m_button_layer.m_btn_zb.text="\u51c6\u5907"},e.prototype.showFriendTeamResultAnimation=function(){var t=this,e=d.PlayerInfoModel.instance.getSelfSeat(),n=d.PlayerInfoModel.instance.getPartnerSeat(e),o="",a="",i="",r=this._resultData.bWinner,s=this._resultData.playRank,c=this._resultData.passLevel,l=this._resultData.upLevel;if(r[e]){var u=1==s[e]&&2==s[n]||2==s[e]&&1==s[n]?"\u53cc\u4e0b":"\u5355\u4e0b";i=c>0?"\u8fc7A\u6210\u529f":0==l?"\u672a\u6210\u529f\u8fc7A":u+"\u5347"+l+"\u7ea7",o="ani1_js_sl_ts",a="ui://GameSceneUI/fnt_xiaojiesuan_win",E.AudioManager.instance.playEffect(A.DataSound.getGameSoundUrl(A.GameSoundTypeEnum.EFFECT_WIN_ACT))}else u=3==s[e]&&4==s[n]||4==s[e]&&3==s[n]?"\u53cc\u4e0b":"\u5355\u4e0b",i=c>0?"\u5bf9\u65b9\u8fc7A":0==l?"\u672a\u6210\u529f\u8fc7A":u+"\u5347"+l+"\u7ea7",o="ani2_js_sb_ts",a="ui://GameSceneUI/fnt_xiaojiesuan_lose",E.AudioManager.instance.playEffect(A.DataSound.getGameSoundUrl(A.GameSoundTypeEnum.EFFECT_LOSE_ACT));P.UtilCC.instantiatePrefab(b.DataSpineAniPath.ANI_RESULT,function(e){var n=e.getComponent(sp.Skeleton);e.setPosition(cc.v2(0,0)),n.setAnimation(0,o,!1);var r=e.getChildByName("txtSJ").getComponent(cc.Label),s=fgui.UIPackage.getItemByURL(a),c=s.owner.getItemAsset(s);r.font=c,r.string=i;var l=0;n.setEventListener(function(t,e){"zi_sj"===e.data.name&&(1==++l?(r.node.active=!0,r.node.stopAllActions(),r.node.runAction(cc.fadeIn(.133))):2===l&&(r.node.stopAllActions(),r.node.runAction(cc.fadeOut(.167))))}),n.setCompleteListener(function(e){(e.animation?e.animation.name:"")===o&&t.view.m_result_ani.node.removeAllChildren()})},this.view.m_result_ani.node)},e.prototype.onBtnReady=function(){!l.GameCommonModel.instance.isFriendTeamLeader()||l.GameCommonModel.instance.isFriendReady()?this._roomConfig&&this._roomConfig.subID?this.playerClickReady():this._roomConfig||this.noNetPopHintUI():c.EventManager.instance.emit(y.DataEvent.ToastData,"\u7b49\u5f85\u961f\u53cb\u51c6\u5907~")},e.prototype.playerClickReady=function(){l.GameCommonModel.instance.reqPlayGame()},e.prototype.onBtnChangeSeat=function(){},e.prototype.noNetPopHintUI=function(){var t=this;r.UIManager.instance.open(f.DialogUI).then(function(e){e.initConfirm({content:"\u60a8\u5f53\u524d\u7f51\u7edc\u73af\u5883\u5f02\u5e38\uff0c\u8bf7\u9000\u51fa\u6e38\u620f\u623f\u95f4\u540e\u91cd\u65b0\u5c1d\u8bd5\uff01"}),e.confirmAction=function(){t.reqLeaveGame()},e.closeAction=function(){t.reqLeaveGame()}})},e.prototype.reqChangeTable=function(){console.log("onBtnChangeSeat")},e.prototype.onPlayerLeave=function(t){var e=d.PlayerInfoModel.instance.getPlayerByNumid(t.numID);if(null!==e){var n=d.PlayerInfoModel.instance.serverToLocal(e.seatid);if(n!==d.LocalSeatEnum.ERROR){if(t.numID===_.UserInfoModel.instance.userInfo.numID?(d.PlayerInfoModel.instance.clearOtherPlayerFriendTeamChangeTable(),n=d.MAX_PLAYER):l.GameCommonModel.instance.isFriendTeamPartner(t.numID)||(d.PlayerInfoModel.instance.playerLeaveClearData(t.numID),this.showPlayerHead(n,!1),this.hideCallMultHeadTag(n)),this.dealBoxRoomButton(),n===d.MAX_PLAYER)for(var o=0;o<d.MAX_PLAYER;++o)o!==d.LocalSeatEnum.LEFT&&o!==d.LocalSeatEnum.RIGHT||(this.showImg(o,!1,I.CImgTypeEnum.HIDE),this.showPlayerHead(o,!1),this.hideCallMultHeadTag(o));this.showSit(n,!0),this.killClock(n),this.showSmallKongGong(n,!1),this._isPlayerLeave=!0,this.resetCardLevel(),r.UIManager.instance.isExist(m.GameTrustUI)&&r.UIManager.instance.close(m.GameTrustUI),this.showFirstSecondAnimation(d.MAX_PLAYER,!1)}}},e.prototype.showPlayerHead=function(t,e){if(t===d.MAX_PLAYER)for(var n=0;n<d.MAX_PLAYER;++n)this.showPlayerHead(n,e);else{if(!e&&t===d.LocalSeatEnum.SELF)return;this.view["m_head_"+t].visible=e}},e.prototype.backToLobby=function(e){e===l.LeaveResonEnum.CANCEL_INQUEUE&&s.GameModel.instance.isHadPlayGame()&&(O.FriendTeamModel.instance.canPopRecord=!0),r.UIManager.instance.isExist(f.DialogUI)&&r.UIManager.instance.close(f.DialogUI),t.prototype.backToLobby.call(this)},e.prototype.onBtnExit=function(){var t=this;console.log("onBtnExit"),this.toggleMenuPanel(!1),this.isGamePlay()?r.UIManager.instance.open(f.DialogUI).then(function(e){e.initConfirmCancelClose({content:"\u5f3a\u884c\u79bb\u5f00\u89c6\u4f5c\u6258\u7ba1\uff0c\u4f1a\u6258\u7ba1\u81f3\u6e38\u620f\u7ed3\u675f\uff0c\u786e\u5b9a\u8981\u9000\u51fa\u5417\uff1f"}),e.confirmAction=function(){t.reqLeaveGame()}}):(s.GameModel.instance.isHadPlayGame()&&(O.FriendTeamModel.instance.canPopRecord=!0),this.reqLeaveGame())},e.prototype.reqLeaveGame=function(e,n){t.prototype.reqLeaveGame.call(this,e,n),this.reportPointInQueue()},e.prototype.onGameStart=function(){t.prototype.onGameStart.call(this),this._nextGameStartTime=0,this.reportPointInQueueToStartGame()},e.prototype.reportPointInQueue=function(){var t=d.PlayerInfoModel.instance.getLocalSeatByNumid(_.UserInfoModel.instance.userInfo.numID);if(t&&t.data&&t.data.playstate===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_IN_QUEUE){var e=Object.assign(O.FriendTeamModel.instance.bfasParamUserType,O.FriendTeamModel.instance.bfasTeamIdNSubId);l.GameCommonModel.instance.isFriendTeamLeader()?U.BfasManager.instance.sendEvt(S.FriendMixTeamPointID.LEADER_CANCEL_MATCH,e):U.BfasManager.instance.sendEvt(S.FriendMixTeamPointID.TEAMMATE_CANCEL_MATCH,e)}},e.prototype.reportPointInQueueToStartGame=function(){if(this._roomConfig&&this._roomConfig.subID){var t=this.getPointParam(),e=Date.now()-this._inQueueStartTime;0!==this._inQueueStartTime&&(t.time=Math.floor(e/100)/10,U.BfasManager.instance.sendEvt(S.FriendMixTeamPointID.IN_QUEUE_NEED_TIME,Object.assign(t,O.FriendTeamModel.instance.bfasParamUserType)))}},e.prototype.reportPointGameEndToInQueue=function(){if(this._roomConfig&&this._roomConfig.subID){var t=this.getPointParam(),e=Date.now()-this._nextGameStartTime;0!==this._nextGameStartTime&&(this._nextGameStartTime=0,t.time=Math.floor(e/100)/10,U.BfasManager.instance.sendEvt(S.FriendMixTeamPointID.CONTINUE_NEXT_ROUND_TIME_CHANGE_TABLE,Object.assign(t,O.FriendTeamModel.instance.bfasParamUserType)))}},e.prototype.reportPointGameEndToStartGame=function(){if(this._roomConfig&&this._roomConfig.subID){var t=this.getPointParam(),e=Date.now()-this._nextGameStartTime;0!==this._nextGameStartTime&&(t.time=Math.floor(e/100)/10,U.BfasManager.instance.sendEvt(S.FriendMixTeamPointID.CONTINUE_NEXT_ROUND_TIME,Object.assign(t,O.FriendTeamModel.instance.bfasParamUserType)))}},e.prototype.getPointParam=function(){return this._roomConfig&&this._roomConfig.subID?{subID:this._roomConfig.subID,gameID:this._roomConfig.gameID}:{subID:0,gameID:0}},i([jsClass],e)}(C.GameSceneUI);n.GameSceneFreeTeamUI=L,cc._RF.pop()},{"../../../Framework/Manager/AudioManager":"AudioManager","../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../Base/Data/DataEvent":"DataEvent","../../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../../Base/Data/DataSound":"DataSound","../../Base/Data/DataSpineAni":"DataSpineAni","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../Base/Utils/UtilCC":"UtilCC","../../Base/Utils/UtilString":"UtilString","../../Base/View/Common/DialogUI":"DialogUI","../../Base/View/UIHelp":"UIHelp","../../FriendTeam/FriendTeamModel":"FriendTeamModel","../../Setting/SettingModel":"SettingModel","../../UserInfo/UserInfoModel":"UserInfoModel","../Common/GameChatUI/GameChatModel":"GameChatModel","../Common/GameChatUI/GameChatUI":"GameChatUI","../Common/GameCommonModel":"GameCommonModel","../Common/GameControlEnum":"GameControlEnum","../Common/GameMatching/GameMatchingForNormalUI":"GameMatchingForNormalUI","../Common/PlayerInfoModel":"PlayerInfoModel","./GameEvent":"GameEvent","./GameSceneUI":"GameSceneUI","./GameTrustUI":"GameTrustUI","./Model/GameModel":"GameModel","./Proxy/GameProxy":"GameProxy"}],GameSceneGoldTeamUI:[function(t,e,n){"use strict";cc._RF.push(e,"e28faAlAYtI6qaDN/wHT1hw","GameSceneGoldTeamUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameSceneGoldTeamUI=void 0;var r=t("../../../Framework/Manager/UIManager"),s=t("./Model/GameModel"),c=t("../../../Framework/Manager/EventManager"),l=t("../Common/GameCommonModel"),u=t("./GameEvent"),d=t("../Common/PlayerInfoModel"),p=t("../Common/GameMatching/GameMatchingForNormalUI"),h=t("../../../Framework/Manager/CoroutineManager"),_=t("../../UserInfo/UserInfoModel"),f=t("./Proxy/GameTableProxy"),m=t("../../Base/View/Common/DialogUI"),g=t("./GameTrustUI"),y=t("../Common/GameShopUI/GameShopUI"),I=t("../../Setting/SettingModel"),C=t("../../Base/Data/DataEvent"),M=t("../Common/GameControlEnum"),v=t("./GameSceneUI"),E=t("../../Base/Module/ClubError/ErrorCodeGameConfig"),A=t("../../Base/Module/BfAnalytics/BfasManager"),P=t("../../Base/Module/BfAnalytics/DataPointID"),b=t("../../Base/Utils/UtilString"),U=t("../../Base/View/UIHelp"),S=t("../../FriendTeam/FriendTeamModel"),T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._inQueueStartTime=0,e._nextGameStartTime=0,e}return a(e,t),e.prototype.initListener=function(){t.prototype.initListener.call(this),c.EventManager.instance.on(u.GameEvent.PARNTER_GAME_EXIT,this,this.backToLobby),c.EventManager.instance.on(u.GameEvent.PARNTER_GAME_SHENGCHANG_TIP,this,this.checkShengJiangChangTip),c.EventManager.instance.on(u.GameEvent.PARNTER_CHANGE_TABLE,this,this.changeTableSuccess),c.EventManager.instance.on(u.GameEvent.PARNTER_ENTER_GAME_GOLD_LESS,this,this.goldLessCheckUpOrDown)},e.getPkgName=function(){return"GameSceneUI"},e.prototype.onPlayerStateChange=function(t){var e=this,n=d.PlayerInfoModel.instance.getLocalSeatByNumid(t.numid),o=t.numid===_.UserInfoModel.instance.userInfo.numID;if(o){var a=n.data.playstate;this.hideChangeSeatBtn(a),a===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_ENTERED?o?(r.UIManager.instance.isExist(p.GameMatchingForNormalUI)&&r.UIManager.instance.close(p.GameMatchingForNormalUI),this.isBoxRoom()&&this._nowPan>0?this.view.m_button_layer.m_buttonType.selectedIndex=s.CButtonLayerTypeEnum.TEMP_READY:this._reqLeaveFlag||(this.view.m_button_layer.m_buttonType.selectedIndex=s.CButtonLayerTypeEnum.READY,this.isBoxRoom()&&(this.view.m_button_layer.m_yqType.selectedIndex=M.ButtonLayerYQControlTypeEnum.NOT_MEDIUM,this.view.m_button_layer.m_btn_yq.visible=!0))):this.showImg(n.lseat,!1,M.CImgTypeEnum.HIDE):a===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_READYED?(o&&(r.UIManager.instance.isExist(p.GameMatchingForNormalUI)&&r.UIManager.instance.close(p.GameMatchingForNormalUI),this.view.m_button_layer.m_buttonType.selectedIndex=s.CButtonLayerTypeEnum.NONE,this.view.m_right_top.m_changeSeatType.selectedIndex=M.TopRightChangeSeatControlTypeEnum.CAN_CHANGE,this.view.m_resultBg.selectedIndex=M.ResultBgControlTypeEnum.HIDE),this.showImg(d.LocalSeatEnum.SELF,!0,M.CImgTypeEnum.SHOW_READY)):a===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_PLAYING?(this.reportPointGameEndToStartGame(),o&&(r.UIManager.instance.isExist(p.GameMatchingForNormalUI)&&r.UIManager.instance.close(p.GameMatchingForNormalUI),this.view.m_right_top.m_changeSeatType.selectedIndex=M.TopRightChangeSeatControlTypeEnum.NOT_CAN_CHANGE,this.view.m_resultBg.selectedIndex=M.ResultBgControlTypeEnum.HIDE,this.view.m_button_layer.m_buttonType.selectedIndex=s.CButtonLayerTypeEnum.NONE)):a===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_IN_QUEUE?(this._inQueueStartTime=Date.now(),o&&(!r.UIManager.instance.isExist(p.GameMatchingForNormalUI)&&r.UIManager.instance.open(p.GameMatchingForNormalUI).then(function(){e.view.m_button_layer.m_buttonType.selectedIndex=s.CButtonLayerTypeEnum.NONE}),this.showPlayerHead(d.MAX_PLAYER,!1),this.hideCallMultHeadTag(d.MAX_PLAYER),this.view.m_right_top.m_changeSeatType.selectedIndex=M.TopRightChangeSeatControlTypeEnum.CAN_CHANGE,this.view.m_resultBg.selectedIndex=M.ResultBgControlTypeEnum.HIDE),this.showImg(d.LocalSeatEnum.SELF,!1,M.CImgTypeEnum.HIDE),this.showImg(d.LocalSeatEnum.PARTNER,!1,M.CImgTypeEnum.HIDE),this.reportPointGameEndToInQueue()):a===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_IN_ROOM?this.view.m_right_top.m_changeSeatType.selectedIndex=M.TopRightChangeSeatControlTypeEnum.CAN_CHANGE:a===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_STARTED&&(this.view.m_right_top.m_changeSeatType.selectedIndex=M.TopRightChangeSeatControlTypeEnum.CAN_CHANGE,this._inQueueStartTime=0,0===this._nextGameStartTime&&(this._nextGameStartTime=Date.now())),this.isGamePlay()&&I.SettingModel.instance.data.isLiPaiHeng?this.view.m_button_layer.y=this._buttonLayer_y+120:this.view.m_button_layer.y=this._buttonLayer_y}this.onPlayerGoldChange(t.numid)},e.prototype.hideChangeSeatBtn=function(t){this.view.m_right_top.m_btn_changeseat.enabled=t===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_STARTED||t===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_READYED},e.prototype.onPlayerGoldChange=function(t){var e=d.PlayerInfoModel.instance.getLocalSeatByNumid(t);if(e.lseat===d.LocalSeatEnum.ERROR)return t===_.UserInfoModel.instance.userInfo.numID&&e.data&&(e.data.gamegold&&!this.isBoxRoom()&&(this.view.m_head_1.m_score.text=b.UtilString.getCurrencyShortString(e.data.playscore)),e.data.headurl&&(this.view.m_head_1.m_head.m_name.m_head.url=d.PlayerInfoModel.instance.getHead(e.data.numid)),e.data.playstate===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_READYED&&this.showImg(e.lseat,!0,M.CImgTypeEnum.SHOW_READY)),void this.updateParnterHeadUI(d.PlayerInfoModel.instance.getLocalSeatByNumid(l.GameCommonModel.instance.parnterId));var n=this.view["m_head_"+e.lseat];s.GameModel.instance.isGuideModel()?(n.m_name.text=e.lseat===d.LocalSeatEnum.PARTNER?"\u4f60\u7684\u961f\u53cb":"\u4f60\u7684\u5bf9\u624b",n.m_score.text=""):(n.m_name.text=U.UIHelp.formatNicknameL(e.data.nickname,8),this.isBoxRoom()||(n.m_score.text=b.UtilString.getCurrencyShortString(e.data.playscore))),n.visible=!0,n.m_head.m_name.m_head.url=d.PlayerInfoModel.instance.getHead(e.data.numid),this.showSit(e.lseat,!1),e.data.playstate===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_READYED&&this.showImg(e.lseat,!0,M.CImgTypeEnum.SHOW_READY)},e.prototype.updateParnterHeadUI=function(t){if(t.data&&t.data.nickname){var e=this.view.m_head_3;e.visible=!0,e.m_head.m_name.m_head.url=d.PlayerInfoModel.instance.getHead(t.data.numid),e.m_name.text=U.UIHelp.formatNicknameL(t.data.nickname,8),e.m_score.text=b.UtilString.getCurrencyShortString(t.data.gamegold),t.data.playstate===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_READYED?this.showImg(d.LocalSeatEnum.PARTNER,!0,M.CImgTypeEnum.SHOW_READY):this.showImg(d.LocalSeatEnum.PARTNER,!1,M.CImgTypeEnum.HIDE)}},e.prototype.continueGameShowReadyBtn=function(){l.GameCommonModel.instance.isGoldTeamModel()?l.GameCommonModel.instance.isFriendTeamLeader()?this.view.m_button_layer.m_buttonType.selectedIndex=s.CButtonLayerTypeEnum.TEMP_READY:this.view.m_button_layer.m_buttonType.selectedIndex=s.CButtonLayerTypeEnum.READY:this.view.m_button_layer.m_buttonType.selectedIndex=s.CButtonLayerTypeEnum.TEMP_READY},e.prototype.onBtnReady=function(){var t=this;if(!l.GameCommonModel.instance.isFriendTeamLeader()||l.GameCommonModel.instance.isFriendReady()){if(l.GameCommonModel.instance.isFriendTeamLeader()||!this.parnterNeedJiangChang()){var e=d.PlayerInfoModel.instance.getNowPlayerGold(),n=l.GameCommonModel.instance.getFriendGold(),o=n<e?n:e;this._roomConfig&&this._roomConfig.subID&&s.GameModel.instance.checkPlayerContinueGameFriendTeam(o,e,this._roomConfig.subID)?this.playerClickReady():this._roomConfig||r.UIManager.instance.open(m.DialogUI).then(function(e){e.initConfirm({content:"\u60a8\u5f53\u524d\u7f51\u7edc\u73af\u5883\u5f02\u5e38\uff0c\u8bf7\u9000\u51fa\u6e38\u620f\u623f\u95f4\u540e\u91cd\u65b0\u5c1d\u8bd5\uff01"}),e.confirmAction=function(){t.reqLeaveGame()},e.closeAction=function(){t.reqLeaveGame()}})}}else c.EventManager.instance.emit(C.DataEvent.ToastData,"\u961f\u53cb\u8fd8\u672a\u51c6\u5907!")},e.prototype.playerClickReady=function(){d.PlayerInfoModel.instance.isPlayerStand()?this.onBtnChangeSeat():this.isBoxRoom()?f.GameTableProxy.instance.sendPlayerStart():l.GameCommonModel.instance.reqPlayGame()},e.prototype.onBtnChangeSeat=function(){var t=this,e=d.PlayerInfoModel.instance.getNowPlayerGold();!l.GameCommonModel.instance.isFriendTeamLeader()&&this._roomConfig&&this._roomConfig.subID&&s.GameModel.instance.isFriendTeamNeedUpOrDown(e,e,this._roomConfig.subID).status===s.ShengChangEnum.DOWN?this.showJiangChangTipUI(function(){t._onBtnChangeSeat()}):this._onBtnChangeSeat()},e.prototype.parnterNeedJiangChang=function(){var t=this,e=d.PlayerInfoModel.instance.getNowPlayerGold();if(this._roomConfig&&this._roomConfig.subID){if(s.GameModel.instance.isFriendTeamNeedUpOrDown(e,e,this._roomConfig.subID).status===s.ShengChangEnum.DOWN)return this.showJiangChangTipUI(function(){t.playerClickReady()}),!0}else this._roomConfig||this.noNetPop();return!1},e.prototype.showJiangChangTipUI=function(t){var e="\u60a8\u7684\u91d1\u5e01\u6570\u4f4e\u4e8e\u5f53\u524d\u573a\u6b21\u95e8\u69db,\u786e\u8ba4\u540e\u5c06\u4f1a\u964d\u573a\u6e38\u620f!",n="\u83b7\u53d6\u91d1\u5e01";cc.sys.os===cc.sys.OS_IOS?(n="\u53d6\u6d88",r.UIManager.instance.open(m.DialogUI).then(function(o){o.initConfirmCancelClose({content:e,confirm:"\u786e\u5b9a",cancel:n}),o.cancelAction=function(){},o.confirmAction=function(){t&&t()}})):r.UIManager.instance.open(m.DialogUI).then(function(o){o.initFTConfirmCancelClose({content:e,btnFTConfirm:"\u786e\u5b9a",btnFTCancel:n}),o.cancelAction=function(){cc.sys.os!==cc.sys.OS_IOS&&r.UIManager.instance.open(y.GameShopUI)},o.confirmAction=function(){t&&t()}})},e.prototype._onBtnChangeSeat=function(){var t=this;if(!s.GameModel.instance.isGuideModel()&&!this._changeSeatTouch)if(this._changeSeatTouch=!0,h.CoroutineManager.instance.once(2,function(){t._changeSeatTouch=!1}),this.isGamePlay())c.EventManager.instance.emit(C.DataEvent.ToastData,"\u60a8\u6b63\u5728\u6e38\u620f\u4e2d\uff0c\u65e0\u6cd5\u6362\u684c\uff01",null,!0);else{if(l.GameCommonModel.instance.isFriendTeamLeader()&&!l.GameCommonModel.instance.isFriendReady())return this.isPassLevelPlaza()?void this.dealChangeSeat():void this.reqChangeTable();var e=d.PlayerInfoModel.instance.getNowPlayerGold(),n=l.GameCommonModel.instance.getFriendGold(),o=n<e?n:e;if(l.GameCommonModel.instance.isFriendTeamLeader()||(o=e),this._roomConfig&&this._roomConfig.subID&&s.GameModel.instance.checkPlayerContinueGameFriendTeam(o,e,this._roomConfig.subID)){if(this.isPassLevelPlaza())return void this.dealChangeSeat();this.reqChangeTable()}else this._roomConfig||this.noNetPop()}},e.prototype.goldLessCheckUpOrDown=function(){var t=d.PlayerInfoModel.instance.getNowPlayerGold(),e=l.GameCommonModel.instance.getFriendGold(),n=e<t?e:t;this._roomConfig&&this._roomConfig.subID&&s.GameModel.instance.checkPlayerContinueGameFriendTeam(n,t,this._roomConfig.subID)||this._roomConfig||this.noNetPop()},e.prototype.noNetPop=function(){var t=this;r.UIManager.instance.open(m.DialogUI).then(function(e){e.initConfirm({content:"\u60a8\u5f53\u524d\u7f51\u7edc\u73af\u5883\u5f02\u5e38\uff0c\u8bf7\u9000\u51fa\u6e38\u620f\u623f\u95f4\u540e\u91cd\u65b0\u5c1d\u8bd5\uff01"}),e.confirmAction=function(){t.reqLeaveGame()},e.closeAction=function(){t.reqLeaveGame()}})},e.prototype.reqChangeTable=function(){var t=this;console.log("onBtnChangeSeat"),l.GameCommonModel.instance.reqChangeTable(function(e){0===e?(t.changeTableSuccess(!0),l.GameCommonModel.instance.isFriendTeamLeader()&&!l.GameCommonModel.instance.isFriendReady()&&c.EventManager.instance.emit(C.DataEvent.ToastData,"\u60a8\u7684\u961f\u53cb\u8fd8\u672a\u51c6\u5907\uff0c\u65e0\u6cd5\u5f00\u59cb\u6e38\u620f!")):E.GameErrorCodeEnum.CLUBGAME_E_USER_LOW_ENTERLIMIT===e?(c.EventManager.instance.emit(C.DataEvent.ToastData,"\u73a9\u5bb6\u4f4e\u4e8e\u8fdb\u5165\u623f\u95f4\u7684\u9650\u5236"),c.EventManager.instance.emit(u.GameEvent.PARNTER_ENTER_GAME_GOLD_LESS)):c.EventManager.instance.emit(C.DataEvent.ToastData,"\u6362\u684c\u5931\u8d25 flag_"+e,null,!0)})},e.prototype.changeTableSuccess=function(t){d.PlayerInfoModel.instance.clearOtherPlayerFriendTeamChangeTable();for(var e=0;e<d.MAX_PLAYER;++e)e!==d.LocalSeatEnum.SELF&&e!=d.LocalSeatEnum.PARTNER&&(this.view["m_head_"+e].visible=!1);t||c.EventManager.instance.emit(C.DataEvent.ToastData,"\u961f\u53cb\u6362\u684c\u6210\u529f!"),this.clearUI();var n=d.PlayerInfoModel.instance.getLocalSeatByNumid(_.UserInfoModel.instance.userInfo.numID);n&&n.data&&(n.data.playstate===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_STARTED?this.continueGameShowReadyBtn():n.data.playstate===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_READYED&&this.showImg(1,!0,M.CImgTypeEnum.SHOW_READY)),this.updateParnterHeadUI(d.PlayerInfoModel.instance.getLocalSeatByNumid(l.GameCommonModel.instance.parnterId))},e.prototype.onPlayerLeave=function(t){var e=d.PlayerInfoModel.instance.getPlayerByNumid(t.numID);if(null!==e){var n=d.PlayerInfoModel.instance.serverToLocal(e.seatid);if(n!==d.LocalSeatEnum.ERROR){if(t.numID===_.UserInfoModel.instance.userInfo.numID){if(d.PlayerInfoModel.instance.clearOtherPlayerFriendTeamChangeTable(),this.isBoxRoom())for(var o=0;o<d.MAX_PLAYER;++o)o!==d.LocalSeatEnum.SELF&&this.showPlayerHead(o,!1);n=d.MAX_PLAYER}else this.isBoxRoom()&&(this.showPlayerHead(n,!1),this.hideCallMultHeadTag(n)),l.GameCommonModel.instance.isFriendTeamPartner(t.numID)||d.PlayerInfoModel.instance.playerLeaveClearData(t.numID);this.dealBoxRoomButton(),this.showSit(n,!0),this.showSmallKongGong(n,!1),this._isPlayerLeave=!0,this.killClock(n),this.showImg(n,!1,M.CImgTypeEnum.HIDE),this.resetCardLevel(),r.UIManager.instance.isExist(g.GameTrustUI)&&r.UIManager.instance.close(g.GameTrustUI),this.showFirstSecondAnimation(d.MAX_PLAYER,!1)}}},e.prototype.showPlayerHead=function(t,e){if(t===d.MAX_PLAYER)for(var n=0;n<d.MAX_PLAYER;++n)this.showPlayerHead(n,e);else{if(!e&&t===d.LocalSeatEnum.SELF)return;this.view["m_head_"+t].visible=e}},e.prototype.checkShengJiangChangTip=function(){var t=d.PlayerInfoModel.instance.getNowPlayerGold(),e=l.GameCommonModel.instance.getFriendGold(),n=e<t?e:t;if(this._roomConfig&&this._roomConfig.subID){var o=s.GameModel.instance.isFriendTeamNeedUpOrDown(n,t,this._roomConfig.subID);o.status!==s.ShengChangEnum.DOWN&&o.status!==s.ShengChangEnum.UP||c.EventManager.instance.emit(C.DataEvent.ToastData,o.roomDesc)}},e.prototype.backToLobby=function(e,n){r.UIManager.instance.isExist(m.DialogUI)&&r.UIManager.instance.close(m.DialogUI),t.prototype.backToLobby.call(this,e,n)},e.prototype.reqLeaveGame=function(e,n){t.prototype.reqLeaveGame.call(this,e,n),this.reportPointInQueue()},e.prototype.onGameStart=function(){t.prototype.onGameStart.call(this),this._nextGameStartTime=0,this.reportPointInQueueToStartGame()},e.prototype.onBtnChat=function(){t.prototype.onBtnChat.call(this),this.isGamePlay()&&A.BfasManager.instance.sendEvt(P.FriendTeamGameScenePointID.clickChat)},e.prototype.reportPointInQueue=function(){var t=d.PlayerInfoModel.instance.getLocalSeatByNumid(_.UserInfoModel.instance.userInfo.numID);if(t&&t.data&&t.data.playstate===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_IN_QUEUE){var e=Object.assign(S.FriendTeamModel.instance.bfasParamUserType,S.FriendTeamModel.instance.bfasTeamIdNSubId);l.GameCommonModel.instance.isFriendTeamLeader()?A.BfasManager.instance.sendEvt(P.FriendMixTeamPointID.LEADER_CANCEL_MATCH,e):A.BfasManager.instance.sendEvt(P.FriendMixTeamPointID.TEAMMATE_CANCEL_MATCH,e)}},e.prototype.reportPointInQueueToStartGame=function(){if(this._roomConfig&&this._roomConfig.subID){var t=this.getPointParam(),e=Date.now()-this._inQueueStartTime;0!==this._inQueueStartTime&&(t.time=Math.floor(e/100)/10,A.BfasManager.instance.sendEvt(P.FriendMixTeamPointID.IN_QUEUE_NEED_TIME,Object.assign(t,S.FriendTeamModel.instance.bfasParamUserType)))}},e.prototype.reportPointGameEndToStartGame=function(){if(this._roomConfig&&this._roomConfig.subID){var t=this.getPointParam(),e=Date.now()-this._nextGameStartTime;0!==this._nextGameStartTime&&(t.time=Math.floor(e/100)/10,A.BfasManager.instance.sendEvt(P.FriendMixTeamPointID.CONTINUE_NEXT_ROUND_TIME,Object.assign(t,S.FriendTeamModel.instance.bfasParamUserType)))}},e.prototype.reportPointGameEndToInQueue=function(){if(this._roomConfig&&this._roomConfig.subID){var t=this.getPointParam(),e=Date.now()-this._nextGameStartTime;0!==this._nextGameStartTime&&(this._nextGameStartTime=0,t.time=Math.floor(e/100)/10,A.BfasManager.instance.sendEvt(P.FriendMixTeamPointID.CONTINUE_NEXT_ROUND_TIME_CHANGE_TABLE,Object.assign(t,S.FriendTeamModel.instance.bfasParamUserType)))}},e.prototype.getPointParam=function(){return this._roomConfig&&this._roomConfig.subID?{subid:this._roomConfig.subID,gameid:this._roomConfig.gameID}:{subid:0,gameid:0}},i([jsClass],e)}(v.GameSceneUI);n.GameSceneGoldTeamUI=T,cc._RF.pop()},{"../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../Base/Data/DataEvent":"DataEvent","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../Base/Module/ClubError/ErrorCodeGameConfig":"ErrorCodeGameConfig","../../Base/Utils/UtilString":"UtilString","../../Base/View/Common/DialogUI":"DialogUI","../../Base/View/UIHelp":"UIHelp","../../FriendTeam/FriendTeamModel":"FriendTeamModel","../../Setting/SettingModel":"SettingModel","../../UserInfo/UserInfoModel":"UserInfoModel","../Common/GameCommonModel":"GameCommonModel","../Common/GameControlEnum":"GameControlEnum","../Common/GameMatching/GameMatchingForNormalUI":"GameMatchingForNormalUI","../Common/GameShopUI/GameShopUI":"GameShopUI","../Common/PlayerInfoModel":"PlayerInfoModel","./GameEvent":"GameEvent","./GameSceneUI":"GameSceneUI","./GameTrustUI":"GameTrustUI","./Model/GameModel":"GameModel","./Proxy/GameTableProxy":"GameTableProxy"}],GameSceneMatchUI:[function(t,e,n){"use strict";cc._RF.push(e,"a7973BLmhxOO6Oas7caFJm/","GameSceneMatchUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameSceneMatchUI=void 0;var c=t("../../../Framework/Manager/CoroutineManager"),l=t("../../../Framework/Manager/EventManager"),u=t("../../../Framework/Manager/UIManager"),d=t("../../Base/Data/DataConstant"),p=t("../../Base/Data/DataEvent"),h=t("../../Base/Module/BfAnalytics/BfasManager"),_=t("../../Base/Module/BfAnalytics/DataPointID"),f=t("../../Base/Utils/UtilString"),m=t("../../Base/View/Common/DialogUI"),g=t("../../Base/View/UIHelp"),y=t("../../Hall/HallUI"),I=t("../../Match/MatchConstant"),C=t("../../Match/MatchHintUI/TopHintUI"),M=t("../../Match/MatchModel"),v=t("../../Match/MatchRuleUI"),E=t("../../Setting/SettingModel"),A=t("../../UserInfo/UserInfoModel"),P=t("../Common/GameCommonModel"),b=t("../Common/GameControlEnum"),U=t("../Common/GameMatching/GameMatchingForMatchUI "),S=t("../Common/GameResultUI/GameMatchResultUI"),T=t("../Common/PlayerInfoModel"),R=t("./GameEvent"),w=t("./GameSceneUI"),D=t("./Model/GameModel"),O=t("./Proxy/GameTableProxy"),L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.getPkgName=function(){return"GameSceneUI"},e.prototype.initListener=function(){t.prototype.initListener.call(this),l.EventManager.instance.on(I.MatchDataEvent.MatchTrust,this,this.onHinTrustMsg),l.EventManager.instance.on(I.MatchDataEvent.MatchDissmiss,this,this.onHinDissmissMsg),l.EventManager.instance.on(I.MatchDataEvent.MatchGameLeftTime,this,this.onHintMatchGameLeftTime)},e.prototype.onHinDissmissMsg=function(t){var e=this;if(console.log("onHinDissmissMsg:",t),!u.UIManager.instance.isExist(m.DialogUI)){var n={nIntegralWinLost:[0,0,0,0],nWinLost:[-4,-4,-4,-4],nRenWu:[1,1,1,1],baseMul:1,bWinner:[!1,!1,!1,!1],playRank:[1,2,3,4],upLevel:0};g.UIHelp.instance.showDialogMore({content:t,canClose:!0,showCloseBtn:!0},function(){M.MatchModel.instance.isFinalRound(M.MatchModel.instance.getCurRoundIndex())?l.EventManager.instance.emit(R.GameEvent.RESULT,n):e.onMatchExitGame()},function(){M.MatchModel.instance.isFinalRound(M.MatchModel.instance.getCurRoundIndex())?l.EventManager.instance.emit(R.GameEvent.RESULT,n):e.onMatchExitGame()}),P.GameCommonModel.instance.resetEnterMatchInfo()}},e.prototype.onHinTrustMsg=function(t){var e=this;console.log("onHinTrustMsg:",t),u.UIManager.instance.isExist(m.DialogUI)||(h.BfasManager.instance.sendEvt(_.MatchPoint.MATCH_HINT_TRUST),g.UIHelp.instance.showDialogMore({content:t,canClose:!0,showCloseBtn:!0},function(){e.onMatchExitGame()},function(){e.onMatchExitGame()}),P.GameCommonModel.instance.resetEnterMatchInfo())},e.prototype.onHintMatchGameLeftTime=function(t){console.log("onHintMatchGameLeftTime:",t),u.UIManager.instance.isExist(C.TopHintUI)&&u.UIManager.instance.close(C.TopHintUI),u.UIManager.instance.open(C.TopHintUI).then(function(e){e.init({content:t,canClick:!1,showTime:5})})},e.prototype.initMatchRoomUI=function(){this.view.m_top_left.m_cGameType.selectedIndex=b.CTopLeftGameTypeEnum.MATCH_ROOM,this.view.m_bottom.m_btn_chat.visible=!1,this.view.m_right_top.m_cRoomType.selectedIndex=b.CTopRightRoomTypeEnum.MATCH_ROOM,this.view.m_head_1.m_cRoomtype.selectedIndex=b.CSelfHeadRoomTypeEnum.MATCH_ROOM,this.refreshMatchLevelRank(2),this.openGameMatching()},e.prototype.openGameMatching=function(){u.UIManager.instance.isExist(U.GameMatchingForMatchUI)||u.UIManager.instance.open(U.GameMatchingForMatchUI)},e.prototype.showNoteCardLabel=function(){return!1},e.prototype.onBtnHead_0=function(){console.log("onBtnHead_0")},e.prototype.onBtnHead_1=function(){console.log("onBtnHead_1")},e.prototype.onBtnHead_2=function(){console.log("onBtnHead_2")},e.prototype.onBtnHead_3=function(){console.log("onBtnHead_3")},e.prototype.onBtnExit=function(){var t=this;console.log("onBtnExit"),this.toggleMenuPanel(!1),g.UIHelp.instance.showBigDialogConfirmCancel({content:"\u662f\u5426\u9000\u51fa\u6bd4\u8d5b,\u9000\u51fa\u540e\u4e0d\u80fd\u8fd4\u56de\u672c\u573a\u6bd4\u8d5b,\n\u4fe1\u8a89\u5206[color=#D50804]"+M.MatchModel.instance.gameExitDeductCreditScore()+"[/color]",confirmText:"\u9000\u51fa\u6bd4\u8d5b",cancelText:"\u53d6\u6d88"},function(e){if(e){h.BfasManager.instance.sendEvt(_.MatchPoint.MATCH_GIVE_UP_MATCH);var n=M.MatchModel.instance.getCurMatchID();console.log("ttt.exitMatch:",n),M.MatchModel.instance.reqGDMatchGiveup(n.mid,n.msid,null,function(e){e&&(P.GameCommonModel.instance.resetEnterMatchInfo(),t.backToMatchRoundUI(y.HallUITab.MATCH_ROUND))})}})},e.prototype.onPlayerStateChange=function(t){console.log("onPlayerStateChange:",t.state,t.numid);var e=T.PlayerInfoModel.instance.getLocalSeatByNumid(t.numid),n=t.numid==A.UserInfoModel.instance.userInfo.numID;(n||!Number.isNaN(e.lseat)&&e.lseat!==T.LocalSeatEnum.ERROR)&&(t.state===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_ENTERED?n?this._reqLeaveFlag||(this.view.m_button_layer.m_buttonType.selectedIndex=D.CButtonLayerTypeEnum.READY):this.showImg(e.lseat,!1,b.CImgTypeEnum.HIDE):t.state===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_READYED?(n&&(u.UIManager.instance.isExist(U.GameMatchingForMatchUI)&&u.UIManager.instance.close(U.GameMatchingForMatchUI),this.view.m_button_layer.m_buttonType.selectedIndex=D.CButtonLayerTypeEnum.NONE,this.view.m_right_top.m_changeSeatType.selectedIndex=b.TopRightChangeSeatControlTypeEnum.CAN_CHANGE,this.view.m_resultBg.selectedIndex=b.ResultBgControlTypeEnum.HIDE),this.showImg(e.lseat,!0,b.CImgTypeEnum.SHOW_READY)):t.state===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_PLAYING?n&&(u.UIManager.instance.isExist(U.GameMatchingForMatchUI)&&u.UIManager.instance.close(U.GameMatchingForMatchUI),this.view.m_right_top.m_changeSeatType.selectedIndex=b.TopRightChangeSeatControlTypeEnum.NOT_CAN_CHANGE,this.view.m_resultBg.selectedIndex=b.ResultBgControlTypeEnum.HIDE,this.view.m_button_layer.m_buttonType.selectedIndex=D.CButtonLayerTypeEnum.NONE):t.state===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_IN_QUEUE?(n&&(this.clearUI(),this.showPlayerHead(T.MAX_PLAYER,!1),this.view.m_right_top.m_changeSeatType.selectedIndex=b.TopRightChangeSeatControlTypeEnum.CAN_CHANGE,this.view.m_resultBg.selectedIndex=b.ResultBgControlTypeEnum.HIDE),this.showImg(e.lseat,!1,b.CImgTypeEnum.HIDE)):t.state===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_IN_ROOM?this.view.m_right_top.m_changeSeatType.selectedIndex=b.TopRightChangeSeatControlTypeEnum.CAN_CHANGE:t.state===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_STARTED&&(this.view.m_right_top.m_changeSeatType.selectedIndex=b.TopRightChangeSeatControlTypeEnum.CAN_CHANGE),this.isGamePlay()?(E.SettingModel.instance.data.isLiPaiHeng?this.view.m_button_layer.y=this._buttonLayer_y+120:this.view.m_button_layer.y=this._buttonLayer_y,this.showSit(T.MAX_PLAYER,!1)):this.view.m_button_layer.y=this._buttonLayer_y,this.onPlayerGoldChange(t.numid))},e.prototype.onPlayerGoldChange=function(t){var e=T.PlayerInfoModel.instance.getLocalSeatByNumid(t);if(console.log("ttt.onPlayerGoldChange:",t,e),e.lseat!==T.LocalSeatEnum.ERROR){var n=this.view["m_head_"+e.lseat],o=this.view["m_headAni_"+e.lseat];0===e.lseat?n.m_name.text="\u73a9\u5bb64":n.m_name.text="\u73a9\u5bb6"+e.lseat.toString(),n.m_score.text="",n.visible=!0,n.m_score.text=f.UtilString.getCurrencyShortString(e.data.gamegold),e.lseat===T.LocalSeatEnum.SELF?(n.m_head.m_name.m_head.url=T.PlayerInfoModel.instance.getHead(e.data.numid),o.m_head.m_name.m_head.url=T.PlayerInfoModel.instance.getHead(e.data.numid)):(n.m_head.m_name.m_head.url=d.DataConstant.getDefaultAvatar(),o.m_head.m_name.m_head.url=d.DataConstant.getDefaultAvatar()),this.showSit(e.lseat,!1),e.data.playstate===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_READYED?this.showImg(e.lseat,!0,b.CImgTypeEnum.SHOW_READY):e.data.playstate!==club.client.game.PlayState.PLAYSTATES.PLAYSTATE_NONE&&e.data.playstate!==club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_ENTERED||this.showImg(e.lseat,!1,b.CImgTypeEnum.HIDE)}else t===A.UserInfoModel.instance.userInfo.numID&&e.data&&(this.view.m_head_1.m_score.text=f.UtilString.getCurrencyShortString(e.data.gamegold),this.view.m_head_1.m_head.m_name.m_head.url=T.PlayerInfoModel.instance.getHead(e.data.numid),this.view.m_headAni_1.m_head.m_name.m_head.url=T.PlayerInfoModel.instance.getHead(e.data.numid))},e.prototype.onNoticeChangeSeat=function(t){var e,n,o=T.PlayerInfoModel.instance.getPlayerByNumid(t.numID1),a=T.PlayerInfoModel.instance.getPlayerByNumid(t.numID2);if(console.warn("ttt.onNoticeChangeSeat.player:",t,o,a),console.warn("ttt.onNoticeChangeSeat.player1:",o.numid,o.seatid),console.warn("ttt.onNoticeChangeSeat.player2:",a.numid,a.seatid),console.warn("ttt.onNoticeChangeSeat.notice1:",t.numID1,t.srcseat1),console.warn("ttt.onNoticeChangeSeat.notice2:",t.numID2,t.srcseat2),o&&a)if(o.seatid!==t.srcseat2||a.seatid!==t.srcseat1)if(D.GameModel.instance.isMatchRoundFirstGame()){T.PlayerInfoModel.instance.changeSeatByNumid(t.numID1,t.srcseat2),T.PlayerInfoModel.instance.changeSeatByNumid(t.numID2,t.srcseat1);for(var i=0;i<T.MAX_PLAYER;++i)(y=T.PlayerInfoModel.instance.getPlayerByServiceSeat(i))?(console.warn("ttt.onNoticeChangeSeat.firstRound:",y.numid,y.seatid),this.onPlayerGoldChange(y.numid)):console.error("onNoticeChangeSeat.error2:",i)}else{var s={};for(i=0;i<T.MAX_PLAYER;++i)if(y=T.PlayerInfoModel.instance.getPlayerByServiceSeat(i)){var c=T.PlayerInfoModel.instance.getLocalSeatByNumid(y.numid).lseat;s[y.numid]=c}console.log("ttt.oldLocalInfo:",s),this.resetHead(T.MAX_PLAYER),T.PlayerInfoModel.instance.changeSeatByNumid(t.numID1,t.srcseat2),T.PlayerInfoModel.instance.changeSeatByNumid(t.numID2,t.srcseat1);var l={};for(i=0;i<T.MAX_PLAYER;++i)if(y=T.PlayerInfoModel.instance.getPlayerByServiceSeat(i)){var u=T.PlayerInfoModel.instance.getLocalSeatByNumid(y.numid).lseat;l[y.numid]=u}console.log("ttt.newLocalInfo:",l);var d={},p=1;try{for(var h=r(Object.keys(s)),_=h.next();!_.done;_=h.next()){var f=_.value,m=s[+f],g=l[+f];m!==g&&(d[p]={fromLocalSeat:m,toLocalSeat:g},p++)}}catch(I){e={error:I}}finally{try{_&&!_.done&&(n=h.return)&&n.call(h)}finally{if(e)throw e.error}}for(console.log("ttt.moveInfo:",d),this.moveHeadBeforeGame(d),i=0;i<T.MAX_PLAYER;++i){var y;(y=T.PlayerInfoModel.instance.getPlayerByServiceSeat(i))&&this.onPlayerGoldChange(y.numid)}}else console.error("onNoticeChangeSeat.error1")},e.prototype.moveHeadBeforeGame=function(t){var e,n,o=[];o.push(this.view.m_headAni_0.node.position),o.push(this.view.m_headAni_1.node.position),o.push(this.view.m_headAni_2.node.position),o.push(this.view.m_headAni_3.node.position);var a=function(t,e){console.log("moveInfo:",t,e.fromLocalSeat,e.toLocalSeat);var n=i.view["m_headAni_"+e.fromLocalSeat].node,a=i.view["m_head_"+e.fromLocalSeat].node;cc.tween(n).call(function(){n.active=!0,a.active=!1}).to(.6,{position:o[e.toLocalSeat]}).call(function(){n.active=!1,a.active=!0,n.setPosition(o[e.fromLocalSeat])}).start()},i=this;try{for(var c=r(Object.entries(t)),l=c.next();!l.done;l=c.next()){var u=s(l.value,2);a(u[0],u[1])}}catch(d){e={error:d}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}},e.prototype.onShowResult=function(t){this._resultData=t,this.showMatchResultUI()},e.prototype.showMatchResultUI=function(){var t=this;u.UIManager.instance.open(S.GameMatchResultUI).then(function(e){e.initMatchReusltUI(t._resultData),e.setMatchReadyCallBack(function(){O.GameTableProxy.instance.sendPlayerStart()}),e.setMatchContinueCallBack(function(){M.MatchModel.instance.isCurrentMatchOver()?t.backToMatchRoundUI(y.HallUITab.MATCH_HALL):(t.backToMatchRoundUI(y.HallUITab.MATCH_ROUND),c.CoroutineManager.instance.once(.8,function(){var t=M.MatchModel.instance.getCurRoundIndex();M.MatchModel.instance.getCurPlayingCnt(t)>0&&l.EventManager.instance.emit(p.DataEvent.ToastData,"\u8bf7\u7b49\u5f85\u5176\u4ed6\u684c\u90fd\u7ed3\u675f\u540e\u5f00\u542f\u4e0b\u4e00\u8f6e\u6bd4\u8d5b",2)}))})})},e.prototype.onBtnRule=function(){console.log("onBtnRule match"),this.toggleMenuPanel(!1),u.UIManager.instance.open(v.MatchRuleUI).then(function(t){t.init(v.MatchRuleShowTypeEnum.MATCH_RULE)})},i([jsClass],e)}(w.GameSceneUI);n.GameSceneMatchUI=L,cc._RF.pop()},{"../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../Base/Data/DataConstant":"DataConstant","../../Base/Data/DataEvent":"DataEvent","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../Base/Utils/UtilString":"UtilString","../../Base/View/Common/DialogUI":"DialogUI","../../Base/View/UIHelp":"UIHelp","../../Hall/HallUI":"HallUI","../../Match/MatchConstant":"MatchConstant","../../Match/MatchHintUI/TopHintUI":"TopHintUI","../../Match/MatchModel":"MatchModel","../../Match/MatchRuleUI":"MatchRuleUI","../../Setting/SettingModel":"SettingModel","../../UserInfo/UserInfoModel":"UserInfoModel","../Common/GameCommonModel":"GameCommonModel","../Common/GameControlEnum":"GameControlEnum","../Common/GameMatching/GameMatchingForMatchUI ":"GameMatchingForMatchUI ","../Common/GameResultUI/GameMatchResultUI":"GameMatchResultUI","../Common/PlayerInfoModel":"PlayerInfoModel","./GameEvent":"GameEvent","./GameSceneUI":"GameSceneUI","./Model/GameModel":"GameModel","./Proxy/GameTableProxy":"GameTableProxy"}],GameSceneUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"29fb9MZBf1BNYtJdHBH1QJC","GameSceneUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./GameSceneUI_NoteCardLayer"),a=t("./GameSceneUI_NumText"),i=t("./GameSceneUI_RightTopBar"),r=t("./GameSceneUI_Menu"),s=t("./GameSceneUI_waitAni"),c=t("./GameSceneUI_Clock"),l=t("./GameSceneUI_BoxInfo"),u=t("./GameSceneUI_ShowImage"),d=t("./GameSceneUI_hpProgressBar"),p=t("./GameSceneUI_adaptCallMultAni"),h=t("./GameSceneUI_Tp_Result"),_=t("./GameSceneUI_gold"),f=t("./GameSceneUI_boxTurnData"),m=t("./GameSceneUI_boxPanelDelayGame"),g=t("./GameSceneUI_bubbleDelayHint"),y=t("./GameSceneUI_BoxDelayHintMainPanel"),I=t("./GameSceneUI_PropPanel"),C=t("./GameSceneUI_PointLayer"),M=t("./GameSceneUI_callMultTag"),v=t("./GameSceneUI_HeadAni"),E=t("./GameSceneUI_ButtonGroup"),A=t("./GameSceneUI_TimePanel"),P=t("./GameSceneUI_CardHead"),b=t("./GameSceneUI_Head"),U=t("./GameSceneUI_HeadH"),S=t("./GameSceneUI_HeadV"),T=t("./GameSceneUI_MainPanel"),R=t("./GameSceneUI_ChatRecordBubble"),w=t("./GameSceneUI_Bottom"),D=t("./GameSceneUI_TongHuaShunBar"),O=t("./GameSceneUI_btnTHS"),L=t("./GameSceneUI_TopLeftBar"),G=t("./GameSceneUI_SimpleButton"),B=t("./GameSceneUI_PannelPassLevelTask"),N=t("./GameSceneUI_ruleGuide"),F=t("./GameSceneUI_HeadSelf"),k=t("./GameSceneUI_LevelUp"),x=t("./GameSceneUI_YearBeastButton"),j=t("./GameSceneUI_GiftButton"),H=t("./GameSceneUI_waitLeaderReady"),W=t("./GameSceneUI_ChangeSeat"),Y=t("./GameSceneUI_BtnPassLevelTask"),V=t("./GameSceneUI_ChangeSeatWindow"),q=t("./GameSceneUI_Flag"),K=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default),fgui.UIObjectFactory.setExtension(l.default.URL,l.default),fgui.UIObjectFactory.setExtension(u.default.URL,u.default),fgui.UIObjectFactory.setExtension(d.default.URL,d.default),fgui.UIObjectFactory.setExtension(p.default.URL,p.default),fgui.UIObjectFactory.setExtension(h.default.URL,h.default),fgui.UIObjectFactory.setExtension(_.default.URL,_.default),fgui.UIObjectFactory.setExtension(f.default.URL,f.default),fgui.UIObjectFactory.setExtension(m.default.URL,m.default),fgui.UIObjectFactory.setExtension(g.default.URL,g.default),fgui.UIObjectFactory.setExtension(y.default.URL,y.default),fgui.UIObjectFactory.setExtension(I.default.URL,I.default),fgui.UIObjectFactory.setExtension(C.default.URL,C.default),fgui.UIObjectFactory.setExtension(M.default.URL,M.default),fgui.UIObjectFactory.setExtension(v.default.URL,v.default),fgui.UIObjectFactory.setExtension(E.default.URL,E.default),fgui.UIObjectFactory.setExtension(A.default.URL,A.default),fgui.UIObjectFactory.setExtension(P.default.URL,P.default),fgui.UIObjectFactory.setExtension(b.default.URL,b.default),fgui.UIObjectFactory.setExtension(U.default.URL,U.default),fgui.UIObjectFactory.setExtension(S.default.URL,S.default),fgui.UIObjectFactory.setExtension(T.default.URL,T.default),fgui.UIObjectFactory.setExtension(R.default.URL,R.default),fgui.UIObjectFactory.setExtension(w.default.URL,w.default),fgui.UIObjectFactory.setExtension(D.default.URL,D.default),fgui.UIObjectFactory.setExtension(O.default.URL,O.default),fgui.UIObjectFactory.setExtension(L.default.URL,L.default),fgui.UIObjectFactory.setExtension(G.default.URL,G.default),fgui.UIObjectFactory.setExtension(B.default.URL,B.default),fgui.UIObjectFactory.setExtension(N.default.URL,N.default),fgui.UIObjectFactory.setExtension(F.default.URL,F.default),fgui.UIObjectFactory.setExtension(k.default.URL,k.default),fgui.UIObjectFactory.setExtension(x.default.URL,x.default),fgui.UIObjectFactory.setExtension(j.default.URL,j.default),fgui.UIObjectFactory.setExtension(H.default.URL,H.default),fgui.UIObjectFactory.setExtension(W.default.URL,W.default),fgui.UIObjectFactory.setExtension(Y.default.URL,Y.default),fgui.UIObjectFactory.setExtension(V.default.URL,V.default),fgui.UIObjectFactory.setExtension(q.default.URL,q.default)},t}();n.default=K,cc._RF.pop()},{"./GameSceneUI_Bottom":"GameSceneUI_Bottom","./GameSceneUI_BoxDelayHintMainPanel":"GameSceneUI_BoxDelayHintMainPanel","./GameSceneUI_BoxInfo":"GameSceneUI_BoxInfo","./GameSceneUI_BtnPassLevelTask":"GameSceneUI_BtnPassLevelTask","./GameSceneUI_ButtonGroup":"GameSceneUI_ButtonGroup","./GameSceneUI_CardHead":"GameSceneUI_CardHead","./GameSceneUI_ChangeSeat":"GameSceneUI_ChangeSeat","./GameSceneUI_ChangeSeatWindow":"GameSceneUI_ChangeSeatWindow","./GameSceneUI_ChatRecordBubble":"GameSceneUI_ChatRecordBubble","./GameSceneUI_Clock":"GameSceneUI_Clock","./GameSceneUI_Flag":"GameSceneUI_Flag","./GameSceneUI_GiftButton":"GameSceneUI_GiftButton","./GameSceneUI_Head":"GameSceneUI_Head","./GameSceneUI_HeadAni":"GameSceneUI_HeadAni","./GameSceneUI_HeadH":"GameSceneUI_HeadH","./GameSceneUI_HeadSelf":"GameSceneUI_HeadSelf","./GameSceneUI_HeadV":"GameSceneUI_HeadV","./GameSceneUI_LevelUp":"GameSceneUI_LevelUp","./GameSceneUI_MainPanel":"GameSceneUI_MainPanel","./GameSceneUI_Menu":"GameSceneUI_Menu","./GameSceneUI_NoteCardLayer":"GameSceneUI_NoteCardLayer","./GameSceneUI_NumText":"GameSceneUI_NumText","./GameSceneUI_PannelPassLevelTask":"GameSceneUI_PannelPassLevelTask","./GameSceneUI_PointLayer":"GameSceneUI_PointLayer","./GameSceneUI_PropPanel":"GameSceneUI_PropPanel","./GameSceneUI_RightTopBar":"GameSceneUI_RightTopBar","./GameSceneUI_ShowImage":"GameSceneUI_ShowImage","./GameSceneUI_SimpleButton":"GameSceneUI_SimpleButton","./GameSceneUI_TimePanel":"GameSceneUI_TimePanel","./GameSceneUI_TongHuaShunBar":"GameSceneUI_TongHuaShunBar","./GameSceneUI_TopLeftBar":"GameSceneUI_TopLeftBar","./GameSceneUI_Tp_Result":"GameSceneUI_Tp_Result","./GameSceneUI_YearBeastButton":"GameSceneUI_YearBeastButton","./GameSceneUI_adaptCallMultAni":"GameSceneUI_adaptCallMultAni","./GameSceneUI_boxPanelDelayGame":"GameSceneUI_boxPanelDelayGame","./GameSceneUI_boxTurnData":"GameSceneUI_boxTurnData","./GameSceneUI_btnTHS":"GameSceneUI_btnTHS","./GameSceneUI_bubbleDelayHint":"GameSceneUI_bubbleDelayHint","./GameSceneUI_callMultTag":"GameSceneUI_callMultTag","./GameSceneUI_gold":"GameSceneUI_gold","./GameSceneUI_hpProgressBar":"GameSceneUI_hpProgressBar","./GameSceneUI_ruleGuide":"GameSceneUI_ruleGuide","./GameSceneUI_waitAni":"GameSceneUI_waitAni","./GameSceneUI_waitLeaderReady":"GameSceneUI_waitLeaderReady"}],GameSceneUI_Bottom:[function(t,e,n){"use strict";cc._RF.push(e,"fdda6QX41xEf6dmmhtcQBOd","GameSceneUI_Bottom");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","Bottom")},e.prototype.onConstruct=function(){this.m_lpType=this.getControllerAt(0),this.m_btn_chat=this.getChildAt(0),this.m_btn_lp=this.getChildAt(1),this.m_btn_hf=this.getChildAt(2),this.m_btn_lp_gray=this.getChildAt(3),this.m_btnChatHint=this.getChildAt(4),this.m_groupChatHint=this.getChildAt(6)},e.URL="ui://5m0hcdqioojab",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_BoxDelayHintMainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"323720iViNHY7awGk3BZXxP","GameSceneUI_BoxDelayHintMainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","BoxDelayHintMainPanel")},e.prototype.onConstruct=function(){this.m_bg=this.getChildAt(0),this.m_Window=this.getChildAt(1)},e.URL="ui://5m0hcdqijavroae",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_BoxInfo:[function(t,e,n){"use strict";cc._RF.push(e,"07eb7sKyJhKOqQBl+CgCUTO","GameSceneUI_BoxInfo");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","BoxInfo")},e.prototype.onConstruct=function(){this.m_isMult=this.getControllerAt(0),this.m_roomid=this.getChildAt(3),this.m_rule=this.getChildAt(4),this.m_name=this.getChildAt(7)},e.URL="ui://5m0hcdqif38f71",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_BtnPassLevelTask:[function(t,e,n){"use strict";cc._RF.push(e,"d5d5eisePRDm7Gnr7f60HXB","GameSceneUI_BtnPassLevelTask");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","BtnPassLevelTask")},e.prototype.onConstruct=function(){this.m_cTaskState=this.getControllerAt(0),this.m_spineIcon=this.getChildAt(1),this.m_spineParticle=this.getChildAt(2)},e.URL="ui://5m0hcdqivhcta6c1",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],GameSceneUI_ButtonGroup:[function(t,e,n){"use strict";cc._RF.push(e,"6cbd4DGV11HPLmErbH4B8Qu","GameSceneUI_ButtonGroup");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","ButtonGroup")},e.prototype.onConstruct=function(){this.m_buttonType=this.getControllerAt(0),this.m_canPlay=this.getControllerAt(1),this.m_roomType=this.getControllerAt(2),this.m_yqType=this.getControllerAt(3),this.m_yearBeast=this.getControllerAt(4),this.m_clock=this.getChildAt(0),this.m_btn_zb=this.getChildAt(1),this.m_btn_ts=this.getChildAt(2),this.m_btn_cp=this.getChildAt(3),this.m_btn_hg=this.getChildAt(4),this.m_btn_jg=this.getChildAt(5),this.m_btn_bc=this.getChildAt(6),this.m_btn_cp_gray=this.getChildAt(7),this.m_btn_yq=this.getChildAt(8),this.m_btn_zb2=this.getChildAt(9),this.m_moreWin_node=this.getChildAt(10),this.m_btn_notMult=this.getChildAt(11),this.m_noMultBubble=this.getChildAt(12),this.m_btn_mult=this.getChildAt(13),this.m_btn_yearBeast=this.getChildAt(14),this.m_t0=this.getTransitionAt(0),this.m_t1=this.getTransitionAt(1)},e.URL="ui://5m0hcdqiltbn43",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_CardHead:[function(t,e,n){"use strict";cc._RF.push(e,"21200o0DfVKbqiBEUrAduJO","GameSceneUI_CardHead");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","CardHead")},e.prototype.onConstruct=function(){this.m_name=this.getChildAt(0)},e.URL="ui://5m0hcdqimv943b",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],GameSceneUI_ChangeSeatWindow:[function(t,e,n){"use strict";cc._RF.push(e,"43780q2uBNBson4GrDGdBlt","GameSceneUI_ChangeSeatWindow");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","ChangeSeatWindow")},e.prototype.onConstruct=function(){this.m_icon=this.getChildAt(1),this.m_BtnCancel=this.getChildAt(2),this.m_BtnConfirm=this.getChildAt(3),this.m_text=this.getChildAt(4),this.m_time=this.getChildAt(5)},e.URL="ui://5m0hcdqivoo4a6bf",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_ChangeSeat:[function(t,e,n){"use strict";cc._RF.push(e,"5a902D5h8NFpbn4/mDCLBKb","GameSceneUI_ChangeSeat");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","ChangeSeat")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://5m0hcdqis1kla6be",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_ChatRecordBubble:[function(t,e,n){"use strict";cc._RF.push(e,"0ba98Sh6BRL+6Q3Vun18NiF","GameSceneUI_ChatRecordBubble");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","ChatRecordBubble")},e.prototype.onConstruct=function(){this.m_no=this.getChildAt(0),this.m_t0=this.getTransitionAt(0)},e.URL="ui://5m0hcdqinxt2a6eh",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_Clock:[function(t,e,n){"use strict";cc._RF.push(e,"b6103B0LEJOB7LAiu5U4m9w","GameSceneUI_Clock");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","Clock")},e.prototype.onConstruct=function(){this.m_actionType=this.getControllerAt(0),this.m_time=this.getChildAt(2),this.m_action=this.getTransitionAt(0)},e.URL="ui://5m0hcdqidwsy55",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_Flag:[function(t,e,n){"use strict";cc._RF.push(e,"cacbfVCm2NJZ5VGuAeQHo0N","GameSceneUI_Flag");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","Flag")},e.prototype.onConstruct=function(){this.m_isVideo=this.getControllerAt(0),this.m_textType=this.getControllerAt(1),this.m_text=this.getChildAt(1)},e.URL="ui://5m0hcdqizu1ho98",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_GiftButton:[function(t,e,n){"use strict";cc._RF.push(e,"289cbyJflFIc5cAl0D78MWj","GameSceneUI_GiftButton");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","GiftButton")},e.prototype.onConstruct=function(){this.m_actionType=this.getControllerAt(0),this.m_moreWin_node=this.getChildAt(0),this.m_text=this.getChildAt(1),this.m_flag=this.getChildAt(2),this.m_action=this.getTransitionAt(0)},e.URL="ui://5m0hcdqirbkqo91",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],GameSceneUI_HeadAni:[function(t,e,n){"use strict";cc._RF.push(e,"961a0eiBKNAj4M5g1fK8jxg","GameSceneUI_HeadAni");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","HeadAni")},e.prototype.onConstruct=function(){this.m_head=this.getChildAt(0),this.m_headFrame=this.getChildAt(1),this.m_showScore=this.getTransitionAt(0),this.m_hideScore=this.getTransitionAt(1),this.m_showScene2=this.getTransitionAt(2),this.m_hideScore2=this.getTransitionAt(3)},e.URL="ui://5m0hcdqiki3oa6f6",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_HeadH:[function(t,e,n){"use strict";cc._RF.push(e,"f0f768lJs1ExpRTxK06naQ8","GameSceneUI_HeadH");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","HeadH")},e.prototype.onConstruct=function(){this.m_winLoseType=this.getControllerAt(0),this.m_cardpos=this.getControllerAt(1),this.m_bjType=this.getControllerAt(2),this.m_cardType=this.getControllerAt(3),this.m_resultType=this.getControllerAt(4),this.m_isOwner=this.getControllerAt(5),this.m_resultAnimation=this.getControllerAt(6),this.m_seatType=this.getControllerAt(7),this.m_cRoomType=this.getControllerAt(8),this.m_name=this.getChildAt(1),this.m_score=this.getChildAt(2),this.m_head=this.getChildAt(3),this.m_headFrame=this.getChildAt(4),this.m_cardback=this.getChildAt(7),this.m_bj=this.getChildAt(8),this.m_num=this.getChildAt(9),this.m_card=this.getChildAt(10),this.m_bubbleRight=this.getChildAt(11),this.m_chatRightText=this.getChildAt(12),this.m_emojiRight=this.getChildAt(13),this.m_emojiRightEmpty=this.getChildAt(14),this.m_chatRecordRight=this.getChildAt(15),this.m_bubbleLeft=this.getChildAt(16),this.m_chatLeftText=this.getChildAt(17),this.m_emojiLeft=this.getChildAt(18),this.m_emojiLeftEmpty=this.getChildAt(19),this.m_chatRecordLeft=this.getChildAt(20),this.m_small_card=this.getChildAt(21),this.m_score_bg=this.getChildAt(22),this.m_img_ceil=this.getChildAt(23),this.m_win_text=this.getChildAt(24),this.m_lose_text=this.getChildAt(25),this.m_score_node=this.getChildAt(26),this.m_score_bg2=this.getChildAt(27),this.m_img_ceil2=this.getChildAt(28),this.m_win_text2=this.getChildAt(29),this.m_lose_text2=this.getChildAt(30),this.m_score_node2=this.getChildAt(31),this.m_kg_small=this.getChildAt(32),this.m_biaoQingNode=this.getChildAt(34),this.m_meiLiNode=this.getChildAt(35),this.m_showScore=this.getTransitionAt(0),this.m_hideScore=this.getTransitionAt(1),this.m_showScene2=this.getTransitionAt(2),this.m_hideScore2=this.getTransitionAt(3)},e.URL="ui://5m0hcdqimv943d",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_HeadSelf:[function(t,e,n){"use strict";cc._RF.push(e,"cb16b8BetBOmZK7ILhqrmsl","GameSceneUI_HeadSelf");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","HeadSelf")},e.prototype.onConstruct=function(){this.m_bjType=this.getControllerAt(0),this.m_cardType=this.getControllerAt(1),this.m_winLoseType=this.getControllerAt(2),this.m_resultType=this.getControllerAt(3),this.m_cRoomtype=this.getControllerAt(4),this.m_isOwner=this.getControllerAt(5),this.m_resultAnimation=this.getControllerAt(6),this.m_recover=this.getControllerAt(7),this.m_icon=this.getChildAt(2),this.m_score=this.getChildAt(3),this.m_btn_add=this.getChildAt(4),this.m_head=this.getChildAt(5),this.m_headFrame=this.getChildAt(6),this.m_name=this.getChildAt(7),this.m_cardback=this.getChildAt(8),this.m_bj=this.getChildAt(9),this.m_num=this.getChildAt(10),this.m_card=this.getChildAt(11),this.m_bubble=this.getChildAt(12),this.m_text=this.getChildAt(13),this.m_emojiNode=this.getChildAt(14),this.m_emojiEmpty=this.getChildAt(15),this.m_chatRecord=this.getChildAt(16),this.m_small_card=this.getChildAt(17),this.m_score_bg=this.getChildAt(20),this.m_img_ceil=this.getChildAt(21),this.m_win_text=this.getChildAt(22),this.m_lose_text=this.getChildAt(23),this.m_img_ceil2=this.getChildAt(24),this.m_win_text2=this.getChildAt(25),this.m_lose_text2=this.getChildAt(26),this.m_score_node=this.getChildAt(27),this.m_kg_small=this.getChildAt(28),this.m_biaoQingNode=this.getChildAt(30),this.m_meiLiNode=this.getChildAt(31),this.m_showScore=this.getTransitionAt(0),this.m_hideScore=this.getTransitionAt(1)},e.URL="ui://5m0hcdqiq5v742",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_HeadV:[function(t,e,n){"use strict";cc._RF.push(e,"1c98ei05MBLJ6918GI/v6L3","GameSceneUI_HeadV");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","HeadV")},e.prototype.onConstruct=function(){this.m_winLoseType=this.getControllerAt(0),this.m_bjType=this.getControllerAt(1),this.m_cardType=this.getControllerAt(2),this.m_resultType=this.getControllerAt(3),this.m_isOwner=this.getControllerAt(4),this.m_resultAnimation=this.getControllerAt(5),this.m_recover=this.getControllerAt(6),this.m_cCallMultTag=this.getControllerAt(7),this.m_cRoomType=this.getControllerAt(8),this.m_name=this.getChildAt(1),this.m_score=this.getChildAt(2),this.m_head=this.getChildAt(3),this.m_headFrame=this.getChildAt(4),this.m_cardback=this.getChildAt(7),this.m_bj=this.getChildAt(8),this.m_num=this.getChildAt(9),this.m_card=this.getChildAt(10),this.m_bubble=this.getChildAt(11),this.m_text=this.getChildAt(12),this.m_emojiNode=this.getChildAt(13),this.m_emojiEmpty=this.getChildAt(14),this.m_chatRecord=this.getChildAt(15),this.m_small_card=this.getChildAt(16),this.m_img_ceil=this.getChildAt(18),this.m_win_text=this.getChildAt(19),this.m_lose_text=this.getChildAt(20),this.m_img_ceil2=this.getChildAt(21),this.m_win_text2=this.getChildAt(22),this.m_lose_text2=this.getChildAt(23),this.m_score_node=this.getChildAt(24),this.m_kg_small=this.getChildAt(25),this.m_biaoQingNode=this.getChildAt(27),this.m_meiLiNode=this.getChildAt(28),this.m_showScore=this.getTransitionAt(0),this.m_hideScore=this.getTransitionAt(1)},e.URL="ui://5m0hcdqimv943f",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_Head:[function(t,e,n){"use strict";cc._RF.push(e,"1af14SkzqpCMpzptQEqx7eY","GameSceneUI_Head");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","Head")},e.prototype.onConstruct=function(){this.m_head=this.getChildAt(0),this.m_frame=this.getChildAt(1)},e.URL="ui://5m0hcdqimv943c",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_LevelUp:[function(t,e,n){"use strict";cc._RF.push(e,"1d9bbUljEtC5KalqNpAtf1w","GameSceneUI_LevelUp");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","LevelUp")},e.prototype.onConstruct=function(){this.m_bg=this.getChildAt(0),this.m_text=this.getChildAt(1)},e.URL="ui://5m0hcdqiqyyno9q",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"6d6a1TUcmNF+rgGjo2aDn9P","GameSceneUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","MainPanel")},e.prototype.onConstruct=function(){this.m_showMenu=this.getControllerAt(0),this.m_roomType=this.getControllerAt(1),this.m_resultBg=this.getControllerAt(2),this.m_c_boxRoundData=this.getControllerAt(3),this.m_cPassLevelPannel=this.getControllerAt(4),this.m_bottom_bg=this.getChildAt(0),this.m_bg=this.getChildAt(1),this.m_bottom=this.getChildAt(2),this.m_ths_bar=this.getChildAt(3),this.m_top_left=this.getChildAt(4),this.m_timePanel=this.getChildAt(5),this.m_btnMultTask=this.getChildAt(6),this.m_imgNoteCardBubble=this.getChildAt(7),this.m_note_card=this.getChildAt(8),this.m_boxTurnData=this.getChildAt(9),this.m_boxDelayBubble=this.getChildAt(10),this.m_info=this.getChildAt(11),this.m_tou_mo_0=this.getChildAt(12),this.m_tou_mo_1=this.getChildAt(13),this.m_tou_mo_2=this.getChildAt(14),this.m_tou_mo_3=this.getChildAt(15),this.m_callMultTag_0=this.getChildAt(16),this.m_callMultTag_1=this.getChildAt(17),this.m_callMultTag_2=this.getChildAt(18),this.m_callMultTag_3=this.getChildAt(19),this.m_callMultWaitAni=this.getChildAt(20),this.m_callMultAdaptAni=this.getChildAt(21),this.m_waitLeaderReady=this.getChildAt(22),this.m_headAni_0=this.getChildAt(23),this.m_headAni_1=this.getChildAt(24),this.m_headAni_2=this.getChildAt(25),this.m_headAni_3=this.getChildAt(26),this.m_head_0=this.getChildAt(27),this.m_head_1=this.getChildAt(28),this.m_head_2=this.getChildAt(29),this.m_head_3=this.getChildAt(30),this.m_btnMicrophone=this.getChildAt(31),this.m_btnEarphone=this.getChildAt(32),this.m_imgRealtimeHint=this.getChildAt(33),this.m_show_img_0=this.getChildAt(34),this.m_show_img_1=this.getChildAt(35),this.m_show_img_2=this.getChildAt(36),this.m_show_img_3=this.getChildAt(37),this.m_result_ani=this.getChildAt(38),this.m_levelUp=this.getChildAt(39),this.m_button_layer=this.getChildAt(40),this.m_clock_0=this.getChildAt(41),this.m_clock_1=this.getChildAt(42),this.m_clock_2=this.getChildAt(43),this.m_clock_3=this.getChildAt(44),this.m_panelPassLevelTask=this.getChildAt(45),this.m_menu=this.getChildAt(46),this.m_btn_sit_0=this.getChildAt(47),this.m_btn_sit_2=this.getChildAt(48),this.m_btn_sit_3=this.getChildAt(49),this.m_btn_change_seat_0=this.getChildAt(50),this.m_btn_change_seat_2=this.getChildAt(51),this.m_btn_change_seat_3=this.getChildAt(52),this.m_matching=this.getChildAt(53),this.m_prop_panel=this.getChildAt(54),this.m_point_bg=this.getChildAt(55),this.m_card_1=this.getChildAt(56),this.m_card_0=this.getChildAt(57),this.m_card_3=this.getChildAt(58),this.m_card_2=this.getChildAt(59),this.m_btnFriendInvite=this.getChildAt(60),this.m_right_top=this.getChildAt(61),this.m_ruleGuide=this.getChildAt(62),this.m_showDropDown=this.getTransitionAt(0),this.m_hideDropDown=this.getTransitionAt(1),this.m_showResultBg=this.getTransitionAt(2),this.m_hideResultBg=this.getTransitionAt(3),this.m_showPassLevelPanel=this.getTransitionAt(4),this.m_hidePassLevelPanel=this.getTransitionAt(5)},e.URL="ui://5m0hcdqin1sg41",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_Menu:[function(t,e,n){"use strict";cc._RF.push(e,"896ec86c3NJpKiXA4oBetFU","GameSceneUI_Menu");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","Menu")},e.prototype.onConstruct=function(){this.m_roomType=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_btn_exit=this.getChildAt(1),this.m_btn_trust=this.getChildAt(2),this.m_btn_set=this.getChildAt(3),this.m_btn_rule=this.getChildAt(4),this.m_btn_js=this.getChildAt(5)},e.URL="ui://5m0hcdqi9ky63r",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],GameSceneUI_NoteCardLayer:[function(t,e,n){"use strict";cc._RF.push(e,"ee0b4+r185LBog1Gjn5u60Z","GameSceneUI_NoteCardLayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","NoteCardLayer")},e.prototype.onConstruct=function(){this.m_level=this.getControllerAt(0),this.m_cNoteCardType=this.getControllerAt(1),this.m_lookerSpine=this.getChildAt(2),this.m_num_16=this.getChildAt(3),this.m_num_15=this.getChildAt(4),this.m_num_14=this.getChildAt(5),this.m_num_13=this.getChildAt(6),this.m_num_12=this.getChildAt(7),this.m_num_11=this.getChildAt(8),this.m_num_10=this.getChildAt(9),this.m_num_9=this.getChildAt(10),this.m_num_8=this.getChildAt(11),this.m_num_7=this.getChildAt(12),this.m_num_6=this.getChildAt(13),this.m_num_5=this.getChildAt(14),this.m_num_4=this.getChildAt(15),this.m_num_3=this.getChildAt(16),this.m_num_2=this.getChildAt(17),this.m_imgLevel=this.getChildAt(18),this.m_aniNum=this.getTransitionAt(0)},e.URL="ui://5m0hcdqi7oga68",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_NumText:[function(t,e,n){"use strict";cc._RF.push(e,"9da8cZwzwRDhZG6gAkTFPmw","GameSceneUI_NumText");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","NumText")},e.prototype.onConstruct=function(){this.m_cColorType=this.getControllerAt(0),this.m_num=this.getChildAt(0)},e.URL="ui://5m0hcdqi7oga6b",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_PannelPassLevelTask:[function(t,e,n){"use strict";cc._RF.push(e,"ecd99Pcc4ZGjLhhJyjm5JOh","GameSceneUI_PannelPassLevelTask");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","PannelPassLevelTask")},e.prototype.onConstruct=function(){this.m_btnGet=this.getChildAt(2),this.m_txtLevel=this.getChildAt(4),this.m_txtGold=this.getChildAt(5)},e.URL="ui://5m0hcdqiprwha6bs",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_PointLayer:[function(t,e,n){"use strict";cc._RF.push(e,"f69e694NcVOELHxHKpMjWl2","GameSceneUI_PointLayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","PointLayer")},e.prototype.onConstruct=function(){this.m_type=this.getControllerAt(0),this.m_hintType=this.getControllerAt(1),this.m_upType=this.getControllerAt(2),this.m_tpWinType=this.getControllerAt(3),this.m_tpWinType2=this.getControllerAt(4),this.m_seatPos1=this.getControllerAt(5),this.m_seatPos2=this.getControllerAt(6),this.m_seatPos3=this.getControllerAt(7),this.m_seatPos0=this.getControllerAt(8),this.m_mult_ani=this.getChildAt(0),this.m_mult_3=this.getChildAt(1),this.m_mult_2=this.getChildAt(2),this.m_mult_1=this.getChildAt(3),this.m_mult_0=this.getChildAt(4),this.m_bjdj_ani=this.getChildAt(5),this.m_fight_ani=this.getChildAt(6),this.m_level=this.getChildAt(7),this.m_result_ani=this.getChildAt(8),this.m_ttz_label_ani_0=this.getChildAt(9),this.m_ttz_label_ani_1=this.getChildAt(10),this.m_ttz_label_ani_2=this.getChildAt(11),this.m_ttz_label_ani_3=this.getChildAt(12),this.m_tou_mo_0=this.getChildAt(13),this.m_tou_mo_1=this.getChildAt(14),this.m_tou_mo_2=this.getChildAt(15),this.m_tou_mo_3=this.getChildAt(16),this.m_tp_text_0=this.getChildAt(17),this.m_tp_text_1=this.getChildAt(18),this.m_tp_text_2=this.getChildAt(19),this.m_tp_text_3=this.getChildAt(20),this.m_jiefeng_0=this.getChildAt(21),this.m_jiefeng_1=this.getChildAt(22),this.m_jiefeng_2=this.getChildAt(23),this.m_jiefeng_3=this.getChildAt(24),this.m_card_3=this.getChildAt(25),this.m_card_2=this.getChildAt(26),this.m_card_1=this.getChildAt(27),this.m_card_0=this.getChildAt(28),this.m_servicePayAniNode=this.getChildAt(29),this.m_txtServicePay=this.getChildAt(30),this.m_contribute_card_3=this.getChildAt(34),this.m_contribute_card_2=this.getChildAt(35),this.m_contribute_card_1=this.getChildAt(36),this.m_contribute_card_0=this.getChildAt(37),this.m_HG_0=this.getChildAt(38),this.m_HG_2=this.getChildAt(39),this.m_HG_3=this.getChildAt(40),this.m_fly_gold_start_0=this.getChildAt(41),this.m_fly_gold_start_1=this.getChildAt(42),this.m_fly_gold_start_2=this.getChildAt(43),this.m_fly_gold_start_3=this.getChildAt(44),this.m_fly_gold_middle_0=this.getChildAt(45),this.m_fly_gold_middle_1=this.getChildAt(46),this.m_fly_gold_middle_2=this.getChildAt(47),this.m_fly_gold_middle_3=this.getChildAt(48),this.m_level_end_point_1=this.getChildAt(49),this.m_level_end_point_2=this.getChildAt(50),this.m_ts_node=this.getChildAt(51),this.m_up_text=this.getChildAt(53),this.m_level_text=this.getChildAt(55),this.m_tuo_text=this.getChildAt(56),this.m_tp_card_0=this.getChildAt(57),this.m_bg_0=this.getChildAt(58),this.m_score_text_0=this.getChildAt(59),this.m_score_text_01=this.getChildAt(60),this.m_tp_group_0=this.getChildAt(61),this.m_tp_card_1=this.getChildAt(62),this.m_bg_1=this.getChildAt(63),this.m_score_text_1=this.getChildAt(64),this.m_score_text_11=this.getChildAt(65),this.m_tp_group_1=this.getChildAt(66),this.m_tp_card_2=this.getChildAt(67),this.m_bg_2=this.getChildAt(68),this.m_score_text_2=this.getChildAt(69),this.m_score_text_21=this.getChildAt(70),this.m_tp_group_2=this.getChildAt(71),this.m_tp_card_3=this.getChildAt(72),this.m_bg_3=this.getChildAt(73),this.m_score_text_3=this.getChildAt(74),this.m_score_text_31=this.getChildAt(75),this.m_tp_group_3=this.getChildAt(76),this.m_jp_ani_node=this.getChildAt(77),this.m_tp_result_0=this.getChildAt(78),this.m_tp_result_1=this.getChildAt(79),this.m_tp_result_2=this.getChildAt(80),this.m_tp_result_3=this.getChildAt(81)},e.URL="ui://5m0hcdqik22x6c",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_PropPanel:[function(t,e,n){"use strict";cc._RF.push(e,"f667eUo4YNCVZxxCpBOLOUr","GameSceneUI_PropPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","PropPanel")},e.prototype.onConstruct=function(){this.m_seat0=this.getChildAt(0),this.m_seat1=this.getChildAt(1),this.m_seat2=this.getChildAt(2),this.m_seat3=this.getChildAt(3)},e.URL="ui://5m0hcdqijldo66",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_RightTopBar:[function(t,e,n){"use strict";cc._RF.push(e,"0a4bawx1CtBX6P3a3smCS0R","GameSceneUI_RightTopBar");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","RightTopBar")},e.prototype.onConstruct=function(){this.m_cRoomType=this.getControllerAt(0),this.m_isHaveNoteCard=this.getControllerAt(1),this.m_changeSeatType=this.getControllerAt(2),this.m_isOwner=this.getControllerAt(3),this.m_cShowPassLevelTask=this.getControllerAt(4),this.m_btn_passLevel=this.getChildAt(0),this.m_btn_delay=this.getChildAt(1),this.m_btn_menu=this.getChildAt(2),this.m_btn_js=this.getChildAt(4),this.m_btn_changeseat=this.getChildAt(5),this.m_btn_zj=this.getChildAt(6),this.m_btn_notecard=this.getChildAt(7),this.m_num=this.getChildAt(9)},e.URL="ui://5m0hcdqi9ky63j",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_ShowImage:[function(t,e,n){"use strict";cc._RF.push(e,"b3434HFhDpCxK/AD4UNcvc2","GameSceneUI_ShowImage");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","ShowImage")},e.prototype.onConstruct=function(){this.m_imgType=this.getControllerAt(0)},e.URL="ui://5m0hcdqihj9u56",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_SimpleButton:[function(t,e,n){"use strict";cc._RF.push(e,"a9cc25HJm9A5YACGI/HuyZI","GameSceneUI_SimpleButton");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","SimpleButton")},e.prototype.onConstruct=function(){this.m_TMoveUp=this.getTransitionAt(0),this.m_TMoveDown=this.getTransitionAt(1)},e.URL="ui://5m0hcdqiop6oa6cj",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],GameSceneUI_TimePanel:[function(t,e,n){"use strict";cc._RF.push(e,"6325eM1UDpLW77EDzcABTFl","GameSceneUI_TimePanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","TimePanel")},e.prototype.onConstruct=function(){this.m_wifiLevel=this.getControllerAt(0),this.m_time=this.getChildAt(1),this.m_powerLevel=this.getChildAt(2)},e.URL="ui://5m0hcdqilxw5a6df",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_TongHuaShunBar:[function(t,e,n){"use strict";cc._RF.push(e,"e807dP9VXBNi69y2PudgKhq","GameSceneUI_TongHuaShunBar");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","TongHuaShunBar")},e.prototype.onConstruct=function(){this.m_btn_t1=this.getChildAt(1),this.m_btn_t2=this.getChildAt(2),this.m_btn_t3=this.getChildAt(3),this.m_btn_t4=this.getChildAt(4)},e.URL="ui://5m0hcdqioojai",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_TopLeftBar:[function(t,e,n){"use strict";cc._RF.push(e,"36e25bWZLNC9KSMhcGsskra","GameSceneUI_TopLeftBar");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","TopLeftBar")},e.prototype.onConstruct=function(){this.m_cRankLevel=this.getControllerAt(0),this.m_cGameType=this.getControllerAt(1),this.m_multType=this.getControllerAt(2),this.m_myRankUnCheck=this.getChildAt(6),this.m_myRankCheck=this.getChildAt(7),this.m_otherRankUnCheck=this.getChildAt(8),this.m_otherRankCheck=this.getChildAt(9),this.m_levelRank=this.getChildAt(12),this.m_mult=this.getChildAt(15)},e.URL="ui://5m0hcdqioojay",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_Tp_Result:[function(t,e,n){"use strict";cc._RF.push(e,"e6083tQo+hCK7IiZzswwkz0","GameSceneUI_Tp_Result");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","Tp_Result")},e.prototype.onConstruct=function(){this.m_tpWinType=this.getControllerAt(0),this.m_tp_card=this.getChildAt(0),this.m_bg=this.getChildAt(1),this.m_score_text=this.getChildAt(2),this.m_score_text1=this.getChildAt(3),this.m_tp_group=this.getChildAt(4)},e.URL="ui://5m0hcdqiius7o8z",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_YearBeastButton:[function(t,e,n){"use strict";cc._RF.push(e,"ad0eap2ZN1Ah5i0G+AIbGgW","GameSceneUI_YearBeastButton");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","YearBeastButton")},e.prototype.onConstruct=function(){this.m_aniNode=this.getChildAt(0),this.m_imgCountBg=this.getChildAt(1),this.m_hpProgress=this.getChildAt(2),this.m_txtCount=this.getChildAt(4)},e.URL="ui://5m0hcdqiqzcpa6fm",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_adaptCallMultAni:[function(t,e,n){"use strict";cc._RF.push(e,"5d76dgPElNLYpH7Gt/k8oFJ","GameSceneUI_adaptCallMultAni");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","adaptCallMultAni")},e.prototype.onConstruct=function(){this.m_countTime=this.getChildAt(8),this.m_aniHint=this.getTransitionAt(0)},e.URL="ui://5m0hcdqiihtja6d8",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_boxPanelDelayGame:[function(t,e,n){"use strict";cc._RF.push(e,"22ae1ANWWRF34Q8KBDeYu+3","GameSceneUI_boxPanelDelayGame");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","boxPanelDelayGame")},e.prototype.onConstruct=function(){this.m_c_selfPanel=this.getControllerAt(0),this.m_txtHint=this.getChildAt(2),this.m_btnOk=this.getChildAt(3),this.m_btnCancel=this.getChildAt(4),this.m_btnAgree=this.getChildAt(5),this.m_btnReject=this.getChildAt(6),this.m_txtTime=this.getChildAt(7)},e.URL="ui://5m0hcdqijavro9s",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_boxTurnData:[function(t,e,n){"use strict";cc._RF.push(e,"989a5R2rmVEgb4r7Fwd5s/y","GameSceneUI_boxTurnData");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","boxTurnData")},e.prototype.onConstruct=function(){this.m_c_turninfo=this.getControllerAt(0),this.m_txtCurGameNum=this.getChildAt(1),this.m_txtCurTurnNum=this.getChildAt(2),this.m_groupAfterDelay=this.getChildAt(3),this.m_text1=this.getChildAt(5),this.m_txtGameNum=this.getChildAt(6),this.m_groupBeforeDelay=this.getChildAt(7)},e.URL="ui://5m0hcdqijavro9o",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_btnTHS:[function(t,e,n){"use strict";cc._RF.push(e,"77696aD9pdPJ5vA60mkL68J","GameSceneUI_btnTHS");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","btnTHS")},e.prototype.onConstruct=function(){this.m_colorType=this.getControllerAt(0),this.m_statusType=this.getControllerAt(1),this.m_btn_hx=this.getChildAt(1),this.m_btn_ht=this.getChildAt(3),this.m_btn_fk=this.getChildAt(5),this.m_btn_mh=this.getChildAt(7)},e.URL="ui://5m0hcdqioojaj",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_bubbleDelayHint:[function(t,e,n){"use strict";cc._RF.push(e,"b1585JAhnVOTrH1/XUOxbH/","GameSceneUI_bubbleDelayHint");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","bubbleDelayHint")},e.prototype.onConstruct=function(){this.m_txtDelayHint=this.getChildAt(2)},e.URL="ui://5m0hcdqijavroaa",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_callMultTag:[function(t,e,n){"use strict";cc._RF.push(e,"e726e7WDK1HEYq/+nKrHIRs","GameSceneUI_callMultTag");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","callMultTag")},e.prototype.onConstruct=function(){this.m_cMultTag=this.getControllerAt(0)},e.URL="ui://5m0hcdqik2xoa6cp",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_gold:[function(t,e,n){"use strict";cc._RF.push(e,"7cb258mHKBMK6/ghRRfDFoN","GameSceneUI_gold");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","gold")},e.prototype.onConstruct=function(){this.m_icon=this.getChildAt(0)},e.URL="ui://5m0hcdqij5x97a",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_hpProgressBar:[function(t,e,n){"use strict";cc._RF.push(e,"a47ecohXSdAKJN0O2ZRyPVy","GameSceneUI_hpProgressBar");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","hpProgressBar")},e.prototype.onConstruct=function(){this.m_showlight=this.getControllerAt(0),this.m_hp=this.getChildAt(6)},e.URL="ui://5m0hcdqiihmxa6fx",e}(fgui.GProgressBar);n.default=i,cc._RF.pop()},{}],GameSceneUI_ruleGuide:[function(t,e,n){"use strict";cc._RF.push(e,"d8620ByhzdN24ZFi/oBp+fC","GameSceneUI_ruleGuide");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","ruleGuide")},e.prototype.onConstruct=function(){this.m_cGuideType=this.getControllerAt(0),this.m_cMixPassAGuid=this.getControllerAt(1),this.m_cMultGuide=this.getControllerAt(2),this.m_cMultCritGuide=this.getControllerAt(3),this.m_cBroadMultGuide=this.getControllerAt(4),this.m_cBothNewMultGuide=this.getControllerAt(5),this.m_bg=this.getChildAt(0),this.m_txtBroadMult=this.getChildAt(22),this.m_txtBroadMult2=this.getChildAt(26)},e.URL="ui://5m0hcdqipvnza6bk",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_waitAni:[function(t,e,n){"use strict";cc._RF.push(e,"bfda45q7LhDhYx3EuuPDptw","GameSceneUI_waitAni");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","waitAni")},e.prototype.onConstruct=function(){this.m_aniHint=this.getTransitionAt(0)},e.URL="ui://5m0hcdqidgfza6cy",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI_waitLeaderReady:[function(t,e,n){"use strict";cc._RF.push(e,"95a38y56tNOS7Ae9QGJloRC","GameSceneUI_waitLeaderReady");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameSceneUI","waitLeaderReady")},e.prototype.onConstruct=function(){this.m_aniHint=this.getTransitionAt(0)},e.URL="ui://5m0hcdqirm41a6de",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameSceneUI:[function(t,e,n){"use strict";cc._RF.push(e,"d0d2fwO35xLHY2zEAg90b1K","GameSceneUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameSceneUI=void 0;var r,s=t("../../../Framework/UI/BaseUI"),c=t("../../../Framework/UI/FadeUI"),l=t("../../../Framework/Manager/UIManager"),u=t("../../FriendInvite/FriendModel"),d=t("./Model/GameModel"),p=t("../../../Framework/Manager/EventManager"),h=t("../Common/GameCommonModel"),_=t("./GameEvent"),f=t("./GameSceneUI/GameSceneUIBinder"),m=t("../Common/PlayerInfoModel"),g=t("../Common/GameMatching/GameMatchingForNormalUI"),y=t("./Proxy/GameProxy"),I=t("../../../Framework/Manager/CoroutineManager"),C=t("../../UserInfo/UserInfoModel"),M=t("../../../Framework/Root/ModelRoot"),v=t("./GameCardModel/GameCardUISelfHandModel"),E=t("../../Setting/GuanDanGameSettingUI"),A=t("../Common/GameChatUI/GameChatUI"),P=t("./Proxy/GameTableProxy"),b=t("../../Base/Module/Room/RoomModel"),U=t("../CommonLogic/CardLogic/DefaultPokerCardsConst"),S=t("../../Base/View/Common/DialogUI"),T=t("../../UserInfo/GuanDanGameUserInfoUI"),R=t("../CommonLogic/CardRule/CardFunc"),w=t("../../Base/Data/DataConstant"),D=t("../Common/BuyNoteCardUI/BuyNoteCardUI"),O=t("./GameCardUI/CardUIOut"),L=t("../../Base/View/UIHelp"),G=t("../../Base/Data/DataProps"),B=t("./GameTrustUI"),N=t("../Common/GameShopUI/GameShopUI"),F=t("../../../Framework/Manager/AudioManager"),k=t("../../Base/Data/DataSound"),x=t("../CommonLogic/CardLogic/DefaultPokerCardsConst"),j=t("../../Base/Module/Room/RoomModel"),H=t("../Common/GameJSUI/GameJSUI"),W=t("../../FriendInvite/FriendInviteUI"),Y=t("../../Base/Module/Share/ShareManager"),V=t("./GameCardModel/CardCommonFunc"),q=t("./GameCardModel/ManagerOutModel"),K=t("../Common/GameResultUI/GameResultUI"),X=t("../../CreateRoomUI/CreateRoomModel/CreateRoomManagerModel"),J=t("../../Base/Utils/UtilView"),z=t("../../Rule/RuleUI"),Q=t("../../UserInfo/UserInfoUI"),Z=t("../../Setting/SettingModel"),$=t("../../Base/Data/DataEvent"),tt=t("../../Hall/HallUI"),et=t("../../Base/Data/DataBfConfig"),nt=t("../Common/GameControlEnum"),ot=t("../Common/GameSharePopModel"),at=t("../Common/BigCardShare/BigCardShare"),it=t("../../Base/Module/BfAnalytics/BfasManager"),rt=t("../../Base/Module/BfAnalytics/DataPointID"),st=t("../Common/GameGuideUI/GameGuideModel"),ct=t("../Common/GameGuideUI/GameGuideUI"),lt=t("../GameGuide/GuideDescUI"),ut=t("../GameGuide/GuideUI"),dt=t("../Common/GameGuideUI/GameGuideButtonUI"),pt=t("../Common/GameWinMoreUI/GameWinMoreModel"),ht=t("../../Base/Data/DataAdChannel"),_t=t("./GameBoxDelayPannelUI/GameBoxDelayPannleUI"),ft=t("./GameContinueTable/GameContinueTableUI"),mt=t("../../CreateRoomUI/BoxRecordUI"),gt=t("../../Base/Data/DataLocalStorageKey"),yt=t("../../Base/Utils/UtilTime"),It=t("../../Hall/HallModel"),Ct=t("../Common/PassLevelTaskUI/PassLevelTaskModel"),Mt=t("../../Base/Utils/UtilString"),vt=t("../../Base/Data/DataSpineAni"),Et=t("../Common/GameMultTaskUI/GameMultTaskModel"),At=t("../Common/GameMultTaskUI/GameMultTaskUI"),Pt=t("../../Base/Utils/UtilCC"),bt=t("../../CreateRoomUI/CreateRoomModel/CreateRoomConfigModel"),Ut=t("../../Base/Module/Platform/PlatformManager"),St=t("../../Base/Module/Platform/Const/PlatformEventType"),Tt=t("../../Base/Data/DatazOrder"),Rt=t("../../FriendTeam/FriendTeamModel"),wt=t("./GameTest/GameTestUI"),Dt=t("../Common/GameChatUI/GameChatModel"),Ot=t("../Common/GameWinMoreUI/GameWinMoreUI"),Lt=t("../Common/RealTimeVoice/RealTimeVoiceModel"),Gt=t("../Common/BuyNoteCardUI/BuyNoteCardModel"),Bt=t("../../Activity/YearBeast/YearBeastModel"),Nt=t("../../Match/MatchConstant"),Ft=t("../../Match/MatchHintUI/TopHintUI"),kt=t("../../Base/Data/DataClubClientConfig"),xt=t("../../Match/MatchGuideUI/MatchGuideUI");(function(t){t.FilePaiXing1_shunZi="ani1_shunzi",t.FilePaiXing1_sanDaiEr="ani2_3dai2",t.FilePaiXing1_sanLianDui="ani3_3ld",t.FilePaiXing1_gangBan="ani4_gangban",t.FilePaiXing1_jieFeng="ani5_jiefeng",t.FilePaiXing1_touYou="ani6_touyou",t.FilePaiXing1_erYou="ani7_2you",t.FilePaiXing2_zha="ani_4zha",t.FilePaiXing2_twZha="ani_twzha",t.FilePaiXing3_ths="ani_ths"})(r||(r={}));var jt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._recordQueue=[],e._nowPan=0,e._totalPan=0,e._canPlayRoundNums=0,e._nowPlayRoundNums=0,e._boxMult=0,e._boxrule=0,e._showFriendFlag=!0,e._tp_posX={},e._isPlayerLeave=!0,e._isBj={},e._clock=[],e._isLoadPackage=!1,e._thisTouchedCards=[],e._animationJFFlag={},e._animationPlayFlag={},e._receiveTeamCardCount=0,e._outObj={},e._outObjPos={},e._isDismissResult=!1,e._nowTotalid=null,e._historyData=null,e._normalLeftCardNums={},e._teamLeftCardNums={},e._changeSeatTouch=!1,e._reqLeaveFlag=!1,e._isRecording=!1,e._smallCardObj={},e._currentGuideIndex=nt.CRuleGuideEnum.GUIDE_2,e._clockUpdateTime=0,e._batteryUpdateTime=0,e}return a(e,t),Object.defineProperty(e,"uiType",{get:function(){return s.UIType.ScenePart},enumerable:!1,configurable:!0}),e.uiBind=function(){f.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sortingOrder",{get:function(){return Tt.DataZOrder.GameSceneUI},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.adaptFullScreen(),this.initUI()},e.prototype.initListener=function(){p.EventManager.instance.on(St.PlatformEventType.AppHide,this,this.onAppHide),p.EventManager.instance.on(_.GameEvent.PLAYER_ENTER,this,this.onPlayerEnter),p.EventManager.instance.on(_.GameEvent.LOGIC_DATA,this,this.onLogicData),p.EventManager.instance.on(_.GameEvent.PLAYER_STATE_CHANGE,this,this.onPlayerStateChange),p.EventManager.instance.on(_.GameEvent.PLAYER_GLOD_CHANGE,this,this.onPlayerGoldChange),p.EventManager.instance.on(_.GameEvent.PLAYER_LEAVE,this,this.onPlayerLeave),p.EventManager.instance.on(_.GameEvent.TABLE_STATE_CHANGE,this,this.onTableStateChange),p.EventManager.instance.on(_.GameEvent.REFRESH_PLAYER_CARDS_NUMS,this,this.refeshPlayerCardsNum),p.EventManager.instance.on(_.GameEvent.REFRESH_LEVEL,this,this.refreshCardLevel),p.EventManager.instance.on(_.GameEvent.REFRESH_TRUST,this,this.refreshTrust),p.EventManager.instance.on(_.GameEvent.REFRESH_POWER,this,this.refreshPower),p.EventManager.instance.on(_.GameEvent.REFRESH_STEP,this,this.refreshGameStep),p.EventManager.instance.on(_.GameEvent.REFRESH_CLOCK,this,this.refreshClock),p.EventManager.instance.on(_.GameEvent.REFRESH_PLAYCARD,this,this.refreshPlayCard),p.EventManager.instance.on(_.GameEvent.GAME_START,this,this.onGameStart),p.EventManager.instance.on(_.GameEvent.GAME_END,this,this.onGameEnd),p.EventManager.instance.on(_.GameEvent.REFRESH_THS,this,this.refreshTHS),p.EventManager.instance.on(_.GameEvent.TOUCH_CARD_CALLBACK,this,this.touchCardCallback),p.EventManager.instance.on(_.GameEvent.TOUCH_CARD_CALLBACK_LP,this,this.touchCardCallbackLP),p.EventManager.instance.on(_.GameEvent.REFRESH_RELINK_OUTCARD_COUNT,this,this.refreshRelinkOutCarCount),p.EventManager.instance.on(_.GameEvent.REFRESH_GAME_DATA,this,this.refreshGameData),p.EventManager.instance.on(_.GameEvent.SEND_CHATMESSAGE,this,this.onSendChatMessage),p.EventManager.instance.on(_.GameEvent.SEND_PROP,this,this.onSendProp),p.EventManager.instance.on(_.GameEvent.REFRESH_NOTECARD_MINUS_HANDCARDS,this,this.updateNoteCardMinusHandCards),p.EventManager.instance.on(_.GameEvent.REFRESH_PLAYCARD_NOTECARD_NUM,this,this.refreshPlayCardNoteCardNum),p.EventManager.instance.on(_.GameEvent.REFRESH_NOTECARD_FOLLOW_PARTNER,this,this.refreshNoteCardFollowPartner),p.EventManager.instance.on(_.GameEvent.FIGHTING,this,this.onFighting),p.EventManager.instance.on(_.GameEvent.GDMULT,this,this.onGDMult),p.EventManager.instance.on(_.GameEvent.WAIT_CLOCK,this,this.showWaitClock),p.EventManager.instance.on(_.GameEvent.PLAYER_START,this,this.onPlayerStart),p.EventManager.instance.on(_.GameEvent.CONTRIBUTE_DATA,this,this.onContributeData),p.EventManager.instance.on(_.GameEvent.COMMON_EVENT,this,this.onCommonEvent),p.EventManager.instance.on(_.GameEvent.RESULT,this,this.onShowResult),p.EventManager.instance.on(_.GameEvent.TTZ_LIANGPAI,this,this.onTTZLiangPai),p.EventManager.instance.on(_.GameEvent.TAKE_FIRST_ACTION,this,this.onTakeFirst),p.EventManager.instance.on(_.GameEvent.ROOM_JS_RESULT,this,this.onJSResult),p.EventManager.instance.on(_.GameEvent.NOTICE_CHANGE_SEAT,this,this.onNoticeChangeSeat),p.EventManager.instance.on(_.GameEvent.CHANGE_SEAT,this,this.onChangeSeat),p.EventManager.instance.on(_.GameEvent.REFRESH_BOXROOM_SCORE,this,this.refreshBoxRoomScore),p.EventManager.instance.on(_.GameEvent.BOXROOM_RESULT,this,this.showBoxRoomResult),p.EventManager.instance.on(_.GameEvent.SETTING_CHANGE_LAYOUT,this,this.onFreshHS),p.EventManager.instance.on(_.GameEvent.BACKTOLOBBY,this,this.backToLobby),p.EventManager.instance.on(_.GameEvent.TOUCH_BG,this,this.touchBg),p.EventManager.instance.on(_.GameEvent.REFRESH_PLAZA_TEXT,this,this.initRoomConfig),p.EventManager.instance.on(_.GameEvent.BOXROOM_BIG_RESULT,this,this.showBigResult),p.EventManager.instance.on(_.GameEvent.TUO_PAI_RANK_DATA,this,this.onTuoPaiRankData),p.EventManager.instance.on(_.GameEvent.TUO_PAI_RESULT_DATA,this,this.onTuoPaiResultData),p.EventManager.instance.on(_.GameEvent.PLAY_TUO_PAI_RESULT_DATA,this,this.onPlayTuoPaiResult),p.EventManager.instance.on(_.GameEvent.GUIDE_STEP,this,this.onGuideStep),p.EventManager.instance.on(_.GameEvent.WIN_MORE,this,this.showWinMoreButton),p.EventManager.instance.on(_.GameEvent.REMOVE_WIN_MORE_BTN_UI,this,this.hideWinMoreButton),p.EventManager.instance.on(_.GameEvent.CLEAR_GAMESCENE_UI,this,this.onEventClearSceneUI),p.EventManager.instance.on(_.GameEvent.RESP_PROLONGBOX,this,this.onMsgProlongBox),p.EventManager.instance.on(_.GameEvent.PUSH_PROLONGBOXINFO,this,this.onMsgPushProlongBoxInfo),p.EventManager.instance.on(_.GameEvent.SHOW_PROLONGBOX_HINT,this,this.onMsgShowProlongBoxHint),p.EventManager.instance.on(_.GameEvent.PROLONGBOX_SUCCESS,this,this.onEventProlongBoxSuccess),p.EventManager.instance.on(_.GameEvent.BOXROOM_CONTINUE_ROUNDDATA,this,this.onMsgContinueRoundData),p.EventManager.instance.on(_.GameEvent.BOXROOM_DELAY_BTN_ENABLE,this,this.onMsgDelayBtnEnble),p.EventManager.instance.on(_.GameEvent.PUSH_CONTINUEBOXINFO,this,this.onMsgPushContinueBoxInfo),p.EventManager.instance.on(_.GameEvent.NotifyClosePassLevelTask,this,this.onNotifyClosePassLevelTask),p.EventManager.instance.on(_.GameEvent.NotifyShowPassLevelTaskPannel,this,this.onNotifyShowPassLevelTaskPannel),p.EventManager.instance.on(_.GameEvent.NotifyUpdatePassLevelTask,this,this.onNotifyUpdatePassLevelTask),p.EventManager.instance.on(_.GameEvent.NotifyMixPassATotalScore,this,this.onNotifyMixPassATotalScore),p.EventManager.instance.on(_.GameEvent.NotifyMixPassABigResult,this,this.onNotifyMixPassABigResult),p.EventManager.instance.on(_.GameEvent.NotifyCallMultData,this,this.onNotifyCallMultData),p.EventManager.instance.on(_.GameEvent.NotifyCloseGameMultTask,this,this.onNotifyCloseGameMultTask),p.EventManager.instance.on(_.GameEvent.NotifyUpdateGameMultTask,this,this.onNotifyUpdateGameMultTask),p.EventManager.instance.on(St.PlatformEventType.RealTimeVoiceUpdate,this,this.onUpdateRealTimeVoice),p.EventManager.instance.on($.DataEvent.UpdateProp,this,this.onUpdateProp),p.EventManager.instance.on($.DataEvent.YearBeastInfo,this,this.onYearBeastInfoUpdate),p.EventManager.instance.on(Nt.MatchDataEvent.MatchStartHint5,this,this.onMatchStartHint),p.EventManager.instance.on(Nt.MatchDataEvent.MatchExitGame,this,this.onMatchExitGame),this.view.m_right_top.m_btn_notecard.onClick(this.onBtnNoteCard,this),this.view.m_right_top.m_btn_changeseat.onClick(this.onBtnChangeSeat,this),this.view.m_right_top.m_btn_menu.onClick(this.onBtnMenu,this),this.view.m_bottom.m_btn_chat.onClick(this.onBtnChat,this),this.view.m_bottom.m_btn_lp.onClick(this.onBtnCardLP,this),this.view.m_bottom.m_btn_hf.onClick(this.onBtnCardHF,this),this.view.m_head_1.m_btn_add.onClick(this.onBtnStore,this),this.view.m_menu.m_btn_exit.onClick(this.onBtnExit,this),this.view.m_menu.m_btn_trust.onClick(this.onBtnTrust,this),this.view.m_menu.m_btn_set.onClick(this.onBtnSet,this),this.view.m_menu.m_btn_rule.onClick(this.onBtnRule,this),this.view.m_button_layer.m_btn_bc.onClick(this.onBtnNotPlay,this),this.view.m_button_layer.m_btn_cp.onClick(this.onBtnPlayCard,this),this.view.m_button_layer.m_btn_hg.onClick(this.onBtnHG,this),this.view.m_button_layer.m_btn_jg.onClick(this.onBtnJG,this),this.view.m_button_layer.m_btn_ts.onClick(this.onBtnHint,this),this.view.m_button_layer.m_btn_zb.onClick(this.onBtnReady,this),this.view.m_button_layer.m_btn_zb2.onClick(this.onBtnReady,this),this.view.m_ths_bar.m_btn_t1.onClick(this.onBtnTHS_1,this),this.view.m_ths_bar.m_btn_t2.onClick(this.onBtnTHS_2,this),this.view.m_ths_bar.m_btn_t3.onClick(this.onBtnTHS_3,this),this.view.m_ths_bar.m_btn_t4.onClick(this.onBtnTHS_4,this),this.view.m_menu.onClick(this.onBtnMenuBg,this),this.view.m_btn_sit_0.onClick(this.onBtnSit_0,this),this.view.m_btn_sit_2.onClick(this.onBtnSit_2,this),this.view.m_btn_sit_3.onClick(this.onBtnSit_3,this),this.view.m_btn_change_seat_0.onClick(this.onBtnChangeSit_0,this),this.view.m_btn_change_seat_2.onClick(this.onBtnChangeSit_2,this),this.view.m_btn_change_seat_3.onClick(this.onBtnChangeSit_3,this),this.view.m_btn_sit_3.onClick(this.onBtnSit_3,this),this.view.m_right_top.m_btn_zj.onClick(this.onBtnBoxRecord,this),this.view.m_right_top.m_btn_delay.onClick(this.onBtnDelayBoxGame,this),this.view.m_menu.m_btn_js.onClick(this.onBtnJS,this),this.view.m_right_top.m_btn_js.onClick(this.onBtnJS,this),this.view.m_button_layer.m_btn_yq.onClick(this.onBtnShare,this),this.view.m_button_layer.m_moreWin_node.onClick(this.onBtnGetMoreWin,this),this.view.m_btnFriendInvite.onClick(this.onBtnFriendInvite,this),this.view.m_head_0.m_head.onClick(this.onBtnHead_0,this),this.view.m_head_1.m_head.onClick(this.onBtnHead_1,this),this.view.m_head_2.m_head.onClick(this.onBtnHead_2,this),this.view.m_head_3.m_head.onClick(this.onBtnHead_3,this),this.view.m_ruleGuide.m_bg.onClick(this.onBtnRuleGuideStep,this),this.view.m_right_top.m_btn_passLevel.onClick(this.onBtnPassLevelTask,this),this.view.m_panelPassLevelTask.m_btnGet.onClick(this.onBtnGetPassLevelAward,this),this.view.m_button_layer.m_btn_notMult.onClick(this.onBtnNotCallMult,this),this.view.m_button_layer.m_btn_mult.onClick(this.onBtnCallMult,this),this.view.m_btnMultTask.onClick(this.onBtnMultTask,this),this.view.m_btnMicrophone.onClick(this.btnMicrophone,this),this.view.m_btnEarphone.onClick(this.btnEarphone,this),this.view.m_button_layer.m_btn_yearBeast.onClick(this.onBtnYearBeast,this)},e.prototype.stopCoroutine=function(){},e.prototype.adaptFullScreen=function(){if(J.UtilView.isFullScreen()){this.view.m_top_left.x+=44,this.view.m_head_0.x+=44,this.view.m_head_1.x+=44,this.view.m_btn_sit_0.x+=44,this.view.m_btn_change_seat_0.x+=44,this.view.m_clock_0.x+=44,this.view.m_show_img_0.x+=44,this.view.m_card_0.x+=44,this.view.m_card_1.x+=44,this.view.m_btnFriendInvite.x+=44,this.view.m_point_bg.m_tou_mo_0.x+=44,this.view.m_point_bg.m_tou_mo_1.x+=44,this.view.m_point_bg.m_jiefeng_0.x+=44,this.view.m_point_bg.m_jiefeng_1.x+=44,this.view.m_point_bg.m_ttz_label_ani_0.x+=44,this.view.m_point_bg.m_card_0.x+=44,this.view.m_point_bg.m_fly_gold_start_0.x+=44,this.view.m_point_bg.m_fly_gold_start_1.x+=44,this.view.m_prop_panel.m_seat0.x+=44,this.view.m_prop_panel.m_seat1.x+=44,this.view.m_point_bg.m_tp_text_0.x+=44,this.view.m_point_bg.m_tp_text_1.x+=44,this.view.m_point_bg.m_level_end_point_1.x+=44,this.view.m_point_bg.m_level_end_point_2.x+=44,this.view.m_head_2.x-=44,this.view.m_btnMicrophone.x-=44,this.view.m_btnEarphone.x-=44,this.view.m_imgRealtimeHint.x-=44,this.view.m_btn_sit_2.x-=44,this.view.m_btn_change_seat_2.x-=44,this.view.m_clock_2.x-=44,this.view.m_show_img_2.x-=44,this.view.m_card_2.x-=44,this.view.m_bottom.m_btn_chat.x-=44,this.view.m_bottom.m_btn_hf.x-=44,this.view.m_bottom.m_btn_lp.x-=44,this.view.m_bottom.m_btn_lp_gray.x-=44,this.view.m_note_card.x-=44,this.view.m_point_bg.m_tou_mo_2.x-=44,this.view.m_point_bg.m_jiefeng_2.x-=44,this.view.m_point_bg.m_ttz_label_ani_2.x-=44,this.view.m_point_bg.m_card_2.x-=44,this.view.m_point_bg.m_fly_gold_start_2.x-=44,this.view.m_prop_panel.m_seat2.x-=44,this.view.m_point_bg.m_tp_text_2.x-=44;var t=this.view.m_bottom.node.getContentSize();this.view.m_bottom.setSize(t.width,t.height+14);var e=this.view.m_bottom_bg.node.getContentSize();this.view.m_bottom_bg.setSize(e.width,e.height+10),this.view.m_bottom.m_btn_chat.y-=10,this.view.m_bottom.m_btn_hf.y-=10,this.view.m_bottom.m_btn_lp.y-=10,this.view.m_bottom.m_btn_lp_gray.y-=10,this.view.m_ths_bar.y-=10,this.view.m_head_1.y-=10,this.view.m_card_1.y-=10,this.view.m_point_bg.m_fly_gold_start_1.y-=10,this.view.m_point_bg.m_tou_mo_1.y-=10,this.view.m_point_bg.m_tp_text_1.y-=10}J.UtilView.isIpadScreen()&&(this.view.m_top_left.y+=20,this.view.m_right_top.x+=80),this._btn_Friend_Pos=this.view.m_btnFriendInvite.node.getPosition();for(var n=0;n<m.MAX_PLAYER;++n)this._tp_posX[n]=this.view.m_point_bg["m_tp_text_"+n].node.getPosition();this._bjdj_Node_Pos=this.view.m_point_bg.m_bjdj_ani.node.getPosition(),this._level_Node_Pos=this.view.m_point_bg.m_level.node.getPosition()},e.prototype.initUI=function(){for(var t=0;t<m.MAX_PLAYER;++t)this._clock.push(this.newClockData());this.initRuleGuideUI(),this.initRoomConfig(),this.resetNoteCardNum(),this.initDefaultData(),this.initNoteCard(),this.initDirectFriendSpine(),this.initHS(),this.clubCheckAuthorize(),this.onUpdateRealTimeVoice(),this.initTestEndComp()},e.prototype.onPlayerEnter=function(t){this.onPlayerGoldChange(t.numid),this.dealBoxRoomButton()},e.prototype.onLogicData=function(t){var e=d.GameModel.instance.getGameStep();if(this._nowPan=t.nowPan,this._totalPan=t.totalPan,this._canPlayRoundNums=t.canPlayRoundNums,this._nowPlayRoundNums=t.nowPlayRoundNums,this._boxMult=t.isMult,this._boxrule=t.rule,this._logicdata=t,this.isBoxRoom())return bt.CreateRoomConfigModel.saveRoomRule(this._gameID,t),this.initBoxRoom(t),this.updateChangeSitBtns(),this.onUpdateRealTimeVoice(),void this.checkBoxRealTimeVoice();e!==d.GameStepEnum.GAME_STEP_PLAY_CARD&&e!==d.GameStepEnum.GAME_STEP_NONE&&!h.GameCommonModel.instance.isMatchRoomModel()&&(h.GameCommonModel.instance.isMixPassARoom()&&d.GameModel.instance.isMixPassAFirstRound()||!h.GameCommonModel.instance.isMixPassARoom())&&this.showServicePayAnimation(t.servicePay)},e.prototype.isBoxRoom=function(){return h.GameCommonModel.instance.isBoxRoom()},e.prototype.isGoldRoom=function(){return h.GameCommonModel.instance.isGoldRoom()},e.prototype.initBoxRoom=function(t){var e=m.PlayerInfoModel.instance.getPlayerByNumid(C.UserInfoModel.instance.userInfo.numID),n="\u7ecf\u5178\u63bc\u86cb";this._gameID===et.GameIDInfo.ERREN_GD.id?n="\u4e8c\u4eba\u7ecf\u5178":this._gameID===et.GameIDInfo.TTZ_GD.id?n="\u63bc\u86cb\u56e2\u56e2\u8f6c":this._gameID===et.GameIDInfo.CLASSIC_GD.id?(n="\u7ecf\u5178\u63bc\u86cb",1===this._logicdata.isBXP&&(n="\u63bc\u86cb\u4e0d\u6d17\u724c")):this._gameID===et.GameIDInfo.TP_GD.id&&(n="\u63bc\u86cb\u5e26\u62d6"),this.view.m_info.m_name.text=n,this.view.m_info.m_roomid.text=h.GameCommonModel.instance.getBoxID().toString();var o="";if(this._gameID===et.GameIDInfo.ERREN_GD.id||this._gameID===et.GameIDInfo.TTZ_GD.id)o=t.totalPan+"\u5c40";else if(this._gameID===et.GameIDInfo.CLASSIC_GD.id||this._gameID===et.GameIDInfo.NO_SHUFFLE_GD.id||this._gameID===et.GameIDInfo.TP_GD.id){var a="\u8fc7";14===t.rule?a+="A":a+=t.rule.toString(),t.isMult&&(a+=" \u56db\u70b8\u7ffb\u500d",this.view.m_info.m_isMult.selectedIndex=nt.BoxInfoControlTypeEnum.NEED_SZFB,this.view.m_top_left.m_multType.selectedIndex=nt.TopLeftMultControlTypeEnum.SHOW),o=a}this.view.m_info.m_rule.text=o,this._nowPan>0?(this.showFriendInviteBtn(!1),this.view.m_menu.m_roomType.selectedIndex=nt.MenuControlTypeEnum.PLAZA_BOX_START,this.isGamePlay()||e.playstate!=club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_READYED&&(this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.TEMP_READY),this.view.m_button_layer.m_btn_yq.visible=!1):(e.playstate!==club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_READYED&&(this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.READY),this.showFriendInviteBtn(!0),this._showFriendFlag&&(this._showFriendFlag=!1,this.onBtnFriendInvite()),this.view.m_button_layer.m_btn_yq.visible=!0,this.showBoxRoomPanInfo(!0)),0===this._nowPan?this.view.m_right_top.m_isOwner.selectedIndex=h.GameCommonModel.instance.isBoxCreator()?nt.TopRightOwnerControlTypeEnum.SHOW:nt.TopRightOwnerControlTypeEnum.HIDE:this.view.m_right_top.m_isOwner.selectedIndex=0===this._nowPan?nt.TopRightOwnerControlTypeEnum.SHOW:nt.TopRightOwnerControlTypeEnum.GAME_START,this.iniBoxRoundInfo(),this.updateBattery(),this.updateTime()},e.prototype.updateChangeSitBtns=function(){for(var t=this.isClub4Seat(),e=0;e<m.MAX_PLAYER;e++)if(1!=e){var n=m.PlayerInfoModel.instance.getPlayerByLocalSeat(e);this.view["m_btn_change_seat_"+e].visible=t&&0==this._nowPan&&!this.isGamePlay()&&null!=n&&null!=n}},e.prototype.showServicePayAnimation=function(t){var e=this,n=0;Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_GAME_DJF,function(o){var a=o.getComponent(sp.Skeleton);o.setPosition(cc.v2(0,0)),a.setEventListener(function(o,a){"shuzi"===a.data.name&&(1==++n?(e.view.m_point_bg.m_txtServicePay.text=t.toString()+"\u91d1\u5e01",e.view.m_point_bg.m_txtServicePay.visible=!0):2===n&&(e.view.m_point_bg.m_txtServicePay.visible=!1))}),a.setCompleteListener(function(t){"duijufei"===(t.animation?t.animation.name:"")&&e.view.m_point_bg.m_servicePayAniNode.node.removeAllChildren()}),a.setAnimation(0,"duijufei",!1)},this.view.m_point_bg.m_servicePayAniNode.node)},e.prototype.onEventClearSceneUI=function(){this.clearUI(),this._historyData=null;for(var t=0;t<m.PlayerInfoModel.instance.getNowGamePlayer();++t){var e=m.PlayerInfoModel.instance.serverToLocal(t);this.view["m_head_"+e].m_score.text=0}},e.prototype.newClockData=function(){return{clock_co:null,time:0}},e.prototype.clearUI=function(){this.view.m_resultBg.selectedIndex=nt.ResultBgControlTypeEnum.HIDE,this.killClock(m.MAX_PLAYER),d.GameModel.instance.clearOutCard(m.MAX_PLAYER),d.GameModel.instance.clearHandCard(),this.showPlayerCardsNum(m.MAX_PLAYER,!1),this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.NONE,this.showImg(m.MAX_PLAYER,!1,nt.CImgTypeEnum.HIDE),this.view.m_waitLeaderReady.visible=!1,this.hideCallMultHeadTag(m.MAX_PLAYER),this.showCallMultWaitAni(!1),this.resetTHS(),this.resetNoteCardNum(),this.resetMult(),this.onCommonEvent({type:nt.PointLayerHintControlTypeEnum.HIDE}),d.GameModel.instance.clearContributeData(),this.resetHead(m.MAX_PLAYER),this.clearData(),this.showFirstSecondAnimation(m.MAX_PLAYER,!1),this.hideWinMoreButton()},e.prototype.clearData=function(){this._isBj={};for(var t=0;t<m.MAX_PLAYER;++t)this._animationPlayFlag[t]=!1,this._animationJFFlag[t]=!1},e.prototype.resetMult=function(){this.updateMultNum(1)},e.prototype.isGamePlay=function(){return m.PlayerInfoModel.instance.isGamePlay()},e.prototype.onPlayerStateChange=function(t){var e=this;console.log("onPlayerStateChange:",t);var n=m.PlayerInfoModel.instance.getLocalSeatByNumid(t.numid),o=t.numid==C.UserInfoModel.instance.userInfo.numID;(o||!Number.isNaN(n.lseat)&&n.lseat!==m.LocalSeatEnum.ERROR)&&(t.state===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_ENTERED?o?(l.UIManager.instance.isExist(g.GameMatchingForNormalUI)&&l.UIManager.instance.close(g.GameMatchingForNormalUI),this.isBoxRoom()&&this._nowPan>0?this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.TEMP_READY:this._reqLeaveFlag||(this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.READY,this.isBoxRoom()&&(this.view.m_button_layer.m_yqType.selectedIndex=nt.ButtonLayerYQControlTypeEnum.NOT_MEDIUM,this.view.m_button_layer.m_btn_yq.visible=!0))):this.showImg(n.lseat,!1,nt.CImgTypeEnum.HIDE):t.state===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_READYED?(o&&(l.UIManager.instance.isExist(g.GameMatchingForNormalUI)&&l.UIManager.instance.close(g.GameMatchingForNormalUI),this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.NONE,h.GameCommonModel.instance.isMixPassARoom()?this.view.m_right_top.m_changeSeatType.selectedIndex=d.GameModel.instance.isMixPassAGameEnd()?nt.TopRightChangeSeatControlTypeEnum.CAN_CHANGE:nt.TopRightChangeSeatControlTypeEnum.NOT_CAN_CHANGE:this.view.m_right_top.m_changeSeatType.selectedIndex=nt.TopRightChangeSeatControlTypeEnum.CAN_CHANGE,this.view.m_resultBg.selectedIndex=nt.ResultBgControlTypeEnum.HIDE),this.showImg(n.lseat,!0,nt.CImgTypeEnum.SHOW_READY)):t.state===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_PLAYING?o&&(l.UIManager.instance.isExist(g.GameMatchingForNormalUI)&&l.UIManager.instance.close(g.GameMatchingForNormalUI),this.view.m_right_top.m_changeSeatType.selectedIndex=nt.TopRightChangeSeatControlTypeEnum.NOT_CAN_CHANGE,this.view.m_resultBg.selectedIndex=nt.ResultBgControlTypeEnum.HIDE,this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.NONE):t.state===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_IN_QUEUE?(o&&(this.clearUI(),!l.UIManager.instance.isExist(g.GameMatchingForNormalUI)&&l.UIManager.instance.open(g.GameMatchingForNormalUI).then(function(){e.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.NONE}),this.showPlayerHead(m.MAX_PLAYER,!1),this.hideCallMultHeadTag(m.MAX_PLAYER),this.view.m_right_top.m_changeSeatType.selectedIndex=nt.TopRightChangeSeatControlTypeEnum.CAN_CHANGE,this.view.m_resultBg.selectedIndex=nt.ResultBgControlTypeEnum.HIDE),this.showImg(n.lseat,!1,nt.CImgTypeEnum.HIDE)):t.state===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_IN_ROOM?this.view.m_right_top.m_changeSeatType.selectedIndex=nt.TopRightChangeSeatControlTypeEnum.CAN_CHANGE:t.state===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_STARTED&&(h.GameCommonModel.instance.isMixPassARoom()?this.view.m_right_top.m_changeSeatType.selectedIndex=d.GameModel.instance.isMixPassAGameEnd()?nt.TopRightChangeSeatControlTypeEnum.CAN_CHANGE:nt.TopRightChangeSeatControlTypeEnum.NOT_CAN_CHANGE:this.view.m_right_top.m_changeSeatType.selectedIndex=nt.TopRightChangeSeatControlTypeEnum.CAN_CHANGE,h.GameCommonModel.instance.isMixPassARoom()&&n.lseat===m.LocalSeatEnum.SELF&&(this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.TEMP_READY)),this.isGamePlay()?(Z.SettingModel.instance.data.isLiPaiHeng?this.view.m_button_layer.y=this._buttonLayer_y+120:this.view.m_button_layer.y=this._buttonLayer_y,this.showSit(m.MAX_PLAYER,!1)):this.view.m_button_layer.y=this._buttonLayer_y,this.onPlayerGoldChange(t.numid))},e.prototype.onPlayerGoldChange=function(t){console.log("onPlayerGoldChange:",t);var e=m.PlayerInfoModel.instance.getLocalSeatByNumid(t);if(e.lseat!==m.LocalSeatEnum.ERROR){var n=this.view["m_head_"+e.lseat];d.GameModel.instance.isGuideModel()?(n.m_name.text=3===e.lseat?"\u4f60\u7684\u961f\u53cb":"\u4f60\u7684\u5bf9\u624b",n.m_score.text=""):(n.m_name.text=L.UIHelp.formatNicknameL(e.data.nickname,8),this.isBoxRoom()||h.GameCommonModel.instance.isMixPassARoom()||(n.m_score.text=Mt.UtilString.getCurrencyShortString(e.data.playscore))),n.visible=!0,n.m_head.m_name.m_head.url=m.PlayerInfoModel.instance.getHead(e.data.numid),this.showSit(e.lseat,!1),e.data.playstate===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_READYED?this.showImg(e.lseat,!0,nt.CImgTypeEnum.SHOW_READY):e.data.playstate!==club.client.game.PlayState.PLAYSTATES.PLAYSTATE_NONE&&e.data.playstate!==club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_ENTERED||this.showImg(e.lseat,!1,nt.CImgTypeEnum.HIDE)}else t===C.UserInfoModel.instance.userInfo.numID&&e.data&&(!e.data.gamegold||this.isBoxRoom()||h.GameCommonModel.instance.isMixPassARoom()||(this.view.m_head_1.m_score.text=Mt.UtilString.getCurrencyShortString(e.data.playscore)),this.view.m_head_1.m_head.m_name.m_head.url=m.PlayerInfoModel.instance.getHead(e.data.numid))},e.prototype.showSit=function(t,e){if(t!==m.LocalSeatEnum.SELF)if(t!==m.MAX_PLAYER){if(this.view["m_btn_sit_"+t].visible=e,d.GameModel.instance.getLogicData()){var n=this.isClub4Seat();this.view["m_btn_change_seat_"+t].visible=n&&0==this._nowPan&&!this.isGamePlay()&&!e}}else for(var o=0;o<m.MAX_PLAYER;++o)this.showSit(o,e)},e.prototype.isClubMode=function(){return h.GameCommonModel.instance.getRoomType()===j.ClubShowFlags.BOXS_LIST&&X.CreateRoomManagerModel.instance.isClubMode(this._gameID)},e.prototype.isClub4Seat=function(){return h.GameCommonModel.instance.getRoomType()===j.ClubShowFlags.BOXS_LIST&&X.CreateRoomManagerModel.instance.isClubMode4Seat(this._gameID)},e.prototype.dealBoxRoomButton=function(){if(this.isBoxRoom())return this.isGamePlay()?(l.UIManager.instance.isExist(W.FriendInviteUI)&&l.UIManager.instance.close(W.FriendInviteUI),void this.showFriendInviteBtn(!1)):void(this.isBoxRoom()&&(this.view.m_show_img_1.m_imgType.selectedIndex===nt.CImgTypeEnum.SHOW_READY?this.view.m_button_layer.m_yqType.selectedIndex=nt.ButtonLayerYQControlTypeEnum.MEDIUM:this.view.m_button_layer.m_yqType.selectedIndex=nt.ButtonLayerYQControlTypeEnum.NOT_MEDIUM))},e.prototype.onPlayerLeave=function(t){var e=m.PlayerInfoModel.instance.getPlayerByNumid(t.numID);if(null!==e){var n=m.PlayerInfoModel.instance.serverToLocal(e.seatid);if(n!==m.LocalSeatEnum.ERROR){if(t.numID===C.UserInfoModel.instance.userInfo.numID){if(m.PlayerInfoModel.instance.clearOtherPlayer(),this.isBoxRoom())for(var o=0;o<m.MAX_PLAYER;++o)o!==m.LocalSeatEnum.SELF&&this.showPlayerHead(o,!1);n=m.MAX_PLAYER}else this.isBoxRoom()&&(this.showPlayerHead(n,!1),this.hideCallMultHeadTag(n)),m.PlayerInfoModel.instance.playerLeaveClearData(t.numID);this.dealBoxRoomButton(),this.showSit(n,!0),this.showSmallKongGong(n,!1),this._isPlayerLeave=!0,this.killClock(n),this.showImg(n,!1,nt.CImgTypeEnum.HIDE),this.resetCardLevel(),l.UIManager.instance.isExist(B.GameTrustUI)&&l.UIManager.instance.close(B.GameTrustUI),this.showFirstSecondAnimation(m.MAX_PLAYER,!1)}}},e.prototype.showFirstSecondAnimation=function(t,e){if(t!==m.MAX_PLAYER)this.view.m_point_bg["m_tou_mo_"+t].visible=e,e||(this.view.m_point_bg["m_tou_mo_"+t].node.removeAllChildren(),this.view.m_point_bg["m_tp_text_"+t].visible=!1,this.view.m_point_bg["m_tp_text_"+t].node.setPosition(this._tp_posX[t]));else for(var n=0;n<m.MAX_PLAYER;++n)this.showFirstSecondAnimation(n,e)},e.prototype.resetHead=function(t){if(t!==m.MAX_PLAYER){var e=this.view["m_head_"+t];e.m_winLoseType.selectedIndex=nt.HeadWinLoseControlTypeEnum.HIDE,e.m_resultType.selectedIndex=nt.HeadResultControlTypeEnum.HIDE,e.m_resultAnimation.selectedIndex=nt.HeadResultAnimationControlTypeEnum.HIDE,e.m_seatType&&(e.m_seatType.selectedIndex=nt.CHeadSeatTypeEnum.NONE),this._smallCardObj[t]&&this._smallCardObj[t].node.removeFromParent();var n=0;1===t?(n=-55,e.m_score_bg.x=n):0===t?(n=-71,e.m_score_bg.x=n):2===t&&(n=-158,e.m_score_bg2.x=n)}else for(var o=0;o<m.MAX_PLAYER;++o)this.resetHead(o)},e.prototype.showSmallKongGong=function(t,e){if(t!==m.MAX_PLAYER)this.view["m_head_"+t].m_kg_small.visible=e,e||this.view["m_head_"+t].m_kg_small.node.removeAllChildren();else for(var n=0;n<m.MAX_PLAYER;++n)this.showSmallKongGong(n,e)},e.prototype.resetCardLevel=function(){this.view.m_top_left.m_cRankLevel.selectedIndex=nt.CTopLeftRankLevelEnum.NONE,this.view.m_top_left.m_myRankCheck.text="2",this.view.m_top_left.m_myRankUnCheck.text="2",this.view.m_top_left.m_otherRankCheck.text="2",this.view.m_top_left.m_otherRankUnCheck.text="2",this.view.m_top_left.m_levelRank.text="2"},e.prototype.showPlayerHead=function(t,e){if(t!==m.MAX_PLAYER)(e||t!==m.LocalSeatEnum.SELF)&&(this.view["m_head_"+t].visible=e);else for(var n=0;n<m.MAX_PLAYER;++n)this.showPlayerHead(n,e)},e.prototype.refeshPlayerCardsNum=function(t){t.nums<=10&&(this.view["m_head_"+t.seat].m_cardType.selectedIndex=t.nums==nt.HeadCardControlTypeEnum.HIDE?nt.HeadCardControlTypeEnum.HIDE:nt.HeadCardControlTypeEnum.SHOW,this.view["m_head_"+t.seat].m_num.text=t.nums,this._isBj[t.seat]?(this.view["m_head_"+t.seat].m_bj.node.stopAllActions(),this.view["m_head_"+t.seat].m_bjType.selectedIndex=nt.HeadBJControlTypeEnum.HIDE):t.nums>0&&(this._isBj[t.seat]=!0,this.view["m_head_"+t.seat].m_bj.node.stopAllActions(),this.view["m_head_"+t.seat].m_bjType.selectedIndex=nt.HeadBJControlTypeEnum.SHOW,this.view["m_head_"+t.seat].m_bj.node.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(.5),cc.fadeIn(.5)))))),0===t.seat?this.view["m_head_"+t.seat].m_cardpos.selectedIndex=nt.HeadCardPosControlTypeEnum.LEFT:2===t.seat&&(this.view["m_head_"+t.seat].m_cardpos.selectedIndex=nt.HeadCardPosControlTypeEnum.RIGHT)},e.prototype.showPlayerCardsNum=function(t,e){if(t!=m.MAX_PLAYER)this.view["m_head_"+t].m_cardType.selectedIndex=e?nt.HeadCardControlTypeEnum.SHOW:nt.HeadCardControlTypeEnum.HIDE,this.view["m_head_"+t].m_bjType.selectedIndex=nt.HeadBJControlTypeEnum.HIDE;else for(var n=0;n<m.MAX_PLAYER;++n)this.showPlayerCardsNum(n,e)},e.prototype.refreshCardLevel=function(){if(!d.GameModel.instance.isGuideModel()){var t=d.GameModel.instance.getGameStep();if(t===d.GameStepEnum.GAME_STEP_PLAY_CARD){var e=d.GameModel.instance.getCardLevelData(),n=d.GameModel.instance.getGameData(m.LocalSeatEnum.SELF);return this.view.m_top_left.m_cRankLevel.selectedIndex=e.cardLevel_team===n.team?nt.CTopLeftRankLevelEnum.SHOW_SELF:nt.CTopLeftRankLevelEnum.SHOW_OTHER,this.view.m_top_left.m_levelRank.text=Mt.UtilString.convertToStrCardNum(e.cardLevel),void this.refreshMatchLevelRank(e.cardLevel)}if(t!==d.GameStepEnum.GAME_STEP_WIN_LOST){var o=d.GameModel.instance.getCardLevelData(),a=d.GameModel.instance.getGameData(m.LocalSeatEnum.SELF);if(this.view.m_note_card.m_level.selectedIndex=o.cardLevel-2,this._gameID===et.GameIDInfo.TTZ_GD.id)this.view.m_top_left.m_levelRank.text=Mt.UtilString.convertToStrCardNum(o.cardLevel);else{if(a.team!=o.cardLevel_team||h.GameCommonModel.instance.isMixPassARoom()||(a.level=o.cardLevel),this.view.m_top_left.m_myRankCheck.text=Mt.UtilString.convertToStrCardNum(a.level),this.view.m_top_left.m_myRankUnCheck.text=Mt.UtilString.convertToStrCardNum(a.level),a.team===d.GameTeamEnum.TEAM_ONE?(this.view.m_top_left.m_otherRankCheck.text=Mt.UtilString.convertToStrCardNum(o.cardLevel_2),this.view.m_top_left.m_otherRankUnCheck.text=Mt.UtilString.convertToStrCardNum(o.cardLevel_2)):a.team===d.GameTeamEnum.TEAM_TWO&&(this.view.m_top_left.m_otherRankCheck.text=Mt.UtilString.convertToStrCardNum(o.cardLevel_1),this.view.m_top_left.m_otherRankUnCheck.text=Mt.UtilString.convertToStrCardNum(o.cardLevel_1)),o.cardLevel_1==o.cardLevel_2&&2===o.cardLevel_2)return this.view.m_top_left.m_cRankLevel.selectedIndex=nt.CTopLeftRankLevelEnum.NONE,void this.refreshMatchLevelRank(o.cardLevel);this.view.m_top_left.m_cRankLevel.selectedIndex=o.cardLevel_team===a.team?nt.CTopLeftRankLevelEnum.SHOW_SELF:nt.CTopLeftRankLevelEnum.SHOW_OTHER,this.refreshMatchLevelRank(o.cardLevel)}}}},e.prototype.refreshMatchLevelRank=function(t){h.GameCommonModel.instance.isMatchRoomModel()&&(console.log("refreshMatchLevelRank.log:",t),this.view.m_top_left.m_levelRank.text=Mt.UtilString.convertToStrCardNum(t))},e.prototype.refreshTrust=function(t){t.seat===m.PlayerInfoModel.instance.getSelfSeat()&&(t.flag===y.TrustEnum.TRUST?!l.UIManager.instance.isExist(B.GameTrustUI)&&l.UIManager.instance.open(B.GameTrustUI).then(function(){}):l.UIManager.instance.isExist(B.GameTrustUI)&&l.UIManager.instance.close(B.GameTrustUI))},e.prototype.refreshPower=function(t){if(d.GameModel.instance.getGameStep()===d.GameStepEnum.GAME_STEP_PLAY_CARD){if(d.GameModel.instance.isGuideModel()&&st.GameGuideModel.instance.getNowStepID()===st.GuideEventEnum.GUIDE_2)return l.UIManager.instance.open(dt.GameGuideButtonUI).then(function(t){t.showUI(dt.CShowGuideBtnTypeEnum.PLAY,dt.CGuideBtnMaskShowTypeEnum.NOT_PLAY)}),void(this.view.m_button_layer.visible=!1);var e=M.ModelRoot.instance.get(v.GameCardUISelfHandModel).checkHadBidCards();this.onCommonEvent(e?{type:nt.PointLayerHintControlTypeEnum.HIDE}:{type:nt.PointLayerHintControlTypeEnum.SHOW_NOT_PLAY});var n=t.power;n&d.PowerEnum.CAN_PLAY&&(this.view.m_button_layer.visible=!0,this.view.m_button_layer.m_canPlay.selectedIndex=nt.ButtonLayerCanPlayControlTypeEnum.NOT_CAN_PLAY,n&d.PowerEnum.CAN_NOT_PLAY?this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.PLAY_CARD:this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.FIRST_PLAY_CARD,this.touchCardCallback(M.ModelRoot.instance.get(v.GameCardUISelfHandModel).getSelectCardsInfo().putCards,!0))}},e.prototype.autoPutCards=function(){et.DataBfConfig.isNormalEnv()||this.view.m_button_layer.m_buttonType.selectedIndex!==d.CButtonLayerTypeEnum.PLAY_CARD&&this.view.m_button_layer.m_buttonType.selectedIndex!==d.CButtonLayerTypeEnum.FIRST_PLAY_CARD||(this.onBtnHint(),this.onBtnPlayCard())},e.prototype.refreshGameStep=function(){var t=d.GameModel.instance.getGameStep();if(t===d.GameStepEnum.GAME_STEP_CALL_MULT)console.log("GAME_STEP_CALL_MULT"),this.showAdaptCallMultAni(!0);else if(t===d.GameStepEnum.GAME_STEP_SHOW_CALLMULT_ANI)this.showCallMultWaitAni(!1),console.log("GAME_STEP_SHOW_CALLMULT_ANI");else if(t===d.GameStepEnum.GAME_STEP_TAKE_FIRST)this.showAdaptCallMultAni(!1),this.showImg(m.MAX_PLAYER,!1,nt.CImgTypeEnum.HIDE);else if(t===d.GameStepEnum.GAME_STEP_CONTRIBUTE)this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.NONE,this.view.m_bottom.m_lpType.selectedIndex=nt.LPControlTypeEnum.NOT_LP;else if(t===d.GameStepEnum.GAME_STEP_SHOW_CONTRIBUTE){this.killClock(m.LocalSeatEnum.SELF),this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.NONE,this.view.m_bottom.m_lpType.selectedIndex=v.GameCardUISelfHandModel.instance.isShowRestoreBtn()?nt.LPControlTypeEnum.RESTORE_LP:nt.LPControlTypeEnum.CAN_LP,this.showHGAnimation(m.MAX_PLAYER,!1),this.showFirstSecondAnimation(m.MAX_PLAYER,!1);for(var e=0;e<m.MAX_PLAYER;++e)this.view["m_head_"+e].m_winLoseType.selectedIndex=nt.HeadWinLoseControlTypeEnum.HIDE;for(e=0;e<m.MAX_PLAYER;++e)d.GameModel.instance.getContributeData(e)&&this._outObj[e]&&this._outObj[e].cardUI&&this.flyCard(e,d.GameModel.instance.getContributeData(e).obtainSeat,d.GameModel.instance.getContributeData(e).cardValue)}else t===d.GameStepEnum.GAME_STEP_PLAY_CARD?this.view.m_bottom.m_lpType.selectedIndex=v.GameCardUISelfHandModel.instance.isShowRestoreBtn()?nt.LPControlTypeEnum.RESTORE_LP:nt.LPControlTypeEnum.CAN_LP:this.showHGAnimation(m.MAX_PLAYER,!1)},e.prototype.flyCard=function(t,e){var n=this;e=m.PlayerInfoModel.instance.serverToLocal(e);var o=this.view["m_card_"+e].node.getPosition(),a=fgui.UIPackage.createObject("GameCardUI","CardUI_Out");o.x+=.6*a.node.width/2,o.y-=.2*a.node.height/2;var i=this._outObj[t].cardUI;i.node.runAction(cc.sequence(cc.delayTime(1.5),cc.spawn(cc.moveTo(1,o),cc.scaleTo(1,.6,.6)),cc.delayTime(1.5),cc.callFunc(function(){i.node.removeFromParent(),n._outObj[t].testRoot=null})))},e.prototype.refreshClock=function(t){var e=d.GameModel.instance.getGameStep(),n=m.PlayerInfoModel.instance.serverToLocal(t.seat);e===d.GameStepEnum.GAME_STEP_CONTRIBUTE?(this.killClock(m.MAX_PLAYER),this.showClock(m.LocalSeatEnum.SELF,t.time,!0),this.showImg(n,!1,nt.CImgTypeEnum.HIDE)):e==d.GameStepEnum.GAME_STEP_CALL_MULT?(this.killClock(m.MAX_PLAYER),this.showClock(m.LocalSeatEnum.SELF,t.time)):(this.killClock(m.MAX_PLAYER),this.showClock(n,t.time),this.showImg(n,!1,nt.CImgTypeEnum.HIDE))},e.prototype.showImg=function(t,e,n){if(t!==m.LocalSeatEnum.ERROR)if(t===m.LocalSeatEnum.SELF&&(Z.SettingModel.instance.data.isLiPaiHeng?this.view.m_show_img_1.y=this._show_img_y+120:this.view.m_show_img_1.y=this._show_img_y,this.isBoxRoom()&&this.view.m_show_img_1.m_imgType.selectedIndex===nt.CImgTypeEnum.SHOW_READY&&(this.view.m_button_layer.m_yqType.selectedIndex=nt.ButtonLayerYQControlTypeEnum.MEDIUM,this.view.m_show_img_1.y=this._show_img_y+240)),t!==m.MAX_PLAYER)this.view["m_show_img_"+t].visible=e,this.view["m_show_img_"+t].m_imgType.selectedIndex=n;else for(var o=0;o<m.MAX_PLAYER;++o)this.view["m_show_img_"+o].visible=e,this.view["m_show_img_"+o].m_imgType.selectedIndex=n},e.prototype.killClock=function(t){if(t!==m.MAX_PLAYER)this._clock[t].clock_co&&I.CoroutineManager.instance.stopCo(this._clock[t].clock_co),this._clock[t].clock_co=null,this.view["m_clock_"+t].visible=!1;else for(var e=0;e<m.MAX_PLAYER;++e)e!==m.LocalSeatEnum.SELF&&(this._clock[e].clock_co&&I.CoroutineManager.instance.stopCo(this._clock[e].clock_co),this._clock[e].clock_co=null),this.view["m_clock_"+e].visible=!1},e.prototype.showClock=function(t,e,n){var o=this;this._clock[t].clock_co&&I.CoroutineManager.instance.stopCo(this._clock[t].clock_co),t!==m.LocalSeatEnum.SELF&&(this.view["m_clock_"+t].visible=!0),this._clock[t].time=e,this._clock[t].clock_co=I.CoroutineManager.instance.loop(1,function(){if(o._clock[t].time<0)return o.view["m_clock_"+t].visible=!1,void(t!=m.LocalSeatEnum.SELF?o.isBoxRoom()&&(o.view["m_show_img_"+t].visible=!0,o.view["m_show_img_"+t].m_imgType.selectedIndex=nt.CImgTypeEnum.SHOW_WAIT_PLAY_CARD):o.view.m_button_layer.m_clock.visible=!1);t===m.LocalSeatEnum.SELF?(o.view.m_button_layer.m_clock.visible=!0,o.view.m_button_layer.m_clock.m_time.text=o._clock[t].time.toString(),o.view.m_button_layer.m_clock.m_actionType.selectedIndex=nt.ClockControlTypeEnum.NONE,o._clock[t].time<=5&&(o.view.m_button_layer.m_clock.m_actionType.selectedIndex=nt.ClockControlTypeEnum.ACTION,n&&F.AudioManager.instance.playEffect(k.DataSound.getGameSoundUrl(k.GameSoundTypeEnum.EFFECT_CLOCK))),o._clock[t].time--):o.view["m_clock_"+t].m_time.text=o._clock[t].time--},this)},e.prototype.showWaitClock=function(t){var e=this,n=-1;if(0===t.numID){if(t.flag!==d.WaitClockEnum.SHOW_WAIT)return void this.killClock(m.MAX_PLAYER);n=m.LocalSeatEnum.SELF}else{var o=m.PlayerInfoModel.instance.getLocalSeatByNumid(t.numID);if(o.lseat===m.LocalSeatEnum.ERROR)return;n=o.lseat}var a=n,i=t.time;this._clock[a].clock_co&&I.CoroutineManager.instance.stopCo(this._clock[a].clock_co),this.view["m_clock_"+a].visible=!0,this._clock[a].time=i,this._clock[a].clock_co=I.CoroutineManager.instance.loop(1,function(){e._clock[a].time<0||(e.view["m_clock_"+a].m_time.text=e._clock[a].time--)},this)},e.prototype.refreshPlayCard=function(t){this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.NONE;var e=t.seat;e===m.LocalSeatEnum.SELF&&this.onCommonEvent({type:nt.PointLayerHintControlTypeEnum.HIDE}),e!==m.MAX_PLAYER?0===t.p.cardCount?(F.AudioManager.instance.playEffect(k.DataSound.getGameSoundUrl(k.GameSoundTypeEnum.EFFECT_PASS_ACT)),this.showImg(e,!0,nt.CImgTypeEnum.SHOW_NOT_PLAY)):(this.dealPlayCardEffect(t.p),this.showImg(e,!1,nt.CImgTypeEnum.HIDE)):this.showImg(m.MAX_PLAYER,!1,nt.CImgTypeEnum.HIDE)},e.prototype.dealPlayCardEffect=function(t){var e,n=m.PlayerInfoModel.instance.getPlayerSexBySeat(t.seat),o=v.GameCardUISelfHandModel.instance.getGameCardLogic().changeFCardType(t.typeID);if(t.typeID=o,t.typeID===x.PokerCardsType.DanZhang){var a=R.CardFunc.getCardNum(t.cards[0]),i=k.GameSoundTypeEnum["EFFECT_1_"+a];1!==a&&2!==a||(i=k.GameSoundTypeEnum.EFFECT_1_2),e=k.DataSound.getGameSoundUrl(i,n)}else t.typeID===x.PokerCardsType.DuiZi?(a=R.CardFunc.getCardNum(t.cards[0]),i=k.GameSoundTypeEnum["EFFECT_2_"+a],1!==a&&2!==a||(i=k.GameSoundTypeEnum.EFFECT_2_2),e=k.DataSound.getGameSoundUrl(i,n)):t.typeID===x.PokerCardsType.SanZhang?e=k.DataSound.getGameSoundUrl(k.GameSoundTypeEnum.EFFECT_3_ZHANG,n):t.typeID===x.PokerCardsType.SiZhang||t.typeID===x.PokerCardsType.WuZhang||t.typeID===x.PokerCardsType.LiuZhang||t.typeID===x.PokerCardsType.QiZhang||t.typeID===x.PokerCardsType.BaZhang?(e=k.DataSound.getGameSoundUrl(k.GameSoundTypeEnum.EFFECT_COMB_1,n),F.AudioManager.instance.playEffect(k.DataSound.getGameSoundUrl(k.GameSoundTypeEnum.EFFECT_BOMB_ACT)),this.playCardsAnimationDelayTime(vt.DataSpineAniPath.ANI_GAME_PAIXING2,r.FilePaiXing2_zha,t)):t.typeID===x.PokerCardsType.ShunZi?(e=k.DataSound.getGameSoundUrl(k.GameSoundTypeEnum.EFFECT_SHUNZI,n),this.playCardsAnimationDelayTime(vt.DataSpineAniPath.ANI_GAME_PAIXING1,r.FilePaiXing1_shunZi,t)):t.typeID===x.PokerCardsType.LianDui||t.typeID===x.PokerCardsType.LianSan||t.typeID===x.PokerCardsType.LianSi||t.typeID===x.PokerCardsType.LianWu||t.typeID===x.PokerCardsType.LianBa?(e=k.DataSound.getGameSoundUrl(k.GameSoundTypeEnum.EFFECT_3_LIANDUI,n),t.typeID===x.PokerCardsType.LianDui?this.playCardsAnimationDelayTime(vt.DataSpineAniPath.ANI_GAME_PAIXING1,r.FilePaiXing1_sanLianDui,t):t.typeID===x.PokerCardsType.LianSan&&(e=k.DataSound.getGameSoundUrl(k.GameSoundTypeEnum.EFFECT_GANGBAN,n),this.playCardsAnimationDelayTime(vt.DataSpineAniPath.ANI_GAME_PAIXING1,r.FilePaiXing1_gangBan,t))):t.typeID===x.PokerCardsType.WangZha?(e=k.DataSound.getGameSoundUrl(k.GameSoundTypeEnum.EFFECT_COMB_1,n),F.AudioManager.instance.playEffect(k.DataSound.getGameSoundUrl(k.GameSoundTypeEnum.EFFECT_WANG_ZHA_ACT)),this.playCardsAnimationDelayTime(vt.DataSpineAniPath.ANI_GAME_PAIXING2,r.FilePaiXing2_twZha,t)):t.typeID===x.PokerCardsType.SanDaiEr?(e=k.DataSound.getGameSoundUrl(k.GameSoundTypeEnum.EFFECT_3DAI_2,n),this.playCardsAnimationDelayTime(vt.DataSpineAniPath.ANI_GAME_PAIXING1,r.FilePaiXing1_sanDaiEr,t)):t.typeID===x.PokerCardsType.TongHuaShun&&(e=k.DataSound.getGameSoundUrl(k.GameSoundTypeEnum.EFFECT_THS,n),F.AudioManager.instance.playEffect(k.DataSound.getGameSoundUrl(k.GameSoundTypeEnum.EFFECT_THS_ACT)),this.playCardsAnimationDelayTime(vt.DataSpineAniPath.ANI_GAME_PAIXING3,r.FilePaiXing3_ths,t));e&&F.AudioManager.instance.playEffect(e)},e.prototype.playCardsAnimationDelayTime=function(t,e,n){var o=this,a=.2;e!==r.FilePaiXing3_ths&&e!==r.FilePaiXing2_twZha&&e!==r.FilePaiXing2_zha||(a=.1),cc.tween(this.view.node).delay(a).call(function(){o.playCardsAnimation(t,e,n)}).start()},e.prototype.playCardsAnimation=function(t,e,n){var o=this,a=m.PlayerInfoModel.instance.serverToLocal(n.seat),i=this.getPlayCardsAnimationPosAndParent(a,e);if(i.parent){this.resetAnimationPos(i,e),e===r.FilePaiXing2_twZha&&(i.pos=cc.v2(.5*this.view.m_prop_panel.node.width,.3*-this.view.m_prop_panel.node.height),i.parent=this.view.m_prop_panel.node);var s=t.substring(t.lastIndexOf("/")+1,t.length),c=i.parent.getChildByName(s);c?this._playCardsAnimation(c,e,i):Pt.UtilCC.instantiatePrefab(t,function(t){var n=t.getComponent(sp.Skeleton);t.name=s,n.setCompleteListener(function(){t.active=!1}),o._playCardsAnimation(t,e,i)},i.parent)}},e.prototype.resetAnimationPos=function(t,e){e===r.FilePaiXing1_gangBan?t.pos.x+=50:e===r.FilePaiXing1_shunZi?t.pos.x+=40:e===r.FilePaiXing2_twZha&&(t.pos.y+=80),e!==r.FilePaiXing2_twZha&&(t.pos.y-=20)},e.prototype._playCardsAnimation=function(t,e,n){t.active=!0;var o=t.getComponent(sp.Skeleton);t.setPosition(n.pos),o.setAnimation(0,e,!1)},e.prototype.getPlayCardsAnimationPosAndParent=function(t,e){var n=V.PlayCardsAniDirectionEnum.CENTER;return e===r.FilePaiXing2_twZha&&(n=V.PlayCardsAniDirectionEnum.FRAME_CENTER),q.ManagerOutModel.instance.getPlayCardsAnimationPosAndParent(t,n)},e.prototype.refreshPlayCardNoteCardNum=function(t){t.seat===m.LocalSeatEnum.LEFT?(this.refreshNormalCardNumByPlayCard(t.p.cards),this.refreshTeamCardNumByPlayCard(t.p.cards)):t.seat===m.LocalSeatEnum.RIGHT?(this.refreshNormalCardNumByPlayCard(t.p.cards),this.refreshTeamCardNumByPlayCard(t.p.cards)):t.seat===m.LocalSeatEnum.PARTNER&&(d.GameModel.instance.checkShowLookerNoteCard()||this.refreshNormalCardNumByPlayCard(t.p.cards)),this.refreshNoteCard()},e.prototype.refreshNoteCardFollowPartner=function(t){this.refreshNormalCardNumByPlayCard(t),h.GameCommonModel.instance.isTeamModel()?d.GameModel.instance.isTeamNoteCardActive()?console.log("isTeam.notShow"):d.GameModel.instance.isNoteCardActive()&&this.view.m_note_card.visible&&this.showLookerNoteCardAni():this.view.m_note_card.visible&&this.showLookerNoteCardAni(),this.refreshNoteCard()},e.prototype.showLookerNoteCardAni=function(){var t=this;this.view.m_note_card.m_cNoteCardType.selectedIndex=nt.CNoteCardTypeEnum.LOOKER,this.adjustNoteCardNumOpacity(0),this.view.m_note_card.m_lookerSpine.node.removeAllChildren(),Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_GAME_NOTECARD_LOOKER,function(e){e.setPosition(cc.v2(0,0)),e.getComponent(sp.Skeleton).setAnimation(0,"guanzhan_jpq",!1),cc.tween(t.view.m_note_card).delay(.167).call(function(){t.view.m_note_card.m_aniNum.play()}).start()},this.view.m_note_card.m_lookerSpine.node)},e.prototype.adjustNoteCardNumOpacity=function(t){this.view.m_note_card.m_imgLevel.node.opacity=t;for(var e=2;e<17;e++)this.view.m_note_card["m_num_"+e].node.opacity=t},e.prototype.onGameStart=function(){C.UserInfoModel.instance.isNewRegisterPlayer()&&(this.isBoxRoom()?it.BfasManager.instance.evtUserLinkPoint(rt.UserConvertLinkPointID.START_FIRST_GAME.eventid,rt.UserConvertLinkPointID.START_FIRST_GAME.eventName,!1,"1"):it.BfasManager.instance.evtUserLinkPoint(rt.UserConvertLinkPointID.START_FIRST_GAME.eventid,rt.UserConvertLinkPointID.START_FIRST_GAME.eventName,!1,"2")),this.showFirstSecondAnimation(m.MAX_PLAYER,!1),this.view.m_resultBg.selectedIndex=nt.ResultBgControlTypeEnum.HIDE,m.PlayerInfoModel.instance.saveTempPlayers(),this._isPlayerLeave=!1,this.clearUI(),this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.NONE,this.resetNoteCardNum(),this.showBoxRoomPanInfo(!1),this.isBoxRoom()&&this.showFriendInviteBtn(!1),console.log("-----\x3e onGameStart ===== > "),d.GameModel.instance.clearData(),d.GameModel.instance.setHadPlayGame(!0),l.UIManager.instance.isExist(W.FriendInviteUI)&&l.UIManager.instance.close(W.FriendInviteUI),this.isBoxRoom()&&(this.view.m_button_layer.m_btn_yq.visible=!1),this.view.m_bottom.m_lpType.selectedIndex=nt.LPControlTypeEnum.NOT_LP,this.preLoadOtherPackage(),l.UIManager.instance.isExist(at.BigCardShare)&&l.UIManager.instance.close(at.BigCardShare),d.GameModel.instance.isFirstGame()&&it.BfasManager.instance.evt(rt.NewPlayerPointID.startGame.eventid,null,!0,rt.NewPlayerPointID.startGame.eventName),this.isNeedGuide()&&h.GameCommonModel.instance.getRoomType()===j.ClubShowFlags.BOXS_LIST&&d.GameModel.instance.setGuided(!0),pt.GameWinMoreModel.instance.clearData()},e.prototype.isNeedGuide=function(){return C.UserInfoModel.instance.isNewRegisterPlayer()&&!ht.DataAdChannel.isNeepPopNewPlayerGift(et.DataBfConfig.ymn.channel)},e.prototype.showBoxRoomPanInfo=function(t){this.view.m_info.visible=t},e.prototype.onGameEnd=function(){var t=this;C.UserInfoModel.instance.isNewRegisterPlayer()&&(C.UserInfoModel.instance.updateNewRegisterPlayer(!1),this.isBoxRoom()?it.BfasManager.instance.evtUserLinkPoint(rt.UserConvertLinkPointID.END_FIRST_GAME.eventid,rt.UserConvertLinkPointID.END_FIRST_GAME.eventName,!1,"1"):it.BfasManager.instance.evtUserLinkPoint(rt.UserConvertLinkPointID.END_FIRST_GAME.eventid,rt.UserConvertLinkPointID.END_FIRST_GAME.eventName,!1,"2")),this.killClock(m.MAX_PLAYER),l.UIManager.instance.isExist(B.GameTrustUI)&&l.UIManager.instance.close(B.GameTrustUI),this.showPlayerCardsNum(m.MAX_PLAYER,!1),this.onCommonEvent({type:nt.PointLayerHintControlTypeEnum.HIDE}),this.showSmallKongGong(m.MAX_PLAYER,!1),this.resetTHS();for(var e=0;e<m.MAX_PLAYER;++e)this._smallCardObj[e]&&this._smallCardObj[e].node.removeFromParent();this.view.m_bottom.m_lpType.selectedIndex=nt.LPControlTypeEnum.NOT_LP,I.CoroutineManager.instance.once(.01,function(){t.showFirstSecondAnimation(m.MAX_PLAYER,!1)},this),this.showImg(m.MAX_PLAYER,!1,nt.CImgTypeEnum.HIDE),d.GameModel.instance.clearEndData(),d.GameModel.instance.isFirstGame()&&(it.BfasManager.instance.evt(rt.NewPlayerPointID.resultGame.eventid,null,!0,rt.NewPlayerPointID.resultGame.eventName),d.GameModel.instance.setGuideState(d.GuideTypeEnum.NONE))},e.prototype.refreshTHS=function(){this.view.m_ths_bar.m_btn_t1.m_statusType.selectedIndex=M.ModelRoot.instance.get(v.GameCardUISelfHandModel).isTongHuShunByColor(U.PokerCardColor.HeiTao)?nt.THSBarControlTypeEnum.SHOW:nt.THSBarControlTypeEnum.NONE,this.view.m_ths_bar.m_btn_t2.m_statusType.selectedIndex=M.ModelRoot.instance.get(v.GameCardUISelfHandModel).isTongHuShunByColor(U.PokerCardColor.HongXin)?nt.THSBarControlTypeEnum.SHOW:nt.THSBarControlTypeEnum.NONE,this.view.m_ths_bar.m_btn_t3.m_statusType.selectedIndex=M.ModelRoot.instance.get(v.GameCardUISelfHandModel).isTongHuShunByColor(U.PokerCardColor.MeiHua)?nt.THSBarControlTypeEnum.SHOW:nt.THSBarControlTypeEnum.NONE,this.view.m_ths_bar.m_btn_t4.m_statusType.selectedIndex=M.ModelRoot.instance.get(v.GameCardUISelfHandModel).isTongHuShunByColor(U.PokerCardColor.FangKuai)?nt.THSBarControlTypeEnum.SHOW:nt.THSBarControlTypeEnum.NONE},e.prototype.resetTHS=function(){this.view.m_ths_bar.m_btn_t1.m_statusType.selectedIndex=nt.THSBarControlTypeEnum.NONE,this.view.m_ths_bar.m_btn_t2.m_statusType.selectedIndex=nt.THSBarControlTypeEnum.NONE,this.view.m_ths_bar.m_btn_t3.m_statusType.selectedIndex=nt.THSBarControlTypeEnum.NONE,this.view.m_ths_bar.m_btn_t4.m_statusType.selectedIndex=nt.THSBarControlTypeEnum.NONE},e.prototype.dealPlayCardButton=function(t,e){var n=this;this.view.m_button_layer.m_canPlay.selectedIndex=t?nt.ButtonLayerCanPlayControlTypeEnum.CAN_PLAY:nt.ButtonLayerCanPlayControlTypeEnum.NOT_CAN_PLAY,d.GameModel.instance.isGuideModel()&&t&&(st.GameGuideModel.instance.getNowStepID()===st.GuideEventEnum.GUIDE_1&&2===e.length?(p.EventManager.instance.emit(_.GameEvent.NEW_PLAYER_GUIDE,{gComponent:this.view.m_button_layer.m_btn_cp,guideType:ut.GuideShowUIEnum.GUIDE_BTN,showHandSpine:!0}),l.UIManager.instance.open(dt.GameGuideButtonUI).then(function(t){t.showUI(dt.CShowGuideBtnTypeEnum.PLAY,dt.CGuideBtnMaskShowTypeEnum.PLAY),n.view.m_button_layer.visible=!1})):st.GameGuideModel.instance.getNowStepID()===st.GuideEventEnum.GUIDE_3&&5===e.length?(p.EventManager.instance.emit(_.GameEvent.NEW_PLAYER_GUIDE,{gComponent:this.view.m_button_layer.m_btn_cp,guideType:ut.GuideShowUIEnum.GUIDE_BTN,showHandSpine:!0}),l.UIManager.instance.open(dt.GameGuideButtonUI).then(function(t){t.showUI(dt.CShowGuideBtnTypeEnum.PLAY,dt.CGuideBtnMaskShowTypeEnum.PLAY),n.view.m_button_layer.visible=!1})):st.GameGuideModel.instance.getNowStepID()===st.GuideEventEnum.GUIDE_4&&5===e.length?(l.UIManager.instance.open(dt.GameGuideButtonUI).then(function(t){t.showUI(dt.CShowGuideBtnTypeEnum.FIRST_PLAY,dt.CGuideBtnMaskShowTypeEnum.PLAY),n.view.m_button_layer.visible=!1}),p.EventManager.instance.emit(_.GameEvent.NEW_PLAYER_GUIDE,{gComponent:this.view.m_button_layer.m_btn_cp,guideType:ut.GuideShowUIEnum.GUIDE_BTN,showHandSpine:!0})):st.GameGuideModel.instance.getNowStepID()===st.GuideEventEnum.GUIDE_5&&6===e.length?(l.UIManager.instance.open(dt.GameGuideButtonUI).then(function(t){t.showUI(dt.CShowGuideBtnTypeEnum.PLAY,dt.CGuideBtnMaskShowTypeEnum.PLAY),n.view.m_button_layer.visible=!1}),p.EventManager.instance.emit(_.GameEvent.NEW_PLAYER_GUIDE,{gComponent:this.view.m_button_layer.m_btn_cp,guideType:ut.GuideShowUIEnum.GUIDE_BTN,showHandSpine:!0})):st.GameGuideModel.instance.getNowStepID()===st.GuideEventEnum.GUIDE_6&&2===e.length&&(l.UIManager.instance.open(dt.GameGuideButtonUI).then(function(t){t.showUI(dt.CShowGuideBtnTypeEnum.FIRST_PLAY,dt.CGuideBtnMaskShowTypeEnum.PLAY),n.view.m_button_layer.visible=!1}),p.EventManager.instance.emit(_.GameEvent.NEW_PLAYER_GUIDE,{gComponent:this.view.m_button_layer.m_btn_cp,guideType:ut.GuideShowUIEnum.GUIDE_BTN,showHandSpine:!0})))},e.prototype.touchCardCallback=function(t,e){this._thisTouchedCards=t,e||this.toggleMenuPanel(!1);var n=d.GameModel.instance.newPlayCardData(),o=M.ModelRoot.instance.get(v.GameCardUISelfHandModel).checkCanPutCards(n);this.dealPlayCardButton(o&&t.length>0,t)},e.prototype.touchCardCallbackLP=function(){(d.GameModel.instance.getGameStep()===d.GameStepEnum.GAME_STEP_PLAY_CARD||d.GameModel.instance.isContributeStep()||d.GameModel.instance.isShowContributeStep())&&(this.view.m_bottom.m_lpType.selectedIndex=v.GameCardUISelfHandModel.instance.isShowRestoreBtn()?nt.LPControlTypeEnum.RESTORE_LP:nt.LPControlTypeEnum.CAN_LP)},e.prototype.refreshGameData=function(t){var e=this;if(!d.GameModel.instance.isGuideModel()){var n=m.PlayerInfoModel.instance.serverToLocal(t.seat),o=d.GameModel.instance.getGameStep();if(o===d.GameStepEnum.GAME_STEP_NONE||o===d.GameStepEnum.GAME_STEP_START_GAME||o===d.GameStepEnum.GAME_STEP_WIN_LOST||o===d.GameStepEnum.GAME_STEP_CONTRIBUTE){var a=this.view["m_head_"+n];t.rank===d.GameRankEnum.FIRST_RANK?a.m_winLoseType.selectedIndex=nt.HeadWinLoseControlTypeEnum.SHOW_WIN:t.rank===m.PlayerInfoModel.instance.getNowGamePlayer()?a.m_winLoseType.selectedIndex=nt.HeadWinLoseControlTypeEnum.SHOW_LOSE:a.m_winLoseType.selectedIndex=nt.HeadWinLoseControlTypeEnum.HIDE}else o===d.GameStepEnum.GAME_STEP_PLAY_CARD&&m.PlayerInfoModel.instance.getNowGamePlayer()===m.MAX_PLAYER&&I.CoroutineManager.instance.once(.01,function(){t.rank!==d.GameRankEnum.FIRST_RANK||e._animationPlayFlag[n]||0!==d.GameModel.instance.getCardCount(n)?t.rank!==d.GameRankEnum.SECOND_RANK||e._animationPlayFlag[n]||0!==d.GameModel.instance.getCardCount(n)||(e._animationPlayFlag[n]=!0,e.showFirstSecondRankAnimation(n,d.GameRankEnum.SECOND_RANK)):(e._animationPlayFlag[n]=!0,e.showFirstSecondRankAnimation(n,d.GameRankEnum.FIRST_RANK))},this);var i=d.GameModel.instance.getGameDataByTeam(d.GameTeamEnum.TEAM_ONE),r=d.GameModel.instance.getGameDataByTeam(d.GameTeamEnum.TEAM_TWO);if(i&&r){var s=d.GameModel.instance.getGameWinByTeam(),c=d.GameModel.instance.getGameData(m.LocalSeatEnum.SELF);c.team===d.GameTeamEnum.TEAM_ONE?(this.view.m_top_left.m_myRankCheck.text=Mt.UtilString.convertToStrCardNum(i.level),this.view.m_top_left.m_myRankUnCheck.text=Mt.UtilString.convertToStrCardNum(i.level),this.view.m_top_left.m_otherRankCheck.text=Mt.UtilString.convertToStrCardNum(r.level),this.view.m_top_left.m_otherRankUnCheck.text=Mt.UtilString.convertToStrCardNum(r.level)):c.team===d.GameTeamEnum.TEAM_TWO&&(this.view.m_top_left.m_myRankCheck.text=Mt.UtilString.convertToStrCardNum(r.level),this.view.m_top_left.m_myRankUnCheck.text=Mt.UtilString.convertToStrCardNum(r.level),this.view.m_top_left.m_otherRankCheck.text=Mt.UtilString.convertToStrCardNum(i.level),this.view.m_top_left.m_otherRankUnCheck.text=Mt.UtilString.convertToStrCardNum(i.level)),i.level===r.level&&2===i.level||o===d.GameStepEnum.GAME_STEP_PLAY_CARD||(this.view.m_top_left.m_cRankLevel.selectedIndex=s===c.team?d.GameTeamEnum.TEAM_ONE:d.GameTeamEnum.TEAM_TWO)}}},e.prototype.updateNoteCardMinusHandCards=function(t){t.type===d.NoteCardTypeEnum.NORAML?t.seat===m.LocalSeatEnum.SELF&&(this.initNormalLeftCardNums(),this.refreshNormalCardNumByPlayCard(t.cards),this.refreshNoteCard()):t.type===d.NoteCardTypeEnum.TEAM&&(t.seat!==m.LocalSeatEnum.SELF&&t.seat!==m.LocalSeatEnum.PARTNER||(console.log("updateNoteCardMinusHandCards.seat:",t.seat),this._receiveTeamCardCount++,1===this._receiveTeamCardCount?(console.log("updateNoteCardMinusHandCards.refresh"),this.initTeamLeftCardNums()):2===this._receiveTeamCardCount&&(console.log("updateNoteCardMinusHandCards.init"),this._receiveTeamCardCount=0),this.refreshTeamCardNumByPlayCard(t.cards),this.refreshNoteCard()))},e.prototype.onPlayerStart=function(t){var e=m.PlayerInfoModel.instance.getLocalSeatByNumid(t.numID);e.lseat!==m.LocalSeatEnum.ERROR&&(this.isGamePlay()||this.killClock(e.lseat),e.lseat===m.LocalSeatEnum.SELF&&(this.view.m_resultBg.selectedIndex=nt.ResultBgControlTypeEnum.HIDE))},e.prototype.showKongGongSmall=function(t){var e=m.PlayerInfoModel.instance.serverToLocal(t);e!==m.LocalSeatEnum.ERROR&&(this.showSmallKongGong(e,!0),Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_GAME_KANGGONG_SMALL,function(t){var e=t.getComponent(sp.Skeleton);t.setPosition(cc.v2(0,0)),e.setAnimation(0,"kg_tx",!1)},this.view["m_head_"+e].m_kg_small.node))},e.prototype.onContributeData=function(t){var e=d.GameModel.instance.getGameStep();if(e!==d.GameStepEnum.GAME_STEP_PLAY_CARD){var n=m.PlayerInfoModel.instance.serverToLocal(t.seat);d.GameModel.instance.setContributeData(n,t),d.GameModel.instance.getContributeData(n).contributeType!==d.ContributeTypeEnum.NONE&&d.GameModel.instance.setContributeState(n,1);var o=m.PlayerInfoModel.instance.getSelfSeat();e===d.GameStepEnum.GAME_STEP_CONTRIBUTE&&o===t.seat&&0===t.cardValue?(t.contributeType===d.ContributeTypeEnum.GIVE?this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.JG:t.contributeType===d.ContributeTypeEnum.GIVEBACK&&(this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.HG),this.view.m_bottom.m_lpType.selectedIndex=v.GameCardUISelfHandModel.instance.isShowRestoreBtn()?nt.LPControlTypeEnum.RESTORE_LP:nt.LPControlTypeEnum.CAN_LP,t.contributeType&&this.showHGAnimation(n,!0,t.contributeType)):e===d.GameStepEnum.GAME_STEP_CONTRIBUTE&&0===t.cardValue&&t.contributeType!==d.ContributeTypeEnum.NONE&&this.showHGAnimation(n,!0,t.contributeType),e===d.GameStepEnum.GAME_STEP_CONTRIBUTE&&o===t.seat&&t.contributeType===d.ContributeTypeEnum.GIVEBACK&&d.GameModel.instance.setHGSeat(m.PlayerInfoModel.instance.serverToLocal(d.GameModel.instance.getSeatByRank(d.GameRankEnum.FOURTH_RANK))),e===d.GameStepEnum.GAME_STEP_CONTRIBUTE&&t.cardValue>0&&(o===t.seat&&(this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.NONE,this.view.m_bottom.m_lpType.selectedIndex=v.GameCardUISelfHandModel.instance.isShowRestoreBtn()?nt.LPControlTypeEnum.RESTORE_LP:nt.LPControlTypeEnum.CAN_LP),this.showHGAnimation(n,!1),this.showContributeCard(t.seat,t.cardValue),d.GameModel.instance.setContributeState(n,2))}else this.showSmallCard(m.PlayerInfoModel.instance.serverToLocal(t.seat),t.cardValue)},e.prototype.showContributeCard=function(t,e){var n=m.PlayerInfoModel.instance.serverToLocal(t);if(!(this._outObj&&this._outObj[n]&&this._outObj[n].testRoot)){var o=fgui.UIPackage.createObject("GameCardUI","CardUI_Out"),a=this.view.m_point_bg["m_contribute_card_"+n].node.getPosition();this._outObjPos[n]=o.node.getPosition(),this._outObj[n]={},this._outObj[n].cardUI=new O.CardUIOut,this._outObj[n].cardUI.setCardNodeObj(o),this._outObj[n].cardUI.setCardInfo(e),o.node.setPosition(new cc.Vec2(a.x+o.node.width/2,a.y-o.node.height/2)),this._outObj[n].cardUI.showNode(!0),this._outObj[n].testRoot=o,this.view.m_point_bg.addChild(o)}},e.prototype.onCommonEvent=function(t){if(t.type===nt.PointLayerHintControlTypeEnum.HIDE)this.view.m_point_bg.m_hintType.selectedIndex=nt.PointLayerHintControlTypeEnum.HIDE;else if(t.type===nt.PointLayerHintControlTypeEnum.SHOW_FRIEND_CARD)this.view.m_point_bg.m_hintType.selectedIndex=nt.PointLayerHintControlTypeEnum.SHOW_FRIEND_CARD;else if(t.type===nt.PointLayerHintControlTypeEnum.SHOW_NOT_PLAY)this.view.m_point_bg.m_hintType.selectedIndex=nt.PointLayerHintControlTypeEnum.SHOW_NOT_PLAY;else if(3===t.type){if(this._animationJFFlag[t.lseat])return;this._animationJFFlag[t.lseat]=!0,this.showFirstSecondRankAnimation(t.lseat,3)}},e.prototype.onTakeFirst=function(){var t=this;F.AudioManager.instance.playEffect(k.DataSound.getGameSoundUrl(k.GameSoundTypeEnum.EFFECT_START)),I.CoroutineManager.instance.once(.8,function(){t.playJPSJAnimation(1)},this)},e.prototype.onChangeSeat=function(){for(var t=0;t<m.MAX_PLAYER;++t){var e=m.PlayerInfoModel.instance.getPlayerByLocalSeat(t);e?this.onPlayerGoldChange(e.numid):(this.showImg(t,!1,nt.CImgTypeEnum.HIDE),this.showPlayerHead(t,!1),this.hideCallMultHeadTag(t),this.showSit(t,!0))}this.onTableStateChange()},e.prototype.onTableStateChange=function(){var t=h.GameCommonModel.instance.getBoxCreator();if(this.isBoxRoom()&&t>0){for(var e=0;e<m.MAX_PLAYER;++e)this.view["m_head_"+e].m_isOwner.selectedIndex=nt.HeadCreatorControlTypeEnum.HIDE;var n=m.PlayerInfoModel.instance.getLocalSeatByNumid(t);n&&n.lseat!==m.LocalSeatEnum.ERROR&&(this.view["m_head_"+n.lseat].m_isOwner.selectedIndex=nt.HeadCreatorControlTypeEnum.SHOW),0===this._nowPan&&(this.view.m_right_top.m_isOwner.selectedIndex=h.GameCommonModel.instance.isBoxCreator()?nt.TopRightOwnerControlTypeEnum.SHOW:nt.TopRightOwnerControlTypeEnum.HIDE)}},e.prototype.refreshBoxRoomScore=function(t){for(var e=0;e<t.score.length;++e){var n=m.PlayerInfoModel.instance.serverToLocal(e);this.view["m_head_"+n].m_score.text=t.score[e]}},e.prototype.showBoxRoomResult=function(t){for(var e=this,n=[!1,!1,!1,!1],o=0;o<t.score.length;o++)n[o]=t.score[o]>0;for(this._gameID===et.GameIDInfo.TP_GD.id?t.isOver?I.CoroutineManager.instance.once(.1,function(){e.showBigResultUI()},this):I.CoroutineManager.instance.once(.8,function(){e.playJPSJAnimation(2,function(){e.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.TEMP_READY})},this):this.showResultAnimation(n,function(){t.isOver||(e.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.TEMP_READY);var n=m.PlayerInfoModel.instance.getSelfSeat();e.updateLevelUpHintInfo(t.score[n]>0),e.view.m_levelUp.visible=!0,e.view.m_levelUp.node.runAction(cc.sequence(cc.scaleTo(0,0),cc.scaleTo(.5,1)))},function(){e.view.m_levelUp.visible=!1,t.isOver&&e.showBigResultUI()}),this.showHeadSideWinLost(t.score,n),this.isGamePlay()||(this.view.m_resultBg.selectedIndex=nt.ResultBgControlTypeEnum.SHOW),o=0;o<t.allScore.length;++o){var a=m.PlayerInfoModel.instance.serverToLocal(o);this.view["m_head_"+a].m_score.text=t.allScore[o]}},e.prototype.showHeadSideWinLost=function(t,e,n){for(var o=0;o<t.length;++o){var a=m.PlayerInfoModel.instance.serverToLocal(o),i=this.view["m_head_"+a],r=0;i.m_img_ceil.visible=!1,i.m_img_ceil2.visible=!1,e[o]?(i.m_resultType.selectedIndex=nt.HeadResultControlTypeEnum.SHOW_WIN,i.m_win_text.text="+"+t[o],i.m_win_text2.text="+"+t[o],r=this.view["m_head_"+a].m_win_text2.textWidth,n&&n.length>0&&n[o]===d.GameReusltTipEnum.TIP_CEIL&&(a===m.LocalSeatEnum.LEFT?i.m_img_ceil.visible=!0:a===m.LocalSeatEnum.RIGHT?i.m_img_ceil2.visible=!0:(i.m_img_ceil.visible=!0,i.m_img_ceil2.visible=!0))):(i.m_resultType.selectedIndex=nt.HeadResultControlTypeEnum.SHOW_LOSE,i.m_lose_text.text=t[o].toString(),i.m_lose_text2.text=t[o].toString(),r=this.view["m_head_"+a].m_lose_text2.textWidth),a===m.LocalSeatEnum.LEFT?(i.m_score_bg.x+=(r-171)/2,i.m_seatType.selectedIndex=nt.CHeadSeatTypeEnum.LEFT,i.m_resultAnimation.selectedIndex=nt.HeadResultAnimationControlTypeEnum.SHOW):a===m.LocalSeatEnum.RIGHT?(i.m_score_bg2.x+=(171-r)/2,i.m_seatType.selectedIndex=nt.CHeadSeatTypeEnum.RIGHT,i.m_resultAnimation.selectedIndex=nt.HeadResultAnimationControlTypeEnum.SHOW_OTHER):a===m.LocalSeatEnum.SELF?(i.m_score_bg.x+=(r-171)/2,i.m_resultAnimation.selectedIndex=nt.HeadResultAnimationControlTypeEnum.SHOW):i.m_resultAnimation.selectedIndex=nt.HeadResultAnimationControlTypeEnum.SHOW}},e.prototype.updateLevelUpHintInfo=function(t){var e=d.GameModel.instance.getLevelDiff();e>0&&(t?(this.view.m_levelUp.m_bg.url="ui://GameSceneUI/img_xiaojiesuan_win",this.view.m_levelUp.m_text.font="ui://GameSceneUI/fnt_xiaojiesuan_win",this.view.m_levelUp.m_text.text="\u5347"+e+"\u7ea7"):(this.view.m_levelUp.m_bg.url="ui://GameSceneUI/img_xiaojiesuan_lose",this.view.m_levelUp.m_text.font="ui://GameSceneUI/fnt_xiaojiesuan_lose",this.view.m_levelUp.m_text.text="\u5bf9\u65b9\u5347"+e+"\u7ea7"))},e.prototype.showBigResult=function(){d.GameModel.instance.getBoxBigResultInfo()&&(this.showBoxDelayBtn(!1),this._isDismissResult&&this.showBigResultUI())},e.prototype.showBigResultUI=function(){var t=this;l.UIManager.instance.open(K.GameResultUI).then(function(e){e.initBoxResultUI(d.GameModel.instance.getBoxBigResultInfo(),t._isDismissResult),e.setBackCallBack(function(){t.backToLobby()}),e.setBoxRecordBackCallBack(function(){t.onBtnBoxRecord(!0)})})},e.prototype.touchBg=function(){this.toggleMenuPanel(!1)},e.prototype.onGuideStep=function(t){var e=this;d.GameModel.instance.isGuideModel()&&(t===st.GuideEventEnum.END_EVENT?(this.clearUI(),I.CoroutineManager.instance.once(1,function(){e.isGamePlay()||e.clearUI()},this),this.view.m_point_bg.m_bjdj_ani.node.stopAllActions(),this.view.m_point_bg.m_bjdj_ani.node.setPosition(this._bjdj_Node_Pos),this.view.m_point_bg.m_bjdj_ani.node.removeAllChildren(),this.view.m_point_bg.m_level.node.setPosition(this._level_Node_Pos),this.view.m_point_bg.m_level.visible=!1,p.EventManager.instance.emit(_.GameEvent.NEW_PLAYER_GUIDE),p.EventManager.instance.emit(_.GameEvent.GUIDE_SHOW_DESC)):t===st.GuideEventEnum.GUIDE_1?(p.EventManager.instance.emit(_.GameEvent.GUIDE_SHOW_HAND_CARDS,{cards:[43,43]}),p.EventManager.instance.emit(_.GameEvent.GUIDE_SHOW_DESC,{descPos:cc.v2(-40,-30),desc:'\u63a8\u8350\u51fa[color=#FF7934]"\u5bf94"[/color]\u70b9\u51fb[color=#FF7934][\u51fa\u724c][/color]\u5373\u53ef\u5c06\u724c\u6253\u51fa',direction:lt.ArrowDirectionEnum.RIGHT})):t===st.GuideEventEnum.GUIDE_2?(p.EventManager.instance.emit(_.GameEvent.NEW_PLAYER_GUIDE,{gComponent:this.view.m_button_layer.m_btn_bc,guideType:ut.GuideShowUIEnum.GUIDE_BTN,showHandSpine:!0}),p.EventManager.instance.emit(_.GameEvent.GUIDE_SHOW_DESC,{descPos:cc.v2(-40,-150),arrowPos:cc.v2(-240,0),desc:"\u961f\u53cb\u6253\u51fa[color=#FF7934]\u70b8\u5f39[/color]\uff0c\u5efa\u8bae\u4e0d\u8981\u538b\u961f\u53cb\u7684\u5927\u724c\uff0c\u8bf7\u9009\u62e9[color=#FF7934][\u4e0d\u51fa][/color]",direction:lt.ArrowDirectionEnum.TOP})):t===st.GuideEventEnum.GUIDE_3?(p.EventManager.instance.emit(_.GameEvent.NEW_PLAYER_GUIDE,{gComponent:this.view.m_ths_bar.m_btn_t1,guideType:ut.GuideShowUIEnum.GUIDE_RECT,showHandSpine:!0}),p.EventManager.instance.emit(_.GameEvent.GUIDE_SHOW_DESC,{descPos:cc.v2(0,20),arrowPos:cc.v2(-60,0),desc:"\u70b9\u51fb\u4e0b\u65b9\u7684[color=#FF7934]\u540c\u82b1\u987a\u6807\u7b7e[/color]\uff0c\u9009\u62e9\u5e76\u6253\u51fa[color=#FF7934]\u540c\u82b1\u987a\u70b8\u5f39[/color]\u5427\uff01",direction:lt.ArrowDirectionEnum.BOTTOM})):t===st.GuideEventEnum.GUIDE_4?(p.EventManager.instance.emit(_.GameEvent.GUIDE_SHOW_HAND_CARDS,{cards:[11,11,24,9,35]}),p.EventManager.instance.emit(_.GameEvent.GUIDE_SHOW_DESC,{descPos:cc.v2(0,0),arrowPos:cc.v2(0,0),desc:'\u60a8\u7684\u724c\u6ca1\u6709\u4eba\u5927\u8fc7\uff0c\u60a8\u83b7\u5f97\u9996\u51fa\u6743\uff0c\u6253\u51fa[color=#FF7934]"3\u5e262"[/color]\u8bd5\u8bd5\u770b',direction:lt.ArrowDirectionEnum.TOP})):t===st.GuideEventEnum.GUIDE_5?(p.EventManager.instance.emit(_.GameEvent.GUIDE_SHOW_HAND_CARDS,{cards:[7,33,33,20,46,28]}),p.EventManager.instance.emit(_.GameEvent.GUIDE_SHOW_DESC,{desc:"[color=#FF7934]\u7ea2\u6843\u7ea7\u724c[/color]\u53ef\u4ee5\u4f5c\u4e3a[color=#FF7934]\u9022\u4eba\u914d[/color]\u4f7f\u7528\uff0c\u8bf7\u5c1d\u8bd5\u6253\u51fa\u8d85\u7ea7\u70b8\u5f39",direction:lt.ArrowDirectionEnum.TOP})):t===st.GuideEventEnum.GUIDE_6&&(p.EventManager.instance.emit(_.GameEvent.GUIDE_SHOW_HAND_CARDS,{cards:[15,41]}),p.EventManager.instance.emit(_.GameEvent.GUIDE_SHOW_DESC,{desc:"\u6253\u51fa[color=#FF7934]\u6700\u540e\u4e00\u624b\u724c[/color]\uff0c\u5373\u53ef\u83b7\u5f97\u672c\u5c40\u6e38\u620f\u7684\u5934\u6e38",direction:lt.ArrowDirectionEnum.TOP})))},e.prototype.onTuoPaiResultData=function(t){this._tuoPaiScore=t.nowRoundTuoPaiScore},e.prototype.onTuoPaiRankData=function(t){var e=this;if(!(t.tuopaiScore<0)){var n=function(t){var n=m.PlayerInfoModel.instance.serverToLocal(t.seat);e.view.m_point_bg["m_tp_text_"+n].visible=!0,e.view.m_point_bg["m_tp_text_"+n].text="\u62d6"+t.tuopaiScore+"\u5f20",e.view.m_point_bg["m_tp_text_"+n].node.stopAllActions(),e.view.m_point_bg["m_tp_text_"+n].node.runAction(cc.spawn(cc.moveTo(.2333,new cc.Vec2(e._tp_posX[n].x+60,e._tp_posX[n].y)),cc.fadeIn(.2333)))};if(1===t.rank)n(t);else if(2===t.rank||3===t.rank){var o=d.GameModel.instance.getGameWinSeatByTeam();m.PlayerInfoModel.instance.isPartner(o,t.seat)&&n(t)}}},e.prototype.onJSResult=function(t){l.UIManager.instance.isExist(H.GameJSUI)&&l.UIManager.instance.close(H.GameJSUI),t!==H.JSStateEnum.REFUSE_TYPE?(h.GameCommonModel.instance.isBoxCreator()?p.EventManager.instance.emit($.DataEvent.ToastData,"\u623f\u95f4\u89e3\u6563\u6210\u529f\uff01"):p.EventManager.instance.emit($.DataEvent.ToastData,"\u6e38\u620f\u5df2\u89e3\u6563\uff01"),this._isDismissResult=!0,0===this._nowPan?this.reqLeaveBox():this._nowPan=0):p.EventManager.instance.emit($.DataEvent.ToastData,"\u89e3\u6563\u623f\u95f4\u5931\u8d25\uff01")},e.prototype.onBtnJS=function(){if(console.log("onBtnJS"),0===this._nowPan)return it.BfasManager.instance.evt(rt.BoxRoomPointID.OWNER_DIRECT_DISMISS.eventid,null,!0,rt.BoxRoomPointID.OWNER_DIRECT_DISMISS.eventName),void(h.GameCommonModel.instance.isBoxCreator()?l.UIManager.instance.open(S.DialogUI).then(function(t){t.initConfirmCancelClose({content:"\u662f\u5426\u786e\u5b9a\u53d1\u8d77\u89e3\u6563\uff1f"}),t.confirmAction=function(){h.GameCommonModel.instance.reqJieSan(H.JSStateEnum.REQ_JS_TYPE)}}):l.UIManager.instance.open(S.DialogUI).then(function(t){t.initConfirm({content:"\u6e38\u620f\u5f00\u59cb\u524d\uff0c\u60a8\u65e0\u6cd5\u89e3\u6563\u4ed6\u4eba\u521b\u5efa\u7684\u623f\u95f4"})}));it.BfasManager.instance.evt(rt.BoxRoomPointID.NORMAL_REQ_DISMISS.eventid,null,!0,rt.BoxRoomPointID.NORMAL_REQ_DISMISS.eventName),h.GameCommonModel.instance.reqJieSan(H.JSStateEnum.REQ_JS_TYPE)},e.prototype.onBtnSit_0=function(){console.log("onBtnSit_0"),this.onBtnSit(m.LocalSeatEnum.LEFT)},e.prototype.onBtnSit_2=function(){console.log("onBtnSit_2"),this.onBtnSit(m.LocalSeatEnum.RIGHT)},e.prototype.onBtnSit_3=function(){console.log("onBtnSit_3"),this.onBtnSit(m.LocalSeatEnum.PARTNER)},e.prototype.onBtnSit=function(t){var e=m.PlayerInfoModel.instance.localToServer(t);h.GameCommonModel.instance.reqChangeSeat(e)},e.prototype.onBtnChangeSit_0=function(){console.log("onBtnChangeSit_0"),this.onBtnChangeSit(m.LocalSeatEnum.LEFT)},e.prototype.onBtnChangeSit_2=function(){console.log("onBtnChangeSit_2"),this.onBtnChangeSit(m.LocalSeatEnum.RIGHT)},e.prototype.onBtnChangeSit_3=function(){console.log("onBtnChangeSit_3"),this.onBtnChangeSit(m.LocalSeatEnum.PARTNER)},e.prototype.onBtnChangeSit=function(t){it.BfasManager.instance.evt(rt.BoxRoomPointID.CLISK_REQ_CHANGE_SEAT.eventid,null,!0,rt.BoxRoomPointID.CLISK_REQ_CHANGE_SEAT.eventName);var e=m.PlayerInfoModel.instance.localToServer(t);h.GameCommonModel.instance.reqApplyExchangeSeat(e,function(){it.BfasManager.instance.evt(rt.BoxRoomPointID.REQ_CHANGE_SEAT_SUCCESS.eventid,null,!0,rt.BoxRoomPointID.REQ_CHANGE_SEAT_SUCCESS.eventName),p.EventManager.instance.emit($.DataEvent.ToastData,"\u60a8\u5df2\u53d1\u8d77\u6362\u5ea7\u8bf7\u6c42\uff0c\u7b49\u5f85\u5904\u7406\u4e2d~")})},e.prototype.onBtnBoxRecord=function(t){var e=this;if(console.log("onBtnBoxRecord"),t||0!==this._nowPan){var n=h.GameCommonModel.instance.getBoxID().toString();L.UIHelp.instance.showLoading(),X.CreateRoomManagerModel.instance.reqHistoryList(this._gameID,3,function(t){for(var o=function(o){if(t[o].roomKey===n)return e._nowTotalid=t[o].totalid,e._historyData=t[o],X.CreateRoomManagerModel.instance.reqHistoryRoundList(e._gameID,Number(t[o].totalid),function(n){l.UIManager.instance.open(mt.BoxRecordUI).then(function(a){var i=X.CreateRoomManagerModel.instance.isBoxSelfWin(t[o]),r=X.CreateRoomManagerModel.instance.changeGameIDToGameIndex(e._gameID);a.initBoxRecordUI(t[o],n,i,r),L.UIHelp.instance.hideLoading()})}),{value:void 0}},a=0;a<t.length;++a){var i=o(a);if("object"==typeof i)return i.value}l.UIManager.instance.open(mt.BoxRecordUI).then(function(t){var n=X.CreateRoomManagerModel.instance.changeGameIDToGameIndex(e._gameID),o=h.GameCommonModel.instance.getBoxID().toString();t.initEmptyItem(n,o),L.UIHelp.instance.hideLoading()})})}else l.UIManager.instance.open(mt.BoxRecordUI).then(function(t){var n=X.CreateRoomManagerModel.instance.changeGameIDToGameIndex(e._gameID),o=h.GameCommonModel.instance.getBoxID().toString();t.initEmptyItem(n,o)})},e.prototype.onBtnDelayBoxGame=function(){var t=this;if(!l.UIManager.instance.isExist(_t.GameBoxDelayPannleUI)){it.BfasManager.instance.evt(rt.BoxRoomPointID.REQ_DELAY_GAME.eventid,null,!0,rt.BoxRoomPointID.REQ_DELAY_GAME.eventName);var e=this.view.m_right_top.m_btn_delay.localToGlobal(0,0);console.warn("onBtnDelayBoxGame",e),l.UIManager.instance.open(_t.GameBoxDelayPannleUI,e).then(function(e){e.init(t._hintBoxDelayMsg)})}},e.prototype.onBtnMenuBg=function(){this.toggleMenuPanel(!1)},e.prototype.onBtnTHS_1=function(){console.log("onBtnTHS_1"),d.GameModel.instance.isGuideModel()?p.EventManager.instance.emit(_.GameEvent.GUIDE_SHOW_HAND_TGS_CARDS,[48,49,50,51,52]):M.ModelRoot.instance.get(v.GameCardUISelfHandModel).clickTongHuaShuBtn(U.PokerCardColor.HeiTao)},e.prototype.onBtnTHS_2=function(){console.log("onBtnTHS_2"),M.ModelRoot.instance.get(v.GameCardUISelfHandModel).clickTongHuaShuBtn(U.PokerCardColor.HongXin)},e.prototype.onBtnTHS_3=function(){console.log("onBtnTHS_3"),M.ModelRoot.instance.get(v.GameCardUISelfHandModel).clickTongHuaShuBtn(U.PokerCardColor.MeiHua)},e.prototype.onBtnTHS_4=function(){console.log("onBtnTHS_4"),M.ModelRoot.instance.get(v.GameCardUISelfHandModel).clickTongHuaShuBtn(U.PokerCardColor.FangKuai)},e.prototype.onBtnNotPlay=function(){console.log("onBtnNotPlay"),d.GameModel.instance.isGuideModel()?st.GameGuideModel.instance.runNextStep():y.GameProxy.instance.sendPlayCard(d.GameModel.instance.newPlayCardData()),this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.NONE,v.GameCardUISelfHandModel.instance.downAllCards(),this.onCommonEvent({type:nt.PointLayerHintControlTypeEnum.HIDE})},e.prototype.onBtnPlayCard=function(){console.log("onBtnPlayCard");var t=d.GameModel.instance.newPlayCardData();M.ModelRoot.instance.get(v.GameCardUISelfHandModel).checkCanPutCards(t)&&(d.GameModel.instance.isGuideModel()?st.GameGuideModel.instance.runNextStep():(this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.NONE,y.GameProxy.instance.sendPlayCard(t)))},e.prototype.onBtnHG=function(){console.log("onBtnHG"),this.checkClickContributeBtn()?(y.GameProxy.instance.sendContributeCardsData(this._thisTouchedCards[0]),d.GameModel.instance.delCard(d.GameModel.instance.getHandCards(m.LocalSeatEnum.SELF),[this._thisTouchedCards[0]]),p.EventManager.instance.emit(_.GameEvent.UPDATE_HAND_CARDS_DATA,{seat:m.LocalSeatEnum.SELF,cards:d.GameModel.instance.getHandCards(m.LocalSeatEnum.SELF)}),p.EventManager.instance.emit(_.GameEvent.REFRESH_THS)):v.GameCardUISelfHandModel.instance.downAllCards()},e.prototype.onBtnJG=function(){console.log("onBtnJG"),this.checkClickContributeBtn()?(y.GameProxy.instance.sendContributeCardsData(this._thisTouchedCards[0]),d.GameModel.instance.delCard(d.GameModel.instance.getHandCards(m.LocalSeatEnum.SELF),[this._thisTouchedCards[0]]),p.EventManager.instance.emit(_.GameEvent.UPDATE_HAND_CARDS_DATA,{seat:m.LocalSeatEnum.SELF,cards:d.GameModel.instance.getHandCards(m.LocalSeatEnum.SELF)}),p.EventManager.instance.emit(_.GameEvent.REFRESH_THS)):v.GameCardUISelfHandModel.instance.downAllCards()},e.prototype.checkClickContributeBtn=function(){if(d.GameModel.instance.isContributeStep()){if(this._thisTouchedCards&&1===this._thisTouchedCards.length){var t=this._thisTouchedCards[0];if(v.GameCardUISelfHandModel.instance.getContributeCards().indexOf(t)<0){var e=d.GameModel.instance.getContributeType();if(d.ContributeTypeEnum.GIVE===e)R.CardFunc.getCardColor(t)===U.PokerCardColor.HongXin&&d.GameModel.instance.getCardLevel()===R.CardFunc.getCardNum(t)?p.EventManager.instance.emit($.DataEvent.ToastData,"\u4e0d\u80fd\u8fdb\u8d21\u7ea2\u6843\u7ea7\u724c!"):p.EventManager.instance.emit($.DataEvent.ToastData,"\u8bf7\u9009\u62e9\u6700\u5927\u7684\u724c!");else{var n=v.GameCardUISelfHandModel.instance.getGameCardLogic();n.isTuoCard(n.getCardNum(t))?p.EventManager.instance.emit($.DataEvent.ToastData,"\u8fd8\u8d21\u7684\u724c\u4e0d\u80fd\u4e3a\u62d6\u724c!"):p.EventManager.instance.emit($.DataEvent.ToastData,"\u8bf7\u9009\u62e910\u4ee5\u4e0b\u7684\u724c!")}return!1}return!0}return p.EventManager.instance.emit($.DataEvent.ToastData,"\u8bf7\u9009\u62e9\u5355\u5f20\u724c!"),!1}return console.error("checkClickContribute"),p.EventManager.instance.emit($.DataEvent.ToastData,"\u975e\u8fdb\u8fd8\u8d21\u9636\u6bb5~"),!1},e.prototype.onBtnHint=function(){console.log("onBtnHint"),M.ModelRoot.instance.get(v.GameCardUISelfHandModel).clickHintBtn()||this.onBtnNotPlay()},e.prototype.onBtnReady=function(){var t=this;if(this.isBoxRoom())P.GameTableProxy.instance.sendPlayerStart();else{var e=m.PlayerInfoModel.instance.getNowPlayerGold();this._roomConfig&&this._roomConfig.subID&&d.GameModel.instance.checkPlayerContinueGame(e,this._roomConfig.subID)?m.PlayerInfoModel.instance.isPlayerStand()?this.onBtnChangeSeat():this.isBoxRoom()?P.GameTableProxy.instance.sendPlayerStart():h.GameCommonModel.instance.isMixPassARoom()?h.GameCommonModel.instance.reqPlayGame():h.GameCommonModel.instance.reqQueryRoomStatus(function(e){e?d.GameModel.instance.guidToSuitableRoom(t._roomConfig.subID):h.GameCommonModel.instance.reqPlayGame()}):this._roomConfig||l.UIManager.instance.open(S.DialogUI).then(function(e){e.initConfirm({content:"\u60a8\u5f53\u524d\u7f51\u7edc\u73af\u5883\u5f02\u5e38\uff0c\u8bf7\u9000\u51fa\u6e38\u620f\u623f\u95f4\u540e\u91cd\u65b0\u5c1d\u8bd5"}),e.confirmAction=function(){t.reqLeaveGame()},e.closeAction=function(){t.reqLeaveGame()}})}},e.prototype.initDefaultData=function(){this.view.m_head_1.m_head.m_name.m_head.url=m.PlayerInfoModel.instance.getHead(C.UserInfoModel.instance.userInfo.numID),this.isBoxRoom()||h.GameCommonModel.instance.isMixPassARoom()||h.GameCommonModel.instance.isMatchRoomModel()?console.log("initDefaultData.defaultScore"):d.GameModel.instance.isFirstGame()?console.log("initDefaultData.isFirstGame"):d.GameModel.instance.isWaitModel()?this.view.m_head_1.m_score.text="":this.view.m_head_1.m_score.text=C.UserInfoModel.instance.userInfo.gold.toString()},e.prototype.initHS=function(){this._buttonLayer_y=this.view.m_button_layer.y,this._show_img_y=this.view.m_show_img_1.y,Z.SettingModel.instance.data.isLiPaiHeng?(this.view.m_button_layer.y=this._buttonLayer_y+120,this.view.m_show_img_1.y=this._show_img_y+120):(this.view.m_button_layer.y=this._buttonLayer_y,this.view.m_show_img_1.y=this._show_img_y),this.isBoxRoom()&&this.view.m_show_img_1.m_imgType.selectedIndex==nt.CImgTypeEnum.SHOW_READY&&(this.view.m_button_layer.m_yqType.selectedIndex=nt.ButtonLayerYQControlTypeEnum.MEDIUM,this.view.m_show_img_1.y=this._show_img_y+240),this.view.m_bottom.m_lpType.selectedIndex=nt.LPControlTypeEnum.NOT_LP},e.prototype.onFreshHS=function(t){this.isGamePlay()?t?(this.view.m_button_layer.y=this._buttonLayer_y+120,this.view.m_show_img_1.y=this._show_img_y+120):(this.view.m_button_layer.y=this._buttonLayer_y,this.view.m_show_img_1.y=this._show_img_y):this.view.m_button_layer.y=this._buttonLayer_y,this.isBoxRoom()&&this.view.m_show_img_1.m_imgType.selectedIndex!==nt.CImgTypeEnum.SHOW_READY&&(this.isGamePlay()||(this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.READY,this.view.m_show_img_1.y=this._show_img_y+240))},e.prototype.clubCheckAuthorize=function(){if(this.isClubMode()&&!C.UserInfoModel.instance.isAuthorized()){var t=gt.LocalStorageKey.LAST_AUTHORIZE_PUSH_TIMESTAMP,e=localStorage.getItem(t)||"0";yt.UtilTime.isTodayDate(parseInt(e))||(localStorage.setItem(t,Date.now().toString()),L.UIHelp.instance.syncUserInfo())}},e.prototype.onUpdateRealTimeVoice=function(){var t=Ut.PlatformManager.instance.platform.canVoiceChat&&(h.GameCommonModel.instance.isTeamModel()||h.GameCommonModel.instance.isBoxRoom()&&this._logicdata&&1==this._logicdata.isVoIP),e=Lt.RealTimeVoiceModel.instance.muteMicrophone,n=Lt.RealTimeVoiceModel.instance.muteEarphone;this.view.m_btnMicrophone.visible=t,this.view.m_btnEarphone.visible=t,this.view.m_btnMicrophone.selected=!e,this.view.m_btnEarphone.selected=!n;var o=gt.DataLocalStorage.getRealTimeVoiceGuidePopCount();if(t&&0==o){gt.DataLocalStorage.addRealTimeVoiceGuidePopCount();var a=this.view.m_imgRealtimeHint;a.onClick(this.btnRealtimeHint,this),cc.tween(a.node).delay(5).call(function(){a.visible=!0}).delay(3).call(function(){a.visible=!1}).start()}},e.prototype.checkBoxRealTimeVoice=function(){if(h.GameCommonModel.instance.isBoxRoom()&&this._logicdata&&1==this._logicdata.isVoIP){var t=gt.DataLocalStorage.addKeyWithNumID(gt.LocalStorageKey.REALTIME_VOICE_BOX);if((+localStorage.getItem(t)||0)>0){var e=h.GameCommonModel.instance.getBoxID();Lt.RealTimeVoiceModel.instance.joinChat(e.toString())}}},e.prototype.btnMicrophone=function(){this.view.m_imgRealtimeHint.visible&&(this.view.m_imgRealtimeHint.visible=!1);var t=null;h.GameCommonModel.instance.isTeamModel()?t=Rt.FriendTeamModel.instance.teamInfo.partnerid:h.GameCommonModel.instance.isBoxRoom()&&(t=h.GameCommonModel.instance.getBoxID()),t&&(this.view.m_btnMicrophone.selected=!this.view.m_btnMicrophone.selected,this.view.m_btnEarphone.selected?Lt.RealTimeVoiceModel.instance.updateMuteConfig(this.view.m_btnMicrophone.selected,!1):(Lt.RealTimeVoiceModel.instance.joinChat(t.toString()),h.GameCommonModel.instance.isBoxRoom()&&localStorage.setItem(gt.DataLocalStorage.addKeyWithNumID(gt.LocalStorageKey.REALTIME_VOICE_BOX),1..toString())))},e.prototype.btnEarphone=function(){this.view.m_imgRealtimeHint.visible&&(this.view.m_imgRealtimeHint.visible=!1);var t=null;h.GameCommonModel.instance.isTeamModel()?t=Rt.FriendTeamModel.instance.teamInfo.partnerid:h.GameCommonModel.instance.isBoxRoom()&&(t=h.GameCommonModel.instance.getBoxID()),t&&(this.view.m_btnEarphone.selected=!this.view.m_btnEarphone.selected,this.view.m_btnEarphone.selected?(Lt.RealTimeVoiceModel.instance.exitChat(),h.GameCommonModel.instance.isBoxRoom()&&localStorage.setItem(gt.DataLocalStorage.addKeyWithNumID(gt.LocalStorageKey.REALTIME_VOICE_BOX),(0).toString())):(Lt.RealTimeVoiceModel.instance.joinChat(t.toString()),h.GameCommonModel.instance.isBoxRoom()&&localStorage.setItem(gt.DataLocalStorage.addKeyWithNumID(gt.LocalStorageKey.REALTIME_VOICE_BOX),1..toString())))},e.prototype.btnRealtimeHint=function(){this.view.m_imgRealtimeHint.visible&&(this.view.m_imgRealtimeHint.visible=!1)},e.prototype.initTestEndComp=function(){et.DataBfConfig.isTestEnv()&&l.UIManager.instance.open(wt.GameTestUI)},e.prototype.initNoteCard=function(){this.showNoteCardDot(),this.showNoteCardLabel(),this.checkShowNoteCardBubble(),this.view.m_note_card.draggable=!0,this.view.m_note_card.dragBounds=new cc.Rect(0,0,this.view.width,this.view.height)},e.prototype.showNoteCardDot=function(){var t=Gt.BuyNoteCardModel.instance.getNoteCardPropCount();t>0?(this.view.m_right_top.m_isHaveNoteCard.selectedIndex=nt.CTopRightExistNoteCardEnum.SHOW,this.view.m_right_top.m_num.text=t.toString()):this.view.m_right_top.m_isHaveNoteCard.selectedIndex=nt.CTopRightExistNoteCardEnum.HIDE},e.prototype.showNoteCardLabel=function(){if(this.refreshNoteCard(),h.GameCommonModel.instance.isTeamModel()){if(d.GameModel.instance.isTeamNoteCardActive())return this.view.m_note_card.m_cNoteCardType.selectedIndex=nt.CNoteCardTypeEnum.TEAM,this.view.m_note_card.visible=!this.view.m_note_card.visible,!0;if(d.GameModel.instance.isNoteCardActive())return this.view.m_note_card.visible=!this.view.m_note_card.visible,d.GameModel.instance.checkShowLookerNoteCard()?this.view.m_note_card.visible&&this.showLookerNoteCardAni():this.view.m_note_card.m_cNoteCardType.selectedIndex=nt.CNoteCardTypeEnum.NORMAL,!0}else if(d.GameModel.instance.isNoteCardActive())return this.view.m_note_card.visible=!this.view.m_note_card.visible,d.GameModel.instance.checkShowLookerNoteCard()?this.view.m_note_card.visible&&this.showLookerNoteCardAni():this.view.m_note_card.m_cNoteCardType.selectedIndex=nt.CNoteCardTypeEnum.NORMAL,!0;return!1},e.prototype.checkShowNoteCardBubble=function(){var t=this;if(this.view.m_imgNoteCardBubble.visible=!1,h.GameCommonModel.instance.isTeamModel()){var e=gt.DataLocalStorage.addKeyWithNumID(gt.LocalStorageKey.TEAM_NOTE_CARD_HINT_COUNT),n=+localStorage.getItem(e)||0;n<=0&&(console.log("checkShowNoteCardBubble.begin"),cc.tween(this.view.m_imgNoteCardBubble.node).delay(5).call(function(){console.log("checkShowNoteCardBubble.show"),t.view.m_imgNoteCardBubble.visible=!0,localStorage.setItem(e,(n+1).toString())}).delay(2).call(function(){console.log("checkShowNoteCardBubble.hide"),t.view.m_imgNoteCardBubble.visible=!1}).start())}},e.prototype.resetNoteCardNum=function(){this.initNormalLeftCardNums(),this.initTeamLeftCardNums(),this.refreshNoteCard(),this.resetNoteCardUI()},e.prototype.resetNoteCardUI=function(){h.GameCommonModel.instance.isTeamModel()&&d.GameModel.instance.isTeamNoteCardActive()?this.view.m_note_card.m_cNoteCardType.selectedIndex=nt.CNoteCardTypeEnum.TEAM:d.GameModel.instance.isNoteCardActive()&&(this.view.m_note_card.m_cNoteCardType.selectedIndex=nt.CNoteCardTypeEnum.NORMAL)},e.prototype.initNormalLeftCardNums=function(){for(var t=2;t<=14;++t)this._normalLeftCardNums[t]=8;this._normalLeftCardNums[15]=2,this._normalLeftCardNums[16]=2},e.prototype.initTeamLeftCardNums=function(){for(var t=2;t<=14;++t)this._teamLeftCardNums[t]=8;this._teamLeftCardNums[15]=2,this._teamLeftCardNums[16]=2},e.prototype.refreshNoteCard=function(){var t=!1;h.GameCommonModel.instance.isTeamModel()&&d.GameModel.instance.isTeamNoteCardActive()?(t=!0,console.log("noteCard->.team:",this._teamLeftCardNums)):(t=!1,console.log("noteCard->.normal:",this._normalLeftCardNums));for(var e=2;e<=16;++e){var n=this.view.m_note_card["m_num_"+e],o=null;o=t?this._teamLeftCardNums[e]:this._normalLeftCardNums[e],n.m_num.text=o.toString(),n.m_cColorType.selectedIndex=o>0?nt.CNoteCardNumColorEnum.SHOW_COLOR:nt.CNoteCardNumColorEnum.HIDE_COLOR}},e.prototype.refreshNormalCardNumByPlayCard=function(t){for(var e=0;e<t.length;++e){var n=R.CardFunc.getCardNum(t[e]);this._normalLeftCardNums[n]--}},e.prototype.refreshTeamCardNumByPlayCard=function(t){for(var e=0;e<t.length;++e){var n=R.CardFunc.getCardNum(t[e]);this._teamLeftCardNums[n]--}},e.prototype.refreshRelinkOutCarCount=function(t){this._normalLeftCardNums[2]-=t.card2count,this._normalLeftCardNums[3]-=t.card3count,this._normalLeftCardNums[4]-=t.card4count,this._normalLeftCardNums[5]-=t.card5count,this._normalLeftCardNums[6]-=t.card6count,this._normalLeftCardNums[7]-=t.card7count,this._normalLeftCardNums[8]-=t.card8count,this._normalLeftCardNums[9]-=t.card9count,this._normalLeftCardNums[10]-=t.card10count,this._normalLeftCardNums[11]-=t.cardJcount,this._normalLeftCardNums[12]-=t.cardQcount,this._normalLeftCardNums[13]-=t.cardKcount,this._normalLeftCardNums[14]-=t.cardAcount,this._normalLeftCardNums[15]-=t.cardFcount,this._normalLeftCardNums[16]-=t.cardZcount,this._teamLeftCardNums[2]-=t.card2count,this._teamLeftCardNums[3]-=t.card3count,this._teamLeftCardNums[4]-=t.card4count,this._teamLeftCardNums[5]-=t.card5count,this._teamLeftCardNums[6]-=t.card6count,this._teamLeftCardNums[7]-=t.card7count,this._teamLeftCardNums[8]-=t.card8count,this._teamLeftCardNums[9]-=t.card9count,this._teamLeftCardNums[10]-=t.card10count,this._teamLeftCardNums[11]-=t.cardJcount,this._teamLeftCardNums[12]-=t.cardQcount,this._teamLeftCardNums[13]-=t.cardKcount,this._teamLeftCardNums[14]-=t.cardAcount,this._teamLeftCardNums[15]-=t.cardFcount,this._teamLeftCardNums[16]-=t.cardZcount,this.refreshNoteCard()},e.prototype.isBoxPassLevelRoom=function(){return this._gameID===et.GameIDInfo.CLASSIC_GD.id||this._gameID===et.GameIDInfo.TP_GD.id},e.prototype.iniBoxRoundInfo=function(){var t="";if(this.isBoxPassLevelRoom()){var e;t="\u8fc7"+(e=14===this._boxrule?"A":this._boxrule.toString()),this._hintBoxDelayMsg="\u786e\u5b9a\u53d1\u8d77\u5ef6\u957f\u5bf9\u5c40\u7533\u8bf7?\n\u518d\u6765\u4e00\u8f6e\u8fc7[size=24][color=#e3401f]"+e+"[/color][/size]\u5bf9\u5c40"}else t=this._nowPan+"/"+this._totalPan,this._hintBoxDelayMsg="\u786e\u5b9a\u53d1\u8d77\u5ef6\u957f\u5bf9\u5c40\u7533\u8bf7?\n\u518d\u52a0[size=24][color=#e3401f]"+this._totalPan+"[/color][/size]\u5c40\u6e38\u620f";this.view.m_c_boxRoundData.selectedIndex=this._boxMult?0:this._gameID===et.GameIDInfo.TTZ_GD.id?1:2,this._canPlayRoundNums>1?(this.view.m_boxTurnData.m_c_turninfo.selectedIndex=0,this.view.m_boxTurnData.m_txtCurGameNum.text="\u5c40\u6570: "+t,this.view.m_boxTurnData.m_txtCurTurnNum.text="\u8f6e\u6570: "+this._nowPlayRoundNums+"/"+this._canPlayRoundNums):(this.view.m_boxTurnData.m_c_turninfo.selectedIndex=1,this.view.m_boxTurnData.m_txtGameNum.text=""+t),this.view.m_boxTurnData.visible=!0,this.view.m_boxDelayBubble.visible=!1},e.prototype.initRuleGuideUI=function(){var t;if(function(t){t[t.MIX_PASSA_GUIDE=0]="MIX_PASSA_GUIDE",t[t.MULT_GUIDE=1]="MULT_GUIDE",t[t.MULT_CRIT=2]="MULT_CRIT",t[t.BROAD_MULT=3]="BROAD_MULT",t[t.BOTH_NEW_MULT=4]="BOTH_NEW_MULT"}(t||(t={})),d.GameModel.instance.isGuideMultCritModel())this.view.m_ruleGuide.m_cGuideType.selectedIndex=t.MULT_CRIT,this.view.m_ruleGuide.visible=!0;else if(d.GameModel.instance.isGuideBroadMultModel()){var e=d.GameModel.instance.getCurGuidePlazaSubID(),n=b.RoomModel.instance.getPlazaInfoBySubID(e);this.view.m_ruleGuide.m_txtBroadMult.setVar("mult",""+n.broadMult).flushVars(),this.view.m_ruleGuide.m_cGuideType.selectedIndex=t.BROAD_MULT,this.view.m_ruleGuide.visible=!0}else d.GameModel.instance.isGuideBothNewMultModel()?(e=d.GameModel.instance.getCurGuidePlazaSubID(),n=b.RoomModel.instance.getPlazaInfoBySubID(e),this.view.m_ruleGuide.m_txtBroadMult2.setVar("mult",""+n.broadMult).flushVars(),this.view.m_ruleGuide.m_cGuideType.selectedIndex=t.BOTH_NEW_MULT,this.view.m_ruleGuide.visible=!0):this.view.m_ruleGuide.visible=!1},e.prototype.initRoomConfig=function(){if(d.GameModel.instance.isNormalModel()){if(this.view.m_button_layer.visible=!0,this.hideWinMoreButton(),this.hidePassLevelTaskBtn(),this.showGameMultTaskBtn(!1),h.GameCommonModel.instance.isMatchRoomModel())return this._gameID,et.GameIDInfo.CLASSIC_GD.id,void this.initMatchRoomUI();var t=h.GameCommonModel.instance.getRoomType();if(t===j.ClubShowFlags.CLUBS_LIST){var e=h.GameCommonModel.instance.getSubid();this._roomConfig=b.RoomModel.instance.getPlazaInfoBySubID(e),this._roomConfig&&(this._roomConfig.subID=e),b.RoomModel.instance.checkIsPassLevelTaskRoom(e)&&(this.view.m_right_top.m_cShowPassLevelTask.selectedIndex=nt.CShowPassLevelTask.SHOW,Ct.PassLevelTaskModel.instance.init(e)),b.RoomModel.instance.checkIsMultRoom(e)&&Et.GameMultTaskModel.instance.init(),h.GameCommonModel.instance.isMixPassARoom()&&(this.view.m_head_1.m_cRoomtype.selectedIndex=nt.CSelfHeadRoomTypeEnum.PLAZA_GOLD_MIXPASSA),h.GameCommonModel.instance.isHasCallMultStep()?this.view.m_head_3.m_cCallMultTag.selectedIndex=nt.CHeadCallMultTagEnum.HAS_CALLMULT_STEP:this.view.m_head_3.m_cCallMultTag.selectedIndex=nt.CHeadCallMultTagEnum.NOT_CALLMULT_STEP}else t===j.ClubShowFlags.BOXS_LIST&&(this._roomConfig=b.RoomModel.instance.getClubConfig(h.GameCommonModel.instance.getClubid()),this.view.m_roomType.selectedIndex=nt.CGameSceneRoomTypeEnum.PLAZA_BOX,this.view.m_head_1.m_cRoomtype.selectedIndex=nt.CSelfHeadRoomTypeEnum.PLAZA_BOX,this.view.m_right_top.m_cRoomType.selectedIndex=nt.CTopRightRoomTypeEnum.PLAZA_BOX,this.view.m_menu.m_roomType.selectedIndex=nt.MenuControlTypeEnum.PLAZA_BOX_NOT_START,this.view.m_button_layer.m_roomType.selectedIndex=nt.CButtonLayerRoomTypEnum.PLAZA_BOX);this._gameID=this._roomConfig?this._roomConfig.gameID:h.GameCommonModel.instance.getGameId(),this._subID=this._roomConfig.subID,this._gameID===et.GameIDInfo.ERREN_GD.id?(m.PlayerInfoModel.instance.setNowGamePlayer(m.ER_CNT),t===j.ClubShowFlags.BOXS_LIST&&(this.view.m_roomType.selectedIndex=nt.CGameSceneRoomTypeEnum.PLAZA_BOX_ER)):this._gameID===et.GameIDInfo.TTZ_GD.id?(m.PlayerInfoModel.instance.setNowGamePlayer(m.MAX_PLAYER),this.view.m_top_left.m_cGameType.selectedIndex=nt.CTopLeftGameTypeEnum.TTZ):m.PlayerInfoModel.instance.setNowGamePlayer(m.MAX_PLAYER),this._roomConfig&&this._roomConfig.multType&&0!==this._roomConfig.multType&&(this.view.m_top_left.m_multType.selectedIndex=nt.TopLeftMultControlTypeEnum.SHOW),h.GameCommonModel.instance.isFreeTeamModel()&&this.initFriendFreeTeamUI()}},e.prototype.initFriendFreeTeamUI=function(){},e.prototype.initMatchRoomUI=function(){},e.prototype.onBtnNoteCard=function(){var t=this;console.log("onBtnNoteCard"),d.GameModel.instance.isGuideModel()||this.showNoteCardLabel()||l.UIManager.instance.open(D.BuyNoteCardUI).then(function(e){e.setCallback(function(e){e&&(t.showNoteCardDot(),t.onBtnNoteCard())})})},e.prototype.onBtnChangeSeat=function(){this._onBtnChangeSeat()},e.prototype._onBtnChangeSeat=function(){var t=this;if(!d.GameModel.instance.isGuideModel()&&!this._changeSeatTouch)if(this._changeSeatTouch=!0,I.CoroutineManager.instance.once(2,function(){t._changeSeatTouch=!1},this),this.isGamePlay())p.EventManager.instance.emit($.DataEvent.ToastData,"\u60a8\u6b63\u5728\u6e38\u620f\u4e2d\uff0c\u65e0\u6cd5\u6362\u684c\uff01",null,!0);else{var e=m.PlayerInfoModel.instance.getNowPlayerGold();if(this._roomConfig&&this._roomConfig.subID&&d.GameModel.instance.checkPlayerContinueGame(e,this._roomConfig.subID))if(h.GameCommonModel.instance.isMixPassARoom()){if(this.isPassLevelPlaza())return void this.dealChangeSeat();this.reqChangeTable()}else h.GameCommonModel.instance.reqQueryRoomStatus(function(e){if(e)d.GameModel.instance.guidToSuitableRoom(t._roomConfig.subID);else{if(t.isPassLevelPlaza())return void t.dealChangeSeat();t.reqChangeTable()}});else this._roomConfig||l.UIManager.instance.open(S.DialogUI).then(function(e){e.initConfirm({content:"\u60a8\u5f53\u524d\u7f51\u7edc\u73af\u5883\u5f02\u5e38\uff0c\u8bf7\u9000\u51fa\u6e38\u620f\u623f\u95f4\u540e\u91cd\u65b0\u5c1d\u8bd5\uff01"}),e.confirmAction=function(){t.reqLeaveGame()},e.closeAction=function(){t.reqLeaveGame()}})}},e.prototype.reqChangeTable=function(){var t=this;console.log("onBtnChangeSeat"),h.GameCommonModel.instance.reqChangeTable(function(e){if(0===e){m.PlayerInfoModel.instance.clearOtherPlayer();for(var n=0;n<m.MAX_PLAYER;++n)n!==m.LocalSeatEnum.SELF&&(t.view["m_head_"+n].visible=!1);t.clearUI()}else p.EventManager.instance.emit($.DataEvent.ToastData,"\u6362\u684c\u5931\u8d25 flag_"+e,null,!0)})},e.prototype.onBtnMenu=function(){console.log("onBtnMenu"),this.view.m_showMenu.selectedIndex=nt.ShowMenuControlTypeEnum.SHOW-this.view.m_showMenu.selectedIndex},e.prototype.onBtnChat=function(){console.log("onBtnChat"),d.GameModel.instance.isGuideModel()||l.UIManager.instance.open(A.GameChatUI).then(function(t){var e=h.GameCommonModel.instance.isGoldTeamModel()||h.GameCommonModel.instance.getEnterType()===Rt.EnterTypeEnum.TEAM_SINGLE;t.init(e?Dt.ChatType.TEAM:Dt.ChatType.NORMAL)})},e.prototype.onBtnCardLP=function(){console.log("onBtnCardLP"),d.GameModel.instance.isGuideModel()||(v.GameCardUISelfHandModel.instance.clickLiPaiBtn(),this.view.m_bottom.m_lpType.selectedIndex=v.GameCardUISelfHandModel.instance.isShowRestoreBtn()?nt.LPControlTypeEnum.RESTORE_LP:nt.LPControlTypeEnum.CAN_LP)},e.prototype.onBtnCardHF=function(){console.log("onBtnCardHF"),v.GameCardUISelfHandModel.instance.clickRestoreBtn(),this.view.m_bottom.m_lpType.selectedIndex=v.GameCardUISelfHandModel.instance.isShowRestoreBtn()?nt.LPControlTypeEnum.RESTORE_LP:nt.LPControlTypeEnum.CAN_LP},e.prototype.onBtnStore=function(){console.log("onBtnStore"),d.GameModel.instance.isGuideModel()||l.UIManager.instance.open(N.GameShopUI)},e.prototype.reqLeaveGame=function(t,e){var n=this;this._reqLeaveFlag=!0,h.GameCommonModel.instance.reqLeaveGame(function(){n.backToLobby(t,e)})},e.prototype.reqLeaveBox=function(){var t=this;h.GameCommonModel.instance.reqLeaveBox(function(){t.backToLobby()})},e.prototype.backToLobby=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.isBoxRoom()&&p.EventManager.instance.emit(St.PlatformEventType.RealTimeVoiceClose),this.stopCoroutine(),l.UIManager.instance.isExist(K.GameResultUI)&&l.UIManager.instance.close(K.GameResultUI),l.UIManager.instance.isExist(mt.BoxRecordUI)&&l.UIManager.instance.close(mt.BoxRecordUI),l.UIManager.instance.isExist(D.BuyNoteCardUI)&&l.UIManager.instance.close(D.BuyNoteCardUI),l.UIManager.instance.isExist(N.GameShopUI)&&l.UIManager.instance.close(N.GameShopUI),l.UIManager.instance.isExist(H.GameJSUI)&&l.UIManager.instance.close(H.GameJSUI),l.UIManager.instance.isExist(ct.GameGuideUI)&&l.UIManager.instance.close(ct.GameGuideUI),l.UIManager.instance.isExist(lt.GuideDescUI)&&l.UIManager.instance.close(lt.GuideDescUI),l.UIManager.instance.isExist(ut.GuideUI)&&l.UIManager.instance.close(ut.GuideUI),l.UIManager.instance.isExist(at.BigCardShare)&&l.UIManager.instance.close(at.BigCardShare),l.UIManager.instance.isExist(Ot.GameWinMoreUI)&&l.UIManager.instance.close(Ot.GameWinMoreUI),l.UIManager.instance.clearPkgResByClass(Q.UserInfoUI),l.UIManager.instance.clearPkgResByClass(A.GameChatUI);var n,o=t[0],a=t[1],i=t.length>=3?t[2]:0,r=tt.HallUITab.HALL;if(o===tt.HallUITab.MATCH_ROUND)r=o;else{var s=this.isBoxRoom();n=b.RoomModel.instance.getPlazaInfoBySubID(this._subID),r=s?tt.HallUITab.HALL:tt.HallUITab.GROUND,r=o||r}h.GameCommonModel.instance.stopListener(),L.UIHelp.instance.backToHall(r,n,a,i)},e.prototype.isPassLevelPlaza=function(){return!!this._roomConfig&&this._roomConfig.passLevel>0},e.prototype.dealExit=function(){var t=this,e=d.GameModel.instance.getNowMaxLevel();d.GameModel.instance.getPassA()?this.reqLeaveGame():e<this._roomConfig.passLevel&&!this._isPlayerLeave?l.UIManager.instance.open(S.DialogUI).then(function(e){var n=t._roomConfig.passLevel.toString();14===t._roomConfig.passLevel&&(n="A");var o="\u672a\u8fc7"+n+"\u79bb\u5f00\u6263\u9664"+d.GameModel.instance.getEscapePunish()*t._roomConfig.base+"\u91d1\u5e01\u4f5c\u4e3a\u5904\u7f5a\uff0c\u786e\u5b9a\u8981\u79bb\u5f00\u5417\uff1f";e.initConfirmCancelClose({content:o}),e.confirmAction=function(){t.reqLeaveGame()}}):this.reqLeaveGame()},e.prototype.dealChangeSeat=function(){var t=this,e=d.GameModel.instance.getNowMaxLevel();d.GameModel.instance.getPassA()?this.reqChangeTable():e<this._roomConfig.passLevel&&!this._isPlayerLeave?l.UIManager.instance.open(S.DialogUI).then(function(e){var n=t._roomConfig.passLevel.toString();14===t._roomConfig.passLevel&&(n="A");var o="\u672a\u8fc7"+n+"\u6362\u684c\u6263\u9664"+d.GameModel.instance.getEscapePunish()*t._roomConfig.base+"\u91d1\u5e01\u4f5c\u4e3a\u5904\u7f5a\uff0c\u786e\u5b9a\u8981\u6362\u684c\u5417\uff1f";e.initConfirmCancelClose({content:o}),e.confirmAction=function(){t.reqChangeTable()}}):this.reqChangeTable()},e.prototype.onBtnExit=function(){var t,e=this;console.log("onBtnExit"),this.toggleMenuPanel(!1),this.isBoxRoom()?(h.GameCommonModel.instance.isBoxCreator()?it.BfasManager.instance.evt(rt.BoxRoomPointID.OWNER_CLICK_BTN_LEAVE.eventid,null,!0,rt.BoxRoomPointID.OWNER_CLICK_BTN_LEAVE.eventName):it.BfasManager.instance.evt(rt.BoxRoomPointID.NORMAL_CLICK_BTN_LEAVE.eventid,null,!0,rt.BoxRoomPointID.NORMAL_CLICK_BTN_LEAVE.eventName),this.isGamePlay()?l.UIManager.instance.open(S.DialogUI).then(function(t){t.initConfirmCancelClose({content:"\u6e38\u620f\u4e2d\u79bb\u5f00\uff0c\u5176\u4ed6\u73a9\u5bb6\u5c06\u65e0\u6cd5\u7ee7\u7eed\u6e38\u620f\uff0c\u771f\u7684\u8981\u9000\u51fa\u5417\uff1f"}),t.confirmAction=function(){e.reqLeaveBox()}}):h.GameCommonModel.instance.isBoxCreator()?l.UIManager.instance.open(S.DialogUI).then(function(t){t.initFTConfirmCancelClose({content:"\u662f\u5426\u9000\u51fa\u5e76\u89e3\u6563\u5f53\u524d\u623f\u95f4?\n(\u6682\u65f6\u79bb\u5f00\u540e\u623f\u95f4\u4ecd\u4f1a\u4fdd\u755960\u5206\u949f)",btnFTConfirm:"\u6682\u65f6\u79bb\u5f00",btnFTCancel:"\u786e\u5b9a\u89e3\u6563"}),t.confirmAction=function(){it.BfasManager.instance.evt(rt.BoxRoomPointID.OWNER_POP_BTN_LEAVE.eventid,null,!0,rt.BoxRoomPointID.OWNER_POP_BTN_LEAVE.eventName),e.reqLeaveBox()},t.cancelAction=function(){it.BfasManager.instance.evt(rt.BoxRoomPointID.OWNER_POP_BTN_DISMISS.eventid,null,!0,rt.BoxRoomPointID.OWNER_POP_BTN_DISMISS.eventName),h.GameCommonModel.instance.reqJieSan(H.JSStateEnum.REQ_JS_TYPE)}}):this.reqLeaveBox()):this.isGamePlay()?this.isPassLevelPlaza()?this.dealExit():(t=h.GameCommonModel.instance.isMixPassARoom()?"\u8fc7A\u79bb\u5f00\u5c06\u4f1a\u5305\u8d54\u95e8\u7968\u4f5c\u4e3a\u5904\u7f5a\uff0c\u786e\u5b9a\u8981\u9000\u51fa\u5417\uff1f":"\u5f3a\u884c\u79bb\u5f00\u89c6\u4f5c\u6258\u7ba1\uff0c\u4f1a\u6258\u7ba1\u81f3\u6e38\u620f\u7ed3\u675f\uff0c\u786e\u5b9a\u8981\u9000\u51fa\u5417\uff1f",l.UIManager.instance.open(S.DialogUI).then(function(n){n.initConfirmCancelClose({content:t}),n.confirmAction=function(){e.reqLeaveGame()}})):h.GameCommonModel.instance.getEnterType()===Rt.EnterTypeEnum.TEAM_SINGLE?this.onGoToFriendTeam():this.reqLeaveGame()},e.prototype.onGoToFriendTeam=function(){this.reqLeaveGame(tt.HallUITab.FRIEND_TEAM)},e.prototype.onBtnTrust=function(){console.log("onBtnTrust"),d.GameModel.instance.isGuideModel()||(this.toggleMenuPanel(!1),y.GameProxy.instance.sendTrust(y.TrustEnum.TRUST))},e.prototype.onPlayTuoPaiResult=function(){for(var t=this,e=function(e){var o=m.PlayerInfoModel.instance.serverToLocal(e),a="tp_chenggong",i=0;if(n._tuoPaiScore[e]<0)a="tp_shibai",i=2;else if(0===n._tuoPaiScore[e]){var r=d.GameModel.instance.getGameWinSeatByTeam();r===e||m.PlayerInfoModel.instance.isPartner(r,e)?i=1:(i=2,a="tp_shibai")}else i=1;0===o||2===o?n.view.m_point_bg.m_tpWinType.selectedIndex=i:n.view.m_point_bg.m_tpWinType2.selectedIndex=i;var s=d.GameModel.instance.getLastShowCardsBySeat(e).length;n.view.m_point_bg["m_seatPos"+o].selectedIndex=s<=10?3:11===s||12===s?1:13===s||14===s?4:2,J.UtilView.isFullScreen()&&(0===o?n.view.m_point_bg["m_tp_group_"+o].x+=44:2===o&&(n.view.m_point_bg["m_tp_group_"+o].x-=44)),n.view.m_point_bg["m_score_text_"+o].text=n._tuoPaiScore[e]>=0?"+"+n._tuoPaiScore[e]:n._tuoPaiScore[e],n.view.m_point_bg["m_score_text_"+o+1].text=n._tuoPaiScore[e]>=0?"+"+n._tuoPaiScore[e]:n._tuoPaiScore[e];var c=n.view.m_point_bg["m_tp_card_"+o].node.getPosition(),l=n.view.m_point_bg["m_bg_"+o].node.getPosition(),u=n.view.m_point_bg["m_score_text_"+o].node.getPosition(),p=n.view.m_point_bg["m_score_text_"+o+1].node.getPosition();Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_GAME_TP_RESULT,function(e){var n=e.getComponent(sp.Skeleton);e.setPosition(cc.v2(0,0)),n.setAnimation(0,a,!1),n.setCompleteListener(function(e){if((e.animation?e.animation.name:"")===a){var n=t.view.m_point_bg.m_jp_ani_node.node.getPosition();t.view.m_point_bg["m_bg_"+o].node.runAction(cc.sequence(cc.scaleTo(.15,1.35,1.35),cc.spawn(cc.moveTo(.15,n),cc.scaleTo(.15,0,0)),cc.callFunc(function(){}))),t.view.m_point_bg["m_tp_card_"+o].node.runAction(cc.sequence(cc.scaleTo(.15,1.35,1.35),cc.spawn(cc.moveTo(.15,n),cc.scaleTo(.15,0,0)),cc.callFunc(function(){t.view.m_point_bg["m_tp_card_"+o].node.removeAllChildren()}))),t.view.m_point_bg["m_score_text_"+o].node.runAction(cc.sequence(cc.scaleTo(.15,1.35,1.35),cc.spawn(cc.moveTo(.15,n),cc.scaleTo(.15,0,0)),cc.callFunc(function(){}))),t.view.m_point_bg["m_score_text_"+o+1].node.runAction(cc.sequence(cc.scaleTo(.15,1.35,1.35),cc.spawn(cc.moveTo(.15,n),cc.scaleTo(.15,0,0)),cc.callFunc(function(){}))),I.CoroutineManager.instance.once(.6,function(){t.view.m_point_bg.m_tpWinType.selectedIndex=0,t.view.m_point_bg.m_tpWinType2.selectedIndex=0,t.view.m_point_bg["m_tp_card_"+o].node.setPosition(c),t.view.m_point_bg["m_tp_card_"+o].node.setScale(1),t.view.m_point_bg["m_bg_"+o].node.setPosition(l),t.view.m_point_bg["m_bg_"+o].node.setScale(1),t.view.m_point_bg["m_score_text_"+o].node.setPosition(u),t.view.m_point_bg["m_score_text_"+o].node.setScale(1),t.view.m_point_bg["m_score_text_"+o+1].node.setPosition(p),t.view.m_point_bg["m_score_text_"+o+1].node.setScale(1),t.view.m_point_bg.m_seatPos0.selectedIndex=0,t.view.m_point_bg.m_seatPos1.selectedIndex=0,t.view.m_point_bg.m_seatPos2.selectedIndex=0,t.view.m_point_bg.m_seatPos3.selectedIndex=0},t)}})},n.view.m_point_bg["m_tp_card_"+o].node)},n=this,o=0;o<m.MAX_PLAYER;++o)e(o)},e.prototype.onBtnSet=function(){console.log("onBtnSet"),d.GameModel.instance.isGuideModel()||(this.toggleMenuPanel(!1),l.UIManager.instance.open(E.default))},e.prototype.playJPSJAnimation=function(t,e){var n=this,o="ani_jipai";2===t&&(o="ani_js_shengji");var a=d.GameModel.instance.getGameWinByTeam(),i=a===d.GameModel.instance.getGameData(m.LocalSeatEnum.SELF).team?d.GameTeamEnum.TEAM_ONE:d.GameTeamEnum.TEAM_TWO;void 0===a&&(i=1);var r=d.GameModel.instance.getGameDataByTeam(d.GameTeamEnum.TEAM_ONE),s=d.GameModel.instance.getGameDataByTeam(d.GameTeamEnum.TEAM_TWO);r&&s&&2===r.level&&2===s.level&&(i=1);var c=d.GameModel.instance.getCardLevelData();c&&1===t?this.view.m_point_bg.m_level.text=Mt.UtilString.convertToStrCardNum(c.cardLevel):2===t&&(this.view.m_point_bg.m_level.text=Mt.UtilString.convertToStrCardNum(d.GameModel.instance.getNowLevel()-d.GameModel.instance.getLevelDiff())),Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_GAME_JP,function(a){a.setPosition(cc.v2(0,0));var r=a.getComponent(sp.Skeleton);r.setCompleteListener(function(t){var e=t.animation?t.animation.name:"";e==e&&(n.view.m_point_bg.m_bjdj_ani.node.stopAllActions(),n.view.m_point_bg.m_bjdj_ani.node.setPosition(n._bjdj_Node_Pos),n.view.m_point_bg.m_bjdj_ani.node.removeAllChildren())}),r.setEventListener(function(o,a){var s=a.data.name,u=a.intValue;"Alpha_shuzi"===s&&10===u?(n.view.m_point_bg.m_level.visible=!0,n.view.m_point_bg.m_level.alpha=0,n.view.m_point_bg.m_level.setScale(1,1),1===t&&d.GameModel.instance.isTuoPaiModel()&&Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_GAME_TS,function(t){t.setPosition(cc.v2(0,0));var e=t.getComponent(sp.Skeleton);e.setCompleteListener(function(t){t.animation&&t.animation.name}),I.CoroutineManager.instance.once(.3667,function(){n.view.m_point_bg.m_level_text.text=Mt.UtilString.convertToStrCardNum(c.cardLevel),n.view.m_point_bg.m_tuo_text.text=Mt.UtilString.convertToStrCardNum(d.GameModel.instance.getTuoPaiLevel()),n.view.m_point_bg.m_upType.selectedIndex=2},n),I.CoroutineManager.instance.once(1,function(){n.view.m_point_bg.m_upType.selectedIndex=0,n.view.m_point_bg.m_ts_node.node.removeAllChildren()},n),e.setAnimation(0,"ani_jipai",!1)},n.view.m_point_bg.m_ts_node.node)):"Alpha_shuzi"===s&&11===u?(n.view.m_point_bg.m_level.node.stopAllActions(),n.view.m_point_bg.m_level.node.runAction(cc.fadeIn(.3))):"Alpha_shuzi"===s&&12===u?(n.view.m_point_bg.m_level.node.stopAllActions(),n.view.m_point_bg.m_level.alpha=1,d.GameModel.instance.isGuideModel()&&I.CoroutineManager.instance.once(.3,function(){r.paused=!0,p.EventManager.instance.emit(_.GameEvent.NEW_PLAYER_GUIDE,{gComponent:n.view.m_point_bg.m_bjdj_ani,guideType:ut.GuideShowUIEnum.CUSTOM_MASK,showHandSpine:!1}),l.UIManager.instance.get(ct.GameGuideUI).then(function(t){t.showGuideFirst(),t.setCallBack(function(){r.paused=!1})})},n)):"Alpha_shuzi"===s&&20===u?(n.view.m_point_bg.m_level.visible=!0,n.view.m_point_bg.m_level.setScale(0,0)):"Alpha_shuzi"===s&&21===u?(n.view.m_point_bg.m_level.node.stopAllActions(),n.view.m_point_bg.m_level.node.runAction(cc.scaleTo(.2,1.55).easing(cc.easeSineInOut()))):"Alpha_shuzi"===s&&22===u?(n.view.m_point_bg.m_level.node.stopAllActions(),n.view.m_point_bg.m_type.selectedIndex=nt.PointLayerBJDJControlTypeEnum.SHOW,n.view.m_point_bg.m_level.setScale(1.55,1.55),2===t&&d.GameModel.instance.isTuoPaiModel()&&Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_GAME_TS,function(t){t.setPosition(cc.v2(0,0));var e=t.getComponent(sp.Skeleton);e.setCompleteListener(function(t){"ani_jipai"===(t.animation?t.animation.name:"")&&(n.view.m_point_bg.m_upType.selectedIndex=0,n.view.m_point_bg.m_ts_node.node.removeAllChildren())}),I.CoroutineManager.instance.once(.1,function(){var t=d.GameModel.instance.getLevelDiff();n.view.m_point_bg.m_up_text.text=t.toString(),n.view.m_point_bg.m_upType.selectedIndex=1},n),e.setAnimation(0,"ani_jipai",!1)},n.view.m_point_bg.m_ts_node.node)):"Alpha_shuzi"===s&&23===u?(n.view.m_point_bg.m_level.node.stopAllActions(),console.log("cardLevelData: "+c.cardLevel+"getLevelDiff: "+d.GameModel.instance.getLevelDiff()),n.view.m_point_bg.m_level.text=Mt.UtilString.convertToStrCardNum(d.GameModel.instance.getNowLevel()),n.view.m_point_bg.m_level.alpha=0):"Alpha_shuzi"===s&&24===u?(n.view.m_point_bg.m_level.node.stopAllActions(),n.view.m_point_bg.m_level.alpha=1,n.view.m_point_bg.m_level.setScale(1,1)):"Alpha_shuzi"===s&&25===u?n.view.m_point_bg.m_level.node.stopAllActions():"xy_pai"===s&&1===u?(r.timeScale=0,I.CoroutineManager.instance.once(.5,function(){r.timeScale=1,n.view.m_point_bg.m_level.node.stopAllActions(),n.view.m_point_bg.m_level.setScale(0,0);var t=n.view.m_point_bg["m_level_end_point_"+i].node.getPosition();n.view.m_point_bg.m_bjdj_ani.node.runAction(cc.moveTo(.26,t).easing(cc.easeSineInOut())),n.view.m_point_bg.m_level.node.runAction(cc.moveTo(.26,t).easing(cc.easeSineInOut()))},n)):"xy_pai"===s&&2===u&&(n.view.m_point_bg.m_type.selectedIndex=nt.PointLayerBJDJControlTypeEnum.HIDE,n.view.m_point_bg.m_level.node.stopAllActions(),n.view.m_point_bg.m_level.setScale(0,0),e&&e(),Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_GAME_FK,function(t){t.setPosition(cc.v2(0,0));var e=t.getComponent(sp.Skeleton);e.setCompleteListener(function(t){"jipai_fk"===(t.animation?t.animation.name:"")&&(n.view.m_point_bg.m_bjdj_ani.node.removeAllChildren(),n.view.m_point_bg.m_level.node.setPosition(n._level_Node_Pos))}),e.setAnimation(0,"jipai_fk",!1)},n.view.m_point_bg["m_level_end_point_"+i].node))}),r.setAnimation(0,o,!1)},this.view.m_point_bg.m_bjdj_ani.node)},e.prototype.showFirstSecondRankAnimation=function(t,e){var n=this;e===d.GameRankEnum.FIRST_RANK?Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_GAME_TM,function(e){n.view.m_point_bg["m_tou_mo_"+t].visible=!0;var o=e.getComponent(sp.Skeleton);e.setPosition(cc.v2(0,0)),o.setAnimation(0,"ani_touyou",!1)},this.view.m_point_bg["m_tou_mo_"+t].node):e===d.GameRankEnum.SECOND_RANK?Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_GAME_TM,function(e){n.view.m_point_bg["m_tou_mo_"+t].visible=!0;var o=e.getComponent(sp.Skeleton);e.setPosition(cc.v2(0,0)),o.setAnimation(0,"ani_2you",!1)},this.view.m_point_bg["m_tou_mo_"+t].node):3===e&&Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_GAME_PAIXING1,function(e){n.view.m_point_bg["m_jiefeng_"+t].visible=!0;var o=e.getComponent(sp.Skeleton);e.setPosition(cc.v2(0,0)),o.setCompleteListener(function(e){"ani5_jiefeng"===(e.animation?e.animation.name:"")&&(n.view.m_point_bg["m_jiefeng_"+t].visible=!1,n.view.m_point_bg["m_jiefeng_"+t].node.removeAllChildren())}),o.setAnimation(0,"ani5_jiefeng",!1)},this.view.m_point_bg["m_jiefeng_"+t].node)},e.prototype.onBtnRule=function(){console.log("onBtnRule"),this.toggleMenuPanel(!1),l.UIManager.instance.open(z.RuleUI)},e.prototype.toggleMenuPanel=function(t){this.view.m_showMenu.selectedIndex=t?nt.ShowMenuControlTypeEnum.SHOW:nt.ShowMenuControlTypeEnum.HIDE},e.prototype.onBtnHead_0=function(){d.GameModel.instance.isGuideModel()||this.showPlayerInfo(m.LocalSeatEnum.LEFT)},e.prototype.onBtnHead_1=function(){d.GameModel.instance.isGuideModel()||this.showPlayerInfo(m.LocalSeatEnum.SELF)},e.prototype.onBtnHead_2=function(){d.GameModel.instance.isGuideModel()||this.showPlayerInfo(m.LocalSeatEnum.RIGHT)},e.prototype.onBtnHead_3=function(){d.GameModel.instance.isGuideModel()||this.showPlayerInfo(m.LocalSeatEnum.PARTNER)},e.prototype.showPlayerInfo=function(t){var e=null;1===t?(e=C.UserInfoModel.instance.userInfo).gamegold=m.PlayerInfoModel.instance.getNowPlayerGold():e=m.PlayerInfoModel.instance.getPlayerByLocalSeat(t),e&&(e.seat=t,l.UIManager.instance.open(T.GuanDanGameUserInfoUI,e))},e.prototype.pushRecordQueue=function(t,e){var n=[t,e];this._recordQueue.push(n)},e.prototype.popRecordQueue=function(){if(this._recordQueue.length>0){var t=this._recordQueue[0];return this._recordQueue.shift(),console.log("popRecordQueue:",this._recordQueue),t}},e.prototype.showChatRecord=function(t,e){this.pushRecordQueue(t,e),this.playRecordQueueData()},e.prototype.playRecordQueueData=function(){var t=this;if(this._isRecording)console.log("playRecordQueueData.playing");else{this._isRecording=!0;var e=this.popRecordQueue();console.log("playRecordQueueData:",e),e?this.playChatRecord(e[0],e[1],function(){t._isRecording=!1,t.playRecordQueueData()}):this._isRecording=!1}},e.prototype.playChatRecord=function(t,e,n){console.log("showChatRecord:",t,e);var o=this.getHeadRecordComp(t);F.AudioManager.instance.playEffectRemote(e,function(t){console.log("showChatRecord.progress:",t),0===t?(o.visible=!0,F.AudioManager.instance.pauseEffect(),F.AudioManager.instance.effectVolume=1,F.AudioManager.instance.pauseMusic()):1===t&&(o.visible=!1,F.AudioManager.instance.resumeEffect(),F.AudioManager.instance.initEffectVolume(),F.AudioManager.instance.resumeMusic(),Pt.UtilCC.releaseHttpAsset([e]),n&&n())})},e.prototype.getHeadRecordComp=function(t){return m.LocalSeatEnum.SELF===t||m.LocalSeatEnum.PARTNER===t?this.view["m_head_"+t].m_chatRecord:m.LocalSeatEnum.LEFT===t?this.view["m_head_"+t].m_chatRecordLeft:this.view["m_head_"+t].m_chatRecordRight},e.prototype.onAppHide=function(){console.log("===>onAppHide.record");for(var t=0;t<m.MAX_PLAYER;t++)this.getHeadRecordComp(t).visible=!1;F.AudioManager.instance.resumeEffect(),F.AudioManager.instance.initEffectVolume(),F.AudioManager.instance.resumeMusic(),this._isRecording=!1,this._recordQueue=[]},e.prototype.showEmoji=function(t,e){if(e>Dt.EMOJI_INDEX.MAX)e>=Dt.LIMIT_EMOJI_INDEX.MIN&&e<=Dt.LIMIT_EMOJI_INDEX.MAX&&this.showLimitEmoji(t,e);else{var n=null;(n=1===t||3===t?this.view["m_head_"+t].m_emojiNode.node:0===t?this.view["m_head_"+t].m_emojiLeft.node:this.view["m_head_"+t].m_emojiRight.node).removeAllChildren(),this.playAnimation(t,n,w.DataConstant.PKG_GAMECHATUI,"dan"+(e+1),2,function(){n.active=!1})}},e.prototype.showLimitEmoji=function(t,e){var n=null;(n=1===t||3===t?this.view["m_head_"+t].m_emojiEmpty.node:0===t?this.view["m_head_"+t].m_emojiLeftEmpty.node:this.view["m_head_"+t].m_emojiRightEmpty.node).removeAllChildren();var o=e-Dt.LIMIT_EMOJI_INDEX.MIN;this.playLimitEmoji(n,o,2,function(){n.active=!1})},e.prototype.showChatWenZi=function(t,e){var n=null,o=null;0===t?(n=this.view["m_head_"+t].m_chatLeftText,o=this.view["m_head_"+t].m_bubbleLeft):2===t?(n=this.view["m_head_"+t].m_chatRightText,o=this.view["m_head_"+t].m_bubbleRight):(n=this.view["m_head_"+t].m_text,o=this.view["m_head_"+t].m_bubble),n.node.active=!0,o.node.active=!0,n.text=e,n.node.stopAllActions(),cc.tween(n.node).delay(3).call(function(){n.node.active=!1,o.node.active=!1}).start()},e.prototype.showMeiLiZhi=function(t,e){var n=this,o=this.view["m_head_"+t].m_meiLiNode.node;F.AudioManager.instance.playEffect(k.DataSound.getGameSoundUrl(k.GameSoundTypeEnum["EFFECT_"+e])),this.playAnimation(t,o,w.DataConstant.PKG_USERINFOUI,"ani_"+e,1,function(){n.showCharmPropEff(o,e)})},e.prototype.playAnimation=function(t,e,n,o,a,i){var r=this,s=fgui.UIPackage.createObject(n,o);s&&(e.addChild(s.node),n===w.DataConstant.PKG_GAMECHATUI?(s.node.setAnchorPoint(cc.v2(.5,.5)),s.node.setPosition(cc.v2(0,-3)),s.node.angle=-180):s.node.setPosition(cc.v2(.5*-s.node.width,.5*s.node.height)),e.active=!0,s.asMovieClip.playing=!0,s.asMovieClip.setPlaySettings(0,null,a,null,function(){s.node.removeFromParent(),i.call(r)},this))},e.prototype.playLimitEmoji=function(t,e,n,o){var a,i=this,r=(null===(a=Dt.Limit_chat_emoji[e])||void 0===a?void 0:a.propID)||0,s=G.DataProps.instance.getPropAni(r);Pt.UtilCC.instantiatePrefab(s.path,function(e){t.active=!0;var n=e.getComponent(sp.Skeleton);n.setCompleteListener(function(t){(t.animation?t.animation.name:"")===s.name&&(e.removeFromParent(),o.call(i))}),n.setAnimation(0,s.name,!0)},t)},e.prototype.showCharmPropEff=function(t,e){var n=G.DataProps.instance.getPropConfigByID(e),o=fgui.UIPackage.createObject(w.DataConstant.PKG_COMMON,"PropImgLoaderNoScale");o.asCom.getChildAt(0).asLoader.url=L.UIHelp.getPropIcon(n.type,"charm"+n.addCharm);var a=cc.v2(.6*-o.node.width,.5*o.node.height);o.node.setPosition(a),t.addChild(o.node,2),cc.tween(o.node).to(.3,{x:a.x,y:a.y+30}).call(function(){o.node.removeFromParent()}).start()},e.prototype.onSendChatMessage=function(t){if(console.log("onSendChatMessage:",t),6!==t.channel){var e=m.PlayerInfoModel.instance.getLocalSeatByNumid(t.numid).lseat,n=bf33.Utils.bytesToString(t.content);if(console.log("onSendChatMessage:",e,n),e>=0)if(t.channel===club.client.common.ChatMessage.CHANNELS.GROUP)t.type===club.client.common.ChatMessage.TYPES.CT_AD_1?this.showChatRecord(e,n):(m.PlayerInfoModel.instance.isPartner(e,m.LocalSeatEnum.SELF)||e==m.LocalSeatEnum.SELF)&&this.showChatWenZi(e,n);else{var o=localStorage.getItem(gt.DataLocalStorage.addKeyWithNumID(gt.LocalStorageKey.SHEILD_ALL_CHAT));if(o=!!o&&1==Number(o))return;if(0===n.indexOf("/")){var a=Number(n.substring(1));this.showEmoji(e,a)}else this.showChatWenZi(e,n)}}},e.prototype.onSendProp=function(t){var e=this;t.propId==G.PropIDEnum.CHARM_MISSILE&&(t.propId=G.PropIDEnum.CHARM_EGG);var n=m.PlayerInfoModel.instance.getLocalSeatByNumid(t.fromId).lseat,o=m.PlayerInfoModel.instance.getLocalSeatByNumid(t.toId).lseat;if(n>=0&&o>=0){var a=cc.size(0,0),i=t.propId,r=G.DataProps.instance.getPropConfigByID(i),s=r.res,c=fgui.UIPackage.createObject(""+w.DataConstant.PKG_COMMON,"PropImgLoader");c.asCom.getChildAt(0).asLoader.url=L.UIHelp.getPropIcon(r.type,s);var l=this.view.m_prop_panel["m_seat"+n].node,u=this.view.m_prop_panel["m_seat"+o].node,d=l.getPosition(),p=u.getPosition();d=cc.v2(d.x-.5*c.node.width,d.y-a.height+.5*c.node.height),p=cc.v2(p.x-.5*c.node.width,p.y-a.height+.5*c.node.height),c.node.setPosition(cc.v2(d.x,d.y)),this.view.m_prop_panel.node.addChild(c.node);var h=cc.Vec2.distance(d,p)/1800;cc.tween(c.node).then(cc.jumpTo(h,p,150,1)).call(function(){c.node.removeFromParent(),e.showMeiLiZhi(o,i)}).start()}},e.prototype.onFighting=function(t){var e=this;if(d.GameModel.instance.getGameStep()===d.GameStepEnum.GAME_STEP_PLAY_CARD)return this.showKongGongSmall(t.fightContributeSeatNum1),void(t.fightContributeSeatNum1!==t.fightContributeSeatNum2&&this.showKongGongSmall(t.fightContributeSeatNum2));this.showHGAnimation(m.MAX_PLAYER,!1),Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_GAME_KANGGONG,function(n){var o=n.getComponent(sp.Skeleton);n.setPosition(cc.v2(220,100)),o.setCompleteListener(function(n){"kg_da"===(n.animation?n.animation.name:"")&&(e.showKongGongSmall(t.fightContributeSeatNum1),t.fightContributeSeatNum1!=t.fightContributeSeatNum2&&e.showKongGongSmall(t.fightContributeSeatNum2),e.view.m_point_bg.m_fight_ani.node.removeAllChildren())}),o.setAnimation(0,"kg_da",!1)},this.view.m_point_bg.m_fight_ani.node)},e.prototype.onGDMult=function(t,e){this.updateMultNum(d.GameModel.instance.getAllMult()),t&&(h.GameCommonModel.instance.isGoldRoom()&&b.RoomModel.instance.checkIsMultCrit(h.GameCommonModel.instance.getSubid())?this.playNewMultAnimation(e):this.playMultAnimation())},e.prototype.playNewMultAnimation=function(t){if(!(t.nAddMul<=1)){var e=m.PlayerInfoModel.instance.serverToLocal(t.nSeat),n=this.view.m_point_bg["m_mult_"+e];console.log("playNewMultAnimation",e,t.nAddMul),n.node.removeAllChildren();var o=this.getNewMultSpineName(t.nAddMul);Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_GAME_MULT_NEW,function(t){var e=t.getComponent(sp.Skeleton);t.setPosition(cc.v2(0,0)),e.setAnimation(0,o,!1)},n.node)}},e.prototype.getNewMultSpineName=function(t){switch(t){case 2:return"beishu1_2";case 3:return"beishu1_3";case 4:return"beishu1_4";case 5:return"beishu1_5";case 6:return"beishu1_6";case 8:return"beishu1_8";case 10:return"beishu1_10";default:return"beishu1_2"}},e.prototype.playMultAnimation=function(){var t=this;Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_GAME_MULT,function(e){var n=e.getComponent(sp.Skeleton);e.setPosition(cc.v2(0,0)),n.setAnimation(0,"beishu",!1),n.setCompleteListener(function(e){"beishu"===(e.animation?e.animation.name:"")&&t.view.m_point_bg.m_mult_ani.node.removeAllChildren()})},this.view.m_point_bg.m_mult_ani.node)},e.prototype.showSmallCard=function(t,e){if(!(t===m.LocalSeatEnum.ERROR||e<=0)){var n=fgui.UIPackage.createObject("GameCardUI","CardUI_Out");n.setScale(.4,.4);var o=this.view["m_head_"+t].m_small_card.node.getPosition(),a=new O.CardUIOut;a.setCardNodeObj(n),a.setCardInfo(e),n.node.setPosition(new cc.Vec2(o.x+.4*n.node.width/2,o.y-.4*n.node.height/2)),a.showNode(!0),this._smallCardObj[t]=a,this.view["m_head_"+t].addChild(n)}},e.prototype.onTTZLiangPai=function(t){this._ttzLiangPai=t;var e=m.PlayerInfoModel.instance.serverToLocal(t.labelCardPartnerNum1),n=m.PlayerInfoModel.instance.serverToLocal(t.labelCardPartnerNum2);this._ttzNum1=m.PlayerInfoModel.instance.getNumidByServiceSeat(t.labelCardPartnerNum1),this._ttzNum2=m.PlayerInfoModel.instance.getNumidByServiceSeat(t.labelCardPartnerNum2),e===n?this.showSmallCard(e,t.labelCardValue):(this.showSmallCard(e,t.labelCardValue),this.showSmallCard(n,t.labelCardValue)),d.GameModel.instance.getGameStep()===d.GameStepEnum.GAME_STEP_CHANGE_SEAT&&(e===n?this.showLabelCard(e,t.labelCardValue):(this.showLabelCard(e,t.labelCardValue),this.showLabelCard(n,t.labelCardValue)))},e.prototype.showLabelCard=function(t,e){var n=this;Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_GAME_SHOWLABELCARD,function(o){var a=o.getComponent(sp.Skeleton);o.setPosition(cc.v2(0,0));var i=fgui.UIPackage.createObject("GameCardUI","CardUI_Out"),r=n.view.m_point_bg["m_card_"+t].node.getPosition();i.node.setPosition(new cc.Vec2(r.x+i.node.width/2,r.y-i.node.height/2));var s=new O.CardUIOut;s.setCardNodeObj(i),s.setCardInfo(e),n.view.m_point_bg.addChild(i),a.setCompleteListener(function(t){"Liangpai"===(t.animation?t.animation.name:"")&&s.showNode(!1)}),a.setEventListener(function(t,e){"wenzi"===e.data.name&&s.showNode(!0)}),a.setAnimation(0,"Liangpai",!1)},this.view.m_point_bg["m_ttz_label_ani_"+t].node)},e.prototype.showResultAnimation=function(t,e,n){var o=this,a=m.PlayerInfoModel.instance.getSelfSeat(),i="";t[a]?(i="ani1_js_sl",F.AudioManager.instance.playEffect(k.DataSound.getGameSoundUrl(k.GameSoundTypeEnum.EFFECT_WIN_ACT))):(i="ani2_js_sb",F.AudioManager.instance.playEffect(k.DataSound.getGameSoundUrl(k.GameSoundTypeEnum.EFFECT_LOSE_ACT))),Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_RESULT,function(t){var a=t.getComponent(sp.Skeleton);t.setPosition(cc.v2(0,0)),a.setAnimation(0,i,!1),a.setCompleteListener(function(t){(t.animation?t.animation.name:"")===i&&(o.view.m_result_ani.node.removeAllChildren(),n&&n())}),e&&e()},this.view.m_result_ani.node)},e.prototype.hideWinMoreButton=function(){this.view.m_button_layer.m_moreWin_node.m_moreWin_node.node.removeAllChildren(),this.view.m_button_layer.m_moreWin_node.m_text.text="",this.view.m_button_layer.m_moreWin_node.visible=!1},e.prototype.showWinMoreButton=function(){var t=this;pt.GameWinMoreModel.instance.getDataOpen()&&(this.view.m_button_layer.m_moreWin_node.visible=!0,this.view.m_button_layer.m_moreWin_node.m_flag.m_isVideo.selectedIndex=pt.GameWinMoreModel.instance.isVideoType()?nt.WinMoreVideoTypeControlTypeEnum.IS_VIDEO:nt.WinMoreVideoTypeControlTypeEnum.NOT_VIDEO,this.view.m_button_layer.m_moreWin_node.m_flag.m_textType.selectedIndex=pt.GameWinMoreModel.instance.isMoreWinResult()?nt.WinMoreTextTypeControlTypeEnum.WIN:nt.WinMoreTextTypeControlTypeEnum.LOSE,this.view.m_button_layer.m_moreWin_node.m_actionType.selectedIndex=nt.WinMoreActionTypeControlTypeEnum.ACTION,Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_GAME_START_GET,function(e){var n=e.getComponent(sp.Skeleton);e.setPosition(cc.v2(0,0)),n.setCompleteListener(function(t){t.animation&&t.animation.name}),n.setAnimation(0,"mys",!0),t.view.m_button_layer.m_moreWin_node.m_text.text=pt.GameWinMoreModel.instance.getDataGold()},this.view.m_button_layer.m_moreWin_node.m_moreWin_node.node))},e.prototype.hidePassLevelTaskBtn=function(){this.view.m_right_top.m_cShowPassLevelTask.selectedIndex=nt.CShowPassLevelTask.HIDE,this.view.m_panelPassLevelTask.visible=!1},e.prototype.showGameMultTaskBtn=function(t){this.view.m_btnMultTask.visible=t},e.prototype.onMsgProlongBox=function(t){var e=this;3!==t.state&&4!==t.state||0!==t.remainplaycnt||this.showBoxDelayBtn(!1);var n=I.CoroutineManager.instance.wait(function(){return null!=e._logicdata&&null!=e._logicdata},function(){var o="";if(e.isBoxPassLevelRoom()){var a;a=14===e._logicdata.rule?"A":e._logicdata.rule.toString(),o="\u518d\u6765\u4e00\u8f6e(\u8fc7"+a+")"}else o="\u518d\u6765"+e._logicdata.totalPan+"\u5c40";if(l.UIManager.instance.isExist(_t.GameBoxDelayPannleUI))p.EventManager.instance.emit($.DataEvent.RefreshDelayPannelInfo,t,o);else{var i=e.view.m_right_top.m_btn_delay.localToGlobal(0,0);l.UIManager.instance.open(_t.GameBoxDelayPannleUI,i).then(function(e){e.refreshPannleInfo(t,o)})}n&&I.CoroutineManager.instance.stopCo(n)},this)},e.prototype.onMsgPushProlongBoxInfo=function(t){0===t.remainplaycnt?(this.showBoxDelayBtn(!1),this._historyData=null):this.showBoxDelayBtn(!0)},e.prototype.showBoxDelayBtn=function(t){this.view.m_right_top.m_btn_delay.visible=t,t&&this.onMsgDelayBtnEnble(!0)},e.prototype.onMsgShowProlongBoxHint=function(t,e){this.view.m_boxDelayBubble.visible=t,e&&(this.view.m_boxDelayBubble.m_txtDelayHint.text=e)},e.prototype.onEventProlongBoxSuccess=function(){this._historyData=null},e.prototype.onMsgContinueRoundData=function(t){this._canPlayRoundNums=t.canPlayRoundNums,this._nowPlayRoundNums=t.nowPlayRoundNums,this.iniBoxRoundInfo()},e.prototype.onMsgDelayBtnEnble=function(t){this.view.m_right_top.m_btn_delay.enabled=t},e.prototype.onMsgPushContinueBoxInfo=function(){l.UIManager.instance.isExist(ft.GameContinueTableUI)?l.UIManager.instance.get(ft.GameContinueTableUI).then(function(t){t.initLayer(!0)}):l.UIManager.instance.open(ft.GameContinueTableUI).then(function(t){t.initLayer(!0)})},e.prototype.onNotifyClosePassLevelTask=function(){this.hidePassLevelTaskBtn()},e.prototype.onNotifyShowPassLevelTaskPannel=function(t,e,n){t?this.showPassLevelTaskPanel(e,n):this.view.m_panelPassLevelTask.visible&&(this.view.m_cPassLevelPannel.selectedIndex=nt.CShowPassLevelPannel.HIDE)},e.prototype.showPassLevelTaskPanel=function(t,e){var n=this;t.state!==Ct.PassLevelStateEnum.HAD_GET&&(this.view.m_panelPassLevelTask.m_txtLevel.text=Mt.UtilString.convertToStrCardNum(t.level),this.view.m_panelPassLevelTask.m_txtGold.text="\u91d1\u5e01x"+e,this.view.m_panelPassLevelTask.m_btnGet.touchable=t.state===Ct.PassLevelStateEnum.CAN_GET,this.view.m_panelPassLevelTask.m_btnGet.enabled=t.state===Ct.PassLevelStateEnum.CAN_GET,this.view.m_panelPassLevelTask.visible||(it.BfasManager.instance.sendEvt(rt.GamePassLevelTaskPointID.SHOW,{subID:h.GameCommonModel.instance.getSubid()}),this.view.m_cPassLevelPannel.selectedIndex=nt.CShowPassLevelPannel.SHOW),cc.Tween.stopAllByTarget(this.view.m_panelPassLevelTask.node),cc.tween(this.view.m_panelPassLevelTask.node).delay(5).call(function(){n.view.m_panelPassLevelTask.visible&&(n.view.m_cPassLevelPannel.selectedIndex=nt.CShowPassLevelPannel.HIDE)}).start())},e.prototype.onNotifyUpdatePassLevelTask=function(t,e){t.state===Ct.PassLevelStateEnum.NOT_GET?this.view.m_right_top.m_btn_passLevel.m_cTaskState.selectedIndex=nt.CPassLevelTaskStateEnum.NOT_GET:t.state===Ct.PassLevelStateEnum.CAN_GET?(this.view.m_right_top.m_btn_passLevel.m_cTaskState.selectedIndex=nt.CPassLevelTaskStateEnum.CAN_GET,Pt.UtilCC.releasePrefabAsset(vt.DataSpineAniPath.ANI_PASSLEVEL_TASK),this.view.m_right_top.m_btn_passLevel.m_spineIcon.node.removeAllChildren(),Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_PASSLEVEL_TASK,function(t){t.setPosition(cc.v2(0,0)),t.getComponent(sp.Skeleton).setAnimation(0,"gjyl",!1)},this.view.m_right_top.m_btn_passLevel.m_spineIcon.node),Pt.UtilCC.releasePrefabAsset(vt.DataSpineAniPath.ANI_ENTRANCE_PARTICLE),this.view.m_right_top.m_btn_passLevel.m_spineParticle.node.removeAllChildren(),Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_ENTRANCE_PARTICLE,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"rk_lizi",!0)},this.view.m_right_top.m_btn_passLevel.m_spineParticle.node),this.view.m_panelPassLevelTask.visible&&this.showPassLevelTaskPanel(t,e)):t.state===Ct.PassLevelStateEnum.HAD_GET&&(this.view.m_right_top.m_btn_passLevel.m_cTaskState.selectedIndex=nt.CPassLevelTaskStateEnum.NOT_GET,this.view.m_panelPassLevelTask.visible=!1)},e.prototype.onNotifyMixPassATotalScore=function(t){for(var e=0;e<t.totalScore.length;++e){var n=m.PlayerInfoModel.instance.serverToLocal(e);this.view["m_head_"+n].m_score.text=t.totalScore[e]}},e.prototype.onNotifyMixPassABigResult=function(t){var e=this;this.view.m_right_top.m_changeSeatType.selectedIndex=nt.TopRightChangeSeatControlTypeEnum.CAN_CHANGE,l.UIManager.instance.open(K.GameResultUI).then(function(n){n.initPassAReusltUI(t),n.setMixPassALeaveCallback(function(){e.reqLeaveGame()}),n.setMixPassAChangeTableCallback(function(){e.onBtnChangeSeat()}),n.setMixPassAContinueFunc(function(){e.onBtnReady()})})},e.prototype.onNotifyCallMultData=function(t){var e=m.PlayerInfoModel.instance.serverToLocal(t.seat);if(d.GameModel.instance.getGameStep()===d.GameStepEnum.GAME_STEP_CALL_MULT)if(m.LocalSeatEnum.SELF===e)if(d.GameModel.instance.checkHasCallMult(t.callMult)){this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.NONE,this.view.m_button_layer.m_noMultBubble.visible=!1;var n=t.callMult===d.CallMultNumEnum.NOT_CALL?nt.CImgTypeEnum.SHOW_NOT_MULT:nt.CImgTypeEnum.SHOW_MULT;this.showImg(e,!0,n),this.showCallMultHeadTag(e,t.callMult),this.showCallMultWaitAni(!0)}else this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.CALL_MULT,this.view.m_button_layer.m_btn_mult.grayed=!t.canCallMult;else d.GameModel.instance.checkHasCallMult(t.callMult)&&(n=t.callMult===d.CallMultNumEnum.NOT_CALL?nt.CImgTypeEnum.SHOW_NOT_MULT:nt.CImgTypeEnum.SHOW_MULT,this.showImg(e,!0,n),this.showCallMultHeadTag(e,t.callMult));else this.view.m_button_layer.m_noMultBubble.visible=!1,this.showCallMultWaitAni(!1),this.showCallMultHeadTag(e,t.callMult)},e.prototype.showCallMultHeadTag=function(t,e){var n=e===d.CallMultNumEnum.MULT_CALL;this.view["m_callMultTag_"+t].visible=!0,m.LocalSeatEnum.SELF===t?this.view["m_callMultTag_"+t].m_cMultTag.selectedIndex=n?nt.CCallMultTagEnum.SELF_MULT:nt.CCallMultTagEnum.SELF_NOT_MULT:this.view["m_callMultTag_"+t].m_cMultTag.selectedIndex=n?nt.CCallMultTagEnum.OTHER_MULT:nt.CCallMultTagEnum.OTHER_NOT_MULT},e.prototype.hideCallMultHeadTag=function(t){if(t!==m.MAX_PLAYER)this.view["m_callMultTag_"+t].visible=!1;else for(var e=0;e<m.MAX_PLAYER;e++)this.hideCallMultHeadTag(e)},e.prototype.showCallMultWaitAni=function(t){this.view.m_callMultWaitAni.visible=t},e.prototype.showAdaptCallMultAni=function(){},e.prototype.onNotifyCloseGameMultTask=function(){this.showGameMultTaskBtn(!1)},e.prototype.onNotifyUpdateGameMultTask=function(t){var e="";if(t.awardCount>=t.awardLimitCount)e="\u660e\u65e5\u518d\u6765";else{var n=h.GameCommonModel.instance.getSubid();console.log("onNotifyUpdateGameMultTask.subID:",n);var o=Et.GameMultTaskModel.instance.getTaskConfigByID(n),a=Et.GameMultTaskModel.instance.getTaskRateInfoByID(n);o&&a&&(e=a.state===Et.GameMultTaskStateEnum.NOT_GET?"\u518d\u8d62"+(o.target-a.rate)+"\u5c40":"\u53ef\u9886\u53d6")}this.view.m_btnMultTask.title=e,this.showGameMultTaskBtn(!0)},e.prototype.onBtnGetMoreWin=function(){pt.GameWinMoreModel.instance.onBtnGet()},e.prototype.onBtnRuleGuideStep=function(){var t=this;console.log("onBtnRuleGuideStep");var e=nt.CRuleGuideEnum.GUIDE_1;d.GameModel.instance.isGuideBothNewMultModel()&&(e=nt.CRuleGuideEnum.GUIDE_2),this._currentGuideIndex>e?(this._currentGuideIndex=nt.CRuleGuideEnum.GUIDE_1,L.UIHelp.instance.showBigDialogConfirmCancel({content:"\u65b0\u89c4\u5219\u5c31\u662f\u8fd9\u6837\uff0c\u5feb\u53bb\u5bf9\u5c40\u4f53\u9a8c\u5427~",confirmText:"\u6211\u77e5\u9053\u4e86",cancelText:"\u518d\u5b66\u4e00\u904d"},function(e){e?(d.GameModel.instance.setGuideState(d.GuideTypeEnum.NONE),t.view.m_ruleGuide.visible=!1,It.default.instance.doGuidePlazaToGame(d.GameModel.instance.getCurGuidePlazaSubID())):t.onBtnRuleGuideStep()})):(d.GameModel.instance.isGuideMultCritModel()?this.view.m_ruleGuide.m_cMultCritGuide.selectedIndex=this._currentGuideIndex:d.GameModel.instance.isGuideBroadMultModel()?this.view.m_ruleGuide.m_cBroadMultGuide.selectedIndex=this._currentGuideIndex:this.view.m_ruleGuide.m_cBothNewMultGuide.selectedIndex=this._currentGuideIndex,this._currentGuideIndex++)},e.prototype.onBtnPassLevelTask=function(){if(it.BfasManager.instance.sendEvt(rt.GamePassLevelTaskPointID.CLICK_ICON,{subID:h.GameCommonModel.instance.getSubid()}),this.view.m_panelPassLevelTask.visible)cc.Tween.stopAllByTarget(this.view.m_panelPassLevelTask.node),this.view.m_cPassLevelPannel.selectedIndex=nt.CShowPassLevelPannel.HIDE;else{var t=Ct.PassLevelTaskModel.instance.getPassLevelDetailInfo();if(t.state===Ct.PassLevelStateEnum.HAD_GET)p.EventManager.instance.emit($.DataEvent.ToastData,"\u5f53\u524d\u573a\u6b21\u7684\u8fc7\u7ea7\u4efb\u52a1\u5df2\u5b8c\u6210, \u60a8\u53ef\u4ee5\u524d\u5f80\u66f4\u9ad8\u573a\u6b21\u9886\u53d6\u8fc7\u7ea7\u5956\u52b1~");else{var e=Ct.PassLevelTaskModel.instance.getCurPassLevelAwards(t.subID,t.level);this.showPassLevelTaskPanel(t,e)}}},e.prototype.onBtnGetPassLevelAward=function(){it.BfasManager.instance.sendEvt(rt.GamePassLevelTaskPointID.CLICK_GET,{subID:h.GameCommonModel.instance.getSubid()});var t=Ct.PassLevelTaskModel.instance.getPassLevelDetailInfo();Ct.PassLevelTaskModel.instance.getPassLevelTaskAward(t.subID,t.level)},e.prototype.onBtnNotCallMult=function(){console.log("onBtnNotCallMult");var t=m.PlayerInfoModel.instance.getSelfSeat();y.GameProxy.instance.sendCallMult(t,d.CallMultNumEnum.NOT_CALL)},e.prototype.onBtnCallMult=function(){console.log("onBtnCallMult");var t=m.PlayerInfoModel.instance.getSelfSeat();d.GameModel.instance.isCanCallMult(t)?y.GameProxy.instance.sendCallMult(t,d.CallMultNumEnum.MULT_CALL):this.view.m_button_layer.m_noMultBubble.visible=!0},e.prototype.onBtnMultTask=function(){var t=this;console.log("onBtnMultTask"),it.BfasManager.instance.sendEvt(rt.GameMultTaskPointID.CLICK_ICON,{subID:h.GameCommonModel.instance.getSubid()}),Et.GameMultTaskModel.instance.isNeedPullConfig()?(L.UIHelp.instance.showLoading(),Et.GameMultTaskModel.instance.init(function(e){L.UIHelp.instance.hideLoading(),e&&t.checkToOpenGameMultTask()})):this.checkToOpenGameMultTask()},e.prototype.checkToOpenGameMultTask=function(){Et.GameMultTaskModel.instance.isCompleteTaskToday()?(l.UIManager.instance.isExist(At.GameMultTaskUI)&&l.UIManager.instance.close(At.GameMultTaskUI),p.EventManager.instance.emit($.DataEvent.ToastData,"\u4eca\u65e5\u5956\u52b1\u5df2\u9886\u5b8c\uff0c\u8bf7\u660e\u65e5\u7ee7\u7eed~")):l.UIManager.instance.open(At.GameMultTaskUI).then(function(t){t.initUI(h.GameCommonModel.instance.getSubid())})},e.prototype.continueGameShowReadyBtn=function(){this.view.m_button_layer.m_buttonType.selectedIndex=d.CButtonLayerTypeEnum.TEMP_READY},e.prototype.onShowResult=function(t){if(!this.isBoxRoom()){if(0===t.bWinner.length)for(var e=0;e<t.nWinLost.length;e++)t.bWinner[e]=t.nWinLost[e]>=0;this._resultData=t,h.GameCommonModel.instance.isMixPassARoom()?this.goMixPassARoomSmallResult():this.goNormalGoldRoomResult()}},e.prototype.goMixPassARoomSmallResult=function(){console.warn("goMixPassARoomSmallResult:",this._resultData),this.showResultAnimation(this._resultData.bWinner),this.showHeadSideWinLost(this._resultData.nIntegralWinLost,this._resultData.bWinner,this._resultData.nResultType)},e.prototype.updateMultNum=function(t){this.view.m_top_left.m_mult.text=Mt.UtilString.getNumFormatString(t)},e.prototype.goNormalGoldRoomResult=function(){var t=this,e=m.PlayerInfoModel.instance.getSelfSeat();ot.GameSharePopModel.instance.updateShareData(this._resultData.nWinLost[e],d.GameModel.instance.getAllMult()),this.playFlyGoldAction(function(){var e=m.PlayerInfoModel.instance.getPlayerByNumid(C.UserInfoModel.instance.userInfo.numID);e&&e.playstate!==club.client.game.PlayState.PLAYSTATES.PLAYSTATE_IN_QUEUE&&e.playstate!==club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_PLAYING&&(t.showHeadSideWinLost(t._resultData.nWinLost,t._resultData.bWinner,t._resultData.nResultType),t.view.m_resultBg.selectedIndex=nt.ResultBgControlTypeEnum.SHOW,t.continueGameShowReadyBtn()),t.showResultAnimation(t._resultData.bWinner,function(){},function(){}),t.popLayerOnWinlose(),h.GameCommonModel.instance.getRoomType()===j.ClubShowFlags.CLUBS_LIST&&t._gameID===et.GameIDInfo.CLASSIC_GD.id&&Bt.YearBeastModel.instance.curBlood>0&&t.showYearBeast()})},e.prototype.onNoticeChangeSeat=function(t){if(t.srcseat1===t.srcseat2){var e=m.PlayerInfoModel.instance.getPlayerByNumid(t.numID1),n=m.PlayerInfoModel.instance.getPlayerByNumid(t.numID2);if(!e||!n)return;t.srcseat1=e.seatid,t.srcseat2=n.seatid}var o=m.PlayerInfoModel.instance.getPlayerByNumid(t.numID1),a=m.PlayerInfoModel.instance.getPlayerByNumid(t.numID2);if(o&&a&&o.seatid===t.srcseat1&&a.seatid===t.srcseat2){m.PlayerInfoModel.instance.changeSeatByNumid(t.numID1,t.srcseat2),m.PlayerInfoModel.instance.changeSeatByNumid(t.numID2,t.srcseat1),d.GameModel.instance.exchangeHandCards(t.srcseat1,t.srcseat2),o=m.PlayerInfoModel.instance.getPlayerByNumid(t.numID1),a=m.PlayerInfoModel.instance.getPlayerByNumid(t.numID2);var i=o.nickname+"\u548c"+a.nickname+"\u6362\u4f4d",r=m.PlayerInfoModel.instance.getLocalSeatByNumid(this._ttzNum1),s=m.PlayerInfoModel.instance.getLocalSeatByNumid(this._ttzNum2);this.resetHead(m.MAX_PLAYER),this.showSmallCard(r.lseat,this._ttzLiangPai.labelCardValue),this.showSmallCard(s.lseat,this._ttzLiangPai.labelCardValue);for(var c=0;c<m.MAX_PLAYER;++c){var l=m.PlayerInfoModel.instance.getPlayerByServiceSeat(c);l&&this.onPlayerGoldChange(l.numid)}p.EventManager.instance.emit($.DataEvent.ToastData,i)}},e.prototype.onBtnFriendInvite=function(){var t=this;et.DataBfConfig.isWebPlatform()||(this.showFriendInviteBtn(!1),console.log("----\x3e onBtnFriendInvite: ",this.isGamePlay()),this.isGamePlay()||l.UIManager.instance.isExist(W.FriendInviteUI)||l.UIManager.instance.open(W.FriendInviteUI,function(){t.showFriendInviteBtn(!t.isGamePlay())}))},e.prototype.showFriendInviteBtn=function(t){et.DataBfConfig.isWebPlatform()||(this.view.m_btnFriendInvite.node.stopAllActions(),t?this.view.m_btnFriendInvite.node.runAction(cc.spawn(cc.moveTo(.1,new cc.Vec2(J.UtilView.isFullScreen()?44:0,this._btn_Friend_Pos.y)),cc.fadeIn(.4))):this.view.m_btnFriendInvite.node.runAction(cc.spawn(cc.moveTo(.1,new cc.Vec2(this._btn_Friend_Pos.x,this._btn_Friend_Pos.y)),cc.fadeOut(.4))))},e.prototype.onBtnShare=function(){var t=h.GameCommonModel.instance.isBoxCreator()?1:2;it.BfasManager.instance.evt(rt.BoxRoomPointID.CLICK_BTN_INVITER.eventid,{type:t},!0,rt.BoxRoomPointID.CLICK_BTN_INVITER.eventName);var e=u.FriendModel.instance.getShareTitleArgs(this._gameID,this._logicdata),n=e.gameType,o=e.gameTotalNum,a=e.baseScore,i=e.roomNumber;Y.ShareManager.instance.share(Y.ShareType.boxShare,{extData:"roomNumber="+i,titleArgs:[n,o,a,i]})},e.prototype.initDirectFriendSpine=function(){et.DataBfConfig.isWebPlatform()||(this.view.m_btnFriendInvite.node.removeAllChildren(),Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_GAME_ARROW,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"jiantou",!0)},this.view.m_btnFriendInvite.node))},e.prototype.flyGoldAction=function(t,e,n,o,a,i){for(var r=.05*t,s=.2*t,c=.2*t,l=.3*t,u=this.view.m_point_bg,d=1;d<=e;++d){var p=fgui.UIPackage.createObject("GameSceneUI","gold");p.setPosition(n.x,n.y),u.addChild(p);var _=h.GameCommonModel.instance.getRandomNum(-50,50),f=Math.sqrt(2500-_*_),m=h.GameCommonModel.instance.getRandomNum(-f,f),g=h.GameCommonModel.instance.getRandomNum(0,1e6*r)/1e6,y=h.GameCommonModel.instance.getRandomNum(0,1e6*c)/1e6,C=cc.moveTo(s+g,new cc.Vec2(o.x+_,o.y+m)),M=cc.moveTo(s+g,new cc.Vec2(a.x,a.y)),v=cc.delayTime(y),E=cc.delayTime(l),A=cc.callFunc(function(t){t.stopAllActions(),t.removeFromParent()}),P=cc.sequence(v,C,E,M,A);p.node.runAction(P)}I.CoroutineManager.instance.once(t,function(){i&&i()},this)},e.prototype.playFlyGoldAction=function(t){for(var e=!1,n=0;n<m.PlayerInfoModel.instance.getNowGamePlayer();++n)if(!this._resultData.bWinner[n]){var o=m.PlayerInfoModel.instance.serverToLocal(n),a=this.view.m_point_bg["m_fly_gold_start_"+o],i=this.view.m_point_bg["m_fly_gold_start_"+(o+1)%m.MAX_PLAYER];this._gameID===et.GameIDInfo.ERREN_GD.id&&(i=this.view.m_point_bg["m_fly_gold_start_"+(o+2)%m.MAX_PLAYER]);var r=this.view.m_point_bg["m_fly_gold_middle_"+o];if(a&&i&&r){var s=a.node.getPosition();s.y=-s.y;var c=i.node.getPosition(),l=r.node.getPosition();e?this.flyGoldAction(1.5,50,s,l,c):(e=!0,this.flyGoldAction(1.5,50,s,l,c,t))}}e||t&&t()},e.prototype.onDestroy=function(){h.GameCommonModel.instance.initGameCommonData(),I.CoroutineManager.instance.stopAllCo(this),t.prototype.onDestroy.call(this)},e.prototype.showHGAnimation=function(t,e,n){if(t!==m.MAX_PLAYER){if(t!==m.LocalSeatEnum.SELF){var o=this.view.m_point_bg["m_HG_"+t];if(e){if(o.visible)return;var a=n===d.ContributeTypeEnum.GIVE?"jgz":"hgz";o.visible=!0,Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_GAME_HG,function(t){var e=t.getComponent(sp.Skeleton);t.setPosition(cc.v2(0,0)),e.setAnimation(0,a,!0)},o.node)}else o.visible=!1,o.node.removeAllChildren()}}else for(var i=0;i<m.MAX_PLAYER;++i)this.showHGAnimation(i,e,n)},e.prototype.preLoadOtherPackage=function(){this._isLoadPackage||(this._isLoadPackage=!0,Pt.UtilCC.preloadPrefab(vt.DataSpineAniPath.ANI_RESULT),d.GameModel.instance.isTuoPaiModel()&&Pt.UtilCC.preloadPrefab(vt.DataSpineAniPath.ANI_GAME_TP_RESULT),this.isGoldRoom()&&Pt.UtilCC.preloadPrefab(vt.DataSpineAniPath.ANI_GAMEWINMORE_BG),Pt.UtilCC.preloadPrefab(vt.DataSpineAniPath.ANI_GAME_TS),Pt.UtilCC.preloadPrefab(vt.DataSpineAniPath.ANI_GAME_JP),Pt.UtilCC.preloadPrefab(vt.DataSpineAniPath.ANI_GAME_TM))},e.prototype.updateBattery=function(){var t=this;this.view.m_timePanel&&Ut.PlatformManager.instance.platform.getBatteryInfo(function(e){-1==e&&(e=100),t.view.m_timePanel.m_powerLevel.value=e})},e.prototype.updateTime=function(){if(this.view.m_timePanel){var t=yt.UtilTime.getCurrTime("hh:mm");this.view.m_timePanel.m_time.text=t}},e.prototype.update=function(t){this._clockUpdateTime+=t,this._clockUpdateTime>1&&(this._clockUpdateTime=0,this.updateTime()),this._batteryUpdateTime+=t,this._batteryUpdateTime>60&&(this._batteryUpdateTime=0,this.updateBattery())},e.prototype.popLayerOnWinlose=function(){console.warn("tteam.pop.normal"),h.GameCommonModel.instance.isGoldRoom()&&!h.GameCommonModel.instance.isTeamModel()&&!this._resultData.bWinner[m.PlayerInfoModel.instance.getSelfSeat()]&&gt.DataLocalStorage.isCanPopAct(gt.LocalStorageKey.MATCH_GUIDE_DAY,gt.LocalStorageKey.MATCH_GUIDE_POP_COUNT,kt.DataClubClientConfig.getGuideMatchCount())?l.UIManager.instance.open(xt.MatchGuideUI).then(function(t){t.setPopFunc(function(){ot.GameSharePopModel.instance.showPopUI()})}):ot.GameSharePopModel.instance.showPopUI()},e.prototype.onUpdateProp=function(){this.refreshYearBeastProp()},e.prototype.onYearBeastInfoUpdate=function(){this.refreshYearBeast()},e.prototype.showYearBeast=function(){var t=C.UserInfoModel.instance.getPropCount(G.PropIDEnum.NEWYEAR_BIAN_PAO)+C.UserInfoModel.instance.getPropCount(G.PropIDEnum.NEWYEAR_MISSILE);this.view.m_button_layer.m_yearBeast.selectedIndex=d.YEAR_BEAST_SHOW.SHOW,this.view.m_button_layer.m_btn_yearBeast.m_hpProgress.max=Bt.YearBeastModel.instance.maxBlood,this.view.m_button_layer.m_btn_yearBeast.m_hpProgress.value=Bt.YearBeastModel.instance.getProgressBlood(),this.view.m_button_layer.m_btn_yearBeast.m_hpProgress.m_hp.text=Bt.YearBeastModel.instance.curBlood+"/"+Bt.YearBeastModel.instance.maxBlood,this.view.m_button_layer.m_btn_yearBeast.m_txtCount.text=t>0?t+"":"",this.view.m_button_layer.m_btn_yearBeast.m_imgCountBg.visible=t>0,this.view.m_button_layer.m_btn_yearBeast.m_aniNode.node.removeAllChildren(),this.view.m_button_layer.m_btn_yearBeast.m_aniNode.setScale(.7,.7),Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_YEAR_BEAST,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"daiji"+Bt.YearBeastModel.instance.getYearBeastAniSuffix(),!0)},this.view.m_button_layer.m_btn_yearBeast.m_aniNode.node)},e.prototype.refreshYearBeast=function(){this.view.m_button_layer.m_yearBeast.selectedIndex=Bt.YearBeastModel.instance.curBlood>0?d.YEAR_BEAST_SHOW.SHOW:d.YEAR_BEAST_SHOW.HIDE,this.view.m_button_layer.m_yearBeast.selectedIndex==d.YEAR_BEAST_SHOW.SHOW&&(this.view.m_button_layer.m_btn_yearBeast.m_hpProgress.max=Bt.YearBeastModel.instance.maxBlood,this.view.m_button_layer.m_btn_yearBeast.m_hpProgress.value=Bt.YearBeastModel.instance.getProgressBlood(),this.view.m_button_layer.m_btn_yearBeast.m_hpProgress.m_hp.text=Bt.YearBeastModel.instance.curBlood+"/"+Bt.YearBeastModel.instance.maxBlood,this.view.m_button_layer.m_btn_yearBeast.m_aniNode.node.removeAllChildren(),this.view.m_button_layer.m_btn_yearBeast.m_aniNode.setScale(.7,.7),Pt.UtilCC.instantiatePrefab(vt.DataSpineAniPath.ANI_YEAR_BEAST,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"daiji"+Bt.YearBeastModel.instance.getYearBeastAniSuffix(),!0)},this.view.m_button_layer.m_btn_yearBeast.m_aniNode.node))},e.prototype.refreshYearBeastProp=function(){if(this.view.m_button_layer.m_yearBeast.selectedIndex==d.YEAR_BEAST_SHOW.SHOW){var t=C.UserInfoModel.instance.getPropCount(G.PropIDEnum.NEWYEAR_BIAN_PAO)+C.UserInfoModel.instance.getPropCount(G.PropIDEnum.NEWYEAR_MISSILE);this.view.m_button_layer.m_btn_yearBeast.m_txtCount.text=t>0?t+"":"",this.view.m_button_layer.m_btn_yearBeast.m_imgCountBg.visible=t>0}},e.prototype.onBtnYearBeast=function(){Bt.YearBeastModel.instance.openYearBeastUI()},e.prototype.onMatchStartHint=function(t){h.GameCommonModel.instance.isMatchRoomModel()||(it.BfasManager.instance.sendEvt(rt.MatchPoint.GOLD_MATCH_HINT_SHOW),l.UIManager.instance.open(Ft.TopHintUI).then(function(e){e.closeAction=function(){it.BfasManager.instance.sendEvt(rt.MatchPoint.GOLD_MATCH_HINT_CLOSE)};var n=Math.floor(t.time/60),o=""+t.info.sname+n+":00\u540e\u5f00\u8d5b";e.init({content:o,canClick:!1,showTime:5})}))},e.prototype.onMatchExitGame=function(t){this.backToMatchRoundUI(t)},e.prototype.backToMatchRoundUI=function(t){h.GameCommonModel.instance.resetEnterMatchInfo(),l.UIManager.instance.isExist(S.DialogUI)&&l.UIManager.instance.close(S.DialogUI),this.backToLobby(t||tt.HallUITab.MATCH_ROUND)},i([jsClass],e)}(c.FadeUI);n.GameSceneUI=jt,cc._RF.pop()},{"../../../Framework/Manager/AudioManager":"AudioManager","../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/Root/ModelRoot":"ModelRoot","../../../Framework/UI/BaseUI":"BaseUI","../../../Framework/UI/FadeUI":"FadeUI","../../Activity/YearBeast/YearBeastModel":"YearBeastModel","../../Base/Data/DataAdChannel":"DataAdChannel","../../Base/Data/DataBfConfig":"DataBfConfig","../../Base/Data/DataClubClientConfig":"DataClubClientConfig","../../Base/Data/DataConstant":"DataConstant","../../Base/Data/DataEvent":"DataEvent","../../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../../Base/Data/DataProps":"DataProps","../../Base/Data/DataSound":"DataSound","../../Base/Data/DataSpineAni":"DataSpineAni","../../Base/Data/DatazOrder":"DatazOrder","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../Base/Module/Platform/Const/PlatformEventType":"PlatformEventType","../../Base/Module/Platform/PlatformManager":"PlatformManager","../../Base/Module/Room/RoomModel":"RoomModel","../../Base/Module/Share/ShareManager":"ShareManager","../../Base/Utils/UtilCC":"UtilCC","../../Base/Utils/UtilString":"UtilString","../../Base/Utils/UtilTime":"UtilTime","../../Base/Utils/UtilView":"UtilView","../../Base/View/Common/DialogUI":"DialogUI","../../Base/View/UIHelp":"UIHelp","../../CreateRoomUI/BoxRecordUI":"BoxRecordUI","../../CreateRoomUI/CreateRoomModel/CreateRoomConfigModel":"CreateRoomConfigModel","../../CreateRoomUI/CreateRoomModel/CreateRoomManagerModel":"CreateRoomManagerModel","../../FriendInvite/FriendInviteUI":"FriendInviteUI","../../FriendInvite/FriendModel":"FriendModel","../../FriendTeam/FriendTeamModel":"FriendTeamModel","../../Hall/HallModel":"HallModel","../../Hall/HallUI":"HallUI","../../Match/MatchConstant":"MatchConstant","../../Match/MatchGuideUI/MatchGuideUI":"MatchGuideUI","../../Match/MatchHintUI/TopHintUI":"TopHintUI","../../Rule/RuleUI":"RuleUI","../../Setting/GuanDanGameSettingUI":"GuanDanGameSettingUI","../../Setting/SettingModel":"SettingModel","../../UserInfo/GuanDanGameUserInfoUI":"GuanDanGameUserInfoUI","../../UserInfo/UserInfoModel":"UserInfoModel","../../UserInfo/UserInfoUI":"UserInfoUI","../Common/BigCardShare/BigCardShare":"BigCardShare","../Common/BuyNoteCardUI/BuyNoteCardModel":"BuyNoteCardModel","../Common/BuyNoteCardUI/BuyNoteCardUI":"BuyNoteCardUI","../Common/GameChatUI/GameChatModel":"GameChatModel","../Common/GameChatUI/GameChatUI":"GameChatUI","../Common/GameCommonModel":"GameCommonModel","../Common/GameControlEnum":"GameControlEnum","../Common/GameGuideUI/GameGuideButtonUI":"GameGuideButtonUI","../Common/GameGuideUI/GameGuideModel":"GameGuideModel","../Common/GameGuideUI/GameGuideUI":"GameGuideUI","../Common/GameJSUI/GameJSUI":"GameJSUI","../Common/GameMatching/GameMatchingForNormalUI":"GameMatchingForNormalUI","../Common/GameMultTaskUI/GameMultTaskModel":"GameMultTaskModel","../Common/GameMultTaskUI/GameMultTaskUI":"GameMultTaskUI","../Common/GameResultUI/GameResultUI":"GameResultUI","../Common/GameSharePopModel":"GameSharePopModel","../Common/GameShopUI/GameShopUI":"GameShopUI","../Common/GameWinMoreUI/GameWinMoreModel":"GameWinMoreModel","../Common/GameWinMoreUI/GameWinMoreUI":"GameWinMoreUI","../Common/PassLevelTaskUI/PassLevelTaskModel":"PassLevelTaskModel","../Common/PlayerInfoModel":"PlayerInfoModel","../Common/RealTimeVoice/RealTimeVoiceModel":"RealTimeVoiceModel","../CommonLogic/CardLogic/DefaultPokerCardsConst":"DefaultPokerCardsConst","../CommonLogic/CardRule/CardFunc":"CardFunc","../GameGuide/GuideDescUI":"GuideDescUI","../GameGuide/GuideUI":"GuideUI","./GameBoxDelayPannelUI/GameBoxDelayPannleUI":"GameBoxDelayPannleUI","./GameCardModel/CardCommonFunc":"CardCommonFunc","./GameCardModel/GameCardUISelfHandModel":"GameCardUISelfHandModel","./GameCardModel/ManagerOutModel":"ManagerOutModel","./GameCardUI/CardUIOut":"CardUIOut","./GameContinueTable/GameContinueTableUI":"GameContinueTableUI","./GameEvent":"GameEvent","./GameSceneUI/GameSceneUIBinder":"GameSceneUIBinder","./GameTest/GameTestUI":"GameTestUI","./GameTrustUI":"GameTrustUI","./Model/GameModel":"GameModel","./Proxy/GameProxy":"GameProxy","./Proxy/GameTableProxy":"GameTableProxy"}],GameSharePopModel:[function(t,e,n){"use strict";cc._RF.push(e,"abc3bUE2CZI7KiBXMM/Ai30","GameSharePopModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameSharePopModel=n.PopTypeEnum=void 0;var r,s,c=t("../../../Framework/Manager/EventManager"),l=t("../../../Framework/Manager/UIManager"),u=t("../../../Framework/Model/BaseModel"),d=t("../../../Framework/Root/ModelRoot"),p=t("../../Base/Data/DataBfConfig"),h=t("../../Base/Data/DataEvent"),_=t("../../Base/Data/DataScript"),f=t("./BigCardShare/BigCardShare"),m=t("../../Base/Module/Network/protocol/AwardProtocol"),g=t("../../Base/Module/Network/SocketUtils"),y=t("./GameWinMoreUI/GameWinMoreModel"),I=t("../../UserInfo/UserInfoModel");(function(t){t[t.FALSE=0]="FALSE",t[t.WAIT=1]="WAIT",t[t.TRUE=2]="TRUE"})(r||(r={})),function(t){t[t.WINCNT_5=2]="WINCNT_5",t[t.WINCNT_10=3]="WINCNT_10",t[t.MAX_MULT=5]="MAX_MULT"}(s=n.PopTypeEnum||(n.PopTypeEnum={}));var C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isGetCfgOk=!1,e._shareCfg={},e._gameData={},e._popItems=[],e}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return d.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){c.EventManager.instance.on(h.DataEvent.LoginSuccess,this,this.onLoginSuccess)},e.prototype.onLoginSuccess=function(){this._isGetCfgOk||(this.reqActivityShareCfg(),this.initData(),this.initPopItems())},e.prototype.reqActivityShareCfg=function(){var t=this,e=new m.AwardProtocol.ReqAwardInfo({type:_.DataScript.bigCardShare.id,gameid:p.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func="+_.DataScript.bigCardShare.func.getCfg+";")});g.SocketUtils.instance.request(e,function(e){if(0===e.flag){var n=bf33.Utils.bytesToString(e.msg).split("|")||[];if(0===Number(n[0])){var o=JSON.parse(n[1]);t._shareCfg.isOpen=o.isOpen,t._shareCfg.minMult=o.multPlaz,t._shareCfg.winCnt1=o.winStreak1,t._shareCfg.winCnt2=o.winStreak2,t._shareCfg.maxTotalWinGold=o.maxGold,t._shareCfg.maxTotalMult=o.multiple,console.log("reqActivityCfg.bigcard:",t._shareCfg),t._isGetCfgOk=!0}}})},e.prototype.initData=function(){this._gameData.winCnt=this.getContinueWinCount()},e.prototype.initPopItems=function(){this._popItems=[],this.addPopItem(s.WINCNT_5,"\u8fde\u80dc5",this.checkWinCnt5),this.addPopItem(s.WINCNT_10,"\u8fde\u80dc10",this.checkWinCnt10),this.addPopItem(s.MAX_MULT,"\u500d\u7387\u8bb0\u5f55",this.checkMaxMult)},e.prototype.addPopItem=function(t,e,n){var o={};o.popType=t,o.name=e,o.triggerFunc=n,o.remainTriggerCnt=this.getRemainTriggerCount(t),this._popItems.push(o)},e.prototype.setContinueWinCount=function(t){var e="WIN_CNT_KEY_"+I.UserInfoModel.instance.userInfo.numID;localStorage.setItem(e,t.toString())},e.prototype.getContinueWinCount=function(){var t="WIN_CNT_KEY_"+I.UserInfoModel.instance.userInfo.numID;return+localStorage.getItem(t)},e.prototype.setRemainTriggerCount=function(t,e){localStorage.setItem(this.makeUniqueRemainKey("REMAIN_TRIGGER_KEY_",t),e.toString())},e.prototype.getRemainTriggerCount=function(t){return+localStorage.getItem(this.makeUniqueRemainKey("REMAIN_TRIGGER_KEY_",t))},e.prototype.makeUniqueRemainKey=function(t,e){return t+I.UserInfoModel.instance.userInfo.numID+"_"+e.toString()},e.prototype.getPopItemReaminTriggerCnt=function(t){for(var e=0;e<this._popItems.length;++e)if(this._popItems[e].popType===t)return this._popItems[e].remainTriggerCnt||0},e.prototype.checkWinCnt5=function(){return n.instance._gameData.winCnt===n.instance._shareCfg.winCnt1&&n.instance.getPopItemReaminTriggerCnt(s.WINCNT_5)<=0?r.TRUE:r.FALSE},e.prototype.checkWinCnt10=function(){return n.instance._gameData.winCnt===n.instance._shareCfg.winCnt2&&n.instance.getPopItemReaminTriggerCnt(s.WINCNT_10)<=0?r.TRUE:r.FALSE},e.prototype.checkMaxMult=function(){return n.instance._gameData.winGold<=0?r.FALSE:n.instance._gameData.mult<n.instance._shareCfg.maxTotalMult?r.FALSE:n.instance.getPopItemReaminTriggerCnt(s.MAX_MULT)>0?r.FALSE:(n.instance.reqMaxMult(n.instance._gameData.mult),r.WAIT)},e.prototype.showBigCardShareUI=function(t){l.UIManager.instance.open(f.BigCardShare,t),this.updatePopTypeRemainKey(t)},e.prototype.updatePopTypeRemainKey=function(t){for(var e=0;e<this._popItems.length;++e)this._popItems[e].popType===t&&(this._popItems[e].remainTriggerCnt=4);this.setRemainTriggerCount(t,4)},e.prototype.resetClosePackageFunction=function(){this._iteratorFunc=this.getClosePackageFunction()},e.prototype.getClosePackageFunction=function(){var t=this,e=0,n=function(){if(e>=t._popItems.length)y.GameWinMoreModel.instance.showGameWinMoreUI();else{var o=e,a=t._popItems[e++].triggerFunc();a===r.TRUE?t.showBigCardShareUI(t._popItems[o].popType):a===r.FALSE&&n()}};return n},e.prototype.reqMaxMult=function(t){var e=this,n=new m.AwardProtocol.ReqAwardInfo({type:_.DataScript.bigCardShare.id,gameid:p.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func="+_.DataScript.bigCardShare.func.getMultiple+";mult="+t)});g.SocketUtils.instance.request(n,function(t){if(0===t.flag){var n=bf33.Utils.bytesToString(t.msg).split("|")||[],o=0===Number(n[0]);if(n[1]&&Number(n[1])>=512&&(e._shareCfg.maxTotalMult=Number(n[1])),o)return void e.showBigCardShareUI(s.MAX_MULT)}e._iteratorFunc()})},e.prototype.showPopUI=function(){this._shareCfg.isOpen&&this.checkPop()},e.prototype.checkPop=function(){this.resetClosePackageFunction(),this._iteratorFunc()},e.prototype.updateShareData=function(t,e){this._shareCfg.isOpen&&(this.updateGold(t),this.updateMult(e))},e.prototype.updateGold=function(t){this._gameData.winGold=t,t>0?this._gameData.winCnt++:t<0&&(this._gameData.winCnt=0),this.setContinueWinCount(this._gameData.winCnt);for(var e=0;e<this._popItems.length;++e){var n=--this._popItems[e].remainTriggerCnt;this.setRemainTriggerCount(this._popItems[e].popType,n)}},e.prototype.updateMult=function(t){this._gameData.mult=t},e.prototype.getNowMult=function(){return this._gameData.mult},n=i([jsClass],e)}(u.BaseModel);n.GameSharePopModel=C,cc.systemEvent.once("GameRoot.inited",function(){d.ModelRoot.instance.add(C)}),cc._RF.pop()},{"../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/Model/BaseModel":"BaseModel","../../../Framework/Root/ModelRoot":"ModelRoot","../../Base/Data/DataBfConfig":"DataBfConfig","../../Base/Data/DataEvent":"DataEvent","../../Base/Data/DataScript":"DataScript","../../Base/Module/Network/SocketUtils":"SocketUtils","../../Base/Module/Network/protocol/AwardProtocol":"AwardProtocol","../../UserInfo/UserInfoModel":"UserInfoModel","./BigCardShare/BigCardShare":"BigCardShare","./GameWinMoreUI/GameWinMoreModel":"GameWinMoreModel"}],GameShopUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"278f4KbnwJJUq2FiAWVWRG/","GameShopUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./GameShopUI_MainPanel"),a=t("./GameShopUI_windows"),i=t("./GameShopUI_BtnShopItem"),r=t("./GameShopUI_Left"),s=t("./GameShopUI_TabBtn"),c=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default)},t}();n.default=c,cc._RF.pop()},{"./GameShopUI_BtnShopItem":"GameShopUI_BtnShopItem","./GameShopUI_Left":"GameShopUI_Left","./GameShopUI_MainPanel":"GameShopUI_MainPanel","./GameShopUI_TabBtn":"GameShopUI_TabBtn","./GameShopUI_windows":"GameShopUI_windows"}],GameShopUI_BtnShopItem:[function(t,e,n){"use strict";cc._RF.push(e,"664faShwyRDQqXoAO4Gbo9+","GameShopUI_BtnShopItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameShopUI","BtnShopItem")},e.prototype.onConstruct=function(){this.m_LodeIcon=this.getChildAt(1),this.m_txtCost=this.getChildAt(2),this.m_txtNum=this.getChildAt(3)},e.URL="ui://ek6yegwacsxd9",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],GameShopUI_Left:[function(t,e,n){"use strict";cc._RF.push(e,"1e1a9IzcUdBxaNBcI7x5uJT","GameShopUI_Left");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameShopUI","Left")},e.prototype.onConstruct=function(){this.m_cSelect=this.getControllerAt(0),this.m_cIOS=this.getControllerAt(1),this.m_TabeGold=this.getChildAt(3),this.m_TableDiamond=this.getChildAt(4)},e.URL="ui://ek6yegwacsxda",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameShopUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"a1e66oCPJFCfKxqHoWHUNgG","GameShopUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameShopUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://ek6yegwacsxd0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameShopUI_TabBtn:[function(t,e,n){"use strict";cc._RF.push(e,"94799FT4wJJwaoDnMYA1v9P","GameShopUI_TabBtn");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameShopUI","TabBtn")},e.prototype.onConstruct=function(){this.m_cFirst=this.getControllerAt(1),this.m_CSelect=this.getControllerAt(2)},e.URL="ui://ek6yegwacsxdb",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],GameShopUI_windows:[function(t,e,n){"use strict";cc._RF.push(e,"e88e7S/ghlEg5FehNVn7jlI","GameShopUI_windows");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameShopUI","windows")},e.prototype.onConstruct=function(){this.m_btn_close=this.getChildAt(2),this.m_Left=this.getChildAt(3),this.m_List=this.getChildAt(4)},e.URL="ui://ek6yegwacsxd1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameShopUI:[function(t,e,n){"use strict";cc._RF.push(e,"12c5a96kIpAL7I4So44H3B3","GameShopUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameShopUI=void 0;var r,s,c=t("../../../../Framework/Manager/EventManager"),l=t("../../../../Framework/Manager/UIManager"),u=t("../../../../Framework/UI/FadeUI"),d=t("../../../Award/AwardUI"),p=t("../../../Base/Data/DataEvent"),h=t("../../../Base/Data/DataProps"),_=t("../../../Base/View/Common/DialogUI"),f=t("../../../Base/Module/Platform/PlatformManager"),m=t("../../../UserInfo/UserInfoModel"),g=t("./../../../Shop/ShopConfig"),y=t("../../../Shop/ShopModel"),I=t("./../../Common/GameCommonModel"),C=t("../../../Base/View/UIHelp"),M=t("../../../Base/Data/DatazOrder");(function(t){t[t.ANDROID_CHANNEL_TYPE=0]="ANDROID_CHANNEL_TYPE",t[t.IOS_CHANNEL_TYPE=1]="IOS_CHANNEL_TYPE"})(r||(r={})),function(t){t[t.GOLD_TYPE=0]="GOLD_TYPE",t[t.DIAMOND_TYPE=1]="DIAMOND_TYPE"}(s||(s={}));var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sortingOrder",{get:function(){return M.DataZOrder.GameShopUI},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return y.ShopModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.init(g.ShopPageTypeEnum.GOLD),this.initListener(),this.updateItems()},e.prototype.initListener=function(){this.view.m_Window.m_List.on(fgui.Event.CLICK_ITEM,this.onItemClick,this),this.view.m_Window.m_Left.m_cSelect.onChanged(this.updateItems,this),this.view.m_Window.m_btn_close.onClick(this.onBtnClose,this)},e.prototype.onBtnClose=function(){this.onExitClick()},e.prototype.init=function(t){this.model.isHidePay()?(this.view.m_Window.m_Left.m_cIOS.selectedIndex=r.IOS_CHANNEL_TYPE,t=g.ShopPageTypeEnum.GOLD):this.view.m_Window.m_Left.m_cIOS.selectedIndex=r.ANDROID_CHANNEL_TYPE,this.view.m_Window.m_Left.m_cSelect.selectedIndex=t,this.updateItems()},e.prototype.updateItems=function(){this.view.m_Window.m_Left.m_cSelect.selectedIndex===s.GOLD_TYPE?this.showCoins():this.showDiamonds()},e.prototype.onItemClick=function(t){var e=this,n=t.data;n.paytype===g.PayTypeEnum.VIRTUAL?m.UserInfoModel.instance.userInfo.diamond<n.price?c.EventManager.instance.emit(p.DataEvent.ToastData,"\u5151\u6362\u5931\u8d25\uff0c\u60a8\u643a\u5e26\u7684\u94bb\u77f3\u4e0d\u8db3"):l.UIManager.instance.open(_.DialogUI).then(function(t){t.initConfirmCancelClose({content:"\u6e29\u99a8\u63d0\u793a\uff1a\n\u662f\u5426\u9700\u8981\u5151\u6362"+n.name+"?"}),t.confirmAction=function(){e.model.buyGold(n.productid,I.GameCommonModel.instance.getAppid(),function(t){if(t){var e=[{awardType:h.PropTypeEnum.GOLD,count:n.count,resName:n.icon}];l.UIManager.instance.open(d.AwardUI).then(function(t){t.init(e)})}})}}):f.PlatformManager.instance.platform.canKejin?(console.warn(">----\x3ewechat buy"),cc.sys.os===cc.sys.OS_IOS&&cc.sys.platform===cc.sys.WECHAT_GAME?this.model.payWithCustmerService(n,"\u6211\u8981\u5145\u503c"+n.count+"\u94bb\u77f3"):this.model.payForOrder(n,function(t){if(t){var e=[{awardType:h.PropTypeEnum.DIAMOND,count:n.count,resName:n.icon}];l.UIManager.instance.open(d.AwardUI).then(function(t){t.init(e)});var o=m.UserInfoModel.instance.userInfo.diamond+n.count;m.UserInfoModel.instance.setUserInfo({diamond:o})}})):c.EventManager.instance.emit(p.DataEvent.ToastData,"\u5f53\u524d\u5e73\u53f0\u4e0d\u652f\u6301\u8d2d\u4e70\uff01")},e.prototype.showCoins=function(){var t=g.ShopConfig.gold;cc.sys.os===cc.sys.OS_IOS&&(t=g.ShopConfig.goldIOS),this.showItems(t)},e.prototype.showDiamonds=function(){var t=g.ShopConfig.diamond;this.showItems(t)},e.prototype.showItems=function(t){var e=this.view.m_Window.m_List;e.visible=!0,e.itemRenderer=function(e,n){var o=t[e];o&&(n.m_LodeIcon.url=C.UIHelp.getPropIcon(h.PropTypeEnum.DIAMOND,o.icon),n.m_txtNum.text=o.name,n.m_txtCost.text=(0===o.paytype?"\uffe5":"\u78b3")+o.price,n.data=o)},e.setVirtual(),e.numItems=t.length,e.refreshVirtualList()},i([jsClass],e)}(u.FadeUI);n.GameShopUI=v,cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Manager/UIManager":"UIManager","../../../../Framework/UI/FadeUI":"FadeUI","../../../Award/AwardUI":"AwardUI","../../../Base/Data/DataEvent":"DataEvent","../../../Base/Data/DataProps":"DataProps","../../../Base/Data/DatazOrder":"DatazOrder","../../../Base/Module/Platform/PlatformManager":"PlatformManager","../../../Base/View/Common/DialogUI":"DialogUI","../../../Base/View/UIHelp":"UIHelp","../../../Shop/ShopModel":"ShopModel","../../../UserInfo/UserInfoModel":"UserInfoModel","./../../../Shop/ShopConfig":"ShopConfig","./../../Common/GameCommonModel":"GameCommonModel"}],GameTableProxy:[function(t,e,n){"use strict";cc._RF.push(e,"9e576RxDBVO9ZqhfYMPSd2G","GameTableProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameTableProxy=void 0;var r=t("../../../../Framework/Proxy/BaseProxy"),s=t("../../../../Framework/Root/ProxyRoot"),c=t("../../../UserInfo/UserInfoModel"),l=t("../../../../Framework/Manager/EventManager"),u=t("../../../Base/Module/Network/SocketUtils"),d=t("./Protocol/BaseProtocol"),p=t("../../GuanDan/GameEvent"),h=t("../../../Base/Utils/UtilTool"),_=t("../../../Base/Data/DataEvent"),f=t("../../../Match/MatchConstant"),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return s.ProxyRoot.instance.get(n)},enumerable:!1,configurable:!0}),e.prototype.startListener=function(){this.initListener()},e.prototype.stopListener=function(){u.SocketUtils.instance.unregisterGameByCaller(this)},e.prototype.initListener=function(){u.SocketUtils.instance.registerGame(d.BaseProtocol.xyid.BXY_PLAYER_ENTER,this,this.onPlayerEnter),u.SocketUtils.instance.registerGame(d.BaseProtocol.xyid.BXY_PLAYER_LEAVE,this,this.onPlayerLeave),u.SocketUtils.instance.registerGame(d.BaseProtocol.xyid.BXY_PLAYER_START,this,this.onPlayerStart),u.SocketUtils.instance.registerGame(d.BaseProtocol.xyid.BXY_PLAYER_TIMER,this,this.onPlayerTimer),u.SocketUtils.instance.registerGame(d.BaseProtocol.xyid.BXY_GAME_START,this,this.onGameStart),u.SocketUtils.instance.registerGame(d.BaseProtocol.xyid.BXY_GAME_END,this,this.onGameEnd),u.SocketUtils.instance.registerGame(d.BaseProtocol.xyid.BXY_MESSAGEBOX,this,this.onTipMessage),u.SocketUtils.instance.registerGame(d.BaseProtocol.xyid.BXY_SHOWBTN,this,this.onShowBtn),u.SocketUtils.instance.registerGame(d.BaseProtocol.xyid.BXY_USE_PROP,this,this.onUseProp),u.SocketUtils.instance.registerGame(d.BaseProtocol.xyid.BXY_PLAYER_LEAVE_EX,this,this.onPlayerLeaveEx)},e.prototype.onPlayerEnter=function(t){console.log("onPlayerEnter"),l.EventManager.instance.emit(p.GameEvent.PLAYER_ENTER,{numid:t.numID})},e.prototype.onPlayerLeave=function(t){console.log("onPlayerLeave"),l.EventManager.instance.emit(p.GameEvent.PLAYER_LEAVE,t)},e.prototype.onPlayerStart=function(t){console.log("onPlayerStart"),l.EventManager.instance.emit(p.GameEvent.PLAYER_START,t)},e.prototype.onPlayerTimer=function(t){console.log("onPlayerTimer:",t),l.EventManager.instance.emit(p.GameEvent.WAIT_CLOCK,t)},e.prototype.onGameStart=function(){console.log("onGameStart"),l.EventManager.instance.emit(p.GameEvent.GAME_START)},e.prototype.onGameEnd=function(){console.log("onGameEnd")},e.prototype.onTipMessage=function(t){if(console.log("onTipMessage:",t.flag),t&&t.msg)if(2===t.flag){var e=h.UtilTool.easyUTF8(new Uint8Array(t.msg));e.includes("\u8d85\u65f6")?l.EventManager.instance.emit(f.MatchDataEvent.MatchDissmiss,e):l.EventManager.instance.emit(f.MatchDataEvent.MatchTrust,e)}else 3===t.flag?l.EventManager.instance.emit(f.MatchDataEvent.MatchGameLeftTime,h.UtilTool.easyUTF8(new Uint8Array(t.msg))):l.EventManager.instance.emit(_.DataEvent.ToastData,h.UtilTool.easyUTF8(new Uint8Array(t.msg)))},e.prototype.onShowBtn=function(){console.log("onShowBtn")},e.prototype.sendProp=function(t){var e=new d.BaseProtocol.msgUseProp;e.propID=t.propID,e.fromAreaID=t.fromAreaID,e.fromNumID=t.fromNumID,e.toAreaID=t.toAreaID,e.toNumID=t.toNumID,e.nErrorCode=t.errorCode,u.SocketUtils.instance.notify(e)},e.prototype.onUseProp=function(t){0==t.nErrorCode?l.EventManager.instance.emit(p.GameEvent.SEND_PROP,{fromId:t.fromNumID,toId:t.toNumID,propId:t.propID}):l.EventManager.instance.emit(_.DataEvent.ToastData,"\u91d1\u5e01\u4e0d\u6ee1\u8db3\u8d2d\u4e70\u6761\u4ef6")},e.prototype.onPlayerLeaveEx=function(){console.log("onPlayerLeaveEx")},e.prototype.sendPlayerStart=function(){var t=new d.BaseProtocol.msgPlayerStart;t.numID=c.UserInfoModel.instance.userInfo.numID,u.SocketUtils.instance.notify(t)},n=i([jsClass],e)}(r.BaseProxy);n.GameTableProxy=m,cc.systemEvent.once("GameRoot.inited",function(){s.ProxyRoot.instance.add(m)}),cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Proxy/BaseProxy":"BaseProxy","../../../../Framework/Root/ProxyRoot":"ProxyRoot","../../../Base/Data/DataEvent":"DataEvent","../../../Base/Module/Network/SocketUtils":"SocketUtils","../../../Base/Utils/UtilTool":"UtilTool","../../../Match/MatchConstant":"MatchConstant","../../../UserInfo/UserInfoModel":"UserInfoModel","../../GuanDan/GameEvent":"GameEvent","./Protocol/BaseProtocol":"BaseProtocol"}],GameTestUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"284ffx3Zp9L563htN3UPhmp","GameTestUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./GameTestUI_testComp"),a=t("./GameTestUI_MainPanel"),i=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default)},t}();n.default=i,cc._RF.pop()},{"./GameTestUI_MainPanel":"GameTestUI_MainPanel","./GameTestUI_testComp":"GameTestUI_testComp"}],GameTestUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"ab10aWt/OxGGYkzX09Fr9sj","GameTestUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameTestUI","MainPanel")},e.prototype.onConstruct=function(){this.m_testComp=this.getChildAt(0),this.m_btnTest=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://vwl9sdi2hmi95",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameTestUI_testComp:[function(t,e,n){"use strict";cc._RF.push(e,"ba4d42AKKdPHKlLHtD1+1cy","GameTestUI_testComp");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameTestUI","testComp")},e.prototype.onConstruct=function(){this.m_btnTestEnd=this.getChildAt(1),this.m_rank0=this.getChildAt(7),this.m_rank1=this.getChildAt(8),this.m_rank2=this.getChildAt(9),this.m_rank3=this.getChildAt(10),this.m_trust0=this.getChildAt(12),this.m_trust1=this.getChildAt(13),this.m_trust2=this.getChildAt(14),this.m_trust3=this.getChildAt(15),this.m_numid0=this.getChildAt(17),this.m_numid1=this.getChildAt(18),this.m_numid2=this.getChildAt(19),this.m_numid3=this.getChildAt(20),this.m_curNumid=this.getChildAt(21),this.m_eMult0=this.getChildAt(23),this.m_eMult1=this.getChildAt(24),this.m_eMult2=this.getChildAt(25),this.m_eMult3=this.getChildAt(26)},e.URL="ui://vwl9sdi2hmi93",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameTestUI:[function(t,e,n){"use strict";cc._RF.push(e,"ef113sN1E1GbKR5MJooLSij","GameTestUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameTestUI=void 0;var r=t("../../../../Framework/UI/FadeUI"),s=t("../../Common/PlayerInfoModel"),c=t("../Proxy/GameProxy"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e,"willShowLoading",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){this.view.m_btnTest.onClick(this.onBtnTest,this),this.view.m_testComp.m_btnTestEnd.onClick(this.onBtnTestGameEnd,this)},e.prototype.onBtnTest=function(){this.checkShowTestComp()},e.prototype.checkShowTestComp=function(){if(!0===this.view.m_testComp.visible?this.view.m_testComp.visible=!1:this.view.m_testComp.visible=!0,!0===this.view.m_testComp.visible){for(var t=0;t<s.PlayerInfoModel.instance.getNowGamePlayer();t++){var e=s.PlayerInfoModel.instance.getNumidByServiceSeat(t);e&&(this.view.m_testComp["m_numid"+t].text=e.toString())}var n=s.PlayerInfoModel.instance.getSelfSeat(),o=s.PlayerInfoModel.instance.getNumidByServiceSeat(n);this.view.m_testComp.m_curNumid.text=o.toString()}},e.prototype.onBtnTestGameEnd=function(){var t=+this.view.m_testComp.m_rank0.text,e=+this.view.m_testComp.m_rank1.text,n=+this.view.m_testComp.m_rank2.text,o=+this.view.m_testComp.m_rank3.text,a=+this.view.m_testComp.m_trust0.text,i=+this.view.m_testComp.m_trust1.text,r=+this.view.m_testComp.m_trust2.text,s=+this.view.m_testComp.m_trust3.text,l=+this.view.m_testComp.m_eMult0.text,u=+this.view.m_testComp.m_eMult1.text,d=+this.view.m_testComp.m_eMult2.text,p=+this.view.m_testComp.m_eMult3.text;console.warn("onBtnTestGameEnd.rank\uff1a",t+" "+e+" "+n+" "+o),console.warn("onBtnTestGameEnd.trust\uff1a",a+" "+i+" "+r+" "+s),console.warn("onBtnTestGameEnd.eMult:",l+" "+u+" "+d+" "+p),c.GameProxy.instance.sendTestEndGame([t,e,n,o],[a,i,r,s],[l,u,d,p])},i([jsClass],e)}(r.FadeUI);n.GameTestUI=l,cc._RF.pop()},{"../../../../Framework/UI/FadeUI":"FadeUI","../../Common/PlayerInfoModel":"PlayerInfoModel","../Proxy/GameProxy":"GameProxy"}],GameTrustUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"f6b80k4FzVNYIviCsKtaTt3","GameTrustUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./GameTrustUI_MainPanel"),a=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default)},t}();n.default=a,cc._RF.pop()},{"./GameTrustUI_MainPanel":"GameTrustUI_MainPanel"}],GameTrustUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"59229YKFf1DWqM7LJhS7hQI","GameTrustUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameTrustUI","MainPanel")},e.prototype.onConstruct=function(){this.m_bg=this.getChildAt(0)},e.URL="ui://3ohhoie2jbzg0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameTrustUI:[function(t,e,n){"use strict";cc._RF.push(e,"3ef66bK1SpC85LjdNyxl7j0","GameTrustUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameTrustUI=void 0;var r=t("../../../Framework/UI/FadeUI"),s=t("../../../Framework/UI/BaseUI"),c=t("../GuanDan/Proxy/GameProxy"),l=t("../../Base/Data/DatazOrder"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e,"willShowLoading",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return s.UIType.Window},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sortingOrder",{get:function(){return l.DataZOrder.GameTrustUI},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){this.view.m_bg.onClick(this.onBtnClose,this)},e.prototype.onBtnClose=function(){c.GameProxy.instance.sendTrust(c.TrustEnum.NOT_TRUST)},i([jsClass],e)}(r.FadeUI);n.GameTrustUI=u,cc._RF.pop()},{"../../../Framework/UI/BaseUI":"BaseUI","../../../Framework/UI/FadeUI":"FadeUI","../../Base/Data/DatazOrder":"DatazOrder","../GuanDan/Proxy/GameProxy":"GameProxy"}],GameUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"6b490kiLkFBn7yjMTx1V0XD","GameUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./GameUI_MainPanel"),a=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default)},t}();n.default=a,cc._RF.pop()},{"./GameUI_MainPanel":"GameUI_MainPanel"}],GameUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"fd109TtFGJE9qSmQbMfWom4","GameUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameUI","MainPanel")},e.prototype.onConstruct=function(){this.m_roomtype=this.getControllerAt(0),this.m_logo=this.getChildAt(1),this.m_plaza_text=this.getChildAt(2)},e.URL="ui://mpuv3ib3ooja0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameUI:[function(t,e,n){"use strict";cc._RF.push(e,"ec1462/OR5AO7HfFFiRfW2a","GameUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameUI=void 0;var r,s=t("../../../Framework/UI/BaseUI"),c=t("../../../Framework/UI/FadeUI"),l=t("../../../Framework/Manager/UIManager"),u=t("../../../Framework/Manager/EventManager"),d=t("./GameUI/GameUIBinder"),p=t("../Common/GameCommonModel"),h=t("./GameEvent"),_=t("./GameSceneUI"),f=t("../../../Framework/Manager/CoroutineManager"),m=t("../../Base/Module/Room/RoomModel"),g=t("../../Base/Module/Network/SocketUtils"),y=t("../../UserInfo/UserInfoUI"),I=t("../Common/GameChatUI/GameChatUI"),C=t("../../Base/Module/BfAnalytics/BfasManager"),M=t("../../Base/Module/BfAnalytics/DataPointID"),v=t("./Model/GameModel"),E=t("../Common/GameGuideUI/GameGuideUI"),A=t("./GameCardUI"),P=t("../../Base/Module/Platform/Const/PlatformEventType"),b=t("../../UserInfo/UserInfoModel"),U=t("./GameSceneGoldTeamUI"),S=t("../../Base/Utils/UtilCC"),T=t("../../Base/Data/DataSpineAni"),R=t("./GameSceneFreeTeamUI"),w=t("../../FriendTeam/FriendTeamModel"),D=t("./GameSceneMatchUI"),O=t("../../Match/MatchModel");(function(t){t[t.GOLD_ROOM=0]="GOLD_ROOM",t[t.BOX_ROOM=1]="BOX_ROOM",t[t.MATCH_ROOM=2]="MATCH_ROOM"})(r||(r={}));var L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return a(e,t),n=e,Object.defineProperty(e,"uiType",{get:function(){return s.UIType.Scene},enumerable:!1,configurable:!0}),e.uiBind=function(){d.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initData(),this.initUI()},e.prototype.initListener=function(){u.EventManager.instance.on(P.PlatformEventType.AppHide,this,this.onAppHide),u.EventManager.instance.on(h.GameEvent.REFRESH_PLAZA_TEXT,this,this.initRoomConfig),u.EventManager.instance.on(h.GameEvent.NOTICE_MATCHINFO,this,this.onNoticeMatchInfo)},e.prototype.initData=function(){w.FriendTeamModel.instance.canPopRecord=!1},e.prototype.onAppHide=function(){console.log(">----\x3eonAppHide.GameUI"),l.UIManager.instance.isExist(E.GameGuideUI)||l.UIManager.instance.isExist(n)&&(v.GameModel.instance.isGuideModel()?C.BfasManager.instance.evtUserLinkPoint(M.UserConvertLinkPointID.CLOSE_NEW_GUIDE.eventid,M.UserConvertLinkPointID.CLOSE_NEW_GUIDE.eventName,!0):b.UserInfoModel.instance.isNewRegisterPlayer()&&C.BfasManager.instance.evtUserLinkPoint(M.UserConvertLinkPointID.CLOSE_FIRST_GAME.eventid,M.UserConvertLinkPointID.CLOSE_FIRST_GAME.eventName,!0))},e.prototype.initUI=function(){this.initRoomConfig(),p.GameCommonModel.instance.isMatchRoomModel()?this.dealMatchModel():p.GameCommonModel.instance.isFreeTeamModel()?this.dealFreeTeamModel():p.GameCommonModel.instance.isGoldTeamModel()?this.dealFriendTeamModel():v.GameModel.instance.isNormalModel()?this.dealNormalModel():v.GameModel.instance.isGuideMultCritModel()||v.GameModel.instance.isGuideBroadMultModel()||v.GameModel.instance.isGuideBothNewMultModel()?this.dealRuleGuideModel():this.dealNewPlayerGuideModel()},e.prototype.initRoomConfig=function(){if(p.GameCommonModel.instance.isMatchRoomModel())return this.view.m_plaza_text.text="",void(this.view.m_roomtype.selectedIndex=r.MATCH_ROOM);if(v.GameModel.instance.isNormalModel()&&!p.GameCommonModel.instance.isFreeTeamModel()){var t=p.GameCommonModel.instance.getRoomType();t===m.ClubShowFlags.CLUBS_LIST?(this._roomConfig=m.RoomModel.instance.getPlazaInfoBySubID(p.GameCommonModel.instance.getSubid()),this._roomConfig?p.GameCommonModel.instance.isMixPassARoom()?this.view.m_plaza_text.text=m.RoomModel.instance.parsePlazaFullName(this._roomConfig.name):this.view.m_plaza_text.text=m.RoomModel.instance.parsePlazaFullName(this._roomConfig.name)+" \u5e95 "+this._roomConfig.base:C.BfasManager.instance.evt(M.ClientErrorPointID.SUBID_ERROR_EVENT.eventid,null,!0,M.ClientErrorPointID.SUBID_ERROR_EVENT.eventName),b.UserInfoModel.instance.isNewRegisterPlayer()&&C.BfasManager.instance.evtUserLinkPoint(M.UserConvertLinkPointID.ENTER_GAME_UI.eventid,M.UserConvertLinkPointID.ENTER_GAME_UI.eventName,!1,"1")):t===m.ClubShowFlags.BOXS_LIST&&(this.view.m_roomtype.selectedIndex=r.BOX_ROOM,b.UserInfoModel.instance.isNewRegisterPlayer()&&C.BfasManager.instance.evtUserLinkPoint(M.UserConvertLinkPointID.ENTER_GAME_UI.eventid,M.UserConvertLinkPointID.ENTER_GAME_UI.eventName,!1,"2"))}else this.view.m_plaza_text.text=""},e.prototype.onNoticeMatchInfo=function(t){var e=O.MatchModel.instance.getCurMatchData(),n=O.MatchModel.instance.getMatchData(null==e?void 0:e.mid,null==e?void 0:e.msid),o=(null==n?void 0:n.name)&&(null==n?void 0:n.name)+" ";1!==t.totalPan?this.view.m_plaza_text.text=o+"\u7b2c"+t.nowPan+"/"+t.totalPan+"\u5c40":this.view.m_plaza_text.text=o+"\u53cc\u4e0b4\u5206"},e.prototype.dealNormalModel=function(){var t=this;console.warn("dealNormalModel.time:",Date.now()/1e3),l.UIManager.instance.open(_.GameSceneUI).then(function(){console.warn("dealNormalModel.time:",Date.now()/1e3),f.CoroutineManager.instance.once(.01,function(){l.UIManager.instance.open(A.GameCardUI).then(function(){console.warn("dealNormalModel.time:",Date.now()/1e3),g.SocketUtils.instance.popEmitEvent(),t.preLoadOtherPackage()})})})},e.prototype.dealMatchModel=function(){var t=this;console.warn("dealMatchModel.time:",Date.now()/1e3),l.UIManager.instance.open(D.GameSceneMatchUI).then(function(){console.warn("dealMatchModel.time:",Date.now()/1e3),f.CoroutineManager.instance.once(.01,function(){l.UIManager.instance.open(A.GameCardUI).then(function(){console.warn("dealMatchModel.time:",Date.now()/1e3),g.SocketUtils.instance.popEmitEvent(),t.preLoadOtherPackage()})})})},e.prototype.dealFreeTeamModel=function(){var t=this;console.warn("dealFreeTeamModel.time:",Date.now()/1e3),l.UIManager.instance.open(R.GameSceneFreeTeamUI).then(function(){console.warn("dealFreeTeamModel.time:",Date.now()/1e3),f.CoroutineManager.instance.once(.01,function(){l.UIManager.instance.open(A.GameCardUI).then(function(){console.warn("dealFreeTeamModel.time:",Date.now()/1e3),g.SocketUtils.instance.popEmitEvent(),t.preLoadOtherPackage()})})})},e.prototype.dealFriendTeamModel=function(){var t=this;console.warn("dealFriendTeamModel.time:",Date.now()/1e3),l.UIManager.instance.open(U.GameSceneGoldTeamUI).then(function(){console.warn("dealFriendTeamModel.time:",Date.now()/1e3),f.CoroutineManager.instance.once(.01,function(){l.UIManager.instance.open(A.GameCardUI).then(function(){console.warn("dealFriendTeamModel.time:",Date.now()/1e3),g.SocketUtils.instance.popEmitEvent(),t.preLoadOtherPackage()})})})},e.prototype.dealRuleGuideModel=function(){var t=this;console.warn("dealRuleGuideModel.time:",Date.now()/1e3),l.UIManager.instance.open(_.GameSceneUI).then(function(){console.warn("dealRuleGuideModel.time:",Date.now()/1e3),f.CoroutineManager.instance.once(.01,function(){l.UIManager.instance.open(A.GameCardUI).then(function(){console.warn("dealRuleGuideModel.time:",Date.now()/1e3),t.preLoadOtherPackage()})})})},e.prototype.dealNewPlayerGuideModel=function(){console.warn("dealNewPlayerGuideModel.time:",Date.now()/1e3),l.UIManager.instance.open(_.GameSceneUI).then(function(){console.warn("dealNewPlayerGuideModel.time:",Date.now()/1e3),v.GameModel.instance.isWaitModel()&&l.UIManager.instance.open(E.GameGuideUI).then(function(){C.BfasManager.instance.evt(M.NewPlayerPointID.showGuideUI.eventid,null,!0,M.NewPlayerPointID.showGuideUI.eventName)})})},e.prototype.preLoadOtherPackage=function(){cc.tween(this.view.node).delay(.3).call(function(){S.UtilCC.preloadPrefab(T.DataSpineAniPath.ANI_GAME_PAIXING1),S.UtilCC.preloadPrefab(T.DataSpineAniPath.ANI_GAME_PAIXING2)}).delay(.5).call(function(){l.UIManager.instance.loadPkg([I.GameChatUI.getPkgName()])}).delay(.7).call(function(){l.UIManager.instance.loadPkg([y.UserInfoUI.getPkgName()])}).start()},n=i([jsClass],e)}(c.FadeUI);n.GameUI=L,cc._RF.pop()},{"../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/UI/BaseUI":"BaseUI","../../../Framework/UI/FadeUI":"FadeUI","../../Base/Data/DataSpineAni":"DataSpineAni","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../Base/Module/Network/SocketUtils":"SocketUtils","../../Base/Module/Platform/Const/PlatformEventType":"PlatformEventType","../../Base/Module/Room/RoomModel":"RoomModel","../../Base/Utils/UtilCC":"UtilCC","../../FriendTeam/FriendTeamModel":"FriendTeamModel","../../Match/MatchModel":"MatchModel","../../UserInfo/UserInfoModel":"UserInfoModel","../../UserInfo/UserInfoUI":"UserInfoUI","../Common/GameChatUI/GameChatUI":"GameChatUI","../Common/GameCommonModel":"GameCommonModel","../Common/GameGuideUI/GameGuideUI":"GameGuideUI","./GameCardUI":"GameCardUI","./GameEvent":"GameEvent","./GameSceneFreeTeamUI":"GameSceneFreeTeamUI","./GameSceneGoldTeamUI":"GameSceneGoldTeamUI","./GameSceneMatchUI":"GameSceneMatchUI","./GameSceneUI":"GameSceneUI","./GameUI/GameUIBinder":"GameUIBinder","./Model/GameModel":"GameModel"}],GameWinMoreModel:[function(t,e,n){"use strict";cc._RF.push(e,"94e05ysLbRMQ6QlxweQTGh6","GameWinMoreModel");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameWinMoreModel=void 0;var a=t("../../../../Framework/Manager/EventManager"),i=t("../../../../Framework/Manager/UIManager"),r=t("../../../Activity/Advertise/VideoAdManager"),s=t("../../../Award/AwardModel"),c=t("../../../Award/AwardUI"),l=t("../../../Base/Data/DataBfConfig"),u=t("../../../Base/Data/DataEvent"),d=t("../../../Base/Data/DataScript"),p=t("../../../Base/Module/BfAnalytics/BfasManager"),h=t("../../../Base/Module/BfAnalytics/DataPointID"),_=t("../../../Base/Module/Network/protocol/AwardProtocol"),f=t("../../../Base/Module/Network/SocketUtils"),m=t("../../../Base/Module/Room/RoomModel"),g=t("../../../Base/Module/Share/ShareManager"),y=t("../../GuanDan/GameEvent"),I=t("../GameCommonModel"),C=t("./GameWinMoreUI"),M=t("../../../Base/Utils/UtilString"),v=function(){function t(){this._data={},this._isOpen=!1,this._isPop=!1}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),t.prototype.setData=function(t){this._data=t;var e=t.data.split("|");e&&(this._isOpen=0===Number(e[0]),this._data.type=Number(e[1]),this._data.gold=Number(e[2]),this._data.awardLevel=Number(e[3]))},t.prototype.clearData=function(){this._data={},this._isOpen=!1,this._isPop=!1},t.prototype.isMoreWinResult=function(){return"moreWin"===this._data.func},t.prototype.getDataOpen=function(){return this._isOpen},t.prototype.setPop=function(t){this._isPop=t},t.prototype.getPop=function(){return this._isPop},t.prototype.showGameWinMoreUI=function(){return!(!this._isOpen||this._isPop||(!i.UIManager.instance.isExist(C.GameWinMoreUI)&&i.UIManager.instance.open(C.GameWinMoreUI),0))},t.prototype.getDataGold=function(){return M.UtilString.getCurrencyShortString(this._data.gold)+"\u91d1\u5e01"},t.prototype.isVideoType=function(){return 1===this._data.type},t.prototype.reqAward=function(t,e,n){var o="boolean"==typeof n?g.ShareCheckTypeEnum.CHECK_BY_LOAD_IMG:g.ShareCheckTypeEnum.CHECK_BY_TIME,r=n?g.ShareLoadImgTypeEnum.SUCCESSED:g.ShareLoadImgTypeEnum.FAILED;e===g.ShareCheckTypeEnum.CHECK_BY_VIDEO&&(o=g.ShareCheckTypeEnum.CHECK_BY_VIDEO);var p=new _.AwardProtocol.ReqAwardInfo({type:d.DataScript.moreWin.id,gameid:l.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func="+d.DataScript.moreWin.func.reqGetAward+",roomid="+I.GameCommonModel.instance.getAppid()+",sec="+t+",checktype="+o+",shareflag="+r+";")});f.SocketUtils.instance.request(p,function(t){if(console.log(">-----\x3ereqAward:",bf33.Utils.bytesToString(t.msg)),0==t.flag){var n=bf33.Utils.bytesToString(t.msg).split("|")||[],o={};if(0===Number(n[0])){o=JSON.parse(n[1]);var r=s.AwardModel.instance.getAwardsFormat({asr:o.asr});i.UIManager.instance.open(c.AwardUI).then(function(t){t.init(r)}),i.UIManager.instance.isExist(C.GameWinMoreUI)&&i.UIManager.instance.close(C.GameWinMoreUI),a.EventManager.instance.emit(y.GameEvent.REMOVE_WIN_MORE_BTN_UI)}else!e&&a.EventManager.instance.emit(u.DataEvent.ToastData,Math.random()>.5?"\u9700\u8fdb\u884c\u5206\u4eab\u624d\u80fd\u9886\u53d6\u5956\u52b1\u54e6~":"\u5206\u4eab\u5931\u8d25\uff0c\u6362\u4e2a\u597d\u53cb\u8bd5\u8bd5")}})},t.prototype.onBtnGet=function(){e.instance.isVideoType()?this.onVideo():this.onShare(),e.instance.isMoreWinResult()?this.sendEvt(h.WinMorePointID.touchWinBtn.eventid,h.WinMorePointID.touchWinBtn.eventName):this.sendEvt(h.WinMorePointID.touchLoseBtn.eventid,h.WinMorePointID.touchLoseBtn.eventName)},t.prototype.onVideo=function(){var t=this;cc.sys.os!=cc.sys.OS_WINDOWS||l.DataBfConfig.isNormalEnv()?r.VideoAdManager.instance.showVideoAd(function(){},function(e){e&&t.reqAward(0,g.ShareCheckTypeEnum.CHECK_BY_VIDEO)}):this.reqAward(0,g.ShareCheckTypeEnum.CHECK_BY_VIDEO)},t.prototype.onShare=function(){var t=this;cc.sys.os!=cc.sys.OS_WINDOWS||l.DataBfConfig.isNormalEnv()?this.isMoreWinResult()?g.ShareManager.instance.share(g.ShareType.gameMoreWinShare,null,function(e,n){t.reqAward(e,null,n)}):g.ShareManager.instance.share(g.ShareType.gameLessLoseShare,null,function(e,n){t.reqAward(e,null,n)}):this.reqAward(0,null,!0)},t.prototype.sendEvt=function(t,n){var o={type:e.instance.isMoreWinResult()?2:1,kind:e.instance.getKind(),level:e.instance.getLevel(),award:this._data.awardLevel,request:e.instance.isVideoType()?1:2};p.BfasManager.instance.evt(t,o,!0,n)},t.prototype.getKind=function(){var t=m.RoomModel.instance.getPlazaInfoBySubID(I.GameCommonModel.instance.getSubid());if(!t)return 0;var e=t.gameID;return e===l.GameIDInfo.CLASSIC_GD.id?2:e===l.GameIDInfo.NO_SHUFFLE_GD.id?1:e===l.GameIDInfo.TTZ_GD.id?3:void 0},t.prototype.getLevel=function(){var t=m.RoomModel.instance.getPlazaInfoBySubID(I.GameCommonModel.instance.getSubid()),e="";return t&&(e=t.name),-1!==e.indexOf("\u521d\u7ea7")?1:-1!==e.indexOf("\u4e2d\u7ea7")?2:-1!==e.indexOf("\u9ad8\u7ea7")?3:-1!==e.indexOf("\u5927\u5e08")?4:void 0},t._instance=null,e=o([jsClass],t)}();n.GameWinMoreModel=v,cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Manager/UIManager":"UIManager","../../../Activity/Advertise/VideoAdManager":"VideoAdManager","../../../Award/AwardModel":"AwardModel","../../../Award/AwardUI":"AwardUI","../../../Base/Data/DataBfConfig":"DataBfConfig","../../../Base/Data/DataEvent":"DataEvent","../../../Base/Data/DataScript":"DataScript","../../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../../Base/Module/Network/SocketUtils":"SocketUtils","../../../Base/Module/Network/protocol/AwardProtocol":"AwardProtocol","../../../Base/Module/Room/RoomModel":"RoomModel","../../../Base/Module/Share/ShareManager":"ShareManager","../../../Base/Utils/UtilString":"UtilString","../../GuanDan/GameEvent":"GameEvent","../GameCommonModel":"GameCommonModel","./GameWinMoreUI":"GameWinMoreUI"}],GameWinMoreUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"e9b02GcgCdKNY60L0bQDdXY","GameWinMoreUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./GameWinMoreUI_MainPanel"),a=t("./GameWinMoreUI_window"),i=t("./GameWinMoreUI_Button"),r=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default)},t}();n.default=r,cc._RF.pop()},{"./GameWinMoreUI_Button":"GameWinMoreUI_Button","./GameWinMoreUI_MainPanel":"GameWinMoreUI_MainPanel","./GameWinMoreUI_window":"GameWinMoreUI_window"}],GameWinMoreUI_Button:[function(t,e,n){"use strict";cc._RF.push(e,"a2383xPoutGgKEcnutJn0yK","GameWinMoreUI_Button");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameWinMoreUI","Button")},e.prototype.onConstruct=function(){this.m_type=this.getControllerAt(0),this.m_isVideo=this.getControllerAt(1),this.m_bg=this.getChildAt(0),this.m_text=this.getChildAt(1)},e.URL="ui://b5693jz5lgljf",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],GameWinMoreUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"be453i0b4ZIbLUcVL14B+5n","GameWinMoreUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameWinMoreUI","MainPanel")},e.prototype.onConstruct=function(){this.m_window=this.getChildAt(1),this.m_AniMove=this.getTransitionAt(0)},e.URL="ui://b5693jz5goky0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameWinMoreUI_window:[function(t,e,n){"use strict";cc._RF.push(e,"bf9c77VmZ1GeYmbO1aEScFZ","GameWinMoreUI_window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GameWinMoreUI","window")},e.prototype.onConstruct=function(){this.m_type=this.getControllerAt(0),this.m_titleType=this.getControllerAt(1),this.m_bg=this.getChildAt(0),this.m_win_text=this.getChildAt(1),this.m_lose_text=this.getChildAt(2),this.m_btnGet=this.getChildAt(4),this.m_btn_close=this.getChildAt(5)},e.URL="ui://b5693jz5goky1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GameWinMoreUI:[function(t,e,n){"use strict";cc._RF.push(e,"a64daHzQAlM+6X3K0NPAgM7","GameWinMoreUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameWinMoreUI=void 0;var r,s,c,l,u=t("../../../../Framework/Manager/EventManager"),d=t("../../../../Framework/UI/BaseUI"),p=t("../../../../Framework/UI/FadeUI"),h=t("../../../Base/Data/DatazOrder"),_=t("../../../Base/Data/DataSpineAni"),f=t("../../../Base/Module/BfAnalytics/DataPointID"),m=t("../../../Base/Utils/UtilCC"),g=t("../../GuanDan/GameEvent"),y=t("../GameCommonModel"),I=t("./GameWinMoreModel");(function(t){t[t.WIN=0]="WIN",t[t.LOSE=1]="LOSE"})(r||(r={})),function(t){t[t.WIN_1=0]="WIN_1",t[t.WIN_2=1]="WIN_2",t[t.WIN_3=2]="WIN_3",t[t.LOSE_1=3]="LOSE_1",t[t.LOSE_2=4]="LOSE_2"}(s||(s={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(c||(c={})),function(t){t[t.IS_VIDEO=0]="IS_VIDEO",t[t.NOT_VIDEO=1]="NOT_VIDEO"}(l||(l={}));var C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isWin=!1,e}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return d.UIType.Dialog},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sortingOrder",{get:function(){return h.DataZOrder.GameWinMoreUI},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initUI()},e.prototype.initListener=function(){this.view.m_window.m_btn_close.onClick(this.onBtnClose,this),this.view.m_window.m_btnGet.onClick(this.onBtnGet,this)},e.prototype.initUI=function(){var t=this;this.view.getTransition("AniMove").play(),I.GameWinMoreModel.instance.setPop(!0),this._isWin=I.GameWinMoreModel.instance.isMoreWinResult(),this._isWin?this.view.m_window.m_btnGet.m_text.text="\u514d\u8d39\u9886\u53d6":this.view.m_window.m_btnGet.m_text.text="\u7acb\u5373\u593a\u56de";var e=I.GameWinMoreModel.instance.isVideoType();this.view.m_window.m_btnGet.m_isVideo.selectedIndex=e?l.IS_VIDEO:l.NOT_VIDEO,m.UtilCC.instantiatePrefab(_.DataSpineAniPath.ANI_GAMEWINMORE_BG,function(e){var n=e.getComponent(sp.Skeleton);e.setPosition(cc.v2(0,0)),n.setAnimation(0,t._isWin?"ying":"shu",!0),t.view.m_window.m_type.selectedIndex=t._isWin?r.WIN:r.LOSE,t.view.m_window.m_titleType.selectedIndex=t._isWin?y.GameCommonModel.instance.getRandomNum(s.WIN_1,s.WIN_3):y.GameCommonModel.instance.getRandomNum(s.LOSE_1,s.LOSE_2),t.view.m_window.m_lose_text.text=I.GameWinMoreModel.instance.getDataGold(),t.view.m_window.m_win_text.text=I.GameWinMoreModel.instance.getDataGold(),m.UtilCC.instantiatePrefab(_.DataSpineAniPath.ANI_BTN_YELLOW,function(e){var n=e.getComponent(sp.Skeleton);n.setAnimation(0,"btn_1",!1),n.setCompleteListener(function(n){"btn_1"===(n.animation?n.animation.name:"")&&(t.view.m_window.m_btnGet.m_type.selectedIndex=c.SHOW,e.getComponent(sp.Skeleton).setAnimation(0,"btn_2",!0))})},t.view.m_window.m_btnGet.m_bg.node)},this.view.m_window.m_bg.node),I.GameWinMoreModel.instance.sendEvt(f.WinMorePointID.showUI.eventid,f.WinMorePointID.showUI.eventName)},e.prototype.onBtnClose=function(){this.onExitClick(),I.GameWinMoreModel.instance.sendEvt(f.WinMorePointID.touchGiveUp.eventid,f.WinMorePointID.touchGiveUp.eventName),u.EventManager.instance.emit(g.GameEvent.WIN_MORE)},e.prototype.onBtnGet=function(){console.log("onBtnGet"),I.GameWinMoreModel.instance.sendEvt(f.WinMorePointID.touchBtn.eventid,f.WinMorePointID.touchBtn.eventName),I.GameWinMoreModel.instance.onBtnGet()},i([jsClass],e)}(p.FadeUI);n.GameWinMoreUI=C,cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/UI/BaseUI":"BaseUI","../../../../Framework/UI/FadeUI":"FadeUI","../../../Base/Data/DataSpineAni":"DataSpineAni","../../../Base/Data/DatazOrder":"DatazOrder","../../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../../Base/Utils/UtilCC":"UtilCC","../../GuanDan/GameEvent":"GameEvent","../GameCommonModel":"GameCommonModel","./GameWinMoreModel":"GameWinMoreModel"}],GuanDanCardLogic:[function(t,e,n){"use strict";cc._RF.push(e,"f393ejWLS5ByJqRVqqMj73E","GuanDanCardLogic");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.GuanDanCardLogic=void 0;var i=t("../CommonLogic/CardRule/CardConstants"),r=t("../CommonLogic/CardLogic/PokerAlgorithm"),s=t("../CommonLogic/CardRule/CardGamingData"),c=t("../CommonLogic/CardRule/CardFunc"),l=t("../CommonLogic/CommonFunc/ToolLuaFunc"),u=t("../CommonLogic/CardLogic/HandCardsLogic"),d=t("../CommonLogic/CardLogic/PlayCardsParse"),p=t("../CommonLogic/CardLogic/DefaultPokerCardsConst"),h=t("./Proxy/GameProxy"),_=t("./Model/GameModel"),f=function(){function t(){this._handCardsLogic=null,this._CardData=null,this._stepId=0,this._levelCard=0,this._tongHuaShunFangKuaiArr=[],this._tongHuaShunMeiHuaArr=[],this._tongHuaShunHongTaoArr=[],this._tongHuaShunHeiTaoArr=[],this._hintCardsTypeFileFunc={},this.GDCardType={},this.initGDCardType(),this._CardData=new s.CardGamingData,this.initCard(e._MAX_PLAYER)}var e;return e=t,t.prototype.initGDCardType=function(){var t=i.CardConstants.cardType.CTID_USER;this.GDCardType={CTID_JIU_ZHANG:9,CTID_SHI_ZHANG:10,CTID_SAN_DAI_ER:t+1,CTID_GANG_BAN:t+2,CTID_SAN_LIAN_DUI:t+3,CTID_SHUN_ZI:t+4,CTID_TONG_HUA_SHUN:t+5,CTID_SI_WANG:t+6}},t.prototype.initCard=function(t){null==this._handCardsLogic&&(this._handCardsLogic=new u.HandCardsLogic),this.setMaxPlayer(t),this.setLevelCard(e._cardNum.CN_2),this._handCardsLogic.rule.appendRule(1,p.PokerCardsType.WangZha,r.PokerAlgorithm.FindWangZha),this._handCardsLogic.rule.appendRule(2,p.PokerCardsType.BaZhang,r.PokerAlgorithm.FindZhaDan),this._handCardsLogic.rule.appendRule(3,p.PokerCardsType.QiZhang,r.PokerAlgorithm.FindZhaDan),this._handCardsLogic.rule.appendRule(4,p.PokerCardsType.LiuZhang,r.PokerAlgorithm.FindZhaDan),this._handCardsLogic.rule.appendRule(5,p.PokerCardsType.TongHuaShun,r.PokerAlgorithm.FindTongHuaShun),this._handCardsLogic.rule.appendRule(6,p.PokerCardsType.WuZhang,r.PokerAlgorithm.FindZhaDan),this._handCardsLogic.rule.appendRule(7,p.PokerCardsType.SiZhang,r.PokerAlgorithm.FindZhaDan),this._handCardsLogic.rule.appendRule(8,p.PokerCardsType.LianSan,r.PokerAlgorithm.FindGangBan),this._handCardsLogic.rule.appendRule(9,p.PokerCardsType.LianDui,r.PokerAlgorithm.FindSanLianDui),this._handCardsLogic.rule.appendRule(10,p.PokerCardsType.SanZhang,r.PokerAlgorithm.FindSanZhang),this._handCardsLogic.rule.appendRule(11,p.PokerCardsType.DuiZi,r.PokerAlgorithm.FindDuiZi),this._handCardsLogic.rule.appendRule(12,p.PokerCardsType.ShunZi,r.PokerAlgorithm.FindShunZi5),this._handCardsLogic.rule.appendRule(13,p.PokerCardsType.DanZhang,r.PokerAlgorithm.FindDanZhang),this._handCardsLogic.rule.appendRule(14,p.PokerCardsType.SanDaiEr,r.PokerAlgorithm.FindSanDaiErWithBaiDa),this._handCardsLogic.cardsParseRule.append(1,p.PokerCardsType.DanZhang,d.PlayCardsParse.IsDanZhang),this._handCardsLogic.cardsParseRule.append(2,p.PokerCardsType.DuiZi,d.PlayCardsParse.IsDuiZi),this._handCardsLogic.cardsParseRule.append(3,p.PokerCardsType.SanZhang,d.PlayCardsParse.IsSanZhang),this._handCardsLogic.cardsParseRule.append(4,p.PokerCardsType.SiZhang,d.PlayCardsParse.IsZhaDan),this._handCardsLogic.cardsParseRule.append(4,p.PokerCardsType.WangZha,d.PlayCardsParse.IsWangZha),this._handCardsLogic.cardsParseRule.append(5,p.PokerCardsType.WuZhang,d.PlayCardsParse.IsZhaDan),this._handCardsLogic.cardsParseRule.append(5,p.PokerCardsType.TongHuaShun,d.PlayCardsParse.IsTongHuaShun),this._handCardsLogic.cardsParseRule.append(5,p.PokerCardsType.ShunZi,d.PlayCardsParse.IsShunZi5),this._handCardsLogic.cardsParseRule.append(5,p.PokerCardsType.SanDaiEr,d.PlayCardsParse.IsSanDaiEr),this._handCardsLogic.cardsParseRule.append(6,p.PokerCardsType.LiuZhang,d.PlayCardsParse.IsZhaDan),this._handCardsLogic.cardsParseRule.append(6,p.PokerCardsType.LianSan,d.PlayCardsParse.IsGangBan),this._handCardsLogic.cardsParseRule.append(6,p.PokerCardsType.LianDui,d.PlayCardsParse.IsLianSanDui),this._handCardsLogic.cardsParseRule.append(7,p.PokerCardsType.QiZhang,d.PlayCardsParse.IsZhaDan),this._handCardsLogic.cardsParseRule.append(8,p.PokerCardsType.BaZhang,d.PlayCardsParse.IsZhaDan),this._handCardsLogic.cardsParseRule.append(9,p.PokerCardsType.JiuZhang,d.PlayCardsParse.IsZhaDan),this._handCardsLogic.cardsParseRule.append(10,p.PokerCardsType.ShiZhang,d.PlayCardsParse.IsZhaDan),this.addHintCardsFunc()},t.prototype.addHintCardsFunc=function(){for(var t=[p.PokerCardsType.DanZhang,p.PokerCardsType.DuiZi],e=0;e<t.length;e++){var n=t[e];this._hintCardsTypeFileFunc[""+n]=[this.hintsCards_buChai,this.hintsBomb_buChai,this.hintsCards_chaiLevel1,this.hintsCards_chaiLevel2]}for(t=[p.PokerCardsType.SanZhang,p.PokerCardsType.LianSan],e=0;e<t.length;e++)n=t[e],this._hintCardsTypeFileFunc[""+n]=[this.hintsCards_buChai,this.hintsBomb_buChai,this.hintsCards_chaiLevel2];for(t=[p.PokerCardsType.ShunZi,p.PokerCardsType.LianDui],e=0;e<t.length;e++)n=t[e],this._hintCardsTypeFileFunc[""+n]=[this.hintsCards_buChai,this.hintsCards_chaiLevel1,this.hintsBomb_buChai,this.hintsCards_chaiLevel2];this._hintCardsTypeFileFunc[p.PokerCardsType.SanDaiEr]=[this.hintsCards_buChai,this.hintsBomb_buChai,this.hintsCards_chaiLevel2]},t.prototype.setLevelCard=function(t){this._handCardsLogic.setLevelCard(t-1),this._levelCard=t,this._CardData.setLevelNum(t)},t.prototype.getLevelCard=function(){return this._levelCard},t.prototype.isTuoCard=function(t){return!!_.GameModel.instance.isTuoPaiModel()&&(2===this.getLevelCard()?3===t:2===t)},t.prototype.isFirstPutTuoCard=function(t){return _.GameModel.instance.isTuoPaiFirstPlay()&&this.isTuoCard(t)},t.prototype.isFirstPutTuoCards=function(t){if(_.GameModel.instance.isTuoPaiFirstPlay())for(var e=0;e<t.length;e++)if(this.isTuoCard(c.CardFunc.getCardNum(t[e])))return!0;return!1},t.prototype.setMaxPlayer=function(t){e._MAX_PLAYER=t},t.prototype.setAppendCards=function(t){this._handCardsLogic.setCards(t)},t.prototype.addAppendCard=function(t){this._handCardsLogic.appendCard(t)},t.prototype.delAppendCard=function(t){this._handCardsLogic.deleteCard(t)},t.prototype.delAppendCards=function(t){this._handCardsLogic.deleteCards(t)},t.prototype.isSelfSeat=function(){return 0},t.prototype.setStepID=function(t){this._stepId=t},t.prototype.getStepID=function(){return this._stepId},t.prototype.formToAtoms=function(t){if(!t||!t.cards||5!=this.getListLength(t.cards)||!t.type||t.type.id!=this.GDCardType.CTID_SAN_DAI_ER)return[{},!1];for(var e={},n={},o={},a=1;a<=this.getListLength(t.cards);a++)this.isJoker(t.cards[a])?this.addTableData_lua(o,t.cards[a]):0==this.getListLength(e)||e[1]==t.cards[a]?this.addTableData_lua(e,t.cards[a]):0!=this.getListLength(n)&&n[1]!=t.cards[a]||this.addTableData_lua(n,t.cards[a]);if(this.getListLength(e)+this.getListLength(n)+this.getListLength(o)!=5)return[{},!1];for(a=1;this.getListLength(o);a++)this.getListLength(e)<2?this.addTableData_lua(e,o[a]):this.getListLength(n)<2?this.addTableData_lua(n,o[a]):this.getCardWeight(e[1])<21&&this.getCardWeight(e[1])>this.getCardWeight(e[2])?this.addTableData_lua(e,o[a]):this.addTableData_lua(n,o[a]);var i={};return 3==this.getListLength(e)?(this.addTableData_lua(i,this.deepCopy(this.testMaxCardComb(e))),this.addTableData_lua(i,this.deepCopy(this.testMaxCardComb(n)))):(this.addTableData_lua(i,this.deepCopy(this.testMaxCardComb(n))),this.addTableData_lua(i,this.deepCopy(this.testMaxCardComb(e)))),[i,!0]},t.prototype.findCards=function(t,e){if(!t||!e||0==this.getListLength(t))return{};for(var n=this._handCardsLogic.getPlayCardsFromType(this.changeFCardType(e),t),o={},a=1;a<=this.getListLength(n);a++)this.addTableData_lua(o,n[a].cards);return o},t.prototype.getListLength=function(t){return l.ToolLuaFunc.getListLength(t)},t.prototype.deepCopy=function(t){return l.ToolLuaFunc.deepCopy(t)},t.prototype.addTableData_lua=function(t,e){l.ToolLuaFunc.addTableData_lua(t,e)},t.prototype.setAllCards=function(t){this._CardData.setAllCards(t)},t.prototype.setHandCards=function(t,e){this._CardData.setHandCards(t,e),this.isSelfSeat(t)&&this.setAppendCards(e)},t.prototype.getHandCards=function(t){return this._CardData.getHandCards(t)},t.prototype.delHandCards=function(t,e){var n=this._CardData.delHandCards(t,e);return n&&this.isSelfSeat(t)&&this.delAppendCards(e),n},t.prototype.clearHandCards=function(){this._CardData.clearHandCards()},t.prototype.getHandCardsLength=function(t){return this._CardData.getHandCardsLength(t)},t.prototype.setOutCards=function(t,e){this._CardData.setOutCards(t,e)},t.prototype.getOutCards=function(t){return this._CardData.getOutCards(t)},t.prototype.clearOutCards=function(){this._CardData.clearOutCards()},t.prototype.setOutComb=function(t,e){this._CardData.setOutComb(t,e)},t.prototype.getOutComb=function(t){var e=this._CardData.getOutComb(t);return e||(e=this.getCardCombEmpty()),e},t.prototype.clearOutCombs=function(){this._CardData.clearOutCombs()},t.prototype.changeCardType=function(t){var e=t;return e>this.GDCardType.CTID_SHI_ZHANG&&(e==p.PokerCardsType.ShunZi?e=this.GDCardType.CTID_SHUN_ZI:e==p.PokerCardsType.LianDui?e=this.GDCardType.CTID_SAN_LIAN_DUI:e==p.PokerCardsType.LianSan?e=this.GDCardType.CTID_GANG_BAN:e==p.PokerCardsType.SanDaiEr?e=this.GDCardType.CTID_SAN_DAI_ER:e==p.PokerCardsType.TongHuaShun?e=this.GDCardType.CTID_TONG_HUA_SHUN:e==p.PokerCardsType.WangZha&&(e=this.GDCardType.CTID_SI_WANG)),e},t.prototype.changeFCardType=function(t){var e=t;return e>this.GDCardType.CTID_SHI_ZHANG&&(e==this.GDCardType.CTID_SHUN_ZI?e=p.PokerCardsType.ShunZi:e==this.GDCardType.CTID_SAN_LIAN_DUI?e=p.PokerCardsType.LianDui:e==this.GDCardType.CTID_GANG_BAN?e=p.PokerCardsType.LianSan:e==this.GDCardType.CTID_SAN_DAI_ER?e=p.PokerCardsType.SanDaiEr:e==this.GDCardType.CTID_TONG_HUA_SHUN?e=p.PokerCardsType.TongHuaShun:e==this.GDCardType.CTID_SI_WANG&&(e=p.PokerCardsType.WangZha)),e},t.prototype.getCardsTypeWeight=function(t){var e=100;return this.isLiPaiLeft(t)?(t!=p.PokerCardsType.LiuZhang&&t!=p.PokerCardsType.QiZhang&&t!=p.PokerCardsType.BaZhang&&t!=p.PokerCardsType.JiuZhang&&t!=p.PokerCardsType.ShiZhang&&t!=p.PokerCardsType.WangZha||(e+=100),e+t):t},t.prototype.isLiPaiLeft=function(t){return t>=p.PokerCardsType.SiZhang&&(t==p.PokerCardsType.SiZhang||t==p.PokerCardsType.TongHuaShun||t==p.PokerCardsType.WuZhang||t==p.PokerCardsType.LiuZhang||t==p.PokerCardsType.QiZhang||t==p.PokerCardsType.BaZhang||t==p.PokerCardsType.JiuZhang||t==p.PokerCardsType.ShiZhang||t==p.PokerCardsType.WangZha)},t.prototype.getLiPaiCardsAllCount=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].length-1;return e},t.prototype.getCardCombEmpty=function(){var t={cards:{},nums:{},type:{}};return t.type.id=0,t.type.power=0,t.type.count=0,t.type.len=0,t.type.hint=0,t.type.vals={},t},t.prototype.changeCardComb=function(t){var e=this.getCardCombEmpty();return e.cards=this.deepCopy(t.cards),e.type.id=this.changeCardType(t.type),e.type.conut=t.size,e},t.prototype.testMaxCardComb=function(t){var e=this.getCardCombEmpty();if(!t)return e;var n=this._handCardsLogic.parseCardsInfo(t);return this.changeCardComb(n)},t.prototype.testCardComb=function(t){var e=this._handCardsLogic.parseCardsInfo(t);return this.changeCardComb(e)},t.prototype.canOutFromMaxComb=function(t,e){if(!e||!e.cards||0==this.getListLength(e.cards))return this.testMaxCardComb(t);var n=this._handCardsLogic.parseCardsInfo(e.cards);return this._handCardsLogic.playCardsCanOver(t,n)?this.testMaxCardComb(t):null},t.prototype.canOutByCardComb=function(t,e){if(!e||!e.cards||0==this.getListLength(e.cards))return-1!=this._handCardsLogic.parseCardsInfo(t.cards).type;var n=this._handCardsLogic.parseCardsInfo(e.cards);return this._handCardsLogic.playCardsCanOver(t.cards,n)},t.prototype.setCancel=function(t,e){this._CardData.setCancel(t,e)},t.prototype.isCancel=function(t){return this._CardData.isCancel(t)},t.prototype.clearCancels=function(){this._CardData.clearCancels()},t.prototype.nextSeat=function(t){var n=t+1;return n>=e._MAX_PLAYER&&(n=0),n},t.prototype.isJoker=function(t){if(t<e._cardVaule.CV_HONG_A||t>e._cardVaule.CV_HONG_K)return!1;var n=this.getCardNum(t);return this._CardData.getLevelNum()==n},t.prototype.setPower=function(t,e){this._CardData.setPower(t,e)},t.prototype.getPower=function(t){return this._CardData.getPower(t)},t.prototype.clearPowers=function(){this._CardData.clearPowers()},t.prototype.getJokers=function(){var t=this._CardData.getLevelNum();t==e._cardNum.CN_A&&(t=e._cardNum.CN_1);var n={};return this.addTableData_lua(n,t+26),n},t.prototype.sortByWeight=function(t){if(!t||1==this.getListLength(t))return t;for(var e=t.length,n=0;n<e-1;n++)for(var o=n+1;o<=e-1;o++){var a=this.getCardWeight(t[n])<this.getCardWeight(t[o]),i=this.getCardWeight(t[n])==this.getCardWeight(t[o])&&c.CardFunc.getCardColor(t[n])>c.CardFunc.getCardColor(t[o]);if(this.getCardWeight(t[n])==this.getCardWeight(t[o])&&this._CardData.getLevelNum()==this.getCardNum(t[n])&&(i=this.sortLevelByWeight(t[n],t[o])),a||i){var r=t[n];t[n]=t[o],t[o]=r}}return t.concat()},t.prototype.sortLevelByWeight=function(t,e){var n=1,o=1;return c.CardFunc.getCardColor(t)==p.PokerCardColor.HongXin?n=5:c.CardFunc.getCardColor(e)==p.PokerCardColor.HongXin&&(o=5),c.CardFunc.getCardColor(t)==p.PokerCardColor.FangKuai?n=4:c.CardFunc.getCardColor(e)==p.PokerCardColor.FangKuai&&(o=4),c.CardFunc.getCardColor(t)==p.PokerCardColor.MeiHua?n=3:c.CardFunc.getCardColor(e)==p.PokerCardColor.MeiHua&&(o=3),c.CardFunc.getCardColor(t)==p.PokerCardColor.HeiTao?n=2:c.CardFunc.getCardColor(e)==p.PokerCardColor.HeiTao&&(o=2),n<o},t.prototype.sortByColor=function(t){if(!t||1==this.getListLength(t))return t;for(var e=t.length,n=0;n<e-1;n++)for(var o=n+1;o<=e-1;o++){var a=c.CardFunc.getCardColor(t[n])<c.CardFunc.getCardColor(t[o]),i=c.CardFunc.getCardColor(t[n])==c.CardFunc.getCardColor(t[o])&&this.getCardWeight(t[n])<this.getCardWeight(t[o]);if(a||i){var r=t[n];t[n]=t[o],t[o]=r}}return t.concat()},t.prototype.sortByCount=function(t){if(!t||1==this.getListLength(t))return t;for(var n=t.length,o={},a=0;a<n;a++){var i=t[a],r=this.getCardWeight(i);o[r]||(o[r]=[]),o[r].push(i)}var s=[];for(var c in o){var l=o[c];this.sortLevelByCount(l),s.push(l)}var u=this;for(var c in s.sort(function(t,n){var o=u.getCardNum(t[0]);return o==e._cardNum.CN_Z?-10:o==e._cardNum.CN_F?-9:t.length<n.length?1:-1}),t.splice(0,t.length),s)for(l=s[c],a=0;a<l.length;a++)t.push(l[a]);return t},t.prototype.sortLevelByCount=function(t){return this._CardData.getLevelNum()==this.getCardNum(t[0])&&t.sort(function(t,e){var n=1,o=1;return c.CardFunc.getCardColor(t)==p.PokerCardColor.HongXin?n=5:c.CardFunc.getCardColor(e)==p.PokerCardColor.HongXin&&(o=5),c.CardFunc.getCardColor(t)==p.PokerCardColor.FangKuai?n=4:c.CardFunc.getCardColor(e)==p.PokerCardColor.FangKuai&&(o=4),c.CardFunc.getCardColor(t)==p.PokerCardColor.MeiHua?n=3:c.CardFunc.getCardColor(e)==p.PokerCardColor.MeiHua&&(o=3),c.CardFunc.getCardColor(t)==p.PokerCardColor.HeiTao?n=2:c.CardFunc.getCardColor(e)==p.PokerCardColor.HeiTao&&(o=2),n>o?-1:1}),t},t.prototype.getVerticalSortCards=function(t){if(!t||1==this.getListLength(t))return[t];for(var e=[],n=[],o=-1,a=0;a<t.length;a++){var i=t[a];-1==o?(o=this.getCardNum(i),n.push(i)):(o!=this.getCardNum(i)&&(o=this.getCardNum(i),e.push(n),n=[]),n.push(i)),a==t.length-1&&e.push(n)}return e},t.prototype.checkHintCardsAllTongHua=function(t){if(this._tongHuaShunFangKuaiArr=[],this._tongHuaShunMeiHuaArr=[],this._tongHuaShunHongTaoArr=[],this._tongHuaShunHeiTaoArr=[],!t||1==this.getListLength(t))return t;for(var e=t.concat(),n=[],o=0;o<e.length;){var a=e[o];this.getCardNum(a)==this._CardData.getLevelNum()&&this.getCardColor(a)==p.PokerCardColor.HongXin?(n.push(a),e.splice(o,1)):o++}var i=this.sortByColor(e),r=this._handCardsLogic.getTableColorForKey(i),s=function(e){var o=Number(e),a=r[e];a=a.concat(n);var i=c.findCards(a,105),s=[],l=function(e){var n={cards:[],isAllSame:!1},o=0;for(var a in i[e]){var r=c.getCardNum(i[e][a]),l=c.getCardColor(i[e][a]);r==c._CardData.getLevelNum()&&l==p.PokerCardColor.HongXin&&o++}var u=!0,d=function(a){n.cards.push(i[e][a]);var r=t.filter(function(t){return t==i[e][a]});(2==o||r.length<2)&&(u=!1)};for(var a in i[e])d(a);if(u){s.push(n);var h=c.deepCopy(n);h.isAllSame=u,s.push(h)}else s.push(n)};for(var u in i)l(u);c.setTongHuaShuTable(o,s)},c=this;for(var l in r)s(l)},t.prototype.setTongHuaShuTable=function(t,e){t==p.PokerCardColor.MeiHua?this._tongHuaShunMeiHuaArr=e:t==p.PokerCardColor.FangKuai?this._tongHuaShunFangKuaiArr=e:t==p.PokerCardColor.HongXin?this._tongHuaShunHongTaoArr=e:t==p.PokerCardColor.HeiTao&&(this._tongHuaShunHeiTaoArr=e)},t.prototype.getTongHuaShuTable=function(t){return t==p.PokerCardColor.MeiHua?this._tongHuaShunMeiHuaArr:t==p.PokerCardColor.FangKuai?this._tongHuaShunFangKuaiArr:t==p.PokerCardColor.HongXin?this._tongHuaShunHongTaoArr:t==p.PokerCardColor.HeiTao?this._tongHuaShunHeiTaoArr:void 0},t.prototype.hintCards=function(t,e,n){if(!e||0==this.getListLength(e)||!_.GameModel.instance.isSelfPlay())return[];var o=this.getLiPaiAndOtherCards(t),a=[];if(n&&(4===n.cards.length&&n.type===p.PokerCardsType.WangZha||(n.type=this.changeFCardType(n.type),this.addMaxCard(n))),(a=this.getHintCardsNoSplitArr(o,n)).length>0||n.type===p.PokerCardsType.WangZha)return n&&n.type===p.PokerCardsType.WangZha?[]:a;var i=o.liPaiArr,r=o.noLiPaiCards,s=this._handCardsLogic.getPlayCards(n,r);if(n){var c={};i.length>0&&(c=this._handCardsLogic.getPlayCards(n,r.concat(i))),this.deleteHintListSameCards(s,c),a=this.getOtherPutHintsCards(s,c,o,n)}return a},t.prototype.getHintCardsNoSplitArr=function(t,e){return e?this.getHintArrSelfCardsMaxOther(t,e):this.getHintArrFirstPut(t)},t.prototype.getHintArrSelfCardsMaxOther=function(t,e){var n=this._handCardsLogic.getCardsTableRealNumForKeyCountAndCardsIsProperty(t.noLiPaiCards),o=[];switch(e.type){case p.PokerCardsType.DanZhang:o=this._handCardsLogic.getSameCardsNoSplitArr(n,e,1);break;case p.PokerCardsType.DuiZi:o=this._handCardsLogic.getSameCardsNoSplitArr(n,e,2);break;case p.PokerCardsType.SanZhang:o=this._handCardsLogic.getSameCardsNoSplitArr(n,e,3);break;case p.PokerCardsType.LianDui:o=this._handCardsLogic.getLianDuiNoSplitArr(n,e);break;case p.PokerCardsType.LianSan:o=this._handCardsLogic.getLianSanNoSplitArr(n,e);break;case p.PokerCardsType.ShunZi:o=this._handCardsLogic.getShunZiNoSplitArr(n,e);break;case p.PokerCardsType.SanDaiEr:o=this._handCardsLogic.getSanDaiErNoSplitArr(n,e)}var a=this._handCardsLogic.getMaxZhaNoSplitArr(n,e,this.isLiPaiLeft(e.type));o=o.concat(a);var i=this.getLiPaiCanPutArr(t,e);return o=o.concat(i),this.sortNoSplitHintCardsArr(o),this.checkAllCardsCanPut(o,t)||this.addHintCardsCanAllPut(o,t,e),o},t.prototype.getHintArrFirstPut=function(t){var e=[],n=this._handCardsLogic.getCardsTableRealNumForKeyCountAndCardsIsProperty(t.noLiPaiCards),o={type:p.PokerCardsType.DanZhang,cards:[],maxCard:0},a=this._handCardsLogic.getSameCardsNoSplitArr(n,o,1),i=this._handCardsLogic.getSameCardsNoSplitArr(n,o,2),r=this._handCardsLogic.getSameCardsNoSplitArr(n,o,3),s=this.getLiPaiCanPutArr(t,o),c=this._handCardsLogic.getMaxZhaNoSplitArr(n,o,!1);this.sortNoSplitHintCardsArr(a),this.sortNoSplitHintCardsArr(i),this.sortNoSplitHintCardsArr(r),this.sortNoSplitHintCardsArr(s),this.sortNoSplitHintCardsArr(c);for(var l=[a,i,r],u=0;u<l.length;u++)for(var d=l[u],h=0;h<d.length;){var _=d[h];_.numWeight<=this.getCardWeight(10)?(e.push(_),d.splice(h,1)):h++}return e=(e=(e=(e=(e=e.concat(a)).concat(i)).concat(r)).concat(s)).concat(c),this.checkAllCardsCanPut(e,t)||this.addHintCardsCanAllPut(e,t,o),e},t.prototype.checkAllCardsCanPut=function(t,e){for(var n=e.noLiPaiCards.concat(e.liPaiArr),o=0;o<t.length;o++){var a=t[o];if(a.cards.length===n.length)return t.splice(o,1),t.unshift(a),!0}return!1},t.prototype.addHintCardsCanAllPut=function(t,e,n){if(!this.checkAllCardsCanPut(t,e)){var o=e.noLiPaiCards.concat(e.liPaiArr),a=this.canOutFromMaxComb(o,n);if(a&&a.type.id>0){var i=this.changeFCardType(a.type.id);t.unshift({cards:o,type:i})}}},t.prototype.sortNoSplitHintCardsArr=function(t){t.sort(function(t,e){var n=this.getCardsTypeWeight(t.type),o=this.getCardsTypeWeight(e.type);return n>o?3:n===o&&t.numWeight>e.numWeight?1:-1}.bind(this))},t.prototype.getLiPaiCanPutArr=function(t,e){var n,o,i=[];try{for(var r=a(["liPaiCardsLeftArr","liPaiCardsRightArr"]),s=r.next();!s.done;s=r.next())for(var c=s.value,l=t[c],u=0;u<l.length;u++){var d=l[u],p=this.canOutFromMaxComb(d,e);if(p){var h=this.changeFCardType(p.type.id),_=0,f=this._handCardsLogic.parseCardsInfo(d);f&&f.type==h&&(_=f.maxCard+1),i.push({cards:d,type:h,numWeight:_,liPaiRight:"liPaiCardsRightArr"===c})}}}catch(m){n={error:m}}finally{try{s&&!s.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}return i},t.prototype.getLiPaiAndOtherCards=function(t){for(var e=t.leftArr,n=t.centerArr,o=t.rightArr,a=[],i=0;i<n.length;i++)for(var r=n[i],s=0;s<r.length;s++)this.isFirstPutTuoCard(this.getCardNum(r[s]))||a.push(r[s]);for(var c=[],l=[],u=[],d=[],p=[e,o],h=0;h<p.length;h++){var _=p[h];for(i=0;i<_.length;i++){(r=_[i].concat()).splice(0,1);var f=1;if(0!==h){var m=this.testMaxCardComb(r);f=this.changeFCardType(m.type.id)}var g=[];for(s=0;s<r.length;s++)this.isFirstPutTuoCard(this.getCardNum(r[s]))||(-1==f?c.push(r[s]):g.push(r[s]));g.length>0&&(l=l.concat(g),0===h?u.push(g):d.push(g))}}return{liPaiArr:l,noLiPaiCards:a=a.concat(c),liPaiCardsLeftArr:u,liPaiCardsRightArr:d}},t.prototype.deleteHintListSameCards=function(t,e){for(var n=[t,e],o=0;o<n.length;o++)for(var a=n[o],i=1;i<=this.getListLength(a);i++){for(var r=a[i],s=[],c=[],l=1;l<=this.getListLength(r.cards);l++)s.push(r.cards[l]),c.push(this.getCardNum(r.cards[l]));r.cards=s,r.realNumArr=c.sort(function(t,e){return t-e})}for(i=1;i<=this.getListLength(t);i++){var u=(r=t[i]).realNumArr.join();for(var d in e){var h=e[d];if(u==h.realNumArr.join()||h.type==p.PokerCardsType.SanDaiEr&&h.maxCard==r.maxCard){delete e[d];break}}}},t.prototype.changeTableCardsToArr=function(t){for(var e=[],n=[],o=1;o<=this.getListLength(t);o++)e.push(t[o]),n.push(this.getCardNum(t[o]));return{cards:e,realNumArr:n}},t.prototype.getOtherPutHintsCards=function(t,e,n,o){var a=n.liPaiArr,i=n.noLiPaiCards,r=a.concat(i),s={};this.getFilterHintInfo(s,t,o,this._handCardsLogic.getNumCountTableRealNumForKey(i),!1),this.getFilterHintInfo(s,e,o,this._handCardsLogic.getNumCountTableRealNumForKey(r),!0);var c=this.getListLength(s);this.addFengRenPaiType(s,t,c),this.addFengRenPaiType(s,e,c);var l=[];for(var u in s){var d=s[u];for(var p in this.hintCardsArrSort(d),d){var h=d[p];delete h.levelCard,delete h.realNumArr,delete h.type,delete h.numWeight,l.push(h)}}return l},t.prototype.getFilterHintInfo=function(t,e,n,o,a){var i=0;for(var r in a&&(i=this.getListLength(t)),e){var s=e[r];s.levCardCount||(s.levCardCount=0);var c=this._hintCardsTypeFileFunc[""+n.type];if(c)for(var l=0;l<c.length;l++){var u=l+i;t["arr"+u]||(t["arr"+u]=[]);var d=c[l];if(d&&d.call(this,n.type,o,s)){s.power=this.getCardsTypeWeight(s.type),t["arr"+u].push(s),delete e[r];break}}}},t.prototype.addFengRenPaiType=function(t,e,n){for(var o in e){var a=e[o];t["arr"+n]||(t["arr"+n]=[]),a.power=this.getCardsTypeWeight(a.type),t["arr"+n].push(a),delete e[o]}},t.prototype.hintsCards_buChai=function(t,e,n){if(t!=n.type||n.levCardCount)return!1;var o=this._handCardsLogic.getNumCountTableRealNumForKey(n.cards),a=!0;for(var i in o)if(t==p.PokerCardsType.SanDaiEr){if(o[i]==e[i]&&3==o[i])return!0;a=!1}else o[i]!=e[i]&&(a=!1);return a},t.prototype.hintsBomb_buChai=function(t,e,n){if(!this.isLiPaiLeft(n.type)||n.levCardCount)return!1;var o=this._handCardsLogic.getNumCountTableRealNumForKey(n.cards);for(var a in o)if(o[a]==e[a])return!0;return!1},t.prototype.hintsCards_chaiLevel1=function(t,e,n){if(t!=n.type)return!1;var o=this._handCardsLogic.getNumCountTableRealNumForKey(n.cards),a=!0;for(var i in o)e[i]>3&&(a=!1);return a},t.prototype.hintsCards_chaiLevel2=function(t,e,n){if(t!=n.type)return!1;var o=this._handCardsLogic.getNumCountTableRealNumForKey(n.cards),a=!1;for(var i in o){if(t==p.PokerCardsType.SanDaiEr&&2!=this.getListLength(o))return!1;e[i]>3&&(a=!0)}return a},t.prototype.addMaxCard=function(t){var e=t.type,n=this._handCardsLogic.parseCardsInfo(t.cards);n&&n.type==e&&(t.maxCard=n.maxCard)},t.prototype.hintCardsArrSort=function(t){var e=this.getHandCardsLength(1),n=this;return t.sort(function(t,o){var a=t.power,i=o.power,r=0;return t.cards.length==e?-17:o.cards.length==e?-18:(t.levCardCount>o.levCardCount?r+=16:t.levCardCount<o.levCardCount&&(r-=8),a>i?r+=4:a==i?(t.numWeight||(t.numWeight=n.getNumWeight(t.maxCard+1)),o.numWeight||(o.numWeight=n.getNumWeight(o.maxCard+1)),t.numWeight>o.numWeight?r+=2:r-=2):r-=8,r)}),t},t.prototype.isCanPut=function(t,e){var n=this.canOutFromMaxComb(t,e);if(null==n)return!1;if(0==l.ToolLuaFunc.getListLength(n.cards))return!1;var o=[];for(var a in n.cards){var i=n.cards[a];o.push(i)}return n.cards=o,!!this.canOutByCardComb(n,e)},t.prototype.addAppendCards=function(t){this._handCardsLogic.appendCards(t)},t.prototype.getCardNum=function(t){return c.CardFunc.getCardNum(t)},t.prototype.getNumWeight=function(t){return t==e._cardNum.CN_Z?22:t==e._cardNum.CN_F?21:t==this._CardData.getLevelNum()?19:t},t.prototype.getCardWeight=function(t){return this.getNumWeight(this.getCardNum(t))},t.prototype.getCardColor=function(t){return c.CardFunc.getCardColor(t)},t.prototype.sendRecvCardsData=function(t){for(var e="",n="",o=t.leftArr,a=t.rightArr,i=0;i<o.length;i++)e+=";"+o[i].join(",")+",";for(i=0;i<a.length;i++)n+=";"+a[i].join(",")+",";var r=e+"#"+n;h.GameProxy.instance.sendRecvCardsData(r)},t.prototype.getJinGongCards=function(){for(var t=this.getHandCards(1).concat(),e=this.sortByWeight(t),n=[],o=0;o<e.length;o++){var a=e[o];if(this.getLevelCard()!==this.getCardNum(a)||this.getCardColor(a)!==p.PokerCardColor.HongXin)if(n.length>0){if(this.getCardNum(n[0])!==this.getCardNum(a))return n;n.push(a)}else n.push(a)}return n},t.prototype.getHuanGongCards=function(){for(var t=this.getHandCards(1).concat(),e=_.GameModel.instance.isHGParnter(),n=0;n<t.length;){var o=t[n],a=this.getCardNum(o);e&&(a>10||this.getLevelCard()===a)||this.isTuoCard(a)?t.splice(n,1):n++}return t},t.prototype.test=function(){var t=[p.PokerCards.HongXin_2,p.PokerCards.HongXin_K,p.PokerCards.HongXin_Q,p.PokerCards.HongXin_J,p.PokerCards.HongXin_10,p.PokerCards.HeiTao_A,p.PokerCards.HeiTao_2,p.PokerCards.HeiTao_3,p.PokerCards.HeiTao_4,p.PokerCards.HeiTao_5,p.PokerCards.MeiHua_9],e=this._handCardsLogic;e.appendCards(t);var n={};n.type=p.PokerCardsType.ShunZi,n.cards=[p.PokerCards.MeiHua_10,p.PokerCards.MeiHua_10],n.size=this.getListLength(n.cards),n.maxCard=p.PokerCardValues.Card_10;var o=e.getPlayCards(n,null);console.log("cardslist:"+JSON.stringify(o));for(var a=1;a<=this.getListLength(o);a++){for(var i="power "+r.PokerAlgorithm.GetValueName(o[a].maxCard)+" :",s=1;s<=this.getListLength(o[a].cards);s++)i=i+r.PokerAlgorithm.GetCardName(o[a].cards[s])+",";console.log(i)}},t._MAX_PLAYER=4,t._cardVaule=i.CardConstants.cards,t._cardNum=i.CardConstants.cardNums,e=o([jsClass("GuanDanCardLogic")],t)}();n.GuanDanCardLogic=f,cc._RF.pop()},{"../CommonLogic/CardLogic/DefaultPokerCardsConst":"DefaultPokerCardsConst","../CommonLogic/CardLogic/HandCardsLogic":"HandCardsLogic","../CommonLogic/CardLogic/PlayCardsParse":"PlayCardsParse","../CommonLogic/CardLogic/PokerAlgorithm":"PokerAlgorithm","../CommonLogic/CardRule/CardConstants":"CardConstants","../CommonLogic/CardRule/CardFunc":"CardFunc","../CommonLogic/CardRule/CardGamingData":"CardGamingData","../CommonLogic/CommonFunc/ToolLuaFunc":"ToolLuaFunc","./Model/GameModel":"GameModel","./Proxy/GameProxy":"GameProxy"}],GuanDanGameSettingUI:[function(t,e,n){"use strict";cc._RF.push(e,"4aabaTAAfpHqbpOd+pDKxo1","GuanDanGameSettingUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r,s=t("../../Framework/Manager/UIManager"),c=t("../../Framework/UI/FadeUI"),l=t("../Base/Module/Platform/PlatformManager"),u=t("./SettingModel"),d=t("./SettingUI/SettingUIBinder"),p=t("../../Framework/Manager/EventManager"),h=t("../Game/GuanDan/GameEvent"),_=t("../Base/View/Common/DialogUI"),f=t("../Base/Data/DataSound"),m=t("../Base/View/UIHelp"),g=t("../Base/Module/Platform/_IPlatform"),y=t("../Base/Module/BfAnalytics/BfasManager"),I=t("../Base/Module/BfAnalytics/DataPointID");(function(t){t[t.HORIZONTAL_CARD=0]="HORIZONTAL_CARD",t[t.VERTICAL_CARD=1]="VERTICAL_CARD"})(r||(r={}));var C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){d.default.bindAll()},e.getPkgName=function(){return"SettingUI"},e.getCompName=function(){return"GuanDanGameSettingPanel"},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return u.SettingModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initUI()},e.prototype.initListener=function(){this.view.m_Window.m_btnExit.onClick(this.onExitClick,this),this.view.m_Window.m_musicBtn.onClick(this.onBtnSwitchMusic,this),this.view.m_Window.m_soundBtn.onClick(this.onBtnSwitchSound,this),this.view.m_Window.m_fixBtn.onClick(this.onBtnFix,this),this.view.m_Window.m_btnCustomer.onClick(this.onBtnCustomer,this)},e.prototype.initUI=function(){var t=this.model.data;this.view.m_Window.m_musicBtn.selected=t.Music,this.view.m_Window.m_soundBtn.selected=t.Sound,this.view.m_Window.m_btnMaleDubbing.m_strTitle.text="\u7537",this.view.m_Window.m_btnFemaleDubbing.m_strTitle.text="\u5973";var e=this.model.getDubbingSex();this.refreshSexTitleColor(e),this.view.m_Window.m_CDubbing.selectedIndex=e,this.view.m_Window.m_CDubbing.on(fgui.Event.STATUS_CHANGED,this.onDubbingSexChanged,this),this.view.m_Window.m_btnHorizontalCard.m_strTitle.text="\u6a2a\u5411\u7406\u724c",this.view.m_Window.m_btnVerticalCard.m_strTitle.text="\u7ad6\u5411\u7406\u724c";var n=t.isLiPaiHeng?r.HORIZONTAL_CARD:r.VERTICAL_CARD;this.view.m_Window.m_CSelectCardDirection.selectedIndex=n,this.refreshSelectCardTitleColor(n),this.view.m_Window.m_CSelectCardDirection.on(fgui.Event.STATUS_CHANGED,this.onSelectCardChanged,this),l.PlatformManager.instance.supportAct.CUSTOMER||(this.view.m_Window.m_btnCustomer.visible=!1)},e.prototype.onBtnSwitchMusic=function(){this.model.setSettingData({Music:this.view.m_Window.m_musicBtn.selected}),this.model.updateMusicEnabled()},e.prototype.onBtnSwitchSound=function(){this.model.setSettingData({Sound:this.view.m_Window.m_soundBtn.selected}),this.model.updateSoundEnabled()},e.prototype.onBtnFix=function(){s.UIManager.instance.open(_.DialogUI).then(function(t){t.initConfirmCancel({content:"\u4fee\u590d\u5b8c\u6210\u540e,\u8bf7\u91cd\u65b0\u6253\u5f00\u5c0f\u6e38\u620f"}),t.confirmAction=function(){l.PlatformManager.instance.platform.fix(!0)}})},e.prototype.onBtnCustomer=function(){y.BfasManager.instance.sendEvt(I.CustomerPointID.GAME_SETUI_CUSTOMER),m.UIHelp.instance.openCustomerServiceLink(g.CustomerRequestTypeEnum.CUSTOMER_SERVICE)},e.prototype.onExitClick=function(){this.model.saveSetingData(),t.prototype.onExitClick.call(this)},e.prototype.onDubbingSexChanged=function(){var t=Number(this.view.m_Window.m_CDubbing.selectedPage);this.model.changeDubbingSex(t),this.refreshSexTitleColor(t)},e.prototype.onSelectCardChanged=function(){var t=Number(this.view.m_Window.m_CSelectCardDirection.selectedPage);this.refreshSelectCardTitleColor(t),r.HORIZONTAL_CARD===t?(this.model.setSettingData({isLiPaiHeng:!0}),p.EventManager.instance.emit(h.GameEvent.SETTING_CHANGE_LAYOUT,!0)):(this.model.setSettingData({isLiPaiHeng:!1}),p.EventManager.instance.emit(h.GameEvent.SETTING_CHANGE_LAYOUT,!1))},e.prototype.refreshSexTitleColor=function(t){var e=cc.Color.BLACK;e=cc.Color.fromHEX(e,"#DF7530");var n=cc.Color.BLACK;n=cc.Color.fromHEX(n,"#995600"),f.SexEnum.FEMALE===t?(this.view.m_Window.m_btnMaleDubbing.m_strTitle.color=n,this.view.m_Window.m_btnFemaleDubbing.m_strTitle.color=e):(this.view.m_Window.m_btnMaleDubbing.m_strTitle.color=e,this.view.m_Window.m_btnFemaleDubbing.m_strTitle.color=n)},e.prototype.refreshSelectCardTitleColor=function(t){var e=cc.Color.BLACK;e=cc.Color.fromHEX(e,"#DF7530");var n=cc.Color.BLACK;n=cc.Color.fromHEX(n,"#995600"),r.HORIZONTAL_CARD===t?(this.view.m_Window.m_btnHorizontalCard.m_strTitle.color=e,this.view.m_Window.m_btnVerticalCard.m_strTitle.color=n):(this.view.m_Window.m_btnHorizontalCard.m_strTitle.color=n,this.view.m_Window.m_btnVerticalCard.m_strTitle.color=e)},i([jsClass],e)}(c.FadeUI);n.default=C,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataSound":"DataSound","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Platform/PlatformManager":"PlatformManager","../Base/Module/Platform/_IPlatform":"_IPlatform","../Base/View/Common/DialogUI":"DialogUI","../Base/View/UIHelp":"UIHelp","../Game/GuanDan/GameEvent":"GameEvent","./SettingModel":"SettingModel","./SettingUI/SettingUIBinder":"SettingUIBinder"}],GuanDanGameUserInfoUI:[function(t,e,n){"use strict";cc._RF.push(e,"edf50BNbG5Hu7FQPbcWXluR","GuanDanGameUserInfoUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GuanDanGameUserInfoUI=void 0;var r=t("../../Framework/Manager/EventManager"),s=t("../Base/Data/DataEvent"),c=t("./UserInfoUI/UserInfoUIBinder"),l=t("./UserInfoModel"),u=t("../../Framework/UI/FadeUI"),d=t("../Base/Data/DataConstant"),p=t("../Base/Data/DataBfConfig"),h=t("../Game/GuanDan/Proxy/GameTableProxy"),_=t("../Game/GuanDan/GameEvent"),f=t("../Base/Module/Room/RoomModel"),m=t("../Game/Common/GameCommonModel"),g=t("../Game/GuanDan/Model/GameModel"),y=t("../Base/Data/DataProps"),I=t("../Base/Utils/UtilView"),C=t("../Game/Common/PlayerInfoModel"),M=t("../Base/Utils/UtilString"),v=t("../Base/View/UIHelp"),E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._closeTime=5,e._initCloseTime=5,e._userInfo=null,e}return a(e,t),e.uiBind=function(){c.default.bindAll()},Object.defineProperty(e,"willClearOnDestroy",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.getPkgName=function(){return"UserInfoUI"},e.getCompName=function(){return"GuanDanGameUserInfoMainPanel"},Object.defineProperty(e.prototype,"model",{get:function(){return l.UserInfoModel.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userInfo",{get:function(){return this._userInfo},enumerable:!1,configurable:!0}),e.prototype.setView=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this._view=t;var o=e[0];this._userInfo=o,this._userInfo.seat=o.seat},e.prototype.onLoad=function(){this.initListener(),this.initUI(),this.resetUIPos(),this.resetCloseTime(),this.closeUITimeScheduler()},e.prototype.initListener=function(){r.EventManager.instance.on(_.GameEvent.REFRESH_PROP_UI,this,this.updateUserInfoUI),r.EventManager.instance.on(_.GameEvent.PLAYER_GLOD_CHANGE,this,this.updateUserInfoUI),this.view.m_btnExit.onClick(this.onExitClick,this)},e.prototype.initUI=function(){this.adapterUI(),this.updateUserInfoUI(),this.onUserInfoUpdate(),this.onUserGameDataUpdate()},e.prototype.resetUIPos=function(){var t=this.userInfo.seat,e=cc.size(0,0),n=this.view["m_seat"+t].node,o=n.getPosition(),a=this.view.m_Window.node;C.LocalSeatEnum.LEFT===t?this.view.m_Window.setPosition(o.x+n.width,e.height-o.y-.2*a.height):C.LocalSeatEnum.SELF===t?this.view.m_Window.setPosition(o.x+n.width,e.height-a.height-o.y+.1*a.height):C.LocalSeatEnum.RIGHT===t?this.view.m_Window.setPosition(o.x-a.width,e.height-o.y-.2*a.height):this.view.m_Window.setPosition(o.x+.5*n.width-.5*a.width,e.height-o.y+n.height)},e.prototype.resetCloseTime=function(){this._closeTime=this._initCloseTime},e.prototype.closeUITimeScheduler=function(){var t=this;cc.tween(this.node).repeatForever(cc.tween().delay(1).call(function(){t._closeTime<=0?t.onExitClick():--t._closeTime})).start()},e.prototype.updateUserInfoUI=function(){this.onUserCurrencyUpdate();var t=this.view.m_Window.m_list;t.on(fgui.Event.CLICK_ITEM,this.onClickItem,this),t.itemRenderer=this.renderListItem.bind(this),t.setVirtual(),t.numItems=y.DataProps.instance.getCharmPropCount()},e.prototype.adapterUI=function(){I.UtilView.isFullScreen()&&(this.view.m_seat0.node.x+=d.DataConstant.ADAPTER_WIDTH_VALUE,this.view.m_seat1.node.x+=d.DataConstant.ADAPTER_WIDTH_VALUE,this.view.m_seat2.node.x-=d.DataConstant.ADAPTER_WIDTH_VALUE)},e.prototype.onUserInfoUpdate=function(){this.view.m_Window.m_head.m_avatarPic.url=C.PlayerInfoModel.instance.getHead(this.userInfo.numid||this.userInfo.numID),this.view.m_Window.m_name.text="\u6635\u79f0:"+v.UIHelp.formatNicknameL(this.userInfo.nickname),this.view.m_Window.m_account.text="\u8d26\u53f7:"+m.GameCommonModel.instance.dealRobotNumid(this.userInfo.numid||this.userInfo.numID).toString()},e.prototype.onUserGameDataUpdate=function(){var t=this.userInfo,e=t.total_win||t.win,n=t.total_lose||t.lose,o=t.total_draw||t.draw,a=t.total_escape||t.escape;e||(e=0),n||(n=0),o||(o=0),a||(a=0);var i=e+n+o+a,r=i?Math.floor(e/i*1e4)/100+"%":"0%",s=i?Math.floor(a/i*1e4)/100+"%":"0%";this.view.m_Window.m_gameCount.text=""+i,this.view.m_Window.m_gameWinRate.text=""+r,this.view.m_Window.m_escapeRate.text=""+s},e.prototype.onUserCurrencyUpdate=function(){var t=this.userInfo.gamegold||this.userInfo.gold;f.ClubShowFlags.CLUBS_LIST===m.GameCommonModel.instance.getRoomType()&&(t=this.userInfo.playscore),this.userInfo.numID===l.UserInfoModel.instance.userInfo.numID&&(t=this.userInfo.gold||this.userInfo.gamegold),this.view.m_Window.m_gold.text=M.UtilString.getCurrencyShortString(t),this.view.m_Window.m_exp.text=""+Number(this.userInfo.charm)},e.prototype.onClickItem=function(t){if(this.resetCloseTime(),g.GameModel.instance.isQueueOtherPlayers())r.EventManager.instance.emit(s.DataEvent.ToastData,"\u6682\u65f6\u65e0\u6cd5\u4f7f\u7528\uff0c\u5f00\u5c40\u5373\u53ef\u6062\u590d!");else{var e=t.data,n={propID:e.id,fromAreaID:p.DataBfConfig.areaID,toAreaID:p.DataBfConfig.areaID,fromNumID:l.UserInfoModel.instance.userInfo.numID,toNumID:this.userInfo.numid||this.userInfo.numID,errorCode:0};this.model.getPropCount(n.propID)>0||this.isCanUseProp(e.buyCoin)?h.GameTableProxy.instance.sendProp(n):r.EventManager.instance.emit(s.DataEvent.ToastData,"\u60a8\u7684\u91d1\u5e01\u4e0d\u6ee1\u8db3\u8d2d\u4e70\u6761\u4ef6!")}},e.prototype.renderListItem=function(t,e){var n=y.DataProps.instance.getCharmPropConfigInfoByIndex(t),o=e.asCom;this.setPropExpText(o.m_xinCount,n.addCharm);var a=this.model.getPropCount(n.id);0===a?(o.m_reddi.visible=!1,o.m_toolCount.visible=!1):o.m_toolCount.text=""+a,o.m_icon.asLoader.url=v.UIHelp.getPropIcon(n.type,n.res),e.data=n},e.prototype.setPropExpText=function(t,e){t.color=e>0?cc.color(244,69,26):cc.color(36,155,41),t.text=e>0?"+"+e:e+""},e.prototype.isCanUseProp=function(t){var e=l.UserInfoModel.instance.userInfo.gold,n=m.GameCommonModel.instance.getSubid(),o=f.RoomModel.instance.getPlazaInfoBySubID(n),a=0;if(o){var i=o.usePropSrLimit||0;a=i>0?i:2*(o.minSr||0)}if(a>0){if(e>t&&e>=a)return!0}else if(e>t)return!0;return!1},i([jsClass],e)}(u.FadeUI);n.GuanDanGameUserInfoUI=E,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataConstant":"DataConstant","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataProps":"DataProps","../Base/Module/Room/RoomModel":"RoomModel","../Base/Utils/UtilString":"UtilString","../Base/Utils/UtilView":"UtilView","../Base/View/UIHelp":"UIHelp","../Game/Common/GameCommonModel":"GameCommonModel","../Game/Common/PlayerInfoModel":"PlayerInfoModel","../Game/GuanDan/GameEvent":"GameEvent","../Game/GuanDan/Model/GameModel":"GameModel","../Game/GuanDan/Proxy/GameTableProxy":"GameTableProxy","./UserInfoModel":"UserInfoModel","./UserInfoUI/UserInfoUIBinder":"UserInfoUIBinder"}],GuideDescUI:[function(t,e,n){"use strict";cc._RF.push(e,"cf1e2lV4RBOVI0+w3cccjB/","GuideDescUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GuideDescUI=n.ArrowDirectionEnum=void 0;var r,s,c=t("../../../Framework/Manager/EventManager"),l=t("../../../Framework/UI/BaseUI"),u=t("../../Base/Data/DatazOrder"),d=t("../GuanDan/GameEvent");(function(t){t[t.NONE=0]="NONE",t[t.TOP=1]="TOP",t[t.BOTTOM=2]="BOTTOM",t[t.RIGHT=3]="RIGHT"})(r=n.ArrowDirectionEnum||(n.ArrowDirectionEnum={})),function(t){t[t.BOTTOM=0]="BOTTOM",t[t.TOP=1]="TOP"}(s||(s={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._guideDescUIPos=null,e._arrowTopPos=null,e._arrowBottomPos=null,e._arrowRightPos=null,e}return a(e,t),Object.defineProperty(e,"uiType",{get:function(){return l.UIType.ScenePart},enumerable:!1,configurable:!0}),e.getPkgName=function(){return"GuideUI"},e.getCompName=function(){return"GuideDescUI"},Object.defineProperty(e,"sortingOrder",{get:function(){return u.DataZOrder.GuideDescUI},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"descCompoent",{get:function(){return this.view.m_descComponent},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initUI()},e.prototype.initListener=function(){c.EventManager.instance.on(d.GameEvent.GUIDE_SHOW_DESC,this,this.onGuideDesc),c.EventManager.instance.on(d.GameEvent.GUIDE_SHOW_NO_TOUCH_UI,this,this.showBlackUI)},e.prototype.initUI=function(){this.showBlackUI(!1),this.showDescUI(!1)},e.prototype.showBlackUI=function(t){this.view.m_black.visible=!!t},e.prototype.showDescUI=function(t){this.descCompoent.visible=!!t},e.prototype.onGuideDesc=function(t){t?(this.showDescUI(!0),this.showBlackUI(!1),this.descCompoent.m_desctxt.text=t.desc,t.descPos&&(this._guideDescUIPos||(this._guideDescUIPos=cc.v2(t.descPos.x,t.descPos.y)),this.view.setPosition(this._guideDescUIPos.x+t.descPos.x,this._guideDescUIPos.y+t.descPos.y)),this.showArrow(t.direction,t.arrowPos),this.view.m_c_pos.selectedIndex=t.direction===r.BOTTOM?s.TOP:s.BOTTOM):this.showDescUI(!1)},e.prototype.showArrow=function(t,e){this.descCompoent.m_jiantoubottom.visible=!1,this.descCompoent.m_jiantoutop.visible=!1,this.descCompoent.m_jiantouright.visible=!1;var n=null,o=cc.v2(0,0);r.TOP===t?(n=this.descCompoent.m_jiantoutop,this._arrowTopPos||(this._arrowTopPos=cc.v2(n.x,n.y)),o=this._arrowTopPos):r.BOTTOM===t?(n=this.descCompoent.m_jiantoubottom,this._arrowBottomPos||(this._arrowBottomPos=cc.v2(n.x,n.y)),o=this._arrowBottomPos):r.RIGHT===t&&(n=this.descCompoent.m_jiantouright,this._arrowRightPos||(this._arrowRightPos=cc.v2(n.x,n.y)),o=this._arrowRightPos),n&&(n.visible=!0,e&&n.setPosition(o.x+e.x,o.y+e.y))},i([jsClass],e)}(l.BaseUI);n.GuideDescUI=p,cc._RF.pop()},{"../../../Framework/Manager/EventManager":"EventManager","../../../Framework/UI/BaseUI":"BaseUI","../../Base/Data/DatazOrder":"DatazOrder","../GuanDan/GameEvent":"GameEvent"}],GuideUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"275b41/JC5Mb5qp8wkXPSrM","GuideUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./GuideUI_GuideUI"),a=t("./GuideUI_GuideDescUI"),i=t("./GuideUI_DescComponent"),r=t("./GuideUI_MainPanel"),s=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default)},t}();n.default=s,cc._RF.pop()},{"./GuideUI_DescComponent":"GuideUI_DescComponent","./GuideUI_GuideDescUI":"GuideUI_GuideDescUI","./GuideUI_GuideUI":"GuideUI_GuideUI","./GuideUI_MainPanel":"GuideUI_MainPanel"}],GuideUI_DescComponent:[function(t,e,n){"use strict";cc._RF.push(e,"41cf9vPdEpPG4U39d9Zf6i2","GuideUI_DescComponent");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GuideUI","DescComponent")},e.prototype.onConstruct=function(){this.m_descImg=this.getChildAt(0),this.m_jiantoutop=this.getChildAt(1),this.m_jiantouright=this.getChildAt(2),this.m_jiantoubottom=this.getChildAt(3),this.m_desctxt=this.getChildAt(4)},e.URL="ui://fkifwpetpdprb",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GuideUI_GuideDescUI:[function(t,e,n){"use strict";cc._RF.push(e,"7115fD1F/1EFpJtdwWndI2Y","GuideUI_GuideDescUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GuideUI","GuideDescUI")},e.prototype.onConstruct=function(){this.m_c_pos=this.getControllerAt(0),this.m_black=this.getChildAt(0),this.m_descComponent=this.getChildAt(1)},e.URL="ui://fkifwpetpdpr9",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GuideUI_GuideUI:[function(t,e,n){"use strict";cc._RF.push(e,"f9559o9EpdMaK8DKhyeT4TO","GuideUI_GuideUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GuideUI","GuideUI")},e.prototype.onConstruct=function(){this.m_black=this.getChildAt(0),this.m_btnmask=this.getChildAt(1),this.m_rectMask=this.getChildAt(2),this.m_rectImg=this.getChildAt(3)},e.URL="ui://fkifwpetegml0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GuideUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"64226tGlbNHV7EDGxYCPwju","GuideUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("GuideUI","MainPanel")},e.prototype.onConstruct=function(){this.m_GuideUI=this.getChildAt(0),this.m_handPrefabParent=this.getChildAt(1)},e.URL="ui://fkifwpettcrb8",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],GuideUI:[function(t,e,n){"use strict";cc._RF.push(e,"cf8f2FDQy9A2p8ZQJAflU2q","GuideUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GuideUI=n.GuideShowUIEnum=void 0;var r,s=t("../../../Framework/Manager/EventManager"),c=t("../../../Framework/UI/BaseUI"),l=t("../../Base/Data/DatazOrder"),u=t("../../Base/Data/DataSpineAni"),d=t("../../Base/Utils/UtilCC"),p=t("../GuanDan/GameEvent");(function(t){t[t.GUIDE_BTN=0]="GUIDE_BTN",t[t.GUIDE_RECT=1]="GUIDE_RECT",t[t.CUSTOM_MASK=2]="CUSTOM_MASK"})(r=n.GuideShowUIEnum||(n.GuideShowUIEnum={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._handSpineNode=null,e}return a(e,t),Object.defineProperty(e,"uiType",{get:function(){return c.UIType.ScenePart},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sortingOrder",{get:function(){return l.DataZOrder.GuideUI},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"guideView",{get:function(){return this.view.m_GuideUI},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initUI()},e.prototype.initListener=function(){s.EventManager.instance.on(p.GameEvent.NEW_PLAYER_GUIDE,this,this.onDispatchGuideUI)},e.prototype.initUI=function(){this.view.visible=!1,this.initHandSpine()},e.prototype.initHandSpine=function(){var t=this;this._handSpineNode||d.UtilCC.instantiatePrefab(u.DataSpineAniPath.ANI_GUIDE_HAND,function(e){t._handSpineNode=e,e.getComponent(sp.Skeleton).setAnimation(0,"ShouDianJi",!0)},this.view.m_handPrefabParent.node)},e.prototype.onDispatchGuideUI=function(t){if(t){var e=t.guideType;this.guideView.visible=!0,e===r.GUIDE_BTN?(this.guideView.visible=!1,this.guideBtn(t)):e===r.GUIDE_RECT?this.guideRect(t):e===r.CUSTOM_MASK&&this.guideSelfRect(t)}else this.view.visible=!1},e.prototype.hideGComponent=function(){this.guideView.m_btnmask.visible=!1,this.guideView.m_rectMask.visible=!1,this.guideView.m_rectImg.visible=!1},e.prototype.showHandSpine=function(t,e,n){t=!!t,this.view.m_handPrefabParent.visible=t,t&&(this.view.m_handPrefabParent.x=e,this.view.m_handPrefabParent.y=n)},e.prototype.guideBtn=function(t){this.view.visible=!0;var e=this.guideView.m_btnmask,n=t.gComponent.localToGlobal(0,0),o=this.view.globalToLocal(n.x,n.y),a=o.x,i=o.y;e.x=a,e.y=i,this.hideGComponent(),this.showHandSpine(t.showHandSpine,a+.5*e.width,i+.5*e.height)},e.prototype.guideRect=function(t){this.view.visible=!0;var e=this.guideView.m_rectMask;e.setSize(79,79),this.guideView.asCom.setMask(e,!0),this.guideView.asCom._customMask.alphaThreshold=.3;var n=t.gComponent.localToGlobal(0,0),o=this.view.globalToLocal(n.x,n.y),a=o.x+.25*e.width,i=o.y;e.x=a,e.y=i;var r=this.guideView.m_rectImg;r.x=a,r.y=i,this.hideGComponent(),this.showHandSpine(t.showHandSpine,a,i),this.guideView.m_rectImg.setSize(100,100),this.guideView.m_rectImg.visible=!0},e.prototype.guideSelfRect=function(t){this.view.visible=!0;var e=t.gComponent,n=this.guideView.m_rectMask;n.setSize(e.width,e.height),this.guideView.asCom.setMask(n,!0),this.guideView.asCom._customMask.alphaThreshold=.3;var o=t.gComponent.localToGlobal(0,0),a=this.view.globalToLocal(o.x,o.y),i=a.x,r=a.y;n.x=i,n.y=r;var s=this.guideView.m_rectImg;s.x=i+.5,s.y=r,this.hideGComponent(),this.showHandSpine(t.showHandSpine,i,r),this.guideView.m_rectImg.setSize(e.width+20,e.height+20),this.guideView.m_rectImg.visible=!0},i([jsClass],e)}(c.BaseUI);n.GuideUI=h,cc._RF.pop()},{"../../../Framework/Manager/EventManager":"EventManager","../../../Framework/UI/BaseUI":"BaseUI","../../Base/Data/DataSpineAni":"DataSpineAni","../../Base/Data/DatazOrder":"DatazOrder","../../Base/Utils/UtilCC":"UtilCC","../GuanDan/GameEvent":"GameEvent"}],HallGroundModel:[function(t,e,n){"use strict";cc._RF.push(e,"e8b06S+ovBDGoyilknW/11/","HallGroundModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.HallGroundModel=n.BankruptSouceEnum=n.GroundItemLine=void 0;var i,r=t("../../Framework/Manager/UIManager"),s=t("../../Framework/Model/BaseModel"),c=t("../../Framework/Root/ModelRoot"),l=t("../Bankrupt/BankruptModel"),u=t("../Base/Data/DataLocalStorageKey"),d=t("../Base/Module/BfAnalytics/BfasManager"),p=t("../Base/Module/BfAnalytics/DataPointID"),h=t("../Base/View/UIHelp"),_=t("../Game/GuanDan/GameUI"),f=t("../Game/GuanDan/Model/GameModel"),m=t("../Base/Module/Room/ClubConfig"),g=t("../Base/Module/Room/RoomModel"),y=t("../UserInfo/UserInfoModel"),I=t("../FriendTeam/FriendTeamModel");(function(t){t[t.LINE_1=1]="LINE_1",t[t.LINE_2=2]="LINE_2"})(n.GroundItemLine||(n.GroundItemLine={})),function(t){t[t.HALL_QUICKSTART=0]="HALL_QUICKSTART",t[t.PLAZA_GAMEICON=1]="PLAZA_GAMEICON",t[t.PLAZA_QUICKSTART=2]="PLAZA_QUICKSTART",t[t.IN_GAME=3]="IN_GAME"}(i=n.BankruptSouceEnum||(n.BankruptSouceEnum={}));var C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return c.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.getGroundInfo=function(t,e,n,o){var a=this,i=[],r=g.RoomModel.instance.getPlazaConfig(t,g.ClubShowFlags.CLUBS_LIST,o,n);if(void 0!==e&&r){var s=[];r.forEach(function(t){t.line===e&&s.push(a.convertDataFormat(t))}),i=s}return i},e.prototype.convertDataFormat=function(t){var e={};return e.gameID=t.gameID,e.groundItemLine=t.line,e.clubID=t.clubID,e.baseScore=t.base,e.fourBomb=t.multType>0,e.name=t.name,e.level=t.iconID,e.maxScore=t.maxSr,e.minScore=t.minSr,e.partnerMax=t.partnerMax,e.partnerService=t.partnerService,e.passType=t.passLevel,e.subID=t.subID,e.taskLevel=t.taskLevel,e},e.prototype.getRoomOnlineCount=function(t){var e=g.RoomModel.instance.getUserCount(t);return void 0===typeof e?0:e},e.prototype.getUserCoin=function(){return Number(y.UserInfoModel.instance.userInfo.gold)||0},e.prototype.reqEnterGame=function(t,e,n,o,a){var r=this,s=y.UserInfoModel.instance.getUserLocation();if(!s||!s.subid&&m.ClubModeEnum.FRIEND_ROOM!==s.clubmode){var c=y.UserInfoModel.instance.getPartnerLocation();if(c&&c.appid)g.RoomModel.instance.doEnterGameInFriendTeam(t,e,n,o,a);else{var _=g.RoomModel.instance.getPlazaGoldArea(e);if(_){var f=this.getUserCoin();if(f>=_.min&&(f<=_.max||0===_.max))this.normalEnterGame(e,t,o,a);else if(f<_.min&&f<l.BankruptModel.instance.getTriggerBankruptLine()){h.UIHelp.instance.hideLoading();var I=p.ActivityPointID.bankruptScene,C={time:u.DataLocalStorage.getBankruptTimes()};i.HALL_QUICKSTART===n?d.BfasManager.instance.evt(I.triggerInHallQuickStart.eventid,C,!0,I.triggerInHallQuickStart.eventName):i.PLAZA_GAMEICON===n?d.BfasManager.instance.evt(I.triggerInPlazaGameICon.eventid,C,!0,I.triggerInPlazaGameICon.eventName):i.PLAZA_QUICKSTART===n&&d.BfasManager.instance.evt(I.triggerInPlazaQuickStart.eventid,C,!0,I.triggerInPlazaQuickStart.eventName),l.BankruptModel.instance.showBankrupt()}else{var M=null,v="";t?(M=g.RoomModel.instance.getRecRoomInfoByGameID(t,o),v=g.RoomModel.instance.getRoomDesc(M.subID)):(M=g.RoomModel.instance.getRecRoomInfo(),v=g.RoomModel.instance.getRoomDesc(M.subID));var E;E=f<_.min?"\u4f60\u7684\u91d1\u5e01\u4e0d\u591f\u5566,\u53ef\u4ee5\u53bb ["+v+"] \u8fdb\u884c\u6e38\u620f\u5662~":"\u4f60\u7684\u91d1\u5e01\u592a\u591a\u5566,\u5feb\u53bb ["+v+"] \u8fdb\u884c\u6e38\u620f\u5427~",h.UIHelp.instance.hideLoading(),h.UIHelp.instance.showDialogConfirmCancel(E,function(e){e&&r.normalEnterGame(M.subID,t,o,a)})}}}}else g.RoomModel.instance.doEnterGameInRoom()},e.prototype.normalEnterGame=function(t,e,n,o){h.UIHelp.instance.hideLoading();var a=this.checkPopMultCritGuide(t),i=this.checkPopBroadMultGuide(t);if(a&&i)this.gotoGameBothMultGuideUI(t);else if(a)this.gotoGameMultCritGuideUI(t);else if(i)this.gotoGameBroadMultGuideUI(t);else{var r=g.RoomModel.instance.getPlazaInfoBySubID(t,e),s=r&&r.partnerService>0;if(console.log("jp-log normalEnterGame: ",t,e,n,o,y.UserInfoModel.instance.isGoldInlineTeam(),r),o&&s&&y.UserInfoModel.instance.isGoldInlineTeam()){var c=n?I.SelectPlayTypeEnum.MULT:I.SelectPlayTypeEnum.CLASSIC_GOLD;return void I.FriendTeamModel.instance.createTeam(c,r.subID,I.FTTeamTypeEnum.GOLD_INLINE,!0)}h.UIHelp.instance.showLoading("\u52a0\u5165\u623f\u95f4\u4e2d",5),g.RoomModel.instance.reqJoinRoom(t)}},e.prototype.reqEnterGameFromTeam=function(t,e,n,o){var a=y.UserInfoModel.instance.getUserLocation();if(!a||!a.subid&&m.ClubModeEnum.FRIEND_ROOM!==a.clubmode){var i=y.UserInfoModel.instance.getPartnerLocation();i&&i.appid?g.RoomModel.instance.doEnterGameInFriendTeam(t,e,null,n):g.RoomModel.instance.getPlazaGoldArea(e)&&g.RoomModel.instance.reqJoinRoom(e,o)}else g.RoomModel.instance.doEnterGameInRoom()},e.prototype.checkIsFirstCountToMultPlaza=function(t){return!(!g.RoomModel.instance.checkIsCallMultStep(t)||u.DataLocalStorage.getGameMultGuidePopCount()>0||(u.DataLocalStorage.addGameMultGuidePopCount(),0))},e.prototype.checkIsFirstCountToMixPassAPlaza=function(t){return!(!g.RoomModel.instance.checkIsMixPassARoom(t)||u.DataLocalStorage.getGameMixPassAGuidePopCount()>0||(u.DataLocalStorage.addGameMixPassAGuidePopCount(),0))},e.prototype.checkPopMultCritGuide=function(t){return!!g.RoomModel.instance.checkIsMultCrit(t)&&u.DataLocalStorage.isCanPopActWithDayCount(u.LocalStorageKey.MULT_CRIT_GUIDE_DAY,u.LocalStorageKey.MULT_CRIT_GUIDE_POP_COUNT,u.LocalStorageKey.MULT_CRIT_GUIDE_DAY_COUNT,1,3)},e.prototype.checkPopBroadMultGuide=function(t){return!!g.RoomModel.instance.checkIsBroadMult(t)&&u.DataLocalStorage.isCanPopActWithDayCount(u.LocalStorageKey.BROAD_MULT_GUIDE_DAY,u.LocalStorageKey.BROAD_MULT_GUIDE_POP_COUNT,u.LocalStorageKey.BROAD_MULT_GUIDE_DAY_COUNT,1,3)},e.prototype.gotoGameMultGuideUI=function(t){f.GameModel.instance.setGuideState(f.GuideTypeEnum.MULT_GUIDE),f.GameModel.instance.setCurGuidePlazaSubID(t),r.UIManager.instance.gotoScene(_.GameUI)},e.prototype.gotoGameMixPassAGuideUI=function(t){f.GameModel.instance.setGuideState(f.GuideTypeEnum.MIX_PASSA),f.GameModel.instance.setCurGuidePlazaSubID(t),r.UIManager.instance.gotoScene(_.GameUI)},e.prototype.gotoGameBothMultGuideUI=function(t){f.GameModel.instance.setGuideState(f.GuideTypeEnum.BOTH_NEW_MULT),f.GameModel.instance.setCurGuidePlazaSubID(t),r.UIManager.instance.gotoScene(_.GameUI)},e.prototype.gotoGameMultCritGuideUI=function(t){f.GameModel.instance.setGuideState(f.GuideTypeEnum.MULT_CRIT),f.GameModel.instance.setCurGuidePlazaSubID(t),r.UIManager.instance.gotoScene(_.GameUI)},e.prototype.gotoGameBroadMultGuideUI=function(t){f.GameModel.instance.setGuideState(f.GuideTypeEnum.BROAD_MULT),f.GameModel.instance.setCurGuidePlazaSubID(t),r.UIManager.instance.gotoScene(_.GameUI)},e}(s.BaseModel);n.HallGroundModel=C,cc.systemEvent.once("GameRoot.inited",function(){c.ModelRoot.instance.add(C)}),cc._RF.pop()},{"../../Framework/Manager/UIManager":"UIManager","../../Framework/Model/BaseModel":"BaseModel","../../Framework/Root/ModelRoot":"ModelRoot","../Bankrupt/BankruptModel":"BankruptModel","../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Room/ClubConfig":"ClubConfig","../Base/Module/Room/RoomModel":"RoomModel","../Base/View/UIHelp":"UIHelp","../FriendTeam/FriendTeamModel":"FriendTeamModel","../Game/GuanDan/GameUI":"GameUI","../Game/GuanDan/Model/GameModel":"GameModel","../UserInfo/UserInfoModel":"UserInfoModel"}],HallGroundUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"015a5iR78lERK0rR2gBSQU9","HallGroundUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./HallGroundUI_BtnStart"),a=t("./HallGroundUI_MainPanel"),i=t("./HallGroundUI_ButtonGround"),r=t("./HallGroundUI_ButtonGroundList"),s=t("./HallGroundUI_GroundTypeBtn"),c=t("./HallGroundUI_GroundTypeList"),l=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default)},t}();n.default=l,cc._RF.pop()},{"./HallGroundUI_BtnStart":"HallGroundUI_BtnStart","./HallGroundUI_ButtonGround":"HallGroundUI_ButtonGround","./HallGroundUI_ButtonGroundList":"HallGroundUI_ButtonGroundList","./HallGroundUI_GroundTypeBtn":"HallGroundUI_GroundTypeBtn","./HallGroundUI_GroundTypeList":"HallGroundUI_GroundTypeList","./HallGroundUI_MainPanel":"HallGroundUI_MainPanel"}],HallGroundUI_BtnStart:[function(t,e,n){"use strict";cc._RF.push(e,"fdefc15DNNC6JnSKdBtpFEB","HallGroundUI_BtnStart");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallGroundUI","BtnStart")},e.prototype.onConstruct=function(){this.m_ani=this.getChildAt(0)},e.URL="ui://gw8cpwc4e9ne1k",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],HallGroundUI_ButtonGroundList:[function(t,e,n){"use strict";cc._RF.push(e,"86fc96sHARHIYSfI2nzLBsO","HallGroundUI_ButtonGroundList");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallGroundUI","ButtonGroundList")},e.prototype.onConstruct=function(){this.m_normal_0=this.getChildAt(0),this.m_normal_1=this.getChildAt(1),this.m_normal_2=this.getChildAt(2),this.m_normal_3=this.getChildAt(3),this.m_normal_4=this.getChildAt(4),this.m_special_0=this.getChildAt(5),this.m_special_1=this.getChildAt(6),this.m_special_2=this.getChildAt(7),this.m_special_3=this.getChildAt(8),this.m_special_4=this.getChildAt(9),this.m_ani_groundBtns=this.getTransitionAt(0),this.m_ani_Hall=this.getTransitionAt(1),this.m_ani_chose=this.getTransitionAt(2)},e.URL="ui://gw8cpwc4ga5v2",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],HallGroundUI_ButtonGround:[function(t,e,n){"use strict";cc._RF.push(e,"5f17el30VtC7rwXANNMJhAi","HallGroundUI_ButtonGround");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallGroundUI","ButtonGround")},e.prototype.onConstruct=function(){this.m_cRoomLevel=this.getControllerAt(0),this.m_cTagLogo=this.getControllerAt(1),this.m_cRecAniState=this.getControllerAt(2),this.m_cMixPassA=this.getControllerAt(3),this.m_normal=this.getChildAt(0),this.m_otherIcon=this.getChildAt(1),this.m_ani_select=this.getChildAt(2),this.m_imgTagPass=this.getChildAt(3),this.m_txtBaseScore=this.getChildAt(4),this.m_img_sports_hint=this.getChildAt(5),this.m_loadCoin=this.getChildAt(6),this.m_txtLimitScore=this.getChildAt(7),this.m_txtOnlineCount=this.getChildAt(8)},e.URL="ui://gw8cpwc4ga5v1",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],HallGroundUI_GroundTypeBtn:[function(t,e,n){"use strict";cc._RF.push(e,"85c65OAT6dEDZsOTH6bJk7G","HallGroundUI_GroundTypeBtn");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallGroundUI","GroundTypeBtn")},e.prototype.onConstruct=function(){this.m_cTagBxp=this.getControllerAt(1),this.m_selected=this.getChildAt(0),this.m_unSelected=this.getChildAt(1)},e.URL="ui://gw8cpwc4ga5v3",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],HallGroundUI_GroundTypeList:[function(t,e,n){"use strict";cc._RF.push(e,"c6257EekjtMQadvXZezRVsN","HallGroundUI_GroundTypeList");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallGroundUI","GroundTypeList")},e.prototype.onConstruct=function(){this.m_T_selectState=this.getControllerAt(0),this.m_tab_mult=this.getChildAt(0),this.m_tab_classic=this.getChildAt(1),this.m_tab_bxp=this.getChildAt(2),this.m_tab_erren=this.getChildAt(3),this.m_tab_ttz=this.getChildAt(4),this.m_TMoveRight=this.getTransitionAt(0),this.m_TMoveLeft=this.getTransitionAt(1)},e.URL="ui://gw8cpwc4ga5v4",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],HallGroundUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"8c753mHzKxFL6oRbjl/Qz4R","HallGroundUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallGroundUI","MainPanel")},e.prototype.onConstruct=function(){this.m_GroundTypeList=this.getChildAt(0),this.m_GroundBtnList=this.getChildAt(1),this.m_BtnQuickStart=this.getChildAt(2),this.m_ani_ground=this.getTransitionAt(0),this.m_ani_hall=this.getTransitionAt(1)},e.URL="ui://gw8cpwc4ga5v0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],HallGroundUI:[function(t,e,n){"use strict";cc._RF.push(e,"44625UN4KpCeIKUu94pV445","HallGroundUI");var o,a,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.HallGroundUI=void 0;var c,l,u,d,p=t("../../Framework/UI/FadeUI"),h=t("../../Framework/UI/BaseUI"),_=t("./HallGroundModel"),f=t("./HallGroundUI/HallGroundUI_ButtonGround"),m=t("../Base/Data/DataBfConfig"),g=t("../../Framework/Manager/EventManager"),y=t("../Base/Data/DataEvent"),I=t("../Base/Utils/UtilView"),C=t("../Base/Data/DataConstant"),M=t("../Base/Module/Room/RoomModel"),v=t("../Base/View/UIHelp"),E=t("../Base/Utils/UtilString"),A=t("../Base/Utils/UtilCC"),P=t("../Base/Data/DataSpineAni");(function(t){t[t.NORMAL=0]="NORMAL",t[t.RECOMMEND=1]="RECOMMEND"})(c||(c={})),function(t){t[t.HIDE=0]="HIDE",t[t.PASSLEVEL=1]="PASSLEVEL",t[t.MULT=2]="MULT"}(l||(l={})),function(t){t[t.NOT_PASSA=0]="NOT_PASSA",t[t.IS_PASSA=1]="IS_PASSA"}(u||(u={})),function(t){t[t.NORMAL_LEVEL_1_2=0]="NORMAL_LEVEL_1_2",t[t.NORMAL_LEVEL_3_4=1]="NORMAL_LEVEL_3_4",t[t.NORMAL_LEVEL_5_6=2]="NORMAL_LEVEL_5_6",t[t.NORMAL_MIXPASSA_LEVEL_0=3]="NORMAL_MIXPASSA_LEVEL_0",t[t.NORMAL_MIXPASSA_LEVEL_3=4]="NORMAL_MIXPASSA_LEVEL_3"}(d||(d={}));var b=((a={})[d.NORMAL_LEVEL_1_2]={FONT_NAME:"ui://HallGroundUI/fnt_difeng_1",FONT_COLOR:"#2A725F"},a[d.NORMAL_LEVEL_3_4]={FONT_NAME:"ui://HallGroundUI/fnt_difeng_5",FONT_COLOR:"#6D51C5"},a[d.NORMAL_LEVEL_5_6]={FONT_NAME:"ui://HallGroundUI/fnt_difeng_6",FONT_COLOR:"#C74B46"},a[d.NORMAL_MIXPASSA_LEVEL_0]={FONT_NAME:"ui://HallGroundUI/fnt_difeng_7",FONT_COLOR:"#CC6F35"},a[d.NORMAL_MIXPASSA_LEVEL_3]={FONT_NAME:"ui://HallGroundUI/fnt_difeng_8",FONT_COLOR:"#C45734"},a),U=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._btnQuickStartPosX=null,e._btnGroundListPosX=null,e._gameID=m.GameIDInfo.NO_SHUFFLE_GD.id,e._isMultPlaza=!1,e._enableGroundBtns={},e._lastRecommondBtn=void 0,e._isPopAct=!1,e}return i(e,t),Object.defineProperty(e,"uiType",{get:function(){return h.UIType.ScenePart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},e.prototype.onLoad=function(){this.initParams(),this.initListener(),this.initAni()},e.prototype.initParams=function(){this._btnQuickStartPosX=this.view.m_BtnQuickStart.x,this._btnGroundListPosX=this.view.m_GroundBtnList.x},e.prototype.initListener=function(){g.EventManager.instance.on(y.DataEvent.PlazaInfoUpdate,this,this.onPlazaInfoUpdate),g.EventManager.instance.on(y.DataEvent.PlazaOnlineUpdate,this,this.onPlazaOnlineUpdate),g.EventManager.instance.on(y.DataEvent.PlazaRecommond,this,this.onPlazaRecommond),this.view.m_GroundTypeList.m_T_selectState.on(fgui.Event.STATUS_CHANGED,this.onGroundTypeChange,this),this.view.m_BtnQuickStart.onClick(this.onQuickStartBtnClick,this),this.initGroundBtnListener()},e.prototype.initAni=function(){A.UtilCC.instantiatePrefab(P.DataSpineAniPath.ANI_BTN_START,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"btn_ksks",!0)},this.view.m_BtnQuickStart.m_ani.node)},e.prototype.init=function(t,e){this._gameID=t,this._isMultPlaza=e,this.initUI(t)},e.prototype.initUI=function(t){this.adaptFullScreen(),this.initLeftTab(t),this.updateGrounds(t),this.updateOnlineCount(),this.updateQuickStartAndRecommondRoom(),this.view.m_ani_ground.play(this.refreshGroundList.bind(this))},e.prototype.adaptFullScreen=function(){I.UtilView.isFullScreen()&&(this.view.m_ani_ground.setValue("btnQuickStart_ani",this._btnQuickStartPosX-C.DataConstant.ADAPTER_WIDTH_VALUE-28,640-C.DataConstant.ADAPTER_HEIGHT_VALUE),this.view.m_GroundTypeList.x=this.view.m_GroundTypeList.x+C.DataConstant.ADAPTER_WIDTH_VALUE+28,this.view.m_GroundBtnList.x=this._btnGroundListPosX+C.DataConstant.ADAPTER_WIDTH_VALUE+80,this.view.m_BtnQuickStart.y-=C.DataConstant.ADAPTER_HEIGHT_VALUE-28)},e.prototype.initLeftTab=function(t){var e=this._isMultPlaza?"001":"000";this.view.m_GroundTypeList.m_T_selectState.setSelectedPage(t.toString()+e.toString())},e.prototype.updateGrounds=function(t){var e,n,o=[_.GroundItemLine.LINE_1,_.GroundItemLine.LINE_2];try{for(var a=s(o),i=a.next();!i.done;i=a.next()){var r=i.value,c=_.HallGroundModel.instance.getGroundInfo(t,r,this._isMultPlaza,!1);c&&this.updateGroundBtn(c,r)}}catch(d){e={error:d}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}this._enableGroundBtns={};for(var l=0;l<this.view.m_GroundBtnList.numChildren;l++){var u=this.view.m_GroundBtnList.getChildAt(l);u instanceof f.default&&u.visible&&u.data&&(this._enableGroundBtns[u.data.subID]=u)}},e.prototype.updateGroundBtn=function(t,e){for(var n=0;n<5;n++){var o=t[n],a=_.GroundItemLine.LINE_1===e?this.view.m_GroundBtnList["m_normal_"+n]:this.view.m_GroundBtnList["m_special_"+n];o?(a.visible=!0,this.initGroundBtnValue(a,o),this.initGroundBtnController(a,o),this.initGroundBtnFontType(a,o),a.data=o):a.visible=!1}},e.prototype.initGroundBtnValue=function(t,e){M.RoomModel.instance.checkIsMixPassARoom(e.subID)?t.m_txtBaseScore.text=E.UtilString.getGroundCoinString(e.baseScore):t.m_txtBaseScore.text=e.baseScore.toString();var n,o=E.UtilString.getCurrencyShortString(e.minScore),a=E.UtilString.getCurrencyShortString(e.maxScore);n=0!==e.maxScore?o+"~"+a:o+"\u4ee5\u4e0a",t.m_txtLimitScore.text=n},e.prototype.initGroundBtnController=function(t,e){t.m_cRecAniState.selectedIndex=c.NORMAL,t.m_cRoomLevel.selectedIndex=e.level;var n=M.RoomModel.instance.checkIsMixPassARoom(e.subID);t.m_cMixPassA.selectedIndex=n?u.IS_PASSA:u.NOT_PASSA,M.RoomModel.instance.checkIsMultCrit(e.subID)?t.m_cTagLogo.selectedIndex=l.MULT:t.m_cTagLogo.selectedIndex=e.taskLevel>0?l.PASSLEVEL:l.HIDE},e.prototype.initGroundBtnFontType=function(t,e){var n=null;M.RoomLevelEnum.NEWBIE_LEVEL===e.level?n=b[d.NORMAL_MIXPASSA_LEVEL_0]:M.RoomLevelEnum.HIGH_LEVEL>e.level?n=b[d.NORMAL_LEVEL_1_2]:M.RoomLevelEnum.HIGH_LEVEL===e.level?n=M.RoomModel.instance.checkIsMixPassARoom(e.subID)?b[d.NORMAL_MIXPASSA_LEVEL_3]:b[d.NORMAL_LEVEL_3_4]:M.RoomLevelEnum.MASTER_LEVEL===e.level?n=b[d.NORMAL_LEVEL_3_4]:M.RoomLevelEnum.LOCALTYCOON_LEVEL===e.level?n=b[d.NORMAL_LEVEL_5_6]:M.RoomLevelEnum.SUPREME_LEVEL===e.level&&(n=b[d.NORMAL_LEVEL_5_6]),t.m_txtBaseScore.font=n.FONT_NAME;var o=cc.Color.BLACK;o=cc.Color.fromHEX(o,n.FONT_COLOR),t.m_txtLimitScore.color=o,t.m_txtOnlineCount.color=o},e.prototype.updateOnlineCount=function(){var t,e;try{for(var n=s(Object.values(this._enableGroundBtns)),o=n.next();!o.done;o=n.next()){var a=o.value,i=a.data.subID;if(i){var r=_.HallGroundModel.instance.getRoomOnlineCount(i);a.m_txtOnlineCount.text=E.UtilString.getCurrencyShortString(r)+"\u4eba"}}}catch(c){t={error:c}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},e.prototype.updateQuickStartAndRecommondRoom=function(){var t=M.RoomModel.instance.getRecRoomInfoByGameID(this._gameID,this._isMultPlaza);if(t){var e=M.RoomModel.instance.getRoomDesc(t.subID);this.view.m_BtnQuickStart.text=e;var n=this._enableGroundBtns[t.subID];void 0!==n&&(n.m_cRecAniState.selectedIndex=c.RECOMMEND,this.addBtnRecommondSpineAni(n))}},e.prototype.addBtnRecommondSpineAni=function(t){this._lastRecommondBtn&&this._lastRecommondBtn.m_ani_select.node.removeAllChildren(),this._lastRecommondBtn=t,A.UtilCC.instantiatePrefab(P.DataSpineAniPath.ANI_BTN_SELECTED,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"xcy",!0)},t.m_ani_select.node)},e.prototype.refreshGroundList=function(){this.view.m_GroundBtnList.scrollPane.setPosX(0);var t=this.computeMaxRow();this.view.m_GroundBtnList.scrollPane.setContentSize(340*t,0)},e.prototype.computeMaxRow=function(){for(var t=0,e=0;e<5&&(this.view.m_GroundBtnList["m_normal_"+e].visible||this.view.m_GroundBtnList["m_special_"+e].visible);e++)t=e+1;return t},e.prototype.onPlazaInfoUpdate=function(t){t===this._gameID?(this.updateGrounds(t),this.updateQuickStartAndRecommondRoom()):m.GameIDInfo.NO_SHUFFLE_GD.id===this._gameID&&m.GameIDInfo.CLASSIC_GD.id===t&&this.updateGrounds(t)},e.prototype.onPlazaOnlineUpdate=function(t){t===this._gameID?this.updateOnlineCount():m.GameIDInfo.NO_SHUFFLE_GD.id===this._gameID&&m.GameIDInfo.CLASSIC_GD.id===t&&this.updateOnlineCount()},e.prototype.onPlazaRecommond=function(){this.updateQuickStartAndRecommondRoom()},e.prototype.onGroundTypeChange=function(){var t=+this.view.m_GroundTypeList.m_T_selectState.selectedPage;this._gameID=Math.floor(t/1e3),this._isMultPlaza=1===Math.floor(t%1e3),this.updateGrounds(this._gameID),this.updateOnlineCount(),this.updateQuickStartAndRecommondRoom(),this.view.m_GroundBtnList.scrollPane.setPosX(0),this.view.m_GroundBtnList.m_ani_chose.play(this.refreshGroundList.bind(this))},e.prototype.onQuickStartBtnClick=function(){v.UIHelp.instance.showLoading("\u52a0\u5165\u623f\u95f4\u4e2d",5);var t=M.RoomModel.instance.getRecRoomInfoByGameID(this._gameID,this._isMultPlaza);t&&_.HallGroundModel.instance.reqEnterGame(this._gameID,t.subID,_.BankruptSouceEnum.PLAZA_QUICKSTART,this._isMultPlaza,!0)},e.prototype.initGroundBtnListener=function(){for(var t=this.view.m_GroundBtnList,e=0,n=t.numChildren;e<n;++e){var o=t.getChildAt(e);o instanceof fgui.GButton&&o.onClick(this.onGroundBtnClick,this)}},e.prototype.onGroundBtnClick=function(t){this._isPopAct,v.UIHelp.instance.showLoading("\u52a0\u5165\u623f\u95f4\u4e2d");var e=fgui.GObject.cast(t.currentTarget).data.subID;_.HallGroundModel.instance.reqEnterGame(this._gameID,e,_.BankruptSouceEnum.PLAZA_GAMEICON,this._isMultPlaza,!0)},e.prototype.goBackHallAnim=function(t){this.view.m_ani_hall.play(t)},r([jsClass],e)}(p.FadeUI);n.HallGroundUI=U,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/UI/BaseUI":"BaseUI","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataConstant":"DataConstant","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataSpineAni":"DataSpineAni","../Base/Module/Room/RoomModel":"RoomModel","../Base/Utils/UtilCC":"UtilCC","../Base/Utils/UtilString":"UtilString","../Base/Utils/UtilView":"UtilView","../Base/View/UIHelp":"UIHelp","./HallGroundModel":"HallGroundModel","./HallGroundUI/HallGroundUI_ButtonGround":"HallGroundUI_ButtonGround"}],HallModel:[function(t,e,n){"use strict";cc._RF.push(e,"3bfe34b5ydFIaY9uoZNSQNk","HallModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function r(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../UserInfo/UserInfoModel"),u=t("../../Framework/Model/BaseModel"),d=t("../../Framework/Root/ModelRoot"),p=t("../Base/Module/Room/RoomModel"),h=t("../Base/Data/DataBfConfig"),_=t("../../Framework/Manager/EventManager"),f=t("../Base/Data/DataEvent"),m=t("../Base/Module/AppShowOptions/AppShowOptionsModel"),g=t("../Activity/Advertise/VideoAdManager"),y=t("../Base/Module/BehaviorBranch/LogicBehaviorBranch"),I=t("../Award/AwardModel"),C=t("../../Framework/Manager/UIManager"),M=t("../Award/AwardUI"),v=t("../Activity/Advertise/AdProxy"),E=t("../Activity/Advertise/AdModel"),A=t("../HallGround/HallGroundModel"),P=t("../Login/LoginModel"),b=t("../../Framework/Manager/CoroutineManager"),U=t("../Game/GuanDan/GameUI"),S=t("../Base/Module/BfAnalytics/BfasManager"),T=t("../Base/Module/BfAnalytics/DataPointID"),R=t("../Game/GuanDan/Model/GameModel"),w=t("../Activity/NewPlayerGiftUI/NewPlayerGiftUI"),D=t("../Base/Data/DataAdChannel"),O=t("../Base/Data/DataLocalStorageKey"),L=t("../Base/Module/Popup/PopupManager"),G=t("../Base/Module/Network/SocketEventType"),B=t("../Base/Utils/UtilTime"),N=t("../Base/View/UIHelp"),F=t("../FriendTeam/FriendTeamModel"),k=t("../MergeNumHint/MergeNumHintUI"),x=t("../Base/Module/Platform/PlatformManager"),j=t("../Base/Module/Room/ClubConfig"),H=t("../Match/MatchModel"),W=T.ActivityPointID.newPlayerGiftScene,Y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._enterHallSuccess=!1,e._isEverBackToHall=!1,e._localtionSuccess=!1,e._isPullRoomListSuccess=!1,e._nowPullRoomListErrorCount=0,e._isInFriendTeam=!1,e._queryCountBackToHall=0,e._gotoTable=0,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return d.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEnterHallSuccess",{get:function(){return this._enterHallSuccess},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEverBackToHall",{get:function(){return this._isEverBackToHall},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLocaltionSuccess",{get:function(){return this._localtionSuccess},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInFriendTeam",{get:function(){return this._isInFriendTeam},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){_.EventManager.instance.on(f.DataEvent.LoginSuccess,this,this.onLoginSuccess),_.EventManager.instance.on(f.DataEvent.ReceiveAuthAwardInfo,this,this.onReceiveAuthAwardInfo),_.EventManager.instance.on(f.DataEvent.EnterHallSuccess,this,this.onEnterHallSuccess),_.EventManager.instance.on(f.DataEvent.BackHallSuccess,this,this.onBackHallSuccess),_.EventManager.instance.on(G.SocketEventType.Break,this,this.onSocketBreak),_.EventManager.instance.on(f.DataEvent.FriendTeamNotifyLocation,this,this.onFriendTeamLocation),_.EventManager.instance.on(f.DataEvent.NotifyLocationSuccess,this,this.onLocationSuccess)},e.prototype.getGoldCount=function(){return l.UserInfoModel.instance.userInfo.gold||0},e.prototype.getDiamondCount=function(){return l.UserInfoModel.instance.userInfo.diamond||0},e.prototype.getUserHeadUrl=function(){return l.UserInfoModel.instance.getHead()},e.prototype.getUserNickName=function(){return l.UserInfoModel.instance.userInfo.nickname||""},e.prototype.getNumID=function(){return l.UserInfoModel.instance.userInfo.numID||0},e.prototype.isPullRoomListSuccess=function(){return this._isPullRoomListSuccess},e.prototype.setPullRoomListSucess=function(t){return this._isPullRoomListSuccess=t||!1},e.prototype.reqGDRoomList=function(){return r(this,void 0,Promise,function(){var t,e,n,o,a,i,r,l,u=this;return s(this,function(s){switch(s.label){case 0:t=[],Object.values(h.GameIDInfo).forEach(function(e){e.isGoldRoom&&t.push(e.id)}),e=1,s.label=1;case 1:s.trys.push([1,7,8,9]),n=c(t),o=n.next(),s.label=2;case 2:return o.done?[3,6]:(a=o.value,p.RoomModel.instance.getHadReqPlazaList(a)?[3,5]:[4,this.reqGDRoomConfig(a).then(function(){++e===t.length&&u.setPullRoomListSucess(!0)}).catch(function(){console.error("this._reqGDRoomConfig"),u.setPullRoomListSucess(!1),u._nowPullRoomListErrorCount++,1>=u._nowPullRoomListErrorCount&&u.reqGDRoomList()})]);case 3:return s.sent(),[4,this.reqGDRoomOnlineCount(a).catch(function(){console.error("this._reqGDRoomOnlineCount")})];case 4:s.sent(),s.label=5;case 5:return o=n.next(),[3,2];case 6:return[3,9];case 7:return i=s.sent(),r={error:i},[3,9];case 8:try{o&&!o.done&&(l=n.return)&&l.call(n)}finally{if(r)throw r.error}return[7];case 9:return[2]}})})},e.prototype.reqGDRoomConfig=function(t){return new Promise(function(e,n){p.RoomModel.instance.reqClubPlazaList(t,p.ClubShowFlags.CLUBS_LIST,function(t,o){t?e&&e():n&&n(o)})})},e.prototype.reqGDRoomOnlineCount=function(t){return new Promise(function(e,n){p.RoomModel.instance.reqPlayerCount(function(t){t?e&&e():n&&n()},t)})},e.prototype.doPullRoomListSucessCo=function(t){var e=this;this.isPullRoomListSuccess()?t&&t():(this._waitPullRoomListCo&&b.CoroutineManager.instance.stopCo(this._waitPullRoomListCo),this._waitPullRoomListCo=b.CoroutineManager.instance.wait(function(){return e.isPullRoomListSuccess()},function(){e._waitPullRoomListCo=null,t&&t()},this))},e.prototype.doQuickStartToGame=function(){N.UIHelp.instance.showLoading("\u52a0\u5165\u623f\u95f4\u4e2d",15),this.doPullRoomListSucessCo(this.doEnterGameFunc.bind(this,A.BankruptSouceEnum.HALL_QUICKSTART))},e.prototype.doEnterGameFunc=function(t){var e=p.RoomModel.instance.getRecRoomInfo(null,!0);e&&this.reqEnterGame(e.subID,t,!0)},e.prototype.doGuidePlazaToGame=function(t){N.UIHelp.instance.showLoading("\u52a0\u5165\u623f\u95f4\u4e2d",15),this.doPullRoomListSucessCo(this.doEnterGameFuncWithSubID.bind(this,t))},e.prototype.doEnterGameFuncWithSubID=function(t){var e=p.RoomModel.instance.getPlazaInfoBySubID(t);e&&this.reqEnterGame(e.subID)},e.prototype.reqEnterGame=function(t,e,n){A.HallGroundModel.instance.reqEnterGame(null,t,e,null,n)},e.prototype.toShowVideoAd=function(){g.VideoAdManager.instance.showVideoAd(function(){},function(t){t&&v.AdProxy.instance.reqGetVideoAdAward(function(t){if(console.log(">>HallModel.showVideoAd:",t),t.isSuccess){var e=I.AwardModel.instance.getAwardsFormat({asr:t.awards.asr});C.UIManager.instance.open(M.AwardUI).then(function(t){t.init(e)}),E.AdModel.instance.addVideoAdHadGotCount()}})},{customizeScene:y.CustomizeSceneEnum.WATCH_VIDEO})},e.prototype.checkNewDay=function(){var t=localStorage.getItem(O.LocalStorageKey.EVERY_DAY_FIRST_LOGIN),e=B.UtilTime.getCurrDate();return t?e!==t&&(localStorage.setItem(O.LocalStorageKey.EVERY_DAY_FIRST_LOGIN,e),!0):(localStorage.setItem(O.LocalStorageKey.EVERY_DAY_FIRST_LOGIN,e),!0)},e.prototype.onLoginSuccess=function(){this.reqGDRoomList(),H.MatchModel.instance.initHintTimer()},e.prototype.onReceiveAuthAwardInfo=function(t){console.log("HallModel.onReceiveAuthAwardInfo",t),l.UserInfoModel.instance.isNewRegisterPlayer()&&S.BfasManager.instance.evtUserLinkPoint(T.UserConvertLinkPointID.REGISTER_USER.eventid,T.UserConvertLinkPointID.REGISTER_USER.eventName)},e.prototype.onEnterHallSuccess=function(){var t=this;this._enterHallSuccess=!0,this._waitPostClickLinkCo&&b.CoroutineManager.instance.stopCo(this._waitPostClickLinkCo),this._waitPostClickLinkCo=b.CoroutineManager.instance.wait(function(){return null!==m.AppShowOptionsModel.instance.popupTimes&&P.LoginModel.instance.isAwardInfoGot&&t.isPullRoomListSuccess()&&t.isLocaltionSuccess&&null!==H.MatchModel.instance.getMatchLocation()},function(){l.UserInfoModel.instance.getMergeNumID()>0?(console.log("getMergeNumID.pop"),t.showPopMerNumIDDialog(l.UserInfoModel.instance.getMergeNumID(),l.UserInfoModel.instance.userInfo.numID),l.UserInfoModel.instance.userInfo.mergeNumID=null):t.isHasAppOtherLocation()?t.showBackToAppHint():l.UserInfoModel.instance.isGoldInlineTeam()?L.PopupManager.instance.popupOnEnterToHall_goldInlineTeam(m.AppShowOptionsModel.instance.popupTimes,F.FriendTeamModel.instance.isInTeam()):L.PopupManager.instance.popupOnEnterHall(m.AppShowOptionsModel.instance.popupTimes,t.notAutoPopup())},this)},e.prototype.notAutoPopup=function(){return!(!F.FriendTeamModel.instance.isInTeam()||F.FriendTeamModel.instance.isTeamLeader())||(4==this.getGotoTable()||5==this.getGotoTable())&&(this.setGotoTable(0),!0)},e.prototype.showPopMerNumIDDialog=function(t,e){var n=this;C.UIManager.instance.open(k.MergeNumHintUI).then(function(o){o.setCloseCallBack(function(){n.isHasAppOtherLocation()&&n.showBackToAppHint()}),o.initUI(t,e)})},e.prototype.isHasAppOtherLocation=function(){console.log("isHasAppOtherLocation");var t=l.UserInfoModel.instance.getUserLocation();if(t&&t.clubid){if(console.log("isHasAppOtherLocation.clubid:",t.clubid),t.clubid===j.BoxRoomClubIDEnum.CLASSIC||t.clubid===j.BoxRoomClubIDEnum.ERREN||t.clubid===j.BoxRoomClubIDEnum.TTZ||t.clubid===j.BoxRoomClubIDEnum.TUOPAI)return!1;var e=p.RoomModel.instance.getClubConfig(t.clubid);return console.log("Login.isHasAppOtherLocation:",e),!e}},e.prototype.showBackToAppHint=function(){N.UIHelp.instance.showDialogMore({content:"\u60a8\u5728\u5176\u5b83\u8bbe\u5907\u8fd8\u6709\u6e38\u620f\u672a\u7ed3\u675f\uff0c\u8bf7\u5148\u8fd4\u56de\u5b8c\u6210\u5bf9\u5c40~",canClose:!1,showCloseBtn:!1},function(){x.PlatformManager.instance.platform.fix(!1)})},e.prototype.onBackHallSuccess=function(){var t=this;this._isEverBackToHall=!0,this._queryCountBackToHall=0,l.UserInfoModel.instance.isNewRegisterPlayer()&&l.UserInfoModel.instance.updateNewRegisterPlayer(!1),P.LoginModel.instance.queryUserProfile(function(){t._queryCountBackToHall++}),p.RoomModel.instance.queryUserLocation(function(){t._queryCountBackToHall++}),this._waitQueryCountBackToHallCo&&b.CoroutineManager.instance.stopCo(this._waitQueryCountBackToHallCo),this._waitQueryCountBackToHallCo=b.CoroutineManager.instance.wait(function(){return 2===t._queryCountBackToHall},function(){l.UserInfoModel.instance.isGoldInlineTeam()?console.log("onBackHallSuccess.fromInlineTeam"):L.PopupManager.instance.popupOnBackToHall(t.notAutoPopup())},this)},e.prototype.onSocketBreak=function(){this._isInFriendTeam=!1},e.prototype.onFriendTeamLocation=function(t){this._isInFriendTeam=0===t},e.prototype.onLocationSuccess=function(){this._localtionSuccess=!0},e.prototype.autoPopup=function(){return!!l.UserInfoModel.instance.isNewRegisterPlayer()&&(S.BfasManager.instance.evt(W.triggerPop.eventid,null,!0,W.triggerPop.eventName),D.DataAdChannel.isNeepPopNewPlayerGift(h.DataBfConfig.ymn.channel)?C.UIManager.instance.open(w.NewPlayerGiftUI).then(function(t){t.init(l.UserInfoModel.instance.getNewPlayerAwards())}):this.gameGuide(),!0)},e.prototype.stopPopup=function(){C.UIManager.instance.close(w.NewPlayerGiftUI)},e.prototype.gameGuide=function(){R.GameModel.instance.setGuideState(R.GuideTypeEnum.WAIT),C.UIManager.instance.gotoScene(U.GameUI),S.BfasManager.instance.evtUserLinkPoint(T.UserConvertLinkPointID.ENTER_NEW_GUIDE.eventid,T.UserConvertLinkPointID.ENTER_NEW_GUIDE.eventName)},e.prototype.setGotoTable=function(t){this._gotoTable=t},e.prototype.getGotoTable=function(){return this._gotoTable},e.prototype.checkIsHallNotMatch=function(){return!x.PlatformManager.instance.supportAct.MATCH_AND_FIREND},i([jsClass],e)}(u.BaseModel);n.default=Y,cc.systemEvent.once("GameRoot.inited",function(){d.ModelRoot.instance.add(Y)}),cc._RF.pop()},{"../../Framework/Manager/CoroutineManager":"CoroutineManager","../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/Model/BaseModel":"BaseModel","../../Framework/Root/ModelRoot":"ModelRoot","../Activity/Advertise/AdModel":"AdModel","../Activity/Advertise/AdProxy":"AdProxy","../Activity/Advertise/VideoAdManager":"VideoAdManager","../Activity/NewPlayerGiftUI/NewPlayerGiftUI":"NewPlayerGiftUI","../Award/AwardModel":"AwardModel","../Award/AwardUI":"AwardUI","../Base/Data/DataAdChannel":"DataAdChannel","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../Base/Module/AppShowOptions/AppShowOptionsModel":"AppShowOptionsModel","../Base/Module/BehaviorBranch/LogicBehaviorBranch":"LogicBehaviorBranch","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Network/SocketEventType":"SocketEventType","../Base/Module/Platform/PlatformManager":"PlatformManager","../Base/Module/Popup/PopupManager":"PopupManager","../Base/Module/Room/ClubConfig":"ClubConfig","../Base/Module/Room/RoomModel":"RoomModel","../Base/Utils/UtilTime":"UtilTime","../Base/View/UIHelp":"UIHelp","../FriendTeam/FriendTeamModel":"FriendTeamModel","../Game/GuanDan/GameUI":"GameUI","../Game/GuanDan/Model/GameModel":"GameModel","../HallGround/HallGroundModel":"HallGroundModel","../Login/LoginModel":"LoginModel","../Match/MatchModel":"MatchModel","../MergeNumHint/MergeNumHintUI":"MergeNumHintUI","../UserInfo/UserInfoModel":"UserInfoModel"}],HallProxy:[function(t,e,n){"use strict";cc._RF.push(e,"9dc25t9IM5OBboSrtruPlbh","HallProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.HallProxy=void 0;var r=t("../../Framework/Proxy/BaseProxy"),s=t("../../Framework/Root/ProxyRoot"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return s.ProxyRoot.instance.get(n)},enumerable:!1,configurable:!0}),n=i([jsClass],e)}(r.BaseProxy);n.HallProxy=c,cc.systemEvent.once("GameRoot.inited",function(){s.ProxyRoot.instance.add(c)}),cc._RF.pop()},{"../../Framework/Proxy/BaseProxy":"BaseProxy","../../Framework/Root/ProxyRoot":"ProxyRoot"}],HallUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"15621+HzWpGra9cSIGLHBIZ","HallUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./HallUI_btnFriend"),a=t("./HallUI_PlayerInfo"),i=t("./HallUI_HallLeft"),r=t("./HallUI_BtnStart"),s=t("./HallUI_NoAvatarBubble"),c=t("./HallUI_MainPanel"),l=t("./HallUI_layerHall2"),u=t("./HallUI_btn2Mult"),d=t("./HallUI_btn2Classical"),p=t("./HallUI_btn2NoShuffle"),h=t("./HallUI_btn2ErRen"),_=t("./HallUI_btn2TTZ"),f=t("./HallUI_btnGDMatch"),m=t("./HallUI_btnMatchStartHint"),g=t("./HallUI_MatchStartHints"),y=t("./HallUI_SimpleSpineButton"),I=t("./HallUI_btnMore"),C=t("./HallUI_btnMall"),M=t("./HallUI_SimpleButton"),v=t("./HallUI_btnAdd"),E=t("./HallUI_HallRight"),A=t("./HallUI_btnFriendTeam"),P=t("./HallUI_BottomSimpleButton"),b=t("./HallUI_HallTop"),U=t("./HallUI_HallBtm"),S=t("./HallUI_btnMult"),T=t("./HallUI_btnClassical"),R=t("./HallUI_ScoreBar"),w=t("./HallUI_Avatar"),D=t("./HallUI_layerHall"),O=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default),fgui.UIObjectFactory.setExtension(l.default.URL,l.default),fgui.UIObjectFactory.setExtension(u.default.URL,u.default),fgui.UIObjectFactory.setExtension(d.default.URL,d.default),fgui.UIObjectFactory.setExtension(p.default.URL,p.default),fgui.UIObjectFactory.setExtension(h.default.URL,h.default),fgui.UIObjectFactory.setExtension(_.default.URL,_.default),fgui.UIObjectFactory.setExtension(f.default.URL,f.default),fgui.UIObjectFactory.setExtension(m.default.URL,m.default),fgui.UIObjectFactory.setExtension(g.default.URL,g.default),fgui.UIObjectFactory.setExtension(y.default.URL,y.default),fgui.UIObjectFactory.setExtension(I.default.URL,I.default),fgui.UIObjectFactory.setExtension(C.default.URL,C.default),fgui.UIObjectFactory.setExtension(M.default.URL,M.default),fgui.UIObjectFactory.setExtension(v.default.URL,v.default),fgui.UIObjectFactory.setExtension(E.default.URL,E.default),fgui.UIObjectFactory.setExtension(A.default.URL,A.default),fgui.UIObjectFactory.setExtension(P.default.URL,P.default),fgui.UIObjectFactory.setExtension(b.default.URL,b.default),fgui.UIObjectFactory.setExtension(U.default.URL,U.default),fgui.UIObjectFactory.setExtension(S.default.URL,S.default),fgui.UIObjectFactory.setExtension(T.default.URL,T.default),fgui.UIObjectFactory.setExtension(R.default.URL,R.default),fgui.UIObjectFactory.setExtension(w.default.URL,w.default),fgui.UIObjectFactory.setExtension(D.default.URL,D.default)},t}();n.default=O,cc._RF.pop()},{"./HallUI_Avatar":"HallUI_Avatar","./HallUI_BottomSimpleButton":"HallUI_BottomSimpleButton","./HallUI_BtnStart":"HallUI_BtnStart","./HallUI_HallBtm":"HallUI_HallBtm","./HallUI_HallLeft":"HallUI_HallLeft","./HallUI_HallRight":"HallUI_HallRight","./HallUI_HallTop":"HallUI_HallTop","./HallUI_MainPanel":"HallUI_MainPanel","./HallUI_MatchStartHints":"HallUI_MatchStartHints","./HallUI_NoAvatarBubble":"HallUI_NoAvatarBubble","./HallUI_PlayerInfo":"HallUI_PlayerInfo","./HallUI_ScoreBar":"HallUI_ScoreBar","./HallUI_SimpleButton":"HallUI_SimpleButton","./HallUI_SimpleSpineButton":"HallUI_SimpleSpineButton","./HallUI_btn2Classical":"HallUI_btn2Classical","./HallUI_btn2ErRen":"HallUI_btn2ErRen","./HallUI_btn2Mult":"HallUI_btn2Mult","./HallUI_btn2NoShuffle":"HallUI_btn2NoShuffle","./HallUI_btn2TTZ":"HallUI_btn2TTZ","./HallUI_btnAdd":"HallUI_btnAdd","./HallUI_btnClassical":"HallUI_btnClassical","./HallUI_btnFriend":"HallUI_btnFriend","./HallUI_btnFriendTeam":"HallUI_btnFriendTeam","./HallUI_btnGDMatch":"HallUI_btnGDMatch","./HallUI_btnMall":"HallUI_btnMall","./HallUI_btnMatchStartHint":"HallUI_btnMatchStartHint","./HallUI_btnMore":"HallUI_btnMore","./HallUI_btnMult":"HallUI_btnMult","./HallUI_layerHall":"HallUI_layerHall","./HallUI_layerHall2":"HallUI_layerHall2"}],HallUI_Avatar:[function(t,e,n){"use strict";cc._RF.push(e,"6ba8fLx/2tB/aF6lgXpxPpJ","HallUI_Avatar");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","Avatar")},e.prototype.onConstruct=function(){this.m_avatarPic=this.getChildAt(0),this.m_PictureFrame=this.getChildAt(1)},e.URL="ui://29pr43hcx0s46",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],HallUI_BottomSimpleButton:[function(t,e,n){"use strict";cc._RF.push(e,"e94faGO+J9JyLKEelvpm49x","HallUI_BottomSimpleButton");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","BottomSimpleButton")},e.prototype.onConstruct=function(){this.m_CIsNew=this.getControllerAt(0),this.m_CNewHasNum=this.getControllerAt(1),this.m_TMoveUp=this.getTransitionAt(0),this.m_TMoveDown=this.getTransitionAt(1)},e.URL="ui://29pr43hcso0na6ap",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],HallUI_BtnStart:[function(t,e,n){"use strict";cc._RF.push(e,"2c4ddr/UxZDrLXGCQuWCNrJ","HallUI_BtnStart");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","BtnStart")},e.prototype.onConstruct=function(){this.m_ani=this.getChildAt(0)},e.URL="ui://29pr43hcbesxbx",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],HallUI_HallBtm:[function(t,e,n){"use strict";cc._RF.push(e,"11765H3C6pOj5bMF2SWqP7h","HallUI_HallBtm");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","HallBtm")},e.prototype.onConstruct=function(){this.m_bg=this.getChildAt(0),this.m_btnSet=this.getChildAt(1),this.m_btnCustomer=this.getChildAt(2),this.m_btnMail=this.getChildAt(3),this.m_btnExchange=this.getChildAt(4),this.m_btnActivity=this.getChildAt(5),this.m_btnShop=this.getChildAt(7),this.m_btnQuickStart=this.getChildAt(8),this.m_bottomContent=this.getChildAt(9),this.m_TMoveUp=this.getTransitionAt(0),this.m_TMoveDown=this.getTransitionAt(1)},e.URL="ui://29pr43hcuvowg",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],HallUI_HallLeft:[function(t,e,n){"use strict";cc._RF.push(e,"59ab7GYwnJC2KaSgLJzWcEh","HallUI_HallLeft");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","HallLeft")},e.prototype.onConstruct=function(){this.m_btnWelfare=this.getChildAt(0),this.m_btnVideoAd=this.getChildAt(1),this.m_btnYearBeast=this.getChildAt(2),this.m_btnTenYearBox=this.getChildAt(3),this.m_btnInviteGift=this.getChildAt(4),this.m_ignore=this.getChildAt(5),this.m_TMoveRigh=this.getTransitionAt(0),this.m_TMoveLeft=this.getTransitionAt(1)},e.URL="ui://29pr43hcain6a68q",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],HallUI_HallRight:[function(t,e,n){"use strict";cc._RF.push(e,"2e34bFzIUBAmJ1TYhZZXco8","HallUI_HallRight");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","HallRight")},e.prototype.onConstruct=function(){this.m_BtnMore=this.getChildAt(0),this.m_TMoveRigh=this.getTransitionAt(0),this.m_TMoveLeft=this.getTransitionAt(1)},e.URL="ui://29pr43hcrv45a6bp",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],HallUI_HallTop:[function(t,e,n){"use strict";cc._RF.push(e,"9fbbczqaKtDYKL/a5Eym+LI","HallUI_HallTop");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","HallTop")},e.prototype.onConstruct=function(){this.m_T_Top=this.getControllerAt(0),this.m_barCoin=this.getChildAt(1),this.m_barDiamond=this.getChildAt(2),this.m_playerInfo=this.getChildAt(3),this.m_BtnBack=this.getChildAt(4),this.m_btnRule=this.getChildAt(5),this.m_btnFeedback=this.getChildAt(6),this.m_btnCollect=this.getChildAt(7),this.m_btnAnwerAward=this.getChildAt(8),this.m_topCotent=this.getChildAt(10),this.m_ani_top=this.getTransitionAt(0),this.m_ani_down=this.getTransitionAt(1)},e.URL="ui://29pr43hcuvow3",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],HallUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"12f21RQhExJ0oyTpkkAxkch","HallUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","MainPanel")},e.prototype.onConstruct=function(){this.m_T_Hall=this.getControllerAt(0),this.m_cCenterCompType=this.getControllerAt(1),this.m_bg=this.getChildAt(0),this.m_Top=this.getChildAt(1),this.m_Center=this.getChildAt(2),this.m_Center2=this.getChildAt(3),this.m_Bottom=this.getChildAt(4),this.m_Left=this.getChildAt(5),this.m_Right=this.getChildAt(6),this.m_ani_hall=this.getTransitionAt(0),this.m_ani_ground=this.getTransitionAt(1)},e.URL="ui://29pr43hchq0u0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],HallUI_MatchStartHints:[function(t,e,n){"use strict";cc._RF.push(e,"a6e71eSN89JfZfrxUdhW+Na","HallUI_MatchStartHints");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","MatchStartHints")},e.prototype.onConstruct=function(){this.m_listMatch=this.getChildAt(1)},e.URL="ui://29pr43hcji2ya6cj",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],HallUI_NoAvatarBubble:[function(t,e,n){"use strict";cc._RF.push(e,"51530ahUIxDpoz5jRbnwS8K","HallUI_NoAvatarBubble");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","NoAvatarBubble")},e.prototype.onConstruct=function(){this.m_title=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)},e.URL="ui://29pr43hcemgja688",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],HallUI_PlayerInfo:[function(t,e,n){"use strict";cc._RF.push(e,"ff23fzXxZBFk6bDiLCyDCXC","HallUI_PlayerInfo");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","PlayerInfo")},e.prototype.onConstruct=function(){this.m_type=this.getControllerAt(0),this.m_NoAvatar=this.getControllerAt(1),this.m_avatar=this.getChildAt(1),this.m_noAvatar=this.getChildAt(3),this.m_name=this.getChildAt(4),this.m_numid=this.getChildAt(5)},e.URL="ui://29pr43hc9ulaep",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],HallUI_ScoreBar:[function(t,e,n){"use strict";cc._RF.push(e,"29ce2gktU5H44q9nw4k1iu/","HallUI_ScoreBar");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","ScoreBar")},e.prototype.onConstruct=function(){this.m_type=this.getControllerAt(0),this.m_showPlus=this.getControllerAt(1),this.m_score=this.getChildAt(2),this.m_btnAdd=this.getChildAt(3)},e.URL="ui://29pr43hcx0s40",e}(fgui.GLabel);n.default=i,cc._RF.pop()},{}],HallUI_SimpleButton:[function(t,e,n){"use strict";cc._RF.push(e,"c1d95vLY4RHMb33+nONzjAC","HallUI_SimpleButton");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","SimpleButton")},e.prototype.onConstruct=function(){this.m_CIsNew=this.getControllerAt(0),this.m_CNewHasNum=this.getControllerAt(1),this.m_particle=this.getChildAt(2),this.m_TMoveUp=this.getTransitionAt(0),this.m_TMoveDown=this.getTransitionAt(1)},e.URL="ui://29pr43hcqiqg5n4",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],HallUI_SimpleSpineButton:[function(t,e,n){"use strict";cc._RF.push(e,"35294F2JIBO0a5g75j8rkZZ","HallUI_SimpleSpineButton");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","SimpleSpineButton")},e.prototype.onConstruct=function(){this.m_CIsNew=this.getControllerAt(0),this.m_CNewHasNum=this.getControllerAt(1),this.m_spineNode=this.getChildAt(0),this.m_particle=this.getChildAt(3),this.m_TMoveUp=this.getTransitionAt(0),this.m_TMoveDown=this.getTransitionAt(1)},e.URL="ui://29pr43hcjmeia6cc",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],HallUI_btn2Classical:[function(t,e,n){"use strict";cc._RF.push(e,"68c01igq9dOLa2CH37IlBVY","HallUI_btn2Classical");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","btn2Classical")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(1)},e.URL="ui://29pr43hchxbxa6cm",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],HallUI_btn2ErRen:[function(t,e,n){"use strict";cc._RF.push(e,"b3092tLbvpB76B73MMtBLX8","HallUI_btn2ErRen");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","btn2ErRen")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(1)},e.URL="ui://29pr43hchxbxa6co",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],HallUI_btn2Mult:[function(t,e,n){"use strict";cc._RF.push(e,"90a2dahYFBIqqrimUvGAClf","HallUI_btn2Mult");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","btn2Mult")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(1)},e.URL="ui://29pr43hchxbxa6cl",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],HallUI_btn2NoShuffle:[function(t,e,n){"use strict";cc._RF.push(e,"7916f5CBl5H1r2sktY6iJmD","HallUI_btn2NoShuffle");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","btn2NoShuffle")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(1)},e.URL="ui://29pr43hchxbxa6cn",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],HallUI_btn2TTZ:[function(t,e,n){"use strict";cc._RF.push(e,"2c942UQ7lJPB5YGJ7QBISSO","HallUI_btn2TTZ");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","btn2TTZ")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(1)},e.URL="ui://29pr43hchxbxa6cp",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],HallUI_btnAdd:[function(t,e,n){"use strict";cc._RF.push(e,"fc35eWl2EFKJ4dQsM0ODSlL","HallUI_btnAdd");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","btnAdd")},e.prototype.onConstruct=function(){this.m_t0=this.getTransitionAt(0),this.m_TMoveUp=this.getTransitionAt(1),this.m_TMoveDown=this.getTransitionAt(2)},e.URL="ui://29pr43hcqy6ja698",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],HallUI_btnClassical:[function(t,e,n){"use strict";cc._RF.push(e,"0152cXKYclMFLk1FvhahTlY","HallUI_btnClassical");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","btnClassical")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(1)},e.URL="ui://29pr43hcw1xoa63c",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],HallUI_btnFriendTeam:[function(t,e,n){"use strict";cc._RF.push(e,"c73f7WNqwJOFaof4nvzOVzF","HallUI_btnFriendTeam");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","btnFriendTeam")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(1)},e.URL="ui://29pr43hcso0na6ad",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],HallUI_btnFriend:[function(t,e,n){"use strict";cc._RF.push(e,"85d37HS+7xJyL7lsNZUkltc","HallUI_btnFriend");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","btnFriend")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(1)},e.URL="ui://29pr43hc9ekokl",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],HallUI_btnGDMatch:[function(t,e,n){"use strict";cc._RF.push(e,"b7083n1SCFGT75CWBdmKXDQ","HallUI_btnGDMatch");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","btnGDMatch")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(3)},e.URL="ui://29pr43hcjekqa6c6",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],HallUI_btnMall:[function(t,e,n){"use strict";cc._RF.push(e,"40616No86dDDa+PcBn7erA8","HallUI_btnMall");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","btnMall")},e.prototype.onConstruct=function(){this.m_ani=this.getChildAt(0),this.m_TMoveUp=this.getTransitionAt(0),this.m_TMoveDown=this.getTransitionAt(1)},e.URL="ui://29pr43hcogeka61t",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],HallUI_btnMatchStartHint:[function(t,e,n){"use strict";cc._RF.push(e,"b8b1a9oCD9HH4REMGodrWKR","HallUI_btnMatchStartHint");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","btnMatchStartHint")},e.prototype.onConstruct=function(){this.m_txtMatch=this.getChildAt(0)},e.URL="ui://29pr43hcji2ya6ch",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],HallUI_btnMore:[function(t,e,n){"use strict";cc._RF.push(e,"afc44U9YgFBsLHWGF3sZdQT","HallUI_btnMore");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","btnMore")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(0)},e.URL="ui://29pr43hcktsja6be",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],HallUI_btnMult:[function(t,e,n){"use strict";cc._RF.push(e,"d1039+9wFVGErgSIwLY26tE","HallUI_btnMult");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","btnMult")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(1)},e.URL="ui://29pr43hcw1xoa63b",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],HallUI_layerHall2:[function(t,e,n){"use strict";cc._RF.push(e,"028f3wkzyhLqLAmABZzIxFl","HallUI_layerHall2");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","layerHall2")},e.prototype.onConstruct=function(){this.m_cFinger=this.getControllerAt(0),this.m_BtnMult=this.getChildAt(0),this.m_BtnClassical=this.getChildAt(1),this.m_BtnNoShuffle=this.getChildAt(2),this.m_BtnErRen=this.getChildAt(3),this.m_BtnTTZ=this.getChildAt(4),this.m_finger_spine=this.getChildAt(5),this.m_TMove=this.getTransitionAt(0),this.m_TMoveIn=this.getTransitionAt(1)},e.URL="ui://29pr43hchxbxa6ck",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],HallUI_layerHall:[function(t,e,n){"use strict";cc._RF.push(e,"9fe04crmd1Jo7hZkUgfuS3z","HallUI_layerHall");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("HallUI","layerHall")},e.prototype.onConstruct=function(){this.m_cFinger=this.getControllerAt(0),this.m_cMatch=this.getControllerAt(1),this.m_BtnMatch=this.getChildAt(0),this.m_BtnFriendTeam=this.getChildAt(1),this.m_BtnMult=this.getChildAt(2),this.m_BtnFriend=this.getChildAt(3),this.m_BtnClassical=this.getChildAt(4),this.m_finger_spine=this.getChildAt(5),this.m_listMatchHint=this.getChildAt(6),this.m_TMove=this.getTransitionAt(0),this.m_TMoveIn=this.getTransitionAt(1)},e.URL="ui://29pr43hcyep12n",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],HallUI:[function(t,e,n){"use strict";cc._RF.push(e,"005afDLkOlISJFv2T2QV04f","HallUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.HallUI=n.HallUITab=void 0;var s,c,l,u=t("../../Framework/Manager/EventManager"),d=t("../../Framework/Manager/UIManager"),p=t("../../Framework/UI/BaseUI"),h=t("../Base/Data/DataConstant"),_=t("../Base/Data/DataEvent"),f=t("../HallGround/HallGroundUI"),m=t("./HallUI/HallUIBinder"),g=t("../Game/GuanDan/GameUI"),y=t("./HallModel"),I=t("../Shop/ShopModel"),C=t("../Base/View/UIHelp"),M=t("../Setting/SettingUI"),v=t("../Shop/ShopConfig"),E=t("../ExchangeUI/ExchangeUI"),A=t("../UserInfo/UserInfoUI"),P=t("../Mail/MailUI"),b=t("../UserInfo/UserInfoModel"),U=t("../Activity/CollectUI/CollectUI"),S=t("../CreateRoomUI/CreateRoomUI"),T=t("../Base/Utils/UtilView"),R=t("../../Framework/Manager/CoroutineManager"),w=t("../Base/Module/BfAnalytics/DataPointID"),D=t("../Base/Module/BfAnalytics/BfasManager"),O=t("../Base/Data/DataBfConfig"),L=t("../Base/Module/Platform/Const/PlatformEventType"),G=t("../Activity/ActivityUI/ActivityUI"),B=t("../Activity/ActivityUI/ActivityModel"),N=t("../FriendTeam/FriendTeamModel"),F=t("../FeedBack/FeedBackUI"),k=t("../Base/Module/Room/RoomModel"),x=t("../Activity/TenYearBoxUI/TenYearBoxUI"),j=t("../Base/Data/DataSpineAni"),H=t("../Rule/RuleUI"),W=t("../Base/Module/Platform/PlatformManager"),Y=t("../Base/Utils/UtilString"),V=t("../Base/Utils/UtilCC"),q=t("../FriendTeam/FriendTeamUI"),K=t("../Base/Data/DatazOrder"),X=t("../Welfare/WelfareUI"),J=t("../Base/View/Common/DialogUI"),z=t("../Base/Module/Room/ClubConfig"),Q=t("../Activity/TenYearBoxUI/TenYearBoxModel"),Z=t("../Match/MatchUI"),$=t("../Activity/Advertise/AdModel"),tt=t("../Match/MatchModel"),et=t("../Match/MatchConstant"),nt=t("../Activity/QuestionaireUI/AnswerAwardUI"),ot=t("../Activity/InviteGift/InviteGiftModel"),at=t("../Activity/YearBeast/YearBeastModel"),it=t("../FeedBack/FeedBackSuggUI"),rt=t("../Match/MatchHintUI/LongCountDownUI");(function(t){t[t.HALL=0]="HALL",t[t.GROUND=1]="GROUND",t[t.FRIEND_ROOM=2]="FRIEND_ROOM",t[t.FRIEND_TEAM=3]="FRIEND_TEAM",t[t.MATCH_HALL=4]="MATCH_HALL",t[t.MATCH_ROUND=5]="MATCH_ROUND"})(s=n.HallUITab||(n.HallUITab={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(c||(c={})),function(t){t[t.NORMOL_CENTER=0]="NORMOL_CENTER",t[t.NOT_MATCH_CENTER=1]="NOT_MATCH_CENTER"}(l||(l={}));var st=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._canClickGameIcon=!0,e._barCoinGroundPosX=null,e._barDiamondGroundPosX=null,e._leftHallPosX=null,e._rightHallPosX=null,e._btnQuickStartPosX=null,e._matchShowPage=0,e._HintInfo=[],e._coMatchHint=null,e}var n;return a(e,t),n=e,e.uiBind=function(){m.default.bindAll()},Object.defineProperty(e,"sortingOrder",{get:function(){return K.DataZOrder.Bottom},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return y.default.instance},enumerable:!1,configurable:!0}),e.getExtPkgNames=function(){return[h.DataConstant.PKG_COMMON]},Object.defineProperty(e.prototype,"willClearOnDestroy",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,n,o){N.FriendTeamModel.instance.isInTeam()||this.gotoTab(t,e,n,o)},e.prototype.onLoad=function(){this.initData(),this.initParams(),this.initListener(),this.initUI(),this.initAni()},e.prototype.onDestroy=function(){this.stopMatchHint(),t.prototype.onDestroy.call(this)},e.prototype.initData=function(){u.EventManager.instance.emit(_.DataEvent.EveryDayFirstLogin,y.default.instance.checkNewDay())},e.prototype.initParams=function(){this._barCoinGroundPosX=this.view.m_Top.m_barCoin.x-212,this._barDiamondGroundPosX=this.view.m_Top.m_barDiamond.x-212,this._leftHallPosX=this.view.m_Left.x,this._rightHallPosX=this.view.m_Right.x,this._btnQuickStartPosX=this.view.m_Bottom.m_btnQuickStart.x},e.prototype.initListener=function(){u.EventManager.instance.on(L.PlatformEventType.AppHide,this,this.onAppHide),u.EventManager.instance.on(_.DataEvent.EnterGameTable,this,this.onEnterTable),u.EventManager.instance.on(_.DataEvent.UserInfoUpdate,this,this.onUserInfoUpdate),u.EventManager.instance.on(_.DataEvent.PlazaInfoUpdate,this,this.onPlazaInfoUpdate),u.EventManager.instance.on(_.DataEvent.PlazaRecommond,this,this.onPlazaInfoUpdate),u.EventManager.instance.on(_.DataEvent.HallMailRedStatus,this,this.updateMailRedStatus),u.EventManager.instance.on(_.DataEvent.HallActivityRedStatus,this,this.updateActivityRedStatus),u.EventManager.instance.on(_.DataEvent.BackHall,this,this.onBackHall),u.EventManager.instance.on(_.DataEvent.FriendTeamHideHall,this,this.onFriendTeamHideHall),u.EventManager.instance.on(_.DataEvent.OpenFriendRoomUI,this,this.onBtnEnterFriendRoomLayer),u.EventManager.instance.on(_.DataEvent.TenYearBoxUpdate,this,this.onUpdateTenYearBoxIcon),u.EventManager.instance.on(_.DataEvent.updateAnswerAward,this,this.onUpdateAnswerAwardIcon),u.EventManager.instance.on(_.DataEvent.InviteGiftInfo,this,this.onUpdateInviteGiftIcon),u.EventManager.instance.on(_.DataEvent.ReceiveAuthAwardInfo,this,this.onReceiveAuthAwardInfo),u.EventManager.instance.on(_.DataEvent.ClientControlUpdate,this,this.onClientControlUpdate),u.EventManager.instance.on(_.DataEvent.VideoAdRedUpdate,this,this.onVideoAdUpdate),u.EventManager.instance.on(et.MatchDataEvent.MatchHideHall,this,this.onMatchHideHall),u.EventManager.instance.on(_.DataEvent.YearBeastInfo,this,this.onYearBeastInfo),u.EventManager.instance.on(_.DataEvent.YearBeastTaskInfo,this,this.onYearBeastTaskInfo),u.EventManager.instance.on(et.MatchDataEvent.MatchStartHint3,this,this.onMatchStartHint),this.view.m_Bottom.m_btnShop.onClick(this.onBtnShop,this),this.view.m_Bottom.m_btnSet.onClick(this.onBtnSet,this),this.view.m_Bottom.m_btnCustomer.onClick(this.onBtnCustomer,this),this.view.m_Bottom.m_btnMail.onClick(this.onBtnMail,this),this.view.m_Bottom.m_btnExchange.onClick(this.onBtnExchange,this),this.view.m_Bottom.m_btnActivity.onClick(this.onBtnActivity,this),this.view.m_Bottom.m_btnQuickStart.onClick(this.onBtnQuickStart,this),this.view.m_Left.m_btnTenYearBox.onClick(this.onBtnTenYearBox,this),this.view.m_Left.m_btnWelfare.onClick(this.onBtnWelfare,this),this.view.m_Left.m_btnVideoAd.onClick(this.onBtnVideoAd,this),this.view.m_Left.m_btnInviteGift.onClick(this.onBtnInviteGift,this),this.view.m_Left.m_btnYearBeast.onClick(this.onBtnYearBeastClick,this),this.view.m_Center.m_BtnMult.onClick(this.onBtnEnterRoomLayer,this),this.view.m_Center.m_BtnClassical.onClick(this.onBtnEnterRoomLayer,this),this.view.m_Center.m_BtnFriend.onClick(this.onBtnEnterFriendRoomLayer,this),this.view.m_Center.m_BtnFriendTeam.onClick(this.onBtnFriendTeam,this),this.view.m_Center.m_BtnMatch.onClick(this.onBtnGDMatch,this),this.view.m_Center2.m_BtnMult.onClick(this.onBtnEnterRoomLayer,this),this.view.m_Center2.m_BtnClassical.onClick(this.onBtnEnterRoomLayer,this),this.view.m_Center2.m_BtnNoShuffle.onClick(this.onBtnEnterRoomLayer,this),this.view.m_Center2.m_BtnErRen.onClick(this.onBtnEnterRoomLayer,this),this.view.m_Center2.m_BtnTTZ.onClick(this.onBtnEnterRoomLayer,this),this.view.m_Right.m_BtnMore.onClick(this.onBtnEnterRoomLayer,this),this.view.m_Top.m_BtnBack.onClick(this.onBtnBackHall,this),this.view.m_Top.m_playerInfo.m_avatar.onClick(this.onButtonUserInfo,this),this.view.m_Top.m_barCoin.m_btnAdd.onClick(this.onGoldClick,this),this.view.m_Top.m_barDiamond.m_btnAdd.onClick(this.onDiamondClick,this),this.view.m_Top.m_btnRule.onClick(this.onBtnRule,this),this.view.m_Top.m_btnFeedback.onClick(this.onBtnFeedback,this),this.view.m_Top.m_btnCollect.onClick(this.onBtnCollect,this),this.view.m_Top.m_btnAnwerAward.onClick(this.onBtnAnswerAward,this)},e.prototype.initUI=function(){this.adaptFullScreen(),this.initCenterAndRightComp(),this.initWebPlatformUI(),this.updateUserInfo(),this.updateUserCoin(),this.updateQuickStartInfo(),this.updateActivityRedStatus(),this.updateFriendTeam(),this.updateBtnTenYearBoxVisible(),this.updateBtnYearBeast(),this.updateYearBeastVisible(),this.initVideoAdRedPoint(),this.updateVideoAd(),this.initMeituanInfo(),this.initMatchHint()},e.prototype.initAni=function(){V.UtilCC.instantiatePrefab(j.DataSpineAniPath.ANI_HALL_BTN_SHOP,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"shangcheng",!0)},this.view.m_Bottom.m_btnShop.m_ani.node),V.UtilCC.instantiatePrefab(j.DataSpineAniPath.ANI_GUIDE_FINGER,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"ShouDianJi",!0)},this.view.m_Center.m_finger_spine.node),V.UtilCC.instantiatePrefab(j.DataSpineAniPath.ANI_BTN_START,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"btn_ksks",!0)},this.view.m_Bottom.m_btnQuickStart.m_ani.node),this.model.checkIsHallNotMatch()?(V.UtilCC.instantiatePrefab(j.DataSpineAniPath.ANI_HALL_BTN_MULT2,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"fanbei_ty",!0)},this.view.m_Center2.m_BtnMult.m_spineNode.node),V.UtilCC.instantiatePrefab(j.DataSpineAniPath.ANI_HALL_BTN_CLASSIC2,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"jingdian_ty",!0)},this.view.m_Center2.m_BtnClassical.m_spineNode.node),V.UtilCC.instantiatePrefab(j.DataSpineAniPath.ANI_HALL_BTN_NOSHUFFLE2,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"03_fanb",!0)},this.view.m_Center2.m_BtnNoShuffle.m_spineNode.node)):(V.UtilCC.instantiatePrefab(j.DataSpineAniPath.ANI_HALL_BTN_MULT,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"5buxipai_",!0)},this.view.m_Center.m_BtnMult.m_spineNode.node),V.UtilCC.instantiatePrefab(j.DataSpineAniPath.ANI_HALL_BTN_MATCH,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"rk_bisai",!0)},this.view.m_Center.m_BtnMatch.m_spineNode.node),V.UtilCC.instantiatePrefab(j.DataSpineAniPath.ANI_HALL_BTN_TEAM,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"rk_xiaoqiche",!0)},this.view.m_Center.m_BtnFriendTeam.m_spineNode.node),V.UtilCC.instantiatePrefab(j.DataSpineAniPath.ANI_HALL_MORE,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"rk_qita",!0)},this.view.m_Right.m_BtnMore.m_spineNode.node))},e.prototype.addParticle=function(t){V.UtilCC.instantiatePrefab(j.DataSpineAniPath.ANI_ENTRANCE_PARTICLE,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"rk_lizi",!0)},t)},e.prototype.adaptFullScreen=function(){if(T.UtilView.isFullScreen()){var t=h.DataConstant.ADAPTER_WIDTH_VALUE+28;this.view.m_Left.x=this.view.m_Left.x+t,this.view.m_Right.x=this.view.m_Right.x-t,this.view.m_Top.m_topCotent.x=this.view.m_Top.m_topCotent.x+t,this.view.m_Bottom.m_bottomContent.x=this.view.m_Bottom.m_bottomContent.x+t,this.view.m_Bottom.m_btnQuickStart.x=this._btnQuickStartPosX-t,this.view.m_Bottom.m_btnSet.x=this.view.m_Bottom.m_btnSet.x+20,this.view.m_Bottom.m_btnCustomer.x=this.view.m_Bottom.m_btnCustomer.x+40,this.view.m_Bottom.m_btnMail.x=this.view.m_Bottom.m_btnMail.x+60,this.view.m_Bottom.m_btnActivity.x=this.view.m_Bottom.m_btnActivity.x+80,this.view.m_Bottom.m_btnExchange.x=this.view.m_Bottom.m_btnExchange.x+100,this.view.m_Bottom.y=this.view.m_Bottom.y-h.DataConstant.ADAPTER_HEIGHT_VALUE,this.view.m_Bottom.m_bg.height=this.view.m_Bottom.m_bg.height+h.DataConstant.ADAPTER_HEIGHT_VALUE}},e.prototype.initCenterAndRightComp=function(){this.model.checkIsHallNotMatch()?(this.view.m_cCenterCompType.selectedIndex=l.NOT_MATCH_CENTER,this.view.m_Right.visible=!1):(this.view.m_cCenterCompType.selectedIndex=l.NORMOL_CENTER,this.view.m_Right.visible=!0)},e.prototype.initWebPlatformUI=function(){W.PlatformManager.instance.isSkyWingPlatForm()?(this.view.m_Bottom.m_btnMail.visible=!1,this.view.m_Left.m_btnWelfare.visible=!1):W.PlatformManager.instance.isMeiTuanPlatForm()?this.view.m_Left.m_btnWelfare.visible=!1:W.PlatformManager.instance.isStrongArmyPlatForm()&&(this.view.m_Left.m_btnWelfare.visible=!1),O.DataBfConfig.isWebPlatform()&&(this.view.m_Top.m_btnCollect.visible=!1),W.PlatformManager.instance.platform.isSupportVideoAd||(this.view.m_Left.m_btnVideoAd.visible=!1),W.PlatformManager.instance.supportAct.ACTIVITY_CENTER||(this.view.m_Bottom.m_btnActivity.visible=!1)},e.prototype.updateUserInfo=function(){var t=y.default.instance.getUserHeadUrl();this.view.m_Top.m_playerInfo.m_avatar.m_avatarPic.url=t;var e=y.default.instance.getUserNickName();W.PlatformManager.instance.isSkyWingPlatForm()?this.view.m_Top.m_playerInfo.m_name.text=e.slice(0,4)+"****"+e.slice(9):this.view.m_Top.m_playerInfo.m_name.text=C.UIHelp.formatNicknameL(e);var n=y.default.instance.getNumID();this.view.m_Top.m_playerInfo.m_numid.text="\u8d26\u53f7:"+n.toString();var o=b.UserInfoModel.instance.isAuthorized();this.view.m_Top.m_playerInfo.m_NoAvatar.selectedIndex=o?0:1;var a=0===b.UserInfoModel.instance.getGameCount();this.view.m_Center.m_cFinger.selectedIndex=a?1:0},e.prototype.updateUserCoin=function(){var t=y.default.instance.getGoldCount();this.view.m_Top.m_barCoin.m_score.text=Y.UtilString.getCurrencyShortString(t);var e=y.default.instance.getDiamondCount();this.view.m_Top.m_barDiamond.m_score.text=Y.UtilString.getCurrencyShortString(e)},e.prototype.updateQuickStartInfo=function(){var t=this;this.model.doPullRoomListSucessCo(function(){var e=k.RoomModel.instance.getRecRoomInfo(null,!0);if(e){var n=k.RoomModel.instance.getRoomDesc(e.subID);t.view.m_Bottom.m_btnQuickStart.text=n}})},e.prototype.onBtnShop=function(){I.ShopModel.instance.showShopUI(v.ShopPageTypeEnum.GOLD)},e.prototype.onBtnCustomer=function(){D.BfasManager.instance.sendEvt(w.FeedBackPointID.CLICK_ICON),d.UIManager.instance.open(F.FeedBackUI)},e.prototype.onBtnSet=function(){d.UIManager.instance.open(M.default)},e.prototype.onBtnMail=function(){d.UIManager.instance.open(P.MailUI)},e.prototype.onBtnActivity=function(){console.log("onBtnActivity"),d.UIManager.instance.open(G.ActivityUI).then(function(t){t.init()})},e.prototype.onBtnExchange=function(){d.UIManager.instance.open(E.ExchangeUI)},e.prototype.onBtnQuickStart=function(){this.checkMatchLocation()||y.default.instance.doQuickStartToGame()},e.prototype.onBtnEnterRoomLayer=function(t){if(!this.checkMatchLocation()&&this._canClickGameIcon){this._canClickGameIcon=!1;var e=fgui.GObject.cast(t.currentTarget).data,n=Math.floor(+e/1e3),o=1===Math.floor(+e%1e3);this.gotoTab(s.GROUND,n,o)}},e.prototype.onBtnEnterFriendRoomLayer=function(){var t=this;if(D.BfasManager.instance.sendEvt(w.BoxRoomPointID.ENTRANCE),!this.checkMatchLocation()){var e=b.UserInfoModel.instance.getUserLocation();if(!e||!e.subid&&e.clubmode!==z.ClubModeEnum.FRIEND_ROOM){var n=b.UserInfoModel.instance.getPartnerLocation();n&&n.appid?d.UIManager.instance.open(J.DialogUI).then(function(e){e.initFTConfirmCancelClose({content:"\u60a8\u8fd8\u6709\u7ec4\u961f\u961f\u4f0d\u672a\u89e3\u6563\uff0c\u662f\u5426\u89e3\u6563\n\u5e76\u7acb\u5373\u5f00\u59cb\u65b0\u7684\u6e38\u620f\uff1f",btnFTConfirm:"\u8fd4\u56de\u961f\u4f0d",btnFTCancel:"\u7acb\u5373\u5f00\u59cb"}),e.confirmAction=function(){N.FriendTeamModel.instance.joinTeam(n.partnerid,n.partnertype)},e.cancelAction=function(){N.FriendTeamModel.instance.leaveTeam(function(){b.UserInfoModel.instance.clearPartnerLocation(),t.gotoTab(s.FRIEND_ROOM)})}}):this.gotoTab(s.FRIEND_ROOM)}else k.RoomModel.instance.doEnterGameInRoom()}},e.prototype.onUpdateTenYearBoxIcon=function(){this.updateBtnTenYearBoxVisible()},e.prototype.onUpdateAnswerAwardIcon=function(t){this.view.m_Top.m_btnAnwerAward.visible=t},e.prototype.onUpdateInviteGiftIcon=function(){this.view.m_Left.m_btnInviteGift.m_CIsNew.selectedIndex=ot.InviteGiftModel.instance.canAward()?1:0,this.view.m_Left.m_btnInviteGift.visible=ot.InviteGiftModel.instance.isActive()},e.prototype.onReceiveAuthAwardInfo=function(){this.updateFriendTeam()},e.prototype.onClientControlUpdate=function(){this.updateBtnTenYearBoxVisible()},e.prototype.onBtnAnswerAward=function(){D.BfasManager.instance.sendEvt(w.AnswerAwardPointID.CLICK_ICON),d.UIManager.instance.open(nt.AnswerAwardUI)},e.prototype.onBtnFeedback=function(){d.UIManager.instance.open(it.FeedBackSuggUI).then(function(t){t.init(it.FeedBackSuggSource.HALL)})},e.prototype.onBtnCollect=function(){d.UIManager.instance.open(U.CollectUI)},e.prototype.onBtnWelfare=function(){d.UIManager.instance.open(X.default)},e.prototype.onBtnTenYearBox=function(){D.BfasManager.instance.sendEvt(w.TenYearBoxPointID.CLICK_ICON),d.UIManager.instance.open(x.TenYearBoxUI)},e.prototype.onBtnVideoAd=function(){D.BfasManager.instance.sendEvt(w.ActivityPointID.videoAwardScene.click),y.default.instance.toShowVideoAd()},e.prototype.onBtnInviteGift=function(){ot.InviteGiftModel.instance.showActivity()},e.prototype.onBtnYearBeastClick=function(){at.YearBeastModel.instance.openYearBeastUI()},e.prototype.onVideoAdUpdate=function(){this.updateVideoAd()},e.prototype.onMatchHideHall=function(){this.gotoTab(s.MATCH_HALL)},e.prototype.onBtnBackHall=function(){this.onBackHall(s.HALL)},e.prototype.onBackHall=function(t,e,n){this.initMatchHint(),this.gotoTab(null!=t?t:s.HALL,e,n)},e.prototype.onFriendTeamHideHall=function(){this.gotoTab(s.FRIEND_TEAM)},e.prototype.onButtonUserInfo=function(){b.UserInfoModel.instance.isAuthorized()?d.UIManager.instance.open(A.UserInfoUI):C.UIHelp.instance.syncUserInfo()},e.prototype.onYearBeastInfo=function(){this.updateYearBeastVisible()},e.prototype.onYearBeastTaskInfo=function(){this.updateBtnYearBeast()},e.prototype.onGoldClick=function(){I.ShopModel.instance.showShopUI(v.ShopPageTypeEnum.GOLD)},e.prototype.onDiamondClick=function(){I.ShopModel.instance.showShopUI(v.ShopPageTypeEnum.DIAMOND)},e.prototype.gotoTab=function(t,e,n,o){var a=this;if(this.model.setGotoTable(t),this.view.m_T_Hall.selectedIndex!==t){var i=0;if(s.GROUND===this.view.m_T_Hall.selectedIndex?(this.view.m_Top.m_ani_down.play(),d.UIManager.instance.isExist(f.HallGroundUI)&&d.UIManager.instance.get(f.HallGroundUI).then(function(t){return t.goBackHallAnim(function(){d.UIManager.instance.close(f.HallGroundUI)})}),i=.22):s.HALL===this.view.m_T_Hall.selectedIndex&&this.view.m_ani_ground.play(),s.HALL===t)i>0?R.CoroutineManager.instance.once(i,function(){a.playBackHall()}):this.playBackHall();else if(s.GROUND===t)this.model.doPullRoomListSucessCo(this.openHallGroundUI.bind(this,e,n));else if(s.FRIEND_ROOM===t)d.UIManager.instance.open(S.CreateRoomUI),this.view.m_T_Hall.selectedIndex=s.FRIEND_ROOM,this.view.m_Top.m_ani_down.play();else if(s.FRIEND_TEAM===t)d.UIManager.instance.isExist(q.FriendTeamUI)?(this.view.m_T_Hall.selectedIndex=s.FRIEND_TEAM,this.view.m_Top.m_ani_down.play()):this.createTeam();else if(s.MATCH_HALL===t||s.MATCH_ROUND===t)if(d.UIManager.instance.isExist(Z.MatchUI))this.view.m_T_Hall.selectedIndex=s.MATCH_HALL,this.view.m_Top.m_ani_down.play();else{var r;r=s.MATCH_ROUND===t?tt.EnterMatchSceneEnum.ROUND:(null==o?void 0:o.scene)||tt.EnterMatchSceneEnum.NONE,tt.MatchModel.instance.openMatchUI({scene:r,matchID:null==o?void 0:o.matchID,matchSubID:null==o?void 0:o.matchSubID})}}},e.prototype.openHallGroundUI=function(t,e){var n=this;d.UIManager.instance.open(f.HallGroundUI).then(function(o){O.GameIDInfo.PASSA_GD.id===t&&(t=O.GameIDInfo.CLASSIC_GD.id),o.init(t,e),n._canClickGameIcon=!0,n.view.m_T_Hall.selectedIndex=s.GROUND,T.UtilView.isFullScreen()&&(n.view.m_Top.m_barCoin.x=n._barCoinGroundPosX+h.DataConstant.ADAPTER_WIDTH_VALUE+28,n.view.m_Top.m_barDiamond.x=n._barDiamondGroundPosX+h.DataConstant.ADAPTER_WIDTH_VALUE+28),n.view.m_Top.m_ani_top.play(),n.view.m_Top.m_barCoin.y=-92,n.view.m_Top.m_barDiamond.y=-92})},e.prototype.playBackHall=function(){if(this.view.m_T_Hall.selectedIndex=s.HALL,T.UtilView.isFullScreen()){var t=h.DataConstant.ADAPTER_WIDTH_VALUE+28;this.view.m_Left.x=this._leftHallPosX+t,this.view.m_Right.x=this._rightHallPosX-t,this.view.m_Bottom.m_TMoveUp.setValue("btnQuickStart_aniX",this._btnQuickStartPosX-t,-1)}else this.view.m_Left.x=this._leftHallPosX,this.view.m_Right.x=this._rightHallPosX;this.view.m_Top.m_barCoin.y=-92,this.view.m_Top.m_barDiamond.y=-92,this.view.m_ani_hall.play()},e.prototype.onAppHide=function(){console.log(">----\x3eonAppHide.HallUI"),y.default.instance.isEverBackToHall||(b.UserInfoModel.instance.isNewRegisterPlayer()?D.BfasManager.instance.evtUserLinkPoint(w.UserConvertLinkPointID.HALL_HIDE.eventid,w.UserConvertLinkPointID.HALL_HIDE.eventName,!0,"1"):D.BfasManager.instance.evtUserLinkPoint(w.UserConvertLinkPointID.HALL_HIDE.eventid,w.UserConvertLinkPointID.HALL_HIDE.eventName,!0,"2"))},e.prototype.onEnterTable=function(){d.UIManager.instance.gotoScene(g.GameUI)},e.prototype.onUserInfoUpdate=function(){this.updateUserInfo(),this.updateUserCoin()},e.prototype.onPlazaInfoUpdate=function(){this.updateQuickStartInfo()},e.prototype.updateActivityRedStatus=function(){this.view.m_Bottom.m_btnActivity.m_CIsNew.selectedIndex=B.ActivityModel.instance.showHallActivityRed()?1:0},e.prototype.updateMailRedStatus=function(t){this.view.m_Bottom.m_btnMail.m_CIsNew.selectedIndex=t?1:0},e.prototype.onBtnRule=function(){d.UIManager.instance.open(H.RuleUI)},e.prototype.onBtnFriendTeam=function(){D.BfasManager.instance.sendEvt(w.FriendMixTeamPointID.BTN_HALL_ENTER_TEAM,N.FriendTeamModel.instance.bfasParamUserType),this.checkMatchLocation()||this.createTeam()},e.prototype.createTeam=function(){N.FriendTeamModel.instance.createTeam()},e.prototype.onBtnGDMatch=function(){D.BfasManager.instance.sendEvt(w.MatchPoint.HALL_CLICK_MATCH),this.goToMatch()},e.prototype.goToMatch=function(t){var e=this,n=b.UserInfoModel.instance.getUserLocation();if(!n||!n.subid&&n.clubmode!==z.ClubModeEnum.FRIEND_ROOM){var o=b.UserInfoModel.instance.getPartnerLocation();o&&o.appid?d.UIManager.instance.open(J.DialogUI).then(function(n){n.initFTConfirmCancelClose({content:"\u60a8\u8fd8\u6709\u7ec4\u961f\u961f\u4f0d\u672a\u89e3\u6563\uff0c\u662f\u5426\u89e3\u6563\n\u5e76\u7acb\u5373\u5f00\u59cb\u65b0\u7684\u6e38\u620f\uff1f",btnFTConfirm:"\u8fd4\u56de\u961f\u4f0d",btnFTCancel:"\u7acb\u5373\u5f00\u59cb"}),n.confirmAction=function(){N.FriendTeamModel.instance.joinTeam(o.partnerid,o.partnertype)},n.cancelAction=function(){N.FriendTeamModel.instance.leaveTeam(function(){if(b.UserInfoModel.instance.clearPartnerLocation(),tt.MatchModel.instance.getMatchLocationAppID()>0){var n=tt.MatchModel.instance.getMatchLocation();tt.MatchModel.instance.relinkMatch(n.appid,n.matchid,n.matchsubid)}else e.gotoTab(s.MATCH_HALL,null,null,t)})}}):this.checkMatchLocation()||this.gotoTab(s.MATCH_HALL,null,null,t)}else k.RoomModel.instance.doEnterGameInRoom()},e.prototype.updateFriendTeam=function(){this.view.m_Center.m_BtnFriendTeam.visible=b.UserInfoModel.instance.isOpenFriendTeam()},e.prototype.updateBtnTenYearBoxVisible=function(){this.view.m_Left.m_btnTenYearBox.visible=Q.TenYearBoxModel.instance.isShow()},e.prototype.updateBtnYearBeast=function(){var t=at.YearBeastModel.instance.curBlood>0?at.YearBeastModel.instance.getCanReceiveTaskCnt():0;this.view.m_Left.m_btnYearBeast.m_CIsNew.selectedIndex=t>0?1:0,this.view.m_Left.m_btnYearBeast.m_CNewHasNum.selectedIndex=1,this.view.m_Left.m_btnYearBeast.title=""+t},e.prototype.updateYearBeastVisible=function(){var t=at.YearBeastModel.instance.isActive;this.view.m_Left.m_btnYearBeast.visible=t,t&&0==this.view.m_Left.m_btnYearBeast.m_spineNode.node.childrenCount&&V.UtilCC.instantiatePrefab(j.DataSpineAniPath.ANI_YEAR_BEAST_ENTRANCE,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"rk_nianshou",!0)},this.view.m_Left.m_btnYearBeast.m_spineNode.node)},e.prototype.initVideoAdRedPoint=function(){this.view.m_Left.m_btnVideoAd.m_CIsNew.selectedIndex=1,this.view.m_Left.m_btnVideoAd.m_CNewHasNum.selectedIndex=1},e.prototype.updateVideoAd=function(){var t=$.AdModel.instance.adInfo.hadGotCount||0,e=($.AdModel.instance.adInfo.totalCount||0)-t;e<0&&(e=0),this.view.m_Left.m_btnVideoAd.title=e.toString()},e.prototype.initMeituanInfo=function(){W.PlatformManager.instance.isMeiTuanPlatForm()&&(C.UIHelp.instance.syncUserInfo(),this.view.m_Top.m_btnCollect.visible=!1)},e.prototype.onMatchStartHint=function(t){var e=this;d.UIManager.instance.isExist(Z.MatchUI)||(D.BfasManager.instance.sendEvt(w.MatchPoint.HALL_MATCH_HINT_SHOW),d.UIManager.instance.open(rt.LongCountDownUI).then(function(o){o.init({name:t.info.sname,time:t.time}),o.confirmAction=function(){console.warn("ttt.onMatchStartHint ok:",t),D.BfasManager.instance.sendEvt(w.MatchPoint.HALL_MATCH_HINT_OK),d.UIManager.instance.closeAll(null,n),e.gotoTab(s.MATCH_HALL,null,null,{scene:e.transferMatchTypeToScene(t.info.type),matchID:t.info.mid,matchSubID:t.info.msid})},o.cancelAction=function(){console.warn("ttt.onMatchStartHint cancel:",t),D.BfasManager.instance.sendEvt(w.MatchPoint.HALL_MATCH_HINT_CANCEL),tt.MatchModel.instance.cancelGDMatchQuick(t.info.appid,t.info.mid,t.info.msid,function(t){t&&u.EventManager.instance.emit(_.DataEvent.ToastData,"\u5df2\u6210\u529f\u53d6\u6d88\u62a5\u540d\u3002")})}}))},e.prototype.transferMatchTypeToScene=function(t){return t==tt.MatchTypeEnum.FIX_PLAYER?tt.EnterMatchSceneEnum.FIX_PLAYER:t==tt.MatchTypeEnum.FIX_TIME?tt.EnterMatchSceneEnum.FIX_TIME:tt.EnterMatchSceneEnum.GUIDE},e.prototype.initMatchHint=function(){var t=this;tt.MatchModel.instance.reqGetMatchList(function(e){if(e)if(t._HintInfo=tt.MatchModel.instance.getStartMatchList(tt.CDefaultCheckTime),t._HintInfo.length>0){t.stopMatchHint(),t.view.m_Center.m_cMatch.selectedIndex=c.SHOW;var n=t.view.m_Center.m_listMatchHint.m_listMatch;n.setVirtualAndLoop(),n.itemRenderer=t.initSubMatchItem.bind(t,t._HintInfo),n.numItems=t._HintInfo.length,t.startMatchHint()}else t.view.m_Center.m_cMatch.selectedIndex=c.HIDE,t.stopMatchHint();else t.view.m_Center.m_cMatch.selectedIndex=c.HIDE,t.stopMatchHint()})},e.prototype.initSubMatchItem=function(t,e,n){var o=t[e%t.length],a="[color=#FBFE00]\u3010"+o.name+"\u3011[/color]\u5c06\u4e8e[color=#FBFE00]"+o.time+"[/color]\u5f00\u8d5b,\u53ef\u524d\u5f80\u62a5\u540d";o.flag&&(a="[color=#FBFE00]\u3010"+o.name+"\u3011[/color]\u5c06\u4e8e[color=#FBFE00]"+o.time+"[/color]\u5f00\u8d5b,\u524d\u5f80\u6bd4\u8d5b"),n.m_txtMatch.text=a,n.data={type:o.type,matchID:o.matchID,matchSubID:o.matchSubID},n.onClick(this.onClickMatchHint,this)},e.prototype.onClickMatchHint=function(t){var e=fgui.GObject.cast(t.currentTarget).data;d.UIManager.instance.closeAll(null,n),this.goToMatch({scene:this.transferMatchTypeToScene(null==e?void 0:e.type),matchID:null==e?void 0:e.matchID,matchSubID:null==e?void 0:e.matchSubID})},e.prototype.startMatchHint=function(){var t=this;this._matchShowPage=0,this._coMatchHint&&R.CoroutineManager.instance.stopCo(this._coMatchHint),this._coMatchHint=R.CoroutineManager.instance.loop(5,function(){t.updateMatchHint()},this)},e.prototype.stopMatchHint=function(){this._coMatchHint&&R.CoroutineManager.instance.stopCo(this._coMatchHint),this._coMatchHint=null},e.prototype.updateMatchHint=function(){var t,e,n=Math.floor((new Date).getTime()/1e3),o=this.view.m_Center.m_listMatchHint.m_listMatch;this.view.m_Center.m_listMatchHint.m_listMatch.scrollToView(this._matchShowPage,!0),this._matchShowPage=this._matchShowPage+1,this._matchShowPage>=o.numItems+1&&(this._matchShowPage=1);try{for(var a=r(this._HintInfo),i=a.next();!i.done;i=a.next())if(i.value.timestamp<=n)return tt.MatchModel.instance.initAllMatchHint(),void this.initMatchHint()}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}},e.prototype.checkMatchLocation=function(){return tt.MatchModel.instance.getMatchLocationAppID()>0&&(C.UIHelp.instance.showDialog("\u60a8\u8fd8\u6709\u6bd4\u8d5b\u672a\u7ed3\u675f\uff0c\u8bf7\u5148\u8fd4\u56de\u5b8c\u6210\u5bf9\u5c40~",function(){var t=tt.MatchModel.instance.getMatchLocation();tt.MatchModel.instance.relinkMatch(t.appid,t.matchid,t.matchsubid)}),!0)},n=i([jsClass],e)}(p.BaseUI);n.HallUI=st,cc._RF.pop()},{"../../Framework/Manager/CoroutineManager":"CoroutineManager","../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/UI/BaseUI":"BaseUI","../Activity/ActivityUI/ActivityModel":"ActivityModel","../Activity/ActivityUI/ActivityUI":"ActivityUI","../Activity/Advertise/AdModel":"AdModel","../Activity/CollectUI/CollectUI":"CollectUI","../Activity/InviteGift/InviteGiftModel":"InviteGiftModel","../Activity/QuestionaireUI/AnswerAwardUI":"AnswerAwardUI","../Activity/TenYearBoxUI/TenYearBoxModel":"TenYearBoxModel","../Activity/TenYearBoxUI/TenYearBoxUI":"TenYearBoxUI","../Activity/YearBeast/YearBeastModel":"YearBeastModel","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataConstant":"DataConstant","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataSpineAni":"DataSpineAni","../Base/Data/DatazOrder":"DatazOrder","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Platform/Const/PlatformEventType":"PlatformEventType","../Base/Module/Platform/PlatformManager":"PlatformManager","../Base/Module/Room/ClubConfig":"ClubConfig","../Base/Module/Room/RoomModel":"RoomModel","../Base/Utils/UtilCC":"UtilCC","../Base/Utils/UtilString":"UtilString","../Base/Utils/UtilView":"UtilView","../Base/View/Common/DialogUI":"DialogUI","../Base/View/UIHelp":"UIHelp","../CreateRoomUI/CreateRoomUI":"CreateRoomUI","../ExchangeUI/ExchangeUI":"ExchangeUI","../FeedBack/FeedBackSuggUI":"FeedBackSuggUI","../FeedBack/FeedBackUI":"FeedBackUI","../FriendTeam/FriendTeamModel":"FriendTeamModel","../FriendTeam/FriendTeamUI":"FriendTeamUI","../Game/GuanDan/GameUI":"GameUI","../HallGround/HallGroundUI":"HallGroundUI","../Mail/MailUI":"MailUI","../Match/MatchConstant":"MatchConstant","../Match/MatchHintUI/LongCountDownUI":"LongCountDownUI","../Match/MatchModel":"MatchModel","../Match/MatchUI":"MatchUI","../Rule/RuleUI":"RuleUI","../Setting/SettingUI":"SettingUI","../Shop/ShopConfig":"ShopConfig","../Shop/ShopModel":"ShopModel","../UserInfo/UserInfoModel":"UserInfoModel","../UserInfo/UserInfoUI":"UserInfoUI","../Welfare/WelfareUI":"WelfareUI","./HallModel":"HallModel","./HallUI/HallUIBinder":"HallUIBinder"}],HandCardsLogic:[function(t,e,n){"use strict";cc._RF.push(e,"82580dGqQVLFoF2E/ODe7Ma","HandCardsLogic");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.HandCardsLogic=void 0;var a=t("./DefaultPokerCardsConst"),i=t("./PlayCardsParseRule"),r=t("./PokerAlgorithm"),s=t("./LogicRule"),c=t("../CardRule/CardFunc"),l=t("../CardRule/CardConstants"),u=function(){function t(){this.levelCard=-1,this.powerfulColor=-1,this.rule=null,this.cardsParseRule=null,this.levelCard=a.PokerCardValues.Card_2,this.powerfulColor=a.PokerCardColor.HongXin,null==this.rule&&(this.rule=new s.LogicRule),null==this.cardsParseRule&&(this.cardsParseRule=new i.PlayCardsParseRule),this.cards=r.PokerAlgorithm.ResetCards(null)}return t.prototype.setCards=function(t){this.cards=r.PokerAlgorithm.ResetCards(null),this.appendCards(t)},t.prototype.appendCard=function(t){var e=r.PokerAlgorithm.GetCardValueAndColor(t),n=e[0],o=e[1];null!=this.cards[n]&&(this.cards[n][o]=this.cards[n][o]+1,this.cards[n].count=this.cards[n].count+1)},t.prototype.deleteCard=function(t){var e=r.PokerAlgorithm.GetCardValueAndColor(t),n=e[0],o=e[1];null!=this.cards[n]&&null!=this.cards[n][o]&&(this.cards[n][o]=this.cards[n][o]-1,this.cards[n].count=this.cards[n].count-1)},t.prototype.appendCards=function(t){for(var e=0;e<this.getListLength(t);e++)this.appendCard(t[e])},t.prototype.getListLength=function(t){return r.PokerAlgorithm.getListLength(t)},t.prototype.deleteCards=function(t){for(var e=1;e<this.getListLength(t);e++)this.deleteCard(t[e])},t.prototype.ArrangeCards=function(t){for(var e=r.PokerAlgorithm.ResetCards(null),n=0;n<this.getListLength(t);n++){var o=r.PokerAlgorithm.GetCardValueAndColor(t[n]),a=o[0],i=o[1];null!=e[a]&&(e[a][i]=e[a][i]+1,e[a].count=e[a].count+1)}return e},t.prototype.analyCards=function(t){var e;return e=null==t?this.cards:this.ArrangeCards(t),this.rule.analyCards(e,this.levelCard,this.powerfulColor)},t.prototype.getTableColorForKey=function(t){for(var e={},n=0;n<t.length;n++){var o=t[n],a=c.CardFunc.getCardColor(o);e[a]||(e[a]=[]),e[a].push(o)}return e},t.prototype.getNumCountTableRealNumForKey=function(t){for(var e={},n=0;n<t.length;n++){var o=c.CardFunc.getCardNum(t[n]);e[o]||(e[o]=0),++e[o]}return e},t.prototype.findCards=function(t,e){var n;return n=null==e?this.cards:this.ArrangeCards(e),this.rule.findCards(n,this.levelCard,this.powerfulColor,t)},t.prototype.getPlayCards=function(t,e){var n;n=null==t?this.analyCards(e):this.findCards(t,e);var o=r.PokerAlgorithm.GetSortTableWithKey(n),a={};for(var i in o)for(var s=o[i],c=1;c<=this.getListLength(n[s]);c++)a[this.getListLength(a)+1]=n[s][c];return"function"==typeof r.PokerAlgorithm.DeleteRepeatedCards?r.PokerAlgorithm.DeleteRepeatedCards(a):a},t.prototype.setLevelCard=function(t){this.levelCard=t},t.prototype.setPowerfulColor=function(t){this.powerfulColor=t},t.prototype.parseCardsInfo=function(t){return this.cardsParseRule.parseCards(t,this.levelCard,this.powerfulColor)},t.prototype.playCardsCanOver=function(t,e){var n=null;return e.type==a.PokerCardsType.LianDui&&(n=e.type),this.cardsParseRule.parseCards(t,this.levelCard,this.powerfulColor,n).canOver(e)},t.prototype.getPlayCardsFromType=function(t,e){var n;n=null==e?this.cards:this.ArrangeCards(e);var o=this.rule.findCardsFromType(n,this.levelCard,this.powerfulColor,t),a=r.PokerAlgorithm.GetSortTableWithKey(o),i={};for(var s in a)for(var c=a[s],l=1;l<=this.getListLength(o[c]);l++)i[this.getListLength(i)+1]=o[c][l];return i},t.prototype.getCardsTableRealNumForKeyCountAndCardsIsProperty=function(t){for(var e={},n=0;n<t.length;n++){var o=t[n],a=c.CardFunc.getCardNum(t[n]);e[a]||(e[a]={count:0,cards:[]}),++e[a].count,e[a].cards.push(o)}return e},t.prototype.getNumWeight=function(t){return t===l.CardConstants.cardNums.CN_Z?22:t===l.CardConstants.cardNums.CN_F?21:t===this.levelCard+1?19:t},t.prototype.getSameCardsNoSplitArr=function(t,e,n){var o=[],a=e.maxCard+1,i=this.getNumWeight(a);for(var r in t){var s=Number(r),c=t[r];if(c.count===n||a>1&&1===n&&s>=l.CardConstants.cardNums.CN_F){var u=this.getNumWeight(s);u>i&&(1===n?o.push({cards:[c.cards[0]],isNoLiPai:!0,type:n,numWeight:u}):o.push({cards:c.cards,isNoLiPai:!0,type:n,numWeight:u}))}}return o},t.prototype.getLianDuiNoSplitArr=function(t,e){var n=[],o=e.maxCard+1,i=0,r=[],s=0;for(var c in t){var l=t[c],u=Number(c);if(2===l.count&&(0===s||s===u-1?++i:(i=1,r=[]),s=u,r=r.concat(l.cards)),3===i){var d=u;if(d>o){var p=r.concat();n.push({cards:p,isNoLiPai:!0,type:a.PokerCardsType.LianDui,numWeight:d})}--i,r.splice(0,2)}}return n},t.prototype.getLianSanNoSplitArr=function(t,e){var n=[],o=e.maxCard+1,i=0,r=[],s=0;for(var c in t){var l=t[c],u=Number(c);if(3===l.count&&(0===s||s===u-1?++i:(i=1,r=[]),s=u,r=r.concat(l.cards)),2===i){var d=u;d>o&&n.push({cards:r.concat(),isNoLiPai:!0,type:a.PokerCardsType.LianSan,numWeight:d}),--i,r.splice(0,3)}}return n},t.prototype.getShunZiNoSplitArr=function(t,e){var n=[],o=e.maxCard+1,i=0,r=[],s=0;for(var u in t){var d=t[u],p=Number(u);if(l.CardConstants.cardNums.CN_F===p||l.CardConstants.cardNums.CN_Z===p)break;if(1===d.count&&(0===s||s===p-1?++i:(i=1,r=[]),r=r.concat(d.cards),s=p),5===i){var h=p;if(h>o){for(var _=!0,f=1;f<r.length;f++)c.CardFunc.getCardColor(r[0])!==c.CardFunc.getCardColor(r[f])&&(_=!1);_||n.push({cards:r.concat(),isNoLiPai:!0,type:a.PokerCardsType.ShunZi,numWeight:h})}--i,r.splice(0,1)}}return n},t.prototype.getSanDaiErNoSplitArr=function(t,e){var n=[],o=e.maxCard+1,i=this.getNumWeight(o),r=[],s=[],c=0;for(var l in t){var u=t[l],d=Number(l),p=this.getNumWeight(d);3===u.count&&p>i&&r.push({cards:u.cards,numWeight:p}),2===u.count&&(0===s.length?(c=d,s=u.cards):this.getNumWeight(c)>this.getNumWeight(d)&&(c=d,s=u.cards))}if(r.length>0&&s.length>0)for(var h=0;h<r.length;h++){var _=(u=r[h]).cards.concat(s);n.push({cards:_,isNoLiPai:!0,type:a.PokerCardsType.SanDaiEr,numWeight:u.numWeight})}return n},t.prototype.getMaxZhaNoSplitArr=function(t,e,n){var o=[],i=e.maxCard+1,r=e.cards.length;n?e.type===a.PokerCardsType.TongHuaShun&&(i=0,r=6):(i=0,r=4);var s=this.getNumWeight(i),c=[];for(var u in t){var d=t[u],p=Number(u);if(p!==l.CardConstants.cardNums.CN_F&&p!==l.CardConstants.cardNums.CN_Z){var h=this.getNumWeight(p);(d.count>r||d.count===r&&h>s)&&o.push({cards:d.cards,isNoLiPai:!0,type:d.count,numWeight:h})}else c=c.concat(d.cards)}4===c.length&&o.push({cards:c,isNoLiPai:!0,type:a.PokerCardsType.WangZha,numWeight:22});var _=[];return(!n||r<6)&&(_=this.getTongHuaShunNoSplitArr(t,e,n)),o.concat(_)},t.prototype.getTongHuaShunNoSplitArr=function(t,e,n){var o=[],i=e.maxCard+1;n||(i=0);var r=0,s=[],u=0;for(var d in t){var p=t[d],h=Number(d);if(l.CardConstants.cardNums.CN_F===h||l.CardConstants.cardNums.CN_Z===h)break;if(1===p.count&&(0===u||u===h-1?++r:(r=1,s=[]),s=s.concat(p.cards),u=h),5===r){var _=h;if(_>i){for(var f=!0,m=1;m<s.length;m++)c.CardFunc.getCardColor(s[0])!==c.CardFunc.getCardColor(s[m])&&(f=!1);f&&o.push({cards:s.concat(),isNoLiPai:!0,type:a.PokerCardsType.TongHuaShun,numWeight:_})}--r,s.splice(0,1)}}return o},o([jsClass("HandCardsLogic")],t)}();n.HandCardsLogic=u,cc._RF.pop()},{"../CardRule/CardConstants":"CardConstants","../CardRule/CardFunc":"CardFunc","./DefaultPokerCardsConst":"DefaultPokerCardsConst","./LogicRule":"LogicRule","./PlayCardsParseRule":"PlayCardsParseRule","./PokerAlgorithm":"PokerAlgorithm"}],HistoryUIModel:[function(t,e,n){"use strict";cc._RF.push(e,"b67b9eDrMRCUp/92tBnMjgT","HistoryUIModel");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.HistoryUIModel=n.CClickGameTab=n.CShowSelfTipEnum=n.CPlayerCountEnum=void 0;var a,i=t("../CreateRoomConfig"),r=t("./CreateRoomManagerModel"),s=t("../../../Framework/Manager/UIManager"),c=t("../../UserInfo/UserInfoModel"),l=t("../BoxRecordUI"),u=t("../../Base/View/UIHelp"),d=t("./CreateRoomConfigModel");(function(t){t[t.PLAYER_4=0]="PLAYER_4",t[t.PLAYER_2=1]="PLAYER_2"})(n.CPlayerCountEnum||(n.CPlayerCountEnum={})),function(t){t[t.SHOW=0]="SHOW",t[t.HIDE=1]="HIDE"}(n.CShowSelfTipEnum||(n.CShowSelfTipEnum={})),function(t){t[t.CLASSIC_GD=0]="CLASSIC_GD",t[t.TP_GD=1]="TP_GD",t[t.TTZ_GD=2]="TTZ_GD",t[t.ER_GD=3]="ER_GD"}(a=n.CClickGameTab||(n.CClickGameTab={}));var p=function(){function t(){this._nowGameIDIndex=a.CLASSIC_GD,this._view=null,this._currGameRoomConfig=null,this._historyTotalArr=[]}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return null===e._historyModelObj&&(e._historyModelObj=new e),e._historyModelObj},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),t.prototype.setView=function(t){this._view=t},t.prototype.init=function(){this.initListener(),this.initUI()},t.prototype.initListener=function(){this.view.m_tabTitle.m_jingDianBtn.onClick(this.clickTab,this),this.view.m_tabTitle.m_daiTuoBtn.onClick(this.clickTab,this),this.view.m_tabTitle.m_tuanTuanZhuanBtn.onClick(this.clickTab,this),this.view.m_tabTitle.m_erRenBtn.onClick(this.clickTab,this)},t.prototype.initUI=function(){var t=a.CLASSIC_GD,e=this.getLocalRoomUIConfig();e&&(e.tap==i.GameType.GUANDAN_JD?t=a.CLASSIC_GD:e.tap==i.GameType.GUANDAN_TTZ?t=a.TTZ_GD:e.tap==i.GameType.GUANDAN_ERREN?t=a.ER_GD:e.tap==i.GameType.GUANDAN_DAITUO&&(t=a.TP_GD)),this.updateTab(t)},t.prototype.clickTab=function(t){var e=Number(fgui.GObject.cast(t.currentTarget).data);this.updateTab(e)},t.prototype.updateTab=function(t){var e=this;this._nowGameIDIndex=t,u.UIHelp.instance.showLoading(),this.view.m_tabTitle.m_c_clickTab.selectedIndex=t,this._currGameRoomConfig=i.CreateRoomConfig.getGuanDanConfigByShowIndex(t),this.view.m_listView.removeChildren(),r.CreateRoomManagerModel.instance.reqHistoryList(this._currGameRoomConfig.gameId,0,function(t){e._historyTotalArr=t,e.updateScrollView(),u.UIHelp.instance.hideLoading()})},t.prototype.updateScrollView=function(){var t=this._historyTotalArr;this.view.m_noRecodeImg.node.active=0===t.length,this.view.m_noRecodeImg1.node.active=0===t.length;for(var e=0;e<t.length;e++){var n=fgui.UIPackage.createObject("CreateRoomUI","History_item");this.view.m_listView.addChild(n),this.updateItemUI(n,t[e]),n.data={index:e,tempHeight:n.height}}},t.prototype.updateItemUI=function(t,e){t.m_dateText.text=e.createTime,t.m_roundIdText.text="\u623f\u95f4\u53f7:"+e.roomKey,t.m_titleText.text=this._currGameRoomConfig.name;for(var n=e.winlosts,o=!0,a=0;a<n.length;a++){var i=n[a];if(this.isSelfNumID(Number(i.id))){var r=Number(i.winlost);t.m_scoreText.text=this.getScorePlusOrSub(r),r<0&&(o=!1,this.gameFailUpdateUI(t));break}}t.m_btnDetail.data={historyData:e,isSelfWin:o},t.m_btnDetail.onClick(this.onClickDetail,this)},t.prototype.isSelfNumID=function(t){return t===Number(c.UserInfoModel.instance.userInfo.numID)},t.prototype.getScorePlusOrSub=function(t){return t>=0?"+"+t:""+t},t.prototype.gameFailUpdateUI=function(t){t.m_scoreText.color=cc.color(82,140,234,255),t.m_dateText.color=cc.color(107,110,112,255),t.m_roundIdText.color=cc.color(107,110,112,255),t.m_itemDi.icon="ui://CreateRoomUI/panel_zhanji_lose",t.m_btnDetail.icon="ui://CreateRoomUI/btn_detail_lose"},t.prototype.onClickDetail=function(t){var e=this,n=fgui.GObject.cast(t.currentTarget).data;if(n&&n.historyData.totalid){var o=n.historyData;o&&(u.UIHelp.instance.showLoading(),r.CreateRoomManagerModel.instance.reqHistoryRoundList(this._currGameRoomConfig.gameId,Number(o.totalid),function(t){s.UIManager.instance.open(l.BoxRecordUI).then(function(a){console.error("onClickDetail.historyData:",n.historyData),console.error("onClickDetail.roundArr:",t),a.initBoxRecordUI(o,t,n.isSelfWin,e._nowGameIDIndex),u.UIHelp.instance.hideLoading()})}))}},t.prototype.onDestroy=function(){e._historyModelObj=null},t.prototype.getLocalRoomUIConfig=function(){return d.CreateRoomConfigModel.getLocalRoomConfig()},t._historyModelObj=null,e=o([jsClass],t)}();n.HistoryUIModel=p,cc._RF.pop()},{"../../../Framework/Manager/UIManager":"UIManager","../../Base/View/UIHelp":"UIHelp","../../UserInfo/UserInfoModel":"UserInfoModel","../BoxRecordUI":"BoxRecordUI","../CreateRoomConfig":"CreateRoomConfig","./CreateRoomConfigModel":"CreateRoomConfigModel","./CreateRoomManagerModel":"CreateRoomManagerModel"}],HttpUtil:[function(t,e,n){"use strict";cc._RF.push(e,"5ac8aILwgNCKI3FERiWLEYx","HttpUtil");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.HttpUtil=void 0;var a=function(){function t(){}var e;return e=t,t.post=function(t,e,n,o){return this.request(t,"POST",e,n,o)},t.get=function(t,e,n,o){return this.request(t,"GET",e,n,o)},t.request=function(t,e,n,o,a){var i=this;return new Promise(function(r,s){var c=i.packParams(t,e,n,"",Object.assign({"Content-Type":"application/x-www-form-urlencoded"},o));a||console.log("HttpUtil "+c.method+" "+c.url+":",c.body);var l=Date.now();i._request(c).then(function(e){var n=e.data;try{n&&(n=JSON.parse(n))}catch(i){console.warn(i)}if(!a){var o=Date.now()-l;console.log("HttpUtil response [cost:"+o+"ms] "+t+":",n)}try{r(n)}catch(i){console.error(i)}},function(e){var n=Date.now()-l;console.error("HttpUtil error [cost:"+n+"ms] "+t+":",e.message);try{s(e.message)}catch(o){console.error(o)}})})},t.upload=function(t,e,n,o){var a=this;return new Promise(function(i,r){o||console.log("HttpUtil upload "+t+"/"+e.remoteUrl+".");var s=new FormData;if(n)for(var c in n)if(n.hasOwnProperty(c)){var l=n[c];s.append(c,l+"")}s.append(e.urlKey,e.remoteUrl),s.append(e.fileKey,e.file);var u=a.packParams(t,"POST",s,"",{},3e4),d=Date.now();a._request(u).then(function(n){try{if(!o){var a=Date.now()-d;console.log("HttpUtil upload succeed [cost:"+a+"ms] "+t+"/"+e.remoteUrl+":",n.data)}i(t+"/"+e.remoteUrl)}catch(r){console.error(r)}},function(n){try{var o=Date.now()-d;console.error("HttpUtil upload failed [cost:"+o+"ms] "+t+"/"+e.remoteUrl+":",n.message),r(n.message)}catch(a){console.error(a)}})})},t.download=function(t,e,n){var o=this;return new Promise(function(a,i){n||console.log("HttpUtil download "+t+".");var r=o.packParams(t,"GET",e,"blob"),s=Date.now();o._request(r).then(function(e){try{if(!n){var o=Date.now()-s;console.log("HttpUtil download succeed [cost:"+o+"ms] "+t)}a(window.Blob?new Blob([e.data]):e.data)}catch(i){console.error(i)}},function(e){try{var n=Date.now()-s;console.error("HttpUtil download failed [cost:"+n+"ms] "+t+":",e.message),i(e.message)}catch(o){console.error(o)}})})},t.packParams=function(t,n,o,a,i,r){var s={url:t,method:n,body:null};s.responseType=a,s.headers=i||{},r&&(s.timeout=r);var c=n.toUpperCase();if("GET"===c||"DELETE"===c){if(o){var l=o instanceof Object?e.toQueryString(o):o;s.url+=-1!==s.url.indexOf("?")?"&"+l:"?"+l}}else"string"==typeof o||window.FormData&&o instanceof FormData?s.body=o:o&&(s.headers["Content-Type"].startsWith("application/json")?s.body=JSON.stringify(o):s.body=e.toQueryString(o));return s},t._request=function(t){return new Promise(function(e,n){var o=Object.assign({responseType:"",async:!0,headers:{},timeout:1e4},t||{});if(o.method||(o.method="GET"),o.url){var a=new XMLHttpRequest;for(var i in a.onload=function(){var t=a.status;if(t>=200&&t<300||304===t){var o;o="text"===a.responseType||""===a.responseType?a.responseText:"document"===a.responseType?a.responseXML:a.response,e&&e({status:t,data:o})}else n({status:t,message:"["+a.status+"]"+a.statusText+":"+a.responseURL})},a.onerror=function(){n({status:a.status,message:"HttpUtil request failed! ["+a.status+"]:"+a.statusText})},a.onabort=function(){n({status:a.status,message:"HttpUtil request was aborted by user."})},a.ontimeout=function(){n({status:408,message:"HttpUtil request timeout."})},a.open(o.method,o.url,o.async),a.responseType=o.responseType,o.headers)o.headers.hasOwnProperty(i)&&a.setRequestHeader(i,o.headers[i]);o.async&&o.timeout&&(a.timeout=o.timeout),a.send(o.body)}else n({message:"HttpUtil request url is empty!"})})},t.toQueryString=function(t){var e=[];if(null!=t&&t instanceof Object)for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];if(void 0!==o){var a="string"==typeof o?o:JSON.stringify(o);e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}}return e.join("&")},e=o([jsClass],t)}();n.HttpUtil=a,cc._RF.pop()},{}],IMProtocol:[function(t,e,n){"use strict";cc._RF.push(e,"47620NzlGpNpIfprawH17gA","IMProtocol");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.IMProtocol=void 0;var i=t("../Base/Processid"),r=t("../Base/ProtocolManager");(function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.im,e.xyid=im_cli.ClientXYID.kReqJoin,e}return a(e,t),e.prototype.pack=function(){return im_cli.ReqJoin.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,im_cli.ReqJoin.decode(t))},e}(im_cli.ReqJoin);t.ReqJoin=e,r.ProtocolManager.instance.setProtocol(i.Processid.im,im_cli.ClientXYID.kReqJoin,e);var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.im,e.xyid=im_cli.ClientXYID.kRespJoin,e}return a(e,t),e.prototype.pack=function(){return im_cli.RespJoin.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,im_cli.RespJoin.decode(t))},e}(im_cli.RespJoin);t.RespJoin=n,r.ProtocolManager.instance.setProtocol(i.Processid.im,im_cli.ClientXYID.kRespJoin,n);var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.im,e.xyid=im_cli.ClientXYID.kReqSubscribe,e}return a(e,t),e.prototype.pack=function(){return im_cli.ReqSubscribe.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,im_cli.ReqSubscribe.decode(t))},e}(im_cli.ReqSubscribe);t.ReqSubscribe=o,r.ProtocolManager.instance.setProtocol(i.Processid.im,im_cli.ClientXYID.kReqSubscribe,o);var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.im,e.xyid=im_cli.ClientXYID.kRespSubScribe,e}return a(e,t),e.prototype.pack=function(){return im_cli.RespSubScribe.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,im_cli.RespSubScribe.decode(t))},e}(im_cli.RespSubScribe);t.RespSubScribe=s,r.ProtocolManager.instance.setProtocol(i.Processid.im,im_cli.ClientXYID.kRespSubScribe,s);var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.im,e.xyid=im_cli.ClientXYID.kPublishMsg,e}return a(e,t),e.prototype.pack=function(){return im_cli.PublishMsg.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,im_cli.PublishMsg.decode(t))},e}(im_cli.PublishMsg);t.PublishMsg=c,r.ProtocolManager.instance.setProtocol(i.Processid.im,im_cli.ClientXYID.kPublishMsg,c)})(n.IMProtocol||(n.IMProtocol={})),cc._RF.pop()},{"../Base/Processid":"Processid","../Base/ProtocolManager":"ProtocolManager"}],IProtocol:[function(t,e,n){"use strict";cc._RF.push(e,"ca751JkQnNAJYG/Fz/1ppC8","IProtocol"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],InviteGiftModel:[function(t,e,n){"use strict";cc._RF.push(e,"6cd01mJajhP57gDJibVgHBw","InviteGiftModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.InviteGiftModel=n.AwardState=n.InviteGiftAwardType=void 0;var r,s=t("../../../Framework/Manager/CoroutineManager"),c=t("../../../Framework/Manager/EventManager"),l=t("../../../Framework/Manager/UIManager"),u=t("../../../Framework/Model/BaseModel"),d=t("../../../Framework/Root/ModelRoot"),p=t("../../Award/AwardModel"),h=t("../../Award/AwardUI"),_=t("../../Base/Data/DataEvent"),f=t("../../Base/Data/DataScript"),m=t("../../Base/Module/Platform/PlatformManager"),g=t("../../Base/Module/Share/ShareManager"),y=t("../../FriendTeam/FriendTeamModel"),I=t("../../Game/Common/GameCommonModel"),C=t("../../Login/LoginModel"),M=t("./InviteGiftProxy"),v=t("./InviteGiftUI");(function(t){t[t.INVITE=1]="INVITE",t[t.GAME=2]="GAME"})(r=n.InviteGiftAwardType||(n.InviteGiftAwardType={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.GET=1]="GET",t[t.GOT=2]="GOT"}(n.AwardState||(n.AwardState={}));var E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isEnterHallSuccess=!1,e._actInfo=null,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return d.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return M.InviteGiftProxy.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actInfo",{get:function(){return this._actInfo},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){c.EventManager.instance.on(_.DataEvent.EnterHallSuccess,this,this.onEnterHallSuccess),c.EventManager.instance.on(_.DataEvent.JoinAwardListener,this,this.onJoinAwardListener),c.EventManager.instance.on(_.DataEvent.SyncRichData,this,this.onAwardListener)},e.prototype.onEnterHallSuccess=function(){this._isEnterHallSuccess=!0},e.prototype.onJoinAwardListener=function(){var t=this;s.CoroutineManager.instance.wait(function(){return t._isEnterHallSuccess&&C.LoginModel.instance.isAwardInfoGot},function(){t.reqActInfo()})},e.prototype.onAwardListener=function(t){var e=100*f.DataScript.InviteGift.id+1,n=100*f.DataScript.InviteGift.id+2,o=100*f.DataScript.InviteGift.id+3;if(t.type==e||t.type==n||t.type==o){var a={prop:{},sr:0,yb:0};a.sr=t.add_sr||0,a.yb=t.add_yb||0,t.add_props&&t.add_props.forEach(function(t){a.prop[Number(t.propid)]=t.count});var i=p.AwardModel.instance.getAwardsFormat(p.AwardModel.instance.adaptAwardsFormat(a));l.UIManager.instance.open(h.AwardUI).then(function(t){t.init(i)})}},e.prototype.showActivity=function(){l.UIManager.instance.open(v.InviteGiftUI)},e.prototype.isActive=function(){return!!m.PlatformManager.instance.supportAct.TEAM_INVITE_GIFT&&!!this._actInfo},e.prototype.canAward=function(){var t,e=this._actInfo;if(!e)return!1;var n=this.getInviteCnt();if(!e.isGotTaskAward&&n>=e.taskTargetCount)return!0;var o=!1;return((null===(t=this._actInfo)||void 0===t?void 0:t.playerDatas)||[]).forEach(function(t){t.isGotInviteAward||(o=!0),!t.isGotGameAward&&t.gameCount>=e.gameTargetCount&&(o=!0)}),o},e.prototype.getInviteCnt=function(){var t,e=(null===(t=this._actInfo)||void 0===t?void 0:t.playerDatas)||[],n=0;return e.forEach(function(t){t.numID&&t.numID>0&&n++}),n},e.prototype.getActivityTime=function(){var t,e=((null===(t=this._actInfo)||void 0===t?void 0:t.endTime)||0)-Math.floor(Date.now()/1e3);e<0&&(e=0);var n=Math.floor(e/86400),o=n<10?"0"+n:n,a=Math.floor(e%86400/3600),i=a<10?"0"+a:a,r=Math.floor(e%3600/60),s=r<10?"0"+r:r,c=Math.floor(e%60);return o+"\u5929"+i+"\u65f6"+s+"\u5206"+(c<10?"0"+c:c)+"\u79d2"},e.prototype.reqActInfo=function(t){var e=this;this.proxy.reqInviteGiftRuleData(function(n,o){n?(e._actInfo=o,c.EventManager.instance.emit(_.DataEvent.InviteGiftInfo),t&&t(!0)):(c.EventManager.instance.emit(_.DataEvent.InviteGiftInfo),t&&t(!1))})},e.prototype.reqInviteNew=function(t,e,n){this.proxy.reqInviteNewUser(t,e,function(t){t?n&&n(!0):n&&n(!1)})},e.prototype.reqGetTaskAward=function(t){var e=this,n=I.GameCommonModel.instance.getAppid()||0;this.proxy.reqGetTaskAwards(n,function(n){n?(e.reqActInfo(),t&&t(!0)):t&&t(!1)})},e.prototype.reqGetPlayerAward=function(t,e,n){var o=this,a=this._actInfo;if(a){var i=this._actInfo.playerDatas[t];if(i.numID){if(e==r.INVITE){if(i.isGotInviteAward||!i.numID)return}else if(e==r.GAME&&(i.isGotGameAward||i.gameCount<a.gameTargetCount))return;var s=I.GameCommonModel.instance.getAppid()||0;this.proxy.reqGetPlayerAwards(i.numID,e,s,function(t){t?(o.reqActInfo(),n&&n(!0)):n&&n(!1)})}}},e.prototype.inviteFriend=function(t,e){var n="inviteGiftPos="+t;g.ShareManager.instance.share(g.ShareType.inviteGift,{extData:n,activityData:null,titleArgs:y.FriendTeamModel.instance.titleArgs},e)},i([jsClass],e)}(u.BaseModel);n.InviteGiftModel=E,cc.systemEvent.once("GameRoot.inited",function(){d.ModelRoot.instance.add(E)}),cc._RF.pop()},{"../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/Model/BaseModel":"BaseModel","../../../Framework/Root/ModelRoot":"ModelRoot","../../Award/AwardModel":"AwardModel","../../Award/AwardUI":"AwardUI","../../Base/Data/DataEvent":"DataEvent","../../Base/Data/DataScript":"DataScript","../../Base/Module/Platform/PlatformManager":"PlatformManager","../../Base/Module/Share/ShareManager":"ShareManager","../../FriendTeam/FriendTeamModel":"FriendTeamModel","../../Game/Common/GameCommonModel":"GameCommonModel","../../Login/LoginModel":"LoginModel","./InviteGiftProxy":"InviteGiftProxy","./InviteGiftUI":"InviteGiftUI"}],InviteGiftProxy:[function(t,e,n){"use strict";cc._RF.push(e,"03b14rQM4pI1oCdQDy/4OC8","InviteGiftProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.InviteGiftProxy=void 0;var r=t("../../../Framework/Proxy/BaseProxy"),s=t("../../../Framework/Root/ProxyRoot"),c=t("../../Base/Data/DataBfConfig"),l=t("../../Base/Data/DataScript"),u=t("../../Base/Module/Network/protocol/AwardProtocol"),d=t("../../Base/Module/Network/SocketUtils"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return s.ProxyRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.reqInviteGiftRuleData=function(t){var e=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.InviteGift.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.InviteGift.func.info+"'")});d.SocketUtils.instance.request(e,function(e){if(0===e.flag){var n=bf33.Utils.bytesToString(e.msg);console.warn("InviteGiftProxy.reqInviteGiftRuleData:",n);var o=JSON.parse(n),a=0===o.flag;if(!a)return void(t&&t(a,null));var i={};i.errMsg=o.errorMsg,i.endTime=o.data.endTime,i.isGotTaskAward=o.data.isGotTaskAward,i.taskTargetCount=o.data.taskTargetCount,i.gameTargetCount=o.data.groupGameTargetCount,i.inviteTaskAward=o.data.inviteTaskAward||{},i.invitePlayerAward=o.data.invitePlayerAward||{},i.inviteGameWinAward=o.data.inviteGameWinAward||{},i.playerDatas=[],o.data.playerDatas&&Object.keys(o.data.playerDatas).forEach(function(t){var e=o.data.playerDatas[t],n={};n.numID=e.numID,n.nickName=e.nickName,n.avatarID=e.avatarID,n.headUrl=e.headUrl,n.gameCount=e.groupGameCount,n.isGotInviteAward=e.isGotInvitationAward,n.isGotGameAward=e.isGotGroupGameAward,i.playerDatas[Number(t)-1]=n}),t&&t(a,i)}else console.error("InviteGiftProxy.reqInviteGiftRuleData error:",e.flag),t&&t(!1,null)})},e.prototype.reqInviteNewUser=function(t,e,n){var o=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.InviteGift.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.InviteGift.func.invite+"';inviterNumID="+t+";invitationPos="+e+";")});d.SocketUtils.instance.request(o,function(t){if(0===t.flag){var e=bf33.Utils.bytesToString(t.msg);console.warn("InviteGiftProxy.reqInviteNewUser:",e);var o=0===JSON.parse(e).flag;n&&n(o)}else console.error("InviteGiftProxy.reqInviteNewUser error:",t.flag)})},e.prototype.reqGetTaskAwards=function(t,e){var n=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.InviteGift.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.InviteGift.func.getTaskAward+"';roomID="+t)});d.SocketUtils.instance.request(n,function(t){if(0===t.flag){var n=bf33.Utils.bytesToString(t.msg);console.warn("InviteGiftProxy.reqGetTaskAwards:",n);var o=0===JSON.parse(n).flag;e&&e(o)}else console.error("InviteGiftProxy.reqGetTaskAwards error:",t.flag)})},e.prototype.reqGetPlayerAwards=function(t,e,n,o){var a=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.InviteGift.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.InviteGift.func.getPlayerAward+"';friendNumID="+t+";awardType="+e+";roomID="+n)});d.SocketUtils.instance.request(a,function(t){if(0===t.flag){var e=bf33.Utils.bytesToString(t.msg);console.warn("InviteGiftProxy.reqGetPlayerAwards:",e);var n=0===JSON.parse(e).flag;o&&o(n)}else console.error("InviteGiftProxy.reqGetPlayerAwards error:",t.flag)})},i([jsClass],e)}(r.BaseProxy);n.InviteGiftProxy=p,cc.systemEvent.once("GameRoot.inited",function(){s.ProxyRoot.instance.add(p)}),cc._RF.pop()},{"../../../Framework/Proxy/BaseProxy":"BaseProxy","../../../Framework/Root/ProxyRoot":"ProxyRoot","../../Base/Data/DataBfConfig":"DataBfConfig","../../Base/Data/DataScript":"DataScript","../../Base/Module/Network/SocketUtils":"SocketUtils","../../Base/Module/Network/protocol/AwardProtocol":"AwardProtocol"}],InviteGiftUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"20e4cDSSUFAq5dex/6EDnx1","InviteGiftUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./InviteGiftUI_CompProgress"),a=t("./InviteGiftUI_CompItem"),i=t("./InviteGiftUI_CompHead"),r=t("./InviteGiftUI_CompAward"),s=t("./InviteGiftUI_MainPanel"),c=t("./InviteGiftUI_Window"),l=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default)},t}();n.default=l,cc._RF.pop()},{"./InviteGiftUI_CompAward":"InviteGiftUI_CompAward","./InviteGiftUI_CompHead":"InviteGiftUI_CompHead","./InviteGiftUI_CompItem":"InviteGiftUI_CompItem","./InviteGiftUI_CompProgress":"InviteGiftUI_CompProgress","./InviteGiftUI_MainPanel":"InviteGiftUI_MainPanel","./InviteGiftUI_Window":"InviteGiftUI_Window"}],InviteGiftUI_CompAward:[function(t,e,n){"use strict";cc._RF.push(e,"cbbc9hwO2NEiKmG89y+W6ET","InviteGiftUI_CompAward");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("InviteGiftUI","CompAward")},e.prototype.onConstruct=function(){this.m_cAwardLevel=this.getControllerAt(0),this.m_cAwardType=this.getControllerAt(1),this.m_imgAward=this.getChildAt(0),this.m_txtCnt=this.getChildAt(3),this.m_txtTitle=this.getChildAt(4),this.m_compProgress=this.getChildAt(5),this.m_txtProgress=this.getChildAt(6)},e.URL="ui://zv9ys9br105maq",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],InviteGiftUI_CompHead:[function(t,e,n){"use strict";cc._RF.push(e,"e23061ZMDVOUKqqLdoH++kZ","InviteGiftUI_CompHead");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("InviteGiftUI","CompHead")},e.prototype.onConstruct=function(){this.m_icon=this.getChildAt(1)},e.URL="ui://zv9ys9br105map",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],InviteGiftUI_CompItem:[function(t,e,n){"use strict";cc._RF.push(e,"56741jozv5M14q7N+hgRfIW","InviteGiftUI_CompItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("InviteGiftUI","CompItem")},e.prototype.onConstruct=function(){this.m_cAwardType=this.getControllerAt(0),this.m_cHavePlayer=this.getControllerAt(1),this.m_btnAdd=this.getChildAt(1),this.m_compHead=this.getChildAt(2),this.m_compAward1=this.getChildAt(3),this.m_compAward2=this.getChildAt(4),this.m_btnInvite=this.getChildAt(5),this.m_imgFinish=this.getChildAt(6)},e.URL="ui://zv9ys9br105mao",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],InviteGiftUI_CompProgress:[function(t,e,n){"use strict";cc._RF.push(e,"2beecFHFnxKUqYwtDOgwBoB","InviteGiftUI_CompProgress");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("InviteGiftUI","CompProgress")},e.prototype.onConstruct=function(){this.m_cProgress=this.getControllerAt(0),this.m_cEnable=this.getControllerAt(1)},e.URL="ui://zv9ys9br105man",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],InviteGiftUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"4d7e1LhG/lOSr6VhiNP7pEg","InviteGiftUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("InviteGiftUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://zv9ys9br105mat",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],InviteGiftUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"194d8b/iupEe4/xOyqkPU/g","InviteGiftUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("InviteGiftUI","Window")},e.prototype.onConstruct=function(){this.m_cAwardType=this.getControllerAt(0),this.m_btnClose=this.getChildAt(2),this.m_txtTime=this.getChildAt(3),this.m_txtTaskTitle=this.getChildAt(4),this.m_pbTask=this.getChildAt(5),this.m_compProgress1=this.getChildAt(6),this.m_compProgress2=this.getChildAt(7),this.m_compProgress3=this.getChildAt(8),this.m_btnTaskInvite=this.getChildAt(9),this.m_btnTaskGet=this.getChildAt(10),this.m_imgFinish=this.getChildAt(11),this.m_compItem1=this.getChildAt(12),this.m_compItem2=this.getChildAt(13),this.m_compItem3=this.getChildAt(14),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://zv9ys9br105mau",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],InviteGiftUI:[function(t,e,n){"use strict";cc._RF.push(e,"044c9O06m5ORKMSrF/e/AQf","InviteGiftUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.InviteGiftUI=void 0;var r,s=t("../../../Framework/UI/FadeUI"),c=t("./InviteGiftModel"),l=t("../../../Framework/Manager/EventManager"),u=t("../../Base/Data/DataEvent"),d=t("../../Base/Module/BfAnalytics/BfasManager"),p=t("../../Base/Module/BfAnalytics/DataPointID"),h=t("../../Base/Utils/UtilTool"),_=t("../../Base/Data/DataConstant");(function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"})(r||(r={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._actTimer=null,e}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return c.InviteGiftModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initUI(),this.model.reqActInfo(),d.BfasManager.instance.sendEvt(p.InviteGiftPointID.SHOW)},e.prototype.onDestroy=function(){this.stopActTimer(),t.prototype.onDestroy.call(this)},e.prototype.initListener=function(){var t=this.view.m_Window;t.m_btnClose.onClick(this.onBtnClose,this),t.m_btnTaskInvite.onClick(this.onBtnTaskInvite,this),t.m_btnTaskGet.onClick(this.onBtnTaskGet,this),l.EventManager.instance.on(u.DataEvent.InviteGiftInfo,this,this.updateUI)},e.prototype.initUI=function(){this.updateUI(),this.startActTimer()},e.prototype.startActTimer=function(){var t=this;this.stopActTimer(),this._actTimer=setInterval(function(){var e=t.model.getActivityTime();t.view.m_Window.m_txtTime.text=e+"\u540e\u6d3b\u52a8\u7ed3\u675f"},1e3)},e.prototype.stopActTimer=function(){this._actTimer&&(clearInterval(this._actTimer),this._actTimer=null)},e.prototype.updateUI=function(){var t=this,e=this.model.actInfo;if(e){var n=this.view.m_Window,o=this.model.getActivityTime();n.m_txtTime.text=o+"\u540e\u5237\u65b0";var a=this.model.getInviteCnt();n.m_txtTaskTitle.text="\u9080\u8bf7\u6ee1"+e.taskTargetCount+"\u4e2a\u597d\u53cb\u53ef\u83b7\u5f97[color=#d2424]"+e.inviteTaskAward.sr+"\u91d1\u5e01\uff08"+a+"/"+e.taskTargetCount+"\uff09[/color]",n.m_pbTask.value=33*a,a>=3?(n.m_compProgress1.m_cEnable.selectedIndex=r.SHOW,n.m_compProgress2.m_cEnable.selectedIndex=r.SHOW,n.m_compProgress3.m_cEnable.selectedIndex=r.SHOW,n.m_cAwardType.selectedIndex=e.isGotTaskAward?c.AwardState.GOT:c.AwardState.GET):(2==a?(n.m_compProgress1.m_cEnable.selectedIndex=r.SHOW,n.m_compProgress2.m_cEnable.selectedIndex=r.SHOW):1==a&&(n.m_compProgress1.m_cEnable.selectedIndex=r.SHOW),n.m_cAwardType.selectedIndex=c.AwardState.NORMAL),this.initCompItem(n.m_compItem1,0),this.initCompItem(n.m_compItem2,1),this.initCompItem(n.m_compItem3,2),e.playerDatas.forEach(function(e,o){var a=n["m_compItem"+(Number(o)+1)];t.updateCompItem(a,o)})}},e.prototype.initCompItem=function(t,e){var n=this.model.actInfo;t.m_cHavePlayer.selectedIndex=r.HIDE,t.m_cAwardType.selectedIndex=c.AwardState.NORMAL,t.m_compAward1.m_cAwardType.selectedIndex=c.AwardState.NORMAL,t.m_compAward1.m_txtCnt.text=n.invitePlayerAward.sr.toString(),t.m_compAward1.m_txtTitle.text="\u9080\u8bf71\u4eba\u8fdb\u6e38\u620f",t.m_compAward1.m_compProgress.value=0,t.m_compAward1.m_txtProgress.text="0/1",t.m_compAward2.m_cAwardType.selectedIndex=c.AwardState.NORMAL,t.m_compAward2.m_txtCnt.text=n.inviteGameWinAward.sr.toString(),t.m_compAward2.m_txtTitle.text="\u7ec4\u961f\u80dc\u5229"+n.gameTargetCount+"\u5c40",t.m_compAward2.m_compProgress.value=0,t.m_compAward2.m_txtProgress.text="0/"+n.gameTargetCount,t.m_btnAdd.clearClick(),t.m_btnInvite.clearClick(),t.m_compAward1.m_imgAward.clearClick(),t.m_compAward2.m_imgAward.clearClick(),t.m_btnAdd.onClick(this.onBtnItemInvite.bind(this,e),this),t.m_btnInvite.onClick(this.onBtnItemInvite.bind(this,e),this),t.m_compAward1.m_imgAward.onClick(this.onBtnItemGet1.bind(this,e),this),t.m_compAward2.m_imgAward.onClick(this.onBtnItemGet2.bind(this,e),this)},e.prototype.updateCompItem=function(t,e){var n=this.model.actInfo,o=n.playerDatas[e];t.m_compHead.m_icon.url=this.getFriendHead(o.headUrl,o.avatarID),t.m_cHavePlayer.selectedIndex=r.SHOW,t.m_cAwardType.selectedIndex=o.isGotInviteAward&&o.isGotGameAward?c.AwardState.GOT:c.AwardState.GET,t.m_compAward1.m_cAwardType.selectedIndex=o.isGotInviteAward?c.AwardState.GOT:c.AwardState.GET,t.m_compAward1.m_compProgress.value=100,t.m_compAward1.m_txtProgress.text="1/1",t.m_compAward2.m_cAwardType.selectedIndex=o.isGotGameAward?c.AwardState.GOT:o.gameCount>=n.gameTargetCount?c.AwardState.GET:c.AwardState.NORMAL,t.m_compAward2.m_compProgress.value=o.gameCount*Math.floor(100/n.gameTargetCount),t.m_compAward2.m_txtProgress.text=o.gameCount+"/"+n.gameTargetCount},e.prototype.onBtnClose=function(){t.prototype.onExitClick.call(this)},e.prototype.onBtnTaskInvite=function(){var t=this.model.actInfo;if(t){for(var e=t.playerDatas||[],n=0,o=0;o<3;o++)if(!e[o]||!e[o].numID){n=o+1;break}n<=0||(d.BfasManager.instance.sendEvt(p.InviteGiftPointID.CLICK_INVITE),this.model.inviteFriend(n))}},e.prototype.onBtnTaskGet=function(){d.BfasManager.instance.sendEvt(p.InviteGiftPointID.CLICK_TASK_GET),this.model.reqGetTaskAward()},e.prototype.onBtnItemInvite=function(t){var e=t+1;e<=0||(d.BfasManager.instance.sendEvt(p.InviteGiftPointID.CLICK_INVITE),this.model.inviteFriend(e))},e.prototype.onBtnItemGet1=function(t){d.BfasManager.instance.sendEvt(p.InviteGiftPointID.CLICK_INVITE_GET),this.model.reqGetPlayerAward(t,c.InviteGiftAwardType.INVITE)},e.prototype.onBtnItemGet2=function(t){d.BfasManager.instance.sendEvt(p.InviteGiftPointID.CLICK_GAME_GET),this.model.reqGetPlayerAward(t,c.InviteGiftAwardType.GAME)},e.prototype.getFriendHead=function(t,e){return h.UtilTool.checkHeadurl(t)?t:_.DataConstant.getDefaultAvatar(e)},i([jsClass],e)}(s.FadeUI);n.InviteGiftUI=f,cc._RF.pop()},{"../../../Framework/Manager/EventManager":"EventManager","../../../Framework/UI/FadeUI":"FadeUI","../../Base/Data/DataConstant":"DataConstant","../../Base/Data/DataEvent":"DataEvent","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../Base/Utils/UtilTool":"UtilTool","./InviteGiftModel":"InviteGiftModel"}],JoinRoomUIModel:[function(t,e,n){"use strict";cc._RF.push(e,"16d13tJELdPVKU+iAIl55px","JoinRoomUIModel");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.JoinRoomUIModel=void 0;var a=t("../../Base/Module/BfAnalytics/BfasManager"),i=t("../../Base/Module/BfAnalytics/DataPointID"),r=t("./CreateRoomManagerModel"),s=function(){function t(){this._view=null,this._numStr="",this._isFirstIputBoxNum=!0}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return null==e._joinRoomModelObj&&(e._joinRoomModelObj=new e),e._joinRoomModelObj},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),t.prototype.setView=function(t){this._view=t},t.prototype.init=function(){a.BfasManager.instance.evt(i.BoxRoomPointID.SHOW_JOINBOX_UI.eventid,null,!0,i.BoxRoomPointID.SHOW_JOINBOX_UI.eventName),this.initData(),this.initListener(),this.initUI()},t.prototype.initData=function(){},t.prototype.initListener=function(){for(var t=0;t<10;t++)this.view["m_numBtn"+t].onClick(this.clickNumBtn,this);this.view.m_delAllBtn.onClick(this.delelteAllBtn,this),this.view.m_delOneBtn.onClick(this.delelteOneNumBtn,this)},t.prototype.initUI=function(){this.view.m_delOneBtn.title="",this.view.m_delAllBtn.title="",this.updateText(),this.checkCanBackToBox()},t.prototype.clickNumBtn=function(t){if(!this.checkCanBackToBox()){this._isFirstIputBoxNum&&(a.BfasManager.instance.evt(i.BoxRoomPointID.INPUT_FIRST_ROOMNUM.eventid,null,!0,i.BoxRoomPointID.INPUT_FIRST_ROOMNUM.eventName),this._isFirstIputBoxNum=!1);var e=Number(fgui.GObject.cast(t.currentTarget).data);this.addText(e.toString())}},t.prototype.checkCanBackToBox=function(){return r.CreateRoomManagerModel.instance.checkCanBackToBox()},t.prototype.addText=function(t){this._numStr.length>=6||(this._numStr+=t,this.updateText(),this.checkJoinBox())},t.prototype.updateText=function(){var t="";this._numStr.length>0?(t=this._numStr,this.setDeleteBtnEnabled(!0)):this.setDeleteBtnEnabled(!1),this.splitNumStr(t)},t.prototype.setDeleteBtnEnabled=function(t){this.view.m_noNumImg.visible=!t},t.prototype.splitNumStr=function(t){for(var e=t.split(""),n=0;n<6;n++){var o=this.view["m_numText"+(n+1)];n<e.length?o.text=e[n]:o.text=""}},t.prototype.checkJoinBox=function(){6===this._numStr.length&&r.CreateRoomManagerModel.instance.reqJoinBox(this._numStr,function(t){t&&a.BfasManager.instance.evt(i.BoxRoomPointID.INPUT_FINISH_ROOMNUM.eventid,null,!0,i.BoxRoomPointID.INPUT_FINISH_ROOMNUM.eventName)})},t.prototype.delelteAllBtn=function(){this._numStr="",this.updateText()},t.prototype.delelteOneNumBtn=function(){this.deleteOneText()},t.prototype.deleteOneText=function(){0!==this._numStr.length&&(this._numStr=this._numStr.substring(0,this._numStr.length-1),this.updateText())},t.prototype.onDestroy=function(){e._joinRoomModelObj=null,this._isFirstIputBoxNum=!0},t._joinRoomModelObj=null,e=o([jsClass],t)}();n.JoinRoomUIModel=s,cc._RF.pop()},{"../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","./CreateRoomManagerModel":"CreateRoomManagerModel"}],LinkedList:[function(t,e,n){"use strict";cc._RF.push(e,"a541fIqO9xG4YYRaA2lKOD/","LinkedList");var o=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.LinkedList=n.LinkedListNode=void 0;var i=function(){function t(t,e){this._list=t,this._item=e}return Object.defineProperty(t.prototype,"list",{get:function(){return this._list},set:function(t){this._list=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"next",{get:function(){return null==this._next||this._next===this._list.first?null:this._next},set:function(t){this._next=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"prev",{get:function(){return null==this._prev||this===this._list.first?null:this._prev},set:function(t){this._prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._item},set:function(t){this._item=t},enumerable:!1,configurable:!0}),t.prototype.invalidate=function(){delete this._item,delete this._next,delete this._prev},t}();n.LinkedListNode=i;var r=function(){function t(t){var e,n;if(this._size=0,t)try{for(var o=a(t),i=o.next();!i.done;i=o.next()){var r=i.value;this.addLast(r)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}}return t.prototype[Symbol.iterator]=function(){var t;return o(this,function(e){switch(e.label){case 0:if(null==(t=this._head))return[3,4];e.label=1;case 1:return[4,t.value];case 2:e.sent(),t=t._next,e.label=3;case 3:if(t!=this._head)return[3,1];e.label=4;case 4:return[2]}})},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){return this._head},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this._head&&this._head._prev},enumerable:!1,configurable:!0}),t.prototype.addAfter=function(t,e){var n=new i(t.list,e);return this.$insertBefore(t._next,n),n},t.prototype.addBefore=function(t,e){var n=new i(t.list,e);return this.$insertBefore(t,n),t===this._head&&(this._head=n),n},t.prototype.addFirst=function(t){var e=new i(this,t);return null==this._head?this.$insertToEmptyList(e):(this.$insertBefore(this._head,e),this._head=e),e},t.prototype.addLast=function(t){var e=new i(this,t);return null==this._head?this.$insertToEmptyList(e):this.$insertBefore(this._head,e),e},t.prototype.clear=function(){var t=this._head;if(null!=t)do{var e=t;t=t._next,e.invalidate()}while(t!=this._head);this._head=null,this._size=0},t.prototype.contains=function(t){return null!=this.find(t)},t.prototype.find=function(t){var e=this._head;if(null!=e)if(null!=t)do{if(e.value===t)return e;e=e._next}while(e!==this._head);else do{if(null==e.value)return e;e=e._next}while(e!==this._head);return null},t.prototype.findLast=function(t){var e=this._head&&this._head._prev;if(null!=e){var n=e;if(null!=t)do{if(n.value===t)return n;n=n._prev}while(n!==e);else do{if(null==n.value)return n;n=n._prev}while(n!==e)}return null},t.prototype.remove=function(t){return this.removeFirst(t)},t.prototype.removeFirst=function(t){if(arguments.length>0){var e=this.find(t);return null!=e&&(this.$remove(e),!0)}return null!=this._head&&(this.$remove(this._head),!0)},t.prototype.removeLast=function(t){if(arguments.length>0){var e=this.findLast(t);return null!=e&&(this.$remove(e),!0)}return null!=this._head&&(this.$remove(this._head._prev),!0)},t.prototype.toArray=function(){var t=[],e=this._head,n=0;if(null!=e)do{t[n++]=e.value,e=e._next}while(e!=this._head);return t},t.prototype.$insertBefore=function(t,e){e._next=t,e._prev=t._prev,t._prev._next=e,t._prev=e,this._size++},t.prototype.$insertToEmptyList=function(t){0!==this._size&&console.error("LinkedList must be empty when this method is called!"),t._next=t,t._prev=t,this._head=t,this._size++},t.prototype.$remove=function(t){t.list!==this&&console.error("Deleting the node from another list!"),null==this._head&&console.error("This method shouldn't be called on empty list!"),t._next==t?(1===this._size&&this._head===t||console.error("This should only be true for a list with only one node"),this._head=null):(t._next._prev=t._prev,t._prev._next=t._next,this._head===t&&(this._head=t._next)),t.invalidate(),this._size--},t}();n.LinkedList=r,cc._RF.pop()},{}],LoadingUI:[function(t,e,n){"use strict";cc._RF.push(e,"48a42s3Z3lH3ZNWVUoqfHW0","LoadingUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.LoadingUI=void 0;var r=t("../../../../Framework/UI/BaseUI"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._duration=15,e}return a(e,t),Object.defineProperty(e,"willClearOnDestroy",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"willShowLoading",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return r.UIType.Transparent},enumerable:!1,configurable:!0}),e.getPkgName=function(){return"WaitingUI"},e.getCompName=function(){return cc.js.getClassName(this)+"_MainPanel"},e.uiBind=function(){},Object.defineProperty(e.prototype,"duration",{set:function(t){this._duration=t},enumerable:!1,configurable:!0}),e.prototype.init=function(t){var e=this;this.view.visible=!!t.content,t.content&&(this.view.getChild("Window").asLabel.title=t.content),cc.tween(this.view.node).delay(t.duration||this._duration).call(function(){e.onExitClick()}).start()},i([jsClass],e)}(t("../../../../Framework/UI/FadeUI").FadeUI);n.LoadingUI=s,cc._RF.pop()},{"../../../../Framework/UI/BaseUI":"BaseUI","../../../../Framework/UI/FadeUI":"FadeUI"}],LogicApiHub:[function(t,e,n){"use strict";cc._RF.push(e,"08f0cPNjMBMZqMjcnEn++iY","LogicApiHub");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function r(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.LogicApiHub=void 0;var i=t("../../../../Framework/Utils/HttpUtil"),r=t("../../Data/DataConstant"),s=function(){function t(){}return t.apiHubPost=function(t,e,n,i){return o(this,void 0,Promise,function(){return a(this,function(o){switch(o.label){case 0:return[4,this.apiHubRequest("POST",t,e,n,i)];case 1:return[2,o.sent()]}})})},t.apiHubGet=function(t,e,n,i){return o(this,void 0,Promise,function(){return a(this,function(o){switch(o.label){case 0:return[4,this.apiHubRequest("GET",t,e,n,i)];case 1:return[2,o.sent()]}})})},t.apiHubRequest=function(t,e,n,s,c){return o(this,void 0,Promise,function(){var o,l;return a(this,function(a){switch(a.label){case 0:return[4,i.HttpUtil.request(r.DataConstant.API_HUB_HOST,t,{server:e,requestMethod:n,url:s,data:JSON.stringify(c)},{"Content-Type":"application/json"})];case 1:if(0===(o=a.sent()).code){l=o.data;try{l=JSON.parse(l)}catch(u){console.warn("ApiHub response data is not json!",u)}return[2,l]}throw o}})})},t}();n.LogicApiHub=s,cc._RF.pop()},{"../../../../Framework/Utils/HttpUtil":"HttpUtil","../../Data/DataConstant":"DataConstant"}],LogicBehaviorBranch:[function(t,e,n){"use strict";cc._RF.push(e,"77517kz4NZG37jt5qGKpQ+g","LogicBehaviorBranch"),Object.defineProperty(n,"__esModule",{value:!0}),n.LogicBehaviorBranch=n.CustomizeSceneEnum=n.CustomizeBehaviorEnum=void 0;var o,a=t("../Platform/PlatformManager");(function(t){t[t.SHOW=1]="SHOW",t[t.CLICK=2]="CLICK"})(n.CustomizeBehaviorEnum||(n.CustomizeBehaviorEnum={})),function(t){t[t.WATCH_VIDEO=1]="WATCH_VIDEO"}(o=n.CustomizeSceneEnum||(n.CustomizeSceneEnum={}));var i=function(){function t(){}return Object.defineProperty(t,"isDevelop",{get:function(){return a.PlatformTypeEnum.Develop===a.PlatformManager.instance.type},enumerable:!1,configurable:!0}),t.report=function(t,e,n){t&&!this.isDevelop&&a.PlatformManager.instance.platform.reportUserBehaviorBranchAnalytics(t,e,n)},t.reportVideo=function(t,e,n){var o=this.getVideoBranchID(t);o&&this.report(o,e,n)},t.getVideoBranchID=function(t){if(!t||this.isDevelop)return"";var e="";switch(t){case o.WATCH_VIDEO:e="BCBgAAoXHx5d1h5wQNklvO"}return e},t.reportShare=function(t,e,n){var o=this.getShareBranchID(t);o&&this.report(o,e,n)},t.getShareBranchID=function(t){if(!t||this.isDevelop)return"";var e="";switch(t){case o.WATCH_VIDEO:e=""}return e},t.getShareExtraData=function(t){var e=this.getShareBranchID(t),n="";return e&&(n="wxgamebranchid="+e),n},t}();n.LogicBehaviorBranch=i,cc._RF.pop()},{"../Platform/PlatformManager":"PlatformManager"}],LogicHummerPay:[function(t,e,n){"use strict";cc._RF.push(e,"2bb55wXCahORoRUE2v4tYXA","LogicHummerPay");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function r(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.LogicHummerPay=void 0;var r=t("../../../../Framework/Utils/HttpUtil"),s=t("../../Data/DataBfConfig"),c=t("../../Data/DataConstant"),l=t("../../../UserInfo/UserInfoModel"),u=t("../Platform/PlatformManager"),d=t("../../Utils/UtilTool"),p=function(){function t(){}return Object.defineProperty(t,"instance",{get:function(){return null===this._instance&&(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.order=function(t){return o(this,void 0,Promise,function(){var e,n,o,p,h,_,f,m,g,y,I,C;return a(this,function(){return e=l.UserInfoModel.instance.userInfo.openID,n=t.productid,o=JSON.stringify({areaid:s.DataBfConfig.areaID,awake_script:n,gameid:s.DataBfConfig.gameID,source:"1",ymnsdk_version:"ymnsdk_new",numid:l.UserInfoModel.instance.userInfo.numID,channelid:s.DataBfConfig.ymn.channel}),p={openID:e,channelID:s.DataBfConfig.ymn.channel,productID:n,productName:t.name||t.price+"\u5143",productQuantity:1,price:100*t.price,attach:o,numID:l.UserInfoModel.instance.userInfo.numID,productType:t.paytype,productCount:t.count},h="",_={"Content-Type":"application/json",servicename:"order"},u.PlatformManager.instance.isSkyWingPlatForm()?(h=c.DataConstant.HUMMER_HOST_SKYWING,m=Math.floor(l.UserInfoModel.instance.getServerTimestamp()/1e3),f=i(d.UtilTool.generateHttpHeaderSign(p,m),3),y=f[0],I=f[1],C=f[2],Object.assign(_,{"X-Nonce":y,"X-Timestamp":I,"X-Authorization":C})):u.PlatformManager.instance.isMeiTuanPlatForm()?(h=c.DataConstant.HUMMER_HOST_MEITUAN,m=Math.floor(l.UserInfoModel.instance.getServerTimestamp()/1e3),g=i(d.UtilTool.generateHttpHeaderSign(p,m),3),y=g[0],I=g[1],C=g[2],Object.assign(_,{"X-Nonce":y,"X-Timestamp":I,"X-Authorization":C})):h=c.DataConstant.HUMMER_HOST,[2,r.HttpUtil.post(h,p,_)]})})},t.prototype.checkOrder=function(t){return o(this,void 0,Promise,function(){var e,n;return a(this,function(){return e=l.UserInfoModel.instance.userInfo.numID,n=l.UserInfoModel.instance.userInfo.openID,[2,r.HttpUtil.post(c.DataConstant.HUMMER_HOST,{orderID:t,numID:e,openID:n},{"Content-Type":"application/json",servicename:"notifydelivery"})]})})},t.prototype.reissue=function(){return o(this,void 0,Promise,function(){var t,e;return a(this,function(){return t=l.UserInfoModel.instance.userInfo.openID,e=l.UserInfoModel.instance.userInfo.numID,[2,r.HttpUtil.post(c.DataConstant.HUMMER_HOST,{openID:t,channelID:s.DataBfConfig.ymn.channel,numID:e},{"Content-Type":"application/json",servicename:"reissue"})]})})},t._instance=null,t}();n.LogicHummerPay=p,cc._RF.pop()},{"../../../../Framework/Utils/HttpUtil":"HttpUtil","../../../UserInfo/UserInfoModel":"UserInfoModel","../../Data/DataBfConfig":"DataBfConfig","../../Data/DataConstant":"DataConstant","../../Utils/UtilTool":"UtilTool","../Platform/PlatformManager":"PlatformManager"}],LogicRule:[function(t,e,n){"use strict";cc._RF.push(e,"dcaa51YFelPNLpzGKWUcyVZ","LogicRule");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.LogicRule=void 0;var a=t("./PokerAlgorithm"),i=t("./DefaultPokerCardsConst"),r=function(){function t(){this.types={},this.rules={}}return t.prototype.appendRule=function(t,e,n){this.types[e]=t,this.rules[t]=n},t.prototype.reset=function(){this.rules={},this.types={}},t.prototype.findCardsNomal=function(t,e,n,o,a){null!=this.types[a.type]&&this.rules[this.types[a.type]](t,!1,e,n,o,a),null!=this.types[i.PokerCardsType.SiZhang]&&this.rules[this.types[i.PokerCardsType.SiZhang]](t,!1,e,n,o,null),null!=this.types[i.PokerCardsType.TongHuaShun]&&this.rules[this.types[i.PokerCardsType.TongHuaShun]](t,!1,e,n,o,null),null!=this.types[i.PokerCardsType.WangZha]&&this.rules[this.types[i.PokerCardsType.WangZha]](t,!1,e,n,o,null),null!=this.types[i.PokerCardsType.SanAZha]&&this.rules[this.types[i.PokerCardsType.SanAZha]](t,!1,e,n,o,null)},t.prototype.findCardsShunZi=function(t,e,n,o,r){null!=this.types[i.PokerCardsType.TongHuaShun]&&this.rules[this.types[i.PokerCardsType.TongHuaShun]](t,!1,e,n,o,null);var s=a.PokerAlgorithm.CardsCopy(t);for(var c in e)for(var l=e[c],u=1;this.getListLength(l);u++)a.PokerAlgorithm.DeleteCards(s,l[u].cards);null!=this.types[r.type]&&this.rules[this.types[r.type]](s,!1,e,n,o,r),null!=this.types[i.PokerCardsType.SiZhang]&&this.rules[this.types[i.PokerCardsType.SiZhang]](t,!1,e,n,o,null),null!=this.types[i.PokerCardsType.WangZha]&&this.rules[this.types[i.PokerCardsType.WangZha]](t,!1,e,n,o,null)},t.prototype.getListLength=function(t){return a.PokerAlgorithm.getListLength(t)},t.prototype.findCardsTongHuaShun=function(t,e,n,o,a){null!=this.types[a.type]&&this.rules[this.types[a.type]](t,!1,e,n,o,a),null!=this.types[i.PokerCardsType.SiZhang]&&this.rules[this.types[i.PokerCardsType.SiZhang]](t,!1,e,n,o,a),null!=this.types[i.PokerCardsType.WangZha]&&this.rules[this.types[i.PokerCardsType.WangZha]](t,!1,e,n,o,null)},t.prototype.findCardsZhaiDanMoreThanFive=function(t,e,n,o,a){null!=this.types[a.type]&&this.rules[this.types[a.type]](t,!1,e,n,o,a),null!=this.types[i.PokerCardsType.WangZha]&&this.rules[this.types[i.PokerCardsType.WangZha]](t,!1,e,n,o,null)},t.prototype.findCardsZhaiLessFive=function(t,e,n,o,a){null!=this.types[a.type]&&this.rules[this.types[a.type]](t,!1,e,n,o,a),null!=this.types[i.PokerCardsType.TongHuaShun]&&this.rules[this.types[i.PokerCardsType.TongHuaShun]](t,!1,e,n,o,null),null!=this.types[i.PokerCardsType.WangZha]&&this.rules[this.types[i.PokerCardsType.WangZha]](t,!1,e,n,o,null),null!=this.types[i.PokerCardsType.SanAZha]&&this.rules[this.types[i.PokerCardsType.SanAZha]](t,!1,e,n,o,a),null!=this.types[i.PokerCardsType.SiDaiYi]&&this.rules[this.types[i.PokerCardsType.SiDaiYi]](t,!1,e,n,o,a)},t.prototype.findCards=function(t,e,n,o){var a={};return null==o.type||o.type==i.PokerCardsType.WangZha||(o.type>i.PokerCardsType.WuZhang&&o.type<i.PokerCardsType.ShiZhang?this.findCardsZhaiDanMoreThanFive(t,a,e,n,o):o.type>=i.PokerCardsType.SiZhang&&o.type<=i.PokerCardsType.WuZhang?this.findCardsZhaiLessFive(t,a,e,n,o):o.type==i.PokerCardsType.TongHuaShun&&null!=this.types[i.PokerCardsType.TongHuaShun]?this.findCardsTongHuaShun(t,a,e,n,o):this.findCardsNomal(t,a,e,n,o)),a},t.prototype.findCardsFromType=function(t,e,n,o){var a={};return null!=this.types[o]&&this.rules[this.types[o]](t,!1,a,e,n,null),a},t.prototype.analyCards=function(t,e,n){var o={},i=a.PokerAlgorithm.CardsCopy(t);for(var r in this.rules)this.rules[r](i,!1,o,e,n);return o},o([jsClass("LogicRule")],t)}();n.LogicRule=r,cc._RF.pop()},{"./DefaultPokerCardsConst":"DefaultPokerCardsConst","./PokerAlgorithm":"PokerAlgorithm"}],LoginModel:[function(t,e,n){"use strict";cc._RF.push(e,"0a753JCeHRO2ptQhtl3xwji","LoginModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.LoginModel=void 0;var r=t("../../Framework/Manager/CoroutineManager"),s=t("../../Framework/Manager/EventManager"),c=t("../../Framework/Manager/UIManager"),l=t("../../Framework/Model/BaseModel"),u=t("../../Framework/Root/ModelRoot"),d=t("../Activity/Advertise/AdModel"),p=t("../Activity/Advertise/AdProxy"),h=t("../Base/Data/DataEvent"),_=t("../Base/Data/DataLocalStorageKey"),f=t("../Base/Module/BfAnalytics/BfasManager"),m=t("../Base/View/UIHelp"),g=t("../Base/View/Common/DialogUI"),y=t("../Base/Module/Network/SocketEventType"),I=t("../Base/Module/Platform/PlatformManager"),C=t("../Base/Module/Room/RoomModel"),M=t("../Base/Module/Room/RoomProxy"),v=t("../UserInfo/UserInfoModel"),E=t("./LoginProxy"),A=t("../Match/MatchModel"),P=t("../Match/MatchConstant"),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isOtherPlayerLogin=!1,e._isHadPopNetWorkErrorDialog=!1,e}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return u.ModelRoot.instance.get(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return E.LoginProxy.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoggedIn",{get:function(){return this._isLoggedIn},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAwardInfoGot",{get:function(){return this._isAwardInfoGot},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReceiveClientConfig",{get:function(){return this._isReceiveClientConfig},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){s.EventManager.instance.on(y.SocketEventType.Break,this,this.onSocketBreak),s.EventManager.instance.on(h.DataEvent.ReportSRSErr,this,this.onReportSRSErr)},e.prototype.onSocketBreak=function(){var t=this;this._isLoggedIn=!1,this._isAwardInfoGot=!1,I.PlatformManager.instance.platform.isAppHidden?r.CoroutineManager.instance.frameOnce(1,this.reLogin,this):(this._isOtherPlayerLogin||this._isHadPopNetWorkErrorDialog||(this._isHadPopNetWorkErrorDialog=!0,c.UIManager.instance.open(g.DialogUI).then(function(e){e.initConfirmClose({content:"\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u68c0\u67e5\u60a8\u7684\u7f51\u7edc\uff0c\u70b9\u51fb\u786e\u5b9a\u91cd\u65b0\u8fde\u63a5~"}),e.confirmAction=function(){t.clickNetWorkDialog()},e.closeAction=function(){t.clickNetWorkDialog()}})),I.PlatformManager.instance.platform.hideLoading())},e.prototype.onReportSRSErr=function(t){var e=this;if(s.EventManager.instance.off(h.DataEvent.ReportSRSErr,this,this.onReportSRSErr),4===t.flag)this._isOtherPlayerLogin=!0,c.UIManager.instance.open(g.DialogUI).then(function(t){t.initConfirm({content:"\u60a8\u7684\u8d26\u6237\u5df2\u5728\u5176\u4ed6\u8bbe\u5907\u4e0a\u767b\u5f55,\u60a8\u5df2\u88ab\u8feb\u4e0b\u7ebf,\u82e5\u6709\u5b89\u5168\u95ee\u9898\u8bf7\u53ca\u65f6\u5904\u7406!"}),t.confirmAction=function(){e._isOtherPlayerLogin=!1,s.EventManager.instance.on(h.DataEvent.ReportSRSErr,e,e.onReportSRSErr),e.reLogin()}});else{var n="\u6a21\u5757\u51fa\u9519\u4fe1\u606f\u5982\u4e0b\n\u534f\u8baeID="+t.xyid+",\u8fdb\u7a0bID="+t.appid+",\u6a21\u5757ID="+t.processid+",flag="+t.flag;c.UIManager.instance.open(g.DialogUI).then(function(t){t.initConfirm({content:n}),s.EventManager.instance.on(h.DataEvent.ReportSRSErr,e,e.onReportSRSErr)})}I.PlatformManager.instance.platform.hideLoading()},e.prototype.clickNetWorkDialog=function(){this._isHadPopNetWorkErrorDialog=!1,this.reLogin()},e.prototype.reLogin=function(){this.login(!0)},e.prototype.login=function(t){var e=this;this._login(t,function(n,o){n?t&&I.PlatformManager.instance.platform.showToast("\u767b\u5f55\u6210\u529f","success",500):(t&&I.PlatformManager.instance.platform.showToast("\u767b\u5f55\u5931\u8d25","error",250),m.UIHelp.instance.showDialog("\u767b\u5f55\u5f02\u5e38\uff0c\u8bf7\u68c0\u67e5\u60a8\u7684\u7f51\u7edc\uff0c\u70b9\u51fb\u786e\u5b9a\u91cd\u65b0\u8fde\u63a5: "+o,function(){e.reLogin()}))})},e.prototype._login=function(t,e){var n=this;this._sessionID&&this._userID?(t&&I.PlatformManager.instance.platform.showLoading("\u767b\u5f55\u4e2d..."),E.LoginProxy.instance.srsLoginBySession(this._userID,this._sessionID,function(o,a){auth.PlayerData.FLAG.kFORBID_USERID!==o?(n.onLogin(a),a?e&&e(!0):n._login(t,e)):s.EventManager.instance.emit(h.DataEvent.NotifyForbidAccount,a.numID)},this.onAwardInfo.bind(this))):(C.RoomModel.instance.parseLocalStorageRoomInfo(),t&&I.PlatformManager.instance.platform.showLoading("\u767b\u5f55\u4e2d.."),I.PlatformManager.instance.platform.login(function(o){o?(t&&I.PlatformManager.instance.platform.showLoading("\u767b\u5f55\u4e2d..."),I.PlatformTypeEnum.Develop===o.os?n.proxy.srsLoginByDeviceID(o.code,function(t,o){auth.PlayerData.FLAG.kFORBID_USERID!==t?(n.onLogin(o),e&&e(null!==o,t.toString())):s.EventManager.instance.emit(h.DataEvent.NotifyForbidAccount,o.numID)},n.onAwardInfo.bind(n)):n.proxy.codeCheck(o.code,function(o,a){o?n.proxy.srsLoginByThird(a,function(o,a){if(auth.PlayerData.FLAG.kFORBID_USERID===o)return t&&I.PlatformManager.instance.platform.hideLoading(),void s.EventManager.instance.emit(h.DataEvent.NotifyForbidAccount,a.numID);n.onLogin(a),e&&e(null!==a,o.toString())},n.onAwardInfo.bind(n)):e&&e(!1,a)})):e&&e(!1,"\u5e73\u53f0\u767b\u5f55\u5931\u8d25!")}))},e.prototype.onLogin=function(t){t?(I.PlatformManager.instance.platform.hideLoading(),console.log(">>LoginModel.onLogin",t),this._sessionID=t.sessionID,v.UserInfoModel.instance.setUserInfo(t),_.DataLocalStorage.setLastLoginNumID(t.numID),f.BfasManager.instance.numid=v.UserInfoModel.instance.userInfo.numID+"",this.queryDataAfterServerLoginSuccess(),this._isLoggedIn=!0,s.EventManager.instance.emit(h.DataEvent.LoginSuccess)):(this._sessionID=null,this._userID=null)},e.prototype.queryDataAfterServerLoginSuccess=function(){M.RoomProxy.instance.reqUserLocation(function(){s.EventManager.instance.emit(h.DataEvent.LoginReqLocationSuccess)}),this.syncChannel(),this.queryVideoAdInfo(),I.PlatformManager.instance.isMeiTuanPlatForm()&&this.queryBindMeiTuanInfo(),A.MatchModel.instance.reqMatchSubID(function(){s.EventManager.instance.emit(P.MatchDataEvent.MatchLoginLocation)})},e.prototype.onAwardInfo=function(t){console.log("=====>onAwardInfo:",t),v.UserInfoModel.instance.setUserInfo({lastLoginTime:t.lastLoginTime,isOpenFriendTeam:t.isOpenFriendTeam,teamUserType:t.teamUserType,teamUserType2:t.teamUserType2,hideTeamSingleOnline:t.hideTeamSingleOnline,isGoldInlineTeam:t.isGoldInlineTeam,mergeNumID:t.mergeNumID}),v.UserInfoModel.instance.setAuthAwards({isNewRegister:t.isNewRegister,awards:t.awards}),this._isAwardInfoGot=!0,s.EventManager.instance.emit(h.DataEvent.ReceiveAuthAwardInfo)},e.prototype.syncChannel=function(){var t=this;this.proxy.reqSynChannelInfo(function(){t._isReceiveClientConfig=!0}),this.proxy.reqSynOpenID(function(e){console.log(">-----\x3eLoginModel.syncChannel:",e),v.UserInfoModel.instance.setUserInfo(e),f.BfasManager.instance.deviceID=v.UserInfoModel.instance.userInfo.openID,f.BfasManager.instance.numid=v.UserInfoModel.instance.userInfo.numID+"",f.BfasManager.instance.launch(),s.EventManager.instance.emit(h.DataEvent.GetOpenIDSuccess);var n=I.PlatformManager.instance.platform.query;if(n.weixinadinfo){var o=v.UserInfoModel.instance.userInfo.numID||0,a=v.UserInfoModel.instance.userInfo.openID||"";console.warn("query.weixinadinfo==>",o,a,n.weixinadinfo),t.proxy.reqWeChatMPAd(o,a,n.weixinadinfo)}})},e.prototype.queryVideoAdInfo=function(){p.AdProxy.instance.reqQueryVideoAd(function(t){t.isSuccess&&d.AdModel.instance.setAdInfo({hadGotCount:t.hadGotCount,totalCount:t.totalCount})})},e.prototype.queryUserProfile=function(t){E.LoginProxy.instance.reqUserProfile(function(e){v.UserInfoModel.instance.setUserInfo(e),t&&t()})},e.prototype.queryBindMeiTuanInfo=function(){E.LoginProxy.instance.reqBindMeiTuanInfo(function(t,e){t&&(v.UserInfoModel.instance.setMeiTuanMgcID(e.mgcID.toString()),v.UserInfoModel.instance.setMeiTuanAccessToken(e.accessToken))})},n=i([jsClass],e)}(l.BaseModel);n.LoginModel=b,cc.systemEvent.once("GameRoot.inited",function(){u.ModelRoot.instance.add(b)}),cc._RF.pop()},{"../../Framework/Manager/CoroutineManager":"CoroutineManager","../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/Model/BaseModel":"BaseModel","../../Framework/Root/ModelRoot":"ModelRoot","../Activity/Advertise/AdModel":"AdModel","../Activity/Advertise/AdProxy":"AdProxy","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/Network/SocketEventType":"SocketEventType","../Base/Module/Platform/PlatformManager":"PlatformManager","../Base/Module/Room/RoomModel":"RoomModel","../Base/Module/Room/RoomProxy":"RoomProxy","../Base/View/Common/DialogUI":"DialogUI","../Base/View/UIHelp":"UIHelp","../Match/MatchConstant":"MatchConstant","../Match/MatchModel":"MatchModel","../UserInfo/UserInfoModel":"UserInfoModel","./LoginProxy":"LoginProxy"}],LoginProxy:[function(t,e,n){"use strict";cc._RF.push(e,"9958bqDFfZETJd4dHg+66Lj","LoginProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function r(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},c=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.LoginProxy=void 0;var l,u,d,p,h=t("../../Framework/Manager/EventManager"),_=t("../../Framework/Proxy/BaseProxy"),f=t("../../Framework/Root/ProxyRoot"),m=t("../../Framework/Utils/HttpUtil"),g=t("../Base/Data/DataBfConfig"),y=t("../Base/Data/DataClubClientConfig"),I=t("../Base/Data/DataConstant"),C=t("../Base/Data/DataEvent"),M=t("../Base/Data/DataScript"),v=t("../Base/Module/ApiHub/LogicApiHub"),E=t("../Base/Utils/UtilString"),A=t("../Base/Utils/UtilTool"),P=t("../Base/Module/Network/Base/Processid"),b=t("../Base/Module/Network/Base/ProtocolManager"),U=t("../Base/Module/Network/protocol/AwardProtocol"),S=t("../Base/Module/Network/protocol/ClubLobbyProtocol"),T=t("../Base/Module/Network/protocol/CommonProtocol"),R=t("../Base/Module/Network/protocol/SrsProtocol"),w=t("../Base/Module/Network/SocketEventType"),D=t("../Base/Module/Network/SocketUtils"),O=t("../Base/Module/Platform/PlatformManager"),L=t("../UserInfo/UserInfoModel"),G=t("./LoginModel"),B=t("../Base/Module/Network/protocol/IMProtocol");(function(t){t[t.PC=0]="PC",t[t.TV=1]="TV",t[t.MOBILE=2]="MOBILE",t[t.WEB=3]="WEB",t[t.H5=7]="H5",t[t.WEIXIN_IOS=66]="WEIXIN_IOS",t[t.WEIXIN_ANDROID=67]="WEIXIN_ANDROID",t[t.WEIXIN_PC=68]="WEIXIN_PC"})(l||(l={})),function(t){t[t.USERID=0]="USERID",t[t.IDENTITY=5]="IDENTITY",t[t.YMN=6]="YMN",t[t.SESSION=7]="SESSION"}(u||(u={})),function(t){t[t.EQFLAG_DEFALUT=0]="EQFLAG_DEFALUT",t[t.REQFLAG_USERINFO=1]="REQFLAG_USERINFO",t[t.REQFLAG_USERDATA=2]="REQFLAG_USERDATA",t[t.REQFLAG_GAMEDATA=16]="REQFLAG_GAMEDATA",t[t.REQFLAG_PROPDATA=32]="REQFLAG_PROPDATA"}(d||(d={})),function(t){t[t.H5_GROUP_GAME_V1_0=1]="H5_GROUP_GAME_V1_0",t[t.H5_GROUP_GAME_V1_1=2]="H5_GROUP_GAME_V1_1",t[t.H5_GROUP_GAME_V2_0=4]="H5_GROUP_GAME_V2_0",t[t.H5_GROUP_GAME_V2_1=8]="H5_GROUP_GAME_V2_1",t[t.H5_GROUP_GAME_V2_2=16]="H5_GROUP_GAME_V2_2",t[t.H5_GROUP_GAME_V2_3=32]="H5_GROUP_GAME_V2_3",t[t.H5_GROUP_GAME_V3_0=64]="H5_GROUP_GAME_V3_0"}(p||(p={}));var N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return f.ProxyRoot.instance.get(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getClientType",{get:function(){if(O.PlatformManager.instance.isWeiXinPlatForm())switch(O.PlatformManager.instance.platform.getSystemInfoSync().platform){case"android":return l.WEIXIN_ANDROID;case"ios":return l.WEIXIN_IOS;default:return l.WEIXIN_PC}return l.WEB},enumerable:!1,configurable:!0}),e.prototype.srsLoginByThird=function(t,e,n){var o=this;this.connectSrs(function(){o.playerConnect({usertype:u.YMN,userid:bf33.Utils.stringToBytes(g.DataBfConfig.deviceID),password:bf33.Utils.stringToBytes("1234"),data:bf33.Utils.stringToBytes(t)},e,n)})},e.prototype.srsLoginBySession=function(t,e,n,o){var a=this;this.connectSrs(function(){console.log("Login.step: SrsLoginBySession",t,e),a.playerConnect({usertype:u.SESSION,userid:bf33.Utils.stringToBytes(t),password:bf33.Utils.stringToBytes(e)},n,o)})},e.prototype.srsLoginByDeviceID=function(t,e,n){var o=this;this.connectSrs(function(){console.log(">>Login step: srsLoginByDeviceID",t),o.playerConnect({clienttype:l.WEB,usertype:u.IDENTITY,userid:void 0,password:void 0},e,n)})},e.prototype.connectSrs=function(t){console.log(">>Login step: srsConnect"),D.SocketUtils.instance.connect(g.DataBfConfig.srsUrl),D.SocketUtils.instance.registerOnce(P.Processid.srs,SRS.MSGID.MSGID_RESPKEY,this,function(){console.log(">>Login step: srsConnect succeed"),t&&t()})},e.prototype.playerConnect=function(t,e,n){var o=this;console.log(">>Login step: playerConnect"),D.SocketUtils.instance.notify(new R.SrsProtocol.ReqPlayerConnect(Object.assign({clienttype:this.getClientType,areaid:g.DataBfConfig.areaID,gameid:g.DataBfConfig.gameID,channelid:g.DataBfConfig.ymn.channel,hardware:bf33.Utils.stringToBytes(g.DataBfConfig.deviceID),version:0,osver:g.DataBfConfig.osVersion,identify:bf33.Utils.stringToBytes(g.DataBfConfig.deviceID),data:bf33.Utils.stringToBytes("")},t))),D.SocketUtils.instance.registerOnce(P.Processid.auth,award_cli.ClientXYID.kRespAwardInfo,this,function(t){if(0===t.flag){console.log("Login.step:kRespAwardInfo",bf33.Utils.bytesToString(t.msg));var e=bf33.Utils.bytesToString(t.msg).split(";"),o=!1,a=e&&Array.find(e,function(t){return t.includes("partner")});a&&(o=0==+a.split("=")[1]);var i=L.TeamWinPhoneFeeEnum.NORMAL,r=e&&Array.find(e,function(t){return t.includes("userType")});r&&(i=+r.split("=")[1]);var s=L.TeamWinPhoneFee2Enum.NORMAL,c=e&&Array.find(e,function(t){return t.includes("userTypeV1")});c&&(s=+c.split("=")[1]);var l=!1,u=e&&Array.find(e,function(t){return t.includes("userTypeV1_1")});u&&(l=1==+u.split("=")[1]);var d=!1,h=e&&Array.find(e,function(t){return t.includes("H5UserType")});if(h){var _=+h.split("=")[1];i=0,s=0,l=!1,d=!1,_&p.H5_GROUP_GAME_V1_0&&(i=1),_&p.H5_GROUP_GAME_V1_1&&(i=2),_&p.H5_GROUP_GAME_V2_0&&(s=1),_&p.H5_GROUP_GAME_V2_1&&(s=2),_&p.H5_GROUP_GAME_V2_2&&(s=3),_&p.H5_GROUP_GAME_V2_3&&(l=!0),_&p.H5_GROUP_GAME_V3_0&&(d=!0)}var f=null,m=e&&Array.find(e,function(t){return t.includes("mergeNumID")});m&&+m.split("=")[1]>0&&(f=+m.split("=")[1]);var g=e&&Array.find(e,function(t){return t.includes("newbee")});if(g){var y=g.split("=")[1],I=JSON.parse(y)||{};n&&n({isNewRegister:!0,isOpenFriendTeam:o,awards:I,teamUserType:i,teamUserType2:s,hideTeamSingleOnline:l,isGoldInlineTeam:d,mergeNumID:f})}else{var C=e&&Array.find(e,function(t){return t.includes("lastLoginTime")}),M=C&&+C.split("=")[1];n&&n({isNewRegister:!1,lastLoginTime:M,isOpenFriendTeam:o,teamUserType:i,teamUserType2:s,hideTeamSingleOnline:l,isGoldInlineTeam:d,mergeNumID:f})}}}),D.SocketUtils.instance.registerOnce(P.Processid.srs,SRS.MSGID.MSGID_PLAYERDATA,this,function(t){SRS.PlayerData.FLAG.SUCCESS===t.flag?(console.log(">>Login step: playerConnect succeed:",t.numid),L.UserInfoModel.instance.setUserInfo({numID:t.numid}),o.reqUserProfile(function(n){e&&e(t.flag,n)},{sessionID:bf33.Utils.bytesToString(t.sessionid)})):auth.PlayerData.FLAG.kFORBID_USERID===t.flag?(console.error(">>Login step: playerConnect.failed:",t.flag),h.EventManager.instance.off(w.SocketEventType.Break,G.LoginModel.instance,null),e&&e(t.flag,{numID:t.numid})):(console.error(">>Login step: playerConnect failed:",t.flag),D.SocketUtils.instance.disconnect(),e&&e(t.flag,null))})},e.prototype.reqUserProfile=function(t,e){var n=this;console.log(">>Login step reqUserProfile");var o=d.REQFLAG_GAMEDATA|d.REQFLAG_PROPDATA|d.REQFLAG_USERDATA|d.REQFLAG_USERINFO;D.SocketUtils.instance.notify(new S.ClubLobbyProtocol.ReqUserProfiles({reqflags:o,gameid:g.DataBfConfig.gameID})),D.SocketUtils.instance.registerOnce(P.Processid.clubLobby,club.client.lobby.MSGID.RESP_USERPROFILES,this,function(o){if(0==o.errcode){console.log(">>Login step: reqUserProfile succeed",o);var a={userID:bf33.Utils.bytesToString(o.userinfo.username),numID:o.userinfo.numid,nickname:A.UtilTool.easyUTF8(o.userinfo.nickname),sex:o.userinfo.sex,right:o.userinfo.rights,regtime:o.userinfo.regtime,vip:o.userinfo.vipid,vipendtime:o.userinfo.vipendtime,avatar:o.userinfo.avatar,headurl:E.UtilString.adaptHttpUrlToHttps(bf33.Utils.bytesToString(o.userinfo.headurl)),headframe:o.userinfo.headframe,charm:o.userdata.charm,diamond:o.userdata.money,gold:o.gamedata.playgold,gamescore:o.gamedata.gamescore,gameexp:o.gamedata.gameexp,win:o.gamedata.gamewin,lose:o.gamedata.gamelose,draw:o.gamedata.gamedraw,escape:o.gamedata.gameescape,countprops:o.propdata.countprops,timeprops:o.propdata.timeprops};e&&(a.sessionID=e.sessionID),n.reqNetWorkTime(),n.reqJoinIM(),n.reqJoinAward(t,a)}else console.error(">>Login step: reqUserProfile failed"),D.SocketUtils.instance.disconnect(),t&&t(null)})},e.prototype.reqNetWorkTime=function(){D.SocketUtils.instance.notify(new T.CommonProtocol.ReqNetworkTime),D.SocketUtils.instance.registerOnce(P.Processid.clubLobby,club.client.common.MSGID.NETWORKTIME,this,function(t){console.log(">-----\x3eLogin step: reqNetWorkTime:",t),L.UserInfoModel.instance.setServerTimestamp(Number(t.receive_timestamp))})},e.prototype.reqJoinIM=function(){var t=this,e=new B.IMProtocol.ReqJoin;e.client_type=2,D.SocketUtils.instance.notify(e),D.SocketUtils.instance.registerOnce(P.Processid.im,im_cli.ClientXYID.kRespJoin,this,function(e){console.log("reqJoinIM.RespJoin:",e),e.flag==im_cli.RespJoin.Flag.kSuccess?(b.ProtocolManager.instance.setProcess2Appid(P.Processid.im,e.appid),t.reqSubscribeIM()):e.flag==im_cli.RespJoin.Flag.kConflict?(b.ProtocolManager.instance.setProcess2Appid(P.Processid.im,e.in_appid),t.reqSubscribeIM()):console.error("reqJoinIM.RespJoin error")})},e.prototype.reqSubscribeIM=function(t){var e=new B.IMProtocol.ReqSubscribe;e.game_id=t||g.GameIDInfo.CLASSIC_GD.id,D.SocketUtils.instance.notify(e),D.SocketUtils.instance.registerOnce(P.Processid.im,im_cli.ClientXYID.kRespSubScribe,this,function(t){console.log("reqSubscribeIM.RespSubScribe:",t),0==t.error_code?h.EventManager.instance.emit(C.DataEvent.IMServerListener):console.error("reqSubscribeIM.RespSubScribe error")})},e.prototype.reqJoinAward=function(t,e){console.log(">-----\x3eLogin step: reqJoinAward"),D.SocketUtils.instance.notify(new U.AwardProtocol.ReqJoin),D.SocketUtils.instance.registerOnce(P.Processid.award,award_cli.ClientXYID.kRespJoin,this,function(n){console.log(">-----\x3eLogin step: resqJoinAward:",n),award_cli.RespJoin.Flag.kSuccess==n.flag?(b.ProtocolManager.instance.setProcess2Appid(P.Processid.award,n.appid),t&&t(e),h.EventManager.instance.emit(C.DataEvent.JoinAwardListener)):award_cli.RespJoin.Flag.kConflict==n.flag?(b.ProtocolManager.instance.setProcess2Appid(P.Processid.award,n.in_appid),t&&t(e),h.EventManager.instance.emit(C.DataEvent.JoinAwardListener)):(D.SocketUtils.instance.disconnect(),t&&t(null),console.error(">>error.Login step: resqJoinAward"))})},e.prototype.codeCheck=function(t,e){var n={code:t,channelID:g.DataBfConfig.ymn.channel},o="",a={"Content-Type":"application/json"};if(O.PlatformManager.instance.isStrongArmyPlatForm())o=I.DataConstant.CODE_SIGN_HOST_STRONGMILITARY;else if(O.PlatformManager.instance.isSkyWingPlatForm()){o=I.DataConstant.CODE_SIGN_HOST_SKYWING;var i=Date.parse((new Date).toString())/1e3,r=c(A.UtilTool.generateHttpHeaderSign(n,i),3),s=r[0],l=r[1],u=r[2];Object.assign(a,{"X-Nonce":s,"X-Timestamp":l,"X-Authorization":u})}else if(O.PlatformManager.instance.isMeiTuanPlatForm()){o=I.DataConstant.CODE_SIGN_HOST_MEITUAN,i=Date.parse((new Date).toString())/1e3;var d=c(A.UtilTool.generateHttpHeaderSign(n,i),3);s=d[0],l=d[1],u=d[2],Object.assign(a,{"X-Nonce":s,"X-Timestamp":l,"X-Authorization":u})}else o=I.DataConstant.CODE_SIGN_HOST_YMN;m.HttpUtil.post(o,n,a).then(function(t){0===t.code?e&&e(!0,t.data):e&&e(!1,t.code.toString())},function(t){console.error(t),e&&e(!1,"codeCheck.error!")})},e.prototype.reqSynOpenID=function(t){console.log(">>Login.step: reqSynOpenID");var e=new U.AwardProtocol.ReqAwardInfo({type:M.DataScript.syncOpenID.id,gameid:g.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("mini=1;func="+M.DataScript.syncOpenID.func.query+";")});D.SocketUtils.instance.request(e,function(e){if(console.log(">>resqSynOpenID"),e.msg){var n=bf33.Utils.bytesToString(e.msg);console.log(">>resqSynOpenID_:",n);var o=n.split("|");if("0"===o[0]){var a=o[1]||"";t&&t({openID:a})}}})},e.prototype.reqSynChannelInfo=function(t){var e=this;console.log(">>Login.step: reqSynChannelInfo");var n=new U.AwardProtocol.ReqAwardInfo({type:M.DataScript.channelInfo.id,gameid:g.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("mini=1;func='"+M.DataScript.channelInfo.func.setClientInfo+"';channelid="+g.DataBfConfig.ymn.channel+";packageid=9010;clientver="+g.DataBfConfig.getPackageVersion()+";resver=0;logintype=0;devid='"+g.DataBfConfig.deviceID+"';ver='"+this.getClientType+"';")});D.SocketUtils.instance.request(n,function(n){n.msg&&(console.log(">-----\x3eLogin.step: resqSynChannelInfo",bf33.Utils.bytesToString(n.msg)),e.reqClientControl(t))})},e.prototype.reqWeChatMPAd=function(t,e,n){return r(this,void 0,Promise,function(){var o;return s(this,function(a){switch(a.label){case 0:return o={ad_id:n,media_key:"gdt",numid:t||0,openid:e||"",package_id:1057,product_id:1003},[4,v.LogicApiHub.apiHubPost("sinan_api","post","weixin/mp/ad",o)];case 1:return a.sent(),[2]}})})},e.prototype.reqClientControl=function(t){console.log(">-----\x3eLogin.step: reqClientControl"),D.SocketUtils.instance.notify(new S.ClubLobbyProtocol.ReqClientConfig),D.SocketUtils.instance.registerOnce(P.Processid.clubLobby,club.client.lobby.MSGID.RESP_CLIENTCONFIG,this,function(e){for(var n="",o=0;o<e.infos.length;o++)if(club.client.lobby.RespClientConfig.DataType.TYPE_CLINETCONFIG===e.infos[o].type){n=bf33.Utils.bytesToString(e.infos[o].data);break}if(console.log(">-----\x3eLogin.step: respClientControl:",n),""===n)return t&&t(),void h.EventManager.instance.emit(C.DataEvent.ClientControlUpdate);var a={iosPayGameCountLimit:A.UtilTool.getLuaIntValue(n,"iosPayGameCount"),showIosPay:1===A.UtilTool.getLuaIntValue(n,"showIosPay"),guideMatchCount:A.UtilTool.getLuaIntValue(n,"guideMatch"),popMatchLoginAd:1===A.UtilTool.getLuaIntValue(n,"showMatchAd"),openMatchSubscribe:1===A.UtilTool.getLuaIntValue(n,"openMatchSubscribe"),tempMatchIcon:A.UtilTool.getLuaIntValue(n,"tempMatchIcon")};y.DataClubClientConfig.setClubClientConfig(a),h.EventManager.instance.emit(C.DataEvent.ClientControlUpdate),t&&t()})},e.prototype.reqBindMeiTuanInfo=function(t){var e=new U.AwardProtocol.ReqAwardInfo({type:M.DataScript.meiTuanInfo.id,gameid:g.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("mini=1;func='"+M.DataScript.meiTuanInfo.func.query+"';channelid="+g.DataBfConfig.ymn.channel)});D.SocketUtils.instance.request(e,function(e){if(0===e.flag){var n=bf33.Utils.bytesToString(e.msg),o=JSON.parse(n);0===o.flag?(console.log(">----\x3ereqBindMeiTuanInfo.decode:",o),t&&t(!0,o)):t&&t(!1)}else t&&t(!1)})},n=i([jsClass],e)}(_.BaseProxy);n.LoginProxy=N,cc.systemEvent.once("GameRoot.inited",function(){f.ProxyRoot.instance.add(N)}),cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/Proxy/BaseProxy":"BaseProxy","../../Framework/Root/ProxyRoot":"ProxyRoot","../../Framework/Utils/HttpUtil":"HttpUtil","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataClubClientConfig":"DataClubClientConfig","../Base/Data/DataConstant":"DataConstant","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataScript":"DataScript","../Base/Module/ApiHub/LogicApiHub":"LogicApiHub","../Base/Module/Network/Base/Processid":"Processid","../Base/Module/Network/Base/ProtocolManager":"ProtocolManager","../Base/Module/Network/SocketEventType":"SocketEventType","../Base/Module/Network/SocketUtils":"SocketUtils","../Base/Module/Network/protocol/AwardProtocol":"AwardProtocol","../Base/Module/Network/protocol/ClubLobbyProtocol":"ClubLobbyProtocol","../Base/Module/Network/protocol/CommonProtocol":"CommonProtocol","../Base/Module/Network/protocol/IMProtocol":"IMProtocol","../Base/Module/Network/protocol/SrsProtocol":"SrsProtocol","../Base/Module/Platform/PlatformManager":"PlatformManager","../Base/Utils/UtilString":"UtilString","../Base/Utils/UtilTool":"UtilTool","../UserInfo/UserInfoModel":"UserInfoModel","./LoginModel":"LoginModel"}],LoginUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"9da50UHqrtC2ouSQPyzBAqU","LoginUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./LoginUI_window"),a=t("./LoginUI_lbLoding"),i=t("./LoginUI_btnEmpty"),r=t("./LoginUI_MainPanel"),s=t("./LoginUI_checkBoxPrivacyComp"),c=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default)},t}();n.default=c,cc._RF.pop()},{"./LoginUI_MainPanel":"LoginUI_MainPanel","./LoginUI_btnEmpty":"LoginUI_btnEmpty","./LoginUI_checkBoxPrivacyComp":"LoginUI_checkBoxPrivacyComp","./LoginUI_lbLoding":"LoginUI_lbLoding","./LoginUI_window":"LoginUI_window"}],LoginUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"f357dCRxIdHL6uYc+SDe6nT","LoginUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("LoginUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Window=this.getChildAt(0)},e.URL="ui://goq10b5ve5mgf",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],LoginUI_btnEmpty:[function(t,e,n){"use strict";cc._RF.push(e,"19b08lX/NdNFoPpaVjyUk3J","LoginUI_btnEmpty");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("LoginUI","btnEmpty")},e.prototype.onConstruct=function(){this.m_COffsetY=this.getControllerAt(0)},e.URL="ui://goq10b5ve5mgd",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],LoginUI_checkBoxPrivacyComp:[function(t,e,n){"use strict";cc._RF.push(e,"ad8d2mMkQ5Bqa0z9TxyctC8","LoginUI_checkBoxPrivacyComp");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("LoginUI","checkBoxPrivacyComp")},e.prototype.onConstruct=function(){this.m_chkPrivacy=this.getChildAt(0)},e.URL="ui://goq10b5vj07dw",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],LoginUI_lbLoding:[function(t,e,n){"use strict";cc._RF.push(e,"2ddd152uqFAqJvFRL8NyQ7P","LoginUI_lbLoding");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("LoginUI","lbLoding")},e.prototype.onConstruct=function(){this.m_c1=this.getControllerAt(0),this.m_txtProgress=this.getChildAt(3),this.m_gProgress=this.getChildAt(4)},e.URL="ui://goq10b5ve5mgc",e}(fgui.GProgressBar);n.default=i,cc._RF.pop()},{}],LoginUI_window:[function(t,e,n){"use strict";cc._RF.push(e,"846dbJeewJDWpvi0fw4BIuC","LoginUI_window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("LoginUI","window")},e.prototype.onConstruct=function(){this.m_c1=this.getControllerAt(0),this.m_c_privacyPop=this.getControllerAt(1),this.m_btnAnnounce=this.getChildAt(1),this.m_btnFix=this.getChildAt(2),this.m_btnCustomer=this.getChildAt(3),this.m_logo=this.getChildAt(4),this.m_btnTouristLogin=this.getChildAt(5),this.m_bottom=this.getChildAt(6),this.m_lbLoading=this.getChildAt(7),this.m_chkPrivacy=this.getChildAt(8)},e.URL="ui://goq10b5ve5mg0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],LoginUI:[function(t,e,n){"use strict";cc._RF.push(e,"d4b848RsbFH8L3YMcWVf1En","LoginUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.LoginUI=void 0;var r,s=t("../../Framework/Manager/EventManager"),c=t("../../Framework/Manager/UIManager"),l=t("../../Framework/UI/BaseUI"),u=t("../Announcement/AnnouncementModel"),d=t("../Announcement/AnnouncementUI"),p=t("../Base/Data/DataEvent"),h=t("../Base/Data/DataLocalStorageKey"),_=t("../Base/Module/BfAnalytics/BfasManager"),f=t("../Base/Module/BfAnalytics/DataPointID"),m=t("../Base/View/UIHelp"),g=t("../Base/View/Common/PrivacyDialogUI"),y=t("../Base/Module/Platform/Const/PlatformEventType"),I=t("../Base/Module/Platform/PlatformManager"),C=t("../Base/Module/Platform/_IPlatform"),M=t("./LoginModel");(function(t){t[t.SHOW_PRIVACY_POP=0]="SHOW_PRIVACY_POP",t[t.SHOW_PRIVACY_CHECKBOX=1]="SHOW_PRIVACY_CHECKBOX"})(r||(r={}));var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isAutoLogin=!1,e}var n;return a(e,t),n=e,Object.defineProperty(e,"willShowLoading",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initData(),this.initUI(),this.preload()},e.prototype.initListener=function(){s.EventManager.instance.on(y.PlatformEventType.AppHide,this,this.onAppHide),s.EventManager.instance.on(p.DataEvent.LoginSuccess,this,this.onLogin),s.EventManager.instance.on(p.DataEvent.AnnouncementComplete,this,this.watingAnnouncementComplete),s.EventManager.instance.on(p.DataEvent.LoginGame,this,this.onLoginClick),this.view.m_Window.m_btnFix.onClick(this.onBtnFix,this),this.view.m_Window.m_btnTouristLogin.onClick(this.onBtnTouristLogin,this),this.view.m_Window.m_btnAnnounce.onClick(this.onBtnAnnouncement,this),this.view.m_Window.m_btnCustomer.onClick(this.onBtnCustomer,this)},e.prototype.initData=function(){s.EventManager.instance.emit(p.DataEvent.LoginUIShow)},e.prototype.initUI=function(){this.view.m_Window.m_c1.selectedIndex=0,this.view.m_Window.m_lbLoading.progress=0,this.view.m_Window.m_chkPrivacy.m_chkPrivacy.selected=!0,this.view.m_Window.m_chkPrivacy.m_chkPrivacy.touchable=!this._isAutoLogin,I.PlatformManager.instance.supportAct.CUSTOMER||(this.view.m_Window.m_btnCustomer.visible=!1),this.updateUI()},e.prototype.preload=function(){var t=this;I.PlatformManager.instance.platform.showLoading("\u52a0\u8f7d\u4e2d.."),m.UIHelp.instance.preloadHallSpinePrefab(),m.UIHelp.instance.preload(function(e){console.log(">-----\x3eprogress:",e+"_"+t.view.m_Window.m_lbLoading.max),t.view.m_Window.m_lbLoading.progress=e*t.view.m_Window.m_lbLoading.max,t.view.m_Window.m_lbLoading.m_txtProgress.text=Math.floor(100*e)+"%"},function(){console.log("Preloading complete."),I.PlatformManager.instance.platform.hideLoading(),t._isAutoLogin||(t.view.m_Window.m_c1.selectedIndex=1),_.BfasManager.instance.evtUserLinkPoint(f.UserConvertLinkPointID.LOADING_SUCCESS.eventid,f.UserConvertLinkPointID.LOADING_SUCCESS.eventName,!0)})},e.prototype.onAppHide=function(){c.UIManager.instance.isExist(n)&&(console.log(">----\x3eonAppHide.LoginUI"),_.BfasManager.instance.evtUserLinkPoint(f.UserConvertLinkPointID.CLOSE_LIGIN_UI.eventid,f.UserConvertLinkPointID.CLOSE_LIGIN_UI.eventName,!0))},e.prototype.onLogin=function(){m.UIHelp.instance.enterHall()},e.prototype.watingAnnouncementComplete=function(){this.checkShowAnnouncementUI()||(this._isAutoLogin=!this.showPrivacyDialogUI()),this._isAutoLogin&&this.login(),this.updateUI()},e.prototype.onLoginClick=function(){_.BfasManager.instance.evtUserLinkPoint(f.UserConvertLinkPointID.CLICK_ENTER_BTN.eventid,f.UserConvertLinkPointID.CLICK_ENTER_BTN.eventName),this.view.m_Window.m_btnTouristLogin.visible&&(this.checkShowAnnouncementUI()||(u.AnnouncementModel.instance.config.isPrivacyOpen?this.showPrivacyDialogUI()||this.login():this.view.m_Window.m_chkPrivacy.m_chkPrivacy.selected?this.login():I.PlatformManager.instance.platform.showToast("\u8bf7\u60a8\u540c\u610f\u4f7f\u7528\u534f\u8bae\u548c\u9690\u79c1\u653f\u7b56\uff0c\u624d\u80fd\u8fdb\u5165\u6e38\u620f\u54e6~")))},e.prototype.onBtnFix=function(){I.PlatformManager.instance.platform.fix(!0)},e.prototype.onBtnTouristLogin=function(){this.onLoginClick()},e.prototype.onBtnAnnouncement=function(){c.UIManager.instance.isExist(d.AnnouncementUI)||c.UIManager.instance.open(d.AnnouncementUI)},e.prototype.onBtnCustomer=function(){_.BfasManager.instance.sendEvt(f.CustomerPointID.LOGIN_CUSTOMER),m.UIHelp.instance.openCustomerServiceLink(C.CustomerRequestTypeEnum.CUSTOMER_SERVICE)},e.prototype.updateUI=function(){this.view.m_Window.m_btnAnnounce.visible=u.AnnouncementModel.instance.config.isOpen,this.view.m_Window.m_c_privacyPop.selectedIndex=u.AnnouncementModel.instance.config.isPrivacyOpen?r.SHOW_PRIVACY_POP:r.SHOW_PRIVACY_CHECKBOX},e.prototype.checkShowAnnouncementUI=function(){return!!u.AnnouncementModel.instance.config.isOpen&&(this.onBtnAnnouncement(),!0)},e.prototype.login=function(){M.LoginModel.instance.login(!0)},e.prototype.showPrivacyDialogUI=function(){return!(!u.AnnouncementModel.instance.config.isPrivacyOpen||h.DataLocalStorage.userAgreeAgreement()||(c.UIManager.instance.isExist(g.PrivacyDialogUI)||(_.BfasManager.instance.evtUserLinkPoint(f.UserConvertLinkPointID.POP_PRIVACY.eventid,f.UserConvertLinkPointID.POP_PRIVACY.eventName),c.UIManager.instance.open(g.PrivacyDialogUI).then(function(t){t.init()})),0))},n=i([jsClass],e)}(l.BaseUI);n.LoginUI=v,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/UI/BaseUI":"BaseUI","../Announcement/AnnouncementModel":"AnnouncementModel","../Announcement/AnnouncementUI":"AnnouncementUI","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Platform/Const/PlatformEventType":"PlatformEventType","../Base/Module/Platform/PlatformManager":"PlatformManager","../Base/Module/Platform/_IPlatform":"_IPlatform","../Base/View/Common/PrivacyDialogUI":"PrivacyDialogUI","../Base/View/UIHelp":"UIHelp","./LoginModel":"LoginModel"}],LongCountDownUI:[function(t,e,n){"use strict";cc._RF.push(e,"057f5OY7IVCB7odANrZ61Mr","LongCountDownUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.LongCountDownUI=void 0;var r=t("../../../Framework/UI/BaseUI"),s=t("../../../Framework/UI/FadeUI"),c=t("../../Base/Data/DatazOrder"),l=t("../../Base/Module/BfAnalytics/BfasManager"),u=t("../../Base/Module/BfAnalytics/DataPointID"),d=t("./MatchHintUIBinder"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._countDownID=null,e}return a(e,t),Object.defineProperty(e,"uiType",{get:function(){return r.UIType.Dialog},enumerable:!1,configurable:!0}),e.getPkgName=function(){return"MatchHintUI"},e.getCompName=function(){return cc.js.getClassName(this)+"_MainPanel"},Object.defineProperty(e,"sortingOrder",{get:function(){return c.DataZOrder.MAX},enumerable:!1,configurable:!0}),e.uiBind=function(){d.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"confirmAction",{set:function(t){this._confirmAction=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cancelAction",{set:function(t){this._cancelAction=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.stopCountDown()},e.prototype.initListener=function(){this.view.m_Window.m_BtnClose.onClick(this.onCloseClick,this),this.view.m_Window.m_BtnConfirm.onClick(this.onConfirmClick,this),this.view.m_Window.m_BtnCancel.onClick(this.onCancelClick,this)},e.prototype.init=function(t){this.showCountDown(t),this.startCountDown(t)},e.prototype.onCloseClick=function(){l.BfasManager.instance.sendEvt(u.MatchPoint.HALL_MATCH_HINT_CLOSE),t.prototype.onExitClick.call(this)},e.prototype.onConfirmClick=function(){t.prototype.onExitClick.call(this),this._confirmAction&&this._confirmAction()},e.prototype.onCancelClick=function(){t.prototype.onExitClick.call(this),this._cancelAction&&this._cancelAction()},e.prototype.showCountDown=function(t){var e=Math.floor(t.time/60),n=t.time%60,o=e>9?Math.floor(e/10):0,a=e>9?e%10:e,i=n>9?Math.floor(n/10):0,r=n>9?n%10:n,s=t.name+"[color=#D50804]"+e+"[/color]\u5206\u949f\u540e\u5f00\u8d5b";this.view.m_Window.m_text.text=s,this.view.m_Window.m_txtNum1.text=o.toString(),this.view.m_Window.m_txtNum2.text=a.toString(),this.view.m_Window.m_txtNum3.text=i.toString(),this.view.m_Window.m_txtNum4.text=r.toString()},e.prototype.startCountDown=function(t){var e=this;this.stopCountDown();var n=t.name,o=t.time;this._countDownID=setInterval(function(){o>0?(o-=1,e.showCountDown({name:n,time:o})):(e.stopCountDown(),e.onExitClick())},1e3)},e.prototype.stopCountDown=function(){this._countDownID&&(clearInterval(this._countDownID),this._countDownID=null)},i([jsClass],e)}(s.FadeUI);n.LongCountDownUI=p,cc._RF.pop()},{"../../../Framework/UI/BaseUI":"BaseUI","../../../Framework/UI/FadeUI":"FadeUI","../../Base/Data/DatazOrder":"DatazOrder","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","./MatchHintUIBinder":"MatchHintUIBinder"}],LuckyTurnTableModel:[function(t,e,n){"use strict";cc._RF.push(e,"d346cRTzTlGKosxms1UtjVS","LuckyTurnTableModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.LuckyTurnTableModel=n.TurnStartBtnStateEnum=n.TurnTypeSubscribedEnum=n.SubscribeTempIDTurnTable=void 0;var r,s,c=t("../../Framework/Manager/CoroutineManager"),l=t("../../Framework/Manager/EventManager"),u=t("../../Framework/Manager/UIManager"),d=t("../../Framework/Model/BaseModel"),p=t("../../Framework/Root/ModelRoot"),h=t("../Base/Data/DataEvent"),_=t("../Base/Data/DataProps"),f=t("../Base/Data/DataRes"),m=t("../Base/Module/Platform/PlatformManager"),g=t("../Base/Module/Share/ShareManager"),y=t("./LuckyTurnTableProxy"),I=t("./LuckyTurnTableUI");n.SubscribeTempIDTurnTable="1Tka30IHbspcufcncRMLTqoF_zt0xAc1YnHU0pBXen4",function(t){t[t.SHARE=0]="SHARE",t[t.VIDEO=1]="VIDEO"}(r=n.TurnTypeSubscribedEnum||(n.TurnTypeSubscribedEnum={})),function(t){t[t.SUBSCRIBE=0]="SUBSCRIBE",t[t.SHARE=1]="SHARE",t[t.VIDEO=2]="VIDEO",t[t.COOL_DOWN=3]="COOL_DOWN",t[t.FREE=4]="FREE"}(s=n.TurnStartBtnStateEnum||(n.TurnStartBtnStateEnum={}));var C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._turnTableData=null,e._turnAward=null,e._arrowID=1,e._isHadTurnTableData=!1,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return p.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return y.LuckyTurnTableProxy.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"turnTableData",{get:function(){return this._turnTableData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"turnAward",{get:function(){return this._turnAward},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arrowid",{get:function(){return this._arrowID-1},enumerable:!1,configurable:!0}),e.prototype.modifySubscribeTime=function(t){this._turnTableData.subscribeTime=t},e.prototype.modifyCurTurnTime=function(t){this._turnTableData.curTurnTime=t},e.prototype.isSubscribe=function(){return this.turnTableData.subscribeTime>0},e.prototype.getTurnBtnType=function(){if(console.log("getTurnBtnType.curTurnTime:",this._turnTableData.curTurnTime),this._turnTableData.curTurnTime>=this._turnTableData.totalTime)return s.COOL_DOWN;if(this.isSubscribe()){if(console.log("getTurnBtnType.isSubscribe"),0===this._turnTableData.curTurnTime)return s.FREE;var t=this._turnTableData.reissueRate[r.SHARE];return Math.randomRangeInt(0,100)>t?s.VIDEO:s.SHARE}if(0===this._turnTableData.curTurnTime)return s.SUBSCRIBE;var e=this._turnTableData.reissueRate[r.SHARE];return Math.randomRangeInt(0,100)>e?s.VIDEO:s.SHARE},e.prototype.reqTurnTableData=function(t){var e=this;this.proxy.reqTurnTableData(function(n){var o,a={subscribeTime:Number(n[1]),curTurnTime:Number(n[2]),totalTime:Number(n[3])};a.reissueRate=((o={})[r.VIDEO]=0,o[r.SHARE]=0,o),JSON.parse(n[4]).forEach(function(t){a.reissueRate[Number(t.content)]=Number(t.rate)}),e._turnTableData=a,e._isHadTurnTableData=!0,console.log("======>reqTurnTableData:",e._turnTableData),t&&t()})},e.prototype.reqFirstAward=function(t,e){var n=this;this.proxy.reqFirstTurnAward(t,function(t){if(0===Number(t[0]))return n.modifySubscribeTime(Number(t[1])),n.modifyCurTurnTime(Number(t[2])),n.modifyAwardAndArrowid(JSON.parse(t[4])),void(e&&e(!0));e&&e(!1);var o="\u8bf7\u6c42\u8f6c\u52a8\u9519\u8bef:  "+t[0];l.EventManager.instance.emit(h.DataEvent.ToastData,o)})},e.prototype.reqAfterAward=function(t,e,n,o){var a=this;this.proxy.reqAfterAward(t,e,n,function(e){if(0===Number(e[0]))return a.modifyCurTurnTime(Number(e[1])),a.modifyAwardAndArrowid(JSON.parse(e[3])),void(o&&o(!0));o&&o(!1);var n="\u9886\u53d6\u5956\u52b1\u9519\u8bef:  "+e[0];g.ShareCheckTypeEnum.CHECK_BY_LOAD_IMG!==t&&g.ShareCheckTypeEnum.CHECK_BY_TIME!==t||(n=Math.random()>.5?"\u9700\u8fdb\u884c\u5206\u4eab\u624d\u80fd\u9886\u53d6\u5956\u52b1\u54e6~":"\u5206\u4eab\u5931\u8d25\uff0c\u6362\u4e2a\u597d\u53cb\u8bd5\u8bd5"),l.EventManager.instance.emit(h.DataEvent.ToastData,n)})},e.prototype.modifyAwardAndArrowid=function(t){var e=t.award;if(this._arrowID=Number(t.id),this._turnAward=null,e)if(e.asr){var n={awardType:_.PropTypeEnum.GOLD,count:Number(e.asr),resName:f.Res.GOLD8};this._turnAward=n}else if(e.props)for(var o in e.props){var a=e.props[o],i=_.DataProps.instance.getPropConfigByID(o);this._turnAward={awardType:i.type,count:Number(a),resName:i.res}}console.log("======>arrowid: ",this._arrowID),console.log("=====>awardInfo: ",e," turnAward: ",this._turnAward)},e.prototype.autoPopup=function(){var t=this;m.PlatformManager.instance.supportAct.LUCKY_TURN&&(u.UIManager.instance.isExist(I.LuckyTurnTableUI)||(u.UIManager.instance.addTopCollider("autoPopup"),this._coroutine=c.CoroutineManager.instance.timeoutWait(function(){return t._isHadTurnTableData},1,function(){u.UIManager.instance.removeTopCollider("autoPopup"),t._turnTableData&&t._turnTableData.curTurnTime<t._turnTableData.totalTime&&u.UIManager.instance.open(I.LuckyTurnTableUI)},this)))},e.prototype.stopPopup=function(){this._coroutine&&(c.CoroutineManager.instance.stopCo(this._coroutine),u.UIManager.instance.removeTopCollider("autoPopup")),this._coroutine=null,u.UIManager.instance.close(I.LuckyTurnTableUI)},e.prototype.openLuckyTurnTableUI=function(){this._turnTableData?u.UIManager.instance.open(I.LuckyTurnTableUI):this.reqTurnTableData(function(){u.UIManager.instance.open(I.LuckyTurnTableUI)})},i([jsClass],e)}(d.BaseModel);n.LuckyTurnTableModel=C,cc.systemEvent.once("GameRoot.inited",function(){p.ModelRoot.instance.add(C)}),cc._RF.pop()},{"../../Framework/Manager/CoroutineManager":"CoroutineManager","../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/Model/BaseModel":"BaseModel","../../Framework/Root/ModelRoot":"ModelRoot","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataProps":"DataProps","../Base/Data/DataRes":"DataRes","../Base/Module/Platform/PlatformManager":"PlatformManager","../Base/Module/Share/ShareManager":"ShareManager","./LuckyTurnTableProxy":"LuckyTurnTableProxy","./LuckyTurnTableUI":"LuckyTurnTableUI"}],LuckyTurnTableProxy:[function(t,e,n){"use strict";cc._RF.push(e,"6acb9fhD89Gooi6hMVuJmbw","LuckyTurnTableProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.LuckyTurnTableProxy=void 0;var r=t("../../Framework/Proxy/BaseProxy"),s=t("../../Framework/Root/ProxyRoot"),c=t("../Base/Data/DataBfConfig"),l=t("../Base/Data/DataScript"),u=t("../Base/Module/Network/protocol/AwardProtocol"),d=t("../Base/Module/Network/SocketUtils"),p=t("../UserInfo/UserInfoModel"),h=t("./LuckyTurnTableModel"),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return s.ProxyRoot.instance.get(n)},enumerable:!1,configurable:!0}),e.prototype.reqTurnTableData=function(t){var e=p.UserInfoModel.instance.userInfo.openID,n=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.luckyTurnTable.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("mini=1;func="+l.DataScript.luckyTurnTable.func.query+";openid='"+e+"';templateid='"+h.SubscribeTempIDTurnTable+"';")});d.SocketUtils.instance.request(n,function(e){if(0===e.flag){var n=bf33.Utils.bytesToString(e.msg).split("|")||[];0===Number(n[0])&&t&&t(n)}})},e.prototype.reqFirstTurnAward=function(t,e){var n=p.UserInfoModel.instance.userInfo.openID,o=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.luckyTurnTable.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("mini=1;func="+l.DataScript.luckyTurnTable.func.getFirstAward+";withSubscribe="+t+";openid='"+n+"';templateid='"+h.SubscribeTempIDTurnTable+"';")});d.SocketUtils.instance.request(o,function(t){if(0===t.flag){var n=bf33.Utils.bytesToString(t.msg).split("|")||[];0===Number(n[0])&&e&&e(n)}})},e.prototype.reqAfterAward=function(t,e,n,o){console.log("reqAfterAward:checkType: ",t," sec: ",e," shareFlag: ",n);var a=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.luckyTurnTable.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("mini=1;func="+l.DataScript.luckyTurnTable.func.getAfterAward+";checktype="+t+";sec="+e+";shareflag="+n)});d.SocketUtils.instance.request(a,function(t){if(0===t.flag){var e=bf33.Utils.bytesToString(t.msg).split("|")||[];o&&o(e)}})},n=i([jsClass],e)}(r.BaseProxy);n.LuckyTurnTableProxy=_,cc.systemEvent.once("GameRoot.inited",function(){s.ProxyRoot.instance.add(_)}),cc._RF.pop()},{"../../Framework/Proxy/BaseProxy":"BaseProxy","../../Framework/Root/ProxyRoot":"ProxyRoot","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataScript":"DataScript","../Base/Module/Network/SocketUtils":"SocketUtils","../Base/Module/Network/protocol/AwardProtocol":"AwardProtocol","../UserInfo/UserInfoModel":"UserInfoModel","./LuckyTurnTableModel":"LuckyTurnTableModel"}],LuckyTurnTableUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"beae0ZcKOFNtKPRMm/utEQa","LuckyTurnTableUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./LuckyTurnTableUI_MainPanel"),a=t("./LuckyTurnTableUI_Window"),i=t("./LuckyTurnTableUI_lightArrowComp"),r=t("./LuckyTurnTableUI_btnStartBase"),s=t("./LuckyTurnTableUI_ruleComp"),c=t("./LuckyTurnTableUI_lightComp"),l=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default)},t}();n.default=l,cc._RF.pop()},{"./LuckyTurnTableUI_MainPanel":"LuckyTurnTableUI_MainPanel","./LuckyTurnTableUI_Window":"LuckyTurnTableUI_Window","./LuckyTurnTableUI_btnStartBase":"LuckyTurnTableUI_btnStartBase","./LuckyTurnTableUI_lightArrowComp":"LuckyTurnTableUI_lightArrowComp","./LuckyTurnTableUI_lightComp":"LuckyTurnTableUI_lightComp","./LuckyTurnTableUI_ruleComp":"LuckyTurnTableUI_ruleComp"}],LuckyTurnTableUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"f36f5ktZbRPeatrzbxWaBq1","LuckyTurnTableUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("LuckyTurnTableUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://3imcy8g8fhea0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],LuckyTurnTableUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"e740eY+VQxN86nOSPrpc1ed","LuckyTurnTableUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("LuckyTurnTableUI","Window")},e.prototype.onConstruct=function(){this.m_btnState=this.getControllerAt(0),this.m_ruleState=this.getControllerAt(1),this.m_tableState=this.getControllerAt(2),this.m_btnRate=this.getChildAt(0),this.m_btnClose=this.getChildAt(1),this.m_light1=this.getChildAt(5),this.m_light2=this.getChildAt(6),this.m_light3=this.getChildAt(7),this.m_light4=this.getChildAt(8),this.m_light5=this.getChildAt(9),this.m_light6=this.getChildAt(10),this.m_light7=this.getChildAt(11),this.m_light8=this.getChildAt(12),this.m_gLight=this.getChildAt(13),this.m_arraw=this.getChildAt(14),this.m_dark6=this.getChildAt(16),this.m_dark2=this.getChildAt(19),this.m_dark4=this.getChildAt(22),this.m_dark8=this.getChildAt(25),this.m_btnCoolDown=this.getChildAt(33),this.m_btnMulChoose=this.getChildAt(34),this.m_gSuscribe=this.getChildAt(36),this.m_btnRunStart=this.getChildAt(37),this.m_ruleComp=this.getChildAt(38),this.m_spineChick=this.getChildAt(39),this.m_spineWin=this.getChildAt(40),this.m_t0=this.getTransitionAt(0)},e.URL="ui://3imcy8g8fhea1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],LuckyTurnTableUI_btnStartBase:[function(t,e,n){"use strict";cc._RF.push(e,"1afb9u1h5pL/ZLoezDzonDQ","LuckyTurnTableUI_btnStartBase");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("LuckyTurnTableUI","btnStartBase")},e.prototype.onConstruct=function(){this.m_spineButton=this.getChildAt(0)},e.URL="ui://3imcy8g8fhea1a",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],LuckyTurnTableUI_lightArrowComp:[function(t,e,n){"use strict";cc._RF.push(e,"cafc1oldhhBzKV2qdhLuWJa","LuckyTurnTableUI_lightArrowComp");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("LuckyTurnTableUI","lightArrowComp")},e.prototype.onConstruct=function(){this.m_lightState=this.getControllerAt(0),this.m_down=this.getChildAt(0),this.m_up=this.getChildAt(1)},e.URL="ui://3imcy8g8fhea18",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],LuckyTurnTableUI_lightComp:[function(t,e,n){"use strict";cc._RF.push(e,"0ebd7vhpcNFeJSmyUxH4cs4","LuckyTurnTableUI_lightComp");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("LuckyTurnTableUI","lightComp")},e.prototype.onConstruct=function(){this.m_down=this.getChildAt(0),this.m_up=this.getChildAt(1)},e.URL="ui://3imcy8g8fhea1d",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],LuckyTurnTableUI_ruleComp:[function(t,e,n){"use strict";cc._RF.push(e,"90088y+6PNI+KIIUyvm2eRz","LuckyTurnTableUI_ruleComp");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("LuckyTurnTableUI","ruleComp")},e.prototype.onConstruct=function(){this.m_btnBgBlack=this.getChildAt(0),this.m_btnClose=this.getChildAt(2),this.m_list=this.getChildAt(4)},e.URL="ui://3imcy8g8fhea1b",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],LuckyTurnTableUI:[function(t,e,n){"use strict";cc._RF.push(e,"a656agMQ8JMuqcLzt6on5nP","LuckyTurnTableUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.LuckyTurnTableUI=void 0;var r,s,c,l=t("../../Framework/Manager/EventManager"),u=t("../../Framework/Manager/UIManager"),d=t("../../Framework/UI/FadeUI"),p=t("../Activity/Advertise/VideoAdManager"),h=t("../Award/AwardUI"),_=t("../Base/Data/DataBfConfig"),f=t("../Base/Data/DataEvent"),m=t("../Base/Module/BehaviorBranch/LogicBehaviorBranch"),g=t("../Base/Module/BfAnalytics/BfasManager"),y=t("../Base/Module/BfAnalytics/DataPointID"),I=t("../Base/View/UIHelp"),C=t("../Base/Module/Share/ShareManager"),M=t("./LuckyTurnTableModel"),v=t("../Base/Utils/UtilCC"),E=t("../Base/Data/DataSpineAni");(function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"})(r||(r={})),function(t){t[t.ALL=0]="ALL",t[t.PART=1]="PART"}(s||(s={})),function(t){t[t.UNSELECTED=0]="UNSELECTED",t[t.SELECTED=1]="SELECTED"}(c||(c={}));var A=[{per:0,speed:720,fade:.16},{per:30,speed:1080,fade:.23},{per:80,speed:720,fade:.23},{per:100,speed:100,fade:.3}],P=!1,b=0,U=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._tLightSeq=[],e._nLightIndex=0,e._nAwardIndex=1,e._awardsArray=[],e}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return M.LuckyTurnTableModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initData(),this.initUI(),this.reportDataPoint(y.LuckyTurnTablePoints.show),M.TurnStartBtnStateEnum.SUBSCRIBE===this.mode.getTurnBtnType()&&this.reportDataPoint(y.LuckyTurnTablePoints.subscribeSelectedShow)},e.prototype.initListener=function(){l.EventManager.instance.on(f.DataEvent.LoginSuccess,this,this.onLoginSuccess),l.EventManager.instance.on(f.DataEvent.LoadVideoFailed,this,this.noAdShowShare),this.view.m_Window.m_btnClose.onClick(this.onClickClose,this),this.view.m_Window.m_btnRate.onClick(this.onClickRateRule,this),this.view.m_Window.m_ruleComp.m_btnClose.onClick(this.onClickCloseRuleComp,this),this.view.m_Window.m_ruleComp.m_btnBgBlack.onClick(this.onClickCloseRuleComp,this),this.view.m_Window.m_btnCoolDown.onClick(this.onClickCoolDown,this),this.view.m_Window.m_btnRunStart.onClick(this.onClickRunStart,this),this.view.m_Window.m_btnMulChoose.onClick(this.updateUI,this)},e.prototype.initData=function(){this.view.m_Window.m_btnMulChoose.selected=!0,this.view.m_Window.m_ruleComp.node.zIndex=1,P=!1,b=0},e.prototype.initUI=function(){v.UtilCC.instantiatePrefab(E.DataSpineAniPath.ANI_LUCKYTURNTABLE_CHICK,null,this.view.m_Window.m_spineChick.node),this.updateUI()},e.prototype.reportDataPoint=function(t){g.BfasManager.instance.evt(t.eventid,null,!0,t.eventName)},e.prototype.onLoginSuccess=function(){P=!1},e.prototype.noAdShowShare=function(){P=!1,this.view.m_Window.m_btnState.selectedIndex=M.TurnStartBtnStateEnum.SHARE,l.EventManager.instance.emit(f.DataEvent.ToastData,"\u89c2\u770b\u89c6\u9891\u5931\u8d25\uff0c\u8bd5\u8bd5\u5206\u4eab\u9886\u5956\u5427")},e.prototype.onClickClose=function(){this.reportDataPoint(y.LuckyTurnTablePoints.clickClose),t.prototype.onExitClick.call(this)},e.prototype.onClickRateRule=function(){this.reportDataPoint(y.LuckyTurnTablePoints.clickHelp),this.view.m_Window.m_ruleState.selectedIndex=r.SHOW},e.prototype.onClickCloseRuleComp=function(){this.view.m_Window.m_ruleState.selectedIndex=r.HIDE,this.view.m_Window.m_ruleComp.m_list.scrollPane.scrollTop()},e.prototype.onClickCoolDown=function(){l.EventManager.instance.emit(f.DataEvent.ToastData,"\u4eca\u5929\u62bd\u5956\u6b21\u6570\u5df2\u7ecf\u8017\u5c3d\uff0c\u8bf7\u660e\u5929\u518d\u6765")},e.prototype.onClickRunStart=function(){if(!P){P=!0;var t=this.view.m_Window.m_btnState.selectedIndex;M.TurnStartBtnStateEnum.SUBSCRIBE===t?this.doRunTurnWithSubscribe():M.TurnStartBtnStateEnum.FREE===t?this.doRunTurnWithFree():M.TurnStartBtnStateEnum.SHARE===t?this.doRunTurnWithShare():M.TurnStartBtnStateEnum.VIDEO===t&&this.doRunTurnWithVideo()}},e.prototype.updateUI=function(){if(null!==this.view){var t=this.mode.getTurnBtnType();if(this.view.m_Window.m_btnState.selectedIndex=t,M.TurnStartBtnStateEnum.COOL_DOWN===t)return this.dealButtonAnimation(!1),void(this.view.m_Window.m_tableState.selectedIndex=s.ALL);var e=this.view.m_Window.m_btnMulChoose.selected;M.TurnStartBtnStateEnum.SUBSCRIBE===t?this.view.m_Window.m_tableState.selectedIndex=e?s.ALL:s.PART:this.view.m_Window.m_tableState.selectedIndex=s.ALL,this.dealButtonAnimation(!0)}},e.prototype.dealButtonAnimation=function(t){var e=this.view.m_Window.m_btnRunStart.m_spineButton;t?e.visible||(e.visible=!0,v.UtilCC.instantiatePrefab(E.DataSpineAniPath.ANI_LUCKYTURNTABLE_BUTTON,null,e.node)):(e.visible=!1,e.node.removeAllChildren())},e.prototype.doRunTurnWithSubscribe=function(){var t=this;if(this.view.m_Window.m_btnMulChoose.selected)return this.reportDataPoint(y.LuckyTurnTablePoints.subscribeSelectedFreeRun),void I.UIHelp.instance.reqWeChatSubscribe(function(e){e?t.reqFirstAward(c.SELECTED,function(){e||(P=!1)}):P=!1},M.SubscribeTempIDTurnTable);this.reportDataPoint(y.LuckyTurnTablePoints.subscribeUnselectedFreeRun),this.doRunTurnWithFree()},e.prototype.doRunTurnWithFree=function(){this.reqFirstAward(c.UNSELECTED,function(t){t||(P=!1)})},e.prototype.doRunTurnWithShare=function(){var t=this;this.reportDataPoint(y.LuckyTurnTablePoints.shareClickRun),_.DataBfConfig.isWebPlatform()&&(P=!1),C.ShareManager.instance.share(C.ShareType.luckTurnTableShare,null,function(e,n){var o="boolean"==typeof n?C.ShareCheckTypeEnum.CHECK_BY_LOAD_IMG:C.ShareCheckTypeEnum.CHECK_BY_TIME,a=n?C.ShareLoadImgTypeEnum.SUCCESSED:C.ShareLoadImgTypeEnum.FAILED;t.reqAfterAward(o,e,a,function(e){e?t.reportDataPoint(y.LuckyTurnTablePoints.shareClickRunSuccess):P=!1})})},e.prototype.doRunTurnWithVideo=function(){var t=this;this.reportDataPoint(y.LuckyTurnTablePoints.videoClickRun),p.VideoAdManager.instance.showVideoAd(function(){},function(e){e?t.reqAfterAward(C.ShareCheckTypeEnum.CHECK_BY_VIDEO,null,null,function(e){e?t.reportDataPoint(y.LuckyTurnTablePoints.videoRunSuccess):P=!1}):P=!1},{customizeScene:m.CustomizeSceneEnum.WATCH_VIDEO})},e.prototype.reqFirstAward=function(t,e){var n=this;this.mode.reqFirstAward(t,function(t){t?n.startRun():e&&e(!1)})},e.prototype.reqAfterAward=function(t,e,n,o){var a=this;this.mode.reqAfterAward(t,e,n,function(t){t&&a.startRun(),o&&o(t)})},e.prototype.startRun=function(){this.dealButtonAnimation(!1),this._tLightSeq=[],this._nLightIndex=0,this._nAwardIndex=this.mode.arrowid,this._awardsArray=[],this.mode.turnAward&&this._awardsArray.push(this.mode.turnAward);for(var t=b;t<8;t++)this._tLightSeq.push(t);for(t=0;t<8;t++)this._tLightSeq.push(t);for(t=0;t<this._nAwardIndex;t++)this._tLightSeq.push(t);this.nextLight()},e.prototype.nextLight=function(){var t=this,e=this._tLightSeq.length;if(this._nLightIndex>=e)this.endLight();else{for(var n=Math.floor((this._nLightIndex+1)/e*100+.5),o=null,a=null,i=0;i<A.length;i++){var r=A[i];if(!(n>r.per)){a=r;break}o=r}var s={per:n,speed:(a.speed-o.speed)*n/100+o.speed,fade:(a.fade-o.fade)*n/100+o.fade},c=s.fade,l=45/s.speed;this.showLight(this._tLightSeq[this._nLightIndex],c),this._nLightIndex=this._nLightIndex+1;var u=cc.rotateBy(l,45);this.view.m_Window.m_arraw.node.runAction(cc.sequence(u,cc.callFunc(function(){t.nextLight()})))}},e.prototype.endLight=function(){b=this._nAwardIndex,this.showLight(this._nAwardIndex),this.showCelebrate()},e.prototype.showLight=function(t,e){var n=t+1,o=this.view.m_Window["m_light"+n];o.visible=!0,o.node.opacity=255,e&&o.node.runAction(cc.fadeOut(e))},e.prototype.showCelebrate=function(){for(var t=0;t<8;t++){var e=[],n=Math.min((this._nAwardIndex-t)%8,(t-this._nAwardIndex)%8);t===this._nAwardIndex?(e.push(.2),e.push(.08),e.push(.08),e.push(.08),e.push(.08)):4===n?(e.push(0),e.push(.06)):3===n?(e.push(.06),e.push(.1)):2===n?(e.push(.12),e.push(.1)):1===n&&(e.push(.18),e.push(.1)),this.showLightSeq(e,t)}},e.prototype.showLightSeq=function(t,e){if(0!==t.length){for(var n=e+1,o=this.view.m_Window["m_light"+n],a=[],i=0;i<t.length;i++)if(1==(i+1)%2){var r=cc.delayTime(t[i]);a.push(r);var s=cc.callFunc(function(){o.visible=!0,o.node.opacity=255});a.push(s)}else{var c=cc.fadeOut(t[i]);a.push(c)}a.push(cc.delayTime(.3)),a.push(cc.callFunc(this.showAward.bind(this))),o.node.runAction(cc.sequence(a));var l=this.view.m_Window.m_spineWin;l.visible=!0,v.UtilCC.instantiatePrefab(E.DataSpineAniPath.ANI_LUCKYTURNTABLE_WIN,function(t){t.getComponent(sp.Skeleton).setCompleteListener(function(t){"zhongjiang"===(t.animation?t.animation.name:"")&&(l.visible=!1,l.node.removeAllChildren())})},l.node)}},e.prototype.showAward=function(){var t=this;P=!1,0!==this._awardsArray.length?u.UIManager.instance.open(h.AwardUI,this.updateUI.bind(this)).then(function(e){e.init(t._awardsArray)}):this.updateUI()},i([jsClass],e)}(d.FadeUI);n.LuckyTurnTableUI=U,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/UI/FadeUI":"FadeUI","../Activity/Advertise/VideoAdManager":"VideoAdManager","../Award/AwardUI":"AwardUI","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataSpineAni":"DataSpineAni","../Base/Module/BehaviorBranch/LogicBehaviorBranch":"LogicBehaviorBranch","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Share/ShareManager":"ShareManager","../Base/Utils/UtilCC":"UtilCC","../Base/View/UIHelp":"UIHelp","./LuckyTurnTableModel":"LuckyTurnTableModel"}],MailModel:[function(t,e,n){"use strict";cc._RF.push(e,"b5608DPFIBLlqakFJHmcfHV","MailModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.MailModel=void 0;var r=t("../../Framework/Manager/EventManager"),s=t("../../Framework/Model/BaseModel"),c=t("../../Framework/Root/ModelRoot"),l=t("../Base/Data/DataEvent"),u=t("../Base/Module/Platform/PlatformManager"),d=t("../UserInfo/UserInfoModel"),p=t("./MailProxy"),h=t("./MailUI"),_=t("../Base/Utils/UtilTime"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lastID=0,e._mails=[],e}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return c.ModelRoot.instance.get(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mails",{get:function(){return this._mails},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numID",{get:function(){return d.UserInfoModel.instance.userInfo.numID},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){r.EventManager.instance.on(l.DataEvent.EnterHallSuccess,this,this.onEnterHall)},e.prototype.onEnterHall=function(){u.PlatformManager.instance.isSkyWingPlatForm()||(this._mails=[],this.pullMail())},e.prototype.pullMail=function(t){var e=this;p.MailProxy.instance.reqPullMails(this.numID,this._lastID).then(function(n){if(n){for(var o=0;o<n.length;o++)e._mails.push(n[o]);e.updateMails(),t&&t(e._mails),console.log("\u62c9\u53d6\u90ae\u4ef6\u6210\u529f",e._mails)}else console.error("\u62c9\u53d6\u90ae\u4ef6\u5931\u8d25"),e.updateMails(),t&&t(e._mails)},function(n){console.error("\u62c9\u53d6\u90ae\u4ef6\u5931\u8d25",n),e.updateMails(),t&&t(e._mails)})},e.prototype.updateMails=function(){for(var t=[],e={},n=!1,o=this._mails.length-1;o>=0;o--){var a=this._mails[o];if(!e[a.id]&&(e[a.id]=!0,a.id>this._lastID&&(this._lastID=a.id),t.push(a),h.MailStatusEnum.UNREAD===a.status&&(n=!0),t.length>=20))break}this._mails=t,this._mails.sort(function(t,e){return _.UtilTime.dateStringToTimestamp(t.post_time)-_.UtilTime.dateStringToTimestamp(e.post_time)}),r.EventManager.instance.emit(l.DataEvent.HallMailRedStatus,n)},e.prototype.inboxRead=function(t,e){var n=this;p.MailProxy.instance.reqInboxRead(this.numID,t).then(function(){for(var o=0;o<n._mails.length;o++)if(n._mails[o].id===t){n._mails[o].status=1;break}n.updateMails(),e&&e()}).catch(function(t){console.error("\u90ae\u4ef6\u5df2\u8bfb\u5931\u8d25",t)})},e.prototype.inboxDelete=function(t,e){var n=this;p.MailProxy.instance.reqInboxDelete(this.numID,t).then(function(){for(var o=0;o<n._mails.length;o++)if(n._mails[o].id===t){n._mails.splice(o,1);break}n.updateMails(),e&&e()}).catch(function(t){var e="\u5220\u9664\u90ae\u4ef6\u5931\u8d25";t&&t.message&&(e=t.message),r.EventManager.instance.emit(l.DataEvent.ToastData,e)})},e.prototype.getAward=function(t,e){var n=this;p.MailProxy.instance.reqSingleAward(this.numID,t).then(function(){for(var o=0;o<n._mails.length;o++)if(n._mails[o].id===t){n._mails[o].award_status=1;break}n.updateMails(),e&&e()}).catch(function(t){var e="\u9886\u53d6\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5";t&&t.message&&(e=t.message),r.EventManager.instance.emit(l.DataEvent.ToastData,e)})},n=i([jsClass],e)}(s.BaseModel);n.MailModel=f,cc.systemEvent.once("GameRoot.inited",function(){c.ModelRoot.instance.add(f)}),cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/Model/BaseModel":"BaseModel","../../Framework/Root/ModelRoot":"ModelRoot","../Base/Data/DataEvent":"DataEvent","../Base/Module/Platform/PlatformManager":"PlatformManager","../Base/Utils/UtilTime":"UtilTime","../UserInfo/UserInfoModel":"UserInfoModel","./MailProxy":"MailProxy","./MailUI":"MailUI"}],MailProxy:[function(t,e,n){"use strict";cc._RF.push(e,"d97b5s1MUxIIqHDxH7OUHzj","MailProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function r(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.MailProxy=void 0;var c=t("../../Framework/Proxy/BaseProxy"),l=t("../../Framework/Root/ProxyRoot"),u=t("../Base/Data/DataBfConfig"),d=t("../Base/Module/ApiHub/LogicApiHub"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SERVER="mail",e.METHOD_POST="post",e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return l.ProxyRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.reqPullMails=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),r(this,void 0,Promise,function(){var o;return s(this,function(a){switch(a.label){case 0:return o={areaid:u.DataBfConfig.areaID,gameid:u.DataBfConfig.gameID,numid:t,channel:n,lastid:e},[4,d.LogicApiHub.apiHubPost(this.SERVER,this.METHOD_POST,"pull",o)];case 1:return[2,a.sent()]}})})},e.prototype.reqSingleAward=function(t,e){return r(this,void 0,Promise,function(){var n;return s(this,function(o){switch(o.label){case 0:return n={areaid:u.DataBfConfig.areaID,gameid:u.DataBfConfig.gameID,id:e,numid:t},[4,d.LogicApiHub.apiHubPost(this.SERVER,this.METHOD_POST,"award/single",n)];case 1:return[2,o.sent()]}})})},e.prototype.reqInboxRead=function(t,e){return r(this,void 0,Promise,function(){var n;return s(this,function(o){switch(o.label){case 0:return n={areaid:u.DataBfConfig.areaID,gameid:u.DataBfConfig.gameID,id:e,numid:t},[4,d.LogicApiHub.apiHubPost(this.SERVER,this.METHOD_POST,"inbox/read",n)];case 1:return[2,o.sent()]}})})},e.prototype.reqInboxDelete=function(t,e){return r(this,void 0,Promise,function(){var n;return s(this,function(o){switch(o.label){case 0:return n={areaid:u.DataBfConfig.areaID,gameid:u.DataBfConfig.gameID,id:e,numid:t},[4,d.LogicApiHub.apiHubPost(this.SERVER,this.METHOD_POST,"inbox/delete",n)];case 1:return[2,o.sent()]}})})},i([jsClass],e)}(c.BaseProxy);n.MailProxy=p,cc.systemEvent.once("GameRoot.inited",function(){l.ProxyRoot.instance.add(p)}),cc._RF.pop()},{"../../Framework/Proxy/BaseProxy":"BaseProxy","../../Framework/Root/ProxyRoot":"ProxyRoot","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Module/ApiHub/LogicApiHub":"LogicApiHub"}],MailUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"82b50B+YXJEGpq2bYOzwIDX","MailUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./MailUI_mailContent"),a=t("./MailUI_MainPanel"),i=t("./MailUI_Window"),r=t("./MailUI_mailItem"),s=t("./MailUI_awardItem"),c=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default)},t}();n.default=c,cc._RF.pop()},{"./MailUI_MainPanel":"MailUI_MainPanel","./MailUI_Window":"MailUI_Window","./MailUI_awardItem":"MailUI_awardItem","./MailUI_mailContent":"MailUI_mailContent","./MailUI_mailItem":"MailUI_mailItem"}],MailUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"a82b6oi27lE35avVZCJBTGf","MailUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MailUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://yvf4oybly3mk0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MailUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"439336cQVNFOZkNU7GnqgbK","MailUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MailUI","Window")},e.prototype.onConstruct=function(){this.m_cState=this.getControllerAt(0),this.m_cAward=this.getControllerAt(1),this.m_btnClose=this.getChildAt(2),this.m_maiContent=this.getChildAt(5),this.m_mailTitle=this.getChildAt(6),this.m_mailDate=this.getChildAt(8),this.m_gContent=this.getChildAt(9),this.m_gEmpty=this.getChildAt(12),this.m_listMail=this.getChildAt(13),this.m_txtHintToApp=this.getChildAt(15),this.m_listAward=this.getChildAt(16),this.m_gAward=this.getChildAt(17),this.m_btnDelete=this.getChildAt(18),this.m_btnGet=this.getChildAt(19)},e.URL="ui://yvf4oybly3mk1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MailUI_awardItem:[function(t,e,n){"use strict";cc._RF.push(e,"4c07c/bCdVEQIcznWc7WfJr","MailUI_awardItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MailUI","awardItem")},e.prototype.onConstruct=function(){this.m_cColor=this.getControllerAt(0),this.m_cHasprop=this.getControllerAt(1),this.m_awardBg=this.getChildAt(1),this.m_icon=this.getChildAt(2),this.m_title=this.getChildAt(3)},e.URL="ui://yvf4oybly3mkd",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MailUI_mailContent:[function(t,e,n){"use strict";cc._RF.push(e,"2be54TmfpZAEKV9ftLjqC36","MailUI_mailContent");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MailUI","mailContent")},e.prototype.onConstruct=function(){this.m_content=this.getChildAt(0)},e.URL="ui://yvf4oybltj5xe",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MailUI_mailItem:[function(t,e,n){"use strict";cc._RF.push(e,"af3b1BCqC1Eg60PArO6GeO0","MailUI_mailItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MailUI","mailItem")},e.prototype.onConstruct=function(){this.m_cType=this.getControllerAt(0),this.m_cOpen=this.getControllerAt(1),this.m_cAward=this.getControllerAt(2),this.m_txtTitle=this.getChildAt(2),this.m_txtTime=this.getChildAt(3)},e.URL="ui://yvf4oybly3mk8",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MailUI:[function(t,e,n){"use strict";cc._RF.push(e,"dd095lEsupAg7AYwSq2FGUQ","MailUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.MailUI=n.MailStatusEnum=void 0;var r,s,c,l,u,d=t("../../Framework/Manager/CoroutineManager"),p=t("../../Framework/Manager/EventManager"),h=t("../../Framework/Manager/UIManager"),_=t("../../Framework/UI/FadeUI"),f=t("../Award/AwardUI"),m=t("../Base/Data/DataEvent"),g=t("../Base/Data/DataProps"),y=t("../Base/Data/DataRes"),I=t("../Base/Utils/UtilString"),C=t("../Base/Utils/UtilTime"),M=t("../Base/View/UIHelp"),v=t("../UserInfo/UserInfoModel"),E=t("./MailModel");(function(t){t[t.UNREAD=0]="UNREAD",t[t.READ=1]="READ"})(r=n.MailStatusEnum||(n.MailStatusEnum={})),function(t){t[t.UNGET=0]="UNGET",t[t.GET=1]="GET"}(s||(s={})),function(t){t[t.SELECT=0]="SELECT",t[t.UNSELECT=1]="UNSELECT"}(c||(c={})),function(t){t[t.NONE=0]="NONE",t[t.HAVEMAILS=1]="HAVEMAILS",t[t.NOMAIL=2]="NOMAIL"}(l||(l={})),function(t){t[t.NOAWARDS=0]="NOAWARDS",t[t.UNGET=1]="UNGET",t[t.GET=2]="GET"}(u||(u={}));var A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._selectMailIndex=0,e._tempAwardList=[],e._isH5PropAward=!0,e}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.updateMail(!0)},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),this.view.m_Window.m_listMail.on(fgui.Event.CLICK_ITEM,this.onItemClick,this),this.view.m_Window.m_btnDelete.onClick(this.onClickBtnDelete,this),this.view.m_Window.m_btnGet.onClick(this.onClickBtnGet,this)},e.prototype.updateMail=function(t){var e=this;t?E.MailModel.instance.pullMail(function(t){e.init(t)}):this.init(E.MailModel.instance.mails)},e.prototype.init=function(t){var e=this;t.length>0?d.CoroutineManager.instance.once(.15,function(){e.view.m_Window.m_cState.selectedIndex=l.HAVEMAILS,e.showMailList(t),t.length<=e._selectMailIndex&&(e._selectMailIndex=t.length-1),e.selectMail(e._selectMailIndex)}):this.view.m_Window.m_cState.selectedIndex=l.NOMAIL},e.prototype.showMailList=function(t){var e=this,n=this.view.m_Window.m_listMail,o=t.length;n.itemRenderer=function(n,a){var i=t[o-1-n];if(i){if(a.m_cOpen.selectedIndex=r.UNREAD===i.status?r.UNREAD:r.READ,r.UNREAD===i.status)a.m_cAward.selectedIndex=s.GET;else{var l=s.UNGET===i.award_status?s.UNGET:s.GET;a.m_cAward.selectedIndex=i.award_value?l:s.GET}a.m_cType.selectedIndex=n===e._selectMailIndex?c.SELECT:c.UNSELECT,a.m_txtTitle.text=I.UtilString.shortString(i.title,10),a.m_txtTime.text=i.post_time,a.data={index:n,mail:i}}},n.setVirtual(),n.numItems=o,n.refreshVirtualList()},e.prototype.onItemClick=function(t){this.selectMail(t.data.index)},e.prototype.onClickBtnDelete=function(){u.UNGET===this.view.m_Window.m_cAward.selectedIndex&&p.EventManager.instance.emit(m.DataEvent.ToastData,"\u90ae\u4ef6\u5df2\u8fc7\u671f\u54e6"),this.deleteMail()},e.prototype.onClickBtnGet=function(){this.getAward()},e.prototype.showMail=function(t){var e=this,n=this.view.m_Window;n.m_mailTitle.text=t.title,n.m_maiContent.m_content.text="       "+t.content;var o=C.UtilTime.dateStringToTimestamp(t.expire_time)-Date.now(),a=o>0?t.expire_time:"\u5df2\u5230\u671f";if(n.m_mailDate.text="\u90ae\u4ef6\u6709\u6548\u671f\uff1a"+a,t.award_value){t.award_status?n.m_cAward.selectedIndex=u.GET:n.m_cAward.selectedIndex=u.UNGET;var i=this.parseMailAwardData(t.award_value),r=n.m_listAward,c=i.length;r.itemRenderer=function(t,o){var a=i[t];a&&(e._isH5PropAward?(o.m_cHasprop.selectedIndex=0,o.m_icon.url=M.UIHelp.getPropIcon(a.awardType,a.resName),o.m_title.text="x"+a.count,u.GET===n.m_cAward.selectedIndex?o.m_cColor.selectedIndex=s.GET:o.m_cColor.selectedIndex=s.UNGET):o.m_cHasprop.selectedIndex=1)},r.setVirtual(),r.numItems=c,r.refreshVirtualList(),this.view.m_Window.m_txtHintToApp.visible=!1,this.view.m_Window.m_btnGet.grayed=!1,this.view.m_Window.m_btnGet.touchable=!0,this._isH5PropAward||this.view.m_Window.m_cAward.selectedIndex===u.UNGET&&(this.view.m_Window.m_txtHintToApp.visible=!0,this.view.m_Window.m_btnGet.grayed=!0,this.view.m_Window.m_btnGet.touchable=!1),o>0&&u.UNGET===n.m_cAward.selectedIndex?this._tempAwardList=i:(this._tempAwardList=[],n.m_cAward.selectedIndex=u.GET)}else n.m_cAward.selectedIndex=u.NOAWARDS,this._tempAwardList=[]},e.prototype.parseMailAwardData=function(t){this._isH5PropAward=!0;var e=JSON.parse(t),n=[];if(e.yb&&n.push({awardType:g.PropTypeEnum.DIAMOND,count:e.yb,resName:y.Res.DIAMOND}),e.sr&&n.push({awardType:g.PropTypeEnum.GOLD,count:e.sr,resName:y.Res.GOLD}),e.prop)for(var o in e.prop){var a=e.prop[o],i=g.DataProps.instance.getPropType(+o);if(i){var r=g.DataProps.instance.getPropRes(+o),s=g.DataProps.instance.getPropConfigByID(+o);n.push({awardType:i,count:a,resName:r,awardDesc:s.awardDesc})}else n.push({awardType:g.PropTypeEnum.GOLD,count:1,resName:y.Res.GOLD,awardDesc:""}),this._isH5PropAward=!1}return n},e.prototype.selectMail=function(t){this._selectMailIndex=t;for(var e,n=this.view.m_Window.m_listMail,o=n._children.length,a=0;a<o;a++){var i=n.getChildAt(a);if(!i)break;if(i.data.index===t){e=i,i.m_cType.selectedIndex=c.SELECT;var l=e.data.mail,u=l.award_status===s.UNGET?s.UNGET:s.GET;i.m_cAward.selectedIndex=l.award_value?u:s.GET}else i.m_cType.selectedIndex=c.UNSELECT}if(e){var d=e.data.mail;r.UNREAD===e.m_cOpen.selectedIndex&&E.MailModel.instance.inboxRead(d.id,function(){e.m_cOpen.selectedIndex=r.READ}),this.showMail(d)}},e.prototype.deleteMail=function(){var t=this,e=this.getSelectItem();if(e){var n=e.data.mail;E.MailModel.instance.inboxDelete(n.id,function(){t.view.m_Window.m_listMail.scrollToView(0),t._selectMailIndex=0,t.updateMail()})}else p.EventManager.instance.emit(m.DataEvent.ToastData,"\u5220\u9664\u5931\u8d25")},e.prototype.getAward=function(){var t=this,e=this.getSelectItem();if(e){var n=e.data.mail;E.MailModel.instance.getAward(n.id,function(){e.m_cAward.selectedIndex=s.GET;var n=t._tempAwardList;h.UIManager.instance.open(f.AwardUI).then(function(t){t.init(n),n.forEach(function(t){if(g.PropTypeEnum.GOLD===t.awardType){var e;e=Long.isLong(v.UserInfoModel.instance.userInfo.gold)?Long.fromNumber(t.count).add(v.UserInfoModel.instance.userInfo.gold):t.count+v.UserInfoModel.instance.userInfo.gold,v.UserInfoModel.instance.setUserInfo({gold:e})}else if(g.PropTypeEnum.DIAMOND===t.awardType){var n=v.UserInfoModel.instance.userInfo.diamond+t.count;v.UserInfoModel.instance.setUserInfo({diamond:n})}else v.UserInfoModel.instance.addProp(t.awardType,t.count)})}),t.selectMail(t._selectMailIndex)})}else p.EventManager.instance.emit(m.DataEvent.ToastData,"\u9886\u53d6\u5931\u8d25")},e.prototype.getSelectItem=function(){for(var t=this._selectMailIndex,e=this.view.m_Window.m_listMail,n=e._children.length,o=0;o<n;o++){var a=e.getChildAt(o);if(!a)break;if(a.data.index===t)return a}},i([jsClass],e)}(_.FadeUI);n.MailUI=A,cc._RF.pop()},{"../../Framework/Manager/CoroutineManager":"CoroutineManager","../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/UI/FadeUI":"FadeUI","../Award/AwardUI":"AwardUI","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataProps":"DataProps","../Base/Data/DataRes":"DataRes","../Base/Utils/UtilString":"UtilString","../Base/Utils/UtilTime":"UtilTime","../Base/View/UIHelp":"UIHelp","../UserInfo/UserInfoModel":"UserInfoModel","./MailModel":"MailModel"}],Main:[function(t,e,n){"use strict";cc._RF.push(e,"bdbc5Yxea5Cx5Xa6WkAnRPd","Main");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.Main=void 0;var r=t("./Framework/Root/GameRoot"),s=t("./Framework/Manager/UIManager"),c=t("./Framework/Manager/CoroutineManager"),l=t("./Core/Login/LoginUI"),u=t("./Core/Base/View/UIHelp"),d=t("./Core/Base/Module/Platform/PlatformManager"),p=t("./Core/Base/Data/DataEvent"),h=t("./Framework/Manager/EventManager"),_=t("./Core/Base/Data/DataSound"),f=t("./Framework/Manager/AudioManager"),m=t("./Core/Base/Module/BfAnalytics/BfasManager"),g=t("./Core/Base/Module/BfAnalytics/DataPointID"),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mainBgSpr=null,e}return a(e,t),e.prototype.onLoad=function(){var t=this;cc.game.addPersistRootNode(this.node);var e=new cc.Node;e.addComponent(r.GameRoot),cc.systemEvent.emit("GameRoot.inited"),e.setParent(this.node),cc.systemEvent.emit("GameRoot.loaded"),m.BfasManager.instance.updateLaunchTimestamp(),m.BfasManager.instance.evtUserLinkPoint(g.UserConvertLinkPointID.LOADING_START.eventid,g.UserConvertLinkPointID.LOADING_START.eventName),s.UIManager.instance.gotoScene(l.LoginUI).catch(function(e){m.BfasManager.instance.evtUserLinkPoint(g.UserConvertLinkPointID.LOADING_FAILE.eventid,g.UserConvertLinkPointID.LOADING_FAILE.eventName,!1,"LoginUI\u52a0\u8f7d\u7b2c\u4e00\u6b21\u5931\u8d25");var n=e+"";if(-1!==n.indexOf("no such file or directory"))return d.PlatformManager.instance.platform.clearCache(),void s.UIManager.instance.gotoScene(l.LoginUI).catch(function(){t.showFixDialog()});-1!==n.indexOf("timeout")||-1!==n.indexOf("\u8d85\u65f6")?c.CoroutineManager.instance.once(.5,function(){s.UIManager.instance.gotoScene(l.LoginUI).catch(function(){t.showFixDialog()})}):t.showFixDialog()}),this.initListener()},e.prototype.initListener=function(){h.EventManager.instance.on(p.DataEvent.EnterHallSuccess,this,this.removeMainBg),h.EventManager.instance.on(p.DataEvent.HallPlayMusic,this,this.playHallMusic)},e.prototype.removeMainBg=function(){this.mainBgSpr&&(this.mainBgSpr.node.removeFromParent(!0),cc.assetManager.releaseAsset(this.mainBgSpr.spriteFrame))},e.prototype.playHallMusic=function(){f.AudioManager.instance.playMusic(_.DataSound.getLobbyBgm())},e.prototype.showFixDialog=function(){console.error("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5~"),u.UIHelp.instance.showDialog("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",function(){d.PlatformManager.instance.platform.fix(!0)})},i([cc._decorator.property({type:cc.Sprite})],e.prototype,"mainBgSpr",void 0),i([cc._decorator.ccclass],e)}(cc.Component);n.Main=y,cc._RF.pop()},{"./Core/Base/Data/DataEvent":"DataEvent","./Core/Base/Data/DataSound":"DataSound","./Core/Base/Module/BfAnalytics/BfasManager":"BfasManager","./Core/Base/Module/BfAnalytics/DataPointID":"DataPointID","./Core/Base/Module/Platform/PlatformManager":"PlatformManager","./Core/Base/View/UIHelp":"UIHelp","./Core/Login/LoginUI":"LoginUI","./Framework/Manager/AudioManager":"AudioManager","./Framework/Manager/CoroutineManager":"CoroutineManager","./Framework/Manager/EventManager":"EventManager","./Framework/Manager/UIManager":"UIManager","./Framework/Root/GameRoot":"GameRoot"}],ManagerOutModel:[function(t,e,n){"use strict";cc._RF.push(e,"bc4581PfVpMta/De7nM/kZN","ManagerOutModel");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ManagerOutModel=n.DirectionEnum=void 0;var a,i=t("./GameCardUIData"),r=t("./GameCardUILeftOutModel"),s=t("./GameCardUIRightOutModel"),c=t("./GameCardUISelfOutModel"),l=t("./GameCardUITopOutModel");(function(t){t[t.LEFT=0]="LEFT",t[t.SELF=1]="SELF",t[t.RIGHT=2]="RIGHT",t[t.TOP=3]="TOP"})(a=n.DirectionEnum||(n.DirectionEnum={}));var u=function(){function t(){this.outModelObjArr=[]}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return null===this._managerOutModel&&(this._managerOutModel=new e,this._managerOutModel.init()),this._managerOutModel},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.outModelObjArr[a.LEFT]=r.GameCardUILeftOutModel.instance,this.outModelObjArr[a.SELF]=c.GameCardUISelfOutModel.instance,this.outModelObjArr[a.RIGHT]=s.GameCardUIRightOutModel.instance,this.outModelObjArr[a.TOP]=l.GameCardUITopOutModel.instance},t.prototype.initOutUIModelObj=function(t){this.outModelObjArr[a.LEFT].init(t.m_outCards_Left),this.outModelObjArr[a.SELF].init(t.m_outCards_Self),this.outModelObjArr[a.RIGHT].init(t.m_outCards_Right),this.outModelObjArr[a.TOP].init(t.m_outCards_Top)},t.prototype.updateOutCardsUI=function(t){this.outModelObjArr[t.seat].updateOutCardsUI(t)},t.prototype.getPlayPutCardActionNeedDt=function(){return i.GameCardUIData.getPutCardActionNeedDt()},t.prototype.getPlayCardsAnimationPosAndParent=function(t,e){return this.outModelObjArr[t].getPlayCardsAnimationPosAndParent(e)},t.prototype.onDestroy=function(){this.outModelObjArr[a.LEFT].onDestroy(),this.outModelObjArr[a.SELF].onDestroy(),this.outModelObjArr[a.RIGHT].onDestroy(),this.outModelObjArr[a.TOP].onDestroy()},t._managerOutModel=null,e=o([jsClass],t)}();n.ManagerOutModel=u,cc._RF.pop()},{"./GameCardUIData":"GameCardUIData","./GameCardUILeftOutModel":"GameCardUILeftOutModel","./GameCardUIRightOutModel":"GameCardUIRightOutModel","./GameCardUISelfOutModel":"GameCardUISelfOutModel","./GameCardUITopOutModel":"GameCardUITopOutModel"}],ManagerRoot:[function(t,e,n){"use strict";cc._RF.push(e,"63500lLQohAfKyRcq+i4jbY","ManagerRoot");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ManagerRoot=void 0;var r=t("./BaseRoot"),s=t("./GameRoot"),c=t("../Manager/CoroutineManager"),l=t("../Manager/EventManager"),u=t("../Manager/UIManager"),d=t("../Manager/AudioManager"),p=t("../Manager/SubpackagesManager"),h=t("../Manager/ABTestManager"),_=t("../../Core/Base/Module/Platform/PlatformManager"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return s.GameRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.add(c.CoroutineManager),this.add(l.EventManager),this.add(u.UIManager),this.add(d.AudioManager),this.add(p.SubpackagesManager),this.add(h.ABTestManager),this.add(_.PlatformManager)},i([jsClass],e)}(r.Root);n.ManagerRoot=f,cc._RF.pop()},{"../../Core/Base/Module/Platform/PlatformManager":"PlatformManager","../Manager/ABTestManager":"ABTestManager","../Manager/AudioManager":"AudioManager","../Manager/CoroutineManager":"CoroutineManager","../Manager/EventManager":"EventManager","../Manager/SubpackagesManager":"SubpackagesManager","../Manager/UIManager":"UIManager","./BaseRoot":"BaseRoot","./GameRoot":"GameRoot"}],MarqueeUI:[function(t,e,n){"use strict";cc._RF.push(e,"06127QKpa5P850pEqWCVpsM","MarqueeUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.MarqueeUI=n.MarqueeTypeEnum=void 0;var r,s=t("../../../../Framework/UI/BaseUI"),c=t("../../../../Framework/UI/FadeUI"),l=t("../../Data/DataConstant"),u=t("../../Data/DatazOrder");(function(t){t[t.NORMAL=0]="NORMAL",t[t.RIGHTWARD=1]="RIGHTWARD"})(r=n.MarqueeTypeEnum||(n.MarqueeTypeEnum={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._duration=3,e._interval=0,e._nextFunc=null,e._closeFunc=null,e._windows=[],e._compContent=[],e._txtContent=[],e._contents=[],e}return a(e,t),Object.defineProperty(e,"willClearOnDestroy",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"willShowLoading",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return s.UIType.Transparent},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sortingOrder",{get:function(){return u.DataZOrder.MAX},enumerable:!1,configurable:!0}),e.getPkgName=function(){return l.DataConstant.PKG_COMMON},e.getCompName=function(){return cc.js.getClassName(this)+"_MainPanel"},e.uiBind=function(){},Object.defineProperty(e.prototype,"duration",{set:function(t){this._duration=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"interval",{set:function(t){this._interval=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextFunc",{set:function(t){this._nextFunc=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"closeFunc",{set:function(t){this._closeFunc=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._cMarqueeType=this.view.getController("cMarqueeType"),this._windows[r.NORMAL]=this.view.getChild("Window"),this._windows[r.RIGHTWARD]=this.view.getChild("Window1"),this._compContent[r.NORMAL]=this._windows[r.NORMAL].getChild("compContent"),this._compContent[r.RIGHTWARD]=this._windows[r.RIGHTWARD].getChild("compContent"),this._txtContent[r.NORMAL]=this._compContent[r.NORMAL].getChild("title"),this._txtContent[r.RIGHTWARD]=this._compContent[r.RIGHTWARD].getChild("title")},e.prototype.onDestroy=function(){cc.Tween.stopAllByTarget(this._txtContent[this._cMarqueeType.selectedIndex]),this._closeFunc&&this._closeFunc(),t.prototype.onDestroy.call(this)},e.prototype.init=function(t){this._cMarqueeType.selectedIndex=t||r.NORMAL},e.prototype.addContent=function(t){""!=t&&this._contents.push(t),this.showNext()},e.prototype.exit=function(){this.onExitClick()},e.prototype.showNext=function(){var t=this,e=this._contents.shift();if(e){var n=this._compContent[this._cMarqueeType.selectedIndex],o=this._txtContent[this._cMarqueeType.selectedIndex];o.text=e,o.x=n.width,cc.Tween.stopAllByTarget(o),cc.tween(o).to(this._duration,{x:-o.width}).delay(this._interval).call(function(){t._nextFunc?t._nextFunc():t.showNext()}).start()}else this.onExitClick()},i([jsClass],e)}(c.FadeUI);n.MarqueeUI=d,cc._RF.pop()},{"../../../../Framework/UI/BaseUI":"BaseUI","../../../../Framework/UI/FadeUI":"FadeUI","../../Data/DataConstant":"DataConstant","../../Data/DatazOrder":"DatazOrder"}],MatchAwardDetailUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"bb3b1U7deZHM65RKcnxw8Ce","MatchAwardDetailUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./MatchAwardDetailUI_MainPanel"),a=t("./MatchAwardDetailUI_Window"),i=t("./MatchAwardDetailUI_awardItem"),r=t("./MatchAwardDetailUI_awardIcon"),s=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default)},t}();n.default=s,cc._RF.pop()},{"./MatchAwardDetailUI_MainPanel":"MatchAwardDetailUI_MainPanel","./MatchAwardDetailUI_Window":"MatchAwardDetailUI_Window","./MatchAwardDetailUI_awardIcon":"MatchAwardDetailUI_awardIcon","./MatchAwardDetailUI_awardItem":"MatchAwardDetailUI_awardItem"}],MatchAwardDetailUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"8c467bZlrhMKI6IXA6ikkRj","MatchAwardDetailUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchAwardDetailUI","MainPanel")},e.prototype.onConstruct=function(){this.m_bg=this.getChildAt(0),this.m_window=this.getChildAt(1)},e.URL="ui://yz61sv0rn5740",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchAwardDetailUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"fa170HCd3hLVIYZF5X8pqTd","MatchAwardDetailUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchAwardDetailUI","Window")},e.prototype.onConstruct=function(){this.m_bg=this.getChildAt(0),this.m_btnClose=this.getChildAt(1),this.m_listAward=this.getChildAt(2)},e.URL="ui://yz61sv0rn5741",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchAwardDetailUI_awardIcon:[function(t,e,n){"use strict";cc._RF.push(e,"0a879qT8MJOXJe6e5nzgts8","MatchAwardDetailUI_awardIcon");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchAwardDetailUI","awardIcon")},e.prototype.onConstruct=function(){this.m_icon=this.getChildAt(1),this.m_title=this.getChildAt(2)},e.URL="ui://yz61sv0rn5743",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchAwardDetailUI_awardItem:[function(t,e,n){"use strict";cc._RF.push(e,"745d4xNAONNUbCHQx/UDRSm","MatchAwardDetailUI_awardItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchAwardDetailUI","awardItem")},e.prototype.onConstruct=function(){this.m_crank=this.getControllerAt(0),this.m_listAward=this.getChildAt(0),this.m_txtRank=this.getChildAt(2),this.m_imgIcon=this.getChildAt(3)},e.URL="ui://yz61sv0rn5742",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchAwardDetailUI:[function(t,e,n){"use strict";cc._RF.push(e,"518fddqkDVB0pUzxiTzaUVo","MatchAwardDetailUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.MatchAwardDetailUI=void 0;var c=t("../../Framework/UI/FadeUI"),l=t("../Base/Data/DataClubClientConfig"),u=t("../Base/Data/DataProps"),d=t("../Base/View/UIHelp"),p=t("./MatchModel"),h=t("./MatchUtils"),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return p.MatchModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initUI=function(t){var e=this.formatAwards(t),n=this.view.m_window.m_listAward;n.itemRenderer=this.initSubItem.bind(this,e),n.setVirtual(),n.numItems=e.length,n.refreshVirtualList()},e.prototype.initListener=function(){this.view.m_window.m_btnClose.onClick(this.onClickClose,this)},e.prototype.getIconAwards=function(t,e){for(var n=h.MatchUtils.convertMatchAwards(t,e),o=[],a=0;a<n.length;a++){var i={res:n[a].url,desc:n[a].name};o[o.length]=i}return o},e.prototype.formatAwards=function(t){for(var e=[],n=t.award_rule,o=0,a=0;a<3;a++){for(var i=o;i<n.length;i++)if(o=i,a+1<=(h=n[i]).range){var r=[];if(l.DataClubClientConfig.isOpenMatchTempIcon()&&1===h.range&&t.type===p.MatchTypeEnum.FIX_TIME){var s={res:d.UIHelp.getPropIcon(u.PropTypeEnum.SINGLE,u.DataProps.instance.getPropRes("jdk")),desc:"200\u5143\u4eac\u4e1c\u5361x5"};r[0]=s}else r=this.getIconAwards(h,t.type);var c={range:{s:a+1,e:a+1},awards:r};e[e.length]=c;break}if(o>n.length)break}for(i=o;i<n.length;i++){var h=n[i];r=this.getIconAwards(h,t.type),c={range:{s:a+1,e:h.range},awards:r},e[e.length]=c,a=h.range}return e},e.prototype.initSubItem=function(t,e,n){var o,a,i=t[e];if(i){var c=i.awards;i.range.s<=4?n.m_crank.selectedIndex=i.range.s:(n.m_crank.selectedIndex=5,i.range.s==i.range.e?n.m_txtRank.text="\u7b2c"+i.range.s+"\u540d":n.m_txtRank.text="\u7b2c"+i.range.s+"-"+i.range.e+"\u540d");var l=n.m_listAward;l.removeChildren();try{for(var u=r(Object.entries(c)),d=u.next();!d.done;d=u.next()){var p=s(d.value,2),h=(p[0],p[1]),_=l.addItemFromPool();this.initAwardIcon(_,h)}}catch(f){o={error:f}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}}},e.prototype.initAwardIcon=function(t,e){t.m_icon.url=e.res,t.m_title.text=e.desc},e.prototype.onClickClose=function(){t.prototype.onExitClick.call(this)},i([jsClass],e)}(c.FadeUI);n.MatchAwardDetailUI=_,cc._RF.pop()},{"../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataClubClientConfig":"DataClubClientConfig","../Base/Data/DataProps":"DataProps","../Base/View/UIHelp":"UIHelp","./MatchModel":"MatchModel","./MatchUtils":"MatchUtils"}],MatchConstant:[function(t,e,n){"use strict";cc._RF.push(e,"ebb265wqYREGKgLUx2b0JD5","MatchConstant"),Object.defineProperty(n,"__esModule",{value:!0}),n.MatchDataEvent=void 0;var o=function(){function t(){}return t.MatchHideHall="Match.MatchHideHall",t.MatchStarted="Match.Started",t.MatchRoundUpdate="Match.RoundUpdate",t.MatchApplyJoin="Match.ApplyJoin",t.MatchInfoUpdate="Match.InfoUpdate",t.MatchTableUpdate="Match.TableUpdate",t.MatchCheckInFail="Match.MatchCheckInFail",t.MatchTrust="Match.MatchTrust",t.MatchDissmiss="Match.MatchDissmiss",t.MatchGameLeftTime="Match.MatchGameLeftTime",t.MatchExitGame="Match.MatchExitGame",t.SyncMatchCredit="Match.SyncMatchCredit",t.SyncMatchStart="Match.SyncMatchStart",t.MatchKickOut="Match.KickOut",t.SyncMatchProp="Match.SyncMatchProp",t.ExitMatchDetail="Match.ExitMatchDetail",t.SyncSelfRankInfo="Match.SyncSelfRankInfo",t.MatchLoginLocation="Match.MatchLoginLocation",t.MatchStartHint3="Match.MatchStartHint3",t.MatchStartHint5="Match.MatchStartHint5",t.MatchExchangeLog="Match.MatchExchangeLog",t.MatchPlayerInfoUpdate="Match.PlayerInfoUpdate",t.MatchEliminate="Match.Eliminate",t}();n.MatchDataEvent=o,cc._RF.pop()},{}],MatchExchangeTicketUI:[function(t,e,n){"use strict";cc._RF.push(e,"6be18rR3O5GcZi1RixxgDCf","MatchExchangeTicketUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Framework/Manager/UIManager"),s=t("../../Framework/UI/FadeUI"),c=t("../Base/Data/DataSpineAni"),l=t("../Base/Module/BfAnalytics/BfasManager"),u=t("../Base/Module/BfAnalytics/DataPointID"),d=t("../Base/Utils/UtilCC"),p=t("../Base/View/Common/DialogUI"),h=t("../Shop/ShopConfig"),_=t("../Shop/ShopModel"),f=t("../UserInfo/UserInfoModel"),m=t("./MatchShareModel"),g=t("./MatchShareUI/MatchShareUIBinder"),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){g.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.getPkgName=function(){return"MatchShareUI"},e.getCompName=function(){return cc.js.getClassName(this)+"_MainPanel"},Object.defineProperty(e.prototype,"model",{get:function(){return m.MatchShareModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initUI(),this.initListener(),l.BfasManager.instance.sendEvt(u.MatchTicketSharePointID.EXCHANGE_TICKET_SHOW)},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),this.view.m_Window.m_btnExchange.onClick(this.onClickExchange,this)},e.prototype.initUI=function(){this.view.m_Window.m_cMatchType.selectedIndex=0,this.view.m_Window.m_spineNode.node.removeAllChildren(),d.UtilCC.instantiatePrefab(c.DataSpineAniPath.ANI_MATCH_SHARE_TITLE,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"duan",!0)},this.view.m_Window.m_spineNode.node)},e.prototype.onClickExchange=function(){var t=this;l.BfasManager.instance.sendEvt(u.MatchTicketSharePointID.EXCHANGE_TICKET_CLICK),f.UserInfoModel.instance.userInfo.diamond<m.EXCHANGE_GOLDEN_TICKET_COST?r.UIManager.instance.open(p.DialogUI).then(function(t){t.initConfirmCancelClose({content:"\u60a8\u7684\u94bb\u77f3\u4e0d\u8db3\uff0c\u65e0\u6cd5\u5151\u6362\u95e8\u7968\uff0c\u662f\u5426\u524d\u5f80\u5546\u57ce\u8d2d\u4e70\u94bb\u77f3\uff1f"}),t.confirmAction=function(){_.ShopModel.instance.showShopUI(h.ShopPageTypeEnum.DIAMOND)}}):this.model.exchangeGoldenTicket(function(e){e&&t.onExitClick()})},i([jsClass],e)}(s.FadeUI);n.default=y,cc._RF.pop()},{"../../Framework/Manager/UIManager":"UIManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataSpineAni":"DataSpineAni","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Utils/UtilCC":"UtilCC","../Base/View/Common/DialogUI":"DialogUI","../Shop/ShopConfig":"ShopConfig","../Shop/ShopModel":"ShopModel","../UserInfo/UserInfoModel":"UserInfoModel","./MatchShareModel":"MatchShareModel","./MatchShareUI/MatchShareUIBinder":"MatchShareUIBinder"}],MatchGuideUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"889267Z9JdAC4W/27gQAdnt","MatchGuideUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./MatchGuideUI_MainPanel"),a=t("./MatchGuideUI_Window"),i=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default)},t}();n.default=i,cc._RF.pop()},{"./MatchGuideUI_MainPanel":"MatchGuideUI_MainPanel","./MatchGuideUI_Window":"MatchGuideUI_Window"}],MatchGuideUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"9942dDcKHNJfa/zhn8QNfpG","MatchGuideUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchGuideUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://qe070s66oqun0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchGuideUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"7742f3kCENPdaIb3Ce9ABct","MatchGuideUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchGuideUI","Window")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(0),this.m_btnBg=this.getChildAt(1),this.m_btnClose=this.getChildAt(2),this.m_spineBtnNode=this.getChildAt(3),this.m_btnGo=this.getChildAt(4),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://qe070s66oqun1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchGuideUI:[function(t,e,n){"use strict";cc._RF.push(e,"94e1f5hAQFBK4pIPICAiUQ/","MatchGuideUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.MatchGuideUI=void 0;var r=t("../../../Framework/Manager/UIManager"),s=t("../../../Framework/UI/FadeUI"),c=t("../../Game/GuanDan/GameUI"),l=t("../../Game/Common/GameCommonModel"),u=t("../MatchModel"),d=t("../../../Framework/Manager/EventManager"),p=t("../../Game/GuanDan/GameEvent"),h=t("../../Hall/HallUI"),_=t("../../Base/Utils/UtilCC"),f=t("../../Base/Data/DataSpineAni"),m=t("../../Base/Module/BfAnalytics/BfasManager"),g=t("../../Base/Module/BfAnalytics/DataPointID"),y=t("../../Base/View/UIHelp"),I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._popFunc=null,e}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.setPopFunc=function(t){this._popFunc=t},e.prototype.onLoad=function(){this.initUI(),this.initListener(),m.BfasManager.instance.sendEvt(g.MatchGuidePointID.SHOW_GAME)},e.prototype.initUI=function(){this.initAni()},e.prototype.initListener=function(){this.view.m_Window.m_btnBg.onClick(this.onClickGo,this),this.view.m_Window.m_btnClose.onClick(this.onClickClose,this),this.view.m_Window.m_btnGo.onClick(this.onClickGo,this)},e.prototype.initAni=function(){this.view.m_Window.m_spineNode.node.removeAllChildren(),_.UtilCC.instantiatePrefab(f.DataSpineAniPath.ANI_MATCH_GUIDE_BG,function(t){var e=t.getComponent(sp.Skeleton);e.setAnimation(0,"chusheng",!1),e.setCompleteListener(function(){e.setAnimation(0,"loop",!0)})},this.view.m_Window.m_spineNode.node),this.view.m_Window.m_spineBtnNode.node.removeAllChildren(),_.UtilCC.instantiatePrefab(f.DataSpineAniPath.ANI_MATCH_GUIDE_BTN,function(t){var e=t.getComponent(sp.Skeleton);e.setAnimation(0,"chusheng",!1),e.setCompleteListener(function(){e.setAnimation(0,"loop",!0)})},this.view.m_Window.m_spineBtnNode.node)},e.prototype.onClickClose=function(){this.onExitClick(),this._popFunc&&this._popFunc()},e.prototype.onClickGo=function(){if(m.BfasManager.instance.sendEvt(g.MatchGuidePointID.CLICK_GAME),this.onExitClick(),r.UIManager.instance.isExist(c.GameUI)){if(l.GameCommonModel.instance.isMatchRoomModel())return;if(u.MatchModel.instance.getMatchLocationAppID()>0)return void y.UIHelp.instance.showDialog("\u60a8\u8fd8\u6709\u6bd4\u8d5b\u672a\u7ed3\u675f\uff0c\u8bf7\u5148\u8fd4\u56de\u5b8c\u6210\u5bf9\u5c40~",function(){var t=u.MatchModel.instance.getMatchLocation();u.MatchModel.instance.relinkMatch(t.appid,t.matchid,t.matchsubid)});l.GameCommonModel.instance.reqLeaveGame(function(){d.EventManager.instance.emit(p.GameEvent.BACKTOLOBBY,h.HallUITab.MATCH_HALL,function(){},{scene:u.EnterMatchSceneEnum.GUIDE})})}else u.MatchModel.instance.openMatchUI({scene:u.EnterMatchSceneEnum.GUIDE})},i([jsClass],e)}(s.FadeUI);n.MatchGuideUI=I,cc._RF.pop()},{"../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/UI/FadeUI":"FadeUI","../../Base/Data/DataSpineAni":"DataSpineAni","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../Base/Utils/UtilCC":"UtilCC","../../Base/View/UIHelp":"UIHelp","../../Game/Common/GameCommonModel":"GameCommonModel","../../Game/GuanDan/GameEvent":"GameEvent","../../Game/GuanDan/GameUI":"GameUI","../../Hall/HallUI":"HallUI","../MatchModel":"MatchModel"}],MatchHintUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"031abJnb8tPiYY0BNFhkzEp","MatchHintUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./MatchHintUI_TimeMatchTopHint_Window"),a=t("./MatchHintUI_TimeMatchTopHint_MainPanel"),i=t("./MatchHintUI_TopHintUI_MainPanel"),r=t("./MatchHintUI_TopHintUI_Window"),s=t("./MatchHintUI_CountDownUI_MainPanel"),c=t("./MatchHintUI_CountDownUI_Window"),l=t("./MatchHintUI_LongCountDownUI_MainPanel"),u=t("./MatchHintUI_LongCountDownUI_Window"),d=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default),fgui.UIObjectFactory.setExtension(l.default.URL,l.default),fgui.UIObjectFactory.setExtension(u.default.URL,u.default)},t}();n.default=d,cc._RF.pop()},{"./MatchHintUI_CountDownUI_MainPanel":"MatchHintUI_CountDownUI_MainPanel","./MatchHintUI_CountDownUI_Window":"MatchHintUI_CountDownUI_Window","./MatchHintUI_LongCountDownUI_MainPanel":"MatchHintUI_LongCountDownUI_MainPanel","./MatchHintUI_LongCountDownUI_Window":"MatchHintUI_LongCountDownUI_Window","./MatchHintUI_TimeMatchTopHint_MainPanel":"MatchHintUI_TimeMatchTopHint_MainPanel","./MatchHintUI_TimeMatchTopHint_Window":"MatchHintUI_TimeMatchTopHint_Window","./MatchHintUI_TopHintUI_MainPanel":"MatchHintUI_TopHintUI_MainPanel","./MatchHintUI_TopHintUI_Window":"MatchHintUI_TopHintUI_Window"}],MatchHintUI_CountDownUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"041777BIDFPBJhtF8mve9oR","MatchHintUI_CountDownUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchHintUI","CountDownUI_MainPanel")},e.prototype.onConstruct=function(){this.m_c_colliderOpacity=this.getControllerAt(0),this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://fzdejwprrbyz6",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchHintUI_CountDownUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"45d21CuFL9NPZcb0vsKCM7z","MatchHintUI_CountDownUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchHintUI","CountDownUI_Window")},e.prototype.onConstruct=function(){this.m_BtnClose=this.getChildAt(1),this.m_BtnCancel=this.getChildAt(2),this.m_BtnConfirm=this.getChildAt(3),this.m_text=this.getChildAt(4),this.m_txtNum=this.getChildAt(8)},e.URL="ui://fzdejwprrbyz7",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],MatchHintUI_LongCountDownUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"132986OwolFTo/PrC+gfuMf","MatchHintUI_LongCountDownUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchHintUI","LongCountDownUI_MainPanel")},e.prototype.onConstruct=function(){this.m_c_colliderOpacity=this.getControllerAt(0),this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://fzdejwprsfcf0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchHintUI_LongCountDownUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"a1464QYyRxKOo5MPkT3QYje","MatchHintUI_LongCountDownUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchHintUI","LongCountDownUI_Window")},e.prototype.onConstruct=function(){this.m_BtnClose=this.getChildAt(1),this.m_BtnCancel=this.getChildAt(2),this.m_BtnConfirm=this.getChildAt(3),this.m_text=this.getChildAt(4),this.m_text2=this.getChildAt(5),this.m_txtNum1=this.getChildAt(7),this.m_txtNum2=this.getChildAt(8),this.m_txtNum3=this.getChildAt(9),this.m_txtNum4=this.getChildAt(10)},e.URL="ui://fzdejwprsfcf1",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],MatchHintUI_TimeMatchTopHint_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"32973l0/MtHvYHIa5EKOTbd","MatchHintUI_TimeMatchTopHint_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchHintUI","TimeMatchTopHint_MainPanel")},e.prototype.onConstruct=function(){this.m_Window=this.getChildAt(0),this.m_TFadeIn=this.getTransitionAt(0),this.m_TFadeOut=this.getTransitionAt(1)},e.URL="ui://fzdejwprem63n",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchHintUI_TimeMatchTopHint_Window:[function(t,e,n){"use strict";cc._RF.push(e,"abc8b8GY7JCGaspPRQtQyan","MatchHintUI_TimeMatchTopHint_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchHintUI","TimeMatchTopHint_Window")},e.prototype.onConstruct=function(){this.m_cShowBtnPanel=this.getControllerAt(0),this.m_btnConfirm=this.getChildAt(0),this.m_spineNode=this.getChildAt(1),this.m_txtMessage=this.getChildAt(2),this.m_btnOK=this.getChildAt(6),this.m_btnCancel=this.getChildAt(7),this.m_TFadeIn=this.getTransitionAt(0),this.m_TFadeOut=this.getTransitionAt(1)},e.URL="ui://fzdejwprem63m",e}(fgui.GLabel);n.default=i,cc._RF.pop()},{}],MatchHintUI_TopHintUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"f1dadO4ygFPo6+iD1+IExjA","MatchHintUI_TopHintUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchHintUI","TopHintUI_MainPanel")},e.prototype.onConstruct=function(){this.m_Window=this.getChildAt(0),this.m_TFadeIn=this.getTransitionAt(0),this.m_TFadeOut=this.getTransitionAt(1)},e.URL="ui://fzdejwprmo1nd",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchHintUI_TopHintUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"d0b42AtUbBO26BKREFgqQls","MatchHintUI_TopHintUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchHintUI","TopHintUI_Window")},e.prototype.onConstruct=function(){this.m_btnConfirm=this.getChildAt(0),this.m_spineNode=this.getChildAt(1),this.m_btnClose=this.getChildAt(2),this.m_txtMessage=this.getChildAt(3),this.m_TFadeIn=this.getTransitionAt(0),this.m_TFadeOut=this.getTransitionAt(1)},e.URL="ui://fzdejwprmo1ne",e}(fgui.GLabel);n.default=i,cc._RF.pop()},{}],MatchModel:[function(t,e,n){"use strict";cc._RF.push(e,"e29bdnpUTxOLrgmMqHwVcYr","MatchModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function r(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.MatchModel=n.CDefaultCheckSignTime=n.CDefaultCheckTime=n.MatchRoundTimeMatchHint=n.GiveupTypeEnum=n.EnterMatchSceneEnum=n.TimeMatchHint=n.SelfStateEnum=n.KickoutReasonEnum=n.MatchTypeEnum=n.SignMethodEnum=n.SignStateEnum=n.MatchStateEnum=n.MatchAwardTypeEnum=void 0;var l,u,d,p,h,_,f,m,g=t("../../Framework/Manager/CoroutineManager"),y=t("../../Framework/Manager/EventManager"),I=t("../../Framework/Manager/UIManager"),C=t("../../Framework/Model/BaseModel"),M=t("../../Framework/Root/ModelRoot"),v=t("../Base/Data/DataConstant"),E=t("../Base/Data/DataEvent"),A=t("../Base/Data/DataLocalStorageKey"),P=t("../Base/Data/DataProps"),b=t("../Base/Module/BfAnalytics/BfasManager"),U=t("../Base/Module/BfAnalytics/DataPointID"),S=t("../Base/Module/Network/Base/Processid"),T=t("../Base/Module/Network/protocol/ClubGameProtocol"),R=t("../Base/Module/Network/SocketUtils"),w=t("../Base/Utils/UtilTime"),D=t("../Base/Utils/UtilTool"),O=t("../Base/View/Common/DialogUI"),L=t("../Base/View/UIHelp"),G=t("../Game/Common/GameCommonModel"),B=t("../Game/Common/PlayerInfoModel"),N=t("../Game/GuanDan/GameEvent"),F=t("../Game/GuanDan/GameSceneMatchUI"),k=t("../Game/GuanDan/GameUI"),x=t("../Hall/HallUI"),j=t("../MatchShare/MatchShareModel"),H=t("../MatchShare/MatchShareProxy"),W=t("../UserInfo/UserInfoModel"),Y=t("./MatchConstant"),V=t("./MatchHintUI/CountDownUI"),q=t("./MatchHintUI/TimeMatchTopHint"),K=t("./MatchProxy"),X=t("./MatchUI");(function(t){t[t.GOLDEN_EGG=0]="GOLDEN_EGG",t[t.WELFARE=1]="WELFARE"})(l=n.MatchAwardTypeEnum||(n.MatchAwardTypeEnum={})),function(t){t[t.NOT_START=0]="NOT_START",t[t.GO_SIGN=1]="GO_SIGN",t[t.RUNNING=2]="RUNNING",t[t.OVER=3]="OVER",t[t.ERROR=4]="ERROR"}(u=n.MatchStateEnum||(n.MatchStateEnum={})),function(t){t[t.NOT_SIGN=0]="NOT_SIGN",t[t.HAD_SIGN=1]="HAD_SIGN",t[t.CANCEL_SIGN=2]="CANCEL_SIGN",t[t.JOIN=3]="JOIN",t[t.EXIT=4]="EXIT"}(d=n.SignStateEnum||(n.SignStateEnum={})),function(t){t[t.TICKET=0]="TICKET",t[t.FREE=1]="FREE"}(n.SignMethodEnum||(n.SignMethodEnum={})),function(t){t[t.FIX_PLAYER=1]="FIX_PLAYER",t[t.FIX_TIME=2]="FIX_TIME"}(p=n.MatchTypeEnum||(n.MatchTypeEnum={})),function(t){t[t.UNSIGNED=0]="UNSIGNED",t[t.MATCH_OVER=1]="MATCH_OVER"}(h=n.KickoutReasonEnum||(n.KickoutReasonEnum={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.GIVE_UP=1]="GIVE_UP",t[t.NEGATIVE=2]="NEGATIVE",t[t.RANKED=3]="RANKED"}(_=n.SelfStateEnum||(n.SelfStateEnum={})),function(t){t[t.TIME_MATCH_3=180]="TIME_MATCH_3",t[t.TIME_MATCH_5=300]="TIME_MATCH_5"}(f=n.TimeMatchHint||(n.TimeMatchHint={})),function(t){t[t.NONE=0]="NONE",t[t.FIX_PLAYER=1]="FIX_PLAYER",t[t.FIX_TIME=2]="FIX_TIME",t[t.ROUND=3]="ROUND",t[t.GUIDE=4]="GUIDE",t[t.ENROLL=5]="ENROLL"}(m=n.EnterMatchSceneEnum||(n.EnterMatchSceneEnum={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.TO_ANOTHER_MATCH=1]="TO_ANOTHER_MATCH"}(n.GiveupTypeEnum||(n.GiveupTypeEnum={})),function(t){t[t.MIN=20]="MIN",t[t.MAX=300]="MAX"}(n.MatchRoundTimeMatchHint||(n.MatchRoundTimeMatchHint={})),n.CDefaultCheckTime=3600,n.CDefaultCheckSignTime=2400;var J=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._matchConfig=null,e._matchLocation=null,e._curMatchData=null,e._timeSubstituteCorout=null,e._matchListData=null,e._tmpTables=[],e._coPlayerHeadRequest=null,e._coMatchHint=null,e}var o;return a(e,t),o=e,Object.defineProperty(e,"instance",{get:function(){return M.ModelRoot.instance.get(o)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return K.MatchProxy.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initData()},e.prototype.initListener=function(){R.SocketUtils.instance.register(S.Processid.clubGame,club.client.game.MSGID.NOTIFY_GDMATCH_STATUS_CHANGE,this,this.onNotifyGDMatchStatusChange,null,!0),R.SocketUtils.instance.register(S.Processid.clubGame,club.client.game.MSGID.NOTIFY_GDMATCH_PLAYER_STATUS_CHANGE,this,this.onNotifyGDMatchPlayerStatusChange,null,!0),R.SocketUtils.instance.register(S.Processid.clubGame,club.client.game.MSGID.NOTIFY_GDMATCH_INFO_CHANGE,this,this.onNotifyGDMatchInfoChange,null,!0),R.SocketUtils.instance.register(S.Processid.clubGame,club.client.game.MSGID.NOTIFY_GDMATCH_TABLE_INFO_CHANGE,this,this.onNotifyGDMatchTableInfoChange,null,!0),R.SocketUtils.instance.register(S.Processid.clubGame,club.client.game.MSGID.NOTIFY_GDMATCH_KICKOUT,this,this.onNotifyGDMatchKickout,null,!0),y.EventManager.instance.on(Y.MatchDataEvent.SyncMatchCredit,this,this.onSyncMatchCredit),y.EventManager.instance.on(Y.MatchDataEvent.MatchTrust,this,this.onMatchTrustOver),y.EventManager.instance.on(Y.MatchDataEvent.MatchEliminate,this,this.onMatchPlayerEliminate)},e.prototype.initData=function(){this._matchListData=null,this._curMatchData={mid:0,msid:0},this._timeSubstituteCorout=null,this._matchLocation=null,this._matchAwardRule=new Map,this._mapMatchData=new Map,this._mapPlayer=new Map,this._listHeadRequest=new Array,this._coPlayerHeadRequest=null},e.prototype.getMatchListByAwardType=function(t){var e,n;if(null===this._matchListData)return[];var o=t==l.GOLDEN_EGG?this._matchListData.goldEggMatchList:this._matchListData.welfareMatchList,a=[];if(o&&o.length>0)try{for(var i=c(o),r=i.next();!r.done;r=i.next()){var s=r.value,u=this._mapMatchData.get(s.msid);a.push(u)}}catch(d){e={error:d}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return a},e.prototype.getMatchListByType=function(t){var e,n,o,a;if(null===this._matchListData)return[];var i=[];try{for(var r=c(this._matchListData.goldEggMatchList),s=r.next();!s.done;s=r.next()){var l=s.value;(p=this._mapMatchData.get(l.msid)).type==t&&i.push(p)}}catch(h){e={error:h}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}try{for(var u=c(this._matchListData.welfareMatchList),d=u.next();!d.done;d=u.next()){var p;l=d.value,(p=this._mapMatchData.get(l.msid)).type==t&&i.push(p)}}catch(_){o={error:_}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}return i},e.prototype.getMatchData=function(t,e){if(e&&e>0&&this._mapMatchData&&this._mapMatchData.has(e))return this._mapMatchData.get(e)},e.prototype.getSigninMatchByID=function(t){var e,n;if(t&&t>0&&this._mapMatchData)try{for(var o=c(this._mapMatchData.keys()),a=o.next();!a.done;a=o.next()){var i=a.value,r=this._mapMatchData.get(i);if(r.mid==t&&r.match_state==u.GO_SIGN)return r}}catch(s){e={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}},e.prototype.getStartMatchList=function(t){var e,o;t=t||n.CDefaultCheckTime;var a=this.getMatchListByAwardType(l.WELFARE),i=Math.floor((new Date).getTime()/1e3),r=[];try{for(var s=c(a),h=s.next();!h.done;h=s.next()){var _=h.value;if(_.type==p.FIX_TIME&&_.match_state==u.GO_SIGN){var f=_.timestamp-i;if(f<=0)continue;if(f<=t){var m=_.name,g=_.begin_rule.shour<10?"0"+_.begin_rule.shour:_.begin_rule.shour,y=_.begin_rule.smin||0,I=g+":"+(y<10?"0"+y:y),C=_.sign_state==d.HAD_SIGN;r.push({name:m,time:I,flag:C,timestamp:_.timestamp,type:_.type,matchID:_.mid,matchSubID:_.msid})}}}}catch(M){e={error:M}}finally{try{h&&!h.done&&(o=s.return)&&o.call(s)}finally{if(e)throw e.error}}return r},e.prototype.onSyncMatchCredit=function(t){null!=t&&this.setCredibility(t)},e.prototype.onMatchTrustOver=function(){var t=this.getCurMatchID(),e=this.getMatchData(t.mid,t.msid);e||(e={mid:t.mid,msid:t.msid}),e.self_state=_.NEGATIVE,this.addMatchData(t.mid,t.msid,e),this.setSelfScore(this.getCurRoundIndex(),-4),this.setSelfTable(this.getCurRoundIndex(),-4,1)},e.prototype.onNotifyGDMatchStatusChange=function(t){console.log("ttt.Match:onNotifyGDMatchStatusChange:",t);var e=this.getCurMatchID();if(t.matchsubid==e.msid){this.checkMatchInfo(e.mid,e.msid);var n=this.getMatchData(e.mid,e.msid);n.matchinfo.match_status=t.status;var o=t.player_cnt||0;o>0&&(n.matchinfo.player_cnt=o);var a=t.round_index||0;switch(a>0&&(n.matchinfo.round_index=a),this.addMatchData(e.mid,e.msid,n),t.status){case club.client.game.GDMatchStatus.kClose:console.log("ttt.\u6bd4\u8d5b\u672a\u5f00\u59cb0");break;case club.client.game.GDMatchStatus.kSign:console.log("ttt.\u6bd4\u8d5b\u62a5\u540d\u4e2d1");break;case club.client.game.GDMatchStatus.kMatchBegin:console.log("ttt.\u6bd4\u8d5b\u5df2\u5f00\u59cb2"),y.EventManager.instance.emit(Y.MatchDataEvent.MatchStarted);break;case club.client.game.GDMatchStatus.kRoundCheckIn:console.log("ttt.\u6bd4\u8d5b\u5f00\u59cb\u5012\u8ba1\u65f63"),this.onMatchRoundCheckIn();break;case club.client.game.GDMatchStatus.kRoundStart:console.log("ttt.\u6bd4\u8d5b\u8f6e\u5f00\u59cb4");break;case club.client.game.GDMatchStatus.kRoundEnd:console.log("ttt.\u6bd4\u8d5b\u8f6e\u7ed3\u675f5");break;case club.client.game.GDMatchStatus.kMatchEnd:console.log("ttt.\u6bd4\u8d5b\u7ed3\u675f6");break;case club.client.game.GDMatchStatus.kExEnd:console.log("\u6bd4\u8d5b\u5f02\u5e38\u7ed3\u675f7")}}},e.prototype.onNotifyGDMatchPlayerStatusChange=function(t){console.log("ttt.Match:onNotifyGDMatchPlayerStatusChange:",t);var e=club.client.game.NotifyGDMatchPlayerStatusChange.GDMatchPlayerStatus,n=this.getCurMatchID();if(t.status==e.eEliminated||t.matchsubid==n.msid)switch(t.status){case e.eUnknown:console.log("ttt.eUnknown_0");break;case e.eUnmatched:console.log("ttt.\u672a\u5339\u914d\u5230\u5bf9\u624b_1"),this.onMatchPlayerUnMatched();break;case e.eEliminated:console.log("ttt.\u5c0f\u8f6e\u88ab\u6dd8\u6c70_2"),this.onMatchPlayerEliminate(t);break;case e.ePromoted:console.log("ttt.\u5c0f\u8f6e\u664b\u7ea7_3");break;case e.eSubstitutePower:console.log("ttt.\u6bd4\u8d5b\u66ff\u8865\u6743\u9650_4"),this.onMatchPlayerSubstitutePower();break;case e.eRoundRank:console.log("ttt.\u6700\u540e\u4e00\u8f6e\u6392\u540d_5"),this.onMatchPlayerFinalRoundRank(t.curr_round_index,t.rank);break;case e.eSubstituteSucc:console.log("ttt.\u66ff\u8865\u6210\u529f_6"),this.onMatchPlayerSubstituteSuccess()}},e.prototype.onNotifyGDMatchInfoChange=function(t){console.log("ttt.Match:onNotifyGDMatchInfoChange",t);var e=this.getCurMatchID();t.matchsubid==e.msid&&(this.setCurMatchPlayCnt(t.player_cnt),this.setCurWaitTime(t.waittime),y.EventManager.instance.emit(Y.MatchDataEvent.MatchInfoUpdate))},e.prototype.onNotifyGDMatchTableInfoChange=function(t){console.log("ttt.Match:onNotifyGDMatchTableInfoChange 1:",t);var e=this.getCurMatchID();if(t.matchsubid==e.msid){var n=t.round_index||0,o=t.table_index||0,a=t.curr_play_cnt,i=t.status||0;n>this.getCurRoundIndex()&&this.setCurRoundIndex(n);var r={players:[]};r.table_index=o,r.status=i,r.isSelf=!1,a&&a>0&&(r.curr_play_cnt=a);for(var s=0;s<t.players.length;s++){var c=t.players[s];r.players[s]={},r.players[s].nickname=c.nickname,r.players[s].numid=c.numid,r.players[s].score=c.score||0,r.players[s].negative_type=c.negative_type||0,c.numid==W.UserInfoModel.instance.userInfo.numID&&(c.negative_type>0&&c.score<-4&&this.setSelfScore(n,c.score),r.isSelf=!0)}this.setMatchTableInfoByInfo(n,r),y.EventManager.instance.emit(Y.MatchDataEvent.MatchTableUpdate,o)}},e.prototype.onNotifyGDMatchKickout=function(t){console.log("ttt.Match:onNotifyGDMatchKickout",t),t.flag!=T.ClubGameProtocol.NotifyGDMatchKickout.FLAG.UNSIGNED_PLAYER?t.flag!=T.ClubGameProtocol.NotifyGDMatchKickout.FLAG.MATCH_END||y.EventManager.instance.emit(Y.MatchDataEvent.MatchKickOut,h.MATCH_OVER):y.EventManager.instance.emit(Y.MatchDataEvent.MatchKickOut,h.UNSIGNED)},e.prototype.onMatchRoundCheckIn=function(){this.showCheckIn()},e.prototype.showCheckIn=function(){var t=this;if(!I.UIManager.instance.isExist(V.CountDownUI)&&(I.UIManager.instance.isExist(X.MatchUI)||I.UIManager.instance.isExist(F.GameSceneMatchUI))){var e=this.getCurMatchData();e.begin_rule.count&&e.begin_rule.count>0&&(!e.start_time||""==e.start_time)?this.reqGetMatchList(function(){t.openCountDown()}):this.openCountDown()}},e.prototype.openCountDown=function(){var t=this;I.UIManager.instance.open(V.CountDownUI).then(function(e){var n,o=t.getCurMatchData(),a=(null===(n=o.matchinfo)||void 0===n?void 0:n.round_index)||0;a<=0&&(a=1);var i="";if(o.begin_rule.count&&o.begin_rule.count>0)o.start_time&&""!=o.start_time?i+=o.start_time.substring(o.start_time.length-8,o.start_time.length-3):i+=o.begin_rule.count+"\u4eba";else{var r=o.begin_rule.shour<10?"0"+o.begin_rule.shour:o.begin_rule.shour,s=o.begin_rule.smin||0;i+=r+":"+(s<10?"0"+s:s)}i+=o.name+"\u7b2c"+a+"\u8f6e",e.init({name:i,time:5}),e.confirmAction=function(){console.warn("ttt.onMatchCheckIn.begin:",o),I.UIManager.instance.isExist(O.DialogUI)&&I.UIManager.instance.close(O.DialogUI),I.UIManager.instance.isExist(q.TimeMatchTopHint)&&I.UIManager.instance.close(q.TimeMatchTopHint),t.checkInGDMatch(o.mid,o.msid,!0,function(e){console.warn("ttt.onMatchCheckIn.enter:",e),e?t.goToGameFromMatch(o.msid):(y.EventManager.instance.emit(E.DataEvent.ToastData,"\u52a0\u5165\u6bd4\u8d5b\u5931\u8d25,\u8bf7\u91cd\u65b0\u62a5\u540d~"),y.EventManager.instance.emit(Y.MatchDataEvent.MatchCheckInFail))})},e.closeAction=function(){L.UIHelp.instance.showDialogConfirmCancel("\u662f\u5426\u653e\u5f03\u672c\u573a\u6bd4\u8d5b,\u95e8\u7968\u4e0d\u4e88\u8fd4\u8fd8",function(t){t&&(console.log("clickClose.CountDownUI"),1==a&&y.EventManager.instance.emit(Y.MatchDataEvent.ExitMatchDetail),I.UIManager.instance.close(V.CountDownUI))})}})},e.prototype.goToGameFromMatch=function(t){G.GameCommonModel.instance.saveEnterMatchInfo(t),B.PlayerInfoModel.instance.clearData(),this.doEnterMatchUI()},e.prototype.doEnterMatchUI=function(){this._matchLocation={appid:0},I.UIManager.instance.isExist(k.GameUI)?(G.GameCommonModel.instance.isStartGameListener()||(G.GameCommonModel.instance.startListener(),R.SocketUtils.instance.popEmitEvent()),y.EventManager.instance.emit(N.GameEvent.REFRESH_PLAZA_TEXT)):(G.GameCommonModel.instance.isStartGameListener()||G.GameCommonModel.instance.startListener(),y.EventManager.instance.emit(E.DataEvent.EnterGameTable))},e.prototype.openMatchUI=function(t){o.instance.reqGetMatchList(function(){I.UIManager.instance.open(X.MatchUI).then(function(e){return e.initUI(t)})})},e.prototype.relinkMatch=function(t,e,n){var o=this;G.GameCommonModel.instance.isStartGameListener()||G.GameCommonModel.instance.startListener(),G.GameCommonModel.instance.saveEnterMatchInfo(n),B.PlayerInfoModel.instance.clearData(),this.reqGetMatchList(function(){o.enterGDMatch(t,e,n,function(t,a,i){console.log("ttt.relinkMatch:",e,n,t,a,i),t?(console.log("ttt.relinkMatch.game_status:",i.game_status),1===i.game_status?I.UIManager.instance.isExist(k.GameUI)?console.log("ttt.relinkMatch.gameUI"):o.goToGameFromMatch(n):(I.UIManager.instance.isExist(X.MatchUI)?y.EventManager.instance.emit(Y.MatchDataEvent.MatchRoundUpdate):I.UIManager.instance.isExist(k.GameUI)?(y.EventManager.instance.emit(E.DataEvent.ToastData,"\u8bf7\u8010\u5fc3\u7b49\u5f85\u4e0b\u8f6e\u5f00\u59cb~"),y.EventManager.instance.emit(Y.MatchDataEvent.MatchExitGame)):I.UIManager.instance.open(X.MatchUI).then(function(t){return t.initUI({scene:m.ROUND})}),G.GameCommonModel.instance.resetEnterMatchInfo(),G.GameCommonModel.instance.stopListener())):(G.GameCommonModel.instance.resetEnterMatchInfo(),G.GameCommonModel.instance.stopListener(),o._matchLocation={appid:0},y.EventManager.instance.emit(E.DataEvent.ToastData,"\u6bd4\u8d5b\u5df2\u7ed3\u675f~"),I.UIManager.instance.isExist(k.GameUI)&&y.EventManager.instance.emit(Y.MatchDataEvent.MatchExitGame,x.HallUITab.MATCH_HALL))})})},e.prototype.onMatchPlayerUnMatched=function(){I.UIManager.instance.isExist(k.GameUI)&&y.EventManager.instance.emit(Y.MatchDataEvent.MatchExitGame,x.HallUITab.MATCH_HALL),L.UIHelp.instance.showDialog("\u672c\u8f6e\u6bd4\u8d5b\u672a\u5339\u914d\u5bf9\u624b\uff0c\u7cfb\u7edf\u5df2\u7ecf\u5e2e\u60a8\u53d6\u6d88\u62a5\u540d\uff0c\u95e8\u7968\u5df2\u9000\u8fd8\uff0c\u671f\u5f85\u60a8\u7684\u4e0b\u6b21\u53c2\u4e0e\uff01",function(){console.log("click.onMatchPlayerUnMatched")})},e.prototype.onMatchPlayerEliminate=function(t){this.updateSelfFinalRank(t.curr_round_index,t.rank);var e=this.getMatchData(0,t.matchsubid),n=this.isMatchTrust(e.mid,e.msid);e.self_state=_.RANKED,e.match_rank=t.rank||0,this.addMatchData(e.mid,e.msid,e),n||I.UIManager.instance.isExist(X.MatchUI)&&(j.MatchShareModel.instance.showMatchRankShare(t.rank,e),this.getJoinReplace(e.mid,e.msid)?y.EventManager.instance.emit(E.DataEvent.ToastData,"\u6ca1\u6709\u66ff\u8865\u4f4d\u7f6e\uff0c\u8bf7\u53c2\u4e0e\u4e0b\u4e00\u573a\u6bd4\u8d5b\uff01"):y.EventManager.instance.emit(E.DataEvent.ToastData,"\u6bd4\u8d5b\u7ed3\u675f\uff0c\u8bf7\u53c2\u4e0e\u4e0b\u4e00\u573a\u6bd4\u8d5b\uff01"))},e.prototype.onMatchPlayerSubstitutePower=function(){var t=this;b.BfasManager.instance.sendEvt(U.MatchPoint.MATCH_HINT_REPLACE),L.UIHelp.instance.showBigDialogConfirmCancel({content:"\u65b0\u4e00\u8f6e\u6bd4\u8d5b\u5373\u5c06\u5f00\u542f\uff0c\u60a8\u53ef\u4ee5\u5728\u53c2\u8d5b\u754c\u9762\u4e2d\u7b49\u5f85\u66ff\u8865\u673a\u4f1a\uff0c\u5982\u679c\u51fa\u73b0\u66ff\u8865\u60a8\u5c06\u4f1a\u664b\u7ea7\u5230\u4e0b\u4e00\u8f6e\uff0c\u662f\u5426\u7b49\u5f85\u66ff\u8865\uff1f",confirmText:"\u7b49\u5f85\u66ff\u8865",cancelText:"\u53d6\u6d88"},function(e){if(t._timeSubstituteCorout&&g.CoroutineManager.instance.stopCo(t._timeSubstituteCorout),e){b.BfasManager.instance.sendEvt(U.MatchPoint.MATCH_REPLACE_OK_CLICK);var n=t.getCurMatchID();console.log("ttt.substitute:",n),t.reqGDMatchSubstitutePower(n.mid,n.msid)}});var e=0;this._timeSubstituteCorout&&g.CoroutineManager.instance.stopCo(this._timeSubstituteCorout),this._timeSubstituteCorout=g.CoroutineManager.instance.loop(1,function(){if(++e>5)return I.UIManager.instance.isExist(O.DialogUI)&&I.UIManager.instance.close(O.DialogUI),!0},this)},e.prototype.onMatchPlayerFinalRoundRank=function(t,e){this.updateSelfFinalRank(t,e)},e.prototype.onMatchPlayerSubstituteSuccess=function(){var t=this.getCurMatchID();console.log("ttt.onMatchPlayerSubstituteSuccess:",t),this.goToGameFromMatch(t.msid),this.setJoinReplace(t.mid,t.msid,!1),y.EventManager.instance.emit(E.DataEvent.ToastData,"\u606d\u559c\u4f60\u83b7\u5f97\u66ff\u8865\u673a\u4f1a\uff0c\u664b\u7ea7\u4e0b\u4e00\u8f6e\u6bd4\u8d5b")},e.prototype.reqGetMatchList=function(t){var e=this;this.proxy.reqGetMatchList(function(n){var o=JSON.parse(n);e._matchListData=o,console.log("jp-log reqGetMatchList:",e._matchListData),null!==e._matchListData?(e.dealMatchListData(),e.initAllMatchHint(),t&&t(!0)):t&&t(!1)})},e.prototype.dealMatchListData=function(){var t=this;this._matchListData.goldEggMatchList&&this._matchListData.goldEggMatchList.length>0&&(this._matchListData.goldEggMatchList.forEach(function(e){e.begin_rule||(e.begin_rule={}),e.begin_rule.count=e.begin_rule.count||0,e.begin_rule.sweek=e.begin_rule.sweek||0,e.begin_rule.shour=e.begin_rule.shour||0,e.begin_rule.smin=e.begin_rule.smin||0,t.addMatchToData(e,l.GOLDEN_EGG)}),this._matchListData.goldEggMatchList.sort(this.sortMatchList)),this._matchListData.welfareMatchList&&this._matchListData.welfareMatchList.length>0&&(this._matchListData.welfareMatchList.forEach(function(e){e.begin_rule||(e.begin_rule={}),e.begin_rule.count=e.begin_rule.count||0,e.begin_rule.sweek=e.begin_rule.sweek||0,e.begin_rule.shour=e.begin_rule.shour||0,e.begin_rule.smin=e.begin_rule.smin||0,t.addMatchToData(e,l.WELFARE)}),this._matchListData.welfareMatchList.sort(this.sortMatchList))},e.prototype.addMatchToData=function(t,e){var n={mid:t.mid,msid:t.msid,appid:t.appid,name:t.name,type:t.type,begin_rule:t.begin_rule,match_state:t.match_state,start_time:t.start_time,sign_rule:t.sign_rule,ticket_rule:t.ticket_rule,award_rule:t.award_rule,sign_state:t.sign_state,show_rule:t.show_rule,awardtype:e};this.addMatchData(t.mid,t.msid,n)},e.prototype.addMatchData=function(t,e,n){this._mapMatchData||(this._mapMatchData=new Map),this._mapMatchData.has(e)||this._mapMatchData.set(e,{mid:t,msid:e});var o=this._mapMatchData.get(e);for(var a in n)o[a]=n[a];this._mapMatchData.set(e,o)},e.prototype.sortMatchList=function(t,e){if(t.match_state!==e.match_state)return t.match_state-e.match_state;if(t.match_state==u.RUNNING||t.match_state==u.OVER){var n=1,o=1;return t.sign_state!=d.HAD_SIGN&&t.sign_state!=d.JOIN&&t.sign_state!=d.EXIT||(n=0),e.sign_state!=d.HAD_SIGN&&e.sign_state!=d.JOIN&&e.sign_state!=d.EXIT||(o=0),n-o}if(t.match_state!=u.GO_SIGN&&e.match_state!=u.GO_SIGN)return 0;var a=t.begin_rule.sweek||0,i=e.begin_rule.sweek||0,r=t.begin_rule.shour||0,s=e.begin_rule.shour||0,c=t.begin_rule.smin||0,l=e.begin_rule.smin||0;return a!=i?a-s:s!=r?r-s:l!=c?c-l:0},e.prototype.getCredibility=function(){return this._matchListData.credit},e.prototype.setCredibility=function(t){this._matchListData&&(this._matchListData.credit=t)},e.prototype.getEnrollCreditLimit=function(){return 85},e.prototype.getGoldenEgg=function(){return W.UserInfoModel.instance.getPropCount(P.PropIDEnum.EXCHANGE_GOLDEN_EGG)},e.prototype.getTickets=function(t){return p.FIX_PLAYER==t?W.UserInfoModel.instance.getPropCount(P.PropIDEnum.TICKET_GOLDEN_EGG):p.FIX_TIME==t?W.UserInfoModel.instance.getPropCount(P.PropIDEnum.TICKET_PHONE_FEE):void 0},e.prototype.getTicketCost=function(t,e){var n=this.getMatchData(t,e);for(var o in n.ticket_rule.prop)if(Object.prototype.hasOwnProperty.call(n.ticket_rule.prop,o))return{propID:o,propCnt:n.ticket_rule.prop[o]}},e.prototype.reqMatchConfig=function(t,e,n){var o=this;this.proxy.reqGetMatchConfig(t,function(a){var i=JSON.parse(a);if(null!==i){console.log("jp-log reqMatchConfig:",i),o.setAward(t,i.midConfig.award_rule);var r=o.getMatchData(t,e);if(r){for(var s in i.midConfig)r[s]=i.midConfig[s];o.addMatchData(t,e,r),n&&n(!0)}else n&&n(!1)}else n&&n(!1)})},e.prototype.reqUpMatchLogExchange=function(t,e){console.log("reqUpMatchLogExchange:",t),this.proxy.reqUpMatchLogExchange(t,function(t){e&&e(t)})},e.prototype.reqGetMatchLogExchange=function(t){this.proxy.reqGetMatchLogExchange(function(e,n){t&&t(e,n)})},e.prototype.reqGetMatchEndInfo=function(t,e,n){var o=this,a=this.getMatchData(t,e);a&&a.final&&a.final.list&&a.final.list.length>0?n&&n(!0,a.final):this.proxy.reqGetMatchEndInfo(e,function(a){var i=JSON.parse(a);if(i){var r=o.getMatchData(t,e);r||(r={mid:t,msid:e});var s={list:i.rankingBoard||[],myRanking:i.myRanking||0};r.final=s,o.addMatchData(t,e,r),n&&n(!0,s)}else n&&n(!1,{list:[],myRanking:0})})},e.prototype.setCurMatchID=function(t,e){this._curMatchData.mid=t,this._curMatchData.msid=e},e.prototype.getCurMatchID=function(){return this._curMatchData},e.prototype.resetCurMatchID=function(){this.setCurMatchID(0,0)},e.prototype.checkMatchInfo=function(t,e){var n=this.getMatchData(t,e);n||(n={mid:t,msid:e}),n.matchinfo||(n.matchinfo={}),this.addMatchData(t,e,n)},e.prototype.checkMatchSelfRank=function(t,e){var n=this.getMatchData(t,e);n||(n={mid:t,msid:e}),n.selfRank||(n.selfRank=[]),this.addMatchData(t,e,n)},e.prototype.getCurRoundIndex=function(){var t,e=this.getCurMatchID();return e?(this.checkMatchInfo(e.mid,e.msid),(null===(t=this.getMatchData(e.mid,e.msid).matchinfo)||void 0===t?void 0:t.round_index)||0):0},e.prototype.setCurRoundIndex=function(t){var e=this.getCurMatchID();if(e){this.checkMatchInfo(e.mid,e.msid);var n=this.getMatchData(e.mid,e.msid);n.matchinfo.round_index=t||0,this.addMatchData(e.mid,e.msid,n)}},e.prototype.isCurrentRound=function(t){return t==this.getCurRoundIndex()},e.prototype.getCurWaitTime=function(){var t,e=this.getCurMatchID();return e?(this.checkMatchInfo(e.mid,e.msid),(null===(t=this.getMatchData(e.mid,e.msid).matchinfo)||void 0===t?void 0:t.waittime)||0):0},e.prototype.setCurWaitTime=function(t){var e=this.getCurMatchID();if(e){this.checkMatchInfo(e.mid,e.msid);var n=this.getMatchData(e.mid,e.msid);n.matchinfo.waittime=t||0,n.matchinfo.starttime=n.matchinfo.waittime+Math.floor((new Date).getTime()/1e3),this.addMatchData(e.mid,e.msid,n)}},e.prototype.getCurMatchStatus=function(){var t,e=this.getCurMatchID();return e?(this.checkMatchInfo(e.mid,e.msid),(null===(t=this.getMatchData(e.mid,e.msid).matchinfo)||void 0===t?void 0:t.match_status)||club.client.game.GDMatchStatus.kClose):club.client.game.GDMatchStatus.kClose},e.prototype.getStartTime=function(){var t,e=this.getCurMatchID();return e?(this.checkMatchInfo(e.mid,e.msid),(null===(t=this.getMatchData(e.mid,e.msid).matchinfo)||void 0===t?void 0:t.starttime)||0):0},e.prototype.setCurMatchStatus=function(t){var e=this.getCurMatchID();if(e){this.checkMatchInfo(e.mid,e.msid);var n=this.getMatchData(e.mid,e.msid);n.matchinfo.match_status=t||0,this.addMatchData(e.mid,e.msid,n)}},e.prototype.getCurMatchPlayCnt=function(){var t,e=this.getCurMatchID();return e?(this.checkMatchInfo(e.mid,e.msid),(null===(t=this.getMatchData(e.mid,e.msid).matchinfo)||void 0===t?void 0:t.player_cnt)||0):0},e.prototype.setCurMatchPlayCnt=function(t){var e=this.getCurMatchID();if(e){this.checkMatchInfo(e.mid,e.msid);var n=this.getMatchData(e.mid,e.msid);n.matchinfo.player_cnt=t||0,this.addMatchData(e.mid,e.msid,n)}},e.prototype.getCurMatchRounds=function(){var t,e=this.getCurMatchID();if(e)return this.checkMatchInfo(e.mid,e.msid),null===(t=this.getMatchData(e.mid,e.msid).matchinfo)||void 0===t?void 0:t.round_info},e.prototype.gameExitDeductCreditScore=function(){var t=this.getCurRoundIndex();return t<=1?-10:t<=3?-5:-3},e.prototype.updateSelfFinalRank=function(t,e){var n=this.getCurMatchID();if(n){this.checkMatchSelfRank(n.mid,n.msid);var o=this.getMatchData(n.mid,n.msid),a=o.selfRank[t];o.selfRank[t]={rank:e,score:a&&a.score},this.addMatchData(n.mid,n.msid,o),console.log("ttt.updateSelfFinalRank:",o.selfRank[t])}},e.prototype.getSelfFinalRank=function(){var t=this.getCurMatchID();if(t){this.checkMatchSelfRank(t.mid,t.msid);var e=this.getMatchData(t.mid,t.msid).selfRank;if(e&&e.length>0)return e[e.length-1].rank}return 0},e.prototype.getFinalRankByNumid=function(t){var e=0,n=this.getCurMatchID();if(n){var o=this.getMatchData(n.mid,n.msid).final;o&&o.list&&o.list.length>0&&o.list.forEach(function(n,o){n.nid==t&&(e=o+1)})}return e},e.prototype.getMatchRoundInfo=function(t){var e=this.getCurMatchRounds();if(e&&e[t-1])return e[t-1]},e.prototype.setMatchRoundInfo=function(t,e){var n=this.getCurMatchID();if(n){this.checkMatchInfo(n.mid,n.msid);var o=this.getMatchData(n.mid,n.msid);o.matchinfo.round_info||(o.matchinfo.round_info=[]),o.matchinfo.round_info[t-1]=e,this.addMatchData(n.mid,n.msid,o)}},e.prototype.getRoundPlayCnt=function(t){var e=this.getMatchRoundInfo(t);return e?e.player_cnt:0},e.prototype.getRoundStart=function(t){var e=this.getMatchRoundInfo(t);return e?e.start_at:0},e.prototype.getRoundEnd=function(t){var e=this.getMatchRoundInfo(t);return e?e.expect_end_at:0},e.prototype.isRoundEnd=function(t){var e=this.getMatchRoundInfo(t);return!!e&&e.end_at&&0==e.end_at},e.prototype.getRoundMaxPlayCnt=function(t){var e=this.getMatchRoundInfo(t);return e?e.max_play_cnt:0},e.prototype.getRoundUpCnt=function(t){var e=this.getRoundPlayCnt(t);return 4*Math.ceil(e/2/4)},e.prototype.setMatchRankInfo=function(t,e){var n=this.getCurMatchID();if(n){var o=this.getMatchData(n.mid,n.msid);o.matchRank||(o.matchRank=[]),o.matchRank[t-1]=e,this.addMatchData(n.mid,n.msid,o)}},e.prototype.getMatchRankInfo=function(t){var e=this.getCurMatchID();if(e){var n=this.getMatchData(e.mid,e.msid);if(n.matchRank)return n.matchRank[t-1]}},e.prototype.getRoundRankByNumID=function(t,e){var n,o,a=this.getMatchRankInfo(t);if(a&&a.players)try{for(var i=c(a.players),r=i.next();!r.done;r=i.next()){var s=r.value;if(s.numid==e)return s.rank||0}}catch(l){n={error:l}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return 0},e.prototype.getCurPlayingTableCnt=function(t){var e,n,o=this.getMatchTableInfo(t),a=0;if(o&&o.length>0)try{for(var i=c(o),r=i.next();!r.done;r=i.next()){var s=r.value;s.status&&1==s.status&&a++}}catch(l){e={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return a},e.prototype.getCurPlayingCnt=function(t){return 4*this.getCurPlayingTableCnt(t)},e.prototype.getSelfTableRank=function(t){var e,n;if(!this.isCurrentRound(t))return 0;var o=1,a=this.getSelfTableScore(t),i=this.getMatchTableInfo(t),r=!1;if(!i||0==i.length)return 0;try{for(var s=c(i),l=s.next();!l.done;l=s.next())for(var u=l.value,d=0;d<u.players.length;d++){var p=u.players[d];p.numid==W.UserInfoModel.instance.userInfo.numID?r=!0:1!=u.status&&p.numid!=W.UserInfoModel.instance.userInfo.numID&&p.score>a&&o++}}catch(h){e={error:h}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return r?o:0},e.prototype.isExistTable=function(t){var e,n,o=!1,a=this.getMatchTableInfo(t);try{for(var i=c(a),r=i.next();!r.done;r=i.next())for(var s=r.value,l=0;l<s.players.length;l++)s.players[l].numid==W.UserInfoModel.instance.userInfo.numID&&(o=!0)}catch(u){e={error:u}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return o},e.prototype.getSelfTableScore=function(t){var e,n,o=this.getSelfScore(t);if(0!=o)return o;var a=this.getMatchTableInfo(t);if(!a||0==a.length)return 0;try{for(var i=c(a),r=i.next();!r.done;r=i.next())for(var s=r.value,l=0;l<s.players.length;l++){var u=s.players[l];if(u.numid==W.UserInfoModel.instance.userInfo.numID)return u.score}}catch(d){e={error:d}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return 0},e.prototype.getSelfTableNegativeType=function(t){var e,n,o=this.getMatchTableInfo(t);if(!o||0==o.length)return 0;try{for(var a=c(o),i=a.next();!i.done;i=a.next())for(var r=i.value,s=0;s<r.players.length;s++){var l=r.players[s];if(l.numid==W.UserInfoModel.instance.userInfo.numID)return l.negative_type}}catch(u){e={error:u}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return 0},e.prototype.setSelfTable=function(t,e,n){var o=this.getMatchTableInfo(t);if(!o||0==o.length)return 0;for(var a=0;a<o.length;a++)for(var i=o[a],r=0;r<i.players.length;r++){var s=i.players[r];if(s.numid==W.UserInfoModel.instance.userInfo.numID){s.score=e,s.negative_type=n||0,i.players[r]=s,i.isSelf=!0,this.setMatchTableInfoByInfo(t,i);break}}},e.prototype.getSelfRank=function(t){var e=this.getCurMatchID();if(e){var n=this.getMatchData(e.mid,e.msid);if(n&&n.selfRank&&n.selfRank[t-1])return n.selfRank[t-1].rank||0}return 0},e.prototype.getSelfScore=function(t){var e=this.getCurMatchID();if(e){var n=this.getMatchData(e.mid,e.msid);if(n&&n.selfRank&&n.selfRank[t-1])return n.selfRank[t-1].score||0}return 0},e.prototype.setSelfRank=function(t,e){var n=this.getCurMatchID();if(n){var o=this.getMatchData(n.mid,n.msid);o||(o={mid:n.mid,msid:n.msid}),o.selfRank||(o.selfRank=[]),o.selfRank[t-1]||(o.selfRank[t-1]={rank:0,score:0}),o.selfRank[t-1].rank=e,this.addMatchData(n.mid,n.msid,o)}},e.prototype.setSelfScore=function(t,e){var n=this.getCurMatchID();if(n){var o=this.getMatchData(n.mid,n.msid);o||(o={mid:n.mid,msid:n.msid}),o.selfRank||(o.selfRank=[]),o.selfRank[t-1]||(o.selfRank[t-1]={rank:0,score:0}),o.selfRank[t-1].score=e,this.addMatchData(n.mid,n.msid,o)}},e.prototype.getMatchRank=function(){var t=this.getCurMatchID();if(t){var e=this.getMatchData(t.mid,t.msid);if(e)return e.match_rank}return 0},e.prototype.getMatchTableInfo=function(t){var e=this.getCurMatchID();if(e){var n=this.getMatchData(e.mid,e.msid);if(n&&n.matchTable&&n.matchTable[t-1])return n.matchTable[t-1]}},e.prototype.getMatchTableByIndex=function(t,e){var n=this.getMatchTableInfo(t);if(n)for(var o=0;o<n.length;o++){var a=n[o];if(a.table_index==e)return a}},e.prototype.setMatchTableInfoByInfo=function(t,e){var n,o,a=this.getCurMatchID();if(a){var i=this.getMatchData(a.mid,a.msid);if(i||(i={mid:a.mid,msid:a.msid}),i.matchTable||(i.matchTable=[]),i.matchTable[t-1]||(i.matchTable[t-1]=[]),e&&e.players&&e.players[0]&&e.players[0].numid){var r=e.players[0].numid,s=!1;for(var l in i.matchTable[t-1]){var u=i.matchTable[t-1][l];u.isSelf=!1;try{for(var d=(n=void 0,c(u.players)),p=d.next();!p.done;p=d.next()){var h=p.value;h.numid==r&&(i.matchTable[t-1][l]=e,s=!0),h.numid==W.UserInfoModel.instance.userInfo.numID&&(u.isSelf=!0)}}catch(_){n={error:_}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}if(s)break}s&&(this.addMatchData(a.mid,a.msid,i),this.sortRoundTableInfo(t))}}},e.prototype.isFinalRound=function(t){return 4==this.getRoundPlayCnt(t)||3==this.getRoundMaxPlayCnt(t)||4==this.getRoundUpCnt(t-1)||!(!this.isCurrentRound(t)||4!=this.getCurMatchPlayCnt())},e.prototype.enterGDMatch=function(t,e,n,o){var a=this;this.reqEnterGDMatch(t,e,n,function(t,i){t?a.getGDMatchInfo(e,n,function(t){t?a.reqMatchConfig(e,n,function(t){t?o&&o(!0,"",i):o&&o(!1,"error.reqMatchConfig.\u62c9\u53d6\u6bd4\u8d5b\u914d\u7f6e\u5931\u8d25~~",i)}):o&&o(!1,"error.getGDMatchInfo.\u83b7\u53d6\u6bd4\u8d5b\u4fe1\u606f\u5931\u8d25~~",i)}):o&&o(!1,"error.reqEnterGDMatch.\u52a0\u5165\u6bd4\u8d5b\u623f\u95f4\u5931\u8d25~~",i)})},e.prototype.reqEnterGDMatch=function(t,e,n,o){var a=this;this.proxy.reqEnterGDMatch(t,n,function(t,i){if(t){a.checkMatchInfo(e,n);var r=a.getMatchData(e,n);r.credit=i.credit||0,r.fight=i.fight||0,r.game_status=i.game_status||0,r.lose_at=i.lose_at||0,r.match_rank=i.match_rank||0,a.addMatchData(e,n,r),o&&o(!0,i)}else o&&o(!1,i)})},e.prototype.quickEnterMatch=function(t,e){var n=this;L.UIHelp.instance.showLoading(),g.CoroutineManager.instance.once(1,function(){L.UIHelp.instance.hideLoading(),n.reqGetMatchList(function(o){if(o){var a=n.getSigninMatchByID(t);if(!a)return void(e&&e(!1,"\u6bd4\u8d5b\u5df2\u7ecf\u5f00\u59cb\uff0c\u8bf7\u9009\u62e9\u5176\u4ed6\u6bd4\u8d5b\u53c2\u52a0\u3002"));n.enterGDMatch(a.appid,t,a.msid,function(t,n){t?e&&e(t,n,a):e&&e(t,n)})}else e&&e(!1,"\u6bd4\u8d5b\u5df2\u7ecf\u5f00\u59cb\uff0c\u8bf7\u9009\u62e9\u5176\u4ed6\u6bd4\u8d5b\u53c2\u52a0\u3002")})})},e.prototype.getGDMatchInfo=function(t,e,n){var o=this;this.setCurMatchID(t,e),this.proxy.reqGDMatchInfo(t,e,function(a,i){if(a){o.checkMatchInfo(t,e);var r=o.getMatchData(t,e);r.matchinfo.player_cnt=i.player_cnt||0,r.matchinfo.match_status=i.match_status||0,r.matchinfo.round_index=i.round_index||0,r.matchinfo.waittime=i.waittime||0,r.matchinfo.round_info||(r.matchinfo.round_info=[]);for(var s=0;s<i.roundinfo.length;s++){var c=i.roundinfo[s],l={start_at:c.start_at||0,end_at:c.end_at||0,max_play_cnt:c.max_play_cnt||0,player_cnt:c.player_cnt||0,expect_end_at:c.expect_end_at||0};r.matchinfo.round_info[s]=l}o.addMatchData(t,e,r),o.setCurWaitTime(r.matchinfo.waittime),n&&n(!0)}else n&&n(!1)})},e.prototype.cancelGDMatchQuick=function(t,e,n,o){var a=this;this.enterGDMatch(t,e,n,function(t,i){t?a.applyJoinGDMatch(e,n,!1,!1,function(t,e){t?o&&o(!0,""):o&&o(!1,e),a.reqLeaveRoom(n)}):o&&o(!1,i)})},e.prototype.applyJoinGDMatch=function(t,e,n,o,a){var i=this,r=n?T.ClubGameProtocol.ReqApplyJoinGDMatch.ApplyAction.kSign:T.ClubGameProtocol.ReqApplyJoinGDMatch.ApplyAction.kUnSign,s=o?T.ClubGameProtocol.ReqApplyJoinGDMatch.SignUpType.kFree:T.ClubGameProtocol.ReqApplyJoinGDMatch.SignUpType.kTicket;this.proxy.reqApplyJoinGDMatch(t,e,r,s,function(o,r){console.log("applyJoinGDMatch.resp:",r),o?(i.onApplyJoinGDMatch(t,e,n,r.signUpType==T.ClubGameProtocol.ReqApplyJoinGDMatch.SignUpType.kFree),a&&a(!0,"\u6210\u529f")):a&&a(!1,"\u5931\u8d25["+r.errmsg+"]")})},e.prototype.onApplyJoinGDMatch=function(t,e,n,o){if(!o){var a=this.getTicketCost(t,e),i=n?-a.propCnt:a.propCnt;W.UserInfoModel.instance.addProp(Number(a.propID),i)}var r=this.getMatchData(t,e);r.sign_state=n?d.HAD_SIGN:d.NOT_SIGN,this.addMatchData(r.mid,r.msid,r),o&&j.MatchShareModel.instance.updateShareCntByType(r.type,j.MatchShareType.FreeSignIn,n?-1:1),this.setMatchHint(t,e,n),y.EventManager.instance.emit(Y.MatchDataEvent.MatchApplyJoin),y.EventManager.instance.emit(E.DataEvent.UpdateProp)},e.prototype.reqSignInType=function(t,e){H.MatchShareProxy.instance.reqMatchSignInType(t,function(t){e&&e(t)})},e.prototype.checkInGDMatch=function(t,e,n,o){var a=this,i=n?1:0;this.proxy.reqCheckInGDMatch(e,i,function(n,i){if(console.log("checkInGDMatch.resp:",i),n){var r=a.getMatchData(t,e);r.sign_state=d.JOIN,r.match_state=u.RUNNING,a.addMatchData(r.mid,r.msid,r),o&&o(!0)}else o&&o(!1)})},e.prototype.reqGDMatchSubstitutePower=function(t,e){var n=this;this.proxy.reqGDMatchSubstitute(e,function(o,a){console.log("ttt.reqGDMatchSubstitute:",o,a),o?(n.setJoinReplace(t,e,!0),y.EventManager.instance.emit(E.DataEvent.ToastData,"\u60a8\u5df2\u62a5\u540d\u4e0b\u4e00\u8f6e\u66ff\u8865\u540d\u989d\uff0c\u5982\u679c\u51fa\u73b0\u66ff\u8865\u60c5\u51b5\uff0c\u60a8\u5c06\u6709\u673a\u4f1a\u664b\u7ea7")):y.EventManager.instance.emit(E.DataEvent.ToastData,"\u66ff\u8865\u5931\u8d25:"+a)})},e.prototype.reqGDMatchGiveup=function(t,e,n,o,a){var i=this;this.proxy.reqGiveupGDMatch(e,n,function(n,r){if(console.log("ttt.reqGDMatchGiveup:",n,r),n){var s=i.getMatchData(t,e);s||(s={mid:t,msid:e}),s.self_state=_.NEGATIVE,i.addMatchData(t,e,s),i.setSelfScore(i.getCurRoundIndex(),-4),i.setSelfTable(i.getCurRoundIndex(),-4,1),o&&o(!0)}else o&&o(!1),a&&1==a||y.EventManager.instance.emit(E.DataEvent.ToastData,"\u5f03\u8d5b\u5931\u8d25:"+r)},a)},e.prototype.reqLeaveRoom=function(t,e){this.proxy.reqGDMatchLeave(t,function(){e&&e()}),G.GameCommonModel.instance.stopListener(),G.GameCommonModel.instance.resetEnterMatchInfo()},e.prototype.reqRankInfo=function(t,e,n,o){var a=this;this.proxy.reqGDMatchRankInfo(t,e,-1,function(t,n){var i,r;if(t){var s=a.getMatchRankInfo(e);s||(s={players:[]});try{for(var l=c(n.players),u=l.next();!u.done;u=l.next()){var d=u.value;s.players[d.rank-1]=d}}catch(p){i={error:p}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}a.setMatchRankInfo(e,s),o&&o(!0)}else o&&o(!1)})},e.prototype.getRoundTableList=function(t,e,n,o){var a=this;this.getGDMatchInfo(t,e,function(t){t?a.reqRoundTableInfo(e,n,-1,function(t){o&&o(t)}):o&&o(t)})},e.prototype.reqRoundTableInfo=function(t,e,n,o){var a=this;this._tmpTables=[],this.proxy.reqGDMatchTableInfo(t,e,-1,function(t,n){if(t){for(var i=0;i<n.tables.length;i++)a._tmpTables.push(n.tables[i]);1==n.finished&&(a.setRoundTableInfo(e,a._tmpTables),o&&o(!0))}else o&&o(!1)})},e.prototype.setRoundTableInfo=function(t,e){var n,o,a=this.getCurMatchID();if(a){var i=this.getMatchData(a.mid,a.msid);i||(i={mid:a.mid,msid:a.msid}),i.matchTable||(i.matchTable=[]),i.matchTable[t-1]||(i.matchTable[t-1]=[]);for(var r=0;r<e.length;r++){var s=e[r];s.table_index=r,s.isSelf=!1;try{for(var l=(n=void 0,c(s.players)),u=l.next();!u.done;u=l.next())if(u.value.numid==W.UserInfoModel.instance.userInfo.numID){s.isSelf=!0;break}}catch(d){n={error:d}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}}i.matchTable[t-1]=e,this.addMatchData(a.mid,a.msid,i),this.sortRoundTableInfo(t)}},e.prototype.sortRoundTableInfo=function(t){var e=this.getCurMatchID();if(e){var n=this.getMatchData(e.mid,e.msid);n&&n.matchTable&&n.matchTable[t-1]&&n.matchTable[t-1].sort(this.sortTableRule)}},e.prototype.sortTableRule=function(t,e){if(e.status==t.status){if(t.isSelf)return-1;if(e.isSelf)return 1}return e.status-t.status},e.prototype.startHeadRequest=function(){var t=this;this._coPlayerHeadRequest||(this._coPlayerHeadRequest=g.CoroutineManager.instance.loop(.05,function(){t.updateHeadRequest()},this))},e.prototype.stopHeadRequest=function(){this._coPlayerHeadRequest&&g.CoroutineManager.instance.stopCo(this._coPlayerHeadRequest),this._coPlayerHeadRequest=null},e.prototype.updateHeadRequest=function(){var t=this;if(this._listHeadRequest.length<=0)this.stopHeadRequest();else{var e=this._listHeadRequest.pop();this.proxy.reqGetHeadUrl(e.numid,function(n){var o=JSON.parse(n);D.UtilTool.checkHeadurl(o.headUrl)||(o.headUrl=v.DataConstant.MATCH_DEFAULT_HEAD_ICON),o.numid=e.numid,t._mapPlayer.set(e.numid,o),e.callback&&e.owner&&e.callback(o)})}},e.prototype.reqPlayerInfo=function(t,e,n){if(!this._mapPlayer.has(t)){var o={numid:t,callback:e,owner:n};this._listHeadRequest.push(o),this.startHeadRequest()}},e.prototype.getMatchPlayerInfo=function(t,e,n){if(this._mapPlayer.has(t)){var o=this._mapPlayer.get(t);e&&n&&e(o)}else this.reqPlayerInfo(t,e,n)},e.prototype.setAward=function(t,e){e&&0!=e.length&&this._matchAwardRule.set(t,e)},e.prototype.getAward=function(t){if(this._matchAwardRule)return this._matchAwardRule.get(t)},e.prototype.getRankAward=function(t,e,n){if(n<=0)return null;var o=this.getAward(t);if(!o)return null;for(var a=0;a<o.length;a++)if(n<=o[a].range)return o[a];return null},e.prototype.getMatchStartTime=function(t,e){var n,o,a=A.DataLocalStorage.get([A.DataLocalStorage.addKeyWithNumID(A.LocalStorageKey.MATCH_HINT_START_TIME)]);""==a&&(a="[]");var i=JSON.parse(a);if(null===i&&(i=[]),t&&t>0)try{for(var r=c(i),s=r.next();!s.done;s=r.next()){var l=s.value;if(l.mid==t&&l.msid==e)return[l]}}catch(u){n={error:u}}finally{try{s&&!s.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}return i},e.prototype.reqMatchSubID=function(t){var e=this;this._matchLocation=null,this.proxy.reqMatchGetSubID(function(n,o){if(n){var a=JSON.parse(o);console.log("ttt.reqMatchSubID",a),a&&a.matchSub?e._matchLocation=a.matchSub:e._matchLocation={appid:0},t&&t(!0)}else t&&t(!1)})},e.prototype.getMatchLocation=function(){return this._matchLocation},e.prototype.getMatchLocationAppID=function(){var t;return(null===(t=this._matchLocation)||void 0===t?void 0:t.appid)||0},e.prototype.reqGDMatchSubstitute=function(t,e){this.proxy.reqGDMatchSubstitute(t,function(t){t?e&&e(!0):e&&e(!1)})},e.prototype.getCurMatchData=function(){var t=this.getCurMatchID();return this.getMatchData(t.mid,t.msid)||{mid:t.mid,msid:t.msid}},e.prototype.getUIlastRound=function(){var t=this.getCurMatchData();return(null==t?void 0:t.lastRound)||0},e.prototype.setUIlastRound=function(t){var e=this.getCurMatchID(),n=this.getMatchData(e.mid,e.msid);n||(n={mid:e.mid,msid:e.msid}),n.lastRound=t||0,this.addMatchData(e.mid,e.msid,n)},e.prototype.getUILastMatchType=function(){var t=this.getCurMatchData();return(null==t?void 0:t.awardtype)||l.GOLDEN_EGG},e.prototype.isMatchTrust=function(t,e){var n=this.getMatchData(t,e);return!!n&&(n.self_state==_.NEGATIVE||n.self_state==_.GIVE_UP)},e.prototype.canQuitMatch=function(t,e){var n=this.getMatchData(t,e),o=this.isMatchTrust(t,e),a=n.sign_state==d.EXIT,i=this.getSelfTableNegativeType(1)>0,r=!this.isExistTable(this.getCurRoundIndex());return o||a||i||r},e.prototype.isRanked=function(t,e){var n=this.getMatchData(t,e);return!!n&&n.self_state==_.RANKED},e.prototype.isCurrentMatchOver=function(){var t=this.getCurMatchData();return!(!t||!t.matchinfo||t.matchinfo.match_status!=club.client.game.GDMatchStatus.kMatchEnd&&t.matchinfo.match_status!=club.client.game.GDMatchStatus.kExEnd)},e.prototype.setShowQuitHint=function(t,e,n){var o=this.getMatchData(t,e);o||(o={mid:t,msid:e}),o.showQuitHint=n},e.prototype.getShowQuitHint=function(t,e){var n=this.getMatchData(t,e);return(null==n?void 0:n.showQuitHint)||0},e.prototype.setJoinReplace=function(t,e,n){var o=this.getMatchData(t,e);o||(o={mid:t,msid:e}),o.joinReplace=n},e.prototype.getJoinReplace=function(t,e){var n=this.getMatchData(t,e);return(null==n?void 0:n.joinReplace)||!1},e.prototype.setMatchHint=function(t,e,n){n?this.addMatchStartTime(t,e):this.delMatchStartTime(t,e)},e.prototype.addMatchStartTime=function(t,e){var n=this.getMatchStartTime();if(t&&t>0&&e&&e>0)for(var o=0;o<n.length;o++){var a=n[o];if(console.log("ttt.match already add:",a),a.mid==t&&a.msid==e)return}var i=this.getMatchData(t,e);if(i.type==p.FIX_TIME){var r=0;if("d"==i.begin_rule.time_type)r=86400*w.UtilTime.getDayCount()+3600*i.begin_rule.shour,i.begin_rule.smin&&(r+=60*i.begin_rule.smin);else if("w"==i.begin_rule.time_type){var s=new Date,c=i.begin_rule.sweek-s.getDay();r=86400*w.UtilTime.getDayCount()+86400*c+3600*i.begin_rule.shour,i.begin_rule.smin&&(r+=60*i.begin_rule.smin)}r>0&&(r-=w.TIME_ZONE_OFFSET,a={appid:i.appid,mid:t,msid:e,stimestamp:r,sname:i.name,type:i.type},n.push(a),this.addHint(e,a),A.DataLocalStorage.set(A.DataLocalStorage.addKeyWithNumID(A.LocalStorageKey.MATCH_HINT_START_TIME),JSON.stringify(n)))}},e.prototype.delMatchStartTime=function(t,e){var n=this.getMatchStartTime();if(t&&t>0&&e&&e>0)for(var o=0;o<n.length;o++){var a=n[o];if(a.mid==t&&a.msid==e)return n.splice(o),this.removeHint(e),void A.DataLocalStorage.set(A.DataLocalStorage.addKeyWithNumID(A.LocalStorageKey.MATCH_HINT_START_TIME),JSON.stringify(n))}},e.prototype.checkHintTime=function(){var t,e,n=Math.floor((new Date).getTime()/1e3);try{for(var o=c(this._mapSignMatchHint.keys()),a=o.next();!a.done;a=o.next()){var i=a.value,r=this._mapSignMatchHint.get(i);if(null==r.stimestamp||r.stimestamp<n)this.removeHint(r.msid),this.delMatchStartTime(r.mid,r.msid);else{var s=r.stimestamp-n;1!=r.flag&&s<=f.TIME_MATCH_5?(this.enableHint(r.msid),y.EventManager.instance.emit(Y.MatchDataEvent.MatchStartHint5,{info:r,time:f.TIME_MATCH_5})):s<=f.TIME_MATCH_3&&(this.removeHint(r.msid),this.delMatchStartTime(r.mid,r.msid),y.EventManager.instance.emit(Y.MatchDataEvent.MatchStartHint3,{info:r,time:f.TIME_MATCH_3}))}}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},e.prototype.initHintTimer=function(){this.stopHintTimer(),this._mapSignMatchHint=new Map,this._mapAllMatchHint=new Map;var t=A.DataLocalStorage.get([A.DataLocalStorage.addKeyWithNumID(A.LocalStorageKey.MATCH_HINT_START_TIME)]);""==t&&(t="[]");var e=JSON.parse(t);null===e&&(e=[]);for(var n=0;n<e.length;n++){var o=e[n];this.addHint(o.msid,o)}this.startHintTimer()},e.prototype.addHint=function(t,e){this._mapSignMatchHint.set(t,e)},e.prototype.removeHint=function(t){this._mapSignMatchHint.has(t)&&this._mapSignMatchHint.delete(t)},e.prototype.enableHint=function(t){if(this._mapSignMatchHint.has(t)){var e=this._mapSignMatchHint.get(t);e.flag=!0,this._mapSignMatchHint.set(t,e)}},e.prototype.startHintTimer=function(){var t=this;this._coMatchHint&&g.CoroutineManager.instance.stopCo(this._coMatchHint),this._coMatchHint=g.CoroutineManager.instance.loop(1,function(){t.checkHintTime()},this)},e.prototype.stopHintTimer=function(){this._coMatchHint&&g.CoroutineManager.instance.stopCo(this._coMatchHint),this._coMatchHint=null},e.prototype.initAllMatchHint=function(){if(this._matchListData&&this._matchListData.welfareMatchList)for(var t in this._matchListData.welfareMatchList){var e=this._matchListData.welfareMatchList[t],n=this.getMatchData(e.mid,e.msid);if(n.type==p.FIX_TIME&&n.match_state==u.GO_SIGN){var o=0;if("d"==n.begin_rule.time_type)o=86400*w.UtilTime.getDayCount()+3600*n.begin_rule.shour,n.begin_rule.smin&&(o+=60*n.begin_rule.smin);else if("w"==n.begin_rule.time_type){var a=new Date,i=n.begin_rule.sweek-a.getDay();o=86400*w.UtilTime.getDayCount()+86400*i+3600*n.begin_rule.shour,n.begin_rule.smin&&(o+=60*n.begin_rule.smin)}if(o-=w.TIME_ZONE_OFFSET,this._matchListData.welfareMatchList[t].timestamp=o,!this._mapAllMatchHint.has(n.msid)){var r={mid:n.mid,msid:n.msid,stimestamp:o,sname:n.name,appid:n.appid,flag:!1,type:n.type};this._mapAllMatchHint.set(n.msid,r)}n.timestamp=o,this.addMatchData(n.mid,n.msid,n)}}},e.prototype.checkAllMatchHintTime=function(){var t,e,n=Math.floor((new Date).getTime()/1e3);try{for(var o=c(this._mapAllMatchHint.keys()),a=o.next();!a.done;a=o.next()){var i=a.value,r=this._mapAllMatchHint.get(i);r.flag||(null==r.stimestamp||r.stimestamp<n?(r.flag=!0,this._mapAllMatchHint.set(i,r)):r.stimestamp-n==f.TIME_MATCH_3&&(r.flag=!0,this._mapAllMatchHint.set(i,r),y.EventManager.instance.emit(Y.MatchDataEvent.MatchStartHint3,{info:r,time:f.TIME_MATCH_3})))}}catch(s){t={error:s}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},e.prototype.isMatchEnd=function(){return club.client.game.GDMatchStatus.kMatchEnd==this.getCurMatchStatus()},e.prototype.reportSubscribe=function(t,e){this.proxy.reqClientExtraInfo(t,function(t,n){t&&0==n.flag?e&&e(!0):e&&e(!1)})},e.prototype.isInMatch=function(){return r(this,void 0,Promise,function(){var t=this;return s(this,function(){return[2,new Promise(function(e){t.proxy.reqMatchGetSubID(function(n,o){if(n){var a=JSON.parse(o);a&&a.matchSub?t._matchLocation=a.matchSub:t._matchLocation={appid:0}}0==t.getMatchLocationAppID()?e(!1):e(!0)})})]})})},e.prototype.checkSignPlayerMatch=function(){var t,e,n=this.getMatchListByAwardType(l.GOLDEN_EGG);try{for(var o=c(n),a=o.next();!a.done;a=o.next()){var i=a.value;if(u.GO_SIGN==i.match_state&&d.HAD_SIGN==i.sign_state)return i}}catch(r){t={error:r}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return null},e.prototype.checkSignTimeMatch=function(t,e){var n,o;e=e||0;var a=Math.floor((new Date).getTime()/1e3),i=this.getMatchListByAwardType(l.WELFARE);try{for(var r=c(i),s=r.next();!s.done;s=r.next()){var u=s.value;if(u.sign_state==d.HAD_SIGN&&u.timestamp-e>=a&&a>=u.timestamp-t)return u}}catch(p){n={error:p}}finally{try{s&&!s.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}return null},e.prototype.reqGDMatchSelfRank=function(t,e,n,o){this.proxy.reqGDMatchSelfRank(t,n,e,function(t,e){if(t){var n={score:e.score,lose_at:e.lose_at};console.log("ttt.match reqGDMatchSelfRank:",n),o&&o(!0,n)}else o&&o(!1,null)})},o=i([jsClass],e)}(C.BaseModel);n.MatchModel=J,cc.systemEvent.once("GameRoot.inited",function(){M.ModelRoot.instance.add(J)}),cc._RF.pop()},{"../../Framework/Manager/CoroutineManager":"CoroutineManager","../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/Model/BaseModel":"BaseModel","../../Framework/Root/ModelRoot":"ModelRoot","../Base/Data/DataConstant":"DataConstant","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../Base/Data/DataProps":"DataProps","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Network/Base/Processid":"Processid","../Base/Module/Network/SocketUtils":"SocketUtils","../Base/Module/Network/protocol/ClubGameProtocol":"ClubGameProtocol","../Base/Utils/UtilTime":"UtilTime","../Base/Utils/UtilTool":"UtilTool","../Base/View/Common/DialogUI":"DialogUI","../Base/View/UIHelp":"UIHelp","../Game/Common/GameCommonModel":"GameCommonModel","../Game/Common/PlayerInfoModel":"PlayerInfoModel","../Game/GuanDan/GameEvent":"GameEvent","../Game/GuanDan/GameSceneMatchUI":"GameSceneMatchUI","../Game/GuanDan/GameUI":"GameUI","../Hall/HallUI":"HallUI","../MatchShare/MatchShareModel":"MatchShareModel","../MatchShare/MatchShareProxy":"MatchShareProxy","../UserInfo/UserInfoModel":"UserInfoModel","./MatchConstant":"MatchConstant","./MatchHintUI/CountDownUI":"CountDownUI","./MatchHintUI/TimeMatchTopHint":"TimeMatchTopHint","./MatchProxy":"MatchProxy","./MatchUI":"MatchUI"}],MatchProxy:[function(t,e,n){"use strict";cc._RF.push(e,"14cd1U0CJxNf7oBpoVCwea4","MatchProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.MatchProxy=void 0;var r,s=t("../../Framework/Proxy/BaseProxy"),c=t("../../Framework/Root/ProxyRoot"),l=t("../Base/Data/DataBfConfig"),u=t("../Base/Data/DataScript"),d=t("../Base/Module/Network/Base/Processid"),p=t("../Base/Module/Network/Base/ProtocolManager"),h=t("../Base/Module/Network/protocol/AwardProtocol"),_=t("../Base/Module/Network/protocol/ClubGameProtocol"),f=t("../Base/Module/Network/SocketUtils"),m=t("../UserInfo/UserInfoModel");(function(t){t[t.CT_APP=0]="CT_APP",t[t.CT_H5=1]="CT_H5"})(r||(r={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._tempMsg="",e._tempRankMsg="",e}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return c.ProxyRoot.instance.get(n)},enumerable:!1,configurable:!0}),e.prototype.reqGetMatchList=function(t){var e=this;this._tempMsg="";var n=new h.AwardProtocol.ReqAwardInfo({type:u.DataScript.Match.id,gameid:l.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+u.DataScript.Match.func.query+"',channelID="+l.DataBfConfig.ymn.channel+",version='0'")});f.SocketUtils.instance.request(n,function(n){if(0==n.flag){var o=bf33.Utils.bytesToString(n.msg);e._tempMsg=e._tempMsg+o,n.eof&&(t&&t(e._tempMsg),e._tempMsg="")}})},e.prototype.reqGetMatchConfig=function(t,e){var n=new h.AwardProtocol.ReqAwardInfo({type:u.DataScript.Match.id,gameid:l.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+u.DataScript.Match.func.getMatchConfig+"',channelID="+l.DataBfConfig.ymn.channel+",version='0',mid="+t)});f.SocketUtils.instance.request(n,function(t){if(0==t.flag){var n=bf33.Utils.bytesToString(t.msg);e&&e(n)}})},e.prototype.reqUpMatchLogExchange=function(t,e){var n=new h.AwardProtocol.ReqAwardInfo({type:u.DataScript.Match.id,gameid:l.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+u.DataScript.Match.func.reportLog+"',channelID="+l.DataBfConfig.ymn.channel+',version="0",content=\''+t+"'")});f.SocketUtils.instance.request(n,function(t){if(0==t.flag){var n=bf33.Utils.bytesToString(t.msg);console.log("reqUpMatchLogExchange.success:",n),e&&e(!0)}else e&&e(!1),console.error("error.reqUpMatchLogExchange",t.flag)})},e.prototype.reqGetMatchLogExchange=function(t){var e=new h.AwardProtocol.ReqAwardInfo({type:u.DataScript.Match.id,gameid:l.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+u.DataScript.Match.func.getLog+"',channelID="+l.DataBfConfig.ymn.channel+',version="0"')});f.SocketUtils.instance.request(e,function(e){if(0==e.flag){var n=JSON.parse(bf33.Utils.bytesToString(e.msg));t&&t(!0,n.records)}else console.error("error.reqGetMatchLogExchange",e.flag)})},e.prototype.reqGetMatchEndInfo=function(t,e){var n=this;this._tempRankMsg="";var o=new h.AwardProtocol.ReqAwardInfo({type:u.DataScript.Match.id,gameid:l.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+u.DataScript.Match.func.endInfo+"',msid="+t)});f.SocketUtils.instance.request(o,function(t){if(0==t.flag){var o=bf33.Utils.bytesToString(t.msg);n._tempRankMsg=n._tempRankMsg+o,t.eof&&(e&&e(n._tempRankMsg),n._tempRankMsg="")}})},e.prototype.reqGetHeadUrl=function(t,e){var n=new h.AwardProtocol.ReqAwardInfo({type:u.DataScript.Match.id,gameid:l.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+u.DataScript.Match.func.getHead+"',numid="+t)});f.SocketUtils.instance.request(n,function(t){if(0==t.flag){var n=bf33.Utils.bytesToString(t.msg);e&&e(n)}})},e.prototype.reqEnterGDMatch=function(t,e,n){console.log("===>reqEnterMatch:",t,e),p.ProtocolManager.instance.setProcess2Appid(d.Processid.clubGame,t),f.SocketUtils.instance.notify(new _.ClubGameProtocol.ReqEnterGDMatch({clienttype:r.CT_H5,channelid:l.DataBfConfig.ymn.channel,matchsubid:e})),f.SocketUtils.instance.registerOnce(d.Processid.clubGame,club.client.game.MSGID.RESP_ENTER_GDMATCH,this,function(t){console.log("reqEnterGDMatch.resp:",t),0===t.flag?n&&n(!0,t):(p.ProtocolManager.instance.setProcess2Appid(d.Processid.clubGame,0),n&&n(!1,t))})},e.prototype.reqGDMatchInfo=function(t,e,n){f.SocketUtils.instance.notify(new _.ClubGameProtocol.ReqGDMatchInfo({matchid:t,matchsubid:e})),f.SocketUtils.instance.registerOnce(d.Processid.clubGame,club.client.game.MSGID.RESP_GDMATCH_INFO,this,function(t){console.log("reqGDMatchInfo.resp:",t),n&&n(0===t.flag,t)})},e.prototype.reqApplyJoinGDMatch=function(t,e,n,o,a){f.SocketUtils.instance.notify(new _.ClubGameProtocol.ReqApplyJoinGDMatch({matchid:t,matchsubid:e,action:n,signUpType:o})),f.SocketUtils.instance.registerOnce(d.Processid.clubGame,club.client.game.MSGID.RESP_APPLY_JOIN_GDMATCH,this,function(t){console.log("reqApplyJoinGDMatch.resp:",t),a&&a(0===t.flag,t)})},e.prototype.reqCheckInGDMatch=function(t,e,n){f.SocketUtils.instance.notify(new _.ClubGameProtocol.ReqCheckInGDMatch({matchsubid:t,checkin:e})),f.SocketUtils.instance.registerOnce(d.Processid.clubGame,club.client.game.MSGID.RESP_CHECK_IN_GDMATCH,this,function(t){console.log("reqCheckInGDMatch.resp:",t),n&&n(0===t.flag,t)})},e.prototype.reqGDMatchSubstitute=function(t,e){f.SocketUtils.instance.notify(new _.ClubGameProtocol.ReqGDMatchSubstitute({matchsubid:t})),f.SocketUtils.instance.registerOnce(d.Processid.clubGame,club.client.game.MSGID.RESP_GDMATCH_SUBSTITUTE,this,function(t){console.log("reqGDMatchSubstitute.resp:",t),0===t.flag?e&&e(!0):e&&e(!1,t.errmsg)})},e.prototype.reqGiveupGDMatch=function(t,e,n,o){f.SocketUtils.instance.notify(new _.ClubGameProtocol.ReqGiveupGDMatch({matchsubid:t,giveuptype:o}),e),f.SocketUtils.instance.registerOnce(d.Processid.clubGame,club.client.game.MSGID.RESP_GIVEUP_GDMATCH,this,function(t){console.log("reqGiveupGDMatch.resp:",t),0===t.flag?n&&n(!0):n&&n(!1,t.errmsg)})},e.prototype.reqGDMatchTableInfo=function(t,e,n,o){f.SocketUtils.instance.notify(new _.ClubGameProtocol.ReqGDMatchTableInfo({matchsubid:t,round_index:e,table_index:n})),this._callBack=o,f.SocketUtils.instance.register(d.Processid.clubGame,club.client.game.MSGID.RESP_GDMATCH_TABLEINFO,this,this.onRespGDMatchTableInfo)},e.prototype.onRespGDMatchTableInfo=function(t){console.log("ReqGDMatchTableInfo.resp:",t),this._callBack&&this._callBack(0===t.flag,t),1==t.finished&&f.SocketUtils.instance.unregister(d.Processid.clubGame,club.client.game.MSGID.RESP_GDMATCH_TABLEINFO,this,this.onRespGDMatchTableInfo)},e.prototype.reqGDMatchRankInfo=function(t,e,n,o){f.SocketUtils.instance.notify(new _.ClubGameProtocol.ReqGDMatchRankInfo({matchsubid:t,round_index:e,rank_index:n})),this._callBack=o,f.SocketUtils.instance.register(d.Processid.clubGame,club.client.game.MSGID.RESP_GDMATCH_RANKINFO,this,this.onRespGDMatchRankInfo)},e.prototype.onRespGDMatchRankInfo=function(t){console.log("RespGDMatchRankInfo.resp:",t),this._callBack&&this._callBack(0===t.flag,t),1==t.finished&&f.SocketUtils.instance.unregister(d.Processid.clubGame,club.client.game.MSGID.RESP_GDMATCH_TABLEINFO,this,this.onRespGDMatchTableInfo)},e.prototype.reqGDMatchLeave=function(t,e){f.SocketUtils.instance.notify(new _.ClubGameProtocol.ReqLeaveGDMatch({matchsubid:t})),console.log("ttt.reqLeaveGDMatch.resp:",t),f.SocketUtils.instance.registerOnce(d.Processid.clubGame,club.client.game.MSGID.RESP_LEAVE_GDMATCH,this,function(t){console.log("ttt.RespLeaveGDMatch.resp:",t),0===t.flag?(e&&e(!0,t),p.ProtocolManager.instance.setProcess2Appid(d.Processid.clubGame,0)):e&&e(!1,t)})},e.prototype.reqMatchGetSubID=function(t){var e=m.UserInfoModel.instance.userInfo.numID,n=new h.AwardProtocol.ReqAwardInfo({type:u.DataScript.Match.id,gameid:l.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+u.DataScript.Match.func.getMatchSubid+"',numid="+e)});f.SocketUtils.instance.request(n,function(e){if(0==e.flag){var n=bf33.Utils.bytesToString(e.msg);t&&t(!0,n)}else t&&t(!1,"")})},e.prototype.reqClientExtraInfo=function(t,e){f.SocketUtils.instance.notify(new _.ClubGameProtocol.ReqClientExtraInfo({matchsubid:t,openid:m.UserInfoModel.instance.userInfo.openID})),console.log("ttt.ReqClientExtraInfo:",t,m.UserInfoModel.instance.userInfo.openID),f.SocketUtils.instance.registerOnce(d.Processid.clubGame,club.client.game.MSGID.RESP_CLIENT_EXTRA_INFO,this,function(t){console.log("ttt.RespClientExtraInfo.resp:",t),0===t.flag?e&&e(!0,t):e&&e(!1,t)})},e.prototype.reqGDMatchSelfRank=function(t,e,n,o){f.SocketUtils.instance.notify(new _.ClubGameProtocol.ReqGDMatchSelfRank({matchsubid:t,round_index:e}),n),console.log("ttt.ReqGDMatchSelfRank:",t,e,n),f.SocketUtils.instance.registerOnce(d.Processid.clubGame,club.client.game.MSGID.RESP_GDMATCH_SELFRANK,this,function(t){console.log("ttt.RespGDMatchSelfRank:",t),0==t.flag?o&&o(!0,t):o&&o(!1,t)})},n=i([jsClass],e)}(s.BaseProxy);n.MatchProxy=g,cc.systemEvent.once("GameRoot.inited",function(){c.ProxyRoot.instance.add(g)}),cc._RF.pop()},{"../../Framework/Proxy/BaseProxy":"BaseProxy","../../Framework/Root/ProxyRoot":"ProxyRoot","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataScript":"DataScript","../Base/Module/Network/Base/Processid":"Processid","../Base/Module/Network/Base/ProtocolManager":"ProtocolManager","../Base/Module/Network/SocketUtils":"SocketUtils","../Base/Module/Network/protocol/AwardProtocol":"AwardProtocol","../Base/Module/Network/protocol/ClubGameProtocol":"ClubGameProtocol","../UserInfo/UserInfoModel":"UserInfoModel"}],MatchRankUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"c7b3cx/BbRL3JkzwBMCMHi8","MatchRankUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./MatchRankUI_Window"),a=t("./MatchRankUI_MainPanel"),i=t("./MatchRankUI_NormalRankListItem"),r=t("./MatchRankUI_RoundButton"),s=t("./MatchRankUI_FinalRankListItem"),c=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default)},t}();n.default=c,cc._RF.pop()},{"./MatchRankUI_FinalRankListItem":"MatchRankUI_FinalRankListItem","./MatchRankUI_MainPanel":"MatchRankUI_MainPanel","./MatchRankUI_NormalRankListItem":"MatchRankUI_NormalRankListItem","./MatchRankUI_RoundButton":"MatchRankUI_RoundButton","./MatchRankUI_Window":"MatchRankUI_Window"}],MatchRankUI_FinalRankListItem:[function(t,e,n){"use strict";cc._RF.push(e,"de9aflrcQ9MW4WtGIH1U4jU","MatchRankUI_FinalRankListItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchRankUI","FinalRankListItem")},e.prototype.onConstruct=function(){this.m_rank=this.getControllerAt(0),this.m_award=this.getControllerAt(1),this.m_bg=this.getChildAt(0),this.m_imgHead=this.getChildAt(1),this.m_imgRank=this.getChildAt(2),this.m_txtRank=this.getChildAt(4),this.m_txtName=this.getChildAt(5),this.m_txtAward=this.getChildAt(7)},e.URL="ui://teukmd9hm86g34",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchRankUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"99167K9gJtGLY1+SH4yv9Ws","MatchRankUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchRankUI","MainPanel")},e.prototype.onConstruct=function(){this.m_bg=this.getChildAt(0),this.m_window=this.getChildAt(1)},e.URL="ui://teukmd9hce5b1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchRankUI_NormalRankListItem:[function(t,e,n){"use strict";cc._RF.push(e,"4ae19u7G5xEWphSPnBAQOMc","MatchRankUI_NormalRankListItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchRankUI","NormalRankListItem")},e.prototype.onConstruct=function(){this.m_cResult=this.getControllerAt(0),this.m_cState=this.getControllerAt(1),this.m_rank=this.getControllerAt(2),this.m_run=this.getControllerAt(3),this.m_bg=this.getChildAt(0),this.m_imgHead=this.getChildAt(1),this.m_imgRank=this.getChildAt(2),this.m_imgMark=this.getChildAt(3),this.m_txtName=this.getChildAt(5),this.m_txtRank=this.getChildAt(6),this.m_txtScore=this.getChildAt(7)},e.URL="ui://teukmd9hm86g32",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchRankUI_RoundButton:[function(t,e,n){"use strict";cc._RF.push(e,"d9fc1HSldxCLIF6VL3c3c7S","MatchRankUI_RoundButton");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchRankUI","RoundButton")},e.prototype.onConstruct=function(){this.m_bg=this.getChildAt(0),this.m_bg2=this.getChildAt(1)},e.URL="ui://teukmd9hm86g33",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],MatchRankUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"25c1em4cthG+JXfWN1liFQW","MatchRankUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchRankUI","Window")},e.prototype.onConstruct=function(){this.m_state=this.getControllerAt(0),this.m_type=this.getControllerAt(1),this.m_round=this.getControllerAt(2),this.m_bg=this.getChildAt(0),this.m_btnClose=this.getChildAt(1),this.m_listAward=this.getChildAt(3),this.m_txtPlayerRank=this.getChildAt(4),this.m_txtNoRank=this.getChildAt(5),this.m_listRound=this.getChildAt(8),this.m_listRank=this.getChildAt(11)},e.URL="ui://teukmd9hce5b0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchRankUI:[function(t,e,n){"use strict";cc._RF.push(e,"cf547hEhwRKwJuaOETKyGik","MatchRankUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.MatchRankUI=n.RankShowTypeEnum=void 0;var r,s,c,l,u,d,p,h=t("../../Framework/UI/FadeUI"),_=t("../Base/Data/DataConstant"),f=t("../Base/View/UIHelp"),m=t("../UserInfo/UserInfoModel"),g=t("./MatchModel"),y=t("./MatchRankUI/MatchRankUIBinder"),I=t("./MatchUtils");(function(t){t[t.RANK=0]="RANK",t[t.FINAL=1]="FINAL"})(r=n.RankShowTypeEnum||(n.RankShowTypeEnum={})),function(t){t[t.RUNNING=0]="RUNNING",t[t.OVER=1]="OVER"}(s||(s={})),function(t){t[t.WIN=0]="WIN",t[t.LOSE=1]="LOSE",t[t.DRAW=2]="DRAW"}(c||(c={})),function(t){t[t.SHOW=0]="SHOW",t[t.HIDE=1]="HIDE"}(l||(l={})),function(t){t[t.UP=0]="UP",t[t.DOWN=1]="DOWN",t[t.REPLACE=2]="REPLACE"}(u||(u={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(d||(d={})),function(t){t[t.TXT_1=0]="TXT_1",t[t.TXT_N=1]="TXT_N"}(p||(p={}));var C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._matchID=0,e._matchSubID=0,e}return a(e,t),e.uiBind=function(){y.default.bindAll()},Object.defineProperty(e.prototype,"model",{get:function(){return g.MatchModel.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,n){this._matchID=e,this._matchSubID=n,this.initUI(t,e,n),this.initListener()},e.prototype.initUI=function(t,e,n){t==r.FINAL?this.showFinalRank(e,n):t==r.RANK&&this.showTopTable()},e.prototype.initListener=function(){this.view.m_window.m_btnClose.onClick(this.onExitClick,this)},e.prototype.showTopTable=function(){this.view.m_window.m_type.selectedIndex=r.RANK;var t=this.model.getCurRoundIndex(),e=null,n=this.view.m_window.m_listRound;if(n.removeChildren(),t<=1)(a=n.addItemFromPool()).data=1,a.title=this.model.isFinalRound(1)?"\u51b3\u8d5b":"1\u8f6e",a.onClick(this.onTableClick,this),e=a;else for(var o=0;o<t;o++){var a;(a=n.addItemFromPool()).data=o+1,a.title=this.model.isFinalRound(o+1)?"\u51b3\u8d5b":o+1+"\u8f6e",a.onClick(this.onTableClick,this),e=a}e.selected=!0,this.showRankList(e.data)},e.prototype.refreshRankList=function(t){var e=this.model.getMatchRankInfo(t);if(this.model.isCurrentRound(t))this.view.m_window.m_state.selectedIndex=s.RUNNING;else if(e&&e.players&&e.players.length>0){var n=e.players[0];if(null===n.match_result||0==n.match_result)return void(this.view.m_window.m_state.selectedIndex=s.RUNNING);this.view.m_window.m_state.selectedIndex=s.OVER;var o=this.view.m_window.m_listRank;o.itemRenderer=this.initRankItem.bind(this,e.players),o.setVirtual(),o.numItems=e.players.length,o.refreshVirtualList()}else this.view.m_window.m_state.selectedIndex=s.RUNNING;this.view.m_window.m_round.selectedIndex=1==t?p.TXT_1:p.TXT_N},e.prototype.showRankList=function(t){var e=this,n=this.model.getCurMatchID();this.model.reqRankInfo(n.msid,t,-1,function(n){n&&e.refreshRankList(t)})},e.prototype.initRankItem=function(t,e,n){e<4?n.m_rank.selectedIndex=e+1:(n.m_rank.selectedIndex=5,n.m_txtRank.text=e+1+""),n.data=t[e].numid,n.m_imgHead.url=_.DataConstant.MATCH_DEFAULT_HEAD_ICON,this.model.getMatchPlayerInfo(t[e].numid,function(t){n.data==t.numid&&(n.m_imgHead.url=t.headUrl)},this);var o=t[e].nickname;n.m_txtName.text=o;var a=t[e].score;a>0?(n.m_cResult.selectedIndex=c.WIN,n.m_txtScore.text="+"+a):a<0?(n.m_cResult.selectedIndex=c.LOSE,n.m_txtScore.text=a+""):(n.m_cResult.selectedIndex=c.DRAW,n.m_txtScore.text=a+""),t[e].match_result=t[e].match_result||0,t[e].sign_type=t[e].sign_type||0,0==t[e].match_result?n.m_imgMark.visible=!1:1==t[e].match_result?1==t[e].sign_type?n.m_cState.selectedIndex=u.REPLACE:n.m_cState.selectedIndex=u.DOWN:2==t[e].match_result&&(0==t[e].sign_type?n.m_cState.selectedIndex=u.UP:1==t[e].sign_type&&(n.m_cState.selectedIndex=u.REPLACE));var i=t[e].negative_type||0;n.m_run.selectedIndex=i>0?d.SHOW:d.HIDE},e.prototype.onTableClick=function(t){var e=fgui.GObject.cast(t.currentTarget).data;this.showRankList(e)},e.prototype.showFinalRank=function(t,e){var n=this;this.model.reqGetMatchEndInfo(t,e,function(t,e){if(t){n.view.m_window.m_type.selectedIndex=r.FINAL,n.view.m_window.m_txtNoRank.visible=0==e.list.length;for(var o=0,a=!0,i=0;i<e.list.length;i++){var s=e.list[i];if(s.nid==m.UserInfoModel.instance.userInfo.numID){o=i+1,0==s.f&&(a=!1);break}}o=o||e.myRanking,n.view.m_window.m_txtPlayerRank.visible=!1,o>0&&(n.view.m_window.m_txtPlayerRank.text=a?"\u60a8\u672c\u573a\u6bd4\u8d5b\u83b7\u5f97\u7b2c[color=#e46a2e]"+o+"[/color]\u540d":"\u60a8\u672c\u573a\u6bd4\u8d5b\u83b7\u5f97\u7b2c[color=#e46a2e]"+o+"[/color]\u540d\uff0c\u6392\u540d\u5956\u52b1\u5df2\u53d1\u653e",n.view.m_window.m_txtPlayerRank.visible=!0);var c=n.view.m_window.m_listAward;c.removeChildren(),c.setVirtual(),c.itemRenderer=n.initAwardItem.bind(n,e.list),c.numItems=e.list.length,c.refreshVirtualList()}})},e.prototype.initAwardItem=function(t,e,n){if(e<4?n.m_rank.selectedIndex=e+1:(n.m_rank.selectedIndex=5,n.m_txtRank.text=e+1+""),n.data=t[e].nid,n.m_imgHead.url=_.DataConstant.MATCH_DEFAULT_HEAD_ICON,this.model.getMatchPlayerInfo(t[e].nid,function(t){n.data==t.numid&&(n.m_imgHead.url=t.headUrl)},this),n.m_txtName.text=f.UIHelp.formatNicknameL(t[e].nk,12),0==t[e].f){n.m_award.selectedIndex=l.SHOW;var o=this.model.getRankAward(this._matchID,this._matchSubID,e+1);if(!o)return void(n.m_txtAward.visible=!1);for(var a="",i=I.MatchUtils.convertMatchAwards(o),r=0;r<i.length;r++)a=a+i[r].name+" ";n.m_txtAward.text=a}else n.m_award.selectedIndex=l.HIDE},i([jsClass],e)}(h.FadeUI);n.MatchRankUI=C,cc._RF.pop()},{"../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataConstant":"DataConstant","../Base/View/UIHelp":"UIHelp","../UserInfo/UserInfoModel":"UserInfoModel","./MatchModel":"MatchModel","./MatchRankUI/MatchRankUIBinder":"MatchRankUIBinder","./MatchUtils":"MatchUtils"}],MatchRuleUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"1beceAB1UhEEpjDVjcC+kxQ","MatchRuleUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./MatchRuleUI_MainPanel"),a=t("./MatchRuleUI_Window"),i=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default)},t}();n.default=i,cc._RF.pop()},{"./MatchRuleUI_MainPanel":"MatchRuleUI_MainPanel","./MatchRuleUI_Window":"MatchRuleUI_Window"}],MatchRuleUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"afdf3b/KExE+KlZzfveC2v3","MatchRuleUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchRuleUI","MainPanel")},e.prototype.onConstruct=function(){this.m_bg=this.getChildAt(0),this.m_window=this.getChildAt(1)},e.URL="ui://7qgob4jem86g0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchRuleUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"79da3QnGKBLzLagLjE+vTnZ","MatchRuleUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchRuleUI","Window")},e.prototype.onConstruct=function(){this.m_rule=this.getControllerAt(0),this.m_btnClose=this.getChildAt(1)},e.URL="ui://7qgob4jem86g1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchRuleUI:[function(t,e,n){"use strict";cc._RF.push(e,"9d66dn9ifBKUINieqSHOfVq","MatchRuleUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.MatchRuleUI=n.MatchRuleShowTypeEnum=void 0;var r=t("../../Framework/UI/FadeUI"),s=t("./MatchRuleUI/MatchRuleUIBinder");(function(t){t[t.MATCH_RULE=0]="MATCH_RULE",t[t.CREDIT_RULE=1]="CREDIT_RULE"})(n.MatchRuleShowTypeEnum||(n.MatchRuleShowTypeEnum={}));var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){s.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.init=function(t){this.initUI(t),this.initListener()},e.prototype.initUI=function(t){this.view.m_window.m_rule.selectedIndex=t},e.prototype.initListener=function(){this.view.m_window.m_btnClose.onClick(this.onExitClick,this)},i([jsClass],e)}(r.FadeUI);n.MatchRuleUI=c,cc._RF.pop()},{"../../Framework/UI/FadeUI":"FadeUI","./MatchRuleUI/MatchRuleUIBinder":"MatchRuleUIBinder"}],MatchShareAssistUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"f1468aCzvdMOLdVshRJNPRy","MatchShareAssistUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./MatchShareAssistUI_MainPanel"),a=t("./MatchShareAssistUI_Window"),i=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default)},t}();n.default=i,cc._RF.pop()},{"./MatchShareAssistUI_MainPanel":"MatchShareAssistUI_MainPanel","./MatchShareAssistUI_Window":"MatchShareAssistUI_Window"}],MatchShareAssistUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"25fd9z8Q6dNVIkgz6jfBB3i","MatchShareAssistUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareAssistUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://cg2i6opseywb3",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareAssistUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"0f291csJ41ONaN0e82/8qJc","MatchShareAssistUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareAssistUI","Window")},e.prototype.onConstruct=function(){this.m_cType=this.getControllerAt(0),this.m_btnConfirm=this.getChildAt(1),this.m_txtDesc=this.getChildAt(5)},e.URL="ui://cg2i6opseywb4",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareAssistUI:[function(t,e,n){"use strict";cc._RF.push(e,"0825fZNVmVDroxmw8uRliWK","MatchShareAssistUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Framework/Manager/UIManager"),s=t("../../Framework/UI/FadeUI"),c=t("../Activity/Common/ActivityComModel"),l=t("../Base/Module/BfAnalytics/BfasManager"),u=t("../Base/Module/BfAnalytics/DataPointID"),d=t("../Base/View/UIHelp"),p=t("../Match/MatchModel"),h=t("../Match/MatchUI"),_=t("./MatchShareAssistUI/MatchShareAssistUIBinder"),f=t("./MatchShareModel"),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){_.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){this.view.m_Window.m_btnConfirm.onClick(this.onBtnJumpMatch,this)},e.prototype.onBtnJumpMatch=function(){var t=null,e=this.view.m_Window.m_cType.selectedIndex;switch(e){case f.MatchShareAssistResult.SUCCESS:t=u.MatchShareAssistPointID.SUCCESS_CLICK_BTN;break;case f.MatchShareAssistResult.LATE:t=u.MatchShareAssistPointID.LATE_CLICK_BTN;break;case f.MatchShareAssistResult.UP_LIMIT:t=u.MatchShareAssistPointID.UP_LIMIT_CLICK_BTN;break;case f.MatchShareAssistResult.ASSISTED:t=u.MatchShareAssistPointID.ASSISTED_CLICK_BTN}if(t&&l.BfasManager.instance.sendEvt(t,{scene:this._scene}),e!==f.MatchShareAssistResult.OVERDUE&&e!==f.MatchShareAssistResult.SELF){if(c.ActivityComModel.instance.checkInGame(this.onExitClick.bind(this)))return;r.UIManager.instance.isExist(h.MatchUI)||p.MatchModel.instance.openMatchUI({scene:p.EnterMatchSceneEnum.GUIDE})}this.onExitClick()},e.prototype.init=function(t,e,n){this._scene=t,this.view.m_Window.m_cType.selectedIndex=e;var o="",a=null;switch(e){case f.MatchShareAssistResult.SUCCESS:a=u.MatchShareAssistPointID.SHOW_SUCCESS,o="\u5df2\u4e3a[color=#e76a21]{0}[/color]\u52a9\u529b\u6210\u529f".format(d.UIHelp.formatNicknameL(n||""));break;case f.MatchShareAssistResult.LATE:a=u.MatchShareAssistPointID.SHOW_LATE,o="[color=#e76a21]{0}[/color]\u5df2\u88ab\u52a9\u529b\u5566".format(d.UIHelp.formatNicknameL(n||""));break;case f.MatchShareAssistResult.UP_LIMIT:a=u.MatchShareAssistPointID.SHOW_UP_LIMIT,o="\u4eca\u65e5\u52a9\u529b\u5df2\u8fbe\u4e0a\u9650";break;case f.MatchShareAssistResult.ASSISTED:a=u.MatchShareAssistPointID.SHOW_ASSISTED,o="\u5df2\u7ecf\u4e3a[color=#e76a21]{0}[/color]\u52a9\u529b\u8fc7\u5566".format(d.UIHelp.formatNicknameL(n||""));break;case f.MatchShareAssistResult.SELF:a=u.MatchShareAssistPointID.SHOW_SELF_FAIL,o="\u81ea\u5df1\u4e0d\u80fd\u7ed9\u81ea\u5df1\u52a9\u529b\u54e6";break;case f.MatchShareAssistResult.OVERDUE:a=u.MatchShareAssistPointID.SHOW_OVERDUE,o="\u65e0\u6cd5\u52a9\u529b\u54e6\uff0c\u94fe\u63a5\u5df2\u7ecf\u5931\u6548\u5566";break;case f.MatchShareAssistResult.INVITE_NEW_OVERDUE:o="\u9080\u8bf7\u5df2\u8fc7\u671f\uff0c\u8bf7\u8054\u7cfb\u597d\u53cb\u91cd\u65b0\u9080\u8bf7~";break;case f.MatchShareAssistResult.INVITE_NEW_NOT_NEWBIE:o="\u60a8\u975e\u65b0\u7528\u6237\uff0c\u65e0\u6cd5\u52a9\u529b\u597d\u53cb\u83b7\u5f97\u95e8\u7968\u3002"}a&&l.BfasManager.instance.sendEvt(a,{scene:t}),this.view.m_Window.m_txtDesc.text=o},i([jsClass],e)}(s.FadeUI);n.default=m,cc._RF.pop()},{"../../Framework/Manager/UIManager":"UIManager","../../Framework/UI/FadeUI":"FadeUI","../Activity/Common/ActivityComModel":"ActivityComModel","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/View/UIHelp":"UIHelp","../Match/MatchModel":"MatchModel","../Match/MatchUI":"MatchUI","./MatchShareAssistUI/MatchShareAssistUIBinder":"MatchShareAssistUIBinder","./MatchShareModel":"MatchShareModel"}],MatchShareCreditUI:[function(t,e,n){"use strict";cc._RF.push(e,"0313b5GXKlGGJHkVbfq6ehX","MatchShareCreditUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Framework/Manager/EventManager"),s=t("../../Framework/UI/FadeUI"),c=t("../Base/Data/DataEvent"),l=t("../Base/Data/DataSpineAni"),u=t("../Base/Module/BfAnalytics/BfasManager"),d=t("../Base/Module/BfAnalytics/DataPointID"),p=t("../Base/Module/Share/ShareManager"),h=t("../Base/Utils/UtilCC"),_=t("../Base/View/UIHelp"),f=t("../Hall/HallModel"),m=t("./MatchShareModel"),g=t("./MatchShareUI/MatchShareUIBinder"),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){g.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.getPkgName=function(){return"MatchShareUI"},e.getCompName=function(){return cc.js.getClassName(this)+"_MainPanel"},Object.defineProperty(e.prototype,"model",{get:function(){return m.MatchShareModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),this.view.m_Window.m_btnShare.onClick(this.onBtnShareClick,this)},e.prototype.init=function(t){this._matchType=t,this.initAni(),this.updateUI(),this.model.getCreditShareCnt()>0?u.BfasManager.instance.sendEvt(d.MatchCreditSharePointID.SHOW_SHARE):u.BfasManager.instance.sendEvt(d.MatchCreditSharePointID.SHOW_INVITE)},e.prototype.updateUI=function(){var t=this.model.getCreditShareCnt();this.view.m_Window.m_cType.selectedIndex=t>0?0:1,this.view.m_Window.m_txtAward.text="\u4fe1\u8a89\u5206+"+this.model.getCreditAddScore()},e.prototype.initAni=function(){this.view.m_Window.m_spineNode.node.removeAllChildren(),h.UtilCC.instantiatePrefab(l.DataSpineAniPath.ANI_MATCH_SHARE_TITLE,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"duan",!0)},this.view.m_Window.m_spineNode.node)},e.prototype.onBtnShareClick=function(){var t=this;if(0!=this.model.getCreditShareCnt())u.BfasManager.instance.sendEvt(d.MatchCreditSharePointID.SHARE_CLICK_SHARE),p.ShareManager.instance.share(p.ShareType.matchCreditShare,null,function(e,n){if(n||cc.sys.OS_IOS===cc.sys.os){var o=t.model.getCreditAddScore();t.model.reqMatchShareAward(m.MatchShareType.CreditScore,t._matchType,0,0,function(e){e&&(r.EventManager.instance.emit(c.DataEvent.ToastData,"\u5206\u4eab\u6210\u529f\uff0c\u4fe1\u8a89\u5206+"+o),t.onExitClick())})}});else{u.BfasManager.instance.sendEvt(d.MatchCreditSharePointID.INVITE_CLICK_SHARE);var e=f.default.instance.getUserNickName(),n=[_.UIHelp.formatNicknameL(e)];p.ShareManager.instance.share(p.ShareType.matchCreditInvite,{titleArgs:n},function(t,e){(e||cc.sys.OS_IOS===cc.sys.os)&&r.EventManager.instance.emit(c.DataEvent.ToastData,"\u5206\u4eab\u6210\u529f")})}},i([jsClass],e)}(s.FadeUI);n.default=y,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataSpineAni":"DataSpineAni","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Share/ShareManager":"ShareManager","../Base/Utils/UtilCC":"UtilCC","../Base/View/UIHelp":"UIHelp","../Hall/HallModel":"HallModel","./MatchShareModel":"MatchShareModel","./MatchShareUI/MatchShareUIBinder":"MatchShareUIBinder"}],MatchShareFreeTicketUI:[function(t,e,n){"use strict";cc._RF.push(e,"2ca9cnFMIVPiIkjupLXVWz9","MatchShareFreeTicketUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Framework/UI/FadeUI"),s=t("../Base/Data/DataProps"),c=t("../Base/Data/DataSpineAni"),l=t("../Base/Module/BfAnalytics/BfasManager"),u=t("../Base/Module/BfAnalytics/DataPointID"),d=t("../Base/Module/Share/ShareManager"),p=t("../Base/Utils/UtilCC"),h=t("../Match/MatchModel"),_=t("./MatchShareModel"),f=t("./MatchShareUI/MatchShareUIBinder"),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isTween=!1,e}return a(e,t),e.uiBind=function(){f.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.getPkgName=function(){return"MatchShareUI"},e.getCompName=function(){return cc.js.getClassName(this)+"_MainPanel"},Object.defineProperty(e.prototype,"model",{get:function(){return _.MatchShareModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){this.view.m_Window.m_btnSelect.onClick(this.onBtnSelectClick,this),this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),this.view.m_Window.m_btnShare.onClick(this.onBtnShareClick,this)},e.prototype.onBtnSelectClick=function(){this._isTween?this.view.m_Window.m_btnSelect.selected=!this.view.m_Window.m_btnSelect.selected:(this.updateBtnShareTitle(),this.view.m_Window.m_btnSelect.selected?this.playDoubleAward():this.playSingleAward())},e.prototype.onBtnShareClick=function(){var t=this;this.view.m_Window.m_btnSelect.selected?(l.BfasManager.instance.sendEvt(u.MatchTicketSharePointID.FREE_CLICK_SHARE,{scene:this._scene}),d.ShareManager.instance.share(d.ShareType.goldenEggTicketDoubleFree,null,function(e,n){(n||cc.sys.OS_IOS===cc.sys.os)&&t.model.reqMatchShareAward(_.MatchShareType.FreeGot,t._matchType,null,null,function(){t.reqMatchShareAward(_.MatchShareType.InstantShare,!0)})})):(l.BfasManager.instance.sendEvt(u.MatchTicketSharePointID.FREE_CLICK_AWARD,{scene:this._scene}),this.reqMatchShareAward(_.MatchShareType.FreeGot))},e.prototype.reqMatchShareAward=function(t,e){var n=this,o=this.model.getTicketShareAwardCnt(this._matchType);e&&(o*=2);var a=this._matchType===h.MatchTypeEnum.FIX_PLAYER?s.PropIDEnum.TICKET_GOLDEN_EGG:s.PropIDEnum.TICKET_PHONE_FEE,i={props:{}};i.props[a]=o,this.model.reqMatchShareAward(t,this._matchType,null,null,function(t){t&&n.onExitClick()},i,this._success)},e.prototype.init=function(t,e,n){this._matchType=t,this._scene=e,this._success=n,this.view.m_Window.m_cMatchType.selectedIndex=h.MatchTypeEnum.FIX_PLAYER===t?0:1,this._awardItem0_x=this.view.m_Window.m_awardItem0.x,this._awardItem1_x=this.view.m_Window.m_awardItem1.x,this.initAward(),this.initAni(),l.BfasManager.instance.sendEvt(u.MatchTicketSharePointID.SHOW_FREE,{scene:this._scene})},e.prototype.initAni=function(){this.view.m_Window.m_spineNode.node.removeAllChildren(),p.UtilCC.instantiatePrefab(c.DataSpineAniPath.ANI_MATCH_SHARE_TITLE,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"chang",!0)},this.view.m_Window.m_spineNode.node)},e.prototype.initAward=function(){var t=this.model.getTicketShareAwardCnt(this._matchType),e=this._matchType===h.MatchTypeEnum.FIX_PLAYER?s.PropIDEnum.TICKET_GOLDEN_EGG:s.PropIDEnum.TICKET_PHONE_FEE,n=s.DataProps.instance.getPropName(e)||"\u53c2\u8d5b\u5238";this.view.m_Window.m_awardItem0.title=n+"x"+t,this.view.m_Window.m_awardItem1.title=n+"x"+t},e.prototype.updateBtnShareTitle=function(){this.view.m_Window.m_btnShare.title=this.view.m_Window.m_btnSelect.selected?"\u7acb\u5373\u5206\u4eab":"\u7acb\u5373\u9886\u53d6"},e.prototype.playSingleAward=function(){var t=this;this._isTween=!0,cc.tween(this.view.m_Window.m_imgAdd).to(.1,{scaleX:1.01,scaleY:1.01}).to(.167,{scaleX:0,scaleY:0}).start(),cc.tween(this.view.m_Window.m_awardItem0).to(.1,{scaleX:.75,scaleY:.75},{easing:"sineOut"}).to(.167,{x:521,scaleX:.7,scaleY:.7},{easing:"sineIn"}).to(.1,{scaleX:1.02,scaleY:1.02},{easing:"sineOut"}).to(.3,{scaleX:1,scaleY:1},{easing:"sineIn"}).call(function(){t._isTween=!1}).start(),cc.tween(this.view.m_Window.m_awardItem1).to(.1,{scaleX:.75,scaleY:.75},{easing:"sineOut"}).to(.167,{x:521,scaleX:.7,scaleY:.7},{easing:"sineIn"}).call(function(){t.view.m_Window.m_awardItem1.visible=!1}).start()},e.prototype.playDoubleAward=function(){var t=this;this._isTween=!0,cc.tween(this.view.m_Window.m_imgAdd).delay(.4).to(.167,{scaleX:1.01,scaleY:1.01}).to(.1,{scaleX:1,scaleY:1}).start(),cc.tween(this.view.m_Window.m_awardItem0).to(.3,{scaleX:.7,scaleY:.7},{easing:"sineIn"}).to(.167,{x:this._awardItem0_x,scaleX:.75,scaleY:.75},{easing:"sineIn"}).to(.1,{scaleX:.8,scaleY:.8},{easing:"sineOut"}).start(),cc.tween(this.view.m_Window.m_awardItem1).delay(.3).call(function(){t.view.m_Window.m_awardItem1.visible=!0}).to(.167,{x:this._awardItem1_x,scaleX:.75,scaleY:.75},{easing:"sineIn"}).to(.1,{scaleX:.8,scaleY:.8},{easing:"sineOut"}).call(function(){t._isTween=!1}).start()},e.prototype.onDestroy=function(){this.stopTweenTargets(),t.prototype.onDestroy.call(this)},e.prototype.stopTweenTargets=function(){cc.Tween.stopAllByTarget(this.view.m_Window.m_awardItem0),cc.Tween.stopAllByTarget(this.view.m_Window.m_awardItem1),cc.Tween.stopAllByTarget(this.view.m_Window.m_imgAdd)},i([jsClass],e)}(r.FadeUI);n.default=m,cc._RF.pop()},{"../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataProps":"DataProps","../Base/Data/DataSpineAni":"DataSpineAni","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Share/ShareManager":"ShareManager","../Base/Utils/UtilCC":"UtilCC","../Match/MatchModel":"MatchModel","./MatchShareModel":"MatchShareModel","./MatchShareUI/MatchShareUIBinder":"MatchShareUIBinder"}],MatchShareGoldenEggUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"5ad4123nktDEbChjm3Ffuf8","MatchShareGoldenEggUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./MatchShareGoldenEggUI_MainPanel"),a=t("./MatchShareGoldenEggUI_Window"),i=t("./MatchShareGoldenEggUI_InviteItem"),r=t("./MatchShareGoldenEggUI_Btn"),s=t("./MatchShareGoldenEggUI_BtnAdd"),c=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default)},t}();n.default=c,cc._RF.pop()},{"./MatchShareGoldenEggUI_Btn":"MatchShareGoldenEggUI_Btn","./MatchShareGoldenEggUI_BtnAdd":"MatchShareGoldenEggUI_BtnAdd","./MatchShareGoldenEggUI_InviteItem":"MatchShareGoldenEggUI_InviteItem","./MatchShareGoldenEggUI_MainPanel":"MatchShareGoldenEggUI_MainPanel","./MatchShareGoldenEggUI_Window":"MatchShareGoldenEggUI_Window"}],MatchShareGoldenEggUI_BtnAdd:[function(t,e,n){"use strict";cc._RF.push(e,"a2446s4heFN74BWw7aAtclJ","MatchShareGoldenEggUI_BtnAdd");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareGoldenEggUI","BtnAdd")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(0)},e.URL="ui://ctktosa0za7hp",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],MatchShareGoldenEggUI_Btn:[function(t,e,n){"use strict";cc._RF.push(e,"9b696qMnEdLrZnoxZOwqYa/","MatchShareGoldenEggUI_Btn");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareGoldenEggUI","Btn")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(0)},e.URL="ui://ctktosa0jt5rl",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],MatchShareGoldenEggUI_InviteItem:[function(t,e,n){"use strict";cc._RF.push(e,"47ddabuj49PiIrl1GejWMVc","MatchShareGoldenEggUI_InviteItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareGoldenEggUI","InviteItem")},e.prototype.onConstruct=function(){this.m_Avatar=this.getChildAt(0),this.m_btnInvite=this.getChildAt(1)},e.URL="ui://ctktosa0jt5rf",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareGoldenEggUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"28133vq9XZJTa/aR6oR4QrY","MatchShareGoldenEggUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareGoldenEggUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://ctktosa0eywb3",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareGoldenEggUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"940b8oYnxxHda1YBpQ/CiXc","MatchShareGoldenEggUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareGoldenEggUI","Window")},e.prototype.onConstruct=function(){this.m_cType=this.getControllerAt(0),this.m_txtTitleCount=this.getChildAt(2),this.m_btnRule=this.getChildAt(4),this.m_Btn=this.getChildAt(5),this.m_InviteItem0=this.getChildAt(6),this.m_InviteItem1=this.getChildAt(7),this.m_InviteItem2=this.getChildAt(8),this.m_btnClose=this.getChildAt(9),this.m_txtInvite0=this.getChildAt(10),this.m_txtInvite1=this.getChildAt(11),this.m_txtInvite2=this.getChildAt(12),this.m_txtCount=this.getChildAt(13)},e.URL="ui://ctktosa0eywb4",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareGoldenEggUI:[function(t,e,n){"use strict";cc._RF.push(e,"2f9f9/njydIRo1EK3wYelVO","MatchShareGoldenEggUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Framework/Manager/EventManager"),s=t("../../Framework/Manager/UIManager"),c=t("../../Framework/UI/FadeUI"),l=t("../Base/Data/DataEvent"),u=t("../Base/Data/DataSpineAni"),d=t("../Base/Module/BfAnalytics/BfasManager"),p=t("../Base/Module/BfAnalytics/DataPointID"),h=t("../Base/Module/Share/ShareManager"),_=t("../Base/Utils/UtilCC"),f=t("../Base/Utils/UtilTool"),m=t("../Base/View/UIHelp"),g=t("../Hall/HallModel"),y=t("../Rule/ActivityActRuleUI"),I=t("./MatchShareGoldenEggUI/MatchShareGoldenEggUIBinder"),C=t("./MatchShareModel"),M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){I.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return C.MatchShareModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initUI(),d.BfasManager.instance.sendEvt(p.MatchGoldenEggPointID.SHOW)},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),this.view.m_Window.m_InviteItem0.m_btnInvite.onClick(this.onBtnInviteClick,this),this.view.m_Window.m_InviteItem1.m_btnInvite.onClick(this.onBtnInviteClick,this),this.view.m_Window.m_InviteItem2.m_btnInvite.onClick(this.onBtnInviteClick,this),this.view.m_Window.m_Btn.onClick(this.onBtnClick,this),this.view.m_Window.m_btnRule.onClick(this.onBtnRuleClick,this)},e.prototype.onBtnClick=function(){0===this.view.m_Window.m_cType.selectedIndex?this.onBtnInviteClick():this.onBtnAwardClick()},e.prototype.onBtnInviteClick=function(){d.BfasManager.instance.sendEvt(p.MatchGoldenEggPointID.CLICK_INVITE);var t=g.default.instance.getUserNickName(),e=[m.UIHelp.formatNicknameL(t)];h.ShareManager.instance.share(h.ShareType.goldenEggInvite,{titleArgs:e},function(t,e){(e||cc.sys.OS_IOS===cc.sys.os)&&r.EventManager.instance.emit(l.DataEvent.ToastData,"\u5206\u4eab\u6210\u529f")})},e.prototype.onBtnRuleClick=function(){var t=this;d.BfasManager.instance.sendEvt(p.MatchGoldenEggPointID.CLICK_RULE),s.UIManager.instance.open(y.ActivityActRuleUI).then(function(e){e.init(["ui://"+cc.js.getClassName(t)+"/imgRule"])})},e.prototype.onBtnAwardClick=function(){var t=this;d.BfasManager.instance.sendEvt(p.MatchGoldenEggPointID.CLICK_AWARD),this.model.reqGoldenEggAward(function(){t.onExitClick()})},e.prototype.initUI=function(){this.initInvitees(),this.initBtnAni()},e.prototype.initInvitees=function(){for(var t=this.model.getGoldenEggInvitees(),e=0;e<t.length;e++)if(o=this.view.m_Window["m_InviteItem"+e]){o.m_btnInvite.visible=!1,o.m_Avatar.visible=!0;var n=t[e][2]&&t[e][2].replace(/[\/]/g,"/");o.m_Avatar.icon=f.UtilTool.getHead(n,parseInt(t[e][1]||"0")),this.view.m_Window["m_txtInvite"+e].text=m.UIHelp.formatNicknameS(t[e][0])}for(;e<3;e++){var o;(o=this.view.m_Window["m_InviteItem"+e])&&this.addInviteIconAni(o.m_btnInvite.m_spineNode.node)}this.view.m_Window.m_cType.selectedIndex=this.model.isGoldenEggAward()?1:0},e.prototype.addInviteIconAni=function(t){t.removeAllChildren(),_.UtilCC.instantiatePrefab(u.DataSpineAniPath.ANI_GOLDENEGG_INVITE,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"yaoqing",!0)},t)},e.prototype.initBtnAni=function(){this.view.m_Window.m_Btn.m_spineNode.node.removeAllChildren(),_.UtilCC.instantiatePrefab(u.DataSpineAniPath.ANI_GOLDENEGG_BTN,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"ljyaoqing",!0)},this.view.m_Window.m_Btn.m_spineNode.node)},i([jsClass],e)}(c.FadeUI);n.default=M,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataSpineAni":"DataSpineAni","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Share/ShareManager":"ShareManager","../Base/Utils/UtilCC":"UtilCC","../Base/Utils/UtilTool":"UtilTool","../Base/View/UIHelp":"UIHelp","../Hall/HallModel":"HallModel","../Rule/ActivityActRuleUI":"ActivityActRuleUI","./MatchShareGoldenEggUI/MatchShareGoldenEggUIBinder":"MatchShareGoldenEggUIBinder","./MatchShareModel":"MatchShareModel"}],MatchShareHighRankUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"10be4AlBH1HL465xwPqVWCs","MatchShareHighRankUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./MatchShareHighRankUI_MainPanel"),a=t("./MatchShareHighRankUI_Window"),i=t("./MatchShareHighRankUI_AwardItem"),r=t("./MatchShareHighRankUI_ExtraTip"),s=t("./MatchShareHighRankUI_Awards"),c=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default)},t}();n.default=c,cc._RF.pop()},{"./MatchShareHighRankUI_AwardItem":"MatchShareHighRankUI_AwardItem","./MatchShareHighRankUI_Awards":"MatchShareHighRankUI_Awards","./MatchShareHighRankUI_ExtraTip":"MatchShareHighRankUI_ExtraTip","./MatchShareHighRankUI_MainPanel":"MatchShareHighRankUI_MainPanel","./MatchShareHighRankUI_Window":"MatchShareHighRankUI_Window"}],MatchShareHighRankUI_AwardItem:[function(t,e,n){"use strict";cc._RF.push(e,"a4598NFJZFOA4qx96vj+agE","MatchShareHighRankUI_AwardItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareHighRankUI","AwardItem")},e.prototype.onConstruct=function(){this.m_awardIcon=this.getChildAt(1),this.m_txtCount=this.getChildAt(2),this.m_txtName=this.getChildAt(3),this.m_spineNode=this.getChildAt(4),this.m_Show=this.getTransitionAt(0)},e.URL="ui://cf42z79zeywbg",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareHighRankUI_Awards:[function(t,e,n){"use strict";cc._RF.push(e,"d7f0092AZBJToEuI5NKnz/h","MatchShareHighRankUI_Awards");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareHighRankUI","Awards")},e.prototype.onConstruct=function(){this.m_Award0=this.getChildAt(0),this.m_Award1=this.getChildAt(1),this.m_Award2=this.getChildAt(2),this.m_Show=this.getTransitionAt(0)},e.URL="ui://cf42z79zmvqcn",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareHighRankUI_ExtraTip:[function(t,e,n){"use strict";cc._RF.push(e,"b5984YGltNNxpugww1IaOVA","MatchShareHighRankUI_ExtraTip");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareHighRankUI","ExtraTip")},e.prototype.onConstruct=function(){this.m_txtExtra=this.getChildAt(1)},e.URL="ui://cf42z79zeywbh",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareHighRankUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"7db18+ofZtLhJQMVdM5NgN6","MatchShareHighRankUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareHighRankUI","MainPanel")},e.prototype.onConstruct=function(){this.m_bg=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://cf42z79zeywb3",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareHighRankUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"795ebpyzzhJzb15XntskCmp","MatchShareHighRankUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareHighRankUI","Window")},e.prototype.onConstruct=function(){this.m_cRank=this.getControllerAt(0),this.m_cAgain=this.getControllerAt(1),this.m_spineNode=this.getChildAt(0),this.m_bgCountDown=this.getChildAt(2),this.m_rank=this.getChildAt(3),this.m_Awards=this.getChildAt(4),this.m_txtMatchName=this.getChildAt(6),this.m_btnClose=this.getChildAt(8),this.m_btnShare=this.getChildAt(9),this.m_btnAgin=this.getChildAt(10),this.m_extraTip=this.getChildAt(11),this.m_spineNodeUp=this.getChildAt(12),this.m_FadeIn=this.getTransitionAt(0)},e.URL="ui://cf42z79zeywb4",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareHighRankUI:[function(t,e,n){"use strict";cc._RF.push(e,"c3ab8/9P8BGkJ+Dk5Bti5vz","MatchShareHighRankUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Framework/Manager/CoroutineManager"),s=t("../../Framework/Manager/EventManager"),c=t("../../Framework/UI/FadeUI"),l=t("../Base/Data/DataConstant"),u=t("../Base/Data/DataEvent"),d=t("../Base/Data/DataProps"),p=t("../Base/Data/DataSpineAni"),h=t("../Base/Data/DatazOrder"),_=t("../Base/Module/BfAnalytics/BfasManager"),f=t("../Base/Module/BfAnalytics/DataPointID"),m=t("../Base/Module/Share/ShareManager"),g=t("../Base/Utils/UtilCC"),y=t("../Base/Utils/UtilView"),I=t("../Base/View/UIHelp"),C=t("../Match/MatchModel"),M=t("./MatchShareHighRankUI/MatchShareHighRankUIBinder"),v=t("./MatchShareModel"),E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._extraAwards={},e}return a(e,t),e.uiBind=function(){M.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sortingOrder",{get:function(){return h.DataZOrder.MatchShareRank},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return v.MatchShareModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initAni()},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),this.view.m_Window.m_btnShare.onClick(this.onBtnShareClick,this),this.view.m_Window.m_btnAgin.onClick(this.onBtnAgainClick,this)},e.prototype.onBtnShareClick=function(){var t=this;_.BfasManager.instance.sendEvt(f.MatchRankSharePointID.CLICK_SHARE,{rank:this._rank,matchType:this._matchType,shareCnt:this.model.getMatchShareCntByType(this._matchType,v.MatchShareType.GotRank)});var e=C.MatchTypeEnum.FIX_PLAYER===this._matchType?m.ShareType.goldenEggRankShare:m.ShareType.welfareRankShare;m.ShareManager.instance.share(e,{titleArgs:[this._rank],extData:this.model.getMatchIDExtData(this._matchID,this._matchSubID)},function(e,n){(n||cc.sys.OS_IOS===cc.sys.os)&&(t.view.m_Window.m_extraTip.visible?t.model.reqMatchShareAward(v.MatchShareType.GotRank,t._matchType,t._matchID,t._matchSubID,function(e){e&&t.onExitClick()},t._extraAwards):s.EventManager.instance.emit(u.DataEvent.ToastData,"\u5206\u4eab\u6210\u529f"))})},e.prototype.onBtnAgainClick=function(){_.BfasManager.instance.sendEvt(f.MatchShareRankAgainPointID.CLICK,{matchType:this._matchType,rank:this._rank}),this.onExitClick();var t=C.MatchModel.instance.getMatchListByAwardType(C.MatchAwardTypeEnum.GOLDEN_EGG),e=null==t?void 0:t.find(function(t){return t.match_state==C.MatchStateEnum.GO_SIGN});C.MatchModel.instance.openMatchUI({scene:e?C.EnterMatchSceneEnum.ENROLL:C.EnterMatchSceneEnum.FIX_PLAYER,matchID:null==e?void 0:e.mid,matchSubID:null==e?void 0:e.msid})},e.prototype.init=function(t,e,n,o,a,i){this._matchType=t,this._rank=e,this._matchID=o||0,this._matchSubID=a||0,this.view.m_Window.m_txtMatchName.text="\u606d\u559c\u60a8\u5728[color=#FFFF92]{0}[/color]\u4e2d\u83b7\u5f97".format(n),this.view.m_Window.m_cRank.selectedIndex=Math.clamp(e,1,4)-1;var r=new Date(Date.now()).getHours();this.view.m_Window.m_cAgain.selectedIndex=t==C.MatchTypeEnum.FIX_PLAYER&&r>=10&&r<23?1:0,1==this.view.m_Window.m_cAgain.selectedIndex&&_.BfasManager.instance.sendEvt(f.MatchShareRankAgainPointID.SHOW,{matchType:this._matchType,rank:this._rank}),this.adaptFullScreen(),this.initAward(i),_.BfasManager.instance.sendEvt(f.MatchRankSharePointID.SHOW,{rank:this._rank,matchType:this._matchType})},e.prototype.adaptFullScreen=function(){if(y.UtilView.isFullScreen()){var t=l.DataConstant.ADAPTER_WIDTH_VALUE+36;this.view.m_Window.m_btnClose.x+=t,this.view.m_Window.m_rank.x+=t}},e.prototype.initAward=function(t){var e=0;if(t)for(var n in t){var o=d.DataProps.instance.getPropConfig(n,t[n]);o&&(this.view.m_Window.m_Awards["m_Award"+e].m_txtName.text=o.name,this.view.m_Window.m_Awards["m_Award"+e].m_txtCount.text="x"+o.count,this.view.m_Window.m_Awards["m_Award"+e].m_awardIcon.url=I.UIHelp.getPropIcon(o.type,o.res),++e)}for(;e<3;e++)this.view.m_Window.m_Awards["m_Award"+e].visible=!1;this.initExtraAwardTip(t)},e.prototype.initExtraAwardTip=function(t){if(0!==this.model.getMatchShareCntByType(this._matchType,v.MatchShareType.GotRank)){var e=this.model.getRankAddConfig(this._matchType,this._rank);if(0!==e.awardCount)if(t){var n="",o=this.getCurrencyAward(t);if(""==o){var a=d.DataProps.instance.getPropConfig(d.PropIDEnum.EXCHANGE_GOLDEN_EGG,e.awardCount);n=e.awardCount+((null==a?void 0:a.name)||"\u91d1\u86cb"),this._extraAwards.props={},this._extraAwards.props[d.PropIDEnum.EXCHANGE_GOLDEN_EGG]=e.awardCount}else{a=d.DataProps.instance.getPropConfig(o,t[o]);var i=Math.ceil(1==e.awardType?e.awardCount:a.count*e.awardCount/100);n=i+a.name,a.type===d.PropTypeEnum.GOLD&&(this._extraAwards.asr=i),a.type===d.PropTypeEnum.DIAMOND&&(this._extraAwards.yb=i),a.id===d.PropIDEnum.EXCHANGE_GOLDEN_EGG&&(this._extraAwards.props={},this._extraAwards.props[d.PropIDEnum.EXCHANGE_GOLDEN_EGG]=i)}this.view.m_Window.m_extraTip.visible=""!=n,this.view.m_Window.m_extraTip.m_txtExtra.text="\u5206\u4eab\u989d\u5916\u52a0"+n}else this.view.m_Window.m_extraTip.visible=!1;else this.view.m_Window.m_extraTip.visible=!1}else this.view.m_Window.m_extraTip.visible=!1},e.prototype.getCurrencyAward=function(t){return t[d.PropIDEnum.EXCHANGE_GOLDEN_EGG]?d.PropIDEnum.EXCHANGE_GOLDEN_EGG:t.yb?"yb":t.sr?"sr":""},e.prototype.initAni=function(){var t=this;this.view.m_Window.m_spineNode.node.removeAllChildren(),g.UtilCC.instantiatePrefab(p.DataSpineAniPath.ANI_MATCH_SHARE_HIGH_RANK_BG,function(t){var e=t.getComponent(sp.Skeleton);e.setCompleteListener(function(t){"jm_bisai"===(t.animation?t.animation.name:"")&&e.setAnimation(0,"loop",!0)}),e.setAnimation(0,"jm_bisai",!1)},this.view.m_Window.m_spineNode.node),this.view.m_Window.m_spineNodeUp.node.removeAllChildren(),r.CoroutineManager.instance.once(.333,function(){g.UtilCC.instantiatePrefab(p.DataSpineAniPath.ANI_MATCH_SHARE_HIGH_RANK_UP,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"jb_shang_loop",!0)},t.view.m_Window.m_spineNodeUp.node)},this),this.view.m_Window.m_Awards.m_Award0.m_spineNode.node.removeAllChildren(),r.CoroutineManager.instance.once(.1667,function(){g.UtilCC.instantiatePrefab(p.DataSpineAniPath.ANI_MATCH_SHARE_HIGH_RANK_AWARD,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"jiangpin_icon",!1)},t.view.m_Window.m_Awards.m_Award0.m_spineNode.node)},this),this.view.m_Window.m_Awards.m_Award1.m_spineNode.node.removeAllChildren(),r.CoroutineManager.instance.once(.375,function(){g.UtilCC.instantiatePrefab(p.DataSpineAniPath.ANI_MATCH_SHARE_HIGH_RANK_AWARD,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"jiangpin_icon",!1)},t.view.m_Window.m_Awards.m_Award1.m_spineNode.node)},this),this.view.m_Window.m_Awards.m_Award2.m_spineNode.node.removeAllChildren(),r.CoroutineManager.instance.once(.583,function(){g.UtilCC.instantiatePrefab(p.DataSpineAniPath.ANI_MATCH_SHARE_HIGH_RANK_AWARD,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"jiangpin_icon",!1)},t.view.m_Window.m_Awards.m_Award2.m_spineNode.node)},this)},i([jsClass],e)}(c.FadeUI);n.default=E,cc._RF.pop()},{"../../Framework/Manager/CoroutineManager":"CoroutineManager","../../Framework/Manager/EventManager":"EventManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataConstant":"DataConstant","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataProps":"DataProps","../Base/Data/DataSpineAni":"DataSpineAni","../Base/Data/DatazOrder":"DatazOrder","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Share/ShareManager":"ShareManager","../Base/Utils/UtilCC":"UtilCC","../Base/Utils/UtilView":"UtilView","../Base/View/UIHelp":"UIHelp","../Match/MatchModel":"MatchModel","./MatchShareHighRankUI/MatchShareHighRankUIBinder":"MatchShareHighRankUIBinder","./MatchShareModel":"MatchShareModel"}],MatchShareLowRankUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"03651vjKEZMK7XnBd2uJSBR","MatchShareLowRankUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./MatchShareLowRankUI_AwardItem"),a=t("./MatchShareLowRankUI_MainPanel"),i=t("./MatchShareLowRankUI_Window"),r=t("./MatchShareLowRankUI_ExtraTip"),s=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default)},t}();n.default=s,cc._RF.pop()},{"./MatchShareLowRankUI_AwardItem":"MatchShareLowRankUI_AwardItem","./MatchShareLowRankUI_ExtraTip":"MatchShareLowRankUI_ExtraTip","./MatchShareLowRankUI_MainPanel":"MatchShareLowRankUI_MainPanel","./MatchShareLowRankUI_Window":"MatchShareLowRankUI_Window"}],MatchShareLowRankUI_AwardItem:[function(t,e,n){"use strict";cc._RF.push(e,"20f90+z//pDBazmqJxDCwZM","MatchShareLowRankUI_AwardItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareLowRankUI","AwardItem")},e.prototype.onConstruct=function(){this.m_awardIcon=this.getChildAt(1),this.m_txtCount=this.getChildAt(2),this.m_txtName=this.getChildAt(3)},e.URL="ui://cs53tfrdeywb1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareLowRankUI_ExtraTip:[function(t,e,n){"use strict";cc._RF.push(e,"22a82Ro4sRNJ49/3n4ChHMd","MatchShareLowRankUI_ExtraTip");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareLowRankUI","ExtraTip")},e.prototype.onConstruct=function(){this.m_cDirector=this.getControllerAt(0),this.m_txtExtra=this.getChildAt(1)},e.URL="ui://cs53tfrdeywbq",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareLowRankUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"1908bh1pfJMd6w2DdATRtVO","MatchShareLowRankUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareLowRankUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://cs53tfrdeywb3",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareLowRankUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"c82f2yYVJRKKZQhe0mFXk5q","MatchShareLowRankUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareLowRankUI","Window")},e.prototype.onConstruct=function(){this.m_cAgain=this.getControllerAt(0),this.m_cAward=this.getControllerAt(1),this.m_btnClose=this.getChildAt(1),this.m_txtRank=this.getChildAt(4),this.m_Award0=this.getChildAt(5),this.m_Award1=this.getChildAt(6),this.m_Award2=this.getChildAt(7),this.m_btnShare=this.getChildAt(9),this.m_btnAgin=this.getChildAt(10),this.m_extraTip=this.getChildAt(11),this.m_txtMatchName=this.getChildAt(12)},e.URL="ui://cs53tfrdeywb4",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareLowRankUI:[function(t,e,n){"use strict";cc._RF.push(e,"84717e0ROpLrZnmVuj8PVt2","MatchShareLowRankUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Framework/Manager/EventManager"),s=t("../../Framework/UI/FadeUI"),c=t("../Base/Data/DataEvent"),l=t("../Base/Data/DataProps"),u=t("../Base/Data/DatazOrder"),d=t("../Base/Module/BfAnalytics/BfasManager"),p=t("../Base/Module/BfAnalytics/DataPointID"),h=t("../Base/Module/Share/ShareManager"),_=t("../Base/View/UIHelp"),f=t("../Match/MatchModel"),m=t("./MatchShareLowRankUI/MatchShareLowRankUIBinder"),g=t("./MatchShareModel"),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._extraAwards={},e}return a(e,t),e.uiBind=function(){m.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sortingOrder",{get:function(){return u.DataZOrder.MatchShareRank},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return g.MatchShareModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),this.view.m_Window.m_btnShare.onClick(this.onBtnShareClick,this),this.view.m_Window.m_btnAgin.onClick(this.onBtnAgainClick,this)},e.prototype.onBtnShareClick=function(){var t=this;d.BfasManager.instance.sendEvt(p.MatchRankSharePointID.CLICK_SHARE,{rank:this._rank,matchType:this._matchType,shareCnt:this.model.getMatchShareCntByType(this._matchType,g.MatchShareType.GotRank)});var e=f.MatchTypeEnum.FIX_PLAYER===this._matchType?h.ShareType.goldenEggRankShare:h.ShareType.welfareRankShare,n=this.model.getMatchIDExtData(this._matchID,this._matchSubID);h.ShareManager.instance.share(e,{titleArgs:[this._rank],extData:n},function(e,n){(n||cc.sys.OS_IOS===cc.sys.os)&&(t.view.m_Window.m_extraTip.visible?t.model.reqMatchShareAward(g.MatchShareType.GotRank,t._matchType,t._matchID,t._matchSubID,function(e){e&&t.onExitClick()},t._extraAwards):r.EventManager.instance.emit(c.DataEvent.ToastData,"\u5206\u4eab\u6210\u529f"))})},e.prototype.onBtnAgainClick=function(){d.BfasManager.instance.sendEvt(p.MatchShareRankAgainPointID.CLICK,{matchType:this._matchType,rank:this._rank}),this.onExitClick();var t=f.MatchModel.instance.getMatchListByAwardType(f.MatchAwardTypeEnum.GOLDEN_EGG),e=null==t?void 0:t.find(function(t){return t.match_state==f.MatchStateEnum.GO_SIGN});f.MatchModel.instance.openMatchUI({scene:e?f.EnterMatchSceneEnum.ENROLL:f.EnterMatchSceneEnum.FIX_PLAYER,matchID:null==e?void 0:e.mid,matchSubID:null==e?void 0:e.msid})},e.prototype.init=function(t,e,n,o,a,i){this._matchType=t,this._rank=e,this._matchID=o||0,this._matchSubID=a||0,this.view.m_Window.m_txtMatchName.text="\u606d\u559c\u60a8\u5728[color=#E66D27]{0}[/color]\u4e2d\u83b7\u5f97".format(n),this.view.m_Window.m_txtRank.text=e.toString();var r=new Date(Date.now()).getHours();this.view.m_Window.m_cAgain.selectedIndex=t==f.MatchTypeEnum.FIX_PLAYER&&r>=10&&r<23?1:0,1==this.view.m_Window.m_cAgain.selectedIndex&&d.BfasManager.instance.sendEvt(p.MatchShareRankAgainPointID.SHOW,{matchType:this._matchType,rank:this._rank}),this.initAward(i),d.BfasManager.instance.sendEvt(p.MatchRankSharePointID.SHOW,{rank:this._rank,matchType:this._matchType})},e.prototype.initAward=function(t){var e=0;if(t)for(var n in t){var o=l.DataProps.instance.getPropConfig(n,t[n]);o&&(this.view.m_Window["m_Award"+e].m_txtName.text=o.name,this.view.m_Window["m_Award"+e].m_txtCount.text="x"+o.count,this.view.m_Window["m_Award"+e].m_awardIcon.url=_.UIHelp.getPropIcon(o.type,o.res),++e)}for(;e<3;e++)this.view.m_Window["m_Award"+e].visible=!1;this.view.m_Window.m_cAward.selectedIndex=t?1:0,this.initExtraAwardTip(t)},e.prototype.initExtraAwardTip=function(t){if(0!==this.model.getMatchShareCntByType(this._matchType,g.MatchShareType.GotRank)){var e=this.model.getRankAddConfig(this._matchType,this._rank);if(0!==e.awardCount)if(t){var n="",o=this.getCurrencyAward(t);if(""==o){var a=l.DataProps.instance.getPropConfig(l.PropIDEnum.EXCHANGE_GOLDEN_EGG,e.awardCount);n=e.awardCount+((null==a?void 0:a.name)||"\u91d1\u86cb"),this._extraAwards.props={},this._extraAwards.props[l.PropIDEnum.EXCHANGE_GOLDEN_EGG]=e.awardCount}else{a=l.DataProps.instance.getPropConfig(o,t[o]);var i=Math.ceil(1==e.awardType?e.awardCount:a.count*e.awardCount/100);n=i+a.name,a.type===l.PropTypeEnum.GOLD&&(this._extraAwards.asr=i),a.type===l.PropTypeEnum.DIAMOND&&(this._extraAwards.yb=i),a.id===l.PropIDEnum.EXCHANGE_GOLDEN_EGG&&(this._extraAwards.props={},this._extraAwards.props[l.PropIDEnum.EXCHANGE_GOLDEN_EGG]=i)}this.view.m_Window.m_extraTip.visible=""!=n,this.view.m_Window.m_extraTip.m_txtExtra.text="\u5206\u4eab\u989d\u5916\u52a0"+n}else this.view.m_Window.m_extraTip.visible=!1;else this.view.m_Window.m_extraTip.visible=!1}else this.view.m_Window.m_extraTip.visible=!1},e.prototype.getCurrencyAward=function(t){return t[l.PropIDEnum.EXCHANGE_GOLDEN_EGG]?l.PropIDEnum.EXCHANGE_GOLDEN_EGG:t.yb?"yb":t.sr?"sr":""},i([jsClass],e)}(s.FadeUI);n.default=y,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataProps":"DataProps","../Base/Data/DatazOrder":"DatazOrder","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Share/ShareManager":"ShareManager","../Base/View/UIHelp":"UIHelp","../Match/MatchModel":"MatchModel","./MatchShareLowRankUI/MatchShareLowRankUIBinder":"MatchShareLowRankUIBinder","./MatchShareModel":"MatchShareModel"}],MatchShareModel:[function(t,e,n){"use strict";cc._RF.push(e,"c9945ajPYFH7ZmQhmuawky/","MatchShareModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.MatchShareModel=n.EXCHANGE_GOLDEN_TICKET_COST=n.EXCHANGE_GOLDEN_TICKET_COUNT=n.EXCHANGE_GOLDEN_TICKET_PRODUCT_ID=n.MatchShareType=n.TicketShareFromScene=n.MatchShareAssistScene=n.MatchShareAssistResult=void 0;var r,s,c,l=t("../../Framework/Manager/UIManager"),u=t("../../Framework/Model/BaseModel"),d=t("../../Framework/Root/ModelRoot"),p=t("../Base/Data/DataLocalStorageKey"),h=t("../Base/Utils/UtilTime"),_=t("./MatchShareCreditUI"),f=t("./MatchShareGoldenEggUI"),m=t("./MatchShareNoRankUI"),g=t("./MatchShareProxy"),y=t("./MatchShareHighRankUI"),I=t("./MatchShareTicketUI"),C=t("./MatchShareLowRankUI"),M=t("../Match/MatchModel"),v=t("./MatchShareAssistUI"),E=t("../../Framework/Manager/EventManager"),A=t("../Base/Data/DataEvent"),P=t("../Award/AwardUI"),b=t("../Award/AwardModel"),U=t("../Base/Data/DataProps"),S=t("../UserInfo/UserInfoModel"),T=t("./MatchShareFreeTicketUI"),R=t("./MatchShareSignInNormalUI"),w=t("./MatchShareSignInAwardUI"),D=t("../Shop/ShopProxy"),O=t("../../Framework/Manager/CoroutineManager"),L=t("../Base/Module/Platform/PlatformManager"),G=t("./MatchShareSkyFallTicketUI"),B=t("../Base/Module/BfAnalytics/BfasManager"),N=t("../Base/Module/BfAnalytics/DataPointID");(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.OVERDUE=1]="OVERDUE",t[t.SELF=2]="SELF",t[t.UP_LIMIT=3]="UP_LIMIT",t[t.ASSISTED=4]="ASSISTED",t[t.LATE=5]="LATE",t[t.INVITE_NEW_SUCCESS=6]="INVITE_NEW_SUCCESS",t[t.INVITE_NEW_OVERDUE=7]="INVITE_NEW_OVERDUE",t[t.INVITE_NEW_NOT_NEWBIE=8]="INVITE_NEW_NOT_NEWBIE"})(r=n.MatchShareAssistResult||(n.MatchShareAssistResult={})),function(t){t[t.NONE=-1]="NONE",t[t.GOLDEN_EGG_TICKET=0]="GOLDEN_EGG_TICKET",t[t.WELFARE_TICKET=1]="WELFARE_TICKET",t[t.GOLDEN_EGG_SIGN_UP=2]="GOLDEN_EGG_SIGN_UP",t[t.WELFARE_SIGN_UP=3]="WELFARE_SIGN_UP"}(s=n.MatchShareAssistScene||(n.MatchShareAssistScene={})),function(t){t[t.AUTO_POP=1]="AUTO_POP",t[t.ADD_GOLDEN_EGG_TICKET=2]="ADD_GOLDEN_EGG_TICKET",t[t.ADD_WELFARE_TICKET=3]="ADD_WELFARE_TICKET",t[t.SIGN_UP_GOLDEN_EGG=4]="SIGN_UP_GOLDEN_EGG",t[t.SIGN_UP_WELFARE=5]="SIGN_UP_WELFARE",t[t.CLICK_SHARE_ENTRANCE=6]="CLICK_SHARE_ENTRANCE"}(n.TicketShareFromScene||(n.TicketShareFromScene={})),function(t){t[t.FreeGot=1]="FreeGot",t[t.InstantShare=2]="InstantShare",t[t.InviteHelp=3]="InviteHelp",t[t.ViewAdd=4]="ViewAdd",t[t.SignUp=5]="SignUp",t[t.GotRank=6]="GotRank",t[t.MissRank=7]="MissRank",t[t.CreditScore=8]="CreditScore",t[t.InviteNewUserGotCredit=9]="InviteNewUserGotCredit",t[t.InviteNewUserGotTicket=10]="InviteNewUserGotTicket",t[t.SignUpInviteNewUserGotTicket=11]="SignUpInviteNewUserGotTicket",t[t.FreeSignIn=12]="FreeSignIn",t[t.SkyFallTicket=13]="SkyFallTicket",t[t.EnterMatch=14]="EnterMatch"}(c=n.MatchShareType||(n.MatchShareType={})),n.EXCHANGE_GOLDEN_TICKET_PRODUCT_ID="66666",n.EXCHANGE_GOLDEN_TICKET_COUNT=10,n.EXCHANGE_GOLDEN_TICKET_COST=1;var F=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._goldenEggInfo=null,e._matchGoldenEggShareInfo={},e._matchWelfareShareInfo={},e._matchShareConfig=null,e._requestShareTime=0,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return d.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return g.MatchShareProxy.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"matchGoldenEggShareInfo",{get:function(){return this._matchGoldenEggShareInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"matchWelfareShareInfo",{get:function(){return this._matchWelfareShareInfo},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){E.EventManager.instance.on(A.DataEvent.JoinAwardListener,this,this.onJoinAwardListener)},e.prototype.onJoinAwardListener=function(){this.reqMatchShareConfig(),this.reqMatchShareInfo(),this.getGoldenEggInfo(null)},e.prototype.reqMatchShareConfig=function(t){var e=this;this.proxy.reqMatchShareConfig(function(n){e._matchShareConfig=n,t&&t()})},e.prototype.isMatchShareOpen=function(t,e){var n,o;return!!this._matchShareConfig&&(M.MatchTypeEnum.FIX_PLAYER===t?null===(n=this._matchShareConfig.goldEggMatchShareRules)||void 0===n?void 0:n.includes(e+""):null===(o=this._matchShareConfig.welfareMatchShareRules)||void 0===o?void 0:o.includes(e+""))},e.prototype.reqMatchShareInfo=function(t){var e=this;this.proxy.reqMatchShareInfo(function(n){if(n){if(e._requestShareTime=Date.now(),n[1])for(var o in n[1])e._matchGoldenEggShareInfo[parseInt(o)]=n[1][o];if(n[2])for(var o in n[2])e._matchWelfareShareInfo[parseInt(o)]=n[2][o];t&&t()}else t&&t()})},e.prototype.reqMatchShareAward=function(t,e,n,o,a,i,r){var s=this;this.proxy.reqMatchShareAward(t,e,n,o,function(n){if(n&&(s.updateShareCntByType(e,t,-1),i)){var o=b.AwardModel.instance.getAwardsFormat(i);l.UIManager.instance.open(P.AwardUI,r).then(function(t){t.init(o)})}a&&a(n)})},e.prototype.updateShareCntByType=function(t,e,n){this.isMatchShareOpen(t,e)&&(t===M.MatchTypeEnum.FIX_PLAYER?-1!==this._matchGoldenEggShareInfo[e]&&(this._matchGoldenEggShareInfo[e]=Math.max(0,this._matchGoldenEggShareInfo[e]+n)):-1!==this._matchWelfareShareInfo[e]&&(this._matchWelfareShareInfo[e]=Math.max(0,this._matchWelfareShareInfo[e]+n)))},e.prototype.autoPopup=function(){var t=this;L.PlatformManager.instance.supportAct.SKY_FALL_TICKET&&(l.UIManager.instance.addTopCollider("autoPopup"),this._coroutine=O.CoroutineManager.instance.timeoutWait(function(){return!!t._matchShareConfig&&!!t._matchGoldenEggShareInfo},1,function(){l.UIManager.instance.removeTopCollider("autoPopup"),0!=t.getMatchShareCntByType(M.MatchTypeEnum.FIX_PLAYER,c.SkyFallTicket)&&p.DataLocalStorage.isCanPopActWithDayCount(p.LocalStorageKey.MATCH_SHARE_SKY_FALL_TICKET_DAY,p.LocalStorageKey.MATCH_SHARE_SKY_FALL_TICKET_DAY_COUNT,p.LocalStorageKey.MATCH_SHARE_SKY_FALL_TICKET_POP_COUNT,1,3)&&l.UIManager.instance.open(G.default)},this))},e.prototype.stopPopup=function(){this._coroutine&&(O.CoroutineManager.instance.stopCo(this._coroutine),l.UIManager.instance.removeTopCollider("autoPopup")),this._coroutine=null,l.UIManager.instance.close(G.default)},e.prototype.getSkyFallTicketCnt=function(t){var e,n;return(null===(n=null===(e=this._matchShareConfig)||void 0===e?void 0:e.skyFallAwards)||void 0===n?void 0:n.prop[t])||0},e.prototype.showEnterMatchGainTicket=function(){var t,e,n;if(0!=this.getMatchShareCntByType(M.MatchTypeEnum.FIX_PLAYER,c.EnterMatch)){var o=null;(null===(e=null===(t=this._matchShareConfig)||void 0===t?void 0:t.enterMatchAwards)||void 0===e?void 0:e.prop)&&((o={props:{}}).props=null===(n=this._matchShareConfig)||void 0===n?void 0:n.enterMatchAwards.prop),this.reqMatchShareAward(c.EnterMatch,M.MatchTypeEnum.FIX_PLAYER,null,null,function(t){t&&o&&B.BfasManager.instance.sendEvt(N.MatchEnterTicketPointID.SHOW)},o)}},e.prototype.getTicketShareAwardCnt=function(t){var e,n;return M.MatchTypeEnum.FIX_PLAYER===t?(null===(e=this._matchShareConfig)||void 0===e?void 0:e.goldEggTicketAwardUnit)||0:(null===(n=this._matchShareConfig)||void 0===n?void 0:n.welfareTicketAwardUnit)||0},e.prototype.showMatchTicketShare=function(t,e,n){var o=this;this.reqMatchShareInfo(function(){o.getMatchShareCntByType(t,c.FreeGot)>0?l.UIManager.instance.open(T.default).then(function(o){return o.init(t,e,n)}):l.UIManager.instance.open(I.default).then(function(o){return o.init(t,e,n)})})},e.prototype.showMatchSignUpShare=function(t,e,n){var o=this,a=p.DataLocalStorage.addKeyWithNumID(p.LocalStorageKey.MATCH_SHARE_SIGN_UP_TIMESTAMP);if(!h.UtilTime.isTodayDate(parseInt(localStorage.getItem(a)||"0")))return localStorage.setItem(a,Date.now().toString()),void l.UIManager.instance.open(R.default).then(function(e){return e.init(t)});a=p.DataLocalStorage.addKeyWithNumID(p.LocalStorageKey.MATCH_SHARE_SIGN_UP_SHARE_TIMESTAMP),h.UtilTime.isTodayDate(parseInt(localStorage.getItem(a)||"0"))||h.UtilTime.isTodayDate(this._requestShareTime)&&0==this.getMatchShareCntByType(t,c.SignUpInviteNewUserGotTicket)||this.reqMatchShareInfo(function(){0!=o.getMatchShareCntByType(t,c.SignUpInviteNewUserGotTicket)&&l.UIManager.instance.open(w.default).then(function(o){return o.init(t,e,n)})})},e.prototype.saveMatchSignUpClickNormalShare=function(){var t=p.DataLocalStorage.addKeyWithNumID(p.LocalStorageKey.MATCH_SHARE_SIGN_UP_SHARE_TIMESTAMP);localStorage.setItem(t,Date.now().toString())},e.prototype.getSignUpAwardCnt=function(){var t;return(null===(t=this._matchShareConfig)||void 0===t?void 0:t.signUpAwardUnit)||0},e.prototype.showMatchRankShare=function(t,e){var n=this,o=this.getRankTitleMatchName(e)+"\u7684"+e.name;h.UtilTime.isTodayDate(this._requestShareTime)?this.openRankShareUI(e.type,t,e.mid,e.msid,o):this.reqMatchShareInfo(function(){n.openRankShareUI(e.type,t,e.mid,e.msid,o)})},e.prototype.getRankTitleMatchName=function(t){if(t.begin_rule.count&&t.begin_rule.count>0)return t.start_time&&""!=t.start_time?t.start_time.substring(t.start_time.length-8,t.start_time.length-3):t.begin_rule.count+"\u4eba";var e=t.begin_rule.shour<10?"0"+t.begin_rule.shour:t.begin_rule.shour,n=t.begin_rule.smin||0;return e+":"+(n<10?"0"+n:n)},e.prototype.openRankShareUI=function(t,e,n,o,a){var i=M.MatchModel.instance.isMatchTrust(n,o)?null:this.getRankBaseAward(e,n,o);e>=1&&e<=4?l.UIManager.instance.open(y.default).then(function(r){return r.init(t,e,a,n,o,i)}):i?l.UIManager.instance.open(C.default).then(function(r){return r.init(t,e,a,n,o,i)}):l.UIManager.instance.open(m.default).then(function(i){return i.init(t,n,o,e,a)})},e.prototype.getRankBaseAward=function(t,e,n){var o=M.MatchModel.instance.getRankAward(e,n,t);if(!o)return null;var a={};if(o.sr&&(a.sr=o.sr),o.yb&&(a.yb=o.yb),o.prop)for(var i in o.prop)a[parseInt(i)]=o.prop[i];return a},e.prototype.getRankAddConfig=function(t,e){if(!this._matchShareConfig)return{awardCount:0,awardType:0};var n=M.MatchTypeEnum.FIX_PLAYER===t?this._matchShareConfig.goldEggMatchAwards:this._matchShareConfig.welfareMatchAwards;return n&&(n[e]||n[-1])||{awardCount:0,awardType:0}},e.prototype.getNoRankAwardCnt=function(t){var e;return M.MatchTypeEnum.FIX_PLAYER===t&&(null===(e=this._matchShareConfig)||void 0===e?void 0:e.fullMatchFailAwardCount)||0},e.prototype.showMatchCreditShare=function(){var t=M.MatchTypeEnum.FIX_PLAYER;this.isMatchShareOpen(t,c.CreditScore)||this.isMatchShareOpen(t,c.InviteNewUserGotCredit)?h.UtilTime.isTodayDate(this._requestShareTime)?l.UIManager.instance.open(_.default).then(function(e){return e.init(t)}):this.reqMatchShareInfo(function(){l.UIManager.instance.open(_.default).then(function(e){return e.init(t)})}):E.EventManager.instance.emit(A.DataEvent.ToastData,"\u4fe1\u8a89\u5206\u4e0d\u8db3")},e.prototype.getCreditShareCnt=function(){return this._matchGoldenEggShareInfo[c.CreditScore]||0},e.prototype.getCreditAddScore=function(){var t,e;return 0==this.getCreditShareCnt()?(null===(t=this._matchShareConfig)||void 0===t?void 0:t.inviteNewUserAwardCount)||0:(null===(e=this._matchShareConfig)||void 0===e?void 0:e.shareUserAwardCount)||0},e.prototype.getMatchShareCntByType=function(t,e){return this.isMatchShareOpen(t,e)?M.MatchTypeEnum.FIX_PLAYER===t?this._matchGoldenEggShareInfo[e]||0:this._matchWelfareShareInfo[e]||0:0},e.prototype.getGoldenEggInfo=function(t){var e=this;this.proxy.reqGoldenEggConfig(function(n){e._goldenEggInfo=n,t&&t()})},e.prototype.goldenEggAutoPopUp=function(){p.DataLocalStorage.isCanPopAct(p.LocalStorageKey.MATCH_GOLDEN_EGG_DAY,p.LocalStorageKey.MATCH_GOLDEN_EGG_POP_COUNT,this.getGoldenEggPopCnt())&&this.showGoldenEgg()},e.prototype.showGoldenEgg=function(){var t=this;this.isGoldenEggAwardGot()||(this.isGoldenEggAward()?l.UIManager.instance.open(f.default):this.getGoldenEggInfo(function(){t._goldenEggInfo?t.isGoldenEggAwardGot()||l.UIManager.instance.open(f.default):E.EventManager.instance.emit(A.DataEvent.ToastData,"\u91d1\u86cb\u6d3b\u52a8\u6570\u636e\u62c9\u53d6\u5931\u8d25~")}))},e.prototype.isGoldenEggAwardGot=function(){var t;return null===(t=this._goldenEggInfo)||void 0===t?void 0:t.isGotAwards},e.prototype.getGoldenEggPopCnt=function(){var t;return(null===(t=this._goldenEggInfo)||void 0===t?void 0:t.dailyPopCount)||0},e.prototype.getGoldenEggInvitees=function(){var t;return(null===(t=this._goldenEggInfo)||void 0===t?void 0:t.helpedFriends)||[]},e.prototype.isGoldenEggAward=function(){return!!this._goldenEggInfo&&this._goldenEggInfo.friendHelpCount<=this.getGoldenEggInvitees().length},e.prototype.reqGoldenEggAward=function(t){var e=this;this.proxy.reqGoldenEggAward(function(n){if(0===n){e._goldenEggInfo.isGotAwards=!0,t&&t();var o={};o[U.PropIDEnum.EXCHANGE_GOLDEN_EGG]=e._goldenEggInfo.goldEggCout;var a=b.AwardModel.instance.getAwardsFormat({props:o});l.UIManager.instance.open(P.AwardUI).then(function(t){t.init(a)})}E.EventManager.instance.emit(A.DataEvent.GoldenEggInfo)})},e.prototype.goldenEggInviteNew=function(t,e,n){h.UtilTime.isTodayOverdue(n+1728e5)||t!==S.UserInfoModel.instance.userInfo.numID&&S.UserInfoModel.instance.isNewRegisterPlayer()&&this.proxy.reqGoldenEggInviteNew(t,e,function(){})},e.prototype.matchShareAssist=function(t,e,n,o,a,i){if(h.UtilTime.isTodayOverdue(i+1728e5))l.UIManager.instance.open(v.default).then(function(e){return e.init(t,r.OVERDUE,"")});else{var u=t===s.GOLDEN_EGG_SIGN_UP||t===s.GOLDEN_EGG_TICKET?M.MatchTypeEnum.FIX_PLAYER:M.MatchTypeEnum.FIX_TIME,d=t===s.GOLDEN_EGG_SIGN_UP||t===s.WELFARE_SIGN_UP?c.SignUpInviteNewUserGotTicket:c.InviteHelp;this.proxy.reqMatchShareAssist(u,d,e,n,o,a,function(e,n){e=Math.clamp(e,r.SUCCESS,r.LATE),l.UIManager.instance.open(v.default).then(function(o){return o.init(t,e,n)})})}},e.prototype.matchShareInviteNew=function(t,e,n,o,a,i,u){n!==S.UserInfoModel.instance.userInfo.numID&&this.proxy.reqMatchShareInviteNew(Math.floor(u/1e3),t,e,n,o,a,i,function(t){if(e===c.InviteNewUserGotTicket){var n=null;1==t?n=r.INVITE_NEW_SUCCESS:2==t?n=r.INVITE_NEW_NOT_NEWBIE:3==t&&(n=r.INVITE_NEW_OVERDUE),n&&l.UIManager.instance.open(v.default).then(function(t){return t.init(s.NONE,n,"")})}})},e.prototype.getMatchIDExtData=function(t,e){return"matchID="+t+"&matchSubID="+e},e.prototype.exchangeGoldenTicket=function(t){D.ShopProxy.instance.reqExchangComm(n.EXCHANGE_GOLDEN_TICKET_PRODUCT_ID,0,function(e){if(0===e){var o={props:{}};o.props[U.PropIDEnum.TICKET_GOLDEN_EGG]=n.EXCHANGE_GOLDEN_TICKET_COUNT;var a=b.AwardModel.instance.getAwardsFormat(o);l.UIManager.instance.open(P.AwardUI).then(function(t){t.init(a)}),S.UserInfoModel.instance.addProp(U.PropIDEnum.TICKET_GOLDEN_EGG,n.EXCHANGE_GOLDEN_TICKET_COUNT),E.EventManager.instance.emit(A.DataEvent.UpdateProp),t&&t(!0)}else E.EventManager.instance.emit(A.DataEvent.ToastData,"\u5151\u6362\u5931\u8d25")})},i([jsClass],e)}(u.BaseModel);n.MatchShareModel=F,cc.systemEvent.once("GameRoot.inited",function(){d.ModelRoot.instance.add(F)}),cc._RF.pop()},{"../../Framework/Manager/CoroutineManager":"CoroutineManager","../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/Model/BaseModel":"BaseModel","../../Framework/Root/ModelRoot":"ModelRoot","../Award/AwardModel":"AwardModel","../Award/AwardUI":"AwardUI","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../Base/Data/DataProps":"DataProps","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Platform/PlatformManager":"PlatformManager","../Base/Utils/UtilTime":"UtilTime","../Match/MatchModel":"MatchModel","../Shop/ShopProxy":"ShopProxy","../UserInfo/UserInfoModel":"UserInfoModel","./MatchShareAssistUI":"MatchShareAssistUI","./MatchShareCreditUI":"MatchShareCreditUI","./MatchShareFreeTicketUI":"MatchShareFreeTicketUI","./MatchShareGoldenEggUI":"MatchShareGoldenEggUI","./MatchShareHighRankUI":"MatchShareHighRankUI","./MatchShareLowRankUI":"MatchShareLowRankUI","./MatchShareNoRankUI":"MatchShareNoRankUI","./MatchShareProxy":"MatchShareProxy","./MatchShareSignInAwardUI":"MatchShareSignInAwardUI","./MatchShareSignInNormalUI":"MatchShareSignInNormalUI","./MatchShareSkyFallTicketUI":"MatchShareSkyFallTicketUI","./MatchShareTicketUI":"MatchShareTicketUI"}],MatchShareNoRankUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"f5f3apIWMZLzqec7d4pplMj","MatchShareNoRankUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./MatchShareNoRankUI_MainPanel"),a=t("./MatchShareNoRankUI_Window"),i=t("./MatchShareNoRankUI_ExtraTip"),r=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default)},t}();n.default=r,cc._RF.pop()},{"./MatchShareNoRankUI_ExtraTip":"MatchShareNoRankUI_ExtraTip","./MatchShareNoRankUI_MainPanel":"MatchShareNoRankUI_MainPanel","./MatchShareNoRankUI_Window":"MatchShareNoRankUI_Window"}],MatchShareNoRankUI_ExtraTip:[function(t,e,n){"use strict";cc._RF.push(e,"fac87M/xiBE0qPjueBNNEEV","MatchShareNoRankUI_ExtraTip");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareNoRankUI","ExtraTip")},e.prototype.onConstruct=function(){this.m_cDirector=this.getControllerAt(0)},e.URL="ui://37c3j5khmccsk",e}(fgui.GLabel);n.default=i,cc._RF.pop()},{}],MatchShareNoRankUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"e8e9dCiU85CxpAr+fKPaTCh","MatchShareNoRankUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareNoRankUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://37c3j5khmccs0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareNoRankUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"5c41azjffVB4bL+/mNAuXaW","MatchShareNoRankUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareNoRankUI","Window")},e.prototype.onConstruct=function(){this.m_cAgain=this.getControllerAt(0),this.m_btnClose=this.getChildAt(3),this.m_btnShare=this.getChildAt(4),this.m_btnAgin=this.getChildAt(5),this.m_awardTip=this.getChildAt(6),this.m_txtMatchName=this.getChildAt(7),this.m_txtRank=this.getChildAt(8)},e.URL="ui://37c3j5khmccs1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareNoRankUI:[function(t,e,n){"use strict";cc._RF.push(e,"911b0+AaXpIbbEn8ypUNCPC","MatchShareNoRankUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Framework/UI/FadeUI"),s=t("../Base/Data/DataProps"),c=t("../Base/Data/DatazOrder"),l=t("../Base/Module/BfAnalytics/BfasManager"),u=t("../Base/Module/BfAnalytics/DataPointID"),d=t("../Base/Module/Share/ShareManager"),p=t("../Match/MatchModel"),h=t("./MatchShareModel"),_=t("./MatchShareNoRankUI/MatchShareNoRankUIBinder"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){_.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sortingOrder",{get:function(){return c.DataZOrder.MatchShareRank},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return h.MatchShareModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),this.view.m_Window.m_btnShare.onClick(this.onBtnShareClick,this),this.view.m_Window.m_btnAgin.onClick(this.onBtnAgainClick,this)},e.prototype.init=function(t,e,n,o,a){this._matchType=t,this._matchID=e,this._matchSubID=n,this._rank=o,this.view.m_Window.m_txtRank.text=o+"",this.view.m_Window.m_txtMatchName.text="\u60a8\u5728[color=#fc9e3c]{0}[/color]\u4e2d\u83b7\u5f97".format(a);var i=this._matchType===p.MatchTypeEnum.FIX_PLAYER?s.PropIDEnum.TICKET_GOLDEN_EGG:s.PropIDEnum.TICKET_PHONE_FEE,r=s.DataProps.instance.getPropName(i)||"\u53c2\u8d5b\u5238";this.view.m_Window.m_awardTip.title="\u5206\u4eab\u8fd4\u56de"+r+"x"+this.model.getNoRankAwardCnt(this._matchType),this.view.m_Window.m_awardTip.visible=this.model.getMatchShareCntByType(this._matchType,h.MatchShareType.MissRank)>0;var c=new Date(Date.now()).getHours();this.view.m_Window.m_cAgain.selectedIndex=t==p.MatchTypeEnum.FIX_PLAYER&&c>=10&&c<23?1:0,1==this.view.m_Window.m_cAgain.selectedIndex&&l.BfasManager.instance.sendEvt(u.MatchShareRankAgainPointID.SHOW,{matchType:this._matchType,rank:this._rank}),l.BfasManager.instance.sendEvt(u.MatchNoRankSharePointID.SHOW)},e.prototype.onBtnShareClick=function(){var t=this;l.BfasManager.instance.sendEvt(u.MatchNoRankSharePointID.CLICK_SHARE),d.ShareManager.instance.share(d.ShareType.goldenEggNoRankShare,null,function(e,n){if((n||cc.sys.OS_IOS===cc.sys.os)&&!(t.model.getMatchShareCntByType(t._matchType,h.MatchShareType.MissRank)<=0)){var o=t.model.getNoRankAwardCnt(t._matchType),a={props:{}};a.props[s.PropIDEnum.TICKET_GOLDEN_EGG]=o,t.model.reqMatchShareAward(h.MatchShareType.MissRank,t._matchType,t._matchID,t._matchSubID,function(e){e&&t.onExitClick()},a)}})},e.prototype.onBtnAgainClick=function(){l.BfasManager.instance.sendEvt(u.MatchShareRankAgainPointID.CLICK,{matchType:this._matchType,rank:this._rank}),this.onExitClick();var t=p.MatchModel.instance.getMatchListByAwardType(p.MatchAwardTypeEnum.GOLDEN_EGG),e=null==t?void 0:t.find(function(t){return t.match_state==p.MatchStateEnum.GO_SIGN});p.MatchModel.instance.openMatchUI({scene:e?p.EnterMatchSceneEnum.ENROLL:p.EnterMatchSceneEnum.FIX_PLAYER,matchID:null==e?void 0:e.mid,matchSubID:null==e?void 0:e.msid})},i([jsClass],e)}(r.FadeUI);n.default=f,cc._RF.pop()},{"../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataProps":"DataProps","../Base/Data/DatazOrder":"DatazOrder","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Share/ShareManager":"ShareManager","../Match/MatchModel":"MatchModel","./MatchShareModel":"MatchShareModel","./MatchShareNoRankUI/MatchShareNoRankUIBinder":"MatchShareNoRankUIBinder"}],MatchShareProxy:[function(t,e,n){"use strict";cc._RF.push(e,"f7d3aM4usFBpKggRUcq1DjD","MatchShareProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.MatchShareProxy=void 0;var r=t("../../Framework/Proxy/BaseProxy"),s=t("../../Framework/Root/ProxyRoot"),c=t("../Base/Data/DataBfConfig"),l=t("../Base/Data/DataScript"),u=t("../Base/Module/Network/protocol/AwardProtocol"),d=t("../Base/Module/Network/SocketUtils"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return s.ProxyRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.reqMatchShareConfig=function(t){var e=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.MatchShare.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.MatchShare.func.config+"';")});d.SocketUtils.instance.request(e,function(e){if(0===e.flag){var n=bf33.Utils.bytesToString(e.msg),o=JSON.parse(n);console.log(">>reqMatchShareConfig.decode:",o),0===o.flag&&t&&t(o)}else console.error(">-----\x3eerror.reqMatchShareConfig:",e.flag)})},e.prototype.reqMatchShareInfo=function(t){var e=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.MatchShare.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.MatchShare.func.query+"';")});d.SocketUtils.instance.request(e,function(e){if(0===e.flag){var n=bf33.Utils.bytesToString(e.msg);console.log(">>reqMatchShareInfo.decode:",n);var o=JSON.parse(n);0===o.flag?t&&t(o):t&&t(null)}else t&&t(null),console.error(">-----\x3eerror.reqMatchShareInfo:",e.flag)})},e.prototype.reqMatchShareAward=function(t,e,n,o,a){var i="func='"+l.DataScript.MatchShare.func.award+"';shareType="+t+";matchType="+e+";";n&&(i+="matchID="+n+";"),o&&(i+="matchSubID="+o+";");var r=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.MatchShare.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes(i)});console.log("jp-log reqMatchShareAward:",t,e,n,o),d.SocketUtils.instance.request(r,function(t){if(0===t.flag){var e=bf33.Utils.bytesToString(t.msg);console.log(">>reqMatchShareAward.decode:",e);var n=JSON.parse(e);a&&a(0===n.flag)}else a&&a(!1),console.error(">-----\x3eerror.reqMatchShareAward:",t.flag)})},e.prototype.reqMatchShareAssist=function(t,e,n,o,a,i,r){var s="func='"+l.DataScript.MatchShare.func.assist+"';targetMatchType="+t+";targetShareType="+e+";targetChannelID="+o+";targetNumID="+n+";";a&&(s+="targetMatchID="+a+";"),i&&(s+="targetMatchSubID="+i+";");var p=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.MatchShare.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes(s)});console.log("jp-log reqMatchShareAssist:",e,t,n,o,a,i),d.SocketUtils.instance.request(p,function(t){if(0===t.flag){var e=bf33.Utils.bytesToString(t.msg);console.log(">>reqMatchShareAssist.decode:",e);var n=JSON.parse(e);r&&r(n.flag,n.nickName)}else console.error(">-----\x3eerror.reqMatchShareAssist:",t.flag)})},e.prototype.reqMatchShareInviteNew=function(t,e,n,o,a,i,r,s){var p="func='"+l.DataScript.MatchShare.func.invite+"';targetMatchType="+e+";targetShareType="+n+";targetChannelID="+a+";targetNumID="+o+";targetTimestamp="+t;i&&(p+="targetMatchID="+i+";"),r&&(p+="targetMatchSubID="+r+";");var h=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.MatchShare.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes(p)});console.log("jp-log reqMatchShareInviteNew:",n,e,o,a,i,r),d.SocketUtils.instance.request(h,function(t){if(0===t.flag){var e=bf33.Utils.bytesToString(t.msg);console.log(">>reqMatchShareInviteNew.decode:",e);var n=JSON.parse(e);s&&s(n.subType)}else s&&s(-1),console.error(">-----\x3eerror.reqMatchShareInviteNew:",t.flag)})},e.prototype.reqGoldenEggConfig=function(t){var e=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.MatchShare.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.MatchShare.func.goldenEggQuery+"';")});d.SocketUtils.instance.request(e,function(e){if(0===e.flag){var n=bf33.Utils.bytesToString(e.msg);console.log(">>reqGoldenEggConfig.decode:",n);var o=JSON.parse(n);0===o.flag?t&&t(o):t&&t(null)}else t&&t(null),console.error(">-----\x3eerror.reqGoldenEggConfig:",e.flag)})},e.prototype.reqGoldenEggAward=function(t){var e=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.MatchShare.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.MatchShare.func.goldenEggAward+"';")});d.SocketUtils.instance.request(e,function(e){if(0===e.flag){var n=bf33.Utils.bytesToString(e.msg);console.log(">>reqGoldenEggAward.decode:",n);var o=JSON.parse(n);t&&t(o.flag)}else console.error(">-----\x3eerror.reqGoldenEggAward:",e.flag)})},e.prototype.reqGoldenEggInviteNew=function(t,e,n){var o=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.MatchShare.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.MatchShare.func.goldenEggInvite+"';targetChannelID="+e+";targetNumID="+t+";")});console.log("jp-log reqGoldenEggInviteNew:",t,e),d.SocketUtils.instance.request(o,function(t){if(0===t.flag){var e=bf33.Utils.bytesToString(t.msg);console.log(">>reqGoldenEggInviteNew.decode:",e);var o=JSON.parse(e);n&&n(o.flag)}else console.error(">-----\x3eerror.reqGoldenEggInviteNew:",t.flag)})},e.prototype.reqMatchSignInType=function(t,e){var n=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.MatchShare.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.MatchShare.func.getSignInType+"',matchSubID="+t)});console.log("jp-log reqMatchSignInType:",t),d.SocketUtils.instance.request(n,function(t){if(0==t.flag){var n=bf33.Utils.bytesToString(t.msg);console.log(">>reqMatchSignInType.decode:",n);var o=JSON.parse(n);e&&e(o.signUpType)}else e&&e(0)})},i([jsClass],e)}(r.BaseProxy);n.MatchShareProxy=p,cc.systemEvent.once("GameRoot.inited",function(){s.ProxyRoot.instance.add(p)}),cc._RF.pop()},{"../../Framework/Proxy/BaseProxy":"BaseProxy","../../Framework/Root/ProxyRoot":"ProxyRoot","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataScript":"DataScript","../Base/Module/Network/SocketUtils":"SocketUtils","../Base/Module/Network/protocol/AwardProtocol":"AwardProtocol"}],MatchShareSignInAwardUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"4398eLO6TJCb6BQ4+Fq9dPY","MatchShareSignInAwardUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./MatchShareSignInAwardUI_Window"),a=t("./MatchShareSignInAwardUI_btnShare"),i=t("./MatchShareSignInAwardUI_MainPanel"),r=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default)},t}();n.default=r,cc._RF.pop()},{"./MatchShareSignInAwardUI_MainPanel":"MatchShareSignInAwardUI_MainPanel","./MatchShareSignInAwardUI_Window":"MatchShareSignInAwardUI_Window","./MatchShareSignInAwardUI_btnShare":"MatchShareSignInAwardUI_btnShare"}],MatchShareSignInAwardUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"cd662tgEMhByKiFEBukeag4","MatchShareSignInAwardUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareSignInAwardUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://hffkqg1kmbore",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareSignInAwardUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"38c08XyCApIcZscu4XWXyPK","MatchShareSignInAwardUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareSignInAwardUI","Window")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(0),this.m_txtCount=this.getChildAt(2),this.m_btnShare=this.getChildAt(3),this.m_btnClose=this.getChildAt(4),this.m_txtPropName=this.getChildAt(5),this.m_sweepSpineNode=this.getChildAt(7),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://hffkqg1kmbor0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareSignInAwardUI_btnShare:[function(t,e,n){"use strict";cc._RF.push(e,"0c4eaFB4yRBjoKJDiXAkIVz","MatchShareSignInAwardUI_btnShare");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareSignInAwardUI","btnShare")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(0),this.m_btn_swweep=this.getTransitionAt(0)},e.URL="ui://hffkqg1kmbor7",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],MatchShareSignInAwardUI:[function(t,e,n){"use strict";cc._RF.push(e,"1792eE6zFlPzZmJYKF+t3sc","MatchShareSignInAwardUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Framework/Manager/EventManager"),s=t("../../Framework/UI/FadeUI"),c=t("../Base/Data/DataEvent"),l=t("../Base/Data/DataSpineAni"),u=t("../Base/Module/BfAnalytics/BfasManager"),d=t("../Base/Module/BfAnalytics/DataPointID"),p=t("../Base/Module/Share/ShareManager"),h=t("../Base/Utils/UtilCC"),_=t("../Match/MatchConstant"),f=t("../Match/MatchModel"),m=t("./MatchShareModel"),g=t("./MatchShareSignInAwardUI/MatchShareSignInAwardUIBinder"),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){g.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return m.MatchShareModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),this.view.m_Window.m_btnShare.onClick(this.onBtnShareClick,this),r.EventManager.instance.on(_.MatchDataEvent.MatchStarted,this,this.onExitClick)},e.prototype.init=function(t,e,n){this._matchType=t,this._matchID=e||0,this._matchSubID=n||0,this.initAni(),this.playTween(),this.view.m_Window.m_txtPropName.text="\u91d1\u86cb",this.view.m_Window.m_txtCount.text="x"+this.model.getSignUpAwardCnt(),u.BfasManager.instance.sendEvt(d.MatchSignUpSharePointID.SHOW_AWARD_SIGN_UP,{matchType:this._matchType})},e.prototype.initAni=function(){h.UtilCC.instantiatePrefab(l.DataSpineAniPath.ANI_MATCH_SHARE_SIGN_IN_AWARD,function(t){var e=t.getComponent(sp.Skeleton);e.setCompleteListener(function(t){"chusheng"===(t.animation?t.animation.name:"")&&e.setAnimation(0,"loop",!0)}),e.setAnimation(0,"chusheng",!1)},this.view.m_Window.m_spineNode.node)},e.prototype.onBtnShareClick=function(){var t=this;u.BfasManager.instance.sendEvt(d.MatchSignUpSharePointID.AWARD_SIGN_UP_CLICK_SHARE,{matchType:this._matchType});var e=f.MatchTypeEnum.FIX_PLAYER===this._matchType?p.ShareType.goldenEggSignUpAssist:p.ShareType.welfareSignUpAssist;p.ShareManager.instance.share(e,{extData:this.model.getMatchIDExtData(this._matchID,this._matchSubID)},function(e,n){(n||cc.sys.OS_IOS===cc.sys.os)&&(r.EventManager.instance.emit(c.DataEvent.ToastData,"\u5206\u4eab\u6210\u529f"),t.onExitClick())})},e.prototype.playTween=function(){var t=this;cc.tween(this.view.m_Window).delay(.233).call(function(){t.view.m_Window.m_btnShare.visible=!0,t.playShareBtnSpine()}).delay(.267).call(function(){t.playSweepSpine()}).start()},e.prototype.playSweepSpine=function(){h.UtilCC.instantiatePrefab(l.DataSpineAniPath.ANI_MATCH_SHARE_SIGN_IN_AWARD_SWEEP,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"sweep",!1)},this.view.m_Window.m_sweepSpineNode.node)},e.prototype.playShareBtnSpine=function(){h.UtilCC.instantiatePrefab(l.DataSpineAniPath.ANI_MATCH_SHARE_SIGN_IN_AWARD_SHARE_BTN,function(t){var e=t.getComponent(sp.Skeleton);e.setCompleteListener(function(t){"chusheng"===(t.animation?t.animation.name:"")&&e.setAnimation(0,"loop",!0)}),e.setAnimation(0,"chusheng",!1)},this.view.m_Window.m_btnShare.m_spineNode.node)},e.prototype.onDestroy=function(){cc.Tween.stopAllByTarget(this.view.m_Window),t.prototype.onDestroy.call(this)},i([jsClass],e)}(s.FadeUI);n.default=y,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataSpineAni":"DataSpineAni","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Share/ShareManager":"ShareManager","../Base/Utils/UtilCC":"UtilCC","../Match/MatchConstant":"MatchConstant","../Match/MatchModel":"MatchModel","./MatchShareModel":"MatchShareModel","./MatchShareSignInAwardUI/MatchShareSignInAwardUIBinder":"MatchShareSignInAwardUIBinder"}],MatchShareSignInNormalUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"0c42eyC0XJCLbtz58eueg96","MatchShareSignInNormalUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./MatchShareSignInNormalUI_Window"),a=t("./MatchShareSignInNormalUI_btnShare"),i=t("./MatchShareSignInNormalUI_MainPanel"),r=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default)},t}();n.default=r,cc._RF.pop()},{"./MatchShareSignInNormalUI_MainPanel":"MatchShareSignInNormalUI_MainPanel","./MatchShareSignInNormalUI_Window":"MatchShareSignInNormalUI_Window","./MatchShareSignInNormalUI_btnShare":"MatchShareSignInNormalUI_btnShare"}],MatchShareSignInNormalUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"81e52/1uWdCbbRTYIUcMFtu","MatchShareSignInNormalUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareSignInNormalUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1)},e.URL="ui://h67mc30nmbore",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareSignInNormalUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"71200lDhotNJo6qYnj1/NB8","MatchShareSignInNormalUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareSignInNormalUI","Window")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(0),this.m_btnShare=this.getChildAt(1),this.m_btnClose=this.getChildAt(2)},e.URL="ui://h67mc30nmbor0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareSignInNormalUI_btnShare:[function(t,e,n){"use strict";cc._RF.push(e,"9be0cSi/PJOzpfq4HjsVkl3","MatchShareSignInNormalUI_btnShare");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareSignInNormalUI","btnShare")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(0),this.m_btn_swweep=this.getTransitionAt(0)},e.URL="ui://h67mc30nmbor7",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],MatchShareSignInNormalUI:[function(t,e,n){"use strict";cc._RF.push(e,"4f31cFNtEhAPbVNMwBwm9Zz","MatchShareSignInNormalUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Framework/Manager/EventManager"),s=t("../../Framework/UI/FadeUI"),c=t("../Base/Data/DataEvent"),l=t("../Base/Data/DataSpineAni"),u=t("../Base/Module/BfAnalytics/BfasManager"),d=t("../Base/Module/BfAnalytics/DataPointID"),p=t("../Base/Module/Share/ShareManager"),h=t("../Base/Utils/UtilCC"),_=t("../Match/MatchConstant"),f=t("../Match/MatchModel"),m=t("./MatchShareModel"),g=t("./MatchShareSignInNormalUI/MatchShareSignInNormalUIBinder"),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){g.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),this.view.m_Window.m_btnShare.onClick(this.onBtnShareClick,this),r.EventManager.instance.on(_.MatchDataEvent.MatchStarted,this,this.onExitClick)},e.prototype.onBtnShareClick=function(){var t=this;u.BfasManager.instance.sendEvt(d.MatchSignUpSharePointID.NORMAL_SIGN_UP_CLICK_SHARE,{matchType:this._matchType});var e=f.MatchTypeEnum.FIX_PLAYER===this._matchType?p.ShareType.goldenEggSignUpShare:p.ShareType.welfareSignUpShare;p.ShareManager.instance.share(e,null,function(e,n){(n||cc.sys.OS_IOS===cc.sys.os)&&(r.EventManager.instance.emit(c.DataEvent.ToastData,"\u5206\u4eab\u6210\u529f"),t.onExitClick())}),m.MatchShareModel.instance.saveMatchSignUpClickNormalShare()},e.prototype.init=function(t){this._matchType=t,this.initAni(),this.playShowTween(),u.BfasManager.instance.sendEvt(d.MatchSignUpSharePointID.SHOW_NORMAL_SIGN_UP,{matchType:this._matchType})},e.prototype.initAni=function(){h.UtilCC.instantiatePrefab(l.DataSpineAniPath.ANI_MATCH_SHARE_SIGN_IN_NORMAL,function(t){var e=t.getComponent(sp.Skeleton);e.setCompleteListener(function(t){"chusheng"===(t.animation?t.animation.name:"")&&e.setAnimation(0,"loop",!0)}),e.setAnimation(0,"chusheng",!1)},this.view.m_Window.m_spineNode.node),h.UtilCC.instantiatePrefab(l.DataSpineAniPath.ANI_MATCH_SHARE_SIGN_IN_NORMAL_SHARE_BTN,function(t){var e=t.getComponent(sp.Skeleton);e.setCompleteListener(function(t){"chusheng"===(t.animation?t.animation.name:"")&&e.setAnimation(0,"loop",!0)}),e.setAnimation(0,"chusheng",!1)},this.view.m_Window.m_btnShare.m_spineNode.node)},e.prototype.playShowTween=function(){var t=this;this.view.m_Window.m_btnClose.visible=!1,cc.tween(this.view.m_Window.m_btnClose).delay(.067).call(function(){t.view.m_Window.m_btnClose.visible=!0}).start()},e.prototype.onDestroy=function(){cc.Tween.stopAllByTarget(this.view.m_Window.m_btnClose),t.prototype.onDestroy.call(this)},i([jsClass],e)}(s.FadeUI);n.default=y,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataSpineAni":"DataSpineAni","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Share/ShareManager":"ShareManager","../Base/Utils/UtilCC":"UtilCC","../Match/MatchConstant":"MatchConstant","../Match/MatchModel":"MatchModel","./MatchShareModel":"MatchShareModel","./MatchShareSignInNormalUI/MatchShareSignInNormalUIBinder":"MatchShareSignInNormalUIBinder"}],MatchShareSkyFallTicketUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"f3fecJkbKBFFIF7XWo8rOn/","MatchShareSkyFallTicketUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./MatchShareSkyFallTicketUI_BtnAward"),a=t("./MatchShareSkyFallTicketUI_MainPanel"),i=t("./MatchShareSkyFallTicketUI_Window"),r=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default)},t}();n.default=r,cc._RF.pop()},{"./MatchShareSkyFallTicketUI_BtnAward":"MatchShareSkyFallTicketUI_BtnAward","./MatchShareSkyFallTicketUI_MainPanel":"MatchShareSkyFallTicketUI_MainPanel","./MatchShareSkyFallTicketUI_Window":"MatchShareSkyFallTicketUI_Window"}],MatchShareSkyFallTicketUI_BtnAward:[function(t,e,n){"use strict";cc._RF.push(e,"309e4pKPL1Oyov3NPAHViKY","MatchShareSkyFallTicketUI_BtnAward");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareSkyFallTicketUI","BtnAward")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(0)},e.URL="ui://ac659rcwv02o1",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],MatchShareSkyFallTicketUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"ab70dcAkT5OFo1kfNGI4LAY","MatchShareSkyFallTicketUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareSkyFallTicketUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1)},e.URL="ui://ac659rcwv02o3",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareSkyFallTicketUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"7e1acrceBBL66L4y/nPI3D/","MatchShareSkyFallTicketUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareSkyFallTicketUI","Window")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(0),this.m_btnAward=this.getChildAt(1),this.m_btnClose=this.getChildAt(2),this.m_txtAward0=this.getChildAt(3),this.m_txtAward1=this.getChildAt(4),this.m_txtContent=this.getChildAt(5)},e.URL="ui://ac659rcwv02o4",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareSkyFallTicketUI:[function(t,e,n){"use strict";cc._RF.push(e,"919f7cjZm1FZLEURxbMCnx1","MatchShareSkyFallTicketUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Framework/UI/FadeUI"),s=t("../Base/Data/DataProps"),c=t("../Base/Data/DataSpineAni"),l=t("../Base/Module/BfAnalytics/BfasManager"),u=t("../Base/Module/BfAnalytics/DataPointID"),d=t("../Base/Module/Popup/PopupManager"),p=t("../Base/Utils/UtilCC"),h=t("../Match/MatchModel"),_=t("./MatchShareModel"),f=t("./MatchShareSkyFallTicketUI/MatchShareSkyFallTicketUIBinder"),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){f.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initUI(),this.initAni(),l.BfasManager.instance.sendEvt(u.MatchSkyFallTicketPointID.SHOW)},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onBtnCloseClick,this),this.view.m_Window.m_btnAward.onClick(this.onBtnAwardClick,this)},e.prototype.onBtnCloseClick=function(){l.BfasManager.instance.sendEvt(u.MatchSkyFallTicketPointID.CLICK_CLOSE),this.onExitClick()},e.prototype.onBtnAwardClick=function(){l.BfasManager.instance.sendEvt(u.MatchSkyFallTicketPointID.CLICK_AWARD),_.MatchShareModel.instance.reqMatchShareAward(_.MatchShareType.SkyFallTicket,h.MatchTypeEnum.FIX_PLAYER,null,null,function(t){t&&(d.PopupManager.instance.stopPopup(),h.MatchModel.instance.openMatchUI({scene:h.EnterMatchSceneEnum.FIX_PLAYER}))})},e.prototype.initUI=function(){var t=this.getAwardText(s.PropIDEnum.TICKET_GOLDEN_EGG),e=this.getAwardText(s.PropIDEnum.TICKET_PHONE_FEE);this.view.m_Window.m_txtAward0.text=t,this.view.m_Window.m_txtAward1.text=e,this.view.m_Window.m_txtContent.text="        \u60a8\u597d\uff0c\u606d\u559c\u60a8\u88ab\u514d\u8d39\u95e8\u7968\u7838\u4e2d\u5566\uff0c\u8d60\u9001\u60a8[color=#e52e07]"+t+"\u3001"+e+"[/color]\uff0c\u6bd4\u8d5b\u5df2\u5168\u65b0\u4e0a\u7ebf\uff0c\u65e0\u9700\u4e45\u7b49\uff0c\u79d2\u5f00\u8d5b\u3002\u6bd4\u8d5b\u75af\u72c2\u7206\u91d1\u86cb\uff0c\u5feb\u6765\u8d62\u91d1\u86cb\u5151\u8c6a\u793c\u5427~"},e.prototype.getAwardText=function(t){return s.DataProps.instance.getPropName(t)+"x"+_.MatchShareModel.instance.getSkyFallTicketCnt(t)},e.prototype.initAni=function(){p.UtilCC.instantiatePrefab(c.DataSpineAniPath.ANI_BTN_YELLOW2,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"loop",!0)},this.view.m_Window.m_btnAward.m_spineNode.node)},i([jsClass],e)}(r.FadeUI);n.default=m,cc._RF.pop()},{"../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataProps":"DataProps","../Base/Data/DataSpineAni":"DataSpineAni","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Popup/PopupManager":"PopupManager","../Base/Utils/UtilCC":"UtilCC","../Match/MatchModel":"MatchModel","./MatchShareModel":"MatchShareModel","./MatchShareSkyFallTicketUI/MatchShareSkyFallTicketUIBinder":"MatchShareSkyFallTicketUIBinder"}],MatchShareTicketUI:[function(t,e,n){"use strict";cc._RF.push(e,"58a11/OpP1MKaefKfLxKMYp","MatchShareTicketUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.MatchShareTicketUIType=void 0;var r,s=t("../../Framework/Manager/EventManager"),c=t("../../Framework/UI/FadeUI"),l=t("../Base/Data/DataEvent"),u=t("../Base/Data/DataProps"),d=t("../Base/Data/DataSpineAni"),p=t("../Base/Module/BfAnalytics/BfasManager"),h=t("../Base/Module/BfAnalytics/DataPointID"),_=t("../Base/Module/Share/ShareManager"),f=t("../Base/Utils/UtilCC"),m=t("../Base/View/UIHelp"),g=t("../Hall/HallModel"),y=t("../Match/MatchModel"),I=t("./MatchShareModel"),C=t("./MatchShareUI/MatchShareUIBinder");(function(t){t[t.NONE=-1]="NONE",t[t.SHARE=0]="SHARE",t[t.ASSIST=1]="ASSIST",t[t.INVITE=2]="INVITE"})(r=n.MatchShareTicketUIType||(n.MatchShareTicketUIType={}));var M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){C.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.getPkgName=function(){return"MatchShareUI"},e.getCompName=function(){return cc.js.getClassName(this)+"_MainPanel"},Object.defineProperty(e.prototype,"model",{get:function(){return I.MatchShareModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),this.view.m_Window.m_btnShare.onClick(this.onBtnShareClick,this)},e.prototype.onBtnShareClick=function(){var t=this,e=this.view.m_Window.m_cType.selectedIndex;if(r.SHARE===e){p.BfasManager.instance.sendEvt(h.MatchTicketSharePointID.SHARE_CLICK_SHARE,{scene:this._scene});var n=y.MatchTypeEnum.FIX_PLAYER===this._matchType?_.ShareType.goldenEggTicketShare:_.ShareType.welfareTicketShare;_.ShareManager.instance.share(n,null,function(e,n){(n||cc.sys.OS_IOS===cc.sys.os)&&t.reqMatchShareAward(I.MatchShareType.InstantShare)})}else if(r.ASSIST===e)p.BfasManager.instance.sendEvt(h.MatchTicketSharePointID.ASSIST_CLICK_SHARE,{scene:this._scene}),_.ShareManager.instance.share(y.MatchTypeEnum.FIX_PLAYER===this._matchType?_.ShareType.goldenEggTicketAssist:_.ShareType.welfareTicketAssist,null,function(t,e){(e||cc.sys.OS_IOS===cc.sys.os)&&s.EventManager.instance.emit(l.DataEvent.ToastData,"\u5206\u4eab\u6210\u529f")});else{var o=g.default.instance.getUserNickName();p.BfasManager.instance.sendEvt(h.MatchTicketSharePointID.INVITE_CLICK_SHARE,{scene:this._scene}),_.ShareManager.instance.share(y.MatchTypeEnum.FIX_PLAYER===this._matchType?_.ShareType.goldenEggTicketInvite:_.ShareType.welfareTicketInvite,{titleArgs:[m.UIHelp.formatNicknameL(o)]},function(t,e){(e||cc.sys.OS_IOS===cc.sys.os)&&s.EventManager.instance.emit(l.DataEvent.ToastData,"\u5206\u4eab\u6210\u529f")})}},e.prototype.reqMatchShareAward=function(t){var e=this,n=this.model.getTicketShareAwardCnt(this._matchType),o=this._matchType===y.MatchTypeEnum.FIX_PLAYER?u.PropIDEnum.TICKET_GOLDEN_EGG:u.PropIDEnum.TICKET_PHONE_FEE,a={props:{}};a.props[o]=n,this.model.reqMatchShareAward(t,this._matchType,null,null,function(t){t&&e.onExitClick()},a,this._success)},e.prototype.init=function(t,e,n){this._matchType=t,this._scene=e,this._success=n;var o=this.getMatchShareTicketUIType(t);r.NONE!==o?(this.view.m_Window.m_cMatchType.selectedIndex=y.MatchTypeEnum.FIX_PLAYER===t?0:1,this.view.m_Window.m_cType.selectedIndex=o,this.updateAward(),this.initAni(),r.SHARE===o?p.BfasManager.instance.sendEvt(h.MatchTicketSharePointID.SHOW_SHARE,{scene:this._scene}):r.ASSIST===o?p.BfasManager.instance.sendEvt(h.MatchTicketSharePointID.SHOW_ASSIST,{scene:this._scene}):p.BfasManager.instance.sendEvt(h.MatchTicketSharePointID.SHOW_INVITE,{scene:this._scene})):this.onExitClick()},e.prototype.initAni=function(){this.view.m_Window.m_spineNode.node.removeAllChildren(),f.UtilCC.instantiatePrefab(d.DataSpineAniPath.ANI_MATCH_SHARE_TITLE,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"duan",!0)},this.view.m_Window.m_spineNode.node)},e.prototype.updateAward=function(){var t=this.model.getTicketShareAwardCnt(this._matchType),e=this._matchType===y.MatchTypeEnum.FIX_PLAYER?u.PropIDEnum.TICKET_GOLDEN_EGG:u.PropIDEnum.TICKET_PHONE_FEE,n=u.DataProps.instance.getPropName(e)||"\u53c2\u8d5b\u5238";this.view.m_Window.m_txtAward.text=n+"x"+t,this.view.m_Window.m_btnShare.title="\u7acb\u5373\u5206\u4eab"},e.prototype.getMatchShareTicketUIType=function(t){var e=y.MatchTypeEnum.FIX_PLAYER===t?this.model.matchGoldenEggShareInfo:this.model.matchWelfareShareInfo;return e?this.hasShareCnt(t,I.MatchShareType.InstantShare,e)?r.SHARE:this.hasShareCnt(t,I.MatchShareType.InviteHelp,e)?r.ASSIST:this.hasShareCnt(t,I.MatchShareType.InviteNewUserGotTicket,e)?r.INVITE:r.NONE:r.NONE},e.prototype.hasShareCnt=function(t,e,n){return this.model.isMatchShareOpen(t,e)&&0!==n[e]},i([jsClass],e)}(c.FadeUI);n.default=M,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataProps":"DataProps","../Base/Data/DataSpineAni":"DataSpineAni","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Share/ShareManager":"ShareManager","../Base/Utils/UtilCC":"UtilCC","../Base/View/UIHelp":"UIHelp","../Hall/HallModel":"HallModel","../Match/MatchModel":"MatchModel","./MatchShareModel":"MatchShareModel","./MatchShareUI/MatchShareUIBinder":"MatchShareUIBinder"}],MatchShareUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"1dbe21oj6BG/5aVKdhoFV6+","MatchShareUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./MatchShareUI_MatchShareTicketUI_MainPanel"),a=t("./MatchShareUI_MatchShareCreditUI_MainPanel"),i=t("./MatchShareUI_MatchShareCreditUI"),r=t("./MatchShareUI_MatchShareTicketUI"),s=t("./MatchShareUI_btnShare"),c=t("./MatchShareUI_MatchShareFreeTicketUI"),l=t("./MatchShareUI_MatchShareFreeTicketUI_MainPanel"),u=t("./MatchShareUI_MatchExchangeTicketUI"),d=t("./MatchShareUI_MatchExchangeTicketUI_MainPanel"),p=t("./MatchShareUI_btnExchange"),h=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default),fgui.UIObjectFactory.setExtension(l.default.URL,l.default),fgui.UIObjectFactory.setExtension(u.default.URL,u.default),fgui.UIObjectFactory.setExtension(d.default.URL,d.default),fgui.UIObjectFactory.setExtension(p.default.URL,p.default)},t}();n.default=h,cc._RF.pop()},{"./MatchShareUI_MatchExchangeTicketUI":"MatchShareUI_MatchExchangeTicketUI","./MatchShareUI_MatchExchangeTicketUI_MainPanel":"MatchShareUI_MatchExchangeTicketUI_MainPanel","./MatchShareUI_MatchShareCreditUI":"MatchShareUI_MatchShareCreditUI","./MatchShareUI_MatchShareCreditUI_MainPanel":"MatchShareUI_MatchShareCreditUI_MainPanel","./MatchShareUI_MatchShareFreeTicketUI":"MatchShareUI_MatchShareFreeTicketUI","./MatchShareUI_MatchShareFreeTicketUI_MainPanel":"MatchShareUI_MatchShareFreeTicketUI_MainPanel","./MatchShareUI_MatchShareTicketUI":"MatchShareUI_MatchShareTicketUI","./MatchShareUI_MatchShareTicketUI_MainPanel":"MatchShareUI_MatchShareTicketUI_MainPanel","./MatchShareUI_btnExchange":"MatchShareUI_btnExchange","./MatchShareUI_btnShare":"MatchShareUI_btnShare"}],MatchShareUI_MatchExchangeTicketUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"44303T1Vf1LKqmIfX4xhcDs","MatchShareUI_MatchExchangeTicketUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareUI","MatchExchangeTicketUI_MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://clc17kv5rlb51p",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareUI_MatchExchangeTicketUI:[function(t,e,n){"use strict";cc._RF.push(e,"97ffdPrUVtK2KZC5+mrYkfV","MatchShareUI_MatchExchangeTicketUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareUI","MatchExchangeTicketUI")},e.prototype.onConstruct=function(){this.m_cMatchType=this.getControllerAt(0),this.m_btnClose=this.getChildAt(4),this.m_btnExchange=this.getChildAt(5),this.m_spineNode=this.getChildAt(7),this.m_txtAward=this.getChildAt(8)},e.URL="ui://clc17kv5rlb51o",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareUI_MatchShareCreditUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"f81c2Y+9pVPDYqen4RFkK9I","MatchShareUI_MatchShareCreditUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareUI","MatchShareCreditUI_MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://clc17kv5eywb8",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareUI_MatchShareCreditUI:[function(t,e,n){"use strict";cc._RF.push(e,"2cbe1e+r89DPI0ur3CuWA9i","MatchShareUI_MatchShareCreditUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareUI","MatchShareCreditUI")},e.prototype.onConstruct=function(){this.m_cType=this.getControllerAt(0),this.m_btnClose=this.getChildAt(7),this.m_btnShare=this.getChildAt(8),this.m_spineNode=this.getChildAt(9),this.m_txtAward=this.getChildAt(10)},e.URL="ui://clc17kv5eywb9",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareUI_MatchShareFreeTicketUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"5e62eUlhe1Np71pZD5pAfiO","MatchShareUI_MatchShareFreeTicketUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareUI","MatchShareFreeTicketUI_MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://clc17kv5mbor1k",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareUI_MatchShareFreeTicketUI:[function(t,e,n){"use strict";cc._RF.push(e,"c3e63Zv9K1AeISkTRQ97oOG","MatchShareUI_MatchShareFreeTicketUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareUI","MatchShareFreeTicketUI")},e.prototype.onConstruct=function(){this.m_cMatchType=this.getControllerAt(0),this.m_imgAdd=this.getChildAt(3),this.m_btnClose=this.getChildAt(4),this.m_btnShare=this.getChildAt(5),this.m_awardItem0=this.getChildAt(6),this.m_awardItem1=this.getChildAt(7),this.m_btnSelect=this.getChildAt(8),this.m_spineNode=this.getChildAt(9),this.m_Double=this.getTransitionAt(0),this.m_Single=this.getTransitionAt(1)},e.URL="ui://clc17kv5mbor1j",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareUI_MatchShareTicketUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"1c3e8eVpudKXYaVwNVI3pXD","MatchShareUI_MatchShareTicketUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareUI","MatchShareTicketUI_MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://clc17kv5eywb7",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareUI_MatchShareTicketUI:[function(t,e,n){"use strict";cc._RF.push(e,"89ba7cpbadHwKsAMoFKvtQb","MatchShareUI_MatchShareTicketUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareUI","MatchShareTicketUI")},e.prototype.onConstruct=function(){this.m_cType=this.getControllerAt(0),this.m_cMatchType=this.getControllerAt(1),this.m_btnClose=this.getChildAt(5),this.m_btnShare=this.getChildAt(6),this.m_spineNode=this.getChildAt(8),this.m_txtAward=this.getChildAt(9)},e.URL="ui://clc17kv5eywba",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchShareUI_btnExchange:[function(t,e,n){"use strict";cc._RF.push(e,"454829FlARGkp4F9yBOKbeh","MatchShareUI_btnExchange");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareUI","btnExchange")},e.prototype.onConstruct=function(){this.m_btn_swweep=this.getTransitionAt(0)},e.URL="ui://clc17kv5rlb51q",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],MatchShareUI_btnShare:[function(t,e,n){"use strict";cc._RF.push(e,"7eb53Vl6FNM24JpHjWcBBvH","MatchShareUI_btnShare");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchShareUI","btnShare")},e.prototype.onConstruct=function(){this.m_btn_swweep=this.getTransitionAt(0)},e.URL="ui://clc17kv5jt5r1g",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],MatchUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"2af07BPlcpHz6fCOaEfpq3T","MatchUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./MatchUI_MatchRound"),a=t("./MatchUI_RoundButton"),i=t("./MatchUI_MatchTableItem"),r=t("./MatchUI_MatchBottom"),s=t("./MatchUI_RoundPlayer"),c=t("./MatchUI_RoundPlayerItem"),l=t("./MatchUI_MatchStartAni"),u=t("./MatchUI_MatchTypeButton"),d=t("./MatchUI_titleButton"),p=t("./MatchUI_EnrollButton"),h=t("./MatchUI_MatchSign"),_=t("./MatchUI_MatchInfo"),f=t("./MatchUI_AwardInfo"),m=t("./MatchUI_MainPanel"),g=t("./MatchUI_Window"),y=t("./MatchUI_Title"),I=t("./MatchUI_Matchlist"),C=t("./MatchUI_Exchange"),M=t("./MatchUI_MatchItem"),v=t("./MatchUI_ExchangeWordItem"),E=t("./MatchUI_BtnShareActivity"),A=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default),fgui.UIObjectFactory.setExtension(l.default.URL,l.default),fgui.UIObjectFactory.setExtension(u.default.URL,u.default),fgui.UIObjectFactory.setExtension(d.default.URL,d.default),fgui.UIObjectFactory.setExtension(p.default.URL,p.default),fgui.UIObjectFactory.setExtension(h.default.URL,h.default),fgui.UIObjectFactory.setExtension(_.default.URL,_.default),fgui.UIObjectFactory.setExtension(f.default.URL,f.default),fgui.UIObjectFactory.setExtension(m.default.URL,m.default),fgui.UIObjectFactory.setExtension(g.default.URL,g.default),fgui.UIObjectFactory.setExtension(y.default.URL,y.default),fgui.UIObjectFactory.setExtension(I.default.URL,I.default),fgui.UIObjectFactory.setExtension(C.default.URL,C.default),fgui.UIObjectFactory.setExtension(M.default.URL,M.default),fgui.UIObjectFactory.setExtension(v.default.URL,v.default),fgui.UIObjectFactory.setExtension(E.default.URL,E.default)},t}();n.default=A,cc._RF.pop()},{"./MatchUI_AwardInfo":"MatchUI_AwardInfo","./MatchUI_BtnShareActivity":"MatchUI_BtnShareActivity","./MatchUI_EnrollButton":"MatchUI_EnrollButton","./MatchUI_Exchange":"MatchUI_Exchange","./MatchUI_ExchangeWordItem":"MatchUI_ExchangeWordItem","./MatchUI_MainPanel":"MatchUI_MainPanel","./MatchUI_MatchBottom":"MatchUI_MatchBottom","./MatchUI_MatchInfo":"MatchUI_MatchInfo","./MatchUI_MatchItem":"MatchUI_MatchItem","./MatchUI_MatchRound":"MatchUI_MatchRound","./MatchUI_MatchSign":"MatchUI_MatchSign","./MatchUI_MatchStartAni":"MatchUI_MatchStartAni","./MatchUI_MatchTableItem":"MatchUI_MatchTableItem","./MatchUI_MatchTypeButton":"MatchUI_MatchTypeButton","./MatchUI_Matchlist":"MatchUI_Matchlist","./MatchUI_RoundButton":"MatchUI_RoundButton","./MatchUI_RoundPlayer":"MatchUI_RoundPlayer","./MatchUI_RoundPlayerItem":"MatchUI_RoundPlayerItem","./MatchUI_Title":"MatchUI_Title","./MatchUI_Window":"MatchUI_Window","./MatchUI_titleButton":"MatchUI_titleButton"}],MatchUI_AwardInfo:[function(t,e,n){"use strict";cc._RF.push(e,"5fd71cM/WhDpJ37I8fgYpyw","MatchUI_AwardInfo");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchUI","AwardInfo")},e.prototype.onConstruct=function(){this.m_btnAwardDetail=this.getChildAt(0),this.m_spineNodeTitle=this.getChildAt(2),this.m_txtName=this.getChildAt(3),this.m_txtRank1=this.getChildAt(5),this.m_txtRank2=this.getChildAt(6),this.m_txtRank3=this.getChildAt(7),this.m_txtRank4=this.getChildAt(8),this.m_imgRank3=this.getChildAt(9),this.m_imgRank2=this.getChildAt(10),this.m_imgRank4=this.getChildAt(11),this.m_imgRank1=this.getChildAt(12),this.m_spineNode=this.getChildAt(15)},e.URL="ui://ki4dq53mn574w",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchUI_BtnShareActivity:[function(t,e,n){"use strict";cc._RF.push(e,"9d7f3H66ttEMpSAER2HNKji","MatchUI_BtnShareActivity");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchUI","BtnShareActivity")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(1)},e.URL="ui://ki4dq53mxhfn46",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],MatchUI_EnrollButton:[function(t,e,n){"use strict";cc._RF.push(e,"06541eHtiNN5Jv+rmuXYIH0","MatchUI_EnrollButton");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchUI","EnrollButton")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(1),this.m_txtCost=this.getChildAt(4),this.m_fingerNode=this.getChildAt(5)},e.URL="ui://ki4dq53mn5742o",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],MatchUI_ExchangeWordItem:[function(t,e,n){"use strict";cc._RF.push(e,"a023bA3U+ZE14VP+pF2987l","MatchUI_ExchangeWordItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchUI","ExchangeWordItem")},e.prototype.onConstruct=function(){this.m_txtInfo=this.getChildAt(0)},e.URL="ui://ki4dq53mqkdw4i",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchUI_Exchange:[function(t,e,n){"use strict";cc._RF.push(e,"513b9S8w9ZMNauc2g4wCSS9","MatchUI_Exchange");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchUI","Exchange")},e.prototype.onConstruct=function(){this.m_cGoldenEgg=this.getControllerAt(0),this.m_spineNodeAd=this.getChildAt(1),this.m_btnExchange=this.getChildAt(2),this.m_btnShareActivity=this.getChildAt(3),this.m_listExchangeWord=this.getChildAt(5)},e.URL="ui://ki4dq53moj1go",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"c7154jZlfFBhrglA/jvJv/l","MatchUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchUI","MainPanel")},e.prototype.onConstruct=function(){this.m_bg=this.getChildAt(0),this.m_window=this.getChildAt(1)},e.URL="ui://ki4dq53moj1g0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchUI_MatchBottom:[function(t,e,n){"use strict";cc._RF.push(e,"b86f9lj8VBImZDvWE2dROSc","MatchUI_MatchBottom");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchUI","MatchBottom")},e.prototype.onConstruct=function(){this.m_cTextShow=this.getControllerAt(0),this.m_cType=this.getControllerAt(1),this.m_txtRankInfo=this.getChildAt(1),this.m_txtTabkeInfo=this.getChildAt(2),this.m_imgWin=this.getChildAt(3),this.m_imgLose=this.getChildAt(4),this.m_btnRank=this.getChildAt(6),this.m_txtPromotionInfo=this.getChildAt(7)},e.URL="ui://ki4dq53mce5b3w",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchUI_MatchInfo:[function(t,e,n){"use strict";cc._RF.push(e,"8bc10LWjF5LZb7iEBlxM6tk","MatchUI_MatchInfo");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchUI","MatchInfo")},e.prototype.onConstruct=function(){this.m_cMatchType=this.getControllerAt(0),this.m_csign=this.getControllerAt(1),this.m_cFreeEnroll=this.getControllerAt(2),this.m_btnCancel=this.getChildAt(3),this.m_btnFreeEnroll=this.getChildAt(4),this.m_btnEnroll=this.getChildAt(5),this.m_txtTitle=this.getChildAt(6),this.m_txtCountdown=this.getChildAt(7),this.m_imgTicket=this.getChildAt(8),this.m_txtTickCount=this.getChildAt(9),this.m_txtConditionTips=this.getChildAt(11),this.m_txtCondition=this.getChildAt(12),this.m_txtStartTime=this.getChildAt(14),this.m_txtWaitTime=this.getChildAt(16),this.m_txtJoinPlayerCount=this.getChildAt(18),this.m_txtPlayerCount=this.getChildAt(19),this.m_txtMaxPlayerCount=this.getChildAt(20)},e.URL="ui://ki4dq53mn574u",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchUI_MatchItem:[function(t,e,n){"use strict";cc._RF.push(e,"45e725QuyFHyofomLKeJI4p","MatchUI_MatchItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchUI","MatchItem")},e.prototype.onConstruct=function(){this.m_cBtnState=this.getControllerAt(1),this.m_csignFlag=this.getControllerAt(2),this.m_imgMark=this.getChildAt(4),this.m_txtName=this.getChildAt(5),this.m_txtPlayerCount=this.getChildAt(6),this.m_imgIcon=this.getChildAt(7)},e.URL="ui://ki4dq53moj1gs",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],MatchUI_MatchRound:[function(t,e,n){"use strict";cc._RF.push(e,"1c21cQ2zthHW6c1cqir5OTh","MatchUI_MatchRound");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchUI","MatchRound")},e.prototype.onConstruct=function(){this.m_tableList=this.getChildAt(0),this.m_bottom=this.getChildAt(1),this.m_playerRound=this.getChildAt(2)},e.URL="ui://ki4dq53mce5b3t",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchUI_MatchSign:[function(t,e,n){"use strict";cc._RF.push(e,"227e9YFnslFNpJZYylUKoaS","MatchUI_MatchSign");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchUI","MatchSign")},e.prototype.onConstruct=function(){this.m_matchDetail=this.getChildAt(0),this.m_awardInfo=this.getChildAt(1)},e.URL="ui://ki4dq53mn574t",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchUI_MatchStartAni:[function(t,e,n){"use strict";cc._RF.push(e,"2644aZaywRM0IWy7cMyqCzI","MatchUI_MatchStartAni");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchUI","MatchStartAni")},e.prototype.onConstruct=function(){this.m_aniHint=this.getTransitionAt(0)},e.URL="ui://ki4dq53mce5b45",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchUI_MatchTableItem:[function(t,e,n){"use strict";cc._RF.push(e,"44cfbTaX21KjIrSoT89H31a","MatchUI_MatchTableItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchUI","MatchTableItem")},e.prototype.onConstruct=function(){this.m_listRounds=this.getChildAt(0)},e.URL="ui://ki4dq53mce5b3v",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchUI_MatchTypeButton:[function(t,e,n){"use strict";cc._RF.push(e,"66652PeqX9H87iwC3yrJFWa","MatchUI_MatchTypeButton");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchUI","MatchTypeButton")},e.prototype.onConstruct=function(){this.m_cTitleType=this.getControllerAt(1),this.m_txtTime=this.getChildAt(2)},e.URL="ui://ki4dq53mn5741u",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],MatchUI_Matchlist:[function(t,e,n){"use strict";cc._RF.push(e,"dba5adCApVFt6mvAwaRS7s9","MatchUI_Matchlist");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchUI","Matchlist")},e.prototype.onConstruct=function(){this.m_cTopTab=this.getControllerAt(0),this.m_cHasMatch=this.getControllerAt(1),this.m_btnGoldenEgg=this.getChildAt(3),this.m_btnWelfare=this.getChildAt(4),this.m_listMatch=this.getChildAt(6)},e.URL="ui://ki4dq53moj1gn",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchUI_RoundButton:[function(t,e,n){"use strict";cc._RF.push(e,"cb28b+Ubq5CaK9zWWn+JAPm","MatchUI_RoundButton");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchUI","RoundButton")},e.prototype.onConstruct=function(){this.m_bg2=this.getChildAt(0),this.m_bg1=this.getChildAt(1)},e.URL="ui://ki4dq53mce5b3u",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],MatchUI_RoundPlayerItem:[function(t,e,n){"use strict";cc._RF.push(e,"5acb19bnJpEmoLIBxKpFQKP","MatchUI_RoundPlayerItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchUI","RoundPlayerItem")},e.prototype.onConstruct=function(){this.m_cFinal=this.getControllerAt(0),this.m_cRoundState=this.getControllerAt(1),this.m_cSelfPos=this.getControllerAt(2),this.m_cSelf=this.getControllerAt(3),this.m_bg=this.getChildAt(0),this.m_imgHead_0=this.getChildAt(1),this.m_imgHead_1=this.getChildAt(2),this.m_imgHead_2=this.getChildAt(3),this.m_imgHead_3=this.getChildAt(4),this.m_imgMarkWait_0=this.getChildAt(5),this.m_imgMarkWait_1=this.getChildAt(6),this.m_imgMarkWait_2=this.getChildAt(7),this.m_imgMarkWait_3=this.getChildAt(8),this.m_imgEscape_0=this.getChildAt(9),this.m_imgEscape_1=this.getChildAt(10),this.m_imgEscape_2=this.getChildAt(11),this.m_imgEscape_3=this.getChildAt(12),this.m_imgSelf=this.getChildAt(13),this.m_txtPanCount=this.getChildAt(14),this.m_txtState=this.getChildAt(15),this.m_txtTime=this.getChildAt(16),this.m_txtScore_0=this.getChildAt(17),this.m_txtScore_1=this.getChildAt(18),this.m_txtScore_2=this.getChildAt(19),this.m_txtScore_3=this.getChildAt(20),this.m_txtName_0=this.getChildAt(21),this.m_txtName_1=this.getChildAt(22),this.m_txtName_2=this.getChildAt(23),this.m_txtName_3=this.getChildAt(24)},e.URL="ui://ki4dq53mce5b40",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchUI_RoundPlayer:[function(t,e,n){"use strict";cc._RF.push(e,"77dc7QE2gxIZ7ETNR9NaDeF","MatchUI_RoundPlayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchUI","RoundPlayer")},e.prototype.onConstruct=function(){this.m_CRoundWait=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_aniWait=this.getChildAt(1),this.m_listPlayer=this.getChildAt(2)},e.URL="ui://ki4dq53mce5b3z",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchUI_Title:[function(t,e,n){"use strict";cc._RF.push(e,"afd844kv7dIuZCHV2w0R56/","MatchUI_Title");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchUI","Title")},e.prototype.onConstruct=function(){this.m_cIsNew=this.getControllerAt(0),this.m_cState=this.getControllerAt(1),this.m_btnClose=this.getChildAt(1),this.m_btnMatchRule=this.getChildAt(2),this.m_btnGoldenEgg=this.getChildAt(3),this.m_btnEggTicket=this.getChildAt(4),this.m_btnWelfareTicket=this.getChildAt(5),this.m_btnCredibilityRule=this.getChildAt(6),this.m_btnFeedback=this.getChildAt(7),this.m_btnMail=this.getChildAt(8),this.m_title=this.getChildAt(9),this.m_txtTitle=this.getChildAt(11),this.m_txtGoldenEgg=this.getChildAt(12),this.m_txtGoldenTicket=this.getChildAt(13),this.m_txtWelfareTicket=this.getChildAt(14),this.m_txtCurTime=this.getChildAt(15),this.m_txtCredibility=this.getChildAt(16),this.m_gTop=this.getChildAt(17)},e.URL="ui://ki4dq53moj1gm",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"ba3b1wiTThDdolrU3mO8mrz","MatchUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchUI","Window")},e.prototype.onConstruct=function(){this.m_cUIstate=this.getControllerAt(0),this.m_title=this.getChildAt(0),this.m_matchSign=this.getChildAt(1),this.m_matchround=this.getChildAt(2),this.m_exchange=this.getChildAt(3),this.m_matchlist=this.getChildAt(4)},e.URL="ui://ki4dq53moj1gl",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MatchUI_titleButton:[function(t,e,n){"use strict";cc._RF.push(e,"13156dSIeNGHob0Kt6cMgPG","MatchUI_titleButton");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MatchUI","titleButton")},e.prototype.onConstruct=function(){this.m_plus=this.getControllerAt(1)},e.URL="ui://ki4dq53mn5741x",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],MatchUI:[function(t,e,n){"use strict";cc._RF.push(e,"7afb6cZEbtKx5aYU9cipmnB","MatchUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function r(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.MatchUI=void 0;var l,u,d,p,h,_,f,m=t("../../Framework/UI/FadeUI"),g=t("./MatchModel"),y=t("../Base/Data/DataProps"),I=t("../../Framework/Manager/CoroutineManager"),C=t("../Base/Utils/UtilTime"),M=t("../../Framework/Manager/UIManager"),v=t("../Mail/MailUI"),E=t("./MatchAwardDetailUI"),A=t("./MatchRuleUI"),P=t("../ExchangeUI/ExchangeShopUI"),b=t("../Base/View/UIHelp"),U=t("./MatchRankUI"),S=t("../../Framework/Manager/EventManager"),T=t("../Base/Data/DataEvent"),R=t("./MatchConstant"),w=t("../MatchShare/MatchShareModel"),D=t("./MatchUtils"),O=t("../Mail/MailModel"),L=t("../Login/LoginModel"),G=t("../Base/Module/BfAnalytics/BfasManager"),B=t("../Base/Module/BfAnalytics/DataPointID"),N=t("../Base/Utils/UtilCC"),F=t("../Base/Data/DataSpineAni"),k=t("../FeedBack/FeedBackSuggUI"),x=t("../UserInfo/UserInfoModel"),j=t("./MatchHintUI/TopHintUI"),H=t("../Base/Module/Share/ShareManager"),W=t("../Base/Data/DataBfConfig"),Y=t("../Base/Data/DataLocalStorageKey"),V=t("../Base/Data/DataConstant"),q=t("../Base/Data/DataClubClientConfig"),K=t("../MatchShare/MatchExchangeTicketUI"),X=t("./MatchHintUI/TimeMatchTopHint"),J=t("./MatchHintUI/CountDownUI"),z=t("../Base/View/Common/DialogUI");(function(t){t[t.HALL=0]="HALL",t[t.SIGN=1]="SIGN",t[t.ROUND=2]="ROUND"})(l||(l={})),function(t){t[t.NOT_SIGH=0]="NOT_SIGH",t[t.HAD_SIGH=1]="HAD_SIGH"}(u||(u={})),function(t){t[t.HAS_MATCH=0]="HAS_MATCH",t[t.NO_MATCH=1]="NO_MATCH"}(d||(d={})),function(t){t[t.END=0]="END",t[t.START=1]="START",t[t.DISSMIS=2]="DISSMIS"}(p||(p={})),function(t){t[t.SHOW=0]="SHOW",t[t.HIDE=1]="HIDE"}(h||(h={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(_||(_={})),function(t){t[t.WIN=0]="WIN",t[t.LOSE=1]="LOSE",t[t.NOT_JOIN=2]="NOT_JOIN"}(f||(f={}));var Q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._coMatchHint=null,e._coTimer=null,e._coMatchCountdown=null,e._selectRound=0,e._coTableTime=null,e}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return g.MatchModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initAni(),this.startCheckHint(),w.MatchShareModel.instance.showEnterMatchGainTicket(),S.EventManager.instance.emit(R.MatchDataEvent.MatchHideHall)},e.prototype.onDestroy=function(){this.stopCoroutine(),t.prototype.onDestroy.call(this)},e.prototype.stopCoroutine=function(){this.stopTimer(),this.stopCountdown(),this.stopTableTimer(),this.stopCheckHint()},e.prototype.initListener=function(){S.EventManager.instance.on(R.MatchDataEvent.MatchStarted,this,this.onMatchStarted),S.EventManager.instance.on(R.MatchDataEvent.MatchApplyJoin,this,this.onMatchApplyJoin),S.EventManager.instance.on(T.DataEvent.GoldenEggInfo,this,this.updateBtnShareActivity),S.EventManager.instance.on(R.MatchDataEvent.MatchInfoUpdate,this,this.onMatchInfoUpdate),S.EventManager.instance.on(R.MatchDataEvent.MatchTableUpdate,this,this.onMatchTableUpdate),S.EventManager.instance.on(R.MatchDataEvent.SyncMatchStart,this,this.onSyncMatchStart),S.EventManager.instance.on(R.MatchDataEvent.SyncMatchCredit,this,this.onSyncMatchCredit),S.EventManager.instance.on(R.MatchDataEvent.MatchKickOut,this,this.onMatchKickOut),S.EventManager.instance.on(T.DataEvent.HallMailRedStatus,this,this.onUpdateMailRed),S.EventManager.instance.on(T.DataEvent.UpdateProp,this,this.onUpdateProp),S.EventManager.instance.on(T.DataEvent.LoginSuccess,this,this.onRelogin),S.EventManager.instance.on(R.MatchDataEvent.SyncMatchProp,this,this.onSyncPropUpdate),S.EventManager.instance.on(R.MatchDataEvent.ExitMatchDetail,this,this.onExitMatchDetail),S.EventManager.instance.on(R.MatchDataEvent.SyncSelfRankInfo,this,this.onSyncSelfRankInfo),S.EventManager.instance.on(R.MatchDataEvent.MatchCheckInFail,this,this.onMatchCheckInFail),S.EventManager.instance.on(R.MatchDataEvent.MatchRoundUpdate,this,this.updateMatchRound),S.EventManager.instance.on(R.MatchDataEvent.MatchStartHint3,this,this.onMatchStartHint),S.EventManager.instance.on(R.MatchDataEvent.MatchExchangeLog,this,this.updateExchangeBannerWord),this.view.m_window.m_title.m_btnClose.onClick(this.onClickClose,this),this.view.m_window.m_title.m_btnMatchRule.onClick(this.onClickMatchRule,this),this.view.m_window.m_title.m_btnEggTicket.onClick(this.onEggTicketClick,this),this.view.m_window.m_title.m_btnWelfareTicket.onClick(this.onWelfareTicketClick,this),this.view.m_window.m_title.m_btnCredibilityRule.onClick(this.onClickCredibilityRule,this),this.view.m_window.m_title.m_btnFeedback.onClick(this.onBtnFeedback,this),this.view.m_window.m_title.m_btnMail.onClick(this.onClickMail,this),this.view.m_window.m_exchange.m_btnExchange.onClick(this.onClickExchange,this),this.view.m_window.m_exchange.m_btnShareActivity.onClick(this.onClickShareActivity,this),this.view.m_window.m_matchlist.m_btnGoldenEgg.onClick(this.onClickGoldenEgg,this),this.view.m_window.m_matchlist.m_btnWelfare.onClick(this.onClickWelfare,this),this.view.m_window.m_matchSign.m_awardInfo.m_btnAwardDetail.onClick(this.onClickAwardDetail,this),this.view.m_window.m_matchSign.m_matchDetail.m_btnEnroll.onClick(this.onClickEnroll,this),this.view.m_window.m_matchSign.m_matchDetail.m_btnFreeEnroll.onClick(this.onClickFreeEnroll,this),this.view.m_window.m_matchSign.m_matchDetail.m_btnCancel.onClick(this.onClickCancelEnroll,this),this.view.m_window.m_matchround.m_bottom.m_btnRank.onClick(this.onClickRank,this)},e.prototype.initUI=function(t){this.updateTitle(),this.updateBtnShareActivity(),this.updateMatchList(),this.checkEnterMatchScene(t),this.updateExchangeBannerWord()},e.prototype.initAni=function(){N.UtilCC.instantiatePrefab(F.DataSpineAniPath.ANI_MATCH_JIANGTAI,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"jiangtai",!0)},this.view.m_window.m_matchSign.m_awardInfo.m_spineNode.node),N.UtilCC.instantiatePrefab(F.DataSpineAniPath.ANI_MATCH_BTN_SIGN,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"btn_xiao",!0)},this.view.m_window.m_matchSign.m_matchDetail.m_btnEnroll.m_spineNode.node),N.UtilCC.instantiatePrefab(F.DataSpineAniPath.ANI_MATCH_EXCHANGE_AD,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"dbs",!0)},this.view.m_window.m_exchange.m_spineNodeAd.node),this.view.m_window.m_exchange.m_btnShareActivity.m_spineNode.node.removeAllChildren(),N.UtilCC.instantiatePrefab(F.DataSpineAniPath.ANI_GOLDENEGG_ICON,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"banner",!0)},this.view.m_window.m_exchange.m_btnShareActivity.m_spineNode.node);var t=Y.DataLocalStorage.addKeyWithNumID(Y.LocalStorageKey.MATCH_SIGN_BTN_GUIDE);0==(+localStorage.getItem(t)||0)&&(localStorage.setItem(Y.DataLocalStorage.addKeyWithNumID(Y.LocalStorageKey.MATCH_SIGN_BTN_GUIDE),1..toString()),N.UtilCC.instantiatePrefab(F.DataSpineAniPath.ANI_GUIDE_FINGER,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"ShouDianJi",!0)},this.view.m_window.m_matchSign.m_matchDetail.m_btnEnroll.m_fingerNode.node))},e.prototype.startCheckHint=function(){var t=this;this._coMatchHint&&I.CoroutineManager.instance.stopCo(this._coMatchHint),this._coMatchHint=I.CoroutineManager.instance.loop(1,function(){t.model.checkAllMatchHintTime()},this)},e.prototype.stopCheckHint=function(){this._coMatchHint&&I.CoroutineManager.instance.stopCo(this._coMatchHint),this._coMatchHint=null},e.prototype.refreshMatchHall=function(){var t=this;this.model.reqGetMatchList(function(){t.updateTitle(),t.updateBtnShareActivity(),t.updateMatchList(),t.checkEnterMatchScene()}),this.updateExchangeBannerWord()},e.prototype.checkEnterMatchScene=function(t){var e=this;if((null==t?void 0:t.matchID)&&(null==t?void 0:t.matchSubID)){var n=this.model.getMatchData(t.matchID,t.matchSubID);return this.selectMatchType(null==n?void 0:n.awardtype),void this.doHallGoSignMatch(t.matchID,t.matchSubID,function(n){if(n&&t.scene===g.EnterMatchSceneEnum.ENROLL){var o=e.model.getCurMatchData();if(o&&o.sign_rule&&o.match_state===g.MatchStateEnum.GO_SIGN&&o.sign_state===g.SignStateEnum.NOT_SIGN&&!(e.model.getCurMatchPlayCnt()>=o.sign_rule.max||e.model.getCredibility()<e.model.getEnrollCreditLimit())){var a=e.model.getTicketCost(o.mid,o.msid);a&&(a.propCnt>e.model.getTickets(o.type)||e.model.checkSignTimeMatch(g.CDefaultCheckSignTime)||e.applyJoinGDMatch(!1))}}})}switch(null==t?void 0:t.scene){case g.EnterMatchSceneEnum.ROUND:this.showMatchRoundUI();break;case g.EnterMatchSceneEnum.FIX_PLAYER:this.guideToSignInOrMatchList([g.MatchAwardTypeEnum.GOLDEN_EGG]);break;case g.EnterMatchSceneEnum.FIX_TIME:this.guideToSignInOrMatchList([g.MatchAwardTypeEnum.WELFARE]);break;case g.EnterMatchSceneEnum.GUIDE:this.guideToSignInOrMatchList([g.MatchAwardTypeEnum.WELFARE,g.MatchAwardTypeEnum.GOLDEN_EGG]);break;default:this.selectMatchType(this.model.getUILastMatchType())}},e.prototype.guideToSignInOrMatchList=function(t){var e,n,o=g.MatchAwardTypeEnum.GOLDEN_EGG;try{for(var a=c(t),i=a.next();!i.done;i=a.next()){var r=i.value;o=r;var s=this.findCanSignInMatch(r);if(s)return this.doHallGoSignMatch(s.mid,s.msid),void this.selectMatchType(o)}}catch(l){e={error:l}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}this.selectMatchType(o)},e.prototype.findCanSignInMatch=function(t){var e=this.model.getMatchListByAwardType(t);return null==e?void 0:e.find(function(t){return t.match_state==g.MatchStateEnum.GO_SIGN})},e.prototype.updateTitle=function(){this.updateProp(),this.startTimer(),this.updateCredibility(),this.updateMail()},e.prototype.updateProp=function(){var t=this.model.getGoldenEgg();this.view.m_window.m_title.m_txtGoldenEgg.text=t.toString();var e=this.model.getTickets(g.MatchTypeEnum.FIX_PLAYER);this.view.m_window.m_title.m_txtGoldenTicket.text=e.toString();var n=this.model.getTickets(g.MatchTypeEnum.FIX_TIME);this.view.m_window.m_title.m_txtWelfareTicket.text=n.toString()},e.prototype.startTimer=function(){var t=this;this._coTimer&&I.CoroutineManager.instance.stopCo(this._coTimer),this._coTimer=I.CoroutineManager.instance.loop(1,function(){t.updateTime()},this)},e.prototype.stopTimer=function(){this._coTimer&&I.CoroutineManager.instance.stopCo(this._coTimer),this._coTimer=null},e.prototype.updateTime=function(){var t=C.UtilTime.getCurrTime("hh:mm:ss");this.view.m_window.m_title.m_txtCurTime.text=t},e.prototype.updateCredibility=function(){var t=this.model.getCredibility();this.view.m_window.m_title.m_txtCredibility.text="\u4fe1\u8a89\u5206:"+t},e.prototype.updateMail=function(){O.MailModel.instance.pullMail()},e.prototype.updateBtnShareActivity=function(){this.view.m_window.m_exchange.m_cGoldenEgg.selectedIndex=w.MatchShareModel.instance.isGoldenEggAwardGot()?1:0},e.prototype.updateExchangeBannerWord=function(){var t=this;this.model.reqGetMatchLogExchange(function(e,n){var o,a;if(e){if(!n||n.length<=0||0==Object.keys(n).length)return;var i=[],r=0;try{for(var s=c(n),l=s.next();!l.done;l=s.next()){var u=l.value;if(r>=3)break;var d=u.split(",")||[];if(2===d.length){var p="\u606d\u559c[color=#C5AE90]"+b.UIHelp.formatNicknameS(d[0])+"[/color]\u6210\u529f\u5151\u6362[color=#C5AE90]"+b.UIHelp.formatNicknameS(d[1])+"[/color]";i.push(p),r++}}}catch(_){o={error:_}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}if(i.length>0){var h=t.view.m_window.m_exchange.m_listExchangeWord;h.itemRenderer=function(t,e){e.m_txtInfo.text=i[t]},h.numItems=i.length}}})},e.prototype.updateMatchList=function(){var t=g.MatchModel.instance.getStartMatchList(3600);t.length>0?(this.view.m_window.m_matchlist.m_btnWelfare.m_cTitleType.selectedIndex=g.MatchAwardTypeEnum.WELFARE,this.view.m_window.m_matchlist.m_btnWelfare.m_txtTime.text="("+t[0].time+"\u5f00\u8d5b)"):this.view.m_window.m_matchlist.m_btnWelfare.m_cTitleType.selectedIndex=g.MatchAwardTypeEnum.GOLDEN_EGG},e.prototype.selectMatchType=function(t){switch(t){case g.MatchAwardTypeEnum.GOLDEN_EGG:this.refresMatchList(g.MatchAwardTypeEnum.GOLDEN_EGG);break;case g.MatchAwardTypeEnum.WELFARE:this.refresMatchList(g.MatchAwardTypeEnum.WELFARE);break;default:return}},e.prototype.refresMatchList=function(t){var e=this.model.getMatchListByAwardType(t);this.view.m_window.m_matchlist.m_cTopTab.selectedIndex=t,this.view.m_window.m_matchlist.m_cHasMatch.selectedIndex=d.HAS_MATCH;var n=this.view.m_window.m_matchlist.m_listMatch;0!=e.length?(n.itemRenderer=this.initSubMatchItem.bind(this,e),n.setVirtual(),n.numItems=e.length,n.refreshVirtualList()):this.view.m_window.m_matchlist.m_cHasMatch.selectedIndex=d.NO_MATCH},e.prototype.initSubMatchItem=function(t,e,n){var o=t[e];if(o){n.m_imgIcon.url=this.getMatchItemImgIconRes(o.show_rule);var a=o.name;if(W.DataBfConfig.isTestEnv()&&(a=a+"["+o.msid+"]"),q.DataClubClientConfig.isOpenMatchTempIcon()&&o.type===g.MatchTypeEnum.FIX_TIME?n.m_txtName.text="\u5343\u5143\u4eac\u4e1c\u5361\u798f\u5229\u8d5b":n.m_txtName.text=a,o.begin_rule.count&&o.begin_rule.count>0)if(o.start_time&&""!=o.start_time){var i=o.start_time.substring(o.start_time.length-8,o.start_time.length-3);n.m_txtPlayerCount.text="\u5f00\u8d5b\u65f6\u95f4\uff1a"+i}else n.m_txtPlayerCount.text="\u6ee1[color=#FF0000]"+o.begin_rule.count+"\u4eba[/color]\u5f00\u8d5b";else{var r=o.begin_rule.shour<10?"0"+o.begin_rule.shour:o.begin_rule.shour,s=o.begin_rule.smin||0,c=s<10?"0"+s:s,l="\u5f00\u8d5b\u65f6\u95f4\uff1a"+r+":"+c;o.match_state==g.MatchStateEnum.OVER||o.match_state==g.MatchStateEnum.RUNNING?(l="\u5f00\u8d5b\u65f6\u95f4\uff1a"+r+":"+c,"w"==o.begin_rule.time_type&&(l="\u5f00\u8d5b\u65f6\u95f4\uff1a \u5468"+o.begin_rule.sweek+" "+r+":"+c)):o.match_state==g.MatchStateEnum.GO_SIGN&&(l="[color=#FF0000]"+r+":"+c+"[/color]\u5f00\u8d5b","w"==o.begin_rule.time_type&&(l="[color=#FF0000]\u5468"+o.begin_rule.sweek+" "+r+":"+c+"[/color]\u5f00\u8d5b")),n.m_txtPlayerCount.text=l}n.m_csignFlag.selectedIndex=o.sign_state,n.m_cBtnState.selectedIndex=o.match_state,n.data={mid:o.mid,msid:o.msid},n.onClick(this.onClickMatchList,this)}},e.prototype.getMatchItemImgIconRes=function(t){if(!t)return b.UIHelp.getPropIcon(y.PropTypeEnum.DIAMOND,y.DataProps.instance.getPropRes("yb7"));if(t.pic&&t.pic<1e4)return V.DataConstant.RES_PATH.MATCH+"/"+t.pic+".png";if(t.prop){var e=this.view.m_window.m_matchlist.m_cTopTab.selectedIndex===g.MatchAwardTypeEnum.WELFARE;return q.DataClubClientConfig.isOpenMatchTempIcon()&&e?b.UIHelp.getPropIcon(y.PropTypeEnum.SINGLE,y.DataProps.instance.getPropRes("jdk")):t.prop==y.PropIDEnum.EXCHANGE_GOLDEN_EGG?b.UIHelp.getPropIcon(y.PropTypeEnum.SINGLE,y.DataProps.instance.getPropRes("egg3")):y.DataProps.instance.isJDKPropID(t.prop)?b.UIHelp.getPropIcon(y.PropTypeEnum.SINGLE,y.DataProps.instance.getPropRes("jdk")):b.UIHelp.getPropIcon(y.PropTypeEnum.SINGLE,y.DataProps.instance.getPropRes(t.prop))}return t.yb?b.UIHelp.getPropIcon(y.PropTypeEnum.DIAMOND,y.DataProps.instance.getPropRes("yb7")):t.sr?b.UIHelp.getPropIcon(y.PropTypeEnum.GOLD,y.DataProps.instance.getPropRes("sr8")):b.UIHelp.getPropIcon(y.PropTypeEnum.DIAMOND,y.DataProps.instance.getPropRes("yb7"))},e.prototype.onClickMatchList=function(t){var e=fgui.GObject.cast(t.currentTarget).data;G.BfasManager.instance.sendEvt(B.MatchPoint.MATCH_PLAYER_COUNT_ENTER,{matchid:e.mid});var n=this.model.getMatchData(e.mid,e.msid);if(n.match_state==g.MatchStateEnum.OVER)this.showRankUI(U.RankShowTypeEnum.FINAL,e.mid,e.msid);else if(n.match_state==g.MatchStateEnum.RUNNING||n.match_state==g.MatchStateEnum.GO_SIGN){if(n.match_state==g.MatchStateEnum.RUNNING&&(n.sign_state==g.SignStateEnum.CANCEL_SIGN||n.sign_state==g.SignStateEnum.NOT_SIGN))return S.EventManager.instance.emit(T.DataEvent.ToastData,"\u60a8\u672a\u53c2\u52a0\u8be5\u6bd4\u8d5b"),void this.refresMatchList(n.awardtype);this.doHallGoSignMatch(e.mid,e.msid)}},e.prototype.doHallGoSignMatch=function(t,e,n){var o=this,a=this.model.getMatchData(t,e);this.model.enterGDMatch(a.appid,t,e,function(i,r){i?(o.model.setCurMatchID(t,e),a.match_state==g.MatchStateEnum.GO_SIGN?o.showMatchSignUI():a.match_state==g.MatchStateEnum.RUNNING?o.showMatchRoundUI():S.EventManager.instance.emit(T.DataEvent.ToastData,"\u6bd4\u8d5b\u672a\u5f00\u59cb"),n&&n(!0)):a.match_state==g.MatchStateEnum.GO_SIGN||a.match_state==g.MatchStateEnum.RUNNING||a.match_state==g.MatchStateEnum.OVER?o.model.quickEnterMatch(t,function(t,e,a){t?(o.model.setCurMatchID(a.mid,a.msid),o.showMatchSignUI()):S.EventManager.instance.emit(T.DataEvent.ToastData,e),n&&n(t)}):(S.EventManager.instance.emit(T.DataEvent.ToastData,r),n&&n(!1))}),M.UIManager.instance.isExist(J.CountDownUI)&&M.UIManager.instance.close(J.CountDownUI),M.UIManager.instance.isExist(X.TimeMatchTopHint)&&M.UIManager.instance.close(X.TimeMatchTopHint),M.UIManager.instance.isExist(z.DialogUI)&&M.UIManager.instance.close(z.DialogUI)},e.prototype.showMatchSignUI=function(){var t=this.model.getCurMatchData();this.updateSignUIAwardInfo(t),this.updateSignUIDetailInfo(t),this.stopCheckHint(),this.closeHintUI(),this.view.m_window.m_cUIstate.selectedIndex=l.SIGN,this.view.m_window.m_title.m_cState.selectedIndex=l.SIGN,this.setMainTitle("")},e.prototype.updateSignUIAwardInfo=function(t){var e=this.view.m_window.m_matchSign.m_awardInfo;q.DataClubClientConfig.isOpenMatchTempIcon()&&t.type===g.MatchTypeEnum.FIX_TIME?e.m_txtName.text="\u5343\u5143\u4eac\u4e1c\u5361\u798f\u5229\u8d5b":e.m_txtName.text=t.name;for(var n=t.award_rule||[],o=[],a=0,i=0;i<4;i++){for(var r=a;r<n.length;r++){a=r;var s=n[r];if(i+1<=s.range){o[i]=s;break}}if(a>n.length)break}for(var c=0;c<o.length;c++){var l=D.MatchUtils.convertMatchAwards(o[c],t.type);if(l.length>0)if(q.DataClubClientConfig.isOpenMatchTempIcon()&&g.MatchAwardTypeEnum.WELFARE===t.awardtype&&c+1==1){var u=b.UIHelp.getPropIcon(y.PropTypeEnum.SINGLE,y.DataProps.instance.getPropRes("jdk"));e["m_imgRank"+(c+1)].url=u,e["m_txtRank"+(c+1)].text="200\u5143\u4eac\u4e1c\u5361x5"}else e["m_imgRank"+(c+1)].url=l[0].url,e["m_txtRank"+(c+1)].text=l[0].name}for(;c<4;c++)e["m_imgRank"+(c+1)].url="",e["m_txtRank"+(c+1)].text="";this.showSignUITitleAni()},e.prototype.showSignUITitleAni=function(){this.view.m_window.m_matchSign.m_awardInfo.m_spineNodeTitle.node.removeAllChildren(),N.UtilCC.instantiatePrefab(F.DataSpineAniPath.ANI_MATCH_TITLE,function(t){var e=t.getComponent(sp.Skeleton);e.setCompleteListener(function(t){"Bisai_biaoti"===(t.animation?t.animation.name:"")&&e.setAnimation(0,"loop",!0)})},this.view.m_window.m_matchSign.m_awardInfo.m_spineNodeTitle.node)},e.prototype.updateSignUIDetailInfo=function(t){var e=this.view.m_window.m_matchSign.m_matchDetail;if(e.m_cMatchType.selectedIndex=t.type==g.MatchTypeEnum.FIX_PLAYER?g.MatchAwardTypeEnum.GOLDEN_EGG:g.MatchAwardTypeEnum.WELFARE,e.m_csign.selectedIndex=t.sign_state==g.SignStateEnum.HAD_SIGN||t.sign_state==g.SignStateEnum.JOIN?u.HAD_SIGH:u.NOT_SIGH,this.updateFreeSignIn(),t.type==g.MatchTypeEnum.FIX_PLAYER){var n=t.sign_rule.shour<10?"0"+t.sign_rule.shour:t.sign_rule.shour,o=t.sign_rule.ehour<10?"0"+t.sign_rule.ehour:t.sign_rule.ehour;e.m_txtMaxPlayerCount.text="/"+t.begin_rule.count;var a=this.model.getCurWaitTime(),i=(a=Math.floor(a/60))+"\u5206\u949f";a<1&&(i="<1\u5206\u949f"),e.m_txtWaitTime.text=i,e.m_txtPlayerCount.text=this.model.getCurMatchPlayCnt()+"",e.m_txtStartTime.text=n+":00-"+o+":00",e.m_txtConditionTips.text="\u53c2\u8d5b\u4eba\u6570:",e.m_txtCondition.text="\u6ee1"+t.begin_rule.count+"\u4eba"}else{n=t.begin_rule.shour<10?"0"+t.begin_rule.shour:t.begin_rule.shour;var r=t.begin_rule.smin||0,s=r<10?"0"+r:r;this.startCountdown(),e.m_txtJoinPlayerCount.text=this.model.getCurMatchPlayCnt()+"\u4eba",e.m_txtStartTime.text=n+":"+s+":00\u5f00\u8d5b",e.m_txtConditionTips.text="\u4eba\u6570\u4e0a\u9650:",e.m_txtCondition.text=t.sign_rule.max+"\u4eba"}var c=this.model.getTicketCost(t.mid,t.msid);e.m_btnEnroll.m_txtCost.text="x"+c.propCnt,e.m_btnEnroll.title=y.DataProps.instance.getPropName(c.propID),e.m_txtTickCount.text="\u5f53\u524d\u62e5\u6709:"+this.model.getTickets(t.type)},e.prototype.updateFreeSignIn=function(){var t=this.model.getCurMatchData(),e=w.MatchShareModel.instance.getMatchShareCntByType(t.type,w.MatchShareType.FreeSignIn);this.view.m_window.m_matchSign.m_matchDetail.m_cFreeEnroll.selectedIndex=e>0?1:0},e.prototype.startCountdown=function(){var t=this;this._coMatchCountdown&&I.CoroutineManager.instance.stopCo(this._coMatchCountdown),this._coMatchCountdown=I.CoroutineManager.instance.loop(1,function(){t.updateCountdown()},this)},e.prototype.stopCountdown=function(){this._coMatchCountdown&&I.CoroutineManager.instance.stopCo(this._coMatchCountdown),this._coMatchCountdown=null},e.prototype.updateCountdown=function(){var t=Math.floor((new Date).getTime()/1e3),e=this.model.getStartTime()-t;e<=0&&(e=0);var n=C.UtilTime.formatCountDownTime(e);this.view.m_window.m_matchSign.m_matchDetail.m_txtCountdown.text=n},e.prototype.closeHintUI=function(){M.UIManager.instance.isExist(j.TopHintUI)&&M.UIManager.instance.close(j.TopHintUI)},e.prototype.setMainTitle=function(t){this.view.m_window.m_title.m_txtTitle.text=t;var e=this.view.m_window.m_title.m_txtTitle.width,n=this.view.m_window.m_title.m_gTop.x;switch(this.view.m_window.m_title.m_cState.selectedIndex){case l.HALL:this.view.m_window.m_title.m_btnGoldenEgg.x=n+e+169;break;case l.SIGN:this.view.m_window.m_title.m_btnGoldenEgg.x=n+104}},e.prototype.showMatchRoundUI=function(){var t=this;this.refreshMatchRoundUI();var e=this.model.getCurMatchData();g.MatchTypeEnum.FIX_PLAYER==e.type&&I.CoroutineManager.instance.once(1,function(){if(t.view.m_window.m_cUIstate.selectedIndex==l.ROUND){var e=t.model.checkSignTimeMatch(g.MatchRoundTimeMatchHint.MAX,g.MatchRoundTimeMatchHint.MIN);e&&t.showTimeMatchTopHint(e)}},this)},e.prototype.refreshMatchRoundUI=function(){var t=this.model.getCurMatchData();this.setMainTitle(t.name),this.showRoundList(),this.stopCheckHint(),this.closeHintUI(),this.view.m_window.m_cUIstate.selectedIndex=l.ROUND,this.view.m_window.m_title.m_cState.selectedIndex=l.ROUND},e.prototype.showRoundList=function(t){var e=this.view.m_window.m_matchround.m_tableList.m_listRounds;e.removeChildren();var n=null,o=e.addItemFromPool();o.title=this.model.isFinalRound(1)?"\u51b3\u8d5b":"1\u8f6e",o.data=1,o.onClick(this.onClickRoundLeftTab,this),n=o;for(var a=this.model.getCurRoundIndex(),i=1;i<a;i++){var r=e.addItemFromPool();r.title=this.model.isFinalRound(i+1)?"\u51b3\u8d5b":i+1+"\u8f6e",r.data=i+1,r.onClick(this.onClickRoundLeftTab,this),n=r}if(t){var s=this.model.getCurMatchData();return(n=e.getChildAt(s.lastRound-1)).selected=!0,void e.scrollPane.setPercY(s.lastRound/a)}n.selected=!0,e.scrollPane.setPercY(1),this.showRoundTable(n.data)},e.prototype.onClickRoundLeftTab=function(t){var e=fgui.GObject.cast(t.currentTarget).data;this.showRoundTable(e)},e.prototype.showRoundTable=function(t){var e=this,n=this.model.getCurMatchID();this.model.setUIlastRound(t),this.model.getRoundTableList(n.mid,n.msid,t,function(){e.showRoundUITable(t),e.showRoundUIBottom(t)})},e.prototype.showRoundUITable=function(t){var e=this.model.getCurRoundIndex();this._selectRound=t,this.view.m_window.m_matchround.m_playerRound.m_CRoundWait.selectedIndex=e>0?h.SHOW:h.HIDE,this.view.m_window.m_matchround.m_bottom.m_cTextShow.selectedIndex=e>0?h.HIDE:h.SHOW;var n=this.model.getMatchTableInfo(t);if(n&&n.length>0){var o=this.view.m_window.m_matchround.m_playerRound.m_listPlayer;o.itemRenderer=this.initTableItem.bind(this,t),o.setVirtual(),o.numItems=n.length,o.refreshVirtualList()}this.startTableTimer()},e.prototype.initTableItem=function(t,e,n){var o=this.model.getMatchTableInfo(t);if(!(o.length<=0)){var a=o[e],i=a.status||0;if(this.model.isFinalRound(t)){n.m_cFinal.selectedIndex=1,n.m_txtState.visible=!1;var r=this.model.getRoundMaxPlayCnt(t),s=a.curr_play_cnt||1;n.m_txtPanCount.text=s+"/"+r}else n.m_cFinal.selectedIndex=0,n.m_txtState.visible=!0;n.m_cRoundState.selectedIndex=i||p.END,n.m_cSelf.selectedIndex=_.HIDE;for(var c=function(t){var e=a.players[t],o=e.negative_type||0,r=e.numid;if(n["m_imgEscape_"+t].visible=o>0,n["m_imgHead_"+t].url=V.DataConstant.MATCH_DEFAULT_HEAD_ICON,l.model.getMatchPlayerInfo(e.numid,function(e){r==e.numid&&(n["m_imgHead_"+t].url=e.headUrl)},l),n["m_txtName_"+t].text=b.UIHelp.formatNicknameL(e.nickname,8),i==p.END){n.m_txtState.visible=!0;var s="",c="#C84B90";e.score>0?(s="+"+e.score,c="#F44646"):e.score<0?(s=e.score+"",c="#64B1FF"):(s=e.score+"",c="#C84B90"),n["m_txtScore_"+t].color=n["m_txtScore_"+t].color.fromHEX(c),n["m_txtScore_"+t].text=s}e.numid===x.UserInfoModel.instance.userInfo.numID&&(n.m_cSelf.selectedIndex=_.SHOW,n.m_cSelfPos.selectedIndex=t)},l=this,u=0;u<a.players.length;u++)c(u)}},e.prototype.startTableTimer=function(){var t=this;this._coTableTime&&I.CoroutineManager.instance.stopCo(this._coTableTime),this._coTableTime=I.CoroutineManager.instance.loop(1,function(){t.updateTableTime()},this)},e.prototype.stopTableTimer=function(){this._coTableTime&&I.CoroutineManager.instance.stopCo(this._coTableTime),this._coTableTime=null},e.prototype.updateTableTime=function(){var t=this.view.m_window.m_matchround.m_playerRound.m_listPlayer,e=this.model.getRoundEnd(this._selectRound)-Math.trunc((new Date).getTime()/1e3);e<=0&&(e=0);for(var n=C.UtilTime.formatCountDownTime(e),o=0;o<t.numChildren;o++)t.getChildAt(o).m_txtTime.text=n},e.prototype.showRoundUIBottom=function(t){var e=this.model.getCurRoundIndex(),n=this.model.getCurPlayingTableCnt(e),o=this.model.getSelfTableRank(t),a=this.model.getMatchRank(),i=this.model.getSelfTableScore(t),r=this.model.getCurMatchID(),s=this.model.isMatchTrust(r.mid,r.msid),c=this.view.m_window.m_matchround.m_bottom;if(console.log("match.rank:",o),o>0){var l="\u6682\u5217[color=#FFFF00]\u7b2c"+o+"\u540d[/color], \u672c\u8f6e[color=#FFFF00]"+i+"[/color]\u5206";c.m_txtRankInfo.text=l,c.m_txtRankInfo.visible=!0}else c.m_txtRankInfo.visible=!1;if(0==n?(c.m_txtPromotionInfo.visible=!1,c.m_imgWin.visible=!1,c.m_imgLose.visible=!1,c.m_txtTabkeInfo.visible=!1):(c.m_txtTabkeInfo.visible=!0,s?(c.m_cType.selectedIndex=f.NOT_JOIN,c.m_txtTabkeInfo.text="\u8fd8\u6709"+n+"\u684c\u672a\u5b8c\u6210\u6bd4\u8d5b"):o>0?(c.m_cType.selectedIndex=i>0?f.WIN:f.LOSE,c.m_txtPromotionInfo.text="\u8fd8\u6709"+n+"\u684c\u5b8c\u6210\u6bd4\u8d5b\u540e\u8fdb\u5165\u4e0b\u4e00\u8f6e"):(c.m_cType.selectedIndex=f.NOT_JOIN,c.m_txtTabkeInfo.text="\u8fd8\u6709"+n+"\u684c\u672a\u5b8c\u6210\u6bd4\u8d5b",c.m_txtRankInfo.visible=!1)),a>0)return l="\u6700\u7ec8\u6392\u540d:[color=#D32829]\u7b2c"+a+"\u540d[/color]",c.m_txtRankInfo.text=l,void(c.m_txtRankInfo.visible=!0)},e.prototype.onMatchStarted=function(){this.updateMatchRound()},e.prototype.updateMatchRound=function(){this.refreshMatchRoundUI()},e.prototype.onMatchApplyJoin=function(){this.updateSignUIDetailInfo(this.model.getCurMatchData())},e.prototype.onMatchInfoUpdate=function(){this.updateSignUIDetailInfo(this.model.getCurMatchData())},e.prototype.onMatchTableUpdate=function(){if(this.view.m_window.m_cUIstate.selectedIndex==l.ROUND){var t=this.model.getCurRoundIndex();if(t>this.view.m_window.m_matchround.m_tableList.m_listRounds.numItems)return void this.refreshMatchRoundUI();var e=this.model.getUIlastRound();if(e==t){var n=this.model.getMatchTableInfo(e),o=this.view.m_window.m_matchround.m_playerRound.m_listPlayer;if(o.numItems<n.length)this.showRoundUITable(e);else if(o.numItems>0){o.refreshVirtualList();var a=!0,i=!1,r=x.UserInfoModel.instance.userInfo.numID;n.forEach(function(t){t.status!=p.END&&t.status!=p.DISSMIS&&(a=!1),t.players&&t.players.forEach(function(t){t.numid==r&&(i=!0)})}),a&&i&&!this.model.isFinalRound(e)&&S.EventManager.instance.emit(T.DataEvent.ToastData,"\u4e0b\u4e00\u8f6e\u6bd4\u8d5b\u5373\u5c06\u5f00\u59cb")}}this.showRoundUIBottom(e)}},e.prototype.goMatchShowCheckIn=function(t,e,n,o){var a=this;this.model.reqGetMatchList(function(i){i&&a.model.enterGDMatch(t,e,n,function(t){t&&(a.model.setCurMatchID(e,n),a.model.setCurRoundIndex(o),a.refreshMatchRoundUI(),a.model.showCheckIn())})})},e.prototype.onSyncMatchStart=function(t){var e=this;t&&(M.UIManager.instance.isExist(J.CountDownUI)||(console.log("ttt.match.onSyncMatchStart: \u6bd4\u8d5b\u5f00\u59cb\uff0c\u5728\u6bd4\u8d5b\u5927\u5385, \u63d0\u793a\u53bb\u6bd4\u8d5b"),this.model.reqMatchSubID(function(){var n=e.model.getMatchLocation();n&&n.appid>0&&n.matchsubid!=t.matchsubid?console.log("ttt.match.onSyncMatchStart: \u8fd8\u5728\u6bd4\u8d5b\u4e2d"):e.view.m_window.m_cUIstate.selectedIndex!=l.HALL?e.model.reqLeaveRoom(t.matchsubid,function(){e.goMatchShowCheckIn(t.appid,t.matchid,t.matchsubid,t.roundIndex)}):e.goMatchShowCheckIn(t.appid,t.matchid,t.matchsubid,t.roundIndex)})))},e.prototype.onSyncMatchCredit=function(t){null!=t&&(this.view.m_window.m_title.m_txtCredibility.text="\u4fe1\u8a89\u5206:"+t)},e.prototype.onMatchKickOut=function(t){var e=this;if(t==g.KickoutReasonEnum.UNSIGNED){var n="\u5f53\u524d\u6bd4\u8d5b\u62a5\u540d\u5df2\u6ee1,\u8bf7\u9009\u62e9\u5176\u4ed6\u6bd4\u8d5b\n\u62a5\u540d\u53c2\u52a0\u3002";this.model.getCurMatchData().type==g.MatchTypeEnum.FIX_TIME&&(n="\u5f53\u524d\u6bd4\u8d5b\u5df2\u5f00\u8d5b,\u8bf7\u9009\u62e9\u5176\u4ed6\u6bd4\u8d5b\n\u62a5\u540d\u53c2\u52a0\u3002"),b.UIHelp.instance.closeBigDialog(),b.UIHelp.instance.showDialogMore({content:n,canClose:!0,showCloseBtn:!0},function(){e.leaveMatchDetail()},function(){e.leaveMatchDetail()})}},e.prototype.onUpdateMailRed=function(t){this.view.m_window.m_title.m_cIsNew.selectedIndex=t?1:0},e.prototype.onUpdateProp=function(){if(this.updateProp(),this.view.m_window.m_cUIstate.selectedIndex==l.SIGN){var t=this.model.getCurMatchData();this.updateSignUIDetailInfo(t)}},e.prototype.onRelogin=function(){var t=this;if(console.log("ttt.MatchUI.Relogin:",this.view.m_window.m_cUIstate.selectedIndex),this.view.m_window.m_cUIstate.selectedIndex==l.HALL)this.refreshMatchHall();else if(this.view.m_window.m_cUIstate.selectedIndex==l.SIGN){var e=this.model.getCurMatchData();this.model.enterGDMatch(e.appid,e.mid,e.msid,function(){switch(t.model.setCurMatchID(e.mid,e.msid),t.showMatchSignUI(),e=t.model.getCurMatchData(),console.log("ttt.matchRelogin1:",e.matchinfo.match_status),e.matchinfo.match_status){case club.client.game.GDMatchStatus.kClose:case club.client.game.GDMatchStatus.kSign:t.leaveMatchDetail();break;case club.client.game.GDMatchStatus.kMatchBegin:break;case club.client.game.GDMatchStatus.kRoundCheckIn:t.leaveMatchDetail();break;case club.client.game.GDMatchStatus.kRoundStart:case club.client.game.GDMatchStatus.kRoundEnd:break;case club.client.game.GDMatchStatus.kMatchEnd:case club.client.game.GDMatchStatus.kExEnd:t.leaveMatchDetail()}})}else if(this.view.m_window.m_cUIstate.selectedIndex==l.ROUND){var n=this.model.getCurMatchData();this.model.enterGDMatch(n.appid,n.mid,n.msid,function(){switch(t.model.setCurMatchID(n.mid,n.msid),t.showMatchRoundUI(),n=t.model.getCurMatchData(),console.log("ttt.matchRelogin2:",n.matchinfo.match_status),n.matchinfo.match_status){case club.client.game.GDMatchStatus.kClose:case club.client.game.GDMatchStatus.kSign:t.leaveMatchDetail();break;case club.client.game.GDMatchStatus.kMatchBegin:break;case club.client.game.GDMatchStatus.kRoundCheckIn:t.leaveMatchDetail();break;case club.client.game.GDMatchStatus.kRoundStart:case club.client.game.GDMatchStatus.kRoundEnd:break;case club.client.game.GDMatchStatus.kMatchEnd:case club.client.game.GDMatchStatus.kExEnd:t.leaveMatchDetail()}})}},e.prototype.onSyncPropUpdate=function(){var t=this;L.LoginModel.instance.queryUserProfile(function(){t.onUpdateProp()})},e.prototype.onExitMatchDetail=function(){this.leaveMatchDetail()},e.prototype.leaveMatchDetail=function(){b.UIHelp.instance.closeBigDialog();var t=this.model.getCurMatchData();this.model.reqLeaveRoom(t.msid),this.stopCountdown(),this.stopTableTimer(),this.startCheckHint(),this.view.m_window.m_cUIstate.selectedIndex=l.HALL,this.view.m_window.m_title.m_cState.selectedIndex=l.HALL,this.refreshMatchHall(),this.setMainTitle("\u6bd4\u8d5b")},e.prototype.onSyncSelfRankInfo=function(t){t===this._selectRound&&this.showRoundUIBottom(t)},e.prototype.onMatchCheckInFail=function(){switch(this.view.m_window.m_cUIstate.selectedIndex){case l.SIGN:case l.ROUND:this.leaveMatchDetail()}},e.prototype.onMatchStartHint=function(t){var e=this;if(this.view.m_window.m_cUIstate.selectedIndex==l.HALL){var n=this.model.getMatchData(t.info.mid,t.info.msid);if(null!=n.sign_state&&n.sign_state==g.SignStateEnum.NOT_SIGN){var o=n.begin_rule.shour<10?"0"+n.begin_rule.shour:n.begin_rule.shour,a=n.begin_rule.smin||0,i="[color=#E34C38]"+o+":"+(a<10?"0"+a:a)+"[/color]\u7684[color=#E34C38]"+n.name+"[/color],\u8fd8\u5269[color=#E34C38]3[/color]\u5206\u949f\u5c31\u8981\n\u5f00\u59cb\u6bd4\u8d5b\u5566~[u]\u70b9\u51fb\u6b64\u5904\u8fdb\u884c\u62a5\u540d[/u]";G.BfasManager.instance.sendEvt(B.MatchPoint.MATCH_HINT_SHOW),M.UIManager.instance.open(j.TopHintUI).then(function(t){t.confirmAction=function(){G.BfasManager.instance.sendEvt(B.MatchPoint.MATCH_HINT_CLICK),e.doHallGoSignMatch(n.mid,n.msid)},t.init({content:i,canClick:!0,showTime:5,fntSize:26})})}}},e.prototype.onClickClose=function(){var t=this;switch(this.view.m_window.m_cUIstate.selectedIndex){case l.SIGN:this.leaveMatchDetail(),w.MatchShareModel.instance.goldenEggAutoPopUp();break;case l.ROUND:this.leaveMatchDetail(),w.MatchShareModel.instance.goldenEggAutoPopUp(),M.UIManager.instance.isExist(X.TimeMatchTopHint)&&M.UIManager.instance.close(X.TimeMatchTopHint);break;case l.HALL:this.stopCoroutine(),b.UIHelp.instance.showLoading(),this.model.reqMatchSubID(function(){if(b.UIHelp.instance.hideLoading(),t.model.getMatchLocationAppID()>0){var e=t.model.getMatchLocation();t.model.getShowQuitHint(e.matchid,e.matchsubid)<1?(t.model.setShowQuitHint(e.matchid,e.matchsubid,1),b.UIHelp.instance.showBigDialogConfirmCancel({content:"\u672c\u8f6e\u6bd4\u8d5b\u6682\u672a\u7ed3\u675f\uff0c\u8bf7\u5728\u5f53\u524d\u9875\u9762\n\u7b49\u5f85\u4e0b\u4e00\u8f6e\u6bd4\u8d5b\uff01",confirmText:"\u9000\u51fa",cancelText:"\u53d6\u6d88",canClose:!0,showCloseBtn:!0},function(e){e&&t.onCloseMatchHall()})):t.onCloseMatchHall()}else t.onCloseMatchHall()})}},e.prototype.onCloseMatchHall=function(){t.prototype.onExitClick.call(this),L.LoginModel.instance.queryUserProfile(function(){}),S.EventManager.instance.emit(T.DataEvent.BackHall)},e.prototype.onClickMatchRule=function(){M.UIManager.instance.open(A.MatchRuleUI).then(function(t){t.init(A.MatchRuleShowTypeEnum.MATCH_RULE)})},e.prototype.onEggTicketClick=function(){G.BfasManager.instance.sendEvt(B.MatchTicketSharePointID.GOLDEN_TICKET_ADD_CLICK),M.UIManager.instance.open(K.default)},e.prototype.onWelfareTicketClick=function(){G.BfasManager.instance.sendEvt(B.MatchTicketSharePointID.WELFARE_TICKET_ADD_CLICK),w.MatchShareModel.instance.showMatchTicketShare(g.MatchTypeEnum.FIX_TIME,w.TicketShareFromScene.ADD_WELFARE_TICKET)},e.prototype.onClickCredibilityRule=function(){M.UIManager.instance.open(A.MatchRuleUI).then(function(t){t.init(A.MatchRuleShowTypeEnum.CREDIT_RULE)})},e.prototype.onBtnFeedback=function(){M.UIManager.instance.open(k.FeedBackSuggUI).then(function(t){t.init(k.FeedBackSuggSource.MATCH)})},e.prototype.onClickMail=function(){M.UIManager.instance.open(v.MailUI)},e.prototype.onClickExchange=function(){G.BfasManager.instance.sendEvt(B.MatchPoint.MATCH_EXCHANGE_CLICK),M.UIManager.instance.open(P.ExchangeShopUI)},e.prototype.onClickShareActivity=function(){w.MatchShareModel.instance.isGoldenEggAwardGot()?w.MatchShareModel.instance.showMatchTicketShare(g.MatchTypeEnum.FIX_PLAYER,w.TicketShareFromScene.CLICK_SHARE_ENTRANCE):(G.BfasManager.instance.sendEvt(B.MatchGoldenEggPointID.MATCH_CLICK_ICON),w.MatchShareModel.instance.showGoldenEgg())},e.prototype.onClickGoldenEgg=function(){this.selectMatchType(g.MatchAwardTypeEnum.GOLDEN_EGG)},e.prototype.onClickWelfare=function(){this.selectMatchType(g.MatchAwardTypeEnum.WELFARE)},e.prototype.onClickAwardDetail=function(){var t=this;M.UIManager.instance.open(E.MatchAwardDetailUI).then(function(e){e.initUI(t.model.getCurMatchData())})},e.prototype.onClickEnroll=function(){var t=this;this.view.m_window.m_matchSign.m_matchDetail.m_btnEnroll.m_fingerNode.node.removeAllChildren();var e=this.model.getCurMatchData();if(G.BfasManager.instance.sendEvt(B.MatchPoint.MATCH_PLAYER_COUNT_ENROLL_CLICK,{matchid:e.mid}),this.model.getCurMatchPlayCnt()>=e.sign_rule.max)S.EventManager.instance.emit(T.DataEvent.ToastData,"\u4eba\u6570\u5df2\u6ee1\uff0c\u8bf7\u53c2\u52a0\u5176\u4ed6\u6bd4\u8d5b\uff01");else{var n=function(){if(e.match_state===g.MatchStateEnum.GO_SIGN){var n=t.model.getTicketCost(e.mid,e.msid);if(n.propCnt>t.model.getTickets(e.type)){var o=g.MatchTypeEnum.FIX_PLAYER===e.type?w.TicketShareFromScene.SIGN_UP_GOLDEN_EGG:w.TicketShareFromScene.SIGN_UP_WELFARE;w.MatchShareModel.instance.showMatchTicketShare(e.type,o,function(){var o;e.match_state===g.MatchStateEnum.GO_SIGN&&(t.model.getCurMatchPlayCnt()>=(null===(o=e.sign_rule)||void 0===o?void 0:o.max)?S.EventManager.instance.emit(T.DataEvent.ToastData,"\u4eba\u6570\u5df2\u6ee1\uff0c\u8bf7\u53c2\u52a0\u5176\u4ed6\u6bd4\u8d5b\uff01"):t.model.getCredibility()<t.model.getEnrollCreditLimit()?w.MatchShareModel.instance.showMatchCreditShare():n.propCnt>t.model.getTickets(e.type)||t.applyJoinGDMatch(!1))})}else t.model.getCredibility()<t.model.getEnrollCreditLimit()?w.MatchShareModel.instance.showMatchCreditShare():t.applyJoinGDMatch(!1)}else S.EventManager.instance.emit(T.DataEvent.ToastData,"\u6bd4\u8d5b\u4e0d\u5728\u62a5\u540d\u9636\u6bb5")};this.checkMatchSign(n).then(function(t){t||n()})}},e.prototype.onClickFreeEnroll=function(){var t=this,e=this.model.getCurMatchData();if(G.BfasManager.instance.sendEvt(B.MatchPoint.MATCH_FREE_SIGN_IN_CLICK,{matchid:e.mid}),this.model.getCurMatchPlayCnt()>=e.sign_rule.max)S.EventManager.instance.emit(T.DataEvent.ToastData,"\u4eba\u6570\u5df2\u6ee1\uff0c\u8bf7\u53c2\u52a0\u5176\u4ed6\u6bd4\u8d5b\uff01");else{var n=function(){e.match_state===g.MatchStateEnum.GO_SIGN?t.model.getCredibility()<t.model.getEnrollCreditLimit()?w.MatchShareModel.instance.showMatchCreditShare():H.ShareManager.instance.share(H.ShareType.matchFreeSignInShare,null,function(n,o){(o||cc.sys.OS_IOS===cc.sys.os)&&w.MatchShareModel.instance.reqMatchShareAward(w.MatchShareType.FreeSignIn,e.type,e.mid,e.msid,function(n){e.match_state===g.MatchStateEnum.GO_SIGN&&n&&t.applyJoinGDMatch(!0)})}):S.EventManager.instance.emit(T.DataEvent.ToastData,"\u6bd4\u8d5b\u4e0d\u5728\u62a5\u540d\u9636\u6bb5")};this.checkMatchSign(n).then(function(t){t||n()})}},e.prototype.applyJoinGDMatch=function(t){var e=this,n=this.model.getCurMatchData();this.model.applyJoinGDMatch(n.mid,n.msid,!0,t,function(t,o){t?(e.view.m_window.m_matchSign.m_matchDetail.m_csign.selectedIndex=u.HAD_SIGH,S.EventManager.instance.emit(T.DataEvent.ToastData,"\u62a5\u540d\u6210\u529f"),w.MatchShareModel.instance.showMatchSignUpShare(n.type,n.mid,n.msid)):S.EventManager.instance.emit(T.DataEvent.ToastData,o)}),this.reqGoWeChatSubscribe()},e.prototype.reqGoWeChatSubscribe=function(){var t=this,e=this.model.getCurMatchData();e.type==g.MatchTypeEnum.FIX_TIME&&q.DataClubClientConfig.isMatchSubScribeSwitchOpen()&&b.UIHelp.instance.reqWeChatSubscribe(function(n){console.log("ttt.Match reqWeChatSubscribe \u8ba2\u9605\u7ed3\u679c:",n),n&&(t.model.reportSubscribe(e.msid,function(t){t&&console.log("ttt.Match reportSubscribe \u8ba2\u9605\u6210\u529f")}),S.EventManager.instance.emit(T.DataEvent.ToastData,"\u8ba2\u9605\u6210\u529f"))},"OkwCOVdXPvre3YhcOXrzR3pgD8NmizWan40zHVoxFBc")},e.prototype.onClickCancelEnroll=function(){var t=this,e=this.model.getCurMatchData();this.model.reqSignInType(e.msid,function(t){t===g.SignMethodEnum.FREE?G.BfasManager.instance.sendEvt(B.MatchPoint.MATCH_CANCEL_FREE_SIGN_IN_CLICK,{matchid:e.mid}):G.BfasManager.instance.sendEvt(B.MatchPoint.MATCH_PLAYER_COUNT_CANCEL_CLCIK,{matchid:e.mid})}),b.UIHelp.instance.showDialogConfirmCancel("\u662f\u5426\u786e\u8ba4\u53d6\u6d88\u62a5\u540d\uff1f",function(n){n&&t.model.applyJoinGDMatch(e.mid,e.msid,!1,!1,function(e,n){e&&(n="\u5df2\u53d6\u6d88\u62a5\u540d",t.view.m_window.m_matchSign.m_matchDetail.m_csign.selectedIndex=u.NOT_SIGH,t.updateFreeSignIn()),S.EventManager.instance.emit(T.DataEvent.ToastData,n)})})},e.prototype.onClickRank=function(){var t=this.model.getCurMatchData();t.matchinfo.match_status==club.client.game.GDMatchStatus.kMatchEnd?this.showRankUI(U.RankShowTypeEnum.FINAL,t.mid,t.msid):this.showRankUI(U.RankShowTypeEnum.RANK)},e.prototype.showRankUI=function(t,e,n){t==U.RankShowTypeEnum.RANK?M.UIManager.instance.open(U.MatchRankUI).then(function(t){t.init(U.RankShowTypeEnum.RANK)}):t==U.RankShowTypeEnum.FINAL&&this.model.reqMatchConfig(e,n,function(t){t?M.UIManager.instance.open(U.MatchRankUI).then(function(t){t.init(U.RankShowTypeEnum.FINAL,e,n)}):S.EventManager.instance.emit(T.DataEvent.ToastData,"\u62c9\u53d6\u6bd4\u8d5b\u914d\u7f6e\u5931\u8d25")})},e.prototype.checkMatchSign=function(t){return r(this,void 0,Promise,function(){var e=this;return s(this,function(){return[2,new Promise(function(n){var o=e.model.getCurMatchData();g.MatchTypeEnum.FIX_PLAYER!=o.type?g.MatchTypeEnum.FIX_TIME==o.type?e.checkMatchOnSignTime(o,t).then(function(t){n(t)}):n(!1):e.model.reqMatchSubID(function(){var a=e.model.getMatchLocation();if(e.model.getMatchLocationAppID()>0)e.model.reqGDMatchSelfRank(a.matchsubid,a.appid,0,function(i,r){if(i)if(0==r.lose_at&&r.score>0)S.EventManager.instance.emit(T.DataEvent.ToastData,"\u68c0\u6d4b\u5230\u60a8\u6b63\u5728\u8fdb\u884c\u6bd4\u8d5b,\u8bf7\u7ee7\u7eed\u5b8c\u6210\u6bd4\u8d5b"),n(!0);else if(0==r.lose_at&&r.score<0){var s={content:"\u60a8\u5f53\u524d\u7684[color=#D50804]\u3010"+e.model.getMatchData(a.matchid,a.matchsubid).name+"\u3011[/color]\u672a\u7ed3\u675f\uff0c\u672c\u8f6e\u8fd8\u6709\u664b\u7ea7\u6216\u66ff\u8865\u673a\u4f1a\uff0c\u60a8\u786e\u5b9a\u8981\u653e\u5f03\u673a\u4f1a\u548c\u6392\u540d\u5956\u52b1\u5e76\u62a5\u540d\u65b0\u7684\u6bd4\u8d5b\u5417\uff1f",showCloseBtn:!1};G.BfasManager.instance.sendEvt(B.MatchPoint.MATCH_PLAYER_ENROLL_IN_MATCH_SHOW),b.UIHelp.instance.showDialogConfirmCancelMore(s,function(n){n?(G.BfasManager.instance.sendEvt(B.MatchPoint.MATCH_PLAYER_ENROLL_IN_MATCH_OK),e.model.reqGDMatchGiveup(a.matchid,a.matchsubid,a.appid,null,g.GiveupTypeEnum.TO_ANOTHER_MATCH),t&&t()):G.BfasManager.instance.sendEvt(B.MatchPoint.MATCH_PLAYER_ENROLL_IN_MATCH_CANCEL)}),n(!0)}else{var c=e.checkMatchOnSignPlayer(o,t);n(c)}else S.EventManager.instance.emit(T.DataEvent.ToastData,"\u68c0\u6d4b\u5230\u60a8\u6b63\u5728\u8fdb\u884c\u6bd4\u8d5b,\u8bf7\u7ee7\u7eed\u5b8c\u6210\u6bd4\u8d5b"),n(!0)});else{var i=e.checkMatchOnSignPlayer(o,t);n(i)}})})]})})},e.prototype.checkMatchOnSignTime=function(t,e){return r(this,void 0,Promise,function(){var t=this;return s(this,function(){return[2,new Promise(function(n){var o=Math.floor((new Date).getTime()/1e3),a=t.model.getStartTime()-o;a>=g.CDefaultCheckSignTime?n(!1):t.model.isInMatch().then(function(o){var i=Math.floor(a/60);i<=1&&(i=1);var r={content:"\u672c\u573a\u6bd4\u8d5b\u5f00\u8d5b\u5269"+i+"\u5206\u949f\uff0c\u60a8\u5f53\u524d\u8fd8\u6709\u5176\u4ed6\u6bd4\u8d5b\u672a\u7ed3\u675f\uff0c\u8bf7\u6ce8\u610f\u5408\u7406\u5b89\u6392\u53c2\u8d5b\u65f6\u95f4\u54e6\u3002",confirmText:"\u6211\u518d\u60f3\u60f3",cancelText:"\u7ee7\u7eed\u62a5\u540d",canClose:!0,showCloseBtn:!1},s=function(t){t?G.BfasManager.instance.sendEvt(B.MatchPoint.MATCH_TIME_ENROLL_HINT_CANCEL_CLICK):(G.BfasManager.instance.sendEvt(B.MatchPoint.MATCH_TIME_ENROLL_HINT_OK_CLICK),e&&e())};return o?(G.BfasManager.instance.sendEvt(B.MatchPoint.MATCH_TIME_ENROLL_HINT_SHOW),b.UIHelp.instance.showBigDialogConfirmCancel(r,s),void n(!0)):t.model.checkSignPlayerMatch()?(G.BfasManager.instance.sendEvt(B.MatchPoint.MATCH_TIME_ENROLL_HINT_SHOW),b.UIHelp.instance.showBigDialogConfirmCancel(r,s),void n(!0)):void n(!1)})})]})})},e.prototype.checkMatchOnSignPlayer=function(t,e){var n=this.model.checkSignTimeMatch(g.CDefaultCheckSignTime);if(n){var o="\u60a8\u5df2\u62a5\u540d\u7684\u3010"+n.name+"\u3011\u8ddd\u5f00\u8d5b\u65f6\u95f4\u5f88\u8fd1\u4e86\uff0c\u786e\u5b9a\u7ee7\u7eed\u62a5\u540d\u4eba\u6ee1\u5373\u5f00\u7684\u3010"+t.name+"\u3011\u5417\uff1f";return G.BfasManager.instance.sendEvt(B.MatchPoint.MATCH_PLAYER_ENROLL_HINT_SHOW),b.UIHelp.instance.showBigDialogConfirmCancel({content:o,confirmText:"\u6211\u518d\u60f3\u60f3",cancelText:"\u7ee7\u7eed\u62a5\u540d",canClose:!0,showCloseBtn:!1},function(t){t?G.BfasManager.instance.sendEvt(B.MatchPoint.MATCH_PLAYER_ENROLL_HINT_CANCEL_CLICK):(G.BfasManager.instance.sendEvt(B.MatchPoint.MATCH_PLAYER_ENROLL_HINT_OK_CLICK),e&&e())}),!0}return!1},e.prototype.showTimeMatchTopHint=function(t){var e=this,n=Math.floor((new Date).getTime()/1e3),o=t.timestamp-n,a=Math.floor(o/60);a<=0&&(a=1);var i="\u5df2\u62a5\u540d\u7684[color=#E34C38]"+t.name+"[/color]\u8fd8\u5269[color=#E34C38]"+a+"\u5206\u949f[/color]\u5c31\u8981\u5f00\u8d5b\u5566\uff01";M.UIManager.instance.open(X.TimeMatchTopHint).then(function(n){n.confirmAction=function(){var n=e.model.getCurMatchData();e.model.reqGDMatchGiveup(n.mid,n.msid,null,null,g.GiveupTypeEnum.TO_ANOTHER_MATCH),e.doHallGoSignMatch(t.mid,t.msid)},n.init({content:i,showTime:10})})},i([jsClass],e)}(m.FadeUI);n.MatchUI=Q,cc._RF.pop()},{"../../Framework/Manager/CoroutineManager":"CoroutineManager","../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataClubClientConfig":"DataClubClientConfig","../Base/Data/DataConstant":"DataConstant","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../Base/Data/DataProps":"DataProps","../Base/Data/DataSpineAni":"DataSpineAni","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Share/ShareManager":"ShareManager","../Base/Utils/UtilCC":"UtilCC","../Base/Utils/UtilTime":"UtilTime","../Base/View/Common/DialogUI":"DialogUI","../Base/View/UIHelp":"UIHelp","../ExchangeUI/ExchangeShopUI":"ExchangeShopUI","../FeedBack/FeedBackSuggUI":"FeedBackSuggUI","../Login/LoginModel":"LoginModel","../Mail/MailModel":"MailModel","../Mail/MailUI":"MailUI","../MatchShare/MatchExchangeTicketUI":"MatchExchangeTicketUI","../MatchShare/MatchShareModel":"MatchShareModel","../UserInfo/UserInfoModel":"UserInfoModel","./MatchAwardDetailUI":"MatchAwardDetailUI","./MatchConstant":"MatchConstant","./MatchHintUI/CountDownUI":"CountDownUI","./MatchHintUI/TimeMatchTopHint":"TimeMatchTopHint","./MatchHintUI/TopHintUI":"TopHintUI","./MatchModel":"MatchModel","./MatchRankUI":"MatchRankUI","./MatchRuleUI":"MatchRuleUI","./MatchUtils":"MatchUtils"}],MatchUtils:[function(t,e,n){"use strict";cc._RF.push(e,"309a58RMRVLd7sVBZgCyRnv","MatchUtils");var o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.MatchUtils=void 0;var i=t("../Base/Data/DataProps"),r=t("../Base/View/UIHelp"),s=t("./MatchModel"),c=function(){function t(){}return t.getPropName=function(t,e){return i.DataProps.instance.isJDKPropID(+t)?(i.DataProps.instance.getPropConfigByID(t).propValue||0)+"\u5143"+i.DataProps.instance.getPropName("jdk")+"x"+e:i.DataProps.instance.getPropName(t)+"x"+e},t.getPropIconRes=function(t,e,n){var o;return o=i.DataProps.instance.isGoldenEggPropID(+t)?this.getGoldenEggIconRes(e,n):i.DataProps.instance.isJDKPropID(+t)?i.DataProps.instance.getPropRes("jdk"):"yb"==t?this.getDiamondIconRes(e,n):i.DataProps.instance.getPropRes(t),r.UIHelp.getPropIcon(i.PropTypeEnum.SINGLE,o)},t.getGoldenEggIconRes=function(t,e){var n;return n=e==s.MatchTypeEnum.FIX_PLAYER?t<500?"egg1":t<1e3?"egg2":"egg3":t<1e3?"egg1":t<=5e3?"egg2":"egg3",i.DataProps.instance.getPropRes(n)},t.getDiamondIconRes=function(t,e){var n;return n=e==s.MatchTypeEnum.FIX_PLAYER?t<5?"yb5":"yb7":t<10?"yb2":t<50?"yb5":"yb7",i.DataProps.instance.getPropRes(n)},t.getUIMatchAward=function(t,e,n){return{name:this.getPropName(t,e),url:this.getPropIconRes(t,e,n)}},t.getPriority=function(t){return t?t.startsWith("prop")?t.replace("prop",""):t.startsWith("yb")?"yb":t.startsWith("sr")?"sr":"":""},t.convertMatchAwards=function(t,e){var n,i,r=[],s=this.getPriority(t.rwd0);if(t.prop)try{for(var c=o(Object.entries(t.prop)),l=c.next();!l.done;l=c.next()){var u=a(l.value,2),d=u[0],p=u[1],h=this.getUIMatchAward(d,p,e);s===d+""?r.unshift(h):r.push(h)}}catch(_){n={error:_}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return t.yb&&t.yb>0&&(h=this.getUIMatchAward("yb",t.yb,e),"yb"===s?r.unshift(h):r.push(h)),t.sr&&t.sr>0&&(h=this.getUIMatchAward("sr5",t.sr,e),"sr"===s?r.unshift(h):r.push(h)),r},t}();n.MatchUtils=c,cc._RF.pop()},{"../Base/Data/DataProps":"DataProps","../Base/View/UIHelp":"UIHelp","./MatchModel":"MatchModel"}],MeiTuanPlatform:[function(t,e,n){"use strict";cc._RF.push(e,"3e2b0V0UsFGVK/LKAcfFCsr","MeiTuanPlatform");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.MeiTuanPlatform=n.MeiTuanInfo=void 0;var r=t("../../../../Framework/Manager/CoroutineManager"),s=t("../../../../Framework/Manager/EventManager"),c=t("./Const/PlatformEventType"),l=t("../../../../Framework/Utils/Extension/ConsoleExtension"),u=t("./Const/Scope"),d=t("../../Data/DataBfConfig"),p=t("../Network/SocketUtils"),h=t("./PlatformManager"),_=t("../../../UserInfo/UserInfoModel"),f=function(){function t(){}return i([jsClass("MeiTuanInfo")],t)}();n.MeiTuanInfo=f;var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=h.PlatformTypeEnum.MeiTuan,e._options={},e._chatType=0,e.DATA_POINT_CHANEL_KEYS=["channel","channelId","channelid","TDChannelId"],e.LOW_PERFORMANCE_LEVEL_MAX=10,e.MIN_SHARE_DURATION=2500,e.VIDEO_AD_UNIT_ID="adunit-ff565e4434904190",e._bannerAds={},e.BANNER_AD_IDS=[],e.GAME_BANNER_AD_IDS=[],e.GRID_AD_IDS=[],e.GAME_PORTAL_AD_UNIT_ID="PBgAAchv_spbiB3Y",e._gamePortalLoaded=!1,e._networkType="unknown",e}return a(e,t),Object.defineProperty(e.prototype,"isAppHidden",{get:function(){return this._isAppHidden},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"query",{get:function(){return this._options.query||{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shareTicket",{get:function(){return this._options.shareTicket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"channel",{get:function(){return this.getDataPointChannel()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._options.scene},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chatType",{get:function(){return this._chatType},enumerable:!1,configurable:!0}),e.prototype.isAuditing=function(){return!1},e.prototype.onLoad=function(){var t=this;r.CoroutineManager.instance.frameOnce(1,function(){wx.onShow(function(e){t._isAppHidden=!1,t.onAppShow(e),cc.game.renderType===cc.game.RENDER_TYPE_WEBGL&&cc.game._renderContext.flush(),s.EventManager.instance.emit(c.PlatformEventType.AppShow)}),wx.onHide(function(){t._isAppHidden=!0,cc.game.renderType===cc.game.RENDER_TYPE_WEBGL&&cc.game._renderContext.flush(),s.EventManager.instance.emit(c.PlatformEventType.AppHide)})},this),this.onAppShow(wx.getLaunchOptionsSync()),d.DataBfConfig.init(this.query.env,this.name),console.log("onAppShow.ymn.info: ",d.DataBfConfig.ymn),this.getSystemInfoSync(),this.initConsole(),this.initFrameRate(),this.initMemoryWarning(),this.initError(),this.initVideoAd(),this.initVersionUpdate(),this.initKeyboard(),this.initRecordManager(),this.initNetworkType(),this.initShareMessageToFriend(),this.hasShare=!1},e.prototype.onAppShow=function(t){this._options=t||{},console.log("onAppShow:",JSON.stringify(this._options));var e=this._options.query.channel;e&&d.DataBfConfig.setYmnChannel(Number(e));var n=JSON.parse(JSON.stringify(this._options));if(this._chatType=n.chatType||0,this._shareTime){var o=Math.floor((Date.now()-this._shareTime)/1e3);this._shareTime=void 0,s.EventManager.instance.emit(c.PlatformEventType.Share,o)}wx.setKeepScreenOn&&wx.setKeepScreenOn({keepScreenOn:!0}),this.updateShareMenu(),this.clearAuthSettingCache()},e.prototype.getDataPointChannel=function(){var t=this._options.query;if(t){for(var e=0,n=this.DATA_POINT_CHANEL_KEYS.length;e<n;++e)if(c=t[this.DATA_POINT_CHANEL_KEYS[e]])return parseInt(c);var o=t.scene;if(o){var a={},i=decodeURIComponent(o).split("&");for(e=0,n=i.length;e<n;++e){var r=i[e].split("=");r.length>1&&(a[r[0]]=r[1])}for(e=0,n=this.DATA_POINT_CHANEL_KEYS.length;e<n;++e)if(c=a[this.DATA_POINT_CHANEL_KEYS[e]])return parseInt(c)}}var s=this._options.referrerInfo&&this._options.referrerInfo.extraData;if(s)for(e=0,n=this.DATA_POINT_CHANEL_KEYS.length;e<n;++e){var c;if(c=s[this.DATA_POINT_CHANEL_KEYS[e]])return c}return this._options.scene||0},e.prototype.initConsole=function(){l.ConsoleExtension.setEnabled(this.isDebugMode()||!this.isOnMobile()),l.ConsoleExtension.setReferEnabled(!this.isOnMobile())},e.prototype.initFrameRate=function(){},e.prototype.initError=function(){wx.onError(function(t){return console.warn("mt.onError: ",t)})},e.prototype.initMemoryWarning=function(){cc.sys.OS_IOS===cc.sys.os?wx.onMemoryWarning&&wx.onMemoryWarning(function(t){var e=t&&t.level;console.warn("mt.onMemoryWarning: "+e),s.EventManager.instance.emit(c.PlatformEventType.MemoryWarning,e)}):console.error("mt.onMemoryWarning is not supported!")},e.prototype.initVersionUpdate=function(){var t=wx.getUpdateManager();t.onCheckForUpdate(function(t){console.log("WXApi Has new version: "+t.hasUpdate)}),cc.sys.OS_IOS===cc.sys.os&&(t.onUpdateReady(function(){wx.showModal({title:"\u66f4\u65b0\u63d0\u793a",content:"\u65b0\u7248\u672c\u5df2\u7ecf\u51c6\u5907\u597d\uff0c\u8bf7\u91cd\u542f\u5e94\u7528\uff01",showCancel:!1,success:function(e){e.confirm&&t.applyUpdate()}})}),t.onUpdateFailed(function(){wx.showModal({title:"\u66f4\u65b0\u63d0\u793a",content:"\u7248\u672c\u66f4\u65b0\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u6253\u5f00\uff01",showCancel:!1,success:function(t){t.confirm&&wx.exitMiniProgram()}})}))},e.prototype.getWXConfig=function(){return __wxConfig},e.prototype.getSystemInfoSync=function(){try{this._systemInfo=wx.getSystemInfoSync()}catch(t){console.error("mt.getSystemInfoSync error:",t),this._systemInfo||(this._systemInfo={screenWidth:1334,screenHeight:750,pixelRatio:1,platform:"unknown",system:"Unknown"})}return console.log("systemInfo:",this._systemInfo),this._systemInfo},Object.defineProperty(e.prototype,"performanceLevel",{get:function(){return this._systemInfo.benchmarkLevel},enumerable:!1,configurable:!0}),e.prototype.isLowPerformance=function(){if(!this.isOnMobile())return!1;if(cc.sys.os===cc.sys.OS_IOS)return!1;if(!this._systemInfo)return!0;var t=this.performanceLevel;return null==t||-1!==t&&t<=this.LOW_PERFORMANCE_LEVEL_MAX},e.prototype.isOnMobile=function(){return"devtools"!==this._systemInfo.platform},e.prototype.isDebugMode=function(){return!0},e.prototype.login=function(t){var e=this;if(this._loggingIn)console.log("mt.login repeat!");else{this._loggingIn=!0,console.log("mt.login");var n=Date.now();wx.login({success:function(o){var a=Date.now()-n;console.log("mt.login succeed [cost:"+a+"ms]:",o.code);var i="Unknown";switch(e._systemInfo.platform){case"ios":i="iOS";break;case"android":i="Android"}t&&t({code:o.code,os:i})},fail:function(e){var o=Date.now()-n;console.error("mt.login failed [cost:"+o+"ms]:",e),t&&t(null)},complete:function(){e._loggingIn=!1}})}},Object.defineProperty(e.prototype,"needUserInfoButton",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.createUserInfoButton=function(){return null},e.prototype.getUserInfo=function(t,e){console.log("MTApi getUserInfo"),wx.getUserInfo({success:function(t){return console.log("mt.getUserInfo: succeed",t)},fail:function(t){return console.error("mt.getUserInfo: failed",t)},complete:function(t){console.error("mt.getUserInfo: complete",t),e&&e(t&&{nickname:t.nickName,icon:t.avatarUrl,gender:t.gender})}}),e&&e(null)},e.prototype.getUserInfoSilent=function(t){console.log("MTApi getUserInfoSilent"),this.isScopeAuthored(u.Scope.userInfo,function(e){e?(console.log("mt.getUserInfo"),wx.getUserInfo({withCredentials:!0,lang:"zh_CN",success:function(t){return console.log("mt.getUserInfo: succeed",t)},fail:function(t){return console.error("mt.getUserInfo: failed",t)},complete:function(e){var n=e.userInfo;t&&t(n&&{nickname:n.nickName,icon:n.avatarUrl,gender:n.gender})}}),t&&t(null)):t&&t(null)})},e.prototype.getShareInfo=function(t){this.shareTicket?(console.log("mt.getShareInfo"),console.error("mt.getShareInfo is not supported!"),t&&t(null)):(console.log("mtApi getShareInfo has no shareTicket"),t&&t(null))},e.prototype.isScopeAuthored=function(t,e){this.getAuthSetting(function(n){e&&e(n&&n[t])})},e.prototype.requireScope=function(t,e,n){var o=this;this.isScopeAuthored(t,function(a){a?n&&n(!0,!0):void 0===a?o.authorize(t,function(t){return n&&n(t,a)}):o.openAuthSetting(e,function(e){n&&n(e?e[t]:a,a)})})},e.prototype.clearAuthSettingCache=function(){this._authSetting=null},e.prototype.getAuthSetting=function(t){this._authSetting?t&&t(this._authSetting):(console.log("mt.getSetting"),console.error("mt.getSetting is not supported!"))},e.prototype.authorize=function(t,e){console.log("mt.authorize"),console.error("mt.authorize is not supported!"),this._authSetting[t]=!1,e&&e(!1)},e.prototype.openAuthSetting=function(t,e){console.log("mt.openSetting"),console.error("mt.openSetting is not supported!"),e&&e(null)},Object.defineProperty(e.prototype,"hasShare",{get:function(){return this._hasShare},set:function(t){this._hasShare=t,t?wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}):wx.hideShareMenu(null)},enumerable:!1,configurable:!0}),e.prototype.onShareAppMessage=function(t){var e=this;wx.onShareAppMessage(function(){return e._shareTime=Date.now(),t&&t()})},e.prototype.onShareTimeline=function(){console.error("mt.onShareTimeline is not supported!")},e.prototype.shareAppMessage=function(t,e,n,o){var a=this;this.hasShare?this.updateShareMenu(o,function(){console.log("mt.shareAppMessage: ",t,e,n),a._shareTime=Date.now(),wx.shareAppMessage({title:t,imageUrl:e,query:n})}):this.showToast("\u5168\u56fd\u54c0\u60bc\u65e5\u6682\u4e0d\u80fd\u5206\u4eab")},e.prototype.updateShareMenu=function(t,e){this.parseUpdateShareMenuObject(t).activityId===this._shareActivityId?(console.log("mt.updateShareMenu skip:",t),e&&e(!0)):(console.log("mt.updateShareMenu: ",t),console.error("mt.updateShareMenu is not supported!"),e&&e(!1))},e.prototype.parseUpdateShareMenuObject=function(t){return t&&t.activityId?{withShareTicket:!0,isUpdatableMessage:!0,activityId:t.activityId,templateInfo:{parameterList:[{name:"member_count",value:t.current+""},{name:"room_limit",value:t.total+""}]}}:{withShareTicket:!0,isUpdatableMessage:!1,activityId:null,templateInfo:{}}},e.prototype.showToast=function(t,e,n){console.log("mt.showToast"),cc.sys.OS_IOS===cc.sys.os?(null==e&&(e="none"),null==n&&(n=2e3),wx.showToast({title:t,icon:e,duration:n}),this._loading=!1):console.error("android mt.showToast is not supported!")},e.prototype.showLoading=function(t,e){console.log("mt.showLoading"),cc.sys.OS_IOS===cc.sys.os?(wx.showLoading({title:t,mask:e}),this._loading=!0):console.error("android mt.showLoading is not supported!")},e.prototype.hideLoading=function(){console.log("mt.hideLoading"),this._loading&&(cc.sys.OS_IOS===cc.sys.os?(wx.hideLoading(),this._loading=!1):console.error("android mt.hideLoading is not supported!"))},e.prototype.showDialog=function(t,e,n,o,a){void 0===o&&(o="\u786e\u8ba4"),void 0===a&&(a="\u53d6\u6d88"),console.log("mt.showModal"),cc.sys.OS_IOS===cc.sys.os?wx.showModal({title:"\u63d0\u793a",content:t,showCancel:e,confirmText:o,cancelText:a,success:function(t){return n&&n(t.confirm)}}):console.error("android mt.hideLoading is not supported!")},Object.defineProperty(e.prototype,"isSupportVideoAd",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.initVideoAd=function(){var t=this;if(this.isSupportVideoAd&&wx.createRewardedVideoAd){var e=wx.createRewardedVideoAd({adUnitId:this.VIDEO_AD_UNIT_ID});this._videoAdLoaded=!1,this._videoAdLoading=!0,e.onLoad(function(){t._videoAdLoading=!1,t._videoAdLoaded=!0,console.log("MTApi Video ad loaded!")}),e.onError(function(e){t._videoAdLoading=!1,console.error("MTApi Video ad error: ",e)}),e.onClose(function(e){return t.onVideoAdClose(e)}),this._videoAd=e}},Object.defineProperty(e.prototype,"isVideoAdLoaded",{get:function(){var t=this._videoAdLoaded;return this._videoAdLoading||t||this.loadVideoAd(),t},enumerable:!1,configurable:!0}),e.prototype.loadVideoAd=function(){this._videoAdLoaded=!1,this._videoAdLoading=!0;try{this._videoAd.load().then(function(){return console.log("MTApi load video ad succeed")})}catch(t){console.error("MTApi load video ad error: ",t)}},e.prototype.showVideoAd=function(t,e,n){var o=this;if(this._videoAd)console.log("MTApi show video ad."),this._videoAd.show({branchId:e,branchDim:n}).then(function(){try{t&&t(!0)}catch(e){console.error(e)}}).catch(function(e){console.log("MTApi show video ad error: ",e);try{t&&t(!1)}catch(n){console.error(n)}o.loadVideoAd()});else try{t&&t(!1)}catch(a){console.error(a)}},e.prototype.onVideoAdClose=function(t){console.log("MTApi Video advertisement close: ",t);var e=t&&t.isEnded||void 0===t;s.EventManager.instance.emit(c.PlatformEventType.VideoAdClose,e)},Object.defineProperty(e.prototype,"hasBannerAd",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.createBannerAd=function(t,e,n,o){var a=this;if(e=e||{x:.5,y:1,pivotX:.5,pivotY:1},this.hasBannerAd){var i=this.BANNER_AD_IDS[t];if(i){var s=wx.createBannerAd({adUnitId:i,style:{left:0,top:0,width:300}});s.onError(function(e){s.destroy(),a._bannerAds[t]=null,console.warn("MTApi Banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25:",e),o&&o()}),console.log("MTApi Create banner ad: ",t,i,e),this._bannerAds[t]=s;var c=this._systemInfo.screenWidth,l=this._systemInfo.screenHeight;s.style.left=c,s.style.top=l,r.CoroutineManager.instance.wait(function(){return null!=s.style.realHeight},function(){var t=s.style.realWidth/c,o=s.style.realHeight/l,a=e.x-e.pivotX*t,r=e.y-e.pivotY*o;s.style.left=c*a+.1,s.style.top=l*r+.1,n&&n(a,r,t,o,i)},this)}else console.warn("MTApi BannerAd id is null or empty!"),o&&o()}else console.error("mt.createBannerAd is not supported!"),o&&o()},Object.defineProperty(e.prototype,"hasGameBannerAd",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.createGameBannerAd=function(t,e,n,o){var a=this;if(this.hasGameBannerAd){var i=this.GAME_BANNER_AD_IDS[t];if(i){var r=wx.createGameBanner({adUnitId:i,style:{left:0,top:1e3}});r.onError(function(e){r.destroy().catch(function(t){return console.error("MTApi GameBanner destroy error:",t)}),a._bannerAds[t]=null,console.warn("MTApi GameBannerAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25:",e),o&&o()}),r.onResize(function(){var t=0,e=0,o=0,a=0,s=.8,c=r.style;c&&(t=c.left,e=c.top,o=c.width,a=c.height,s=(e-23)/(e+70),c.height&&(s=(e-23)/(e+c.height))),console.log("MTApi GameBanner \u5e7f\u544a onLoad",t,e,0,s,o,a),n&&n(0,s,o,a,i)}),this._bannerAds[t]=r,console.log("MTApi Create GameBanner ad: ",t,i)}else console.warn("MTApi GameBannerAd id is null or empty!"),o&&o()}else console.error("mt.createGameBanner is not supported!"),o&&o()},Object.defineProperty(e.prototype,"hasGridAd",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.createGridAd=function(t,e,n,o){var a=this;if(e=e||{x:.5,y:1,pivotX:.5,pivotY:1},this.hasGridAd){var i=this.GRID_AD_IDS[t];if(i){var s=wx.createGridAd({adUnitId:i,adTheme:"white",gridCount:5,style:{left:0,top:0,width:300}});s.onError(function(e){s.destroy(),a._bannerAds[t]=null,console.warn("MTApi GridAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25:",e),o&&o()}),r.CoroutineManager.instance.wait(function(){return null!=s.style.realHeight},function(){var t=a._systemInfo.screenWidth,o=a._systemInfo.screenHeight,r=s.style.realWidth/t,c=s.style.realHeight/o,l=e.x-e.pivotX*r,u=e.y-e.pivotY*c;s.style.left=t*l+.1,s.style.top=o*u+.1,n&&n(l,u,r,c,i)},this),this._bannerAds[t]=s,console.log("MTApi Create GridAd ad: ",t,i)}else console.warn("MTApi GridAd id is null or empty!"),o&&o()}else console.error("mt.createGridAd is not supported!"),o&&o()},e.prototype.showBannerAd=function(t,e,n){var o=this._bannerAds[t];if(o){try{o.show().then(function(){n&&n(!0)}).catch(function(t){console.warn("MTApi Show banner ad error: ",t),n&&n(!1)})}catch(a){console.error("MTApi Show banner ad error: ",a)}console.log("MTApi Show banner ad: ",t)}},e.prototype.hideBannerAd=function(t){var e=this._bannerAds[t];e&&(e.hide(),console.log("MTApi Hide banner ad: ",t))},e.prototype.closeBannerAd=function(t){var e=this._bannerAds[t];e&&(e.destroy(),this._bannerAds[t]=null,console.log("MTApi Close banner ad: ",t))},Object.defineProperty(e.prototype,"hasGamePortalAd",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.initGamePortalAd=function(){var t=this;if(this.hasGamePortalAd){var e=wx.createGamePortal({adUnitId:this.GAME_PORTAL_AD_UNIT_ID});e.onLoad(function(){t._gamePortalLoaded=!0,console.log("MTApi GamePortalAd advertisement loaded!")}),e.onError(function(e){t._gamePortalLoaded=!1,console.error("MTApi GamePortalAd advertisement error - "+e)}),e.onClose(function(){return console.log("MTApi GamePortalAd advertisement close")}),this._gamePortalAd=e}},e.prototype.showGamePortalAd=function(t){if(this._gamePortalAd&&this._gamePortalLoaded)this._gamePortalAd.show().then(function(){try{t&&t(!0)}catch(e){console.error(e)}}).catch(function(e){console.error("MTApi show GamePortalAd ad error: ",e);try{t&&t(!1)}catch(n){console.error(n)}});else try{t&&t(!1)}catch(e){console.error(e)}},Object.defineProperty(e.prototype,"canKejin",{get:function(){return cc.sys.os!==cc.sys.OS_IOS},enumerable:!1,configurable:!0}),e.prototype.requestKejin=function(t,e){var n=t.meiTuanData.trade_request_content,o={mgcId:_.UserInfoModel.instance.getMeiTuanMgcID(),appId:n.appId,accessToken:_.UserInfoModel.instance.getMeiTuanAccessToken(),productId:n.productId,bizOrderNo:n.bizOrderNo,needRefresh:1,success:function(t){console.log("mt.requestMidasPayment succeed:",t),e&&e(!0)},fail:function(t){console.error("mt.requestMidasPayment failed:",t),e&&e(!1)}};console.log("mt.requestMidasPayment",o),this.canKejin&&cc.sys.os===cc.sys.OS_ANDROID?wx.requestMidasPayment(o):e&&e(null)},e.prototype.initKeyboard=function(){var t=this;wx.onKeyboardConfirm(function(e){console.log("mt.onKeyboardConfirm:",e),t._onKeyboardConfirm&&t._onKeyboardConfirm(e.value),t._onKeyboardConfirm=null}),wx.onKeyboardComplete(function(e){console.log("mt.onKeyboardComplete:",e),t._onKeyboardComplete&&t._onKeyboardComplete(e.value),t._onKeyboardComplete=null})},e.prototype.showKeyboard=function(t,e,n){console.log("mt.showKeyboard: ",t),wx.showKeyboard(t),e&&(this._onKeyboardConfirm=e),n&&(this._onKeyboardComplete=e)},e.prototype.updateKeyboard=function(t){console.log("mt.updateKeyboard: ",t),wx.updateKeyboard({value:t})},e.prototype.hideKeyboard=function(){console.log("mt.hideKeyboard"),wx.hideKeyboard()},e.prototype.navigateToMiniProgram=function(t,e){console.error("mt.navigateToMiniProgram is not supported!"),e&&e(!1)},Object.defineProperty(e.prototype,"canVoiceChat",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.joinVoiceChat=function(t,e,n){console.log("mt.joinVoIPChat: ",t,e),console.error("mt.navigateToMiniProgram is not supported!"),n&&n(!1,null)},e.prototype.exitVoiceChat=function(t){console.log("mt.exitVoIPChat"),console.error("mt.exitVoIPChat is not supported!"),t&&t(!0)},e.prototype.updateVoiceChatMuteConfig=function(t){console.log("mt.updateVoIPChatMuteConfig: ",t),console.error("mt.updateVoIPChatMuteConfig is not supported!")},e.prototype.onVoiceChatSpeakersChanged=function(){console.log("mt.onVoIPChatSpeakersChanged"),console.error("mt.onVoIPChatSpeakersChanged is not supported!")},e.prototype.onVoiceChatMembersChanged=function(){console.log("mt.onVoIPChatMembersChanged"),console.error("mt.onVoIPChatMembersChanged is not supported!")},e.prototype.onVoiceChatInterrupted=function(){console.log("mt.onVoIPChatInterrupted"),console.error("mt.onVoIPChatInterrupted is not supported!")},Object.defineProperty(e.prototype,"canFeedback",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.createFeedbackButton=function(){return console.log("mt.createFeedbackButton"),null},e.prototype.openCustomerServiceConversation=function(t){console.warn("mt.openCustomerServiceConversation is not exist: ",t)},Object.defineProperty(e.prototype,"canOpenURL",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.openCustomerServiceWithURL=function(t){console.warn("openCustomerServiceWithURL:",t)},e.prototype.clearCache=function(){console.log("MTApi clearCache");var t=cc.assetManager.cacheManager;t&&(console.log("MTApi cached file count:",t.cachedFiles.count),t.clearCache(),console.log("MTApi cache cleaned!"),console.log("MTApi cached file count:",t.cachedFiles.count))},e.prototype.exit=function(){console.log("mt.exitMiniProgram"),wx.exitMiniProgram()},e.prototype.fix=function(t){t?(this.clearCache(),this.exit()):this.exit()},Object.defineProperty(e.prototype,"canSubscribe",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canWhatNewSubscribe",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.requestSubscribe=function(t,e){console.log("mt.requestSubscribeMessage: ",t),e&&e(!1)},e.prototype.requestSubscribeWhatsNew=function(t){console.log("mt.requestSubscribeWhatsNew"),t&&t(null,0)},e.prototype.getWhatsNewSubscriptionsSetting=function(t){console.log("mt.getWhatsNewSubscriptionsSetting"),t&&t(!1)},Object.defineProperty(e.prototype,"networkType",{get:function(){return this._networkType},enumerable:!1,configurable:!0}),e.prototype.initNetworkType=function(){var t=this;wx.getNetworkType&&wx.getNetworkType({success:function(e){console.log("mt.getNetworkType succeed: ",e),t._networkType=e.networkType},fail:function(e){console.error("mt.getNetworkType failed:",e),t._networkType="unknown"}}),wx.onNetworkStatusChange&&wx.onNetworkStatusChange(function(e){console.warn(">----\x3emt.onNetworkStatusChange:",e),t._networkType=e.isConnected?e.networkType:"unknown",s.EventManager.instance.emit(c.PlatformEventType.NetworkStatusChange,t._networkType),console.warn(">----\x3emt.onNetworkStatusChange.disconnect"),p.SocketUtils.instance.disconnect(!0)})},e.prototype.getBatteryInfo=function(t){cc.sys.OS_ANDROID===cc.sys.os?wx.getBatteryInfo({success:function(e){console.log("mt.getBatteryInfo succeed:",e),t&&t(e.level||0,e.isCharging)},fail:function(e){console.error("mt.getBatteryInfo failed:",e),t&&t(0,!1)}}):console.error("mt.getBatteryInfo is not supported!")},e.prototype.getLocation=function(t){console.log("mt.getLocation"),wx.getLocation({success:function(e){console.log("mt.getLocation succeed:",e),t&&t(e)},fail:function(e){console.error("mt.getLocation failed:",e),t&&t(null)}})},e.prototype.initGameRecorder=function(){console.error("mt.getGameRecorder is not supported!")},Object.defineProperty(e.prototype,"hasGameRecorder",{get:function(){return console.log("MTApi hasGameRecorder: false, mt.getGameRecorder is undefined"),!1},enumerable:!1,configurable:!0}),e.prototype.gameRecorderStart=function(){this.hasGameRecorder&&console.log("MTApi GameRecorder.start")},e.prototype.gameRecorderPause=function(){this.hasGameRecorder&&console.log("MTApi GameRecorder.pause")},e.prototype.gameRecorderResume=function(){this.hasGameRecorder&&console.log("MTApi GameRecorder.resume")},e.prototype.gameRecorderStop=function(t){this.hasGameRecorder&&(console.log("MTApi GameRecorder.stop"),s.EventManager.instance.once(c.PlatformEventType.GameRecorderStop,this,function(e){return t&&t(e)}))},e.prototype.gameRecorderAbort=function(){this.hasGameRecorder&&console.log("MTApi GameRecorder.abort")},e.prototype.createGameRecorderShareButton=function(t,e,n,o){return console.log("mt.createGameRecorderShareButton:",t,e,n,o),null},e.prototype.initRecordManager=function(){console.error("mt.getRecorderManager is not supported!")},e.prototype.startRecord=function(t){this._recorderManager&&this._recorderManager.start(t)},e.prototype.stopRecord=function(){this._recorderManager&&this._recorderManager.stop()},e.prototype.setClipboardData=function(t,e){wx.setClipboardData&&(console.log("mt.setClipboardData"),wx.setClipboardData({data:t,success:function(t){console.log("mt.setClipboardData succeed:",t),e&&e(!0)},fail:function(t){console.error("mt.setClipboardData failed:",t),e&&e(!1)}}))},e.prototype.getClipboardData=function(t){wx.getClipboardData&&(console.log("mt.getClipboardData"),wx.getClipboardData({success:function(e){console.log("mt.getClipboardData succeed:",e),t&&t(e.data)},fail:function(e){console.error("mt.getClipboardData failed:",e),t&&t(null)}}))},e.prototype.uploadFile=function(t,e,n,o,a,i,r){console.log("mt.uploadFile"),console.error("mt.uploadFile is not supported!"),r&&r(null)},e.prototype.toTempFilePath=function(t,e,n){if(t||(t=window.canvas),e||(e=new cc.Rect(0,0,1,1)),t&&t.toTempFilePath){var o=t.width,a=t.height;console.log("MTApi Canvas.toTempFilePath");try{t.toTempFilePath({x:e.x*o,y:e.y*a,width:e.width*o,height:e.height*a,success:function(t){console.log("MTApi Canvas.toTempFilePath succeed:",t),n&&n(t.tempFilePath)},fail:function(t){console.error("MTApi Canvas.toTempFilePath failed:",t),n&&n(null)}})}catch(i){console.error("MTApi Canvas.toTempFilePath error:",i),n&&n(null)}}},e.prototype.toDataURL=function(t,e){var n;console.log("MTApi Canvas.toDataURL");try{n=t.toDataURL(),console.log("MTApi Canvas.toDataURL succeed:",n)}catch(o){console.error("MTApi Canvas.toDataURL failed:",o)}e&&e(n)},e.prototype.previewImage=function(t,e){console.log("mt.previewImage"),wx.previewImage({urls:t||[],success:function(){console.log("mt.previewImage succeed."),e&&e(!0)},fail:function(t){console.error("mt.previewImage failed:",t),e&&e(!1)}})},e.prototype.saveImageToPhotosAlbum=function(t,e){console.log("mt.saveImageToPhotosAlbum"),wx.saveImageToPhotosAlbum({filePath:t,success:function(){console.log("mt.saveImageToPhotosAlbum succeed."),e&&e(!0)},fail:function(t){console.error("mt.saveImageToPhotosAlbum failed:",t),e&&e(!1)}})},e.prototype.initShareMessageToFriend=function(){console.error("mt.onShareMessageToFriend is not supported!")},e.prototype.setMessageToFriendQuery=function(t){console.log("mt.setMessageToFriendQuery:",t),console.error("mt.setMessageToFriendQuery is not supported!")},e.prototype.setUserCloudStorage=function(t,e){console.log("mt.setUserCloudStorage:",t),e&&e(!1),console.error("mt.setUserCloudStorage is not supported!")},e.prototype.postMessage=function(){},e.prototype.reportUserBehaviorBranchAnalytics=function(){},e.prototype.getEnvVersion=function(){return""},Object.defineProperty(e.prototype,"supportAct",{get:function(){return{ACTIVITY_CENTER:!0,SIGN:!1,LUCKY_TURN:!1,SHARE_HAVE_GIFT:!1,TEN_BOX:!1,CUSTOMER:!1,MATCH_AND_FIREND:!0,TEAM_INVITE_GIFT:!1,SKY_FALL_TICKET:!1}},enumerable:!1,configurable:!0}),i([jsClass],e)}(cc.Component);n.MeiTuanPlatform=m,cc._RF.pop()},{"../../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Utils/Extension/ConsoleExtension":"ConsoleExtension","../../../UserInfo/UserInfoModel":"UserInfoModel","../../Data/DataBfConfig":"DataBfConfig","../Network/SocketUtils":"SocketUtils","./Const/PlatformEventType":"PlatformEventType","./Const/Scope":"Scope","./PlatformManager":"PlatformManager"}],MergeNumHintUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"bb9d9x2h1ZFipqXMCOfDsh7","MergeNumHintUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./MergeNumHintUI_MainPanel"),a=t("./MergeNumHintUI_Window"),i=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default)},t}();n.default=i,cc._RF.pop()},{"./MergeNumHintUI_MainPanel":"MergeNumHintUI_MainPanel","./MergeNumHintUI_Window":"MergeNumHintUI_Window"}],MergeNumHintUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"549a0fYvPNKDp4+TqwAgAe8","MergeNumHintUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MergeNumHintUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://hofx50zenpfu0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MergeNumHintUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"41159efuOJC/4N+o6HZVqPA","MergeNumHintUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("MergeNumHintUI","Window")},e.prototype.onConstruct=function(){this.m_numID=this.getChildAt(1),this.m_mergeNumID=this.getChildAt(2),this.m_numID2=this.getChildAt(3),this.m_btnOk=this.getChildAt(4),this.m_btnClose=this.getChildAt(5)},e.URL="ui://hofx50zenpfu1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],MergeNumHintUI:[function(t,e,n){"use strict";cc._RF.push(e,"f9f50oVtd1PMoZcjVM5308+","MergeNumHintUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.MergeNumHintUI=void 0;var r=t("../../Framework/UI/FadeUI"),s=t("./MergeNumHintUI/MergeNumHintUIBinder"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){s.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),this.view.m_Window.m_btnOk.onClick(this.onExitClick,this)},e.prototype.initUI=function(t,e){this.view.m_Window.m_mergeNumID.text=t.toString(),this.view.m_Window.m_numID.text=e.toString(),this.view.m_Window.m_numID2.text=e.toString()},i([jsClass],e)}(r.FadeUI);n.MergeNumHintUI=c,cc._RF.pop()},{"../../Framework/UI/FadeUI":"FadeUI","./MergeNumHintUI/MergeNumHintUIBinder":"MergeNumHintUIBinder"}],MiniGamePlatform:[function(t,e,n){"use strict";cc._RF.push(e,"5ac7bmVr7hOsJX848Q1bCpq","MiniGamePlatform");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},r=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.MiniGamePlatform=void 0;var s=t("../../../../Framework/Manager/CoroutineManager"),c=t("../../../../Framework/Manager/EventManager"),l=t("./Const/PlatformEventType"),u=t("../../../../Framework/Utils/Extension/ConsoleExtension"),d=t("./Const/Scope"),p=t("../../Data/DataBfConfig"),h=t("../Network/SocketUtils"),_=t("./PlatformManager"),f=t("../../../../Framework/Manager/ABTestManager"),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=_.PlatformTypeEnum.MiniGame,e._options={},e._chatType=0,e.DATA_POINT_CHANEL_KEYS=["channel","channelId","channelid","TDChannelId"],e.LOW_PERFORMANCE_LEVEL_MAX=10,e.MIN_SHARE_DURATION=2500,e.VIDEO_AD_UNIT_ID="adunit-ff565e4434904190",e._bannerAds={},e.BANNER_AD_IDS=[],e.GAME_BANNER_AD_IDS=[],e.GRID_AD_IDS=[],e.GAME_PORTAL_AD_UNIT_ID="PBgAAchv_spbiB3Y",e._gamePortalLoaded=!1,e._networkType="unknown",e}return a(e,t),Object.defineProperty(e.prototype,"isAppHidden",{get:function(){return this._isAppHidden},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"query",{get:function(){return this._options.query||{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shareTicket",{get:function(){return this._options.shareTicket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"channel",{get:function(){return this.getDataPointChannel()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._options.scene},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chatType",{get:function(){return this._chatType},enumerable:!1,configurable:!0}),e.prototype.isAuditing=function(t){if(t){var e=this.getWXConfig();return"release"!==(e&&e.envVersion)}return!1},e.prototype.onLoad=function(){var t=this;s.CoroutineManager.instance.frameOnce(1,function(){wx.onShow(function(e){t._isAppHidden=!1,wx.getEnterOptionsSync&&(console.log("onShow:",JSON.stringify(e)),e=wx.getEnterOptionsSync()),t.onAppShow(e),cc.game.renderType===cc.game.RENDER_TYPE_WEBGL&&cc.game._renderContext.flush(),c.EventManager.instance.emit(l.PlatformEventType.AppShow)}),wx.onHide(function(){t._isAppHidden=!0,cc.game.renderType===cc.game.RENDER_TYPE_WEBGL&&cc.game._renderContext.flush(),c.EventManager.instance.emit(l.PlatformEventType.AppHide)}),wx.onAudioInterruptionEnd(function(){c.EventManager.instance.emit(l.PlatformEventType.AudioInterrupted,!1)}),wx.onAudioInterruptionBegin(function(){c.EventManager.instance.emit(l.PlatformEventType.AudioInterrupted,!0)})},this),this.onAppShow(wx.getLaunchOptionsSync()),p.DataBfConfig.init(this.query.env,this.name),console.log("onAppShow.ymn.info: ",p.DataBfConfig.ymn),this.getSystemInfoSync(),this.getExptInfoSync(),this.initConsole(),this.initFrameRate(),this.initMemoryWarning(),this.initError(),this.initVideoAd(),this.initVersionUpdate(),this.initKeyboard(),this.initRecordManager(),this.initNetworkType(),this.initShareMessageToFriend(),this.hasShare=!0},e.prototype.onAppShow=function(t){this._options=t||{},console.log("onAppShow:",JSON.stringify(this._options));var e=this._options.query.channel;e&&p.DataBfConfig.setYmnChannel(Number(e));var n=JSON.parse(JSON.stringify(this._options));if(this._chatType=n.chatType||0,this._shareTime){var o=Math.floor((Date.now()-this._shareTime)/1e3);this._shareTime=void 0,c.EventManager.instance.emit(l.PlatformEventType.Share,o)}wx.setKeepScreenOn&&wx.setKeepScreenOn({keepScreenOn:!0}),this.updateShareMenu(),this.clearAuthSettingCache()},e.prototype.getDataPointChannel=function(){var t=this._options.query;if(t){for(var e=0,n=this.DATA_POINT_CHANEL_KEYS.length;e<n;++e)if(c=t[this.DATA_POINT_CHANEL_KEYS[e]])return parseInt(c);var o=t.scene;if(o){var a={},i=decodeURIComponent(o).split("&");for(e=0,n=i.length;e<n;++e){var r=i[e].split("=");r.length>1&&(a[r[0]]=r[1])}for(e=0,n=this.DATA_POINT_CHANEL_KEYS.length;e<n;++e)if(c=a[this.DATA_POINT_CHANEL_KEYS[e]])return parseInt(c)}}var s=this._options.referrerInfo&&this._options.referrerInfo.extraData;if(s)for(e=0,n=this.DATA_POINT_CHANEL_KEYS.length;e<n;++e){var c;if(c=s[this.DATA_POINT_CHANEL_KEYS[e]])return c}return this._options.scene||0},e.prototype.initConsole=function(){u.ConsoleExtension.setEnabled(this.isDebugMode()||!this.isOnMobile()),u.ConsoleExtension.setReferEnabled(!this.isOnMobile())},e.prototype.initFrameRate=function(){},e.prototype.initError=function(){wx.onError(function(t){return console.warn("wx.onError: ",t)})},e.prototype.initMemoryWarning=function(){wx.onMemoryWarning&&wx.onMemoryWarning(function(t){var e=t&&t.level;console.warn("wx.onMemoryWarning: "+e),c.EventManager.instance.emit(l.PlatformEventType.MemoryWarning,e),wx.triggerGC()})},e.prototype.initVersionUpdate=function(){var t=wx.getUpdateManager();t.onCheckForUpdate(function(t){console.log("WXApi Has new version: "+t.hasUpdate)}),t.onUpdateReady(function(){wx.showModal({title:"\u66f4\u65b0\u63d0\u793a",content:"\u65b0\u7248\u672c\u5df2\u7ecf\u51c6\u5907\u597d\uff0c\u8bf7\u91cd\u542f\u5e94\u7528\uff01",showCancel:!1,success:function(e){e.confirm&&t.applyUpdate()}})}),t.onUpdateFailed(function(){wx.showModal({title:"\u66f4\u65b0\u63d0\u793a",content:"\u7248\u672c\u66f4\u65b0\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u6253\u5f00\uff01",showCancel:!1,success:function(t){t.confirm&&wx.exitMiniProgram()}})})},e.prototype.getWXConfig=function(){return __wxConfig},e.prototype.getSystemInfoSync=function(){try{this._systemInfo=wx.getSystemInfoSync()}catch(e){console.error("wx.getSystemInfoSync error:",e);var t=this.getWXConfig();t?this._systemInfo={screenWidth:t.screenWidth,screenHeight:t.screenHeight,pixelRatio:t.devicePixelRatio,platform:t.platform,system:t.system}:this._systemInfo||(this._systemInfo={screenWidth:1334,screenHeight:750,pixelRatio:1,platform:"unknown",system:"Unknown"})}return console.log("systemInfo:",this._systemInfo),this._systemInfo},Object.defineProperty(e.prototype,"performanceLevel",{get:function(){return this._systemInfo.benchmarkLevel},enumerable:!1,configurable:!0}),e.prototype.isLowPerformance=function(){if(!this.isOnMobile())return!1;if(cc.sys.os===cc.sys.OS_IOS)return!1;if(!this._systemInfo)return!0;var t=this.performanceLevel;return null==t||-1!==t&&t<=this.LOW_PERFORMANCE_LEVEL_MAX},e.prototype.isOnMobile=function(){return"devtools"!==this._systemInfo.platform},e.prototype.isDebugMode=function(){var t=this.getWXConfig();return t&&t.debug},e.prototype.login=function(t){var e=this;if(this._loggingIn)console.log("wx.login repeat!");else{this._loggingIn=!0,console.log("wx.login");var n=Date.now();wx.login({success:function(o){var a=Date.now()-n;console.log("wx.login succeed [cost:"+a+"ms]:",o);var i="Unknown";switch(e._systemInfo.platform){case"ios":i="iOS";break;case"android":i="Android"}t&&t({code:o.code,os:i})},fail:function(e){var o=Date.now()-n;console.error("wx.login failed [cost:"+o+"ms]:",e),t&&t(null)},complete:function(){e._loggingIn=!1}})}},Object.defineProperty(e.prototype,"needUserInfoButton",{get:function(){return!wx.getUserProfile},enumerable:!1,configurable:!0}),e.prototype.createUserInfoButton=function(t,e){console.log("wx.createUserInfoButton");var n=this._systemInfo.screenWidth,o=this._systemInfo.screenHeight;t.style.left*=n,t.style.top*=o,t.style.width*=n,t.style.height*=o;var a=wx.createUserInfoButton(t);return a.onTap(function(t){var n,o;console.log("WXApi UserInfoButton tap:",t),-1!==t.errMsg.indexOf("ok")&&(n={nickname:t.userInfo.nickName,icon:t.userInfo.avatarUrl,gender:t.userInfo.gender},o={encryptedData:t.encryptedData,iv:t.iv}),e&&e(n,o)}),a},e.prototype.getUserInfo=function(t,e){console.log("WXApi getUserInfo"),wx.getUserProfile&&(console.log("wx.getUserProfile"),wx.getUserProfile({desc:t,lang:"zh_CN",success:function(t){return console.log("wx.getUserProfile succeed:",t)},fail:function(t){return console.warn("wx.getUserProfile failed:",t)},complete:function(t){var n=t.userInfo;e&&e(n&&{nickname:n.nickName,icon:n.avatarUrl,gender:n.gender})}}))},e.prototype.getUserInfoSilent=function(t){console.log("WXApi getUserInfoSilent"),this.isScopeAuthored(d.Scope.userInfo,function(e){e?(console.log("wx.getUserInfo"),wx.getUserInfo({withCredentials:!0,lang:"zh_CN",success:function(t){return console.log("wx.getUserInfo: succeed",t)},fail:function(t){return console.error("wx.getUserInfo: failed",t)},complete:function(e){var n=e.userInfo;t&&t(n&&{nickname:n.nickName,icon:n.avatarUrl,gender:n.gender})}})):t&&t(null)})},e.prototype.getShareInfo=function(t){var e=this.shareTicket;e?(console.log("wx.getShareInfo"),wx.getShareInfo?wx.getShareInfo({shareTicket:e,success:function(e){console.log("wx.getShareInfo succeed:",e),t&&t({encryptedData:e.encryptedData,iv:e.iv})},fail:function(e){console.error("wx.getShareInfo failed:",e),t&&t(null)}}):(console.error("wx.getShareInfo is not supported!"),t&&t(null))):(console.log("WxApi getShareInfo has no shareTicket"),t&&t(null))},e.prototype.isScopeAuthored=function(t,e){this.getAuthSetting(function(n){e&&e(n&&n[t])})},e.prototype.requireScope=function(t,e,n){var o=this;this.isScopeAuthored(t,function(a){a?n&&n(!0,!0):void 0===a?o.authorize(t,function(t){return n&&n(t,a)}):o.openAuthSetting(e,function(e){n&&n(e?e[t]:a,a)})})},e.prototype.clearAuthSettingCache=function(){this._authSetting=null},e.prototype.getAuthSetting=function(t){var e=this;this._authSetting?t&&t(this._authSetting):(console.log("wx.getSetting"),wx.getSetting({success:function(t){return console.log("wx.getSetting succeed:",JSON.stringify(t.authSetting))},fail:function(t){return console.error("wx.getSetting failed:",t)},complete:function(n){e._authSetting=n.authSetting,t&&t(n.authSetting||null)}}))},e.prototype.authorize=function(t,e){var n=this;console.log("wx.authorize"),wx.authorize({scope:t,success:function(){console.log("wx.authorize succeed."),n._authSetting[t]=!0,e&&e(!0)},fail:function(o){console.warn("wx.authorize failed:",o),n._authSetting[t]=!1,e&&e(!1)}})},e.prototype.openAuthSetting=function(t,e){var n=this;console.log("wx.openSetting"),wx.showModal({title:"\u63d0\u793a",content:t,confirmText:"\u524d\u5f80\u5f00\u542f",success:function(t){t.confirm?wx.openSetting({success:function(t){return console.log("wx.openSetting: success:",t.authSetting)},fail:function(t){return console.error("wx.openSetting: fail:",t)},complete:function(t){n._authSetting=t.authSetting,e&&e(t.authSetting||null)}}):(console.log("wx.openSetting: cancel"),e&&e(null))}})},Object.defineProperty(e.prototype,"hasShare",{get:function(){return this._hasShare},set:function(t){this._hasShare=t,t?wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}):wx.hideShareMenu(null)},enumerable:!1,configurable:!0}),e.prototype.onShareAppMessage=function(t){var e=this;wx.onShareAppMessage(function(){return e._shareTime=Date.now(),t&&t()})},e.prototype.onShareTimeline=function(t){var e=this;wx.onShareTimeline&&wx.onShareTimeline(function(){return e._shareTime=Date.now(),t&&t()})},e.prototype.shareAppMessage=function(t,e,n,o){var a=this;this.hasShare?this.updateShareMenu(o,function(){console.log("wx.shareAppMessage: ",t,e,n),a._shareTime=Date.now(),wx.shareAppMessage({title:t,imageUrl:e,query:n})}):this.showToast("\u5168\u56fd\u54c0\u60bc\u65e5\u6682\u4e0d\u80fd\u5206\u4eab")},e.prototype.updateShareMenu=function(t,e){var n=this,o=this.parseUpdateShareMenuObject(t);o.activityId===this._shareActivityId?(console.log("wx.updateShareMenu skip:",t),e&&e(!0)):(console.log("wx.updateShareMenu: ",t),wx.updateShareMenu?wx.updateShareMenu(i(i({},o),{success:function(){console.log("wx.updateShareMenu succeed"),n._shareActivityId=o.activityId,e&&e(!0)},fail:function(t){console.error("wx.updateShareMenu failed:",t),e&&e(!1)}})):(console.error("wx.updateShareMenu is not supported!"),e&&e(!1)))},e.prototype.parseUpdateShareMenuObject=function(t){return t&&t.activityId?{withShareTicket:!0,isUpdatableMessage:!0,activityId:t.activityId,templateInfo:{parameterList:[{name:"member_count",value:t.current+""},{name:"room_limit",value:t.total+""}]}}:{withShareTicket:!0,isUpdatableMessage:!1,activityId:null,templateInfo:{}}},e.prototype.showToast=function(t,e,n){console.log("wx.showToast"),null==e&&(e="none"),null==n&&(n=2e3),wx.showToast({title:t,icon:e,duration:n}),this._loading=!1},e.prototype.showLoading=function(t,e){console.log("wx.showLoading"),wx.showLoading({title:t,mask:e}),this._loading=!0},e.prototype.hideLoading=function(){console.log("wx.hideLoading"),this._loading&&(wx.hideLoading(),this._loading=!1)},e.prototype.showDialog=function(t,e,n,o,a){void 0===o&&(o="\u786e\u8ba4"),void 0===a&&(a="\u53d6\u6d88"),console.log("wx.showModal"),wx.showModal({title:"\u63d0\u793a",content:t,showCancel:e,confirmText:o,cancelText:a,success:function(t){return n&&n(t.confirm)}})},Object.defineProperty(e.prototype,"isSupportVideoAd",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.initVideoAd=function(){var t=this;if(this.isSupportVideoAd&&wx.createRewardedVideoAd){var e=wx.createRewardedVideoAd({adUnitId:this.VIDEO_AD_UNIT_ID});this._videoAdLoaded=!1,this._videoAdLoading=!0,e.onLoad(function(){t._videoAdLoading=!1,t._videoAdLoaded=!0,console.log("WXApi Video ad loaded!")}),e.onError(function(e){t._videoAdLoading=!1,console.error("WXApi Video ad error: ",e)}),e.onClose(function(e){return t.onVideoAdClose(e)}),this._videoAd=e}},Object.defineProperty(e.prototype,"isVideoAdLoaded",{get:function(){var t=this._videoAdLoaded;return this._videoAdLoading||t||this.loadVideoAd(),t},enumerable:!1,configurable:!0}),e.prototype.loadVideoAd=function(){this._videoAdLoaded=!1,this._videoAdLoading=!0;try{this._videoAd.load().then(function(){return console.log("WXApi load video ad succeed")})}catch(t){console.error("WXApi load video ad error: ",t)}},e.prototype.showVideoAd=function(t,e,n){var o=this;if(this._videoAd)console.log("WXApi show video ad."),this._videoAd.show({branchId:e,branchDim:n}).then(function(){try{t&&t(!0)}catch(e){console.error(e)}}).catch(function(e){console.log("WXApi show video ad error: ",e);try{t&&t(!1)}catch(n){console.error(n)}o.loadVideoAd()});else try{t&&t(!1)}catch(a){console.error(a)}},e.prototype.onVideoAdClose=function(t){console.log("WXApi Video advertisement close: ",t);var e=t&&t.isEnded||void 0===t;c.EventManager.instance.emit(l.PlatformEventType.VideoAdClose,e)},Object.defineProperty(e.prototype,"hasBannerAd",{get:function(){return!!wx.createBannerAd},enumerable:!1,configurable:!0}),e.prototype.createBannerAd=function(t,e,n,o){var a=this;if(e=e||{x:.5,y:1,pivotX:.5,pivotY:1},this.hasBannerAd){var i=this.BANNER_AD_IDS[t];if(i){var r=wx.createBannerAd({adUnitId:i,style:{left:0,top:0,width:300}});r.onError(function(e){r.destroy(),a._bannerAds[t]=null,console.warn("WXApi Banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25:",e),o&&o()}),console.log("WXApi Create banner ad: ",t,i,e),this._bannerAds[t]=r;var c=this._systemInfo.screenWidth,l=this._systemInfo.screenHeight;r.style.left=c,r.style.top=l,s.CoroutineManager.instance.wait(function(){return null!=r.style.realHeight},function(){var t=r.style.realWidth/c,o=r.style.realHeight/l,a=e.x-e.pivotX*t,s=e.y-e.pivotY*o;r.style.left=c*a+.1,r.style.top=l*s+.1,n&&n(a,s,t,o,i)},this)}else console.warn("WXApi BannerAd id is null or empty!"),o&&o()}else console.error("wx.createBannerAd is not supported!"),o&&o()},Object.defineProperty(e.prototype,"hasGameBannerAd",{get:function(){return!!wx.createGameBanner},enumerable:!1,configurable:!0}),e.prototype.createGameBannerAd=function(t,e,n,o){var a=this;if(this.hasGameBannerAd){var i=this.GAME_BANNER_AD_IDS[t];if(i){var r=wx.createGameBanner({adUnitId:i,style:{left:0,top:1e3}});r.onError(function(e){r.destroy().catch(function(t){return console.error("WXApi GameBanner destroy error:",t)}),a._bannerAds[t]=null,console.warn("WXApi GameBannerAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25:",e),o&&o()}),r.onResize(function(){var t=0,e=0,o=0,a=0,s=.8,c=r.style;c&&(t=c.left,e=c.top,o=c.width,a=c.height,s=(e-23)/(e+70),c.height&&(s=(e-23)/(e+c.height))),console.log("WXApi GameBanner \u5e7f\u544a onLoad",t,e,0,s,o,a),n&&n(0,s,o,a,i)}),this._bannerAds[t]=r,console.log("WXApi Create GameBanner ad: ",t,i)}else console.warn("WXApi GameBannerAd id is null or empty!"),o&&o()}else console.error("wx.createGameBanner is not supported!"),o&&o()},Object.defineProperty(e.prototype,"hasGridAd",{get:function(){return!!wx.createGridAd},enumerable:!1,configurable:!0}),e.prototype.createGridAd=function(t,e,n,o){var a=this;if(e=e||{x:.5,y:1,pivotX:.5,pivotY:1},this.hasGridAd){var i=this.GRID_AD_IDS[t];if(i){var r=wx.createGridAd({adUnitId:i,adTheme:"white",gridCount:5,style:{left:0,top:0,width:300}});r.onError(function(e){r.destroy(),a._bannerAds[t]=null,console.warn("WXApi GridAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25:",e),o&&o()}),s.CoroutineManager.instance.wait(function(){return null!=r.style.realHeight},function(){var t=a._systemInfo.screenWidth,o=a._systemInfo.screenHeight,s=r.style.realWidth/t,c=r.style.realHeight/o,l=e.x-e.pivotX*s,u=e.y-e.pivotY*c;r.style.left=t*l+.1,r.style.top=o*u+.1,n&&n(l,u,s,c,i)},this),this._bannerAds[t]=r,console.log("WXApi Create GridAd ad: ",t,i)}else console.warn("WXApi GridAd id is null or empty!"),o&&o()}else console.error("wx.createGridAd is not supported!"),o&&o()},e.prototype.showBannerAd=function(t,e,n){var o=this._bannerAds[t];if(o){try{o.show().then(function(){n&&n(!0)}).catch(function(t){console.warn("WXApi Show banner ad error: ",t),n&&n(!1)})}catch(a){console.error("WXApi Show banner ad error: ",a)}console.log("WXApi Show banner ad: ",t)}},e.prototype.hideBannerAd=function(t){var e=this._bannerAds[t];e&&(e.hide(),console.log("WXApi Hide banner ad: ",t))},e.prototype.closeBannerAd=function(t){var e=this._bannerAds[t];e&&(e.destroy(),this._bannerAds[t]=null,console.log("WXApi Close banner ad: ",t))},Object.defineProperty(e.prototype,"hasGamePortalAd",{get:function(){return!!wx.createGamePortal},enumerable:!1,configurable:!0}),e.prototype.initGamePortalAd=function(){var t=this;if(this.hasGamePortalAd){var e=wx.createGamePortal({adUnitId:this.GAME_PORTAL_AD_UNIT_ID});e.onLoad(function(){t._gamePortalLoaded=!0,console.log("WXApi GamePortalAd advertisement loaded!")}),e.onError(function(e){t._gamePortalLoaded=!1,console.error("WXApi GamePortalAd advertisement error - "+e)}),e.onClose(function(){return console.log("WXApi GamePortalAd advertisement close")}),this._gamePortalAd=e}},e.prototype.showGamePortalAd=function(t){if(this._gamePortalAd&&this._gamePortalLoaded)this._gamePortalAd.show().then(function(){try{t&&t(!0)}catch(e){console.error(e)}}).catch(function(e){console.error("WXApi show GamePortalAd ad error: ",e);try{t&&t(!1)}catch(n){console.error(n)}});else try{t&&t(!1)}catch(e){console.error(e)}},Object.defineProperty(e.prototype,"canKejin",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.requestKejin=function(t,e){var n={mode:"game",env:0,offerId:"1450017745",currencyType:"CNY",platform:cc.sys.OS_WINDOWS===cc.sys.os&&cc.sys.WECHAT_GAME===cc.sys.platform?"windows":"android",zoneId:"1",buyQuantity:t.buyQuantity,success:function(t){console.log("wx.requestMidasPayment succeed:",t),e&&e(!0)},fail:function(t){console.error("wx.requestMidasPayment failed:",t),e&&e(!1)}};console.log("wx.requestMidasPayment",n),this.canKejin?wx.requestMidasPayment(n):e&&e(null)},e.prototype.initKeyboard=function(){var t=this;wx.onKeyboardConfirm(function(e){console.log("wx.onKeyboardConfirm:",e),t._onKeyboardConfirm&&t._onKeyboardConfirm(e.value),t._onKeyboardConfirm=null}),wx.onKeyboardComplete(function(e){console.log("wx.onKeyboardComplete:",e),t._onKeyboardComplete&&t._onKeyboardComplete(e.value),t._onKeyboardComplete=null})},e.prototype.showKeyboard=function(t,e,n){console.log("wx.showKeyboard: ",t),wx.showKeyboard(t),e&&(this._onKeyboardConfirm=e),n&&(this._onKeyboardComplete=e)},e.prototype.updateKeyboard=function(t){console.log("wx.updateKeyboard: ",t),wx.updateKeyboard({value:t})},e.prototype.hideKeyboard=function(){console.log("wx.hideKeyboard"),wx.hideKeyboard()},e.prototype.navigateToMiniProgram=function(t,e){wx.navigateToMiniProgram?(console.log("wx.navigateToMiniProgram: ",t),wx.navigateToMiniProgram(i(i({},t),{success:function(t){console.log("wx.navigateToMiniProgram succeed: ",t),e&&e(!0)},fail:function(t){console.error("wx.navigateToMiniProgram failed: ",t),e&&e(!1)}}))):e&&e(!1)},Object.defineProperty(e.prototype,"canVoiceChat",{get:function(){return!!wx.joinVoIPChat},enumerable:!1,configurable:!0}),e.prototype.joinVoiceChat=function(t,e,n){console.log("wx.joinVoIPChat: ",t,e),this.requireScope(d.Scope.record,"\u5f00\u542f\u9ea6\u514b\u98ce\u6743\u9650\u624d\u53ef\u4f7f\u7528\u5b9e\u65f6\u8bed\u97f3\u529f\u80fd",function(o){o?wx.joinVoIPChat(i(i({},t),{muteConfig:e,success:function(t){console.log("wx.joinVoIPChat succeed: ",t),n&&n(!0,null)},fail:function(t){console.error("wx.joinVoIPChat failed: ",t),n&&n(!1,null)},complete:function(t){return n&&n(!0,t.openIdList)}})):n&&n(!1,null)})},e.prototype.exitVoiceChat=function(t){console.log("wx.exitVoIPChat"),wx.exitVoIPChat({success:function(e){console.log("wx.exitVoIPChat succeed: ",e),t&&t(!0)},fail:function(e){console.error("wx.exitVoIPChat failed: ",e),t&&t(!1)}})},e.prototype.updateVoiceChatMuteConfig=function(t,e){console.log("wx.updateVoIPChatMuteConfig: ",t),wx.updateVoIPChatMuteConfig({muteConfig:t,success:function(t){console.log("wx.updateVoIPChatMuteConfig succeed: ",t),e&&e(!0)},fail:function(t){console.error("wx.updateVoIPChatMuteConfig failed: ",t),e&&e(!1)}})},e.prototype.onVoiceChatSpeakersChanged=function(t){console.log("wx.onVoIPChatSpeakersChanged"),wx.onVoIPChatSpeakersChanged(function(e){console.log("wx.onVoIPChatSpeakersChanged: ",e),0==e.errCode?t&&t(e.openIdList):t&&t(null)})},e.prototype.onVoiceChatMembersChanged=function(t){console.log("wx.onVoIPChatMembersChanged"),wx.onVoIPChatMembersChanged(function(e){console.log("wx.onVoIPChatMembersChanged: ",e),0==e.errCode?t&&t(e.openIdList):t&&t(null)})},e.prototype.onVoiceChatInterrupted=function(t){console.log("wx.onVoIPChatInterrupted"),wx.onVoIPChatInterrupted(function(e){console.log("wx.onVoIPChatInterrupted: ",e),t&&t()})},Object.defineProperty(e.prototype,"canFeedback",{get:function(){return!!wx.createFeedbackButton},enumerable:!1,configurable:!0}),e.prototype.createFeedbackButton=function(t,e){if(console.log("wx.createFeedbackButton"),wx.createFeedbackButton){var n=this.getSystemInfoSync(),o=void 0,a=void 0;if(n)o=n.screenWidth,a=n.screenHeight;else{var i=cc.view.getCanvasSize();o=i.width,a=i.height}t.style.left*=o,t.style.top*=a,t.style.width*=o,t.style.height*=a;var r=wx.createFeedbackButton(t);return r.onTap(function(t){console.log("WXApi FeedbackButton tap:",t),e&&e()}),r}return null},e.prototype.openCustomerServiceConversation=function(t,e){wx.openCustomerServiceConversation?(console.log("wx.openCustomerServiceConversation:",t),wx.openCustomerServiceConversation(i(i({},t),{success:function(){console.log("wx.openCustomerServiceConversation succeed"),e&&e(!0)},fail:function(t){console.error("wx.openCustomerServiceConversation failed:",t),e&&e(!1)}}))):console.warn("wx.openCustomerServiceConversation is not exist: ",t)},Object.defineProperty(e.prototype,"canOpenURL",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.openCustomerServiceWithURL=function(t){console.warn("openCustomerServiceWithURL:",t)},e.prototype.clearCache=function(){console.log("WXApi clearCache");var t=cc.assetManager.cacheManager;t&&(console.log("WXApi cached file count:",t.cachedFiles.count),t.clearCache(),console.log("WXApi cache cleaned!"),console.log("WXApi cached file count:",t.cachedFiles.count))},e.prototype.exit=function(){console.log("wx.exitMiniProgram"),wx.exitMiniProgram()},e.prototype.fix=function(t){t?(this.clearCache(),this.exit()):this.exit()},Object.defineProperty(e.prototype,"canSubscribe",{get:function(){return!!wx.requestSubscribeMessage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canWhatNewSubscribe",{get:function(){return!!wx.getWhatsNewSubscriptionsSetting},enumerable:!1,configurable:!0}),e.prototype.requestSubscribe=function(t,e){console.log("wx.requestSubscribeMessage: ",t),wx.requestSubscribeMessage({tmplIds:[t],success:function(n){console.log("wx.requestSubscribeMessage succeed: ",n),e&&e("accept"===n[t])},fail:function(t){console.warn("wx.requestSubscribeMessage failed.",t),e&&e(!1)}})},e.prototype.requestSubscribeWhatsNew=function(t){console.log("wx.requestSubscribeWhatsNew"),wx.requestSubscribeWhatsNew({msgType:1,success:function(e){console.log("wx.requestSubscribeWhatsNew succeed:",e),t&&t(e.confirm)},fail:function(e){console.warn("wx.requestSubscribeWhatsNew failed:",e),t&&t(null,e.errCode)}})},e.prototype.getWhatsNewSubscriptionsSetting=function(t){console.log("wx.getWhatsNewSubscriptionsSetting"),wx.getWhatsNewSubscriptionsSetting({msgType:1,success:function(e){console.log("wx.getWhatsNewSubscriptionsSetting succeed:",e),t&&t(!0,e.status)},fail:function(e){console.error("wx.getWhatsNewSubscriptionsSetting failed:",e),t&&t(!1)}})},Object.defineProperty(e.prototype,"networkType",{get:function(){return this._networkType},enumerable:!1,configurable:!0}),e.prototype.initNetworkType=function(){var t=this;wx.getNetworkType&&wx.getNetworkType({success:function(e){console.log("wx.getNetworkType succeed: ",e),t._networkType=e.networkType},fail:function(e){console.error("wx.getNetworkType failed:",e),t._networkType="unknown"}}),wx.onNetworkStatusChange&&wx.onNetworkStatusChange(function(e){console.warn(">----\x3ewx.onNetworkStatusChange:",e),t._networkType=e.isConnected?e.networkType:"unknown",c.EventManager.instance.emit(l.PlatformEventType.NetworkStatusChange,t._networkType),console.warn(">----\x3ewx.onNetworkStatusChange.disconnect"),h.SocketUtils.instance.disconnect(!0)})},e.prototype.getBatteryInfo=function(t){wx.getBatteryInfo({success:function(e){console.log("wx.getBatteryInfo succeed:",e),t&&t(e.level||0,e.isCharging)},fail:function(e){console.error("wx.getBatteryInfo failed:",e),t&&t(0,!1)}})},e.prototype.getLocation=function(t){console.log("wx.getLocation"),wx.getLocation({success:function(e){console.log("wx.getLocation succeed:",e),t&&t(e)},fail:function(e){console.error("wx.getLocation failed:",e),t&&t(null)}})},e.prototype.initGameRecorder=function(){if(this.hasGameRecorder){var t=wx.getGameRecorder();t.on("error",function(t){return c.EventManager.instance.emit(l.PlatformEventType.GameRecorderError,t.error)}),t.on("start",function(){return c.EventManager.instance.emit(l.PlatformEventType.GameRecorderStart)}),t.on("stop",function(t){return c.EventManager.instance.emit(l.PlatformEventType.GameRecorderStop,t.duration)}),t.on("pause",function(){return c.EventManager.instance.emit(l.PlatformEventType.GameRecorderPause)}),t.on("resume",function(){return c.EventManager.instance.emit(l.PlatformEventType.GameRecorderResume)}),t.on("abort",function(){return c.EventManager.instance.emit(l.PlatformEventType.GameRecorderAbort)}),t.on("timeUpdate",function(t){return c.EventManager.instance.emit(l.PlatformEventType.GameRecorderTimeUpdate,t.currentTime)})}},Object.defineProperty(e.prototype,"hasGameRecorder",{get:function(){if(!wx.getGameRecorder)return console.log("WXApi hasGameRecorder: false, wx.getGameRecorder is undefined"),!1;if(this.performanceLevel<10&&-1!==this.performanceLevel&&null!=this.performanceLevel)return console.log("WXApi hasGameRecorder: false, performanceLevel is "+this.performanceLevel),!1;var t=wx.getGameRecorder(),e=t.isFrameSupported(),n=t.isSoundSupported();return console.log("WXApi hasGameRecorder: isFrameSupported["+e+"], isSoundSupported["+n+"]"),e},enumerable:!1,configurable:!0}),e.prototype.gameRecorderStart=function(t){if(this.hasGameRecorder){var e=wx.getGameRecorder();console.log("WXApi GameRecorder.start"),e.start({}).then(t).catch(function(t){return console.error(t)})}},e.prototype.gameRecorderPause=function(t){if(this.hasGameRecorder){var e=wx.getGameRecorder();console.log("WXApi GameRecorder.pause"),e.pause().then(t).catch(function(t){return console.error(t)})}},e.prototype.gameRecorderResume=function(t){if(this.hasGameRecorder){var e=wx.getGameRecorder();console.log("WXApi GameRecorder.resume"),e.resume().then(t).catch(function(t){return console.error(t)})}},e.prototype.gameRecorderStop=function(t){var e=this;if(this.hasGameRecorder){var n=wx.getGameRecorder();console.log("WXApi GameRecorder.stop"),c.EventManager.instance.once(l.PlatformEventType.GameRecorderStop,this,function(e){return t&&t(e)}),n.stop().catch(function(t){console.error(t),c.EventManager.instance.off(l.PlatformEventType.GameRecorderStop,e,null,!0)})}},e.prototype.gameRecorderAbort=function(t){if(this.hasGameRecorder){var e=wx.getGameRecorder();console.log("WXApi GameRecorder.abort"),e.abort().then(t).catch(function(t){return console.error(t)})}},e.prototype.createGameRecorderShareButton=function(t,e,n,o){console.log("wx.createGameRecorderShareButton:",t,e,n,o);var a,i,r=this.getSystemInfoSync();if(r)a=r.screenWidth,i=r.screenHeight;else{var s=cc.view.getCanvasSize();a=s.width,i=s.height}var c=t*a-86,l=e*i-20;return this._gameRecorderShareButton?(this._gameRecorderShareButton.style.left=c,this._gameRecorderShareButton.style.top=l,this._gameRecorderShareButton.style.height=40,this._gameRecorderShareButton.share.query=o,this._gameRecorderShareButton.share.bgm="",this._gameRecorderShareButton.share.timeRange=[n]):this._gameRecorderShareButton=wx.createGameRecorderShareButton({style:{left:c,top:l,height:40},share:{query:o,bgm:"",timeRange:[n],audioMix:!0}}),this._gameRecorderShareButton.show(),this._gameRecorderShareButton},e.prototype.initRecordManager=function(){!this._recorderManager&&wx.getRecorderManager&&(console.log("Recorder init."),this._recorderManager=wx.getRecorderManager(),this._recorderManager.onStart(function(){console.log("Recorder start."),c.EventManager.instance.emit(l.PlatformEventType.RecorderStart)}),this._recorderManager.onStop(function(t){console.log("Recorder stop:",t),c.EventManager.instance.emit(l.PlatformEventType.RecorderStop,t.duration,t.tempFilePath,t.fileSize)}))},e.prototype.startRecord=function(t){this._recorderManager&&this._recorderManager.start(t)},e.prototype.stopRecord=function(){this._recorderManager&&this._recorderManager.stop()},e.prototype.setClipboardData=function(t,e){wx.setClipboardData&&(console.log("wx.setClipboardData"),wx.setClipboardData({data:t,success:function(t){console.log("wx.setClipboardData succeed:",t),e&&e(!0)},fail:function(t){console.error("wx.setClipboardData failed:",t),e&&e(!1)}}))},e.prototype.getClipboardData=function(t){wx.getClipboardData&&(console.log("wx.getClipboardData"),wx.getClipboardData({success:function(e){console.log("wx.getClipboardData succeed:",e),t&&t(e.data)},fail:function(e){console.error("wx.getClipboardData failed:",e),t&&t(null)}}))},e.prototype.uploadFile=function(t,e,n,o,a,r,s){var c;console.log("wx.uploadFile"),t=t.replace("http://","https://"),wx.uploadFile({url:t,filePath:n,name:a,formData:i(i({},r),(c={},c[o]=e,c)),success:function(n){console.log("wx.uploadFile succeed:",n),s&&s(t+"/"+e)},fail:function(t){console.error("wx.uploadFile failed:",t),s&&s(null)}})},e.prototype.toTempFilePath=function(t,e,n){if(t||(t=window.canvas),e||(e=new cc.Rect(0,0,1,1)),t&&t.toTempFilePath){var o=t.width,a=t.height;console.log("WXApi Canvas.toTempFilePath");try{t.toTempFilePath({x:e.x*o,y:e.y*a,width:e.width*o,height:e.height*a,success:function(t){console.log("WXApi Canvas.toTempFilePath succeed:",t),n&&n(t.tempFilePath)},fail:function(t){console.error("WXApi Canvas.toTempFilePath failed:",t),n&&n(null)}})}catch(i){console.error("WXApi Canvas.toTempFilePath error:",i),n&&n(null)}}},e.prototype.toDataURL=function(t,e){var n;console.log("WXApi Canvas.toDataURL");try{n=t.toDataURL(),console.log("WXApi Canvas.toDataURL succeed:",n)}catch(o){console.error("WXApi Canvas.toDataURL failed:",o)}e&&e(n)},e.prototype.previewImage=function(t,e){console.log("wx.previewImage"),wx.previewImage({urls:t||[],success:function(){console.log("wx.previewImage succeed."),e&&e(!0)},fail:function(t){console.error("wx.previewImage failed:",t),e&&e(!1)}})},e.prototype.saveImageToPhotosAlbum=function(t,e){console.log("wx.saveImageToPhotosAlbum"),wx.saveImageToPhotosAlbum({filePath:t,success:function(){console.log("wx.saveImageToPhotosAlbum succeed."),e&&e(!0)},fail:function(t){console.error("wx.saveImageToPhotosAlbum failed:",t),e&&e(!1)}})},e.prototype.initShareMessageToFriend=function(){wx.onShareMessageToFriend(function(t){c.EventManager.instance.emit(l.PlatformEventType.ShareToFriend,t.success,t.errMsg)})},e.prototype.setMessageToFriendQuery=function(t){console.log("wx.setMessageToFriendQuery:",t),wx.setMessageToFriendQuery?wx.setMessageToFriendQuery({shareMessageToFriendScene:t})?console.log("wx.setMessageToFriendQuery succeed."):console.error("wx.setMessageToFriendQuery failed."):console.error("wx.setMessageToFriendQuery is not supported!")},e.prototype.setUserCloudStorage=function(t,e){console.log("wx.setUserCloudStorage:",t),wx.setUserCloudStorage?wx.setUserCloudStorage({KVDataList:t,success:function(){console.log("wx.setMessageToFriendQuery succeed."),e&&e(!0)},fail:function(){console.error("wx.setMessageToFriendQuery failed."),e&&e(!1)}}):console.error("wx.setUserCloudStorage is not supported!")},e.prototype.postMessage=function(t){var e=wx.getOpenDataContext&&wx.getOpenDataContext();e&&e.postMessage(t)},e.prototype.reportUserBehaviorBranchAnalytics=function(t,e,n){wx.reportUserBehaviorBranchAnalytics&&(n?wx.reportUserBehaviorBranchAnalytics({branchId:t,branchDim:n,eventType:e}):wx.reportUserBehaviorBranchAnalytics({branchId:t,eventType:e}))},e.prototype.getExptInfoSync=function(){if(wx.getExptInfoSync){var t=wx.getExptInfoSync();for(var e in t)f.ABTestManager.instance.setTestValue(e,t[e])}},e.prototype.getEnvVersion=function(){var t=this.getWXConfig();return t&&t.envVersion||"release"},Object.defineProperty(e.prototype,"supportAct",{get:function(){return{ACTIVITY_CENTER:!0,SIGN:!0,LUCKY_TURN:!0,SHARE_HAVE_GIFT:!0,TEN_BOX:!0,CUSTOMER:!0,MATCH_AND_FIREND:!0,TEAM_INVITE_GIFT:!0,SKY_FALL_TICKET:!0}},enumerable:!1,configurable:!0}),r([jsClass],e)}(cc.Component);n.MiniGamePlatform=m,cc._RF.pop()},{"../../../../Framework/Manager/ABTestManager":"ABTestManager","../../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Utils/Extension/ConsoleExtension":"ConsoleExtension","../../Data/DataBfConfig":"DataBfConfig","../Network/SocketUtils":"SocketUtils","./Const/PlatformEventType":"PlatformEventType","./Const/Scope":"Scope","./PlatformManager":"PlatformManager"}],ModelRoot:[function(t,e,n){"use strict";cc._RF.push(e,"2c78cZH255CW6nTTwNALtVw","ModelRoot");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ModelRoot=void 0;var r=t("./BaseRoot"),s=t("./GameRoot"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return s.GameRoot.instance.get(this)},enumerable:!1,configurable:!0}),i([jsClass],e)}(r.Root);n.ModelRoot=c,cc._RF.pop()},{"./BaseRoot":"BaseRoot","./GameRoot":"GameRoot"}],NewPlayerGiftUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"6a4abKL4whLAJtuChUdGysZ","NewPlayerGiftUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./NewPlayerGiftUI_BtnSpineYellow"),a=t("./NewPlayerGiftUI_Window"),i=t("./NewPlayerGiftUI_awardItem"),r=t("./NewPlayerGiftUI_MainPanel"),s=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default)},t}();n.default=s,cc._RF.pop()},{"./NewPlayerGiftUI_BtnSpineYellow":"NewPlayerGiftUI_BtnSpineYellow","./NewPlayerGiftUI_MainPanel":"NewPlayerGiftUI_MainPanel","./NewPlayerGiftUI_Window":"NewPlayerGiftUI_Window","./NewPlayerGiftUI_awardItem":"NewPlayerGiftUI_awardItem"}],NewPlayerGiftUI_BtnSpineYellow:[function(t,e,n){"use strict";cc._RF.push(e,"cf4f8u001BMZJ9lHMfg+7p0","NewPlayerGiftUI_BtnSpineYellow");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("NewPlayerGiftUI","BtnSpineYellow")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(0)},e.URL="ui://nfpspu4bg3t3a694",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],NewPlayerGiftUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"8a99fyw9DBEN5onlc2eGqZY","NewPlayerGiftUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("NewPlayerGiftUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://nfpspu4blwtna68w",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],NewPlayerGiftUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"2ba0aR6XqREEJYbm6ue9/3g","NewPlayerGiftUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("NewPlayerGiftUI","Window")},e.prototype.onConstruct=function(){this.m_spineAni=this.getChildAt(0),this.m_btnClose=this.getChildAt(1),this.m_item1=this.getChildAt(2),this.m_item2=this.getChildAt(3),this.m_btnQuickStart=this.getChildAt(4),this.m_hintTxt=this.getChildAt(5)},e.URL="ui://nfpspu4blwtn1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],NewPlayerGiftUI_awardItem:[function(t,e,n){"use strict";cc._RF.push(e,"2f93fPQFA9ON4xI+KSYNuP1","NewPlayerGiftUI_awardItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("NewPlayerGiftUI","awardItem")},e.prototype.onConstruct=function(){this.m_iconName=this.getChildAt(1)},e.URL="ui://nfpspu4blwtn9",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],NewPlayerGiftUI:[function(t,e,n){"use strict";cc._RF.push(e,"846affhtMxCAoqWL3c89U28","NewPlayerGiftUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.NewPlayerGiftUI=void 0;var c=t("../../../Framework/UI/FadeUI"),l=t("../../Base/Data/DataConstant"),u=t("../../Base/Data/DataSpineAni"),d=t("../../Base/Module/BfAnalytics/BfasManager"),p=t("../../Base/Module/BfAnalytics/DataPointID"),h=t("../../Base/Utils/UtilCC"),_=t("../../Hall/HallModel"),f=p.ActivityPointID.newPlayerGiftScene,m={BORN:"xsdlb_1",LOOP:"xsdlb_2"},g={BORN:"btn_1",LOOP:"btn_2"},y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isUpdateUI=!1,e}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.update=function(){if(this._isUpdateUI){this._isUpdateUI=!1;var t=this.view.m_Window.m_item1,e=this.view.m_Window.m_item2,n=this.view.m_Window.m_hintTxt,o=this.view.m_Window.m_btnClose,a=this.view.m_Window.m_btnQuickStart;t.node.runAction(cc.sequence(cc.delayTime(.1),cc.fadeIn(1/30*4))),e.node.runAction(cc.sequence(cc.delayTime(.1),cc.fadeIn(1/30*4))),n.node.runAction(cc.sequence(cc.delayTime(.1),cc.fadeIn(1/30*4))),o.node.runAction(cc.sequence(cc.delayTime(.1),cc.fadeIn(1/30*5))),a.node.runAction(cc.sequence(cc.delayTime(.3),cc.fadeIn(1/30*5)))}},e.prototype.init=function(t){this.initUI(t),this.addSpineAni(),d.BfasManager.instance.evt(f.show.eventid,null,!0,f.show.eventName)},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onClickClose,this),this.view.m_Window.m_btnQuickStart.onClick(this.onBtnQuickStart,this)},e.prototype.initUI=function(t){var e,n,o=t.asr||0,a=[];try{for(var i=r(Object.entries(t.props)),c=i.next();!c.done;c=i.next()){var u=s(c.value,2),d=u[0],p=u[1];a.push([Number(d),Number(p)])}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}this.view.m_Window.m_item1.title="x"+o,this.view.m_Window.m_item1.m_iconName.url="ui://"+l.DataConstant.PKG_NEWPLAYERGIFT+"/img_gold",this.view.m_Window.m_item2.title="x1\u5929",this.view.m_Window.m_item2.m_iconName.url="ui://"+l.DataConstant.PKG_NEWPLAYERGIFT+"/img_jpq"},e.prototype.addSpineAni=function(){var t=this;h.UtilCC.instantiatePrefab(u.DataSpineAniPath.ANI_NEWPLAYERGIFT,function(e){var n=e.getComponent(sp.Skeleton);n.setMix(m.BORN,m.LOOP,0),n.setAnimation(0,m.BORN,!1),n.addAnimation(0,m.LOOP,!0),t._isUpdateUI=!0},this.view.m_Window.m_spineAni.node),h.UtilCC.instantiatePrefab(u.DataSpineAniPath.ANI_BTN_YELLOW,function(t){var e=t.getComponent(sp.Skeleton);e.setMix(g.BORN,g.LOOP,0),e.setAnimation(0,g.BORN,!1),e.addAnimation(0,g.LOOP,!0)},this.view.m_Window.m_btnQuickStart.m_spineNode.node)},e.prototype.onBtnQuickStart=function(){this.onExitClick(),d.BfasManager.instance.evt(f.clickEnterGame.eventid,null,!0,f.clickEnterGame.eventName),_.default.instance.doQuickStartToGame()},e.prototype.onClickClose=function(){this.onExitClick(),d.BfasManager.instance.evt(f.clickClose.eventid,null,!0,f.clickClose.eventName)},i([jsClass],e)}(c.FadeUI);n.NewPlayerGiftUI=y,cc._RF.pop()},{"../../../Framework/UI/FadeUI":"FadeUI","../../Base/Data/DataConstant":"DataConstant","../../Base/Data/DataSpineAni":"DataSpineAni","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../Base/Utils/UtilCC":"UtilCC","../../Hall/HallModel":"HallModel"}],OpenDataContextManager:[function(t,e,n){"use strict";cc._RF.push(e,"dc70cjfHqRD1YrVKxvopzI7","OpenDataContextManager");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.OpenDataContextManager=void 0;var i=t("../../../../Framework/Manager/BaseManager"),r=t("../../../../Framework/Root/ManagerRoot"),s=t("../../../../Framework/Manager/EventManager"),c=t("../../../../Framework/Manager/UIManager"),l=t("../Platform/PlatformManager"),u=t("../../Data/DataEvent"),d=t("../../../UserInfo/UserInfoModel"),p=t("../../Utils/UtilFgui"),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return r.ManagerRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){s.EventManager.instance.on(u.DataEvent.GetOpenIDSuccess,this,this.onGetOpenIDSuccess),this.preload()},e.prototype.preload=function(){l.PlatformManager.instance.platform.postMessage({event:"preload"})},e.prototype.onGetOpenIDSuccess=function(){var t=d.UserInfoModel.instance.userInfo.openID;l.PlatformManager.instance.platform.postMessage({event:"setSelfOpenId",openId:t})},e.prototype.setShareArgs=function(t,e){l.PlatformManager.instance.platform.postMessage({event:"setShareArgs",shareTitle:t,shareImgUrl:e})},e.prototype.directShareToFriend=function(t){l.PlatformManager.instance.platform.postMessage({event:"directShareToFriend",openId:t})},e.prototype.setShareQuery=function(t){l.PlatformManager.instance.platform.setMessageToFriendQuery(t)},e.prototype.show=function(t,e,n,o,a,i){void 0===n&&(n=!1),void 0===o&&(o=!1),void 0===a&&(a=20),void 0===i&&(i=!1),this.clickEnable(),l.PlatformManager.instance.platform.postMessage({event:t,templateName:e,canScroll:n,ignoreInvited:o,maxCount:a,inBatches:i})},e.prototype.initView=function(t){var e=t.node.getComponent(cc.SubContextView);e||(e=t.node.addComponent(cc.SubContextView)),this.updateSize(e),this.updateViewport(t)},e.prototype.updateViewport=function(t){var e=t.width,n=t.height,o=c.UIManager.instance.root,a=p.UtilFgui.calculateLocalPosition(t,o,0,0),i=p.UtilFgui.calculateLocalPosition(t,o,e,n),r=o.width,s=o.height,u=Math.min(a.x,i.x)/r,d=Math.min(a.y,i.y)/s,h=Math.abs(a.x-i.x)/r,_=Math.abs(a.y-i.y)/s;l.PlatformManager.instance.platform.postMessage({event:"updateViewport",viewRect:{x:u,y:d,width:h,height:_}})},e.prototype.clearViewport=function(){l.PlatformManager.instance.platform.postMessage({event:"updateViewport",viewRect:{x:1,y:1,width:0,height:0}})},e.prototype.updateSize=function(t){t.reset(),l.PlatformManager.instance.platform.postMessage({event:"updateSize",viewSize:{width:t.node.width,height:t.node.height}})},e.prototype.close=function(){l.PlatformManager.instance.platform.postMessage({event:"close"})},e.prototype.clickEnable=function(){l.PlatformManager.instance.platform.postMessage({event:"clickEnable"})},e.prototype.clickNotEnable=function(){l.PlatformManager.instance.platform.postMessage({event:"clickNotEnable"})},e}(i.BaseManager);n.OpenDataContextManager=h,cc.systemEvent.once("GameRoot.inited",function(){r.ManagerRoot.instance.add(h)}),cc._RF.pop()},{"../../../../Framework/Manager/BaseManager":"BaseManager","../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Manager/UIManager":"UIManager","../../../../Framework/Root/ManagerRoot":"ManagerRoot","../../../UserInfo/UserInfoModel":"UserInfoModel","../../Data/DataEvent":"DataEvent","../../Utils/UtilFgui":"UtilFgui","../Platform/PlatformManager":"PlatformManager"}],PassLevelTaskModel:[function(t,e,n){"use strict";cc._RF.push(e,"2a6b4gHLTBNHrAlsl6sci35","PassLevelTaskModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.PassLevelTaskModel=n.PassLevelStateEnum=void 0;var s=t("../../../../Framework/Manager/EventManager"),c=t("../../../../Framework/Manager/UIManager"),l=t("../../../../Framework/Model/BaseModel"),u=t("../../../../Framework/Root/ModelRoot"),d=t("../../../Award/AwardModel"),p=t("../../../Award/AwardUI"),h=t("../../../Base/Data/DataEvent"),_=t("../../../Base/Data/DataLocalStorageKey"),f=t("../../../Base/Data/DataProps"),m=t("../../../Base/Utils/UtilTime"),g=t("../../../UserInfo/UserInfoModel"),y=t("../../GuanDan/GameEvent"),I=t("./PassLevelTaskProxy");(function(t){t[t.NOT_GET=0]="NOT_GET",t[t.CAN_GET=1]="CAN_GET",t[t.HAD_GET=2]="HAD_GET"})(n.PassLevelStateEnum||(n.PassLevelStateEnum={}));var C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._passLevelTaskInfo={},e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return u.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return I.PassLevelTaskProxy.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){},e.prototype.init=function(t){this.onNotifyReqPassLevelTask(t)},e.prototype.onNotifyReqPassLevelTask=function(t){var e=this;this.reqPassLevelTaskInfo(t,function(t){if(t){var n=e._passLevelTaskInfo.levelInfo,o=e.getCurPassLevelAwards(n.subID,n.level);e.isNeedAutoPop()&&(e.updatePassLevelLastTriggerDay(),e.addPassLevelPopCount(),s.EventManager.instance.emit(y.GameEvent.NotifyShowPassLevelTaskPannel,!0,n,o)),s.EventManager.instance.emit(y.GameEvent.NotifyUpdatePassLevelTask,n,o)}else console.warn(">---\x3ereqPassLevelTaskInfo.warn"),s.EventManager.instance.emit(y.GameEvent.NotifyClosePassLevelTask)})},e.prototype.updateLevelInfoDetail=function(t){this._passLevelTaskInfo.levelInfo=t;var e=this.getCurPassLevelAwards(t.subID,t.level);s.EventManager.instance.emit(y.GameEvent.NotifyUpdatePassLevelTask,t,e)},e.prototype.reqPassLevelTaskInfo=function(t,e){var n=this,o=this.getPassLevelConfigData(),a=o.version||"",i=o.awards||[];this.proxy.reqPassLevelTaskInfo(t,a,function(t,o){if(t&&o.isOpen){n._passLevelTaskInfo.version=a,n._passLevelTaskInfo.awards=i,Object.assign(n._passLevelTaskInfo,o);var r={version:n._passLevelTaskInfo.version,awards:n._passLevelTaskInfo.awards};return n.setPassLevelConfigData(r),void(e&&e(!0))}e&&e(!1)})},e.prototype.getPassLevelTaskAward=function(t,e){var n=this;this.proxy.reqGetPassLevelTaskAward(t,e,function(o,a){if(o){Object.assign(n._passLevelTaskInfo,a);var i=n.getCurPassLevelAwards(t,e),r=[{awardType:f.PropTypeEnum.GOLD,count:i,resName:d.AwardModel.instance.adaptGoldRes(i)}];c.UIManager.instance.open(p.AwardUI).then(function(t){t.init(r)});var l=n._passLevelTaskInfo.levelInfo,u=n.getCurPassLevelAwards(l.subID,l.level);return s.EventManager.instance.emit(y.GameEvent.NotifyShowPassLevelTaskPannel,!0,l,u),void s.EventManager.instance.emit(y.GameEvent.NotifyUpdatePassLevelTask,l,u)}s.EventManager.instance.emit(h.DataEvent.ToastData,"\u9886\u53d6\u5956\u52b1\u5931\u8d25:"+a.errorMsg)})},e.prototype.getCurPassLevelAwards=function(t,e){var n,o,a=this._passLevelTaskInfo.awards;try{for(var i=r(a),s=i.next();!s.done;s=i.next()){var c=s.value;if(c.subID===t&&c.level===e)return c.sr}}catch(l){n={error:l}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return 0},e.prototype.getPassLevelDetailInfo=function(){return this._passLevelTaskInfo.levelInfo},e.prototype.isNeedAutoPop=function(){return this.getPassLevelPopCount()<this._passLevelTaskInfo.showCount},e.prototype.updatePassLevelLastTriggerDay=function(){var t=g.UserInfoModel.instance.getServerTimestamp(),e=m.UtilTime.getServerDayCountWith4Clock(t);localStorage.setItem(_.DataLocalStorage.addKeyWithNumID(_.LocalStorageKey.GAME_PASS_LEVEL_TRIGGER_DAY),e.toString())},e.prototype.getPassLevelLastTriggerDay=function(){return+localStorage.getItem(_.DataLocalStorage.addKeyWithNumID(_.LocalStorageKey.GAME_PASS_LEVEL_TRIGGER_DAY))},e.prototype.addPassLevelPopCount=function(){var t=this.getPassLevelPopCount();localStorage.setItem(_.DataLocalStorage.addKeyWithNumID(_.LocalStorageKey.GAME_PASS_LEVEL_POP_COUNT),(t+1).toString())},e.prototype.getPassLevelPopCount=function(){var t=_.DataLocalStorage.addKeyWithNumID(_.LocalStorageKey.GAME_PASS_LEVEL_POP_COUNT),e=g.UserInfoModel.instance.getServerTimestamp();return m.UtilTime.getServerDayCountWith4Clock(e)!==this.getPassLevelLastTriggerDay()&&localStorage.removeItem(t),+localStorage.getItem(t)||0},e.prototype.setPassLevelConfigData=function(t){_.DataLocalStorage.setJson(_.DataLocalStorage.addKeyWithNumID(_.LocalStorageKey.GAME_PASS_LEVEL_CONFIG_DATA),t)},e.prototype.getPassLevelConfigData=function(){return _.DataLocalStorage.getJson([_.DataLocalStorage.addKeyWithNumID(_.LocalStorageKey.GAME_PASS_LEVEL_CONFIG_DATA)])},i([jsClass],e)}(l.BaseModel);n.PassLevelTaskModel=C,cc.systemEvent.once("GameRoot.inited",function(){u.ModelRoot.instance.add(C)}),cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Manager/UIManager":"UIManager","../../../../Framework/Model/BaseModel":"BaseModel","../../../../Framework/Root/ModelRoot":"ModelRoot","../../../Award/AwardModel":"AwardModel","../../../Award/AwardUI":"AwardUI","../../../Base/Data/DataEvent":"DataEvent","../../../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../../../Base/Data/DataProps":"DataProps","../../../Base/Utils/UtilTime":"UtilTime","../../../UserInfo/UserInfoModel":"UserInfoModel","../../GuanDan/GameEvent":"GameEvent","./PassLevelTaskProxy":"PassLevelTaskProxy"}],PassLevelTaskProxy:[function(t,e,n){"use strict";cc._RF.push(e,"95309blbDxO5KLex9ZAFig0","PassLevelTaskProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.PassLevelTaskProxy=void 0;var r=t("../../../../Framework/Proxy/BaseProxy"),s=t("../../../../Framework/Root/ProxyRoot"),c=t("../../../Base/Data/DataBfConfig"),l=t("../../../Base/Data/DataScript"),u=t("../../../Base/Module/Network/protocol/AwardProtocol"),d=t("../../../Base/Module/Network/SocketUtils"),p=t("../GameCommonModel"),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return s.ProxyRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.reqPassLevelTaskInfo=function(t,e,n){var o=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.passLevelTask.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.passLevelTask.func.query+"';subID="+t+";version='"+e+"'")});d.SocketUtils.instance.request(o,function(t){if(0===t.flag){var e=bf33.Utils.bytesToString(t.msg);console.warn(">-----\x3ereqPassLevelTaskInfo:",e);var o=JSON.parse(e),a=0===o.flag,i={};void 0!==o.version&&(i.version=o.version),void 0!==o.awards&&(i.awards=o.awards),Object.assign(i,{flag:o.flag,isOpen:1===o.isOpen,endTime:o.endTime,showCount:o.showCount,levelInfo:o.info,errorMsg:o.errorMsg}),n&&n(a,i)}})},e.prototype.reqGetPassLevelTaskAward=function(t,e,n){var o=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.passLevelTask.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.passLevelTask.func.get+"';subID="+t+";level="+e+";roomID="+p.GameCommonModel.instance.getAppid()+";")});d.SocketUtils.instance.request(o,function(t){if(0===t.flag){var e=bf33.Utils.bytesToString(t.msg);console.warn(">-----\x3ereqGetPassLevelTaskAward:",e);var o=JSON.parse(e),a=0===o.flag,i={flag:o.flag,endTime:o.endTime,levelInfo:o.info,errorMsg:o.errorMsg};n&&n(a,i)}})},i([jsClass],e)}(r.BaseProxy);n.PassLevelTaskProxy=h,cc.systemEvent.once("GameRoot.inited",function(){s.ProxyRoot.instance.add(h)}),cc._RF.pop()},{"../../../../Framework/Proxy/BaseProxy":"BaseProxy","../../../../Framework/Root/ProxyRoot":"ProxyRoot","../../../Base/Data/DataBfConfig":"DataBfConfig","../../../Base/Data/DataScript":"DataScript","../../../Base/Module/Network/SocketUtils":"SocketUtils","../../../Base/Module/Network/protocol/AwardProtocol":"AwardProtocol","../GameCommonModel":"GameCommonModel"}],PayWithCustomerUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"560feNN50RCdLR96oPw/yHT","PayWithCustomerUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./PayWithCustomerUI_MainPanel"),a=t("./PayWithCustomerUI_BgAnim"),i=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default)},t}();n.default=i,cc._RF.pop()},{"./PayWithCustomerUI_BgAnim":"PayWithCustomerUI_BgAnim","./PayWithCustomerUI_MainPanel":"PayWithCustomerUI_MainPanel"}],PayWithCustomerUI_BgAnim:[function(t,e,n){"use strict";cc._RF.push(e,"d6415WsWctHp4AGCqHlTBGr","PayWithCustomerUI_BgAnim");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("PayWithCustomerUI","BgAnim")},e.prototype.onConstruct=function(){this.m_img1=this.getChildAt(2),this.m_img2=this.getChildAt(3),this.m_img3=this.getChildAt(4),this.m_fingerSpine=this.getChildAt(5),this.m_gClickImg=this.getChildAt(6),this.m_ImgAnim=this.getTransitionAt(0)},e.URL="ui://gdytebobxvkef",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],PayWithCustomerUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"a91dbo9IbZIHZ33qB3sztxc","PayWithCustomerUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("PayWithCustomerUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider1=this.getChildAt(0),this.m_BgAnim=this.getChildAt(1),this.m_Collider=this.getChildAt(2),this.m_FingerAnim=this.getTransitionAt(0)},e.URL="ui://gdytebobemaba",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],PayWithCustomerUI:[function(t,e,n){"use strict";cc._RF.push(e,"1be25iA+ohBrImvl2JWd3M+","PayWithCustomerUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.PayWithCustomerUI=void 0;var r=t("../../Framework/UI/BaseUI"),s=t("../../Framework/UI/FadeUI"),c=t("../Base/Data/DatazOrder"),l=t("../Base/Data/DataSpineAni"),u=t("../Base/Utils/UtilCC"),d=t("../Base/Utils/UtilView"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e,"willShowLoading",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return r.UIType.Window},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sortingOrder",{get:function(){return c.DataZOrder.PayWithCustomerUI},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.adaptFullScreen(),this.initListener(),this.initUI()},e.prototype.initListener=function(){this.view.m_Collider.onClick(this.onExitClick,this)},e.prototype.adaptFullScreen=function(){d.UtilView.isFullScreen()&&(this.view.m_BgAnim.m_gClickImg.x=this.view.m_BgAnim.m_gClickImg.x+60)},e.prototype.initUI=function(){u.UtilCC.instantiatePrefab(l.DataSpineAniPath.ANI_GUIDE_FINGER,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"ShouDianJi",!0)},this.view.m_BgAnim.m_fingerSpine.node),this.view.getTransition("FingerAnim").play()},e.prototype.closeUI=function(){this.onExitClick()},i([jsClass],e)}(s.FadeUI);n.PayWithCustomerUI=p,cc._RF.pop()},{"../../Framework/UI/BaseUI":"BaseUI","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataSpineAni":"DataSpineAni","../Base/Data/DatazOrder":"DatazOrder","../Base/Utils/UtilCC":"UtilCC","../Base/Utils/UtilView":"UtilView"}],PlatformEventType:[function(t,e,n){"use strict";cc._RF.push(e,"bf934VFcxNDfYA3ovPyVsmX","PlatformEventType");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.PlatformEventType=void 0;var a=function(){function t(){}return t.AppShow="PlatformEventType.AppShow",t.AppHide="PlatformEventType.AppHide",t.AudioInterrupted="PlatformEventType.AudioInterrupted",t.MemoryWarning="PlatformEventType.MemoryWarning",t.PlatformShowBtn="PlatformEventType.PlatformShowBtn",t.PlatformLoginSuccess="PlatformEventType.PlatformLoginSuccess",t.NetworkStatusChange="PlatformEventType.NetworkStatusChange",t.Share="PlatformEventType.Share",t.ShareToFriend="PlatformEventType.ShareToFriend",t.VideoAdClose="PlatformEventType.VideoAdClose",t.GameRecorderError="GameRecorderError",t.GameRecorderStart="GameRecorderStart",t.GameRecorderStop="GameRecorderStop",t.GameRecorderTimeUpdate="GameRecorderTimeUpdate",t.GameRecorderPause="GameRecorderPause",t.GameRecorderResume="GameRecorderResume",t.GameRecorderAbort="GameRecorderAbort",t.RecorderStart="RecorderStart",t.RecorderStop="RecorderStop",t.RealTimeVoiceUpdate="RealTimeVoiceUpdate",t.RealTimeVoiceClose="RealTimeVoiceClose",o([jsClass],t)}();n.PlatformEventType=a,cc._RF.pop()},{}],PlatformManager:[function(t,e,n){"use strict";cc._RF.push(e,"1921eb5wXlLEISciJ0B1GT6","PlatformManager");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.PlatformManager=n.PlatformTypeEnum=void 0;var r,s=t("../../../../Framework/Manager/BaseManager"),c=t("../../../../Framework/Root/ManagerRoot"),l=t("./DevelopPlatform"),u=t("./MiniGamePlatform"),d=t("./StrongArmyPlatform"),p=t("./SkyWingPlatform"),h=t("./MeiTuanPlatform");(function(t){t.Develop="develop",t.MiniGame="miniGame",t.MiniQQ="miniQQ",t.StrongArmy="strongArmy",t.SkyWing="skyWing",t.MeiTuan="meiTuan"})(r=n.PlatformTypeEnum||(n.PlatformTypeEnum={}));var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return c.ManagerRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"webPlatformType",{get:function(){return r.Develop},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return r.MeiTuan===this.webPlatformType?r.MeiTuan:cc.sys.platform===cc.sys.WECHAT_GAME?void 0!==window.qq?r.MiniQQ:r.MiniGame:r.StrongArmy===this.webPlatformType?r.StrongArmy:r.SkyWing===this.webPlatformType?r.SkyWing:r.Develop},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"platform",{get:function(){return this._platform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportAct",{get:function(){return this._platform.supportAct},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){switch(this.type){case r.MiniGame:return void(this._platform=this.node.addComponent(u.MiniGamePlatform));case r.MiniQQ:return;case r.StrongArmy:return void(this._platform=this.node.addComponent(d.StrongArmyPlatform));case r.SkyWing:return void(this._platform=this.node.addComponent(p.SkyWingPlatform));case r.MeiTuan:return void(this._platform=this.node.addComponent(h.MeiTuanPlatform))}this._platform=this.node.addComponent(l.DevelopPlatform)},e.prototype.isDevelopPlatForm=function(){return this.type===r.Develop},e.prototype.isWeiXinPlatForm=function(){return this.type===r.MiniGame},e.prototype.isStrongArmyPlatForm=function(){return this.type===r.StrongArmy},e.prototype.isSkyWingPlatForm=function(){return this.type===r.SkyWing},e.prototype.isMeiTuanPlatForm=function(){return this.type===r.MeiTuan},i([jsClass],e)}(s.BaseManager);n.PlatformManager=_,cc._RF.pop()},{"../../../../Framework/Manager/BaseManager":"BaseManager","../../../../Framework/Root/ManagerRoot":"ManagerRoot","./DevelopPlatform":"DevelopPlatform","./MeiTuanPlatform":"MeiTuanPlatform","./MiniGamePlatform":"MiniGamePlatform","./SkyWingPlatform":"SkyWingPlatform","./StrongArmyPlatform":"StrongArmyPlatform"}],PlayCardsParseRule:[function(t,e,n){"use strict";cc._RF.push(e,"b69baYllBtID5Ox43e7vq/K","PlayCardsParseRule"),Object.defineProperty(n,"__esModule",{value:!0}),n.PlayCardsParseRule=void 0;var o=t("./DefaultPokerCardsConst"),a=t("../CommonFunc/ToolLuaFunc"),i=t("./PlayCards");jsClass("PlayCardsParseRule");var r=function(){function t(){this.rules={},this.maxCardCnt=-1}return t.prototype.append=function(t,e,n){null==this.rules[t]&&(this.rules[t]={});var o={type:e,func:n};this.rules[t][this.getListLength(this.rules[t])+1]=o,t>this.maxCardCnt&&(this.maxCardCnt=t)},t.prototype.getListLength=function(t){return a.ToolLuaFunc.getListLength(t)},t.prototype.reset=function(){this.rules={},this.maxCardCnt=-1},t.prototype.parseCards=function(t,e,n,a){var r=new i.PlayCards;r.powerfulColor=n||-1,r.levelCard=e||-1,r.type=-1;var s=this.getListLength(t);if(s>this.maxCardCnt&&(s=this.maxCardCnt),null!=this.rules[s]){for(var c=1;c<=this.getListLength(this.rules[s]);c++)if(this.rules[s]&&this.rules[s][c]&&this.rules[s][c].func(t,r),a==o.PokerCardsType.LianDui&&r.type==o.PokerCardsType.LianSan&&(r.type=-1),-1!=r.type){r.setCards(t);break}}else r.type=-1;return r},t}();n.PlayCardsParseRule=r,cc._RF.pop()},{"../CommonFunc/ToolLuaFunc":"ToolLuaFunc","./DefaultPokerCardsConst":"DefaultPokerCardsConst","./PlayCards":"PlayCards"}],PlayCardsParse:[function(t,e,n){"use strict";cc._RF.push(e,"1779f2rfTZHZqTER5Ay1uEk","PlayCardsParse"),Object.defineProperty(n,"__esModule",{value:!0}),n.PlayCardsParse=void 0;var o=t("./DefaultPokerCardsConst"),a=t("./PokerAlgorithm"),i=t("./PlayCards"),r=t("../CommonFunc/ToolLuaFunc");jsClass("PlayCardsParse");var s=function(){function t(){}return t.IsColorSame=function(e,n,i){n=n||-1,i=i||-1;for(var r=!0,s=-1,c=0;c<t.getListLength(e);c++){var l=a.PokerAlgorithm.GetCardValueAndColor(e[c]),u=l[0],d=l[1];if(d<o.PokerCardColor.FangKuai||d>o.PokerCardColor.HeiTao){r=!1;break}if(u!=n||i!=d)if(-1==s)s=d;else if(s!=d){r=!1;break}}return r},t.getListLength=function(t){return r.ToolLuaFunc.getListLength(t)},t.deepCopy=function(t){return r.ToolLuaFunc.deepCopy(t)},t.addTableData_lua=function(t,e){r.ToolLuaFunc.addTableData_lua(t,e)},t.IsAllCardValueSame=function(e,n,i){n=n||-1,i=i||-1;for(var r=!0,s=-1,c=0,l=0;l<t.getListLength(e);l++){var u=a.PokerAlgorithm.GetCardValueAndColor(e[l]),d=u[0],p=u[1];if(d<o.PokerCardValues.None||d>o.PokerCardValues.Card_DaWang){r=!1;break}if(d!=n||i!=p){if(-1==s)s=d;else if(s!=d){r=!1;break}}else c+=1}return s>o.PokerCardValues.Card_A&&c>0&&(r=!1),r&&-1==s&&(s=n),[r,s]},t.getOneCards=function(e,n){var o=!1,a=null;for(var r in e){var s=e[r];for(var c in s){var l=s[c];if(n!=t.getListLength(l.cards)){o=!1;break}o=!0,(null==a||i.PlayCards.getInstance().getMaxValueWithLevelCard()>i.PlayCards.getInstance().getMaxValueWithLevelCard())&&(a=l)}}return o||(a=null),a},t.GetCardsInfo=function(e,n,o){var a=new i.PlayCards;return a.powerfulColor=o,a.levelCard=n,null!=t[t.getListLength(e)]?t[t.getListLength(e)](e,a):a.type=-1,-1!=a.type&&a.setCards(e),a},t.IsDanZhang=function(t,e){var n=a.PokerAlgorithm.GetCardValueAndColor(t[0]),i=n[0];n[1],t[0]>o.PokerCards.None&&t[0]<=o.PokerCards.DaWang?(e.type=o.PokerCardsType.DanZhang,e.maxCard=i):e.type=-1},t.IsDuiZi=function(e,n){var a=t.IsAllCardValueSame(e,n.levelCard,n.powerfulColor),i=a[0],r=a[1];i?(n.type=o.PokerCardsType.DuiZi,n.maxCard=r):n.type=-1},t.IsSanZhang=function(e,n){var a=t.IsAllCardValueSame(e,n.levelCard,n.powerfulColor),i=a[0],r=a[1];i?(n.type=o.PokerCardsType.SanZhang,n.maxCard=r):n.type=-1},t.IsZhaDan=function(e,n){var o=t.IsAllCardValueSame(e,n.levelCard,n.powerfulColor),a=o[0],i=o[1];a?(n.type=t.getListLength(e),n.maxCard=i):n.type=-1},t.IsWangZha=function(e,n){var o=a.PokerAlgorithm.ArrangeCards(e);n.type=-1;var i={};a.PokerAlgorithm.FindWangZha(o,!1,i,n.levelCard,n.powerfulColor,null);var r=t.getOneCards(i,4);null!=r&&(n.type=r.type,n.maxCard=r.maxCard)},t.IsShunZi5=function(e,n){var i=a.PokerAlgorithm.ArrangeCards(e),r={};a.PokerAlgorithm.FindShunZi5(i,!1,r,n.levelCard,n.powerfulColor,null);var s=t.getOneCards(r,5);null!=s?(n.type=o.PokerCardsType.ShunZi,n.maxCard=s.maxCard):n.type=-1},t.IsTongHuaShun=function(e,n){t.IsShunZi5(e,n),-1!=n.type&&(t.IsColorSame(e,n.levelCard,n.powerfulColor)?n.type=o.PokerCardsType.TongHuaShun:n.type=-1)},t.IsSanDaiEr=function(e,n){var s=a.PokerAlgorithm.ArrangeCards(e),c={};for(var l in a.PokerAlgorithm.FindSanZhang(s,!1,c,n.levelCard,n.powerfulColor,null),c)for(var u=c[l],d=1;d<=t.getListLength(u);d++){var p=a.PokerAlgorithm.CardsCopy(s);a.PokerAlgorithm.DeleteCards(p,u[d].cards);var h={};if(a.PokerAlgorithm.FindDuiZi(p,!1,h,n.levelCard,n.powerfulColor,null),null!=r.ToolLuaFunc.next_lua(h)){var _=a.PokerAlgorithm.GetSortTableWithKey(h);n.type=o.PokerCardsType.SanDaiEr;for(var f=h[_[0]][1],m=1;m<=t.getListLength(f.cards);m++)u[d].cards[t.getListLength(u[d].cards)+1]=f.cards[m]}else delete c[l][d]}for(var l in n.maxCard=-1,c)if(u=c[l])for(d=1;d<=t.getListLength(u);d++)u[d]&&(n.type=o.PokerCardsType.SanDaiEr,u[d].levelCard=n.levelCard,null!=u[d]&&i.PlayCards.getInstance().getMaxValueWithLevelCard()>n.getMaxValueWithLevelCard()&&(n.maxCard=u[d].maxCard))},t.IsGangBan=function(e,n){var o={},i=a.PokerAlgorithm.ArrangeCards(e);a.PokerAlgorithm.FindGangBan(i,!1,o,n.levelCard,n.powerfulColor,null);var r=t.getOneCards(o,6);null!=r?(n.type=r.type,n.maxCard=r.maxCard):n.type=-1},t.IsLianSanDui=function(e,n){var o={},i=a.PokerAlgorithm.ArrangeCards(e);a.PokerAlgorithm.FindSanLianDui(i,!1,o,n.levelCard,n.powerfulColor,null);var r=t.getOneCards(o,6);null!=r?(n.type=r.type,n.maxCard=r.maxCard):n.type=-1},t.IsShuangWangZha=function(e,n){var o=a.PokerAlgorithm.ArrangeCards(e);n.type=-1;var i={};a.PokerAlgorithm.FindShuangWangZha(o,!1,i,n.levelCard,n.powerfulColor,null);var r=t.getOneCards(i,2);null!=r&&(n.type=r.type,n.maxCard=r.maxCard)},t.IsSanDaiYi=function(e,n){var i=a.PokerAlgorithm.ArrangeCards(e),r={};a.PokerAlgorithm.FindSanZhang(i,!1,r,n.levelCard,n.powerfulColor,null);var s=t.getOneCards(r,3);null!=s?(n.type=o.PokerCardsType.SanDaiYi,n.maxCard=s.maxCard):n.type=-1},t.IsShunZi=function(e,n){var i=a.PokerAlgorithm.ArrangeCards(e),r=a.PokerAlgorithm.FindShunZiMaxLengthWithSize(i,1);r&&r.cards&&t.getListLength(r.cards)==t.getListLength(e)?(n.type=o.PokerCardsType.ShunZi,n.maxCard=r.maxCard):n.type=-1},t.IsLianSanZhang=function(e,n){var i=a.PokerAlgorithm.ArrangeCards(e),r=a.PokerAlgorithm.FindShunZiMaxLengthWithSize(i,3);r&&r.cards&&t.getListLength(r.cards)==t.getListLength(e)?(n.type=o.PokerCardsType.LianSan,n.maxCard=r.maxCard):n.type=-1},t.IsLianDui=function(e,n){var i=a.PokerAlgorithm.ArrangeCards(e),r=a.PokerAlgorithm.FindShunZiMaxLengthWithSize(i,2);r&&r.cards&&t.getListLength(r.cards)==t.getListLength(e)?(n.type=o.PokerCardsType.LianDui,n.maxCard=r.maxCard):n.type=-1},t.IsSiDaiEr=function(e,n){var i=a.PokerAlgorithm.ArrangeCards(e),r={};a.PokerAlgorithm.FindZhaDan(i,!1,r,n.levelCard,n.powerfulColor,null);var s=t.getOneCards(r,4);if(s)for(var c in r)for(var l=r[c],u=1;u<=t.getListLength(l);u++){var d=a.PokerAlgorithm.CardsCopy(i);a.PokerAlgorithm.DeleteCards(d,l[u].cards);var p=0;for(var h in d)p+=d[h].count;if(2==p)return n.type=o.PokerCardsType.SiDaiEr,n.maxCard=s.maxCard,!0;if(4==p){var _={};a.PokerAlgorithm.FindDuiZi(d,!1,_,n.levelCard,n.powerfulColor,null);var f=0;for(var m in _){var g=_[m];f+=t.getListLength(g)}return 2==f?(n.type=o.PokerCardsType.SiDaiEr,n.maxCard=s.maxCard,!0):(n.type=-1,!1)}}return n.type=-1,!1},t.IsFeiJi=function(e,n){var i=a.PokerAlgorithm.ArrangeCards(e),r=a.PokerAlgorithm.FindShunZiMaxLengthWithSize(i,3);if(!r||!r.cards||t.getListLength(r.cards)/3<2)return n.type=-1,!1;var s=t.getListLength(r.cards)/3;if(a.PokerAlgorithm.ArrangeCards(r.cards),t.getListLength(e)-3*s==s)return n.type=o.PokerCardsType.FeiJi,n.maxCard=r.maxCard,n.cards=this.deepCopy(e),!0;var c=a.PokerAlgorithm.CardsCopy(i);a.PokerAlgorithm.DeleteCards(c,r.cards);for(var l=1;l<=s;l++){var u={};a.PokerAlgorithm.FindDuiZi(c,!1,u,n.levelCard,n.powerfulColor,null);var d=0;for(var p in u){var h=u[p];d+=t.getListLength(h)}return d==s?(n.type=o.PokerCardsType.FeiJi,n.maxCard=r.maxCard,n.cards=this.deepCopy(e),!0):(n.type=-1,!1)}return n.type=-1,!1},t.IsFeiJiDaiDuiZi=function(e,n){var i=a.PokerAlgorithm.ArrangeCards(e),r=a.PokerAlgorithm.FindShunZiMaxLengthWithSize(i,3);if(!r||!r.cards||t.getListLength(r.cards)/3<2)return n.type=-1,!1;var s=t.getListLength(r.cards)/3;if(a.PokerAlgorithm.ArrangeCards(r.cards),t.getListLength(e)-3*s==2*s)return n.type=o.PokerCardsType.FeiJi,n.maxCard=r.maxCard,n.cards=this.deepCopy(e),!0;var c=a.PokerAlgorithm.CardsCopy(i);a.PokerAlgorithm.DeleteCards(c,r.cards);for(var l=1;l<=s;l++){var u={};a.PokerAlgorithm.FindDuiZi(c,!1,u,n.levelCard,n.powerfulColor,null);var d=0;for(var p in u){var h=u[p];d+=t.getListLength(h)}return d==s?(n.type=o.PokerCardsType.FeiJi,n.maxCard=r.maxCard,n.cards=this.deepCopy(e),!0):(n.type=-1,!1)}return n.type=-1,!1},t.IsSanAZha=function(e,n){if(n.type=-1,3==t.getListLength(e)){var o=a.PokerAlgorithm.ArrangeCards(e),i={};a.PokerAlgorithm.FindSanAZha(o,!1,i,n.levelCard,n.powerfulColor,null);var r=t.getOneCards(i,3);null!=r&&(n.type=r.type,n.maxCard=r.maxCard)}},t.IsSiDaiYiZha=function(e,n){var o=t.getListLength(e)-1,i=a.PokerAlgorithm.ArrangeCards(e),r={};if(4==t.getListLength(e))a.PokerAlgorithm.FindSanAZha(i,!1,r,n.levelCard,n.powerfulColor,null);else{if(5!=t.getListLength(e))return void(n.type=-1);a.PokerAlgorithm.FindDanPaiWithSize(i,!1,r,o,n.levelCard,n.powerfulColor,null)}var s=t.getOneCards(r,o);return null!=s?(n.type=s.type,n.maxCard=s.maxCard,!0):(n.type=-1,!1)},t.IsSanDaiErZhang=function(e,n){if(5==t.getListLength(e)){var i=a.PokerAlgorithm.ArrangeCards(e),r={};a.PokerAlgorithm.FindSanZhang(i,!1,r,n.levelCard,n.powerfulColor,null);var s=t.getOneCards(r,3);null!=s?(n.type=o.PokerCardsType.SanDaiEr,n.maxCard=s.maxCard):n.type=-1}},t.IsSiDaiSan=function(e,n){var i=a.PokerAlgorithm.ArrangeCards(e),r={};a.PokerAlgorithm.FindDanPaiWithSize(i,!1,r,4,n.levelCard,n.powerfulColor,null);var s=t.getOneCards(r,3);null!=s?(n.type=o.PokerCardsType.SanDaiYi,n.maxCard=s.maxCard):n.type=-1},t.IsFeiJiDaiLiangDan=function(e,n){var i=a.PokerAlgorithm.ArrangeCards(e),r=a.PokerAlgorithm.FindShunZiMaxLengthWithSize(i,3);t.getListLength(r.cards)/3==t.getListLength(e)/5?(n.type=o.PokerCardsType.FeiJi,n.maxCard=r.maxCard):n.type=-1},t.IsFeiJiDaIDuiZi=function(e,n){var i=a.PokerAlgorithm.ArrangeCards(e),r=a.PokerAlgorithm.FindShunZiMaxLengthWithSize(i,3);if(null==r||t.getListLength(r.cards)/3!=t.getListLength(e)/5||t.getListLength(r.cards)/3<2)n.type=-1;else{var s=t.getListLength(r.cards)/3,c=a.PokerAlgorithm.CardsCopy(i);a.PokerAlgorithm.DeleteCards(c,r.cards);var l=a.PokerAlgorithm.GetDaiPaiWithCnt(c,s,2,n.levelCard,n.powerfulColor);null!=l&&t.getListLength(l)>0?(n.type=o.PokerCardsType.FeiJi,n.maxCard=r.maxCard):n.type=-1}},t}();n.PlayCardsParse=s,cc._RF.pop()},{"../CommonFunc/ToolLuaFunc":"ToolLuaFunc","./DefaultPokerCardsConst":"DefaultPokerCardsConst","./PlayCards":"PlayCards","./PokerAlgorithm":"PokerAlgorithm"}],PlayCards:[function(t,e,n){"use strict";cc._RF.push(e,"01707DOp5JF7px1jenx42at","PlayCards"),Object.defineProperty(n,"__esModule",{value:!0}),n.PlayCards=void 0;var o=t("./DefaultPokerCardsConst"),a=t("../CommonFunc/ToolLuaFunc");jsClass("PlayCards");var i=function(){function t(){this.type=o.PokerCardsType.None,this.cards={},this.size=0,this.maxCard=o.PokerCardValues.None,this.levelCard=o.PokerCardValues.None,this.powerfulColor=o.PokerCardColor.HongXin}return t.getInstance=function(){return null==t.playCardsObj&&(t.playCardsObj=new t),t.playCardsObj},t.prototype.reset=function(){this.type=o.PokerCardsType.None,this.cards={},this.size=0,this.maxCard=o.PokerCardValues.None,this.levelCard=o.PokerCardValues.None,this.powerfulColor=o.PokerCardColor.HongXin},t.prototype.getListLength=function(t){return a.ToolLuaFunc.getListLength(t)},t.prototype.setCards=function(t){this.size=this.getListLength(t),this.cards={};for(var e=0;e<this.size;e++)this.cards[e]=t[e]},t.prototype.setPara=function(t,e){e=e||this.powerfulColor,t=t||this.levelCard,this.powerfulColor=e,this.levelCard=t},t.prototype.append=function(t){this.cards[this.getListLength(this.cards)+1]=t,this.size=this.size+1},t.prototype.getTypeLevel=function(){return this.type==o.PokerCardsType.WangZha?100:this.type>o.PokerCardsType.WuZhang&&this.type<=o.PokerCardsType.ShiZhang?this.type+1:this.type>=o.PokerCardsType.SiZhang&&this.type<=o.PokerCardsType.WuZhang?this.type:this.type==o.PokerCardsType.TongHuaShun?6:this.type==o.PokerCardsType.SanAZha?this.type:0},t.prototype.canOverType=function(t){return this.getTypeLevel()>t.getTypeLevel()},t.prototype.getMaxValueWithLevelCard=function(){return this.maxCard>o.PokerCardValues.Card_A?this.maxCard+1:this.maxCard==this.levelCard?this.type==o.PokerCardsType.ShunZi||this.type==o.PokerCardsType.LianDui||this.type==o.PokerCardsType.LianSan||this.type==o.PokerCardsType.TongHuaShun?this.maxCard:o.PokerCardValues.Card_A+1:this.maxCard},t.prototype.canOver=function(t){return this.type==t.type?this.getMaxValueWithLevelCard()>t.getMaxValueWithLevelCard():this.canOverType(t)},t}();n.PlayCards=i,cc._RF.pop()},{"../CommonFunc/ToolLuaFunc":"ToolLuaFunc","./DefaultPokerCardsConst":"DefaultPokerCardsConst"}],PlayerInfoModel:[function(t,e,n){"use strict";cc._RF.push(e,"eb12fWzAiBDEZ2w4rBXihFE","PlayerInfoModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.PlayerInfoModel=n.LocalSeatEnum=n.ER_CNT=n.MAX_PLAYER=void 0;var r,s=t("../../../Framework/Manager/EventManager"),c=t("../../../Framework/Model/BaseModel"),l=t("../../../Framework/Root/ModelRoot"),u=t("../GuanDan/GameEvent"),d=t("../../UserInfo/UserInfoModel"),p=t("../../Base/Utils/UtilTool"),h=t("./GameCommonModel"),_=t("../../Base/Data/DataSound"),f=t("../GuanDan/Model/GameModel"),m=t("../../Base/Data/DataConstant");n.MAX_PLAYER=4,n.ER_CNT=2,function(t){t[t.ERROR=-1]="ERROR",t[t.LEFT=0]="LEFT",t[t.SELF=1]="SELF",t[t.RIGHT=2]="RIGHT",t[t.PARTNER=3]="PARTNER"}(r=n.LocalSeatEnum||(n.LocalSeatEnum={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._players=[],e._tempPlayers=[],e._nMaxPlayer=4,e._nplayerNums=4,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return l.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"players",{get:function(){return this._players},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tempplayers",{get:function(){return this._tempPlayers},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){for(var t=0;t<n.MAX_PLAYER;++t)this._players.push(this.newPlayerInfoData())},e.prototype.newPlayerInfoData=function(){return{numid:void 0,actorid:void 0,extdata:void 0,regtime:void 0,nickname:void 0,username:void 0,sex:void 0,head:void 0,right:void 0,headurl:void 0,headframe:void 0,gamebean:void 0,gamegold:void 0,playscore:void 0,playtype:void 0,total_escape:void 0,total_lose:void 0,total_win:void 0,total_draw:void 0,total_exp:void 0,countprops:void 0,timeprops:void 0,charm:void 0,tableid:void 0,tablestate:void 0,seatid:void 0,playstate:void 0,empty:!0}},e.prototype.clearData=function(){console.log("ttt.playerInfo.clearData"),this.setMaxPlayer(n.MAX_PLAYER);for(var t=0;t<n.MAX_PLAYER;++t)this._players[t]=this.newPlayerInfoData();for(t=0;t<n.MAX_PLAYER;++t)this._tempPlayers[t]=this.newPlayerInfoData()},e.prototype.setMaxPlayer=function(t){this._nMaxPlayer=t,this._nplayerNums=t},e.prototype.getPlayer=function(t){return this._players[t]},e.prototype.saveTempPlayers=function(){for(var t=0;t<n.MAX_PLAYER;++t)this._tempPlayers[t]=this.newPlayerInfoData(),p.UtilTool.setData(this._tempPlayers[t],this._players[t])},e.prototype.clearOtherPlayer=function(){for(var t=0;t<n.MAX_PLAYER;++t)this._players[t].numid!==d.UserInfoModel.instance.userInfo.numID&&(this._players[t]=this.newPlayerInfoData())},e.prototype.clearOtherPlayerFriendTeamChangeTable=function(){for(var t=0;t<n.MAX_PLAYER;++t){var e=this._players[t].numid;e!==d.UserInfoModel.instance.userInfo.numID&&(h.GameCommonModel.instance.isFriendTeamPartner(e)?this._players[t].seatid=-1:this._players[t]=this.newPlayerInfoData())}},e.prototype.playerLeaveClearData=function(t){for(var e=0;e<n.MAX_PLAYER;++e)this._players[e].numid===t&&(this._players[e]=this.newPlayerInfoData())},e.prototype.isHasPlayerLeave=function(){for(var t=0;t<this._nMaxPlayer;++t)if(void 0===this._players[t].numid)return!0;return!1},e.prototype.updatePlayerUserInfo=function(t){console.log("ttt.updatePlayerUserInfo1:",t.numid,t);for(var e=0;e<n.MAX_PLAYER;++e)if(this._players[e].numid===t.numid)return void this.updatePlayerUserInfoExt(e,t);for(e=0;e<n.MAX_PLAYER;++e)if(this._players[e].empty)return void this.updatePlayerUserInfoExt(e,t)},e.prototype.updatePlayerUserInfoExt=function(t,e){this._players[t].numid=e.numid,this._players[t].regtime=e.regtime,this._players[t].actorid=e.actorid,this._players[t].extdata=bf33.Utils.bytesToString(e.extdata),this._players[t].nickname=p.UtilTool.easyUTF8(e.nickname),this._players[t].username=p.UtilTool.easyUTF8(e.username),this._players[t].sex=e.sex,this._players[t].head=e.avatar,this._players[t].right=e.right,this._players[t].headurl=bf33.Utils.bytesToString(e.headurl),this._players[t].headframe=e.headframe,this._players[t].empty=!1,this._players[t].clientType=e.clienttype,this._players[t].partnerid=e.partnerid,this._players[t].partnertype=e.partnertype,console.log("ttt.updatePlayerUserInfo2:",e.numid,this._players[t])},e.prototype.updatePlayerGameInfo=function(t){console.log("ttt.updatePlayerGameInfo:",t.numid,t);for(var e=0;e<n.MAX_PLAYER;++e)if(this._players[e].numid===t.numid)return void this.updatePlayerGameInfoExt(e,t);for(e=0;e<n.MAX_PLAYER;++e)if(this._players[e].empty)return void this.updatePlayerGameInfoExt(e,t)},e.prototype.updatePlayerGameInfoExt=function(t,e){f.GameModel.instance.isNormalModel()&&e.numid===d.UserInfoModel.instance.userInfo.numID&&d.UserInfoModel.instance.setUserInfo({gold:e.gamegold,win:e.total_win,lose:e.total_lose,draw:e.total_draw,escape:e.total_escape}),this._players[t].numid=e.numid,this._players[t].gamebean=e.gamebean,this._players[t].gamegold=e.gamegold,this._players[t].playscore=e.playscore,this._players[t].playtype=e.playtype,this._players[t].total_escape=e.total_escape,this._players[t].total_lose=e.total_lose,this._players[t].total_win=e.total_win,this._players[t].total_draw=e.total_draw,this._players[t].total_exp=e.total_exp,this._players[t].empty=!1,s.EventManager.instance.emit(u.GameEvent.PLAYER_GLOD_CHANGE,e.numid)},e.prototype.updatePlayerPropInfo=function(t){d.UserInfoModel.instance.userInfo.numID===t.numid&&(d.UserInfoModel.instance.setProps(t.countprops),d.UserInfoModel.instance.setCharm(t.charm));for(var e=!1,o=0;o<n.MAX_PLAYER;++o)if(this._players[o].numid===t.numid){this.players[o].charm=t.charm,this._players[o].empty=!1,e=!0;break}if(!e)for(o=0;o<n.MAX_PLAYER;++o)if(this._players[o].empty){this.players[o].charm=t.charm,this._players[o].empty=!1,e=!0;break}s.EventManager.instance.emit(u.GameEvent.REFRESH_PROP_UI,{})},e.prototype.updatePlayerState=function(t){console.log("=>ttt.updatePlayerState:",t.numid,t.seatid,t);for(var e=0;e<n.MAX_PLAYER;++e)if(this._players[e].numid===t.numid)return this.players[e].seatid=t.seatid||0,this.players[e].playstate=t.playstate,this._players[e].empty=!1,void s.EventManager.instance.emit(u.GameEvent.PLAYER_STATE_CHANGE,{state:t.playstate,numid:t.numid});for(e=0;e<n.MAX_PLAYER;++e)if(this._players[e].empty)return this.players[e].numid=t.numid,this.players[e].seatid=t.seatid||0,this.players[e].playstate=t.playstate,this._players[e].empty=!1,void s.EventManager.instance.emit(u.GameEvent.PLAYER_STATE_CHANGE,{state:t.playstate,numid:t.numid})},e.prototype.onTableState=function(t){console.log("onTableState"),h.GameCommonModel.instance.isBoxRoom()&&t.owner_numid>0&&h.GameCommonModel.instance.saveBoxCreator(t.owner_numid),s.EventManager.instance.emit(u.GameEvent.TABLE_STATE_CHANGE,t)},e.prototype.nextSeat=function(t){var e=t+1;return e>=this._nplayerNums&&(e=0),e},e.prototype.getSelfSeat=function(){for(var t=0;t<n.MAX_PLAYER;++t)if(this._players[t].numid===d.UserInfoModel.instance.userInfo.numID)return void 0===this._players[t].seatid||this._players[t].seatid<0?(console.warn("ttt.getSelfSeat1:",this._players[t],this._players[t].seatid),r.SELF):this._players[t].seatid;return console.warn("ttt.getSelfSeat2:",this._players),r.SELF},e.prototype.getPlayerByNumid=function(t){for(var e=0;e<n.MAX_PLAYER;++e)if(this._players[e].numid===t)return this._players[e]},e.prototype.getTempPlayerByNumid=function(t){for(var e=0;e<n.MAX_PLAYER;++e)if(this._tempPlayers[e]&&this._tempPlayers[e].numid===t)return this._tempPlayers[e]},e.prototype.getPlayerSeatidByNumid=function(t){for(var e=0;e<n.MAX_PLAYER;++e)if(this._players[e].numid===t)return this._players[e].seatid},e.prototype.getTempPlayerSeatidByNumid=function(t){for(var e=0;e<n.MAX_PLAYER;++e)if(this._tempPlayers[e]&&this._tempPlayers[e].numid===t)return this._tempPlayers[e].seatid},e.prototype.getPlayerByServerSeat=function(t){for(var e=0;e<n.MAX_PLAYER;++e)if(this._players[e].seatid===t)return this._players[e]},e.prototype.getPlayerByLocalSeat=function(t){for(var e=0;e<n.MAX_PLAYER;++e)if(this._players[e].seatid===this.localToServer(t))return this._players[e]},e.prototype.getTempPlayerByLocalSeat=function(t){for(var e=0;e<n.MAX_PLAYER;++e)if(this._tempPlayers[e]&&this._tempPlayers[e].seatid===this.localToServer(t))return this._tempPlayers[e]},e.prototype.getTempPlayerByServerSeat=function(t){for(var e=0;e<n.MAX_PLAYER;++e)if(this._tempPlayers[e]&&this._tempPlayers[e].seatid===t)return this._tempPlayers[e]},e.prototype.getPlayerSexBySeat=function(t){var e=this.getPlayerByServiceSeat(t);if(e)return this.getSelfSeat()===t?_.DataSound.getDubbingSex(e.sex):e.sex},e.prototype.getPlayerByServiceSeat=function(t){for(var e=0;e<n.MAX_PLAYER;++e)if(this._players[e].seatid===t)return this._players[e]},e.prototype.getTempPlayerByServiceSeat=function(t){for(var e=0;e<n.MAX_PLAYER;++e)if(this._tempPlayers[e]&&this._tempPlayers[e].seatid===t)return this._tempPlayers[e]},e.prototype.getHead=function(t,e){if(t===d.UserInfoModel.instance.userInfo.numID)return d.UserInfoModel.instance.getHead();if(p.UtilTool.checkHeadurl(e))return e;var n=this.getPlayerByNumid(t);return void 0===n&&(n=this.getTempPlayerByNumid(t)),void 0===n?m.DataConstant.getDefaultAvatar():p.UtilTool.checkHeadurl(n.headurl)?n.headurl:m.DataConstant.getDefaultAvatar(n.head)},e.prototype.setNowGamePlayer=function(t){this._nplayerNums=t},e.prototype.getNowGamePlayer=function(){return this._nplayerNums},e.prototype.getLocalSeatByNumid=function(t){var e=this.getPlayerByNumid(t);if(e&&void 0!==e.seatid){var n={lseat:this.serverToLocal(e.seatid),data:e};return-1===n.lseat&&console.error("ttt.getLocalSeatByNumid.error"),n}return{lseat:r.ERROR}},e.prototype.getNumidByServiceSeat=function(t){for(var e=0;e<n.MAX_PLAYER;++e)if(this._players[e]&&this._players[e].seatid===t)return this._players[e].numid},e.prototype.serverToLocal=function(t){if(t<0||t>this._nMaxPlayer)return r.ERROR;if(t>=this._nplayerNums)return this._nplayerNums;var e=((t-this.getSelfSeat()+this._nMaxPlayer)%this._nMaxPlayer+r.SELF)%this._nMaxPlayer;if(this._nplayerNums<this._nMaxPlayer){var n=this.getSelfSeat();2===this._nplayerNums?e=t===n?r.SELF:r.SELF+2:3===this._nplayerNums&&(e=t===n?r.SELF:t==(n+1)%this._nplayerNums?r.SELF+1:r.SELF-1)}return e},e.prototype.localToServer=function(t){if(t<0)return r.ERROR;if(t>=this._nMaxPlayer)return this._nMaxPlayer;var e=this.getSelfSeat(),n=((t-r.SELF+this._nMaxPlayer)%this._nMaxPlayer+e)%this._nMaxPlayer;if(this._nplayerNums<this._nMaxPlayer)if(t<this._nplayerNums){var o=this.getSelfSeat();if(2===this._nplayerNums)if(t==r.SELF)n=o;else{if(t!==r.SELF+2)return r.ERROR;n=(o+1)%this._nplayerNums}else 3===this._nplayerNums&&((n=o+t-r.SELF)<0?n+=this._nplayerNums:n>=this._nplayerNums&&(n-=this._nplayerNums))}else{if(2!=this._nplayerNums||t!==r.SELF+2)return r.ERROR;n=((o=this.getSelfSeat())+1)%this._nplayerNums}return n},e.prototype.isGamePlay=function(){var t=this.getPlayerByNumid(d.UserInfoModel.instance.userInfo.numID);return!(!t||!t.playstate||t.playstate!==club.client.game.PlayState.PLAYSTATES.PLAYSTATE_TABLE_PLAYING)},e.prototype.isPlayerStand=function(){return this.getPlayerByNumid(d.UserInfoModel.instance.userInfo.numID).playstate===club.client.game.PlayState.PLAYSTATES.PLAYSTATE_IN_ROOM},e.prototype.getNowPlayerGold=function(){for(var t=0;t<n.MAX_PLAYER;++t)if(this._players[t].numid===d.UserInfoModel.instance.userInfo.numID)return this._players[t].gamegold},e.prototype.isPartner=function(t,e){return(t=(t+2)%this.getNowGamePlayer())===e},e.prototype.isPartnerByNumid=function(t){for(var e=0;e<n.MAX_PLAYER;++e)if(this._tempPlayers[e].numid===t)return this.isPartner(r.SELF,this.serverToLocal(this._tempPlayers[e].seatid));return!1},e.prototype.getPartnerSeat=function(t){return(t+2)%this.getNowGamePlayer()},e.prototype.changeSeat=function(t,e){var n=this.getPlayerByServiceSeat(t);if(n){n.seatid=e,s.EventManager.instance.emit(u.GameEvent.PLAYER_GLOD_CHANGE,n.numid);var o=this.getTempPlayerByServiceSeat(t);return o&&(o.seatid=e),!0}return!1},e.prototype.switchSeat=function(t,e){var n=this.getPlayerByServiceSeat(t),o=this.getPlayerByServiceSeat(e);if(n&&o){n.seatid=e,o.seatid=t;var a=this.getTempPlayerByServiceSeat(t),i=this.getTempPlayerByServiceSeat(e);return a&&i&&(a.seatid=e,i.seatid=t),!0}return!1},e.prototype.changeSeatByNumid=function(t,e){var n=this.getPlayerByNumid(t);if(n){n.seatid=e;var o=this.getTempPlayerByNumid(t);return o&&(o.seatid=e),s.EventManager.instance.emit(u.GameEvent.PLAYER_GLOD_CHANGE,n.numid),!0}return!1},e.prototype.getPlayerNums=function(){for(var t=0,e=0;e<n.MAX_PLAYER;++e)this._players[e]&&this._players[e].numid>0&&t++;return t},i([jsClass],e)}(c.BaseModel);n.PlayerInfoModel=g,cc.systemEvent.once("GameRoot.inited",function(){l.ModelRoot.instance.add(g)}),cc._RF.pop()},{"../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Model/BaseModel":"BaseModel","../../../Framework/Root/ModelRoot":"ModelRoot","../../Base/Data/DataConstant":"DataConstant","../../Base/Data/DataSound":"DataSound","../../Base/Utils/UtilTool":"UtilTool","../../UserInfo/UserInfoModel":"UserInfoModel","../GuanDan/GameEvent":"GameEvent","../GuanDan/Model/GameModel":"GameModel","./GameCommonModel":"GameCommonModel"}],PokerAlgorithm:[function(t,e,n){"use strict";cc._RF.push(e,"a2326hnKiBN1aD6S+dPuW+L","PokerAlgorithm");var o,a=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.PokerAlgorithm=void 0;var i=t("./DefaultPokerCardsConst"),r=t("../CommonFunc/ToolLuaFunc"),s=function(){function t(){}var e;return e=t,t.ResetCards=function(t){t=t||0;for(var e={},n=i.PokerCardValues.Card_2;n<=i.PokerCardValues.Card_DaWang;n++){var o={count:0};if(n<=i.PokerCardValues.Card_A)for(var a=i.PokerCardColor.FangKuai;a<=i.PokerCardColor.HeiTao;a++)o[a]=t,o.count=o.count+t;else o.count=t,o[i.PokerCardColor.Wang]=t;e[n]=o}return e},t.ArrangeCards=function(t){var e={};for(var n in t){var o=this.GetCardValueAndColor(t[n]),a=o[0],r=o[1];if(null==e[a])if(e[a]={count:0},a<=i.PokerCardValues.Card_A)for(var s=i.PokerCardColor.FangKuai;s<=i.PokerCardColor.HeiTao;s++)e[a][s]=0;else a<=i.PokerCardValues.Card_DaWang&&(e[a][i.PokerCardColor.Wang]=0);e[a][r]=e[a][r]+1,e[a].count=e[a].count+1}return e},t.GetCardValueAndColor=function(t){if(t===i.PokerCards.DaWang)return[i.PokerCardValues.Card_DaWang,i.PokerCardColor.Wang];if(t===i.PokerCards.XiaoWang)return[i.PokerCardValues.Card_XiaoWang,i.PokerCardColor.Wang];if(null!=t&&t<i.PokerCards.XiaoWang&&t>i.PokerCards.None){var e=Math.floor((t-1)/13)+1,n=Math.floor((t-1)%13);return 0==n&&(n+=13),[n,e]}return[0,0]},t.GetCardFromValueAndColor=function(t,e){return t===i.PokerCardValues.Card_DaWang?i.PokerCards.DaWang:t===i.PokerCardValues.Card_XiaoWang?i.PokerCards.XiaoWang:t<=i.PokerCardValues.Card_DaWang&&t>i.PokerCardValues.None&&e>0&&e<=4?((t+=1)>13&&(t-=13),13*(e-1)+t):0},t.CardsCopy=function(t){var e={};for(var n in t){var o={},a=t[n];o.count=a.count;var r=i.PokerCardColor.FangKuai,s=i.PokerCardColor.HeiTao;Number(n)>i.PokerCardValues.Card_A&&(r=i.PokerCardColor.Wang,s=i.PokerCardColor.Wang);for(var c=r;c<=s;c++)o[c]=a[c];e[n]=o}return e},t.GetColorName=function(t){return null!=t&&t>i.PokerCardColor.None&&t<=i.PokerCardColor.Wang?e.ColorName[t]:i.PokerCardColor.None},t.GetValueName=function(t){return null!=t&&t>i.PokerCardValues.None&&t<i.PokerCardValues.Card_J?String(t+1):t==i.PokerCardValues.Card_J?"J":t==i.PokerCardValues.Card_Q?"Q":t==i.PokerCardValues.Card_K?"K":t==i.PokerCardValues.Card_A?"A":t==i.PokerCardValues.Card_XiaoWang?"xiaowang":t==i.PokerCardValues.Card_DaWang?"dawang":"undefine"},t.GetCardsTypeName=function(t){return null!=e.CardsTypeName[t]?e.CardsTypeName[t]:"undefine-"+String(t)+" "},t.GetCardName=function(t){var n=e.GetCardValueAndColor(t),o=n[0],a=n[1];return e.GetColorName(a)+e.GetValueName(o)},t.GetCardsString=function(t){var n="";for(var o in t)n=n+e.GetCardName(t[o])+",";return n},t.GetHandCardsString=function(t){for(var n="",o=i.PokerCardValues.Card_2;o<=i.PokerCardValues.Card_A;o++)if(null!=t[o]){if(n=n+"level "+e.GetValueName(o)+": ",null!=t[o]&&t[o].count>0)for(var a=i.PokerCardColor.FangKuai;a<=i.PokerCardColor.HeiTao;a++)for(var r=1;r<=t[o][a];r++)n=n+e.GetColorName(a)+e.GetValueName(o)+"  ";n+="\r\n"}for(n+="level Wang: ",o=i.PokerCardValues.Card_XiaoWang;o<=i.PokerCardValues.Card_DaWang;o++)if(null!=t[o])for(a=1;a<=t[o].count;a++)n=n+e.GetValueName(o)+"  ";return n},t.GetSortTableWithKey=function(t){return Object.keys(t)},t.checkLengthIsSame=function(t,n){return e.getListLength(t)===e.getListLength(n)},t.getListLength=function(t){return t?r.ToolLuaFunc.getListLength(t):0},t.DeleteRepeatedCards=function(t){for(var n={},o=e.getListLength(t),a=0,i=1;i<=o;i++)t[i]&&(e.IsRepeatedCards(t[i],n)||(n[++a]=t[i]));return n},t.IsRepeatedCards=function(t,e){if(t.type==i.PokerCardsType.TongHuaShun)return!1;for(var n in e){var o=e[n];if(o.maxCard==t.maxCard&&o.type==t.type)return!0}return!1},t.IsRepeatedCards_old=function(t,e){for(var n in e){var o=e[n];if(this.IsSameCards(t,o.cards))return!0}return!1},t.IsSameCards=function(t,e){if(this.checkLengthIsSame(t,e))return!1;var n={};for(var o in t)null==n[i=t[o]]?n[i]=1:n[i]=n[i]+1;var a={};for(var o in e){var i;null==a[i=e[o]]?a[i]=1:a[i]=a[i]+1}for(var o in n)if(null==a[o]||a[o]!=n[o])return!1;return!0},t.GetCardCnt=function(t,e,n){return null!=t[e]&&null!=t[e][n]?t[e][n]:0},t.DeleteCardCnt=function(t,e,n,o){null!=t[e]&&null!=t[e][n]&&(t[e][n]=t[e][n]-o,t[e].count=t[e].count-o)},t.DeleteCard=function(t,n){var o=e.GetCardValueAndColor(n),a=o[0],i=o[1];null!=t[a]&&null!=t[a][i]&&(t[a][i]=t[a][i]-1,t[a].count=t[a].count-1)},t.DeleteCards=function(t,n){for(var o=e.getListLength(n),a=1;a<=o;a++)e.DeleteCard(t,n[a])},t.ClearCardCnt=function(t,e,n){null!=t[e]&&null!=t[e][n]&&(t[e].count=t[e].count-t[e][n],t[e][n]=0)},t.AppendPlayCardsToList=function(t,n,o){null==t[n]&&(t[n]={}),0!=e.getListLength(t[n])&&t[n][1].type==o.type&&e.getListLength(t[n][1].cards)==e.getListLength(o.cards)||(t[n][e.getListLength(t[n])+1]=o)},t.FindWangZha=function(t,n,o,a,r,s){if((null==s||s.type!=i.PokerCardsType.WangZha)&&null!=t[i.PokerCardValues.Card_XiaoWang]&&2==t[i.PokerCardValues.Card_XiaoWang].count&&null!=t[i.PokerCardValues.Card_DaWang]&&2==t[i.PokerCardValues.Card_DaWang].count){var c={maxCard:i.PokerCardValues.Card_DaWang,type:i.PokerCardsType.WangZha,levelCard:a,cards:{1:i.PokerCards.XiaoWang,2:i.PokerCards.XiaoWang,3:i.PokerCards.DaWang,4:i.PokerCards.DaWang}};e.AppendPlayCardsToList(o,200,c),n&&e.DeleteCards(t,c.cards)}},t.FindZhaDan=function(t,n,o,a,r,s){var c=0,l=4;for(var u in a=a||-1,null!=s&&(s.type>=i.PokerCardsType.SiZhang&&s.type<=i.PokerCardsType.ShiZhang||s.type==i.PokerCardsType.TongHuaShun)&&(s.maxCard==a||s.type==i.PokerCardsType.TongHuaShun?(c=0,l=s.cards.length+1):(c=s.maxCard,l=s.cards.length)),t){var d=Number(u),p=t[d],h=e.GetCardCnt(t,a,r),_=d;_==a&&(_=i.PokerCardValues.Card_A+1);var f=0,m=!1;if(Number(d)<=i.PokerCardValues.Card_A&&(t[d].count>l||t[d].count==l&&Number(_)>c)?m=!0:d!=a&&Number(d)<=i.PokerCardValues.Card_A&&(p.count+h>l||p.count+h==l&&Number(d)>c)&&(m=!0,f=h),f>0){var g=l-p.count;f=Number(d)>c?g:g+1}if(m){for(var y={maxCard:d,type:p.count+f,levCardCount:f,cards:{},levelCard:a},I=i.PokerCardColor.FangKuai;I<=i.PokerCardColor.HeiTao;I++)for(var C=e.GetCardFromValueAndColor(d,I),M=1;M<=p[I];M++)y.cards[e.getListLength(y.cards)+1]=C;for(I=1;I<=f;I++)C=e.GetCardFromValueAndColor(a,r),y.cards[e.getListLength(y.cards)+1]=C;var v=p.count+f-3;v>2&&(v+=4);var E=_+15*v;e.AppendPlayCardsToList(o,E,y),n&&e.DeleteCards(t,y.cards)}}},t.FindTongHuaShun=function(t,n,o,a,r,s){a=a||-1;var c=0;null!=s&&s.type==i.PokerCardsType.TongHuaShun&&(c=s.maxCard);for(var l=i.PokerCardColor.FangKuai;l<=i.PokerCardColor.HeiTao;l++)for(var u=0,d=0,p=0,h=i.PokerCardValues.Card_A;h<=i.PokerCardValues.Card_A;){var _=e.GetCardCnt(t,a,r);if(null==t[h]||h<c-3)h-=u,u=0,d=0;else if(t[h][l]>0){var f=!0;h==a&&l==r&&(d+=1)>_&&(h-=u,u=0,d=0,f=!1),f&&(u+=1)}else _-d>0&&(0!=u||h==i.PokerCardValues.Card_A-4)?(u+=1,d+=1):(h-=u,u=0,d=0);if(5==u&&h>c){for(var m={maxCard:h,type:i.PokerCardsType.TongHuaShun,levCardCount:d,levelCard:a,cards:{}},g=h-5+1,y=g;y<=h;y++){var I=y;I<1&&(I+=13);var C=0,M=0;t[I][l]>0?(C=I,M=l):(C=a,M=r);var v=e.GetCardFromValueAndColor(C,M);m.cards[e.getListLength(m.cards)+1]=v,n&&(t[C][M]=t[C][M]-1,t[C].count=t[C].count-1)}var E=4*h+45+l;e.AppendPlayCardsToList(o,E,m),u=0,h=g,d=0}h+=1,0==p&&h>i.PokerCardValues.Card_A&&(h-=13,p=1)}},t.FindShunZiWithSize=function(t,n,o,a,r,s,c,l){var u=0;null!=l&&(u=l.maxCard);for(var d=e.GetCardCnt(t,s,c),p=0,h=0,_=0,f=0,m=i.PokerCardValues.Card_A;m<=i.PokerCardValues.Card_A;){var g=!0,y=0;if(null!=t[m]&&(y=t[m].count),m<u-r+2?g=!0:m!=s?y>=a?(g=!1,p+=1):y+(d-h)>=a&&(0!=p||m==i.PokerCardValues.Card_A-r+1||y>0)?(g=!1,p+=1,h=h+a-y):g=!0:0==p&&d==y&&m<i.PokerCardValues.Card_A-r+1?g=!0:y-h>=a?(g=!1,p+=1,y-d<a&&(h+=a-(y-d))):g=!0,g?(m-=p,d=e.GetCardCnt(t,s,c),p=0,h=0,_=0):y>a&&(_+=y<4?13:15*(y+1)),p==r){for(var I={maxCard:m,type:10+a,levCardCount:h,levelCard:s,cards:{}},C=m-r+1,M=C;M<=m;M++){var v=M;v<1&&(v+=13);var E=0;if(null!=t[v])for(var A=1;A<=4;A++){if(v!=s||A!=c)for(var P=1;P<=t[v][A]&&!(E>=a);P++){E+=1;var b=e.GetCardFromValueAndColor(v,A);I.cards[e.getListLength(I.cards)+1]=b}if(E>=a)break}}for(M=1;M<=h;M++)b=e.GetCardFromValueAndColor(s,c),I.cards[e.getListLength(I.cards)+1]=b;n&&e.DeleteCards(t,I.cards),_+=C,m>u&&e.AppendPlayCardsToList(o,_,I),m=m-p+1,d=e.GetCardCnt(t,s,c),p=0,h=0,_=0}m+=1,0==f&&m>i.PokerCardValues.Card_A&&(m-=13,f=1)}},t.GetValueWithLevelCard=function(t,e){return t==e?i.PokerCardValues.Card_A+1:t>i.PokerCardValues.Card_A?t+1:t},t.FindDanPaiWithSize=function(t,n,o,a,r,s,c){r=r||-1,s=s||-1;var l=0;null!=c&&(l=e.GetValueWithLevelCard(c.maxCard,r));for(var u=i.PokerCardValues.Card_2;u<=i.PokerCardValues.Card_DaWang;u++){var d=e.GetCardCnt(t,r,s),p=0,h=!1,_=e.GetValueWithLevelCard(u,r);if(null==t[u]||_<=l||(t[u].count>=a?h=!0:a>1&&u!=r&&u<=i.PokerCardValues.Card_A&&t[u].count+d>=a&&(h=!0,p=a-t[u].count)),h){var f={levelCard:r,maxCard:u,type:a,levCardCount:p,cards:{}},m=u-1,g=0,y={1:i.PokerCardColor.FangKuai,2:i.PokerCardColor.MeiHua,3:i.PokerCardColor.HongXin,4:i.PokerCardColor.HeiTao};u>i.PokerCardValues.Card_A&&(y={1:i.PokerCardColor.Wang},m=u);for(var I=e.getListLength(y),C=1;C<=I;C++)if(y[C]==s){var M=y[e.getListLength(y)];y[e.getListLength(y)]=s,y[C]=M;break}for(I=e.getListLength(y),C=1;C<=I&&!(g>=a);C++)for(var v=y[C],E=e.GetCardCnt(t,u,v),A=1;A<=E&&!(g>=a);A++){var P=e.GetCardFromValueAndColor(u,v);f.cards[e.getListLength(f.cards)+1]=P,g+=1}for(C=1;C<=p;C++)P=e.GetCardFromValueAndColor(r,s),f.cards[e.getListLength(f.cards)+1]=P;r==u&&(m=13),t[u].count>a&&(t[u].count<4?m+=13:m+=15*(t[u].count+1)),m+=30*p,e.AppendPlayCardsToList(o,m,f),n&&e.DeleteCards(t,f.cards)}}},t.FindGangBan=function(t,n,o,a,i,r){e.FindShunZiWithSize(t,n,o,3,2,a,i,r)},t.FindSanLianDui=function(t,n,o,a,i,r){e.FindShunZiWithSize(t,n,o,2,3,a,i,r)},t.FindSanZhang=function(t,n,o,a,i,r){e.FindDanPaiWithSize(t,n,o,3,a,i,r)},t.FindDuiZi=function(t,n,o,a,i,r){e.FindDanPaiWithSize(t,n,o,2,a,i,r)},t.FindShunZi5=function(t,n,o,a,i,r){e.FindShunZiWithSize(t,n,o,1,5,a,i,r)},t.FindDanZhang=function(t,n,o,a,i,r){e.FindDanPaiWithSize(t,n,o,1,a,i,r)},t.FindSanDaiErWithBaiDa=function(t,n,o,a,s,c){if(null!=c)for(var l in e.FindSanZhang(t,n,o,a,s,c),o)for(var u=o[l],d=e.getListLength(u),p=1;p<=d;p++){var h=e.CardsCopy(t);e.DeleteCards(h,u[p].cards);var _={};if(e.FindDuiZi(h,!1,_,a,s,null),null!=r.ToolLuaFunc.next_lua(_)){var f=e.GetSortTableWithKey(_);u[p].type=i.PokerCardsType.SanDaiEr;for(var m=_[f[0]][1],g=1;g<=e.getListLength(m.cards);g++)u[p].cards[e.getListLength(u[p].cards)+1]=m.cards[g]}else delete o[l][p]}},t.FindShuangWangZha=function(t,n,o,a,r,s){if((null==s||s.type!=i.PokerCardsType.WangZha)&&null!=t[i.PokerCardValues.Card_XiaoWang]&&1==t[i.PokerCardValues.Card_XiaoWang].count&&null!=t[i.PokerCardValues.Card_DaWang]&&1==t[i.PokerCardValues.Card_DaWang].count){var c={maxCard:i.PokerCardValues.Card_DaWang,type:i.PokerCardsType.WangZha,levelCard:a,cards:{1:i.PokerCards.XiaoWang,2:i.PokerCards.DaWang}};e.AppendPlayCardsToList(o,200,c),n&&e.DeleteCards(t,c.cards)}},t.FindShunZiWithoutLevelCard=function(t,n,o,a,r,s){var c=0;null!=s&&(c=s.maxCard,r=Math.floor(e.getListLength(s.cards)/a));for(var l=0,u=0,d=i.PokerCardValues.Card_3;d<=i.PokerCardValues.Card_A;){if(null!=t[d]&&t[d].count>=a&&(l+=1,t[d].count>a?t[d].count<4?u+=13:u+=15*(t[d].count+1):l=0,u=0),l==r){for(var p={maxCard:d,type:10+a,cards:{}},h=d-r+1,_=h;_<=d;_++){var f=_;f<1&&(f+=13);for(var m=0,g=1;g<=4;g++){for(var y=1;y<=t[f][g]&&!(m>=a);y++){m+=1;var I=e.GetCardFromValueAndColor(f,g);p.cards[e.getListLength(p.cards)+1]=I}if(m>=a)break}}u+=h,d>c&&e.AppendPlayCardsToList(o,u,p),d=d-l+1,l=0,u=0}d+=1}},t.FindLianDui=function(t,n,o,a,i,r){e.FindShunZiWithoutLevelCard(t,n,o,2,3,r)},t.FindLianSanZhang=function(t,n,o,a,i,r){e.FindShunZiWithoutLevelCard(t,n,o,3,2,r)},t.FindDanShun=function(t,n,o,a,i,r){e.FindShunZiWithoutLevelCard(t,n,o,1,5,r)},t.FindSanDaiErAndSanDaiYiAndFeiJi=function(t,n,o,a,r,s){if(null!=s){var c=e.ArrangeCards(s.cards),l=e.FindShunZiMaxLengthWithSize(c,3);if(null!=l){var u=Math.floor(e.getListLength(l.cards)/3);if(1==u)e.FindSanZhang(t,n,o,a,r,l);else if(u>1)if(r<=0)e.FindLianSanZhang(t,n,o,a,r,l);else{if(2!=u)return;e.FindGangBan(t,n,o,a,r,l)}var d=Math.floor(e.getListLength(s.cards)/u)-3;for(var p in o)for(var h=o[p],_=1;_<=e.getListLength(h);_++){var f=e.CardsCopy(t);e.DeleteCards(f,h[_].cards);var m=e.GetDaiPaiWithCnt(f,u,d,a,r);if(null!=m&&this.getListLength(m)>0){for(var g=1;g<=e.getListLength(m);g++)h[_].cards[e.getListLength(h[_].cards)+1]=m[g];1==u?h[_].type=1==d?i.PokerCardsType.SanDaiYi:i.PokerCardsType.SanDaiEr:u>1?h[_].type=i.PokerCardsType.FeiJi:delete o[p][_]}}}}},t.FindSiDaiEr=function(t,n,o,a,r,s){if(null!=s){var c=Math.floor((e.getListLength(s.cards)-4)/2);e.FindZhaDan(t,n,o,a,r,null);var l={};for(var u in o)for(var d=o[u],p=1;p<=e.getListLength(d);p++)if(o[u][p].type==i.PokerCardsType.SiZhang&&o[u][p].maxCard>s.maxCard){var h=e.CardsCopy(t);e.DeleteCards(h,d[p].cards);var _=e.GetDaiPaiWithCnt(h,2,c,a,r);if(null!=_&&this.getListLength(_)>0){for(var f={maxCard:o[u][p].maxCard,type:i.PokerCardsType.SiDaiEr,cards:{}},m=1;m<=e.getListLength(d[p].cards);m++)f.cards[e.getListLength(f.cards)+1]=d[p].cards[m];for(m=1;m<=e.getListLength(_);m++)f.cards[e.getListLength(f.cards)+1]=_[m];l[u]=f}}for(var u in l)o[u][e.getListLength(o[u])+1]=l[u]}},t.FindLianDui2=function(t,n,o,a,i,r){e.FindShunZiWithoutLevelCard(t,n,o,2,2,r)},t.FindSanAZha=function(t,n,o,a,r,s){if((null==s||s.type!=i.PokerCardsType.SanAZha)&&null!=t[i.PokerCardValues.Card_A]&&3==t[i.PokerCardValues.Card_A].count){for(var c={maxCard:i.PokerCardValues.Card_A,type:i.PokerCardsType.SanAZha,levelCard:a,cards:{}},l=i.PokerCardColor.FangKuai;l<=i.PokerCardColor.HeiTao;l++)for(var u=1;u<=t[i.PokerCardValues.Card_A][l];u++){var d=e.GetCardFromValueAndColor(i.PokerCardValues.Card_A,l);c.cards[e.getListLength(c.cards)+1]=d}e.AppendPlayCardsToList(o,200,c),n&&e.DeleteCards(t,c.cards)}},t.FindSiDaiYiZha=function(t,n,o,a,r,s){if(null!=s){var c=e.getListLength(s.cards)-4;e.FindZhaDan(t,n,o,a,r,null);var l={};for(var u in o)for(var d=o[u],p=1;p<=e.getListLength(d);p++)if(o[u][p].type==i.PokerCardsType.SiZhang&&o[u][p].maxCard>s.maxCard){var h=e.CardsCopy(t);e.DeleteCards(h,d[p].cards);var _=e.GetDaiPaiWithCnt(h,1,c,a,r);if(null!=_&&e.getListLength(_)>0){for(var f={maxCard:o[u][p].maxCard,type:i.PokerCardsType.SiDaiEr,cards:{}},m=1;m<=e.getListLength(d[p].cards);m++)f.cards[e.getListLength(f.cards)+1]=d[p].cards[m];for(m=1;m<=e.getListLength(_);m++)f.cards[e.getListLength(f.cards)+1]=_[m];l[u]=f}}for(var u in l)o[u][e.getListLength(o[u])+1]=l[u]}},t.FindSanDaiLiangDan=function(t,n,o,a,r,s){if(null!=s)for(var c in e.FindSanZhang(t,n,o,a,r,s),o)for(var l=o[c],u=1;u<=e.getListLength(l);u++){var d=e.CardsCopy(t);e.DeleteCards(d,l[u].cards);var p=e.GetDaiPaiWithCnt(d,2,1,a,r);if(null!=p&&e.getListLength(p)>0){for(var h=1;h<=e.getListLength(p);h++)l[u].cards[e.getListLength(l[u].cards)+1]=p[h];l[u].type=i.PokerCardsType.SanDaiEr}else delete o[c][u]}},t.FindShunZiMaxLengthWithSize=function(t,n){for(var o=null,a=0,r=i.PokerCardValues.Card_3;r<=i.PokerCardValues.Card_A+1;){if(null!=t[r]&&t[r].count>=n&&r<=i.PokerCardValues.Card_A)a+=1;else{if(a>0&&(null==o||a>=this.getListLength(o.cards)/n)){o={maxCard:r-1,type:10+n,cards:{}},1==a&&(o.type=n);for(var s=r-a;s<=r-1;s++){var c=s;c<1&&(c+=13);for(var l=0,u=1;u<=4;u++){for(var d=1;d<=t[c][u]&&!(l>=n);d++){l+=1;var p=e.GetCardFromValueAndColor(c,u);o.cards[this.getListLength(o.cards)+1]=p}if(l>=n)break}}}a=0}r+=1}return o},t.GetDaiPaiWithCnt=function(t,n,o,a,i){for(var s={},c=1;c<=n;c++){var l={};if(e.FindDanPaiWithSize(t,!1,l,o,a,i,null),null==r.ToolLuaFunc.next_lua(l)){s={};break}for(var u=l[e.GetSortTableWithKey(l)[0]][1],d=1;this.getListLength(u.cards);d++)s[this.getListLength(s)+1]=u.cards[d];e.DeleteCards(t,u.cards)}return s},t.ColorName=["None","FangKuai","MeiHua","HongXin","HeiTao","Wang"],t.CardsTypeName=((o={})[i.PokerCardsType.Illegitimate]="Illegitimate",o[i.PokerCardsType.DanZhang]="DanZhang",o[i.PokerCardsType.DuiZi]="DuiZi",o[i.PokerCardsType.SanZhang]="SanZhang",o[i.PokerCardsType.SiZhang]="ZhaDan4",o[i.PokerCardsType.WuZhang]="ZhaDan5",o[i.PokerCardsType.LiuZhang]="ZhaDan6",o[i.PokerCardsType.QiZhang]="ZhaDan7",o[i.PokerCardsType.BaZhang]="ZhaDan8",o[i.PokerCardsType.JiuZhang]="ZhaDan9",o[i.PokerCardsType.ShiZhang]="ZhaDan10",o[i.PokerCardsType.ShunZi]="ShunZi",o[i.PokerCardsType.LianDui]="LianDui",o[i.PokerCardsType.LianSan]="LianSanZhang",o[i.PokerCardsType.LianSi]="LianSi",o[i.PokerCardsType.LianWu]="LianWu",o[i.PokerCardsType.LianLiu]="LianLiu",o[i.PokerCardsType.LianQi]="LianQi",o[i.PokerCardsType.LianBa]="LianBa",o[i.PokerCardsType.HuoJian]="HuoJian",o[i.PokerCardsType.FeiJi]="FeiJi",o[i.PokerCardsType.SanDaiYi]="SanDaiYi",o[i.PokerCardsType.SanDaiEr]="SanDaiEr",o[i.PokerCardsType.SiDaiEr]="SiDaiEr",o[i.PokerCardsType.SiDaiSan]="SiDaiSan",o[i.PokerCardsType.SanDaiLiangDanZhang]="FeiJi",o[i.PokerCardsType.SanAZha]="SanAZha",o[i.PokerCardsType.TongHuaShun]="TongHuaShun",o[i.PokerCardsType.WangZha]="WangZha",o),e=a([jsClass("PokerAlgorithm")],t)}();n.PokerAlgorithm=s,cc._RF.pop()},{"../CommonFunc/ToolLuaFunc":"ToolLuaFunc","./DefaultPokerCardsConst":"DefaultPokerCardsConst"}],PopupConfig:[function(t,e,n){"use strict";cc._RF.push(e,"3431cQcyKxNK7eMqz0NG5Ry","PopupConfig");var o,a=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function r(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.PopupConfig=void 0;var s,c=t("../../../../Framework/Utils/HttpUtil"),l=t("../../Data/DataConstant"),u=t("../../Utils/UtilTool");(function(t){t.NEWPLAYER_GIFT="NewPlayerGift",t.ACTIVITY_CENTER="Activity",t.SIGNIN_ACTIVITY="SignInActivity",t.SHARE_ACTIVITY="ActivityShare",t.POP_AD_ACTIVITY="ActivityAdPop",t.LUCKY_TURNTABLE="LuckyTurnTable",t.TENYEAR_BOX="TenYearBox",t.QUESTIONNAIRE_POP="QuestionnairePop",t.FRIENDTEAM_RECORD="FriendTeamRecord",t.FRIENDTEAM_GUID="FriendTeamGuide",t.QUESTIONNAIRE_NEW="QUESTIONNAIRE_NEW",t.YEAR_BEAST="YEAR_BEAST",t.SKY_FALL_TICKET="SKY_FALL_TICKET"})(s||(s={}));var d=function(){function t(){}return t.updateList=function(){var t=this;this.reqCloudConfig("PopupConfig").then(function(e){console.log("PopupConfig:",e),e&&(u.UtilTool.setData(t.enterHallList,e.enterHallList),u.UtilTool.setData(t.enterHallList_dailyFirst,e.enterHallList_dailyFirst),u.UtilTool.setData(t.enterHallList_newbie,e.enterHallList_newbie),u.UtilTool.setData(t.backToHallList,e.backToHallList))},function(t){return console.error(t)})},t.reqCloudConfig=function(t,e){return void 0===e&&(e=2),i(this,void 0,Promise,function(){var n=this;return r(this,function(o){switch(o.label){case 0:return[4,c.HttpUtil.get(l.DataConstant.RES_PATH.CONFIG+"/"+t+".json").catch(function(o){if(e)return n.reqCloudConfig(t,e-1);throw o})];case 1:return[2,o.sent()]}})})},t.ITEMS=((o={})[s.NEWPLAYER_GIFT]={className:"HallModel"},o[s.ACTIVITY_CENTER]={className:"ActivityModel"},o[s.SIGNIN_ACTIVITY]={className:"SignActivityModel"},o[s.SHARE_ACTIVITY]={className:"ActivityShareModel"},o[s.POP_AD_ACTIVITY]={className:"ActivityAdPopModel"},o[s.LUCKY_TURNTABLE]={className:"LuckyTurnTableModel"},o[s.TENYEAR_BOX]={className:"TenYearBoxModel"},o[s.QUESTIONNAIRE_POP]={className:"QuestionnaireModel"},o[s.QUESTIONNAIRE_NEW]={className:"QuestionnaireModel",popupFunc:"autoPopupNew"},o[s.FRIENDTEAM_RECORD]={className:"FriendTeamModel"},o[s.FRIENDTEAM_GUID]={className:"FriendTeamModel",popupFunc:"popupTeamGuide",stopFunc:"stopPopupTeamGuide"},o[s.YEAR_BEAST]={className:"YearBeastModel"},o[s.SKY_FALL_TICKET]={className:"MatchShareModel"},o),t.enterHallList={popupTimesMax:3,list:[s.SKY_FALL_TICKET,s.QUESTIONNAIRE_NEW,s.ACTIVITY_CENTER,s.POP_AD_ACTIVITY,s.LUCKY_TURNTABLE]},t.enterHallList_dailyFirst={popupTimesMax:2,list:[s.SKY_FALL_TICKET,s.QUESTIONNAIRE_NEW,s.ACTIVITY_CENTER,s.POP_AD_ACTIVITY,s.LUCKY_TURNTABLE]},t.enterHallList_newbie={popupTimesMax:1,list:[s.NEWPLAYER_GIFT]},t.backToHallList={popupTimesMax:1,list:[s.QUESTIONNAIRE_NEW,s.FRIENDTEAM_RECORD,s.TENYEAR_BOX,s.SIGNIN_ACTIVITY,s.LUCKY_TURNTABLE,s.SHARE_ACTIVITY]},t.enterGoldInlineTeamList={popupTimesMax:1,list:[s.FRIENDTEAM_GUID]},t.enterHallList_goldInlineTeam={popupTimesMax:2,list:[s.TENYEAR_BOX,s.ACTIVITY_CENTER,s.LUCKY_TURNTABLE]},t.backHallList_goldInlineTeam={popupTimesMax:1,list:[s.TENYEAR_BOX,s.LUCKY_TURNTABLE,s.SIGNIN_ACTIVITY,s.SHARE_ACTIVITY]},a([jsClass],t)}();n.PopupConfig=d,cc._RF.pop()},{"../../../../Framework/Utils/HttpUtil":"HttpUtil","../../Data/DataConstant":"DataConstant","../../Utils/UtilTool":"UtilTool"}],PopupManager:[function(t,e,n){"use strict";cc._RF.push(e,"f22c4nVqJJAcqt/ZOA2Ts6H","PopupManager");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.PopupManager=void 0;var s=t("../../../../Framework/Manager/BaseManager"),c=t("../../../../Framework/Manager/CoroutineManager"),l=t("../../../../Framework/Manager/UIManager"),u=t("../../../../Framework/Model/BaseModel"),d=t("../../../../Framework/Root/ManagerRoot"),p=t("../../../../Framework/UI/BaseUI"),h=t("../../Data/DataLocalStorageKey"),_=t("../../Utils/UtilTime"),f=t("../../../Hall/HallUI"),m=t("../../../UserInfo/UserInfoModel"),g=t("./PopupConfig"),y=t("../../../../Framework/Manager/EventManager"),I=t("../../Data/DataEvent"),C=t("../../Data/DataBfConfig"),M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return d.ManagerRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){g.PopupConfig.updateList(),y.EventManager.instance.on(I.DataEvent.StopManagerPop,this,this.onStopManagerPop)},e.prototype.onStopManagerPop=function(){this._popupCo&&(c.CoroutineManager.instance.stopCo(this._popupCo),this._popupCo=null)},e.prototype.autoPopup=function(t,e){console.log("PopupManager.autoPopup\uff1a",t,e),this._popupCo&&c.CoroutineManager.instance.stopCo(this._popupCo),this._popupCo=c.CoroutineManager.instance.startCo(this.doAutoPopup(t,e),this)},e.prototype.doAutoPopup=function(t,e){var n,o,a,i,s,c,u;return r(this,function(r){switch(r.label){case 0:n=t.list,o=t.popupTimesMax,a=e,i=0,s=n.length,r.label=1;case 1:if(!(i<s&&a<o))return[3,10];if(c=n[i],!(u=this.getPopupFunc(c)))return[3,9];this._popupKey=c,u(),r.label=2;case 2:return l.UIManager.instance.hasTopColliderKey("autoPopup")?[4,null]:[3,4];case 3:return r.sent(),[3,2];case 4:if(!(l.UIManager.instance.list([p.UIType.Window]).length>0))return[3,8];a++,r.label=5;case 5:return[4,null];case 6:r.sent(),r.label=7;case 7:if(l.UIManager.instance.list([p.UIType.Window]).length>0)return[3,5];r.label=8;case 8:if(l.UIManager.instance.getScene().tag!==f.HallUI)return[3,10];r.label=9;case 9:return++i,[3,1];case 10:return this._popupCo=null,this._popupKey=null,[2]}})},e.prototype.getPopupFunc=function(t){var e=g.PopupConfig.ITEMS[t],n=e.className,o=e.popupFunc||"autoPopup",a=cc.js.getClassByName(n),i=null==a?void 0:a.instance;return i instanceof u.BaseModel&&i[o]?i[o].bind(i):null},e.prototype.stopPopup=function(){if(this.onStopManagerPop(),this._popupKey){var t=this.getStopPopupFunc(this._popupKey);t&&t(),this._popupKey=null}},e.prototype.getStopPopupFunc=function(t){var e=g.PopupConfig.ITEMS[t],n=e.className,o=e.popupFunc||"stopPopup",a=cc.js.getClassByName(n),i=null==a?void 0:a.instance;return i instanceof u.BaseModel&&i[o]?i[o].bind(i):null},e.prototype.popupOnEnterHall=function(t,e){if(console.log("popupOnBackToHall:",e),!e&&C.DataBfConfig.canForcePop){var n,o=m.UserInfoModel.instance.isNewRegisterPlayer();if(o)n=g.PopupConfig.enterHallList_newbie;else{var a=h.DataLocalStorage.getLastAutoPopup();n=!a.isNewPlayer&&_.UtilTime.isTodayDate(a.time)?g.PopupConfig.enterHallList:g.PopupConfig.enterHallList_dailyFirst}h.DataLocalStorage.setLastAutoPopup({isNewPlayer:o,time:Date.now()}),this.autoPopup(n,t)}},e.prototype.popupOnBackToHall=function(t){console.log("popupOnBackToHall:",t),t||C.DataBfConfig.canForcePop&&this.autoPopup(g.PopupConfig.backToHallList,0)},e.prototype.popupOnEnterToGoldInlineTeam=function(t){console.log("popupOnEnterToGoldInlineTeam:",t),t||this.autoPopup(g.PopupConfig.enterGoldInlineTeamList,0)},e.prototype.popupOnEnterToHall_goldInlineTeam=function(t,e){var n;console.log("popupOnEnterToHall_goldInlineTeam:",e),e||(n=m.UserInfoModel.instance.isNewRegisterPlayer()?g.PopupConfig.enterHallList_newbie:g.PopupConfig.enterHallList_goldInlineTeam,this.autoPopup(n,t))},e.prototype.popupOnBackToHall_goldInlineTeam=function(t){console.log("popupOnBackToHall_goldInlineTeam:",t),t||this.autoPopup(g.PopupConfig.backHallList_goldInlineTeam,0)},i([jsClass],e)}(s.BaseManager);n.PopupManager=M,cc.systemEvent.on("GameRoot.inited",function(){d.ManagerRoot.instance.add(M)}),cc._RF.pop()},{"../../../../Framework/Manager/BaseManager":"BaseManager","../../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Manager/UIManager":"UIManager","../../../../Framework/Model/BaseModel":"BaseModel","../../../../Framework/Root/ManagerRoot":"ManagerRoot","../../../../Framework/UI/BaseUI":"BaseUI","../../../Hall/HallUI":"HallUI","../../../UserInfo/UserInfoModel":"UserInfoModel","../../Data/DataBfConfig":"DataBfConfig","../../Data/DataEvent":"DataEvent","../../Data/DataLocalStorageKey":"DataLocalStorageKey","../../Utils/UtilTime":"UtilTime","./PopupConfig":"PopupConfig"}],PrivacyDialogUI:[function(t,e,n){"use strict";cc._RF.push(e,"d4816Hdf8RGn7H+yVHT+5gk","PrivacyDialogUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.PrivacyDialogUI=void 0;var r=t("../../../../Framework/Manager/EventManager"),s=t("../../../../Framework/Manager/UIManager"),c=t("../../../../Framework/UI/FadeUI"),l=t("../../Data/DataConstant"),u=t("../../Data/DataEvent"),d=t("../../Data/DataLocalStorageKey"),p=t("../../Module/BfAnalytics/BfasManager"),h=t("../../Module/BfAnalytics/DataPointID"),_=t("../../../RuleAgreement/RuleAgreementUI"),f=t("../../../Setting/SettingUI"),m=t("./DialogUI"),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"willClearOnDestroy",{get:function(){return!1},enumerable:!1,configurable:!0}),e.getPkgName=function(){return l.DataConstant.PKG_COMMON},e.getCompName=function(){return cc.js.getClassName(this)+"_MainPanel"},e.uiBind=function(){},e.prototype.init=function(){this.initUI()},e.prototype.initUI=function(){var t=this.view.getChild("Window");t&&(t.getChild("cancelBtn").onClick(this.clickCancel,this),t.getChild("confirmBtn").onClick(this.clickConfirmBtn,this),t.getChild("userAgreementBtn").onClick(this.clickUserAgreementBtn,this),t.getChild("privateAgreementBtn").onClick(this.clickPrivateAgreementBtn,this))},e.prototype.clickCancel=function(){var t=this;p.BfasManager.instance.evtUserLinkPoint(h.UserConvertLinkPointID.PRIVACY_REJECT.eventid,h.UserConvertLinkPointID.PRIVACY_REJECT.eventName),this.view.visible=!1,s.UIManager.instance.open(m.DialogUI).then(function(e){p.BfasManager.instance.evtUserLinkPoint(h.UserConvertLinkPointID.POP_2_PRIVACY_AFETER_REJECT.eventid,h.UserConvertLinkPointID.POP_2_PRIVACY_AFETER_REJECT.eventName),e.initConfirmCancel({content:"\u62d2\u7edd\u540e\u5c06\u65e0\u6cd5\u8fdb\u5165\u6e38\u620f\u54e6!"}),e.cancelAction=function(){p.BfasManager.instance.evtUserLinkPoint(h.UserConvertLinkPointID.POP_2_PRIVACY_REJECT.eventid,h.UserConvertLinkPointID.POP_2_PRIVACY_REJECT.eventName),t.view.visible=!0},e.closeAction=function(){p.BfasManager.instance.evtUserLinkPoint(h.UserConvertLinkPointID.POP_2_PRIVACY_REJECT.eventid,h.UserConvertLinkPointID.POP_2_PRIVACY_REJECT.eventName),t.view.visible=!0},e.confirmAction=function(){p.BfasManager.instance.evtUserLinkPoint(h.UserConvertLinkPointID.POP_2_PRIVACY_AGREE.eventid,h.UserConvertLinkPointID.POP_2_PRIVACY_AGREE.eventName),t.onExitClick()}})},e.prototype.clickConfirmBtn=function(){p.BfasManager.instance.evtUserLinkPoint(h.UserConvertLinkPointID.PRIVACY_AGREE.eventid,h.UserConvertLinkPointID.PRIVACY_AGREE.eventName),localStorage.setItem(d.LocalStorageKey.USER_AGREE_AGREEMENGT,d.LocalStorageKey.USER_AGREE_AGREEMENGT),this.onExitClick(),r.EventManager.instance.emit(u.DataEvent.LoginGame)},e.prototype.clickUserAgreementBtn=function(){this.openUrlAgreementUI(f.RuleEnum.USER_XY)},e.prototype.clickPrivateAgreementBtn=function(){this.openUrlAgreementUI(f.RuleEnum.PRIVACY_POLICY)},e.prototype.openUrlAgreementUI=function(t){s.UIManager.instance.open(_.RuleAgreementUI).then(function(e){return e.init(t)})},i([jsClass],e)}(c.FadeUI);n.PrivacyDialogUI=g,cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Manager/UIManager":"UIManager","../../../../Framework/UI/FadeUI":"FadeUI","../../../RuleAgreement/RuleAgreementUI":"RuleAgreementUI","../../../Setting/SettingUI":"SettingUI","../../Data/DataConstant":"DataConstant","../../Data/DataEvent":"DataEvent","../../Data/DataLocalStorageKey":"DataLocalStorageKey","../../Module/BfAnalytics/BfasManager":"BfasManager","../../Module/BfAnalytics/DataPointID":"DataPointID","./DialogUI":"DialogUI"}],Processid:[function(t,e,n){"use strict";cc._RF.push(e,"87573ViK8dOIY65lBXDLIZv","Processid"),Object.defineProperty(n,"__esModule",{value:!0}),n.Processid=void 0,function(t){t[t.srs=0]="srs",t[t.game=1]="game",t[t.auth=3]="auth",t[t.label=18]="label",t[t.prop=19]="prop",t[t.tool=62]="tool",t[t.playerPlace=69]="playerPlace",t[t.clubLobby=76]="clubLobby",t[t.clubGame=77]="clubGame",t[t.im=88]="im",t[t.award=102]="award",t[t.cust=107]="cust",t[t.history=153]="history",t[t.custGuanDanProcess=166]="custGuanDanProcess",t[t.gradeRank=1011]="gradeRank"}(n.Processid||(n.Processid={})),cc._RF.pop()},{}],PropModule:[function(t,e,n){"use strict";cc._RF.push(e,"8c748igAo1P4ay/5PH/UVpe","PropModule"),Object.defineProperty(n,"__esModule",{value:!0}),n.PropModule=void 0;var o=t("../Network/SocketUtils"),a=t("../Network/protocol/ClubLobbyProtocol"),i=t("../Network/Base/Processid"),r=t("../../Utils/UtilClub"),s=t("../../../UserInfo/UserInfoModel"),c=t("../../Data/DataBfConfig"),l=function(){function t(){}return t.reqUseProp=function(t,e,n){var l=new a.ClubLobbyProtocol.ReqUseProps;l.appid=t;var u=new club.client.lobby.ReqUseProps.PropData({count:1,propid:e,gameid:c.DataBfConfig.gameID});l.props.push(u),o.SocketUtils.instance.notify(l),o.SocketUtils.instance.registerOnce(i.Processid.clubLobby,club.client.lobby.MSGID.RESP_USEPROPS,this,function(t){s.UserInfoModel.instance.updateProps(t.propertys);var e=r.UtilClub.dealClubErrorCode(t.errcode);n&&n(e.code)})},t}();n.PropModule=l,cc._RF.pop()},{"../../../UserInfo/UserInfoModel":"UserInfoModel","../../Data/DataBfConfig":"DataBfConfig","../../Utils/UtilClub":"UtilClub","../Network/Base/Processid":"Processid","../Network/SocketUtils":"SocketUtils","../Network/protocol/ClubLobbyProtocol":"ClubLobbyProtocol"}],ProtocolManager:[function(t,e,n){"use strict";cc._RF.push(e,"ca5f32RjwhB4rBXN/zTqRQq","ProtocolManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.ProtocolManager=void 0;var o,a,i,r=t("./Processid");(function(t){t[t.none=0]="none",t[t.encrypt=1]="encrypt",t[t.ver32=16384]="ver32",t[t.verPb=32768]="verPb"})(o||(o={})),function(t){t[t.flag=2]="flag",t[t.packet=2]="packet",t[t.xyid=2]="xyid",t[t.processid=2]="processid",t[t.appid=4]="appid",t[t.base=12]="base",t[t.full=24]="full",t[t.askid=4]="askid"}(a||(a={})),function(t){t[t.none=-1]="none",t[t.sucess=0]="sucess",t[t.failure=1]="failure",t[t.close=2]="close"}(i||(i={}));var s=function(){function t(){this._protocolMap={},this._gameProtocolMap={},this._gameProtocolMapExt={},this._processAppidMap={}}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gameId",{get:function(){return this._gameId},set:function(t){this._gameId=t},enumerable:!1,configurable:!0}),t.prototype.setProtocol=function(t,e,n){this._protocolMap[t]||(this._protocolMap[t]={}),this._protocolMap[t][e]=n},t.prototype.setGameProtocol=function(t,e){this._gameProtocolMap[t]=e},t.prototype.setGameProtocolExt=function(t,e,n){var o=this._gameProtocolMapExt[t];o||(this._gameProtocolMapExt[t]=o={}),o[e]=n},t.prototype.setProcess2Appid=function(t,e){console.warn("setProcess2Appid:"+e),this._processAppidMap[t]=e},t.prototype.getProcess2Appid=function(t){return this._processAppidMap[t]||0},t.prototype.setKey=function(t){this._encryption.setKey(t)},t.prototype.reset=function(){this._encryption&&this._encryption.resetKey()},t.prototype.init=function(){this._encryption=new bf33.Encrytion},t.prototype.encode=function(t,e){var n;this._encryption||this.init();try{n=t.pack()}catch(u){return console.error("pack err",t,u),null}var i=this._encryption.encrypt(n),r=new ArrayBuffer(a.base+i.length),s=new DataView(r);s.setUint16(0,o.none|o.encrypt|o.verPb,!0),s.setUint16(2,n.length,!0),s.setUint16(4,t.xyid,!0),s.setUint16(6,t.processid,!0),s.setUint32(8,e||this._processAppidMap[t.processid]||0,!0);for(var c=0;c<i.length;c++){var l=a.base+c;s.setUint8(l,i[c])}return s.buffer},t.prototype.decode=function(t){this._encryption||this.init();var e=new Uint8Array(t),n=new DataView(e.buffer),i=0,s=n.getUint16(i,!0);i+=a.flag;var c=n.getUint16(i,!0);i+=a.packet;var l=n.getUint16(i,!0);i+=a.xyid;var u=n.getUint16(i,!0);i+=a.processid;var d=n.getUint32(i,!0),p=!1,h=e.length,_=c,f=e.slice(a.base,a.base+c);if(1==(s&o.encrypt)&&(f=this._encryption.decrypt(f)),!this._protocolMap[u]||!this._protocolMap[u][l])return console.warn("\u672a\u627e\u5230\u534f\u8bae\u7ed3\u6784 processid = "+u+" xyid = "+l),{err:{processid:u,xyid:l,errId:1}};var m=new this._protocolMap[u][l];try{m.unpack(f)}catch(v){return console.error("\u89e3\u6790\u534f\u8bae\u5931\u8d25 \u53ef\u80fd\u662f\u670d\u52a1\u7aef\u4e0d\u652f\u6301protobuff",m,v),{err:{processid:u,xyid:l,errId:11,msg:v.message,flag:s,lenArr:h,lenPackage:_,appid:d}}}if(u==r.Processid.clubGame&&l==club.client.game.MSGID.PUSH_TOCLIENT){var g=m,y=g.msgid,I=g.data,C=this._gameId&&this._gameProtocolMapExt[this._gameId];if(C&&null===C[y])return console.log("\u8be5\u534f\u8bae cmd_id = "+y+" \u65e0\u9700\u89e3\u6790"),{err:{processid:u,xyid:l,cmdid:y,errId:0}};var M=C&&C[y];if(M||(M=this._gameProtocolMap[y]),!M)return console.warn("\u672a\u627e\u5230\u6e38\u620f\u534f\u8bae\u7ed3\u6784 cmd_id = "+y),{err:{processid:u,xyid:l,cmdid:y,errId:2}};(m=new M).processid=u,m.xyid=l,m.cmdid=y,m.appid=d,p=!0;try{m.unpack(I)}catch(v){return console.error("\u89e3\u6790\u6e38\u620f\u534f\u8bae\u5931\u8d25 \u8bf7\u786e\u8ba4\u672c\u6761\u534f\u8bae\u7ed3\u6784\u662f\u5426\u6709\u95ee\u9898",m,v),{err:{processid:u,xyid:l,cmdid:y,errId:12,msg:v.message,flag:s,lenArr:h,lenPackage:_,appid:d}}}}return{protocol:m,isGameProtocol:p,err:null}},t}();n.ProtocolManager=s,cc._RF.pop()},{"./Processid":"Processid"}],ProxyRoot:[function(t,e,n){"use strict";cc._RF.push(e,"15bc3JjaydGgbXM0/SMx/wI","ProxyRoot");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ProxyRoot=void 0;var r=t("./BaseRoot"),s=t("./GameRoot"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return s.GameRoot.instance.get(this)},enumerable:!1,configurable:!0}),i([jsClass],e)}(r.Root);n.ProxyRoot=c,cc._RF.pop()},{"./BaseRoot":"BaseRoot","./GameRoot":"GameRoot"}],QuestionnaireConifg:[function(t,e,n){"use strict";var o;cc._RF.push(e,"d629dOeVpNOy4o5A+iygMit","QuestionnaireConifg"),Object.defineProperty(n,"__esModule",{value:!0}),n.QuestionnaireConfig=n.QuestionTypeEnum=n.QuestionArrangeEnum=n.ButtonTypeEnum=void 0,function(t){t.RADIO="radio",t.CHECKBOX="checkbox",t.TEXT="inputTxt"}(o=n.ButtonTypeEnum||(n.ButtonTypeEnum={})),function(t){t[t.ONE_COLUMN=0]="ONE_COLUMN",t[t.TWO_COLUMN=1]="TWO_COLUMN"}(n.QuestionArrangeEnum||(n.QuestionArrangeEnum={})),function(t){t[t.RADIO=1]="RADIO",t[t.CHECKBOX=2]="CHECKBOX",t[t.TEXT=3]="TEXT"}(n.QuestionTypeEnum||(n.QuestionTypeEnum={}));var a=[{mainTitle:"\u60a8\u7684\u6027\u522b\u662f\uff1f",subTitle:null,pageIndex:1,buttonType:o.RADIO,questionID:100,content:[{text:"\u7537",optionID:1},{text:"\u5973",optionID:2}]},{mainTitle:"\u60a8\u7684\u5e74\u9f84\u662f\uff1f",subTitle:null,pageIndex:2,buttonType:o.RADIO,questionID:101,content:[{text:"17\u5c81\u53ca\u4ee5\u4e0b",optionID:3},{text:"18-24\u5c81",optionID:4},{text:"25-29\u5c81",optionID:5},{text:"30-39\u5c81",optionID:6},{text:"40-49\u5c81",optionID:7},{text:"50\u5c81\u53ca\u4ee5\u4e0a",optionID:8}]},{mainTitle:"\u60a8\u4f1a\u548c\u4ee5\u4e0b\u54ea\u4e9b\u4eba\uff0c\u624b\u673a\u6e38\u620f\u4e0a\u5f00\u623f\u95f4\u6253\u63bc\u86cb?",subTitle:"\u3010\u6700\u5c11\u9009\u62e91\u9879\u3011",pageIndex:3,buttonType:o.CHECKBOX,questionID:102,content:[{text:"\u4eb2\u621a",optionID:9},{text:"\u90bb\u5c45",optionID:10},{text:"(\u534f\u4f1a/\u4ff1\u4e50\u90e8)\u724c\u53cb\u540c\u4e8b/\u540c\u5b66",optionID:11},{text:"\u5176\u4ed6",optionID:12}]},{mainTitle:"\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u8eab\u8fb9\u548c\u60a8\u2014\u8d77\u6253\u624b\u673a\u63bc\u86cb\u7684\u6709\u591a\u5c11\u4eba?",subTitle:null,pageIndex:4,buttonType:o.RADIO,questionID:103,content:[{text:"1-2\u4eba",optionID:13},{text:"3-5\u4eba",optionID:14},{text:"6-10\u4eba",optionID:15},{text:"10\u4eba\u53ca\u4ee5\u4e0a",optionID:16}]},{mainTitle:"\u60a8\u8eab\u8fb9\u5176\u4ed6\u4eba\uff0c\u7ebf\u4e0b\u7ecf\u5e38\u5728\u54ea\u91cc\u6253\u63bc\u86cb\u6e38\u620f?",subTitle:"\u3010\u6700\u5c11\u9009\u62e91\u9879\u3011",pageIndex:5,buttonType:o.CHECKBOX,questionID:104,content:[{text:"\u5bb6\u91cc\uff08\u81ea\u5df1/\u670b\u53cb\uff09",optionID:17},{text:"\u4ff1\u4e50\u90e8/\u68cb\u724c\u5ba4",optionID:18},{text:"\u8336\u5427",optionID:19},{text:"\u5176\u4ed6",optionID:20}]},{mainTitle:"\u60a8\u8eab\u8fb9\u5176\u4ed6\u4eba\uff0c\u7ebf\u4e0a\u7ecf\u5e38\u73a9\u54ea\u6b3e\u63bc\u86cb\u6e38\u620f?",subTitle:null,pageIndex:6,buttonType:o.RADIO,questionID:105,content:[{text:"\u7ebf\u4e0a\u57fa\u672c\u4e0d\u73a9/\u73a9\u7684\u5c11",optionID:21},{text:"\u7ebf\u4e0a\u5e73\u53f0--\u5929\u5929\u7231\u63bc\u86cb",optionID:22},{text:"\u7ebf\u4e0a\u5e73\u53f0--\u6dee\u5b89\u63bc\u86cb\u5927\u5e08",optionID:23},{text:"\u7ebf\u4e0a\u5e73\u53f0--1312\u6b22\u4e50\u800d\u5927\u724c",optionID:24},{text:"\u7ebf\u4e0a\u5e73\u53f0--\u6765\u51e0\u5c40",optionID:25},{text:"\u7ebf\u4e0a\u5e73\u53f0-\u5fae\u4e50\u63bc\u86cb",optionID:26},{text:"\u5176\u4ed6",optionID:27}]},{mainTitle:"\u8fb9\u950b\u63bc\u86cb\u6e38\u620f\u4e2d\uff0c\u60a8\u6bd4\u8f83\u559c\u6b22\u54ea\u4e9b\u4ec0\u4e48\u70b9?",subTitle:"\u3010\u6700\u5c11\u9009\u62e91\u9879\u3011",pageIndex:7,buttonType:o.CHECKBOX,questionID:106,content:[{text:"\u597d\u53cb\u7ec4\u961f\u73a9\u6cd5",optionID:28},{text:"\u8868\u60c5\u7b49\u4e92\u52a8\u9053\u5177",optionID:29},{text:"\u5feb\u6377\u804a\u5929\u8bed",optionID:30},{text:"\u597d\u53cb\u623f\u73a9\u6cd5",optionID:31},{text:"\u91d1\u5e01\u73a9\u6cd5",optionID:32},{text:"\u8bb0\u724c\u5668",optionID:33},{text:"\u5176\u4ed6",optionID:34}]},{mainTitle:"\u60a8\u5e0c\u671b\u8fb9\u950b\u63bc\u86cb\u6e38\u620f\u4e2d\uff0c\u589e\u6dfb\u54ea\u4e9b\u529f\u80fd?",subTitle:"\u3010\u6700\u5c11\u9009\u62e91\u9879\u3011",pageIndex:8,buttonType:o.CHECKBOX,questionID:107,content:[{text:"\u5de5\u4f1a/\u4ff1\u4e50\u90e8/\u95e8\u6d3e",optionID:35},{text:"\u8bed\u97f3\u5bf9\u8bdd",optionID:36},{text:"\u5bf9\u5c40\u65c1\u89c2",optionID:37},{text:"\u6218\u7ee9\u56de\u653e",optionID:38},{text:"\u5176\u4ed6",optionID:39}]},{mainTitle:"\u60a8\u5728\u5f53\u524d\u63bc\u86cb\u597d\u53cb\u623f\u4e2d\uff0c\u6709\u54ea\u4e9b\u4f53\u9a8c\u4e0d\u597d\u7684\u5185\u5bb9\u5462?",subTitle:"\u3010\u6700\u5c11\u9009\u62e91\u9879\u3011",pageIndex:9,buttonType:o.CHECKBOX,questionID:108,content:[{text:"\u724c\u592a\u597d\uff0c\u8ddf\u7ebf\u4e0b\u73a9\u7684\u4e0d\u4e00\u6837",optionID:41},{text:"\u5355\u724c\u592a\u591a\uff0c\u7ecf\u5e38\u8981\u7406\u724c\u5f88\u4e45",optionID:42},{text:"\u9700\u89814\u4e2a\u4eba\u2014\u8d77\u73a9\uff0c\u96be\u5f00\u5c40",optionID:43},{text:"\u5185\u6709\u804a\u5929\u529f\u80fd\uff0c\u5bb9\u6613\u4f5c\u5f0a",optionID:44},{text:"\u804a\u5929\u8bed\u592a\u5c11",optionID:45},{text:"\u6e38\u620f\u89c4\u5219\u4e0d\u6b63\u5b97",optionID:46},{text:"\u5176\u4ed6",optionID:47}]},{mainTitle:"\u60a8\u5bf9\u5f53\u524d\u6e38\u620f\u7684\u610f\u89c1\u53ca\u770b\u6cd5\uff0c\u5185\u5bb9\u88ab\u91c7\u7eb3\u6709\u60ca\u559c\u54e6~",subTitle:"\u5982\u6709\u610f\u613f\uff0c\u8bf7\u7559\u4e0b\u624b\u673a\u53f7\u7801\u3001\u5fae\u4fe1\u53f7\u65b9\u4fbf\u6211",pageIndex:10,buttonType:o.TEXT,questionID:109}],i=function(){function t(){}return t.getMemoryConfig=function(){return a},t.getRadioMemoryConfig=function(){var t=[],e=1;return a.forEach(function(n){n.buttonType===o.RADIO&&(n.pageIndex=e,t.push(n),e++)}),console.log("getRadioMemoryConfig:",t),t},t}();n.QuestionnaireConfig=i,cc._RF.pop()},{}],QuestionnaireModel:[function(t,e,n){"use strict";cc._RF.push(e,"15131FAGmVO/4MReLUMKV26","QuestionnaireModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function r(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.QuestionnaireModel=n.QuestionnaireTypeEnum=n.SubmitCodeEnum=void 0;var c,l,u,d=t("../../../Framework/Manager/CoroutineManager"),p=t("../../../Framework/Manager/EventManager"),h=t("../../../Framework/Manager/UIManager"),_=t("../../../Framework/Model/BaseModel"),f=t("../../../Framework/Root/ModelRoot"),m=t("../../Award/AwardModel"),g=t("../../Award/AwardUI"),y=t("../../Base/Data/DataEvent"),I=t("../../Base/Data/DataLocalStorageKey"),C=t("../../Base/Utils/UtilTime"),M=t("./QuestionnaireConifg"),v=t("./QuestionnaireProxy"),E=t("./QuestionnaireUI"),A=t("../../Login/LoginModel");(function(t){t[t.NO_QUESTION=0]="NO_QUESTION",t[t.HAD_QUESTION=1]="HAD_QUESTION"})(c||(c={})),function(t){t[t.SUCCESS=0]="SUCCESS",t[t.NOT_QUESTION=10003]="NOT_QUESTION",t[t.SUBMIT_ERROR=10006]="SUBMIT_ERROR",t[t.ANSWER_ERROR=10010]="ANSWER_ERROR",t[t.HAD_ANSWER=10011]="HAD_ANSWER",t[t.EXPIRED=10012]="EXPIRED"}(l=n.SubmitCodeEnum||(n.SubmitCodeEnum={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.TEAM_PLAYER=11]="TEAM_PLAYER",t[t.NOT_TEAM_PLAYER=12]="NOT_TEAM_PLAYER",t[t.LOST_TEAM_PLAYER=13]="LOST_TEAM_PLAYER",t[t.ANSWER_AWARD=14]="ANSWER_AWARD"}(u=n.QuestionnaireTypeEnum||(n.QuestionnaireTypeEnum={}));var P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isEnterHallSuccess=!1,e._questoinInfoWithType=new Map,e._isHadQueryQuestionInfoWithType=new Map,e._isHadQueryUserType=new Map,e._popQuestionCode=new Map,e._questionnaireType=u.DEFAULT,e._hasReqQuestionNew=!1,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return f.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return v.QuestionnaireProxy.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){p.EventManager.instance.on(y.DataEvent.EnterHallSuccess,this,this.onEnterHallSuccess),p.EventManager.instance.on(y.DataEvent.BackHallSuccess,this,this.onBackHallSuccess),p.EventManager.instance.on(y.DataEvent.JoinAwardListener,this,this.onJoinAwardListener)},e.prototype.onEnterHallSuccess=function(){this._isEnterHallSuccess=!0},e.prototype.onJoinAwardListener=function(){var t=this;d.CoroutineManager.instance.wait(function(){return t._isEnterHallSuccess&&A.LoginModel.instance.isAwardInfoGot},function(){t.requestQuestionnaireNew(),t.reqAnswerAward()})},e.prototype.onBackHallSuccess=function(){this.requestQuestionnaire(),this.reqAnswerAward()},e.prototype.requestQuestionnaire=function(){this.getQuestionnairePopCount()>=3||(this.reqUserPopQuestionnaire(),this.queryQuestionnaireInfo(u.DEFAULT))},e.prototype.requestQuestionnaireNew=function(){this.getNewQuestionnairePopCount()>=3||this.reqQuestionnaireNew()},e.prototype.reqAnswerAward=function(){this.queryQuestionnaireInfo(u.ANSWER_AWARD,function(t){t?p.EventManager.instance.emit(y.DataEvent.updateAnswerAward,!0):p.EventManager.instance.emit(y.DataEvent.updateAnswerAward,!1)})},e.prototype.reqUserPopQuestionnaire=function(){var t=this;this._popQuestionCode.set(u.DEFAULT,c.NO_QUESTION),this._isHadQueryUserType.set(u.DEFAULT,!1),this.proxy.reqPopQuestionnaire(function(e,n){e&&t._popQuestionCode.set(u.DEFAULT,n),t._isHadQueryUserType.set(u.DEFAULT,!0)})},e.prototype.updateTriggerDay=function(){localStorage.setItem(I.DataLocalStorage.addKeyWithNumID(I.LocalStorageKey.QUESTIONNAIRE_TRIGGER_DAY),C.UtilTime.getDayCount().toString())},e.prototype.getTriggerDay=function(){return+localStorage.getItem(I.DataLocalStorage.addKeyWithNumID(I.LocalStorageKey.QUESTIONNAIRE_TRIGGER_DAY))},e.prototype.addQuestionnairePopCount=function(){var t=this.getQuestionnairePopCount();localStorage.setItem(I.DataLocalStorage.addKeyWithNumID(I.LocalStorageKey.QUESTIONNAIRE_TRIGGER_POP_COUNT),(t+1).toString())},e.prototype.getQuestionnairePopCount=function(){var t=I.DataLocalStorage.addKeyWithNumID(I.LocalStorageKey.QUESTIONNAIRE_TRIGGER_POP_COUNT);return C.UtilTime.getDayCount()!==this.getTriggerDay()&&localStorage.removeItem(t),+localStorage.getItem(t)||0},e.prototype.autoPopup=function(){var t=this;this.getQuestionnairePopCount()>=3||(h.UIManager.instance.addTopCollider("autoPopup"),this._coroutine=d.CoroutineManager.instance.timeoutWait(function(){return t._isHadQueryQuestionInfoWithType.get(u.DEFAULT)&&t._isHadQueryUserType.get(u.DEFAULT)},1,function(){h.UIManager.instance.removeTopCollider("autoPopup"),t._popQuestionCode.get(u.DEFAULT)===c.HAD_QUESTION&&t._questoinInfoWithType.get(u.DEFAULT)&&(t.addQuestionnairePopCount(),t.updateTriggerDay(),h.UIManager.instance.open(E.QuestionnaireUI).then(function(t){return t.init(u.DEFAULT)}))},this))},e.prototype.updateNewTriggerDay=function(){localStorage.setItem(I.DataLocalStorage.addKeyWithNumID(I.LocalStorageKey.QUESTIONNAIRE_NEW_TRIGGER_DAY),C.UtilTime.getDayCount().toString())},e.prototype.getNewTriggerDay=function(){return+localStorage.getItem(I.DataLocalStorage.addKeyWithNumID(I.LocalStorageKey.QUESTIONNAIRE_NEW_TRIGGER_DAY))},e.prototype.addNewQuestionnairePopCount=function(){var t=this.getNewQuestionnairePopCount();localStorage.setItem(I.DataLocalStorage.addKeyWithNumID(I.LocalStorageKey.QUESTIONNAIRE_NEW_TRIGGER_POP_COUNT),(t+1).toString())},e.prototype.getNewQuestionnairePopCount=function(){var t=I.DataLocalStorage.addKeyWithNumID(I.LocalStorageKey.QUESTIONNAIRE_NEW_TRIGGER_POP_COUNT);return C.UtilTime.getDayCount()!==this.getNewTriggerDay()&&localStorage.removeItem(t),+localStorage.getItem(t)||0},e.prototype.autoPopupNew=function(){var t=this;this.getNewQuestionnairePopCount()>=3||(h.UIManager.instance.addTopCollider("autoPopup"),this._coroutine=d.CoroutineManager.instance.timeoutWait(function(){return t._hasReqQuestionNew},1,function(){t._questionnaireType!==u.DEFAULT?(t.queryQuestionnaireInfo(t._questionnaireType),t._coroutine=d.CoroutineManager.instance.timeoutWait(function(){return t._isHadQueryQuestionInfoWithType.get(t._questionnaireType)},1,function(){h.UIManager.instance.removeTopCollider("autoPopup"),t._questoinInfoWithType.get(t._questionnaireType)&&(t.addNewQuestionnairePopCount(),t.updateNewTriggerDay(),h.UIManager.instance.open(E.QuestionnaireUI).then(function(e){return e.init(t._questionnaireType)}))},t)):h.UIManager.instance.removeTopCollider("autoPopup")},this))},e.prototype.stopPopup=function(){this._coroutine&&(d.CoroutineManager.instance.stopCo(this._coroutine),h.UIManager.instance.removeTopCollider("autoPopup")),this._coroutine=null,h.UIManager.instance.close(E.QuestionnaireUI)},e.prototype.reqQuestionnaireNew=function(){var t=this;this._hasReqQuestionNew=!1,this.proxy.reqQuestionnaireNew(function(e){t._questionnaireType=e,t._hasReqQuestionNew=!0})},e.prototype.queryQuestionnaireInfo=function(t,e){return r(this,void 0,Promise,function(){var n=this;return s(this,function(o){switch(o.label){case 0:return void 0===t&&(t=u.DEFAULT),this._isHadQueryQuestionInfoWithType.set(t,!1),this._questoinInfoWithType.set(t,null),[4,this.proxy.queryQustionnaire(this.transferQuestionnaireType(t),function(o,a){!0===o&&n._questoinInfoWithType.set(t,a),e&&e(o),n._isHadQueryQuestionInfoWithType.set(t,!0)})];case 1:return o.sent(),[2]}})})},e.prototype.submitQuestionnaire=function(t,e,n){return r(this,void 0,Promise,function(){var o=this;return s(this,function(a){switch(a.label){case 0:return[4,this.proxy.submitQustionnaire(this.transferQuestionnaireType(t),e,function(e,a,i){if(e){if(u.ANSWER_AWARD===t)return void(n&&n(!0));var r=o._questoinInfoWithType.get(t).questionnaire_awards;if(r){var s=m.AwardModel.instance.getAwardsFormat({asr:r.gold,yb:r.diamond,props:r.props});h.UIManager.instance.open(g.AwardUI).then(function(t){t.init(s)})}u.DEFAULT===t?o.proxy.reqFinishQuestionnaire():(o.proxy.reqFinishQuestionnaireNew(t),o._questionnaireType=u.DEFAULT)}else a===l.ANSWER_ERROR?n&&n(!1,a,+i.right_option_ids):a===l.HAD_ANSWER?n&&n(!0):n&&n(!1,a)})];case 1:return a.sent(),[2]}})})},e.prototype.reqGetAnswerAward=function(t,e){return r(this,void 0,Promise,function(){var n=this;return s(this,function(o){switch(o.label){case 0:return[4,this.proxy.receiveAnswerAward(this.transferQuestionnaireType(t),function(o){if(o){var a=n._questoinInfoWithType.get(t).questionnaire_awards;if(a){var i=m.AwardModel.instance.getAwardsFormat({asr:a.gold,yb:a.diamond,props:a.props});h.UIManager.instance.open(g.AwardUI).then(function(t){t.init(i)})}e&&e(!0),p.EventManager.instance.emit(y.DataEvent.updateAnswerAward,!1)}else!1===o?e&&e(!1):console.error(">----\x3ereceiveAnswerAward.error")})];case 1:return o.sent(),[2]}})})},e.prototype.transferQuestionnaireType=function(t){switch(t){case u.TEAM_PLAYER:return 1;case u.NOT_TEAM_PLAYER:return 2;case u.LOST_TEAM_PLAYER:return 3;case u.ANSWER_AWARD:return 4}return 0},e.prototype.adaptOnlineDataToMemoryData=function(t){for(var e=[],n=this._questoinInfoWithType.get(t),o=0;o<n.question_count;o++){var a=n.question_datas[o],i={};i.mainTitle=a.question_content,i.subTitle=a.question_sub_content,i.pageIndex=o+1,M.QuestionTypeEnum.RADIO===a.question_type?i.buttonType=M.ButtonTypeEnum.RADIO:M.QuestionTypeEnum.CHECKBOX===a.question_type?i.buttonType=M.ButtonTypeEnum.CHECKBOX:i.buttonType=M.ButtonTypeEnum.TEXT,i.questionID=a.question_id;var r=a.option_datas;i.content=[];for(var s=0;s<a.option_count;s++)i.content[s]={text:r[s].option_content,optionID:r[s].option_id};e.push(i)}return e},e.prototype.getAwardGold=function(t){if(this._questoinInfoWithType.get(t)&&this._questoinInfoWithType.get(t).questionnaire_awards)return this._questoinInfoWithType.get(t).questionnaire_awards.gold},i([jsClass],e)}(_.BaseModel);n.QuestionnaireModel=P,cc.systemEvent.once("GameRoot.inited",function(){f.ModelRoot.instance.add(P)}),cc._RF.pop()},{"../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/Model/BaseModel":"BaseModel","../../../Framework/Root/ModelRoot":"ModelRoot","../../Award/AwardModel":"AwardModel","../../Award/AwardUI":"AwardUI","../../Base/Data/DataEvent":"DataEvent","../../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../../Base/Utils/UtilTime":"UtilTime","../../Login/LoginModel":"LoginModel","./QuestionnaireConifg":"QuestionnaireConifg","./QuestionnaireProxy":"QuestionnaireProxy","./QuestionnaireUI":"QuestionnaireUI"}],QuestionnaireProxy:[function(t,e,n){"use strict";cc._RF.push(e,"fcebcgwp7JP3b4aOoSWWd0U","QuestionnaireProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function r(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},c=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.QuestionnaireProxy=void 0;var l,u=t("../../../Framework/Proxy/BaseProxy"),d=t("../../../Framework/Root/ProxyRoot"),p=t("../../../Framework/Utils/HttpUtil"),h=t("../../Base/Data/DataBfConfig"),_=t("../../Base/Data/DataConstant"),f=t("../../Base/Data/DataScript"),m=t("../../Base/Module/Network/protocol/AwardProtocol"),g=t("../../Base/Module/Network/SocketUtils"),y=t("../../Base/Utils/UtilTool"),I=t("../../UserInfo/UserInfoModel"),C=t("./QuestionnaireModel");(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.HAD_ANSWER=10002]="HAD_ANSWER"})(l||(l={}));var M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.QUERY_URL="/customer/questionnaire",e.SUBMIT_URL="/customer/questionnaire/submit",e.RECEIVE_AWARDS_URL="/customer/questionnaire/receive_awards",e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return d.ProxyRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.getQustionSign=function(t){var e=y.UtilTool.getRandNonceStr(),n=Math.floor(I.UserInfoModel.instance.getServerTimestamp()/1e3).toString(),o=Object.deepCopy(t);Object.assign(o,{timestamp:n,nonce:e});for(var a=Object.keys(o).sort(),i="",r=0;r<a.length;r++){i+=a[r],i+="=";var s=o[a[r]];i+="object"==typeof s?JSON.stringify(s):s,r!==a.length-1&&(i+="&")}return[e,n,y.UtilTool.encryptWithMD5(i)]},e.prototype.queryQustionnaire=function(t,e){return r(this,void 0,void 0,function(){var n,o,a,i,r;return s(this,function(s){switch(s.label){case 0:return n={num_id:I.UserInfoModel.instance.userInfo.numID,area_id:h.DataBfConfig.areaID,game_id:h.DataBfConfig.gameID,channel_id:h.DataBfConfig.ymn.channel,questionnaireType:t},o=c(this.getQustionSign(n),3),a=o[0],i=o[1],r=o[2],[4,p.HttpUtil.post(_.DataConstant.QUESTIONNAIRE_HOST+this.QUERY_URL,n,{"Content-Type":"application/json","X-Nonce":a,"X-Timestamp":i,"X-Authorization":r}).then(function(t){console.warn(">----\x3equeryQustionnaire:",t),l.SUCCESS===t.code?e&&e(!0,t.data):l.HAD_ANSWER===t.code?e&&e(!1):e&&e(null)},function(t){console.error(t),e&&e(null)})];case 1:return s.sent(),[2]}})})},e.prototype.submitQustionnaire=function(t,e,n){return r(this,void 0,void 0,function(){var o,a,i,r,l,u;return s(this,function(s){switch(s.label){case 0:return"",o=4===t?JSON.stringify(e.answerData[0]):JSON.stringify(e.answerData),a={num_id:I.UserInfoModel.instance.userInfo.numID,area_id:h.DataBfConfig.areaID,game_id:h.DataBfConfig.gameID,channel_id:h.DataBfConfig.ymn.channel,answer_data:o,questionnaireType:t},i=c(this.getQustionSign(a),3),r=i[0],l=i[1],u=i[2],[4,p.HttpUtil.post(_.DataConstant.QUESTIONNAIRE_HOST+this.SUBMIT_URL,a,{"Content-Type":"application/json","X-Nonce":r,"X-Timestamp":l,"X-Authorization":u}).then(function(t){console.warn(">----\x3eSubmitQustionnaire:",t),0===t.code?n&&n(!0):n&&n(!1,t.code,t.data)},function(t){console.error(t),n&&n(null)})];case 1:return s.sent(),[2]}})})},e.prototype.receiveAnswerAward=function(t,e){return r(this,void 0,void 0,function(){var n,o,a,i,r;return s(this,function(s){switch(s.label){case 0:return n={num_id:I.UserInfoModel.instance.userInfo.numID,area_id:h.DataBfConfig.areaID,game_id:h.DataBfConfig.gameID,channel_id:h.DataBfConfig.ymn.channel,questionnaireType:t},o=c(this.getQustionSign(n),3),a=o[0],i=o[1],r=o[2],[4,p.HttpUtil.post(_.DataConstant.QUESTIONNAIRE_HOST+this.RECEIVE_AWARDS_URL,n,{"Content-Type":"application/json","X-Nonce":a,"X-Timestamp":i,"X-Authorization":r}).then(function(t){console.warn(">----\x3ereceiveAnswerAward:",t),0===t.code?e&&e(!0):e&&e(!1)},function(t){console.error(t),e&&e(null)})];case 1:return s.sent(),[2]}})})},e.prototype.reqPopQuestionnaire=function(t){var e=new m.AwardProtocol.ReqAwardInfo({type:f.DataScript.ReqPopQuestionnaire.id,gameid:h.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+f.DataScript.ReqPopQuestionnaire.func.query+"';channelid="+h.DataBfConfig.ymn.channel)});g.SocketUtils.instance.request(e,function(e){if(0===e.flag){var n=bf33.Utils.bytesToString(e.msg);console.warn(">-----\x3ereqPopQuestionnaire:",n);var o=JSON.parse(n),a=0===o.flag;t&&t(a,o.questionType)}else console.error("reqPopQuestionnaire.error:",e.flag)})},e.prototype.reqFinishQuestionnaire=function(){var t=new m.AwardProtocol.ReqAwardInfo({type:f.DataScript.ReqPopQuestionnaire.id,gameid:h.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+f.DataScript.ReqPopQuestionnaire.func.finish+"';channelid="+h.DataBfConfig.ymn.channel)});g.SocketUtils.instance.request(t,function(t){if(0===t.flag){var e=bf33.Utils.bytesToString(t.msg);console.warn(">-----\x3ereqFinishQuestionnaire:",e)}else console.error("reqFinishQuestionnaire.error:",t.flag)})},e.prototype.reqQuestionnaireNew=function(t){var e=new m.AwardProtocol.ReqAwardInfo({type:f.DataScript.QuestionnaireNew.id,gameid:h.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+f.DataScript.QuestionnaireNew.func.query+"';channelID="+h.DataBfConfig.ymn.channel)});g.SocketUtils.instance.request(e,function(e){if(0===e.flag){var n=bf33.Utils.bytesToString(e.msg);console.warn(">-----\x3ereqQuestionnaireNew:",n);var o=JSON.parse(n);0===o.flag?t&&t(o.isOpen&&o.questionType||C.QuestionnaireTypeEnum.DEFAULT):t&&t(C.QuestionnaireTypeEnum.DEFAULT)}else t&&t(C.QuestionnaireTypeEnum.DEFAULT),console.error("reqQuestionnaireNew.error:",e.flag)})},e.prototype.reqFinishQuestionnaireNew=function(t){var e=new m.AwardProtocol.ReqAwardInfo({type:f.DataScript.QuestionnaireNew.id,gameid:h.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+f.DataScript.QuestionnaireNew.func.finish+"';questionType="+t)});g.SocketUtils.instance.request(e,function(t){if(0===t.flag){var e=bf33.Utils.bytesToString(t.msg);console.warn(">-----\x3ereqFinishQuestionnaireNew:",e)}else console.error("reqFinishQuestionnaireNew.error:",t.flag)})},i([jsClass],e)}(u.BaseProxy);n.QuestionnaireProxy=M,cc.systemEvent.once("GameRoot.inited",function(){d.ProxyRoot.instance.add(M)}),cc._RF.pop()},{"../../../Framework/Proxy/BaseProxy":"BaseProxy","../../../Framework/Root/ProxyRoot":"ProxyRoot","../../../Framework/Utils/HttpUtil":"HttpUtil","../../Base/Data/DataBfConfig":"DataBfConfig","../../Base/Data/DataConstant":"DataConstant","../../Base/Data/DataScript":"DataScript","../../Base/Module/Network/SocketUtils":"SocketUtils","../../Base/Module/Network/protocol/AwardProtocol":"AwardProtocol","../../Base/Utils/UtilTool":"UtilTool","../../UserInfo/UserInfoModel":"UserInfoModel","./QuestionnaireModel":"QuestionnaireModel"}],QuestionnaireUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"4c980nXVhdJ5JbF2RLobU8M","QuestionnaireUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./QuestionnaireUI_MainPanel"),a=t("./QuestionnaireUI_Window"),i=t("./QuestionnaireUI_lastPage"),r=t("./QuestionnaireUI_contentPanel"),s=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default)},t}();n.default=s,cc._RF.pop()},{"./QuestionnaireUI_MainPanel":"QuestionnaireUI_MainPanel","./QuestionnaireUI_Window":"QuestionnaireUI_Window","./QuestionnaireUI_contentPanel":"QuestionnaireUI_contentPanel","./QuestionnaireUI_lastPage":"QuestionnaireUI_lastPage"}],QuestionnaireUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"583a4PhDaNHGIN2k+y2wYWE","QuestionnaireUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("QuestionnaireUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://txh5ap487z1v0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],QuestionnaireUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"861507oFvVGi7qT2vKyJ7DY","QuestionnaireUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("QuestionnaireUI","Window")},e.prototype.onConstruct=function(){this.m_c_showSubTitle=this.getControllerAt(0),this.m_c_showLastBtn=this.getControllerAt(1),this.m_c_showNextBtn=this.getControllerAt(2),this.m_c_showSubmitBtn=this.getControllerAt(3),this.m_endPage=this.getChildAt(2),this.m_btnLast=this.getChildAt(3),this.m_btnNext=this.getChildAt(4),this.m_btnSubmit=this.getChildAt(5),this.m_btnClose=this.getChildAt(6),this.m_txtMainTitle=this.getChildAt(7),this.m_txtSubTitle=this.getChildAt(8),this.m_txtPage=this.getChildAt(9),this.m_txtAward=this.getChildAt(10)},e.URL="ui://txh5ap487z1vc",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],QuestionnaireUI_contentPanel:[function(t,e,n){"use strict";cc._RF.push(e,"ed0eeCsTeZPwJPg07noqW2K","QuestionnaireUI_contentPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("QuestionnaireUI","contentPanel")},e.prototype.onConstruct=function(){this.m_createPanel=this.getChildAt(0)},e.URL="ui://txh5ap48xj1mm",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],QuestionnaireUI_lastPage:[function(t,e,n){"use strict";cc._RF.push(e,"986158ZEm5GXJ566TpWvpiM","QuestionnaireUI_lastPage");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("QuestionnaireUI","lastPage")},e.prototype.onConstruct=function(){this.m_txtSuggest=this.getChildAt(6),this.m_txtSuggestNew=this.getChildAt(7),this.m_txtPhoneNum=this.getChildAt(8),this.m_txtWechatNum=this.getChildAt(9)},e.URL="ui://txh5ap48ka5nl",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],QuestionnaireUI:[function(t,e,n){"use strict";cc._RF.push(e,"9b51f1mNZZMk4Zuo4qScfaH","QuestionnaireUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.QuestionnaireUI=void 0;var c,l,u,d,p=t("../../../Framework/Manager/EventManager"),h=t("../../../Framework/Manager/UIManager"),_=t("../../../Framework/UI/FadeUI"),f=t("../../Base/Data/DataEvent"),m=t("./QuestionnaireConifg"),g=t("./QuestionnaireModel"),y=t("./QuestionnaireUI/QuestionnaireUIBinder");(function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"})(c||(c={})),function(t){t[t.SHOW=0]="SHOW",t[t.HIDE=1]="HIDE"}(l||(l={})),function(t){t[t.SHOW=0]="SHOW",t[t.HIDE=1]="HIDE"}(u||(u={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"}(d||(d={}));var I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._questionnaireConfig=[],e._contentPanel=null,e._radioTable={},e._checkboxTable={},e._currentPageIndex=1,e._selectRecord={},e._btnDisToLeft=315,e._btnDisToCenter=150,e._btnRowInterval=405,e._btnColumnInterval=67,e._submitCount=0,e._questionnaireType=g.QuestionnaireTypeEnum.DEFAULT,e}return a(e,t),e.uiBind=function(){y.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return g.QuestionnaireModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initData()},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),this.view.m_Window.m_btnLast.onClick(this.clickBtnLast,this),this.view.m_Window.m_btnNext.onClick(this.clickBtnNext,this),this.view.m_Window.m_btnSubmit.onClick(this.clickBtnSubmit,this)},e.prototype.initData=function(){this._selectRecord={},this._btnDisToLeft=this.view.width/2-330,this._submitCount=0},e.prototype.init=function(t){this._questionnaireType=t,this.view.m_Window.m_endPage.m_txtSuggest.visible=g.QuestionnaireTypeEnum.DEFAULT===t,this.view.m_Window.m_endPage.m_txtSuggestNew.visible=g.QuestionnaireTypeEnum.DEFAULT!=t,this._questionnaireConfig=this.model.adaptOnlineDataToMemoryData(this._questionnaireType),this.initFirstPageUI()},e.prototype.clickBtnLast=function(){console.log("clickBtnLast"),this.goToLastPage()},e.prototype.clickBtnNext=function(){console.log("clickBtnNext"),this.goToNextPage()},e.prototype.clickBtnSubmit=function(){var t,e;this._submitCount++;var n=g.QuestionnaireTypeEnum.DEFAULT===this._questionnaireType?this.view.m_Window.m_endPage.m_txtSuggest.text:this.view.m_Window.m_endPage.m_txtSuggestNew.text;if(""===n&&this._submitCount<=1)p.EventManager.instance.emit(f.DataEvent.ToastData,"\u8bf7\u7559\u4e0b\u60a8\u5b9d\u8d35\u5efa\u8bae\u518d\u63d0\u4ea4\u54e6~");else{var o=[];try{for(var a=r(Object.entries(this._selectRecord)),i=a.next();!i.done;i=a.next()){var c=s(i.value,2),l=c[0],u=c[1],d=s(this.convertOptionFormatBySelectRecord(+l,u),2),h=d[0],_=d[1];(I={})[h]=_,o.push(I)}}catch(v){t={error:v}}finally{try{i&&!i.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}var y=this._questionnaireConfig[this._questionnaireConfig.length-1];if(m.ButtonTypeEnum.TEXT===y.buttonType){var I,C={10001:n,10002:this.view.m_Window.m_endPage.m_txtPhoneNum.text,10003:this.view.m_Window.m_endPage.m_txtWechatNum.text};(I={})[y.questionID]=JSON.stringify(C),o.push(I)}var M={};M.answerData=o,console.log(">---\x3esubmitData:",M),this.model.submitQuestionnaire(this._questionnaireType,M),this.onExitClick()}},e.prototype.initFirstPageUI=function(){var t=this._questionnaireConfig[0];this.updatePageInfo(t),this.initAwardGold()},e.prototype.updatePageInfo=function(t){this.enableNextBtn(!1),this._currentPageIndex=t.pageIndex,this.view.m_Window.m_txtMainTitle.text=t.pageIndex+"\u3001"+t.mainTitle,t.subTitle?(this.showSubTitle(!0),this.view.m_Window.m_txtSubTitle.text=t.subTitle):this.showSubTitle(!1),this.view.m_Window.m_txtPage.text=t.pageIndex+"/"+this._questionnaireConfig.length,1===t.pageIndex?this.showLastBtn(!1):t.pageIndex===this._questionnaireConfig.length?(this.showLastBtn(!1),this.showNextBtn(!1),this.showSubmitBtn(!0)):(this.showLastBtn(!0),this.showNextBtn(!0),this.showSubmitBtn(!1)),this.adddetailContent(t),this.updateButtonWithRecord()},e.prototype.initAwardGold=function(){this.view.m_Window.m_txtAward.text="[color=#90390b]\u8ba4\u771f\u7b54\u5b8c\u53ef\u5f97[/color][color=#ce3002][size=36]"+this.model.getAwardGold(this._questionnaireType)+"\u91d1\u5e01[/size][/color][color=#90390b]\u54e6~[/color]"},e.prototype.enableNextBtn=function(t){this.view.m_Window.m_btnNext.enabled=t},e.prototype.showSubTitle=function(t){this.view.m_Window.m_c_showSubTitle.selectedIndex=t?c.SHOW:c.HIDE},e.prototype.showLastBtn=function(t){this.view.m_Window.m_c_showLastBtn.selectedIndex=t?l.SHOW:l.HIDE},e.prototype.showNextBtn=function(t){this.view.m_Window.m_c_showNextBtn.selectedIndex=t?u.SHOW:l.HIDE},e.prototype.showSubmitBtn=function(t){this.view.m_Window.m_c_showSubmitBtn.selectedIndex=t?d.SHOW:d.HIDE},e.prototype.adddetailContent=function(t){if(this._contentPanel&&(this._contentPanel.removeFromParent(),this._contentPanel=null),this._radioTable={},this._checkboxTable={},t.pageIndex!==this._questionnaireConfig.length){var e,n,o=0;n=t.content.length<=2?m.QuestionArrangeEnum.ONE_COLUMN:m.QuestionArrangeEnum.TWO_COLUMN;for(var a=0;a<t.content.length;a++){var i=this.createButton(a,t.buttonType);i.title=t.content[a].text,this.addChild(i),i.asButton.selected=!1,i.data={index:a,optionID:t.content[a].optionID},m.QuestionArrangeEnum.ONE_COLUMN===n?(e=1,o++):m.QuestionArrangeEnum.TWO_COLUMN===n&&(e=a%2+1,0==a%2&&o++);var r=this._btnDisToLeft+(e-1)*this._btnRowInterval,s=h.UIManager.instance.root.height/2-this._btnDisToCenter+(o-1)*this._btnColumnInterval;i.setPosition(r,s)}}},e.prototype.updateButtonWithRecord=function(){console.warn("updateButtonWithRecord:",this._selectRecord);var t=this._selectRecord[this._currentPageIndex];if(t&&t.length>0){var e=new Set(t);for(var n in this._radioTable){var o=this._radioTable[n];e.has(+n)?(this.enableNextBtn(!0),o.asButton.selected=!0):o.asButton.selected=!1}for(var n in this._checkboxTable)o=this._checkboxTable[n],e.has(+n)?(this.enableNextBtn(!0),o.asButton.selected=!0):o.asButton.selected=!1}},e.prototype.createButton=function(t,e){var n=null;return m.ButtonTypeEnum.RADIO===e?((n=fgui.UIPackage.createObject("QuestionnaireUI","radioBoxSelect")).onClick(this.clickBtnRadio,this),this._radioTable[t]=n):m.ButtonTypeEnum.CHECKBOX===e&&((n=fgui.UIPackage.createObject("QuestionnaireUI","chkBoxSelect")).onClick(this.clickBtnCheckbox,this),this._checkboxTable[t]=n),n},e.prototype.clickBtnRadio=function(t){var e=fgui.GObject.cast(t.currentTarget).data;console.warn("clickBtnRadio:",e),this.updateRadioUI(e),this._selectRecord[this._currentPageIndex]=[],this._selectRecord[this._currentPageIndex].push(e.index),this.enableNextBtn(!0)},e.prototype.updateRadioUI=function(t){for(var e in this._radioTable)this._radioTable[e].asButton.selected=!1;this._radioTable[t.index].asButton.selected=!0},e.prototype.clickBtnCheckbox=function(t){var e=fgui.GObject.cast(t.currentTarget).data;if(console.warn("clickBtnCheckbox:",e),this._selectRecord[this._currentPageIndex]&&this._selectRecord[this._currentPageIndex].length>0){var n=new Set(this._selectRecord[this._currentPageIndex]);this._checkboxTable[e.index].asButton.selected?n.add(e.index):n.delete(e.index),this._selectRecord[this._currentPageIndex]=[],this._selectRecord[this._currentPageIndex]=Array.from(n)}else this._selectRecord[this._currentPageIndex]=[],this._selectRecord[this._currentPageIndex].push(e.index);this._selectRecord[this._currentPageIndex].length>0?this.enableNextBtn(!0):this.enableNextBtn(!1)},e.prototype.addChild=function(t){var e=this.view.getAllChildren("contentPanel")[0];e||((e=fgui.UIPackage.createObject("QuestionnaireUI","contentPanel")).name="contentPanel",this.view.addChild(e),this._contentPanel=e),e.asCom.addChild(t)},e.prototype.goToNextPage=function(){if(this._currentPageIndex<1||this._currentPageIndex>this._questionnaireConfig.length)console.log(">---\x3egoToNextPage:",this._currentPageIndex);else{var t=this._currentPageIndex+1,e=this._questionnaireConfig[t-1];this.updatePageInfo(e)}},e.prototype.goToLastPage=function(){if(this._currentPageIndex<1||this._currentPageIndex>this._questionnaireConfig.length)console.log(">---\x3egoToLastPage:",this._currentPageIndex);else{var t=this._currentPageIndex-1,e=this._questionnaireConfig[t-1];this.updatePageInfo(e)}},e.prototype.convertOptionFormatBySelectRecord=function(t,e){var n=1,o="";return this._questionnaireConfig.forEach(function(a){if(a.pageIndex===t){n=a.questionID;for(var i=0;i<e.length;i++)o+=a.content[e[i]].optionID,i!==e.length-1&&(o+=",")}}),[n,o]},i([jsClass],e)}(_.FadeUI);n.QuestionnaireUI=I,cc._RF.pop()},{"../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/UI/FadeUI":"FadeUI","../../Base/Data/DataEvent":"DataEvent","./QuestionnaireConifg":"QuestionnaireConifg","./QuestionnaireModel":"QuestionnaireModel","./QuestionnaireUI/QuestionnaireUIBinder":"QuestionnaireUIBinder"}],RealTimeVoiceModel:[function(t,e,n){"use strict";cc._RF.push(e,"57dda07TlJKFbdZwZAijXnw","RealTimeVoiceModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.RealTimeVoiceModel=void 0;var r=t("../../../../Framework/Manager/EventManager"),s=t("../../../../Framework/Model/BaseModel"),c=t("../../../../Framework/Root/ModelRoot"),l=t("../../../../Framework/Utils/HttpUtil"),u=t("../../../Base/Data/DataConstant"),d=t("../../../Base/Data/DataEvent"),p=t("../../../Base/Module/Platform/Const/PlatformEventType"),h=t("../../../Base/Module/Platform/PlatformManager"),_=t("../../../FriendTeam/FriendTeamModel"),f=t("../../../UserInfo/UserInfoModel"),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isJoining=!1,e._isInChat=!1,e._muteMicrophone=!0,e._muteEarphone=!0,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return c.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInChat",{get:function(){return this._isInChat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muteMicrophone",{get:function(){return this._muteMicrophone},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muteEarphone",{get:function(){return this._muteEarphone},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){h.PlatformManager.instance.platform.onVoiceChatMembersChanged(this.onMembersChanged.bind(this)),h.PlatformManager.instance.platform.onVoiceChatSpeakersChanged(this.onSpeakersChanged.bind(this)),h.PlatformManager.instance.platform.onVoiceChatInterrupted(this.onInterrupted.bind(this)),r.EventManager.instance.on(d.DataEvent.LoginSuccess,this,this.onRelink),r.EventManager.instance.on(p.PlatformEventType.RealTimeVoiceClose,this,this.exitChat),r.EventManager.instance.on(p.PlatformEventType.AppShow,this,this.onRelink),r.EventManager.instance.on(p.PlatformEventType.AppHide,this,this.exitChatFake)},e.prototype.onRelink=function(){if(this._isInChat){var t=_.FriendTeamModel.instance.teamInfo.partnerid;t?this.joinChat(t.toString()):this._isInChat=!1}},e.prototype.joinChat=function(t){var e=this;if(this._isJoining)r.EventManager.instance.emit(d.DataEvent.ToastData,"\u6b63\u5728\u52a0\u5165\u5b9e\u65f6\u8bed\u97f3\u623f\u95f4\uff0c\u8bf7\u7a0d\u5019");else{this._isJoining=!0;var n=f.UserInfoModel.instance.userInfo.numID,o=Math.floor(Date.now()/1e3);this.getVoIPSign(n,t.toString(),o.toString(),o.toString(),function(n){n?h.PlatformManager.instance.platform.joinVoiceChat({groupId:t.toString(),nonceStr:o.toString(),signature:n,timeStamp:o},{muteMicrophone:!0,muteEarphone:!0},function(t,n){e._isJoining=!1,t?n&&(r.EventManager.instance.emit(d.DataEvent.ToastData,"\u5b9e\u65f6\u8bed\u97f3\u8fde\u63a5\u6210\u529f"),e._isInChat=!0,e.updateMuteConfig(!1,!1)):e._isInChat||r.EventManager.instance.emit(d.DataEvent.ToastData,"\u5b9e\u65f6\u8bed\u97f3\u8fde\u63a5\u5931\u8d25")}):e._isJoining=!1})}},e.prototype.exitChat=function(){var t=this;h.PlatformManager.instance.platform.exitVoiceChat(function(e){e&&(t._isInChat&&r.EventManager.instance.emit(d.DataEvent.ToastData,"\u5b9e\u65f6\u8bed\u97f3\u5df2\u65ad\u5f00"),t._isInChat=!1,t._muteMicrophone=!0,t._muteEarphone=!0,r.EventManager.instance.emit(p.PlatformEventType.RealTimeVoiceUpdate))})},e.prototype.exitChatFake=function(){var t=this;h.PlatformManager.instance.platform.exitVoiceChat(function(e){e&&(t._muteMicrophone=!0,t._muteEarphone=!0,r.EventManager.instance.emit(p.PlatformEventType.RealTimeVoiceUpdate))})},e.prototype.updateMuteConfig=function(t,e){var n=this;h.PlatformManager.instance.platform.updateVoiceChatMuteConfig({muteMicrophone:t,muteEarphone:e},function(o){o&&(n._muteMicrophone=t,n._muteEarphone=e,r.EventManager.instance.emit(p.PlatformEventType.RealTimeVoiceUpdate))})},e.prototype.onMembersChanged=function(){},e.prototype.onSpeakersChanged=function(){},e.prototype.onInterrupted=function(){this._muteMicrophone=!0,this._muteEarphone=!0,r.EventManager.instance.emit(p.PlatformEventType.RealTimeVoiceUpdate)},e.prototype.getVoIPSign=function(t,e,n,o,a){console.log("RealTimeVoiceModel.getVoIPSign numID = "+t+", groupID = "+e+", nonceStr = "+n+", timeStamp = "+o),l.HttpUtil.post(u.DataConstant.REALTIME_VOICE_SIGN,{Numid:t,Groupid:e,NonceStr:n,TimeStamp:o},{"Content-Type":"application/json"}).then(function(t){0===t.code?a&&a(t.signature):a&&a(null)},function(t){console.error(t),a&&a(null)})},i([jsClass],e)}(s.BaseModel);n.RealTimeVoiceModel=m,cc.systemEvent.once("GameRoot.inited",function(){c.ModelRoot.instance.add(m)}),cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Model/BaseModel":"BaseModel","../../../../Framework/Root/ModelRoot":"ModelRoot","../../../../Framework/Utils/HttpUtil":"HttpUtil","../../../Base/Data/DataConstant":"DataConstant","../../../Base/Data/DataEvent":"DataEvent","../../../Base/Module/Platform/Const/PlatformEventType":"PlatformEventType","../../../Base/Module/Platform/PlatformManager":"PlatformManager","../../../FriendTeam/FriendTeamModel":"FriendTeamModel","../../../UserInfo/UserInfoModel":"UserInfoModel"}],ResizeToScreen:[function(t,e,n){"use strict";cc._RF.push(e,"9e9ffu1kONAI6D6ltW8Ozzl","ResizeToScreen");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ResizeToScreen=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){this.resize(),cc.view.on("canvas-resize",this.resize,this)},e.prototype.resize=function(){var t=cc.view.getCanvasSize(),e=t.width/cc.view.getScaleX(),n=t.height/cc.view.getScaleY();this.node.setContentSize(e,n)},i([cc._decorator.ccclass,cc._decorator.executeInEditMode],e)}(cc.Component);n.ResizeToScreen=r,cc._RF.pop()},{}],RoomModel:[function(t,e,n){"use strict";cc._RF.push(e,"7b04ey9WtRCEYY9/oRh3tTu","RoomModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.RoomModel=n.RoomStatusForCut=n.ClubShowFlags=n.RoomLevelEnum=n.STOP_TRIGGER_GUID_RISE_DAY=n.MAX_GUID_RISE_TRIGGER_COUNT=void 0;var c,l,u=t("../../../../Framework/Manager/EventManager"),d=t("../../../../Framework/Model/BaseModel"),p=t("../../../../Framework/Root/ModelRoot"),h=t("../../Data/DataBfConfig"),_=t("../../Data/DataEvent"),f=t("../../Data/DataLocalStorageKey"),m=t("./RoomProxy"),g=t("../../../Game/Common/GameCommonModel"),y=t("../../../../Framework/Manager/UIManager"),I=t("../../../UserInfo/UserInfoModel"),C=t("../../../Game/GuanDan/GameUI"),M=t("../../../CreateRoomUI/CreateRoomModel/CreateRoomManagerModel"),v=t("./ClubConfig"),E=t("../../View/UIHelp"),A=t("../../../Game/GuanDan/GameEvent"),P=t("../Network/SocketUtils"),b=t("./RoomRecommondAss"),U=t("../../View/Common/DialogUI"),S=t("../../../FriendTeam/FriendTeamModel"),T=t("../../../HallGround/HallGroundModel"),R=t("../../../Hall/HallModel");n.MAX_GUID_RISE_TRIGGER_COUNT=2,n.STOP_TRIGGER_GUID_RISE_DAY=3,function(t){t[t.NEWBIE_LEVEL=0]="NEWBIE_LEVEL",t[t.PRIMARY_LEVEL=1]="PRIMARY_LEVEL",t[t.MIDDLE_LEVEL=2]="MIDDLE_LEVEL",t[t.HIGH_LEVEL=3]="HIGH_LEVEL",t[t.MASTER_LEVEL=4]="MASTER_LEVEL",t[t.LOCALTYCOON_LEVEL=5]="LOCALTYCOON_LEVEL",t[t.SUPREME_LEVEL=6]="SUPREME_LEVEL"}(n.RoomLevelEnum||(n.RoomLevelEnum={})),function(t){t[t.DEFALUT=0]="DEFALUT",t[t.CLUBS_LIST=1]="CLUBS_LIST",t[t.MATCH_SLIST=2]="MATCH_SLIST",t[t.BOXS_LIST=4]="BOXS_LIST",t[t.MIXMATCH_LIST=8]="MIXMATCH_LIST",t[t.PALGROUP_LIST=16]="PALGROUP_LIST"}(c=n.ClubShowFlags||(n.ClubShowFlags={})),function(t){t[t.CLOSED=0]="CLOSED",t[t.OPEN=1]="OPEN"}(l=n.RoomStatusForCut||(n.RoomStatusForCut={}));var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._plazaVer={},e._plazaConfig={},e._clubConfig={},e._isHadReqPlazaList={},e._playerCount={},e._roomRecAss=null,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return p.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return m.RoomProxy.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._roomRecAss=new b.RoomRecommondAss},e.prototype.isLastLoginEnvChanged=function(){var t=localStorage.getItem(""+f.LocalStorageKey.LAST_LOGIN_ENV)||null;return h.DataBfConfig.ENV!==t},e.prototype.setLastLoginEnv=function(){localStorage.setItem(""+f.LocalStorageKey.LAST_LOGIN_ENV,h.DataBfConfig.ENV)},e.prototype.getRecRoomInfo=function(t,e){return this._roomRecAss.getRecRoomInfo(t,e)},e.prototype.getRecRoomInfoByGameID=function(t,e){return this._roomRecAss.getRecRoomInfoByGameID(t,e)},e.prototype.getRecPlazaSubIDByCarryGold=function(t,e,n,o,a){return this._roomRecAss.findQuickStartSuitblePlaza(t,e,n,o,a)},e.prototype.getPlazaGoldArea=function(t,e){return this._roomRecAss.getPlazaGoldArea(t,e)},e.prototype.getRoomDesc=function(t){var e=this.getPlazaInfoBySubID(t);return this.parsePlazaFullName(e.name)},e.prototype.parsePlazaSingleName=function(t){var e=t.split("-");if(void 0===e)return"";var n=e[1];return-1!==n.indexOf("\u9ad8\u624b")&&(n="\u9ad8\u7ea7\u573a"),n},e.prototype.parsePlazaFullName=function(t){return-1!==t.indexOf("\u8fc7A")?t.replace("\u63bc\u86cb","").replace("\u8fc7A\u573a","\u8fc7A"):t.replace("\u63bc\u86cb","").replace("\u73a9\u6cd5","").replace("\u9ad8\u624b\u573a","\u9ad8\u7ea7\u573a")},e.prototype.parseLocalStorageRoomInfo=function(){var t=this;this.isLastLoginEnvChanged()&&Object.values(h.GameIDInfo).forEach(function(t){localStorage.removeItem(f.LocalStorageKey.PLAZA_VER+"_"+t.id),localStorage.removeItem(f.LocalStorageKey.PLAZA_CONFIG+"_"+t.id),localStorage.removeItem(""+f.LocalStorageKey.CLUB_CONFIG)}),this.setLastLoginEnv(),Object.values(h.GameIDInfo).forEach(function(e){var n=JSON.parse(localStorage.getItem(f.LocalStorageKey.PLAZA_VER+"_"+e.id)||null);t._plazaVer[e.id]=n||{};var o=JSON.parse(localStorage.getItem(f.LocalStorageKey.PLAZA_CONFIG+"_"+e.id)||null);t._plazaConfig[e.id]=o||{};var a=JSON.parse(localStorage.getItem(""+f.LocalStorageKey.CLUB_CONFIG)||null);t._clubConfig=a||{}})},e.prototype.setPlazaVer=function(t,e,n){var o=this._plazaVer[t];o||(o=this._plazaVer[t]={}),o[n]=e,localStorage.setItem(f.LocalStorageKey.PLAZA_VER+"_"+t,JSON.stringify(this._plazaVer[t]))},e.prototype.getPlazaVer=function(t,e){return this._plazaVer[t]&&this._plazaVer[t][e]||0},e.prototype.setOriginPlazaConfig=function(t,e){localStorage.setItem(f.LocalStorageKey.ORIGIN_PLAZA_CONFIG+"_"+t,JSON.stringify(e))},e.prototype.getOriginPlazaConfig=function(t){var e=localStorage.getItem(f.LocalStorageKey.ORIGIN_PLAZA_CONFIG+"_"+t);return e&&JSON.parse(e)},e.prototype.setPlazaConfig=function(t,e,n){var o=this._plazaConfig[t];o||(o=this._plazaConfig[t]={}),o[e]=n,localStorage.setItem(f.LocalStorageKey.PLAZA_CONFIG+"_"+t,JSON.stringify(this._plazaConfig[t]))},e.prototype.getPlazaConfig=function(t,e,n,o){if(void 0===n&&(n=!1),h.GameIDInfo.CLASSIC_GD.id===t)return o?this.getClassicMultPlazaList():this.getClassicNormalPlazaList(n);var a=this._plazaConfig[t][e];return this.resetPlazaInfoLine(a),a},e.prototype.getClassicNormalPlazaList=function(t){var e,n,o,a,i=[],s=this._plazaConfig[h.GameIDInfo.CLASSIC_GD.id];if(s&&s[c.CLUBS_LIST])try{for(var l=r(Object.values(s[c.CLUBS_LIST])),u=l.next();!u.done;u=l.next()){var d=u.value;h.GameIDInfo.CLASSIC_GD.id===d.gameID&&0===d.multType&&i.push(d)}}catch(f){e={error:f}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}if(i=this.sortPlazaList(i),!t&&(s=this._plazaConfig[h.GameIDInfo.PASSA_GD.id])&&s[c.CLUBS_LIST])try{for(var p=r(Object.values(s[c.CLUBS_LIST])),_=p.next();!_.done;_=p.next())d=_.value,h.GameIDInfo.PASSA_GD.id===d.gameID&&i.push(d)}catch(m){o={error:m}}finally{try{_&&!_.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}return this.resetPlazaInfoLine(i),i},e.prototype.getClassicMultPlazaList=function(){var t,e,n=[],o=this._plazaConfig[h.GameIDInfo.CLASSIC_GD.id];if(o&&o[c.CLUBS_LIST])try{for(var a=r(Object.values(o[c.CLUBS_LIST])),i=a.next();!i.done;i=a.next()){var s=i.value;h.GameIDInfo.CLASSIC_GD.id===s.gameID&&0<s.multType&&n.push(Object.deepCopy(s))}}catch(l){t={error:l}}finally{try{i&&!i.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return n=this.sortPlazaList(n),this.resetPlazaInfoLine(n),n},e.prototype.sortPlazaList=function(t){var e,n,o=[];try{for(var a=r(Object.values(t)),i=a.next();!i.done;i=a.next()){var s=i.value;o.push(s)}}catch(c){e={error:c}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return o.sort(function(t,e){return t.iconID-e.iconID}),o},e.prototype.resetPlazaInfoLine=function(t){if(t.length>0&&t.length<=3)t.forEach(function(t){t.line=1});else if(t.length>=4){var e=0;t.forEach(function(t){t.line=e<3?1:2,e++})}},e.prototype.setClubConfig=function(t,e){this._clubConfig[t]=e,localStorage.setItem(""+f.LocalStorageKey.CLUB_CONFIG,JSON.stringify(this._clubConfig))},e.prototype.getClubConfig=function(t){if(void 0!==t)return this._clubConfig[t]},e.prototype.getQuickRecommendLowRate=function(t){var e=this.getClubInfoBySubID(t),n=0;return e&&(n=e.quickLowRate),0===n?2:n},e.prototype.getGuidRiseHighRate=function(t){var e=this.getClubInfoBySubID(t).riseHighRate||0;return 0===e?.75:e},e.prototype.guidToHighPlazaInGame=function(t,e){return this._roomRecAss.guidToHighPlazaInGame(t,e)},e.prototype.getClubConfigByGameIDAndClubMode=function(t,e){var n=this._clubConfig;for(var o in n){var a=n[o];if(t===a.gameID&&e===a.clubmode)return a}},e.prototype.setHadReqPlazaList=function(t,e){var n=this._isHadReqPlazaList[t];n||(n=this._isHadReqPlazaList[t]={}),n[e]=!0},e.prototype.getHadReqPlazaList=function(t,e){e=e||c.CLUBS_LIST;var n=this._isHadReqPlazaList[t];return n&&n[e]||!1},e.prototype.getClubIDBysubID=function(t){var e=this.getPlazaInfoBySubID(t);return e&&e.clubID},e.prototype.getClubInfoBySubID=function(t){var e=this.getClubIDBysubID(t);return this.getClubConfig(e)},e.prototype.getPlazaInfoBySubID=function(t,e){var n,o,a,i,c,l;if(e){var u=this._plazaConfig[e];try{for(var d=r(Object.values(u)),p=d.next();!p.done;p=d.next()){var h=p.value;try{for(var _=(a=void 0,r(h)),f=_.next();!f.done;f=_.next())if((y=f.value).subID===t)return y}catch(M){a={error:M}}finally{try{f&&!f.done&&(i=_.return)&&i.call(_)}finally{if(a)throw a.error}}}}catch(v){n={error:v}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}}else try{for(var m=r(Object.entries(this._plazaConfig)),g=m.next();!g.done;g=m.next()){var y,I=s(g.value,2),C=I[0];if(I[1],y=this.getPlazaInfoBySubID(t,Number(C)))return y}}catch(E){c={error:E}}finally{try{g&&!g.done&&(l=m.return)&&l.call(m)}finally{if(c)throw c.error}}},e.prototype.getPlazainfoByLevel=function(t,e,n,o){var a,i,s=this.getPlazaConfig(e,c.CLUBS_LIST,o,n);try{for(var l=r(s),u=l.next();!u.done;u=l.next()){var d=u.value;if(d.iconID==t)return d}}catch(p){a={error:p}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}},e.prototype.getPlazasByGameIDAndClubShowFlag=function(t,e){var n=this._plazaConfig[t];return n&&n[e]},e.prototype.checkIsPassLevelTaskRoom=function(t){return this.getPlazaInfoBySubID(t).taskLevel>0},e.prototype.checkIsMixPassARoom=function(t){var e=this.getClubInfoBySubID(t);return!(!e||1!==e.mixPassA)},e.prototype.checkIsCallMultStep=function(t){var e=this.getClubInfoBySubID(t);return!(!e||1!==e.callMultFlag)},e.prototype.checkIsMultRoom=function(t){return this.getPlazaInfoBySubID(t).multType>0},e.prototype.checkIsMultCrit=function(t){return 5==this.getPlazaInfoBySubID(t).multType},e.prototype.checkIsBroadMult=function(t){return this.getPlazaInfoBySubID(t).broadMult>1},e.prototype.reqClubPlazaList=function(t,e,n){this._reqClubPlazaList(t,e,function(t,e){n&&n(t,e)})},e.prototype._reqClubPlazaList=function(t,e,n){m.RoomProxy.instance.reqClubShowList(function(t,e){t?console.log(">>HallModel._reqClubPlazaList.success:",e):console.log(">>HallModel._reqClubPlazaList.faied:",e),n&&n(t,e)},t,e)},e.prototype.reqPlayerCount=function(t,e,n){this.proxy.reqPlayerCount(t,e,n)},e.prototype.reqJoinRoom=function(t,e){var n=this;m.RoomProxy.instance.reqJoinRoom(t,e,function(t,e){n.enterGameUI(t,e)})},e.prototype.reqStartPartnerChange=function(t,e){m.RoomProxy.instance.reqStartPartnerChange(t,e)},e.prototype.enterGameUI=function(t,e){this.respEnterGame(t,e)},e.prototype.respEnterGame=function(t,e){E.UIHelp.instance.hideLoading(),t?this.doEnterGameSuccess():m.JoinRoomFlag.INROOM===e?this.doEnterGameInRoom():m.JoinRoomFlag.LESS_SR===e?this.doEnterGameLessGold():m.JoinRoomFlag.MORE_SR===e?this.doEnterGameMoreGold():m.JoinRoomFlag.GOLD_LIMIT===e?this.doEnterGameGoldLimit():this.doEnterGameOtherFailed(e)},e.prototype.doEnterGameSuccess=function(){var t=I.UserInfoModel.instance.getUserLocation();t&&g.GameCommonModel.instance.setGameId(t.gameid),I.UserInfoModel.instance.clearUserLocation(),y.UIManager.instance.isExist(C.GameUI)?(g.GameCommonModel.instance.isStartGameListener()||(g.GameCommonModel.instance.startListener(),P.SocketUtils.instance.popEmitEvent()),u.EventManager.instance.emit(A.GameEvent.REFRESH_PLAZA_TEXT)):(g.GameCommonModel.instance.startListener(),u.EventManager.instance.emit(_.DataEvent.EnterGameTable))},e.prototype._doEnterGameInRoom=function(){var t=this;E.UIHelp.instance.hideLoading(),R.default.instance.isHasAppOtherLocation()?R.default.instance.showBackToAppHint():E.UIHelp.instance.showDialogConfirmCancel("\u60a8\u5df2\u5728\u5176\u4ed6\u623f\u95f4\u6e38\u620f\uff0c\u662f\u5426\u524d\u5f80?",function(e){e&&t.haveRoomBackGame()})},e.prototype.haveRoomBackGame=function(){var t=this;this.proxy.reqUserLocation(function(e){if(0===e){var n=I.UserInfoModel.instance.getUserLocation(),o={gameID:n.gameid,clubID:n.clubid,subID:n.subid,appID:n.appid,playID:n.playid,playKey:n.playkey,callback:t.respEnterGame.bind(t)};if(R.default.instance.isHasAppOtherLocation())return void R.default.instance.showBackToAppHint();v.ClubModeEnum.FRIEND_ROOM===n.clubmode?(g.GameCommonModel.instance.setGameId(n.gameid),M.CreateRoomManagerModel.instance.joinGame(o)):t.proxy.reqEnterGame(o)}else u.EventManager.instance.emit(_.DataEvent.ToastData,"\u672c\u5c40\u6e38\u620f\u5df2\u7ed3\u675f\uff0c\u53ef\u91cd\u65b0\u5f00\u59cb\u6e38\u620f~")})},e.prototype.doEnterGameLessGold=function(){u.EventManager.instance.emit(_.DataEvent.ToastData,"\u60a8\u7684\u91d1\u5e01\u4e0d\u8db3\uff0c\u52a0\u5165\u623f\u95f4\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55~")},e.prototype.doEnterGameMoreGold=function(){u.EventManager.instance.emit(_.DataEvent.ToastData,"\u60a8\u7684\u91d1\u5e01\u8fc7\u591a\uff0c\u52a0\u5165\u623f\u95f4\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55~")},e.prototype.doEnterGameGoldLimit=function(){u.EventManager.instance.emit(_.DataEvent.ToastData,"\u4eca\u65e5\u8f93\u8d62\u5df2\u8fbe\u4e0a\u9650\uff0c\u8bf7\u660e\u65e5\u7ee7\u7eed\u6e38\u620f~")},e.prototype.doEnterGameOtherFailed=function(t){void 0===t&&(t=-1),u.EventManager.instance.emit(_.DataEvent.ToastData,"\u52a0\u5165\u623f\u95f4\u5931\u8d25, \u8bf7\u91cd\u65b0\u52a0\u5165\u54e6~ code="+t)},e.prototype.doEnterGameInRoom=function(){this._doEnterGameInRoom()},e.prototype.doEnterGameInFriendTeam=function(t,e,n,o,a){E.UIHelp.instance.hideLoading(),y.UIManager.instance.open(U.DialogUI).then(function(i){i.initFTConfirmCancelClose({content:"\u60a8\u8fd8\u6709\u7ec4\u961f\u961f\u4f0d\u672a\u89e3\u6563\uff0c\u662f\u5426\u89e3\u6563\n\u5e76\u7acb\u5373\u5f00\u59cb\u65b0\u7684\u6e38\u620f\uff1f",btnFTConfirm:"\u8fd4\u56de\u961f\u4f0d",btnFTCancel:"\u7acb\u5373\u5f00\u59cb"}),i.confirmAction=function(){var t=I.UserInfoModel.instance.getPartnerLocation();t&&S.FriendTeamModel.instance.joinTeam(t.partnerid,t.partnertype)},i.cancelAction=function(){S.FriendTeamModel.instance.leaveTeam(function(){I.UserInfoModel.instance.clearPartnerLocation(),T.HallGroundModel.instance.reqEnterGame(t,e,n,o,a)})}})},e.prototype.setUserCount=function(t,e){this._playerCount[t]=e},e.prototype.getUserCount=function(t){return this._playerCount[t]||0},e.prototype.getLastEnterGameInfo=function(){return this.proxy.getLastEnterGameInfo()},e.prototype.getFriendTeamLastEnterGameInfo=function(){return this.proxy.getFriendTeamLastEnterGameInfo()},e.prototype.queryUserLocation=function(t){this.proxy.reqUserLocation(t)},e.prototype.reqCreateBox=function(t,e,n){var o=this;m.RoomProxy.instance.reqCreateBox(t,e,function(t,e){o.respEnterBox(t,e),n&&n()})},e.prototype.respEnterBox=function(t,e){t?this.doEnterBoxSuccess():m.JoinRoomFlag.INROOM===e.code?this.doEnterGameInRoom():this.doEnterGameOtherFailed()},e.prototype.doEnterBoxSuccess=function(){y.UIManager.instance.isExist(C.GameUI)||(g.GameCommonModel.instance.startListener(),u.EventManager.instance.emit(_.DataEvent.EnterGameTable))},e.prototype.reqQueryRoomStatus=function(t,e,n){this.proxy.reqQueryRoomStatus(t,e,function(t,e){0===t?n&&n(e===l.CLOSED):n&&n(!1)})},i([jsClass],e)}(d.BaseModel);n.RoomModel=w,cc.systemEvent.once("GameRoot.inited",function(){p.ModelRoot.instance.add(w)}),cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Manager/UIManager":"UIManager","../../../../Framework/Model/BaseModel":"BaseModel","../../../../Framework/Root/ModelRoot":"ModelRoot","../../../CreateRoomUI/CreateRoomModel/CreateRoomManagerModel":"CreateRoomManagerModel","../../../FriendTeam/FriendTeamModel":"FriendTeamModel","../../../Game/Common/GameCommonModel":"GameCommonModel","../../../Game/GuanDan/GameEvent":"GameEvent","../../../Game/GuanDan/GameUI":"GameUI","../../../Hall/HallModel":"HallModel","../../../HallGround/HallGroundModel":"HallGroundModel","../../../UserInfo/UserInfoModel":"UserInfoModel","../../Data/DataBfConfig":"DataBfConfig","../../Data/DataEvent":"DataEvent","../../Data/DataLocalStorageKey":"DataLocalStorageKey","../../View/Common/DialogUI":"DialogUI","../../View/UIHelp":"UIHelp","../Network/SocketUtils":"SocketUtils","./ClubConfig":"ClubConfig","./RoomProxy":"RoomProxy","./RoomRecommondAss":"RoomRecommondAss"}],RoomProxy:[function(t,e,n){"use strict";cc._RF.push(e,"29962lRzw1CW7ZSEIdVVZkW","RoomProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.RoomProxy=n.UserLocationEnum=n.JoinRoomFlag=void 0;var c,l=t("../../../../Framework/Manager/EventManager"),u=t("../../../../Framework/Proxy/BaseProxy"),d=t("../../../../Framework/Root/ProxyRoot"),p=t("../../Data/DataBfConfig"),h=t("../../Data/DataEvent"),_=t("../../Data/DataLocalStorageKey"),f=t("../../Utils/UtilClub"),m=t("../../Utils/UtilTool"),g=t("../Network/Base/Processid"),y=t("../Network/Base/ProtocolManager"),I=t("../Network/protocol/ClubGameProtocol"),C=t("../Network/protocol/ClubLobbyProtocol"),M=t("../Network/SocketUtils"),v=t("../../../UserInfo/UserInfoModel"),E=t("./RoomModel"),A=t("../../../Game/Common/GameCommonModel"),P=t("../../../FriendTeam/FriendTeamModel");(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.INROOM=110]="INROOM",t[t.NOT_INGAME=111]="NOT_INGAME",t[t.LESS_SR=131]="LESS_SR",t[t.MORE_SR=132]="MORE_SR",t[t.GOLD_LIMIT=133]="GOLD_LIMIT"})(c=n.JoinRoomFlag||(n.JoinRoomFlag={})),function(t){t[t.GAME_FINISH=51]="GAME_FINISH"}(n.UserLocationEnum||(n.UserLocationEnum={}));var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._joinRoomClubParam={},e._respClubShowListCall=null,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return d.ProxyRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return E.RoomModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=this;M.SocketUtils.instance.register(g.Processid.clubLobby,club.client.lobby.MSGID.RESP_CLUBSHOWLIST,this,function(e){t._respClubShowListCall&&t._respClubShowListCall(e)})},e.prototype.reqClubShowList=function(t,e,n){var o=this;n=n||E.ClubShowFlags.CLUBS_LIST,this._reqGameID=e,this._clubShowFlag=n,M.SocketUtils.instance.notify(new C.ClubLobbyProtocol.ReqClubShowList({askid:0,reqflags:n|E.ClubShowFlags.CLUBS_LIST,gameid:e,version:this.model.getPlazaVer(e,n)}));var a=[],i=this._clubShowFlag,s=this._reqGameID;this._respClubShowListCall=function(e){var n,c,u,d,p=f.UtilClub.dealClubErrorCode(e.errcode);if(0===p.code){if(console.log(">-----\x3eHallProxy: respClubShowList succeed"),a.push(e.filechunk.content),e.filechunk.index+1===e.filechunk.total){var _=0;try{for(var m=r(a),g=m.next();!g.done;g=m.next())_+=(v=g.value).length}catch(b){n={error:b}}finally{try{g&&!g.done&&(c=m.return)&&c.call(m)}finally{if(n)throw n.error}}var y=new Uint8Array(_),I=0;try{for(var C=r(a),M=C.next();!M.done;M=C.next()){var v=M.value;y.set(v,I),I+=v.length}}catch(U){u={error:U}}finally{try{M&&!M.done&&(d=C.return)&&d.call(C)}finally{if(u)throw u.error}}a=[];var A=bf33.Utils.bytesToString(y),P=null;try{P=JSON.parse(A),E.RoomModel.instance.setOriginPlazaConfig(s,P)}catch(S){console.error("respClubShowList",S)}o.dealClubs(P.clubs,i),o.dealClubsubs(P.clubsubs,i),o.model.setPlazaVer(s,e.version,i),o.model.setHadReqPlazaList(s,i),t&&t(!0,s),l.EventManager.instance.emit(h.DataEvent.PlazaInfoUpdate,s)}}else"4c"===p.mode&&"1"===p.type&&101===p.code?(console.log(">-----\x3eHallProxy:respClubShowList.version\u7248\u672c\u4e00\u6837"),(P=E.RoomModel.instance.getOriginPlazaConfig(o._reqGameID))&&(o.dealClubs(P.clubs,o._clubShowFlag),o.dealClubsubs(P.clubsubs,o._clubShowFlag)),o.model.setHadReqPlazaList(o._reqGameID,o._clubShowFlag),t&&t(!0,o._reqGameID)):(console.error(">-----\x3eHallProxy:respClubShowList.failed"),t&&t(!1,o._reqGameID))}},e.prototype.dealClubs=function(t,e){var n,o;try{for(var a=r(Object.entries(t)),i=a.next();!i.done;i=a.next()){var c=s(i.value,2),l=c[0],u=c[1],d={};d.areaID=u.areaid,d.clubmode=u.clubmode,d.clubrule=u.clubrule,d.config=u.config,d.gameID=u.gameid,d.gamerule=u.gamerule,d.clubID=u.id,d.joinrule=u.joinrule,d.quickLowRate=m.UtilTool.getLuaIntValue(u.joinrule,"quickLowRate")/100,d.riseHighRate=m.UtilTool.getLuaIntValue(u.joinrule,"riseHighRate")/100,d.mixPassA=m.UtilTool.getLuaIntValue(u.gamerule,"MixPassA"),d.callMultFlag=m.UtilTool.getLuaIntValue(u.gamerule,"CallMultFlag"),d.keyword=u.keyword,d.maxbreakcnt=u.maxbreakcnt,d.maxbreaktime=u.maxbreaktime,d.maxseats=u.maxseats,d.minseats=u.minseats,d.name=u.name,d.playrule=u.playrule,d.playtype=u.playtype,d.quitrule=u.quitrule,d.clubShowFlag=e,this.model.setClubConfig(Number(l),d)}}catch(p){n={error:p}}finally{try{i&&!i.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}},e.prototype.dealClubsubs=function(t,e){var n,o,a,i;if(t){var c={};try{for(var l=r(Object.entries(t)),u=l.next();!u.done;u=l.next()){var d=s(u.value,2),p=(d[0],d[1]),h={};h.base=m.UtilTool.getLuaIntValue(p.joinrule,"base"),h.minSr=m.UtilTool.getLuaIntValue(p.joinrule,"min"),h.maxSr=m.UtilTool.getLuaIntValue(p.joinrule,"max"),h.fitMinSr=m.UtilTool.getLuaIntValue(p.joinrule,"fitMinSR"),h.fitMaxSr=m.UtilTool.getLuaIntValue(p.joinrule,"fitMaxSR"),h.gameID=m.UtilTool.getLuaIntValue(p.joinrule,"gameid"),h.line=m.UtilTool.getLuaIntValue(p.joinrule,"line"),h.multType=m.UtilTool.getLuaIntValue(p.joinrule,"MultType"),h.sortID=m.UtilTool.getLuaIntValue(p.joinrule,"sortID"),h.quickBeginSortID=m.UtilTool.getLuaIntValue(p.joinrule,"quickBeginSortID"),h.passLevel=m.UtilTool.getLuaIntValue(p.joinrule,"passLevel"),h.partnerMax=m.UtilTool.getLuaIntValue(p.joinrule,"partnerMax",h.maxSr),h.partnerService=m.UtilTool.getLuaIntValue(p.joinrule,"partnerService"),h.broadMult=m.UtilTool.getLuaIntValue(p.joinrule,"broadMult"),h.taskLevel=m.UtilTool.getLuaIntValue(p.gamerule,"taskLevel"),h.usePropSrLimit=m.UtilTool.getLuaIntValue(p.gamerule,"usePropSrLimit"),h.clubID=p.clubid,h.subID=p.id,h.name=p.name,h.iconID=p.iconid,h.clubShowFlag=e,c[h.gameID]=c[h.gameID]||{},c[h.gameID][h.subID]=h}}catch(M){n={error:M}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}try{for(var _=r(Object.entries(c)),f=_.next();!f.done;f=_.next()){var g=s(f.value,2),y=g[0],I=g[1],C=this.model.sortPlazaList(I);this.model.setPlazaConfig(Number(y),e,C)}}catch(v){a={error:v}}finally{try{f&&!f.done&&(i=_.return)&&i.call(_)}finally{if(a)throw a.error}}}},e.prototype.reqUserLocation=function(t){M.SocketUtils.instance.notify(new C.ClubLobbyProtocol.ReqUserLocation({askid:0,gameid:0,clubid:0})),M.SocketUtils.instance.registerOnce(g.Processid.clubLobby,club.client.lobby.MSGID.RESP_USERLOCATION,this,function(e){var n=f.UtilClub.dealClubErrorCode(e.errcode),o=f.UtilClub.dealClubErrorCode(e.partnererrcode);if(0===n.code){var a=e.userlocations[0];v.UserInfoModel.instance.setUserLocation(a)}else v.UserInfoModel.instance.clearUserLocation();0===o.code?(a=e.partnerLocation,v.UserInfoModel.instance.setPartnerLocation(a)):v.UserInfoModel.instance.clearPartnerLocation(),0!==n.code&&l.EventManager.instance.emit(h.DataEvent.FriendTeamNotifyLocation,o.code),l.EventManager.instance.emit(h.DataEvent.NotifyLocationSuccess),t&&t(n.code)})},e.prototype.reqCreateBox=function(t,e,n){var o=this;M.SocketUtils.instance.notify(new C.ClubLobbyProtocol.ReqCreateBox({askid:0,clubid:t,rules:bf33.Utils.stringToBytes(e)})),M.SocketUtils.instance.registerOnce(g.Processid.clubLobby,club.client.lobby.MSGID.RESP_CREATEBOX,this,function(t){var e=f.UtilClub.dealClubErrorCode(t.errcode),a={};if(a.code=e.code,c.SUCCESS===e.code){a.roomid=t.appid;var i={clubID:t.clubid,appID:t.appid,playID:t.boxid,playKey:t.boxkey};o.reqEnterBox(i,function(t,e){a.msg="\u8fdb\u5165\u5305\u53a2code:"+e,n&&n(t,a)})}else a.msg="\u521b\u5efa\u623f\u95f4\u5f02\u5e38code:"+e.code,n&&n(!1,a)})},e.prototype.reqEnterBox=function(t,e){y.ProtocolManager.instance.setProcess2Appid(g.Processid.clubGame,t.appID),M.SocketUtils.instance.notify(new I.ClubGameProtocol.ReqEnterBox({clubid:t.clubID,boxid:t.playID,boxkey:t.playKey})),M.SocketUtils.instance.registerOnce(g.Processid.clubGame,club.client.game.MSGID.RESP_ENTERBOX,this,function(n){var o=f.UtilClub.dealClubErrorCode(n.errcode);c.SUCCESS===o.code?(A.GameCommonModel.instance.saveRoomInfo(t,E.ClubShowFlags.BOXS_LIST),console.log("reqEnterBox.subid:"+t.subID),e&&e(!0,o.code)):e&&e(!1,o.code)})},e.prototype.reqJoinBox=function(t,e){M.SocketUtils.instance.notify(new C.ClubLobbyProtocol.ReqJoinBox({boxid:t})),M.SocketUtils.instance.registerOnce(g.Processid.clubLobby,club.client.lobby.MSGID.RESP_JOINBOX,this,function(t){var n=f.UtilClub.dealClubErrorCode(t.errcode),o=n.code,a={};a.code=o,0===o||210===o?(a.flag=0,a.tableid=t.clubid,a.roomid=t.appid,a.roomNum=t.boxkey,a.gameid=t.gameid,a.boxid=t.boxid,a.boxkey=t.boxkey,a.clubid=t.clubid,a.appid=t.appid,0===t.errcode?a.msg="\u52a0\u5165\u5305\u53a2\u6210\u529f\uff01":210===t.errcode&&(a.msg="\u60a8\u5df2\u7ecf\u5728\u5305\u53a2\u4e2d!")):a.msg=110===o?"\u60a8\u5df2\u7ecf\u5728\u5176\u4ed6\u5305\u53a2\u4e2d!":121===o?"\u6709\u73a9\u5bb6ip\u76f8\u540c\uff0c\u65e0\u6cd5\u5750\u4e0b\uff01!":126===o?"\u8be5\u597d\u53cb\u623f\u73a9\u5bb6\u5df2\u6ee1\uff0c\u5165\u5ea7\u5931\u8d25!":"\u8be5\u597d\u53cb\u623f\u4e0d\u5b58\u5728!",e&&e(0===n.code,a)})},e.prototype.reqJoinRoom=function(t,e,n){var o=this,a=this.model.getClubIDBysubID(t);this._joinRoomClubParam.clubID=a,this._joinRoomClubParam.subID=t,this._joinRoomClubParam.enterType=e,this._joinRoomClubParam.callback=n,M.SocketUtils.instance.notify(new C.ClubLobbyProtocol.ReqJoinGame({askid:0,clubid:a,subid:t})),M.SocketUtils.instance.registerOnce(g.Processid.clubLobby,club.client.lobby.MSGID.RESP_JOINGAME,this,function(t){var e=f.UtilClub.dealClubErrorCode(t.errcode);c.SUCCESS===e.code?(console.log(">-----\x3eRoomProxy.ReqJoinGame.success~:"),o._joinRoomClubParam.appID=t.appid,o._joinRoomClubParam.playID=t.playid,o._joinRoomClubParam.playKey=t.playkey||0,o.reqEnterGame(o._joinRoomClubParam)):c.INROOM===e.code?(console.log(">-----\x3eerror_RoomProxy.ReqJoinGame:\u5df2\u5728\u5176\u5b83\u623f\u95f4\u4e2d~"),n&&n(!1,e.code)):c.LESS_SR===e.code?(console.log(">-----\x3eerror_RoomProxy.ReqJoinGame:\u91d1\u5e01\u4e0d\u8db3\u4e0b\u9650~"),n&&n(!1,e.code)):c.MORE_SR===e.code?(console.log(">-----\x3eerror_RoomProxy.ReqJoinGame:\u91d1\u5e01\u8d85\u8fc7\u4e0a\u9650~"),n&&n(!1,e.code)):(console.error(">-----\x3eRoomProxy.ReqJoinGame:\u5176\u5b83\u9519\u8bef~"),n&&n(!1,e.code))})},e.prototype.reqStartPartnerChange=function(t,e){var n=this.model.getClubIDBysubID(t),o=P.FriendTeamModel.instance.getFriendTeamAppId();y.ProtocolManager.instance.setProcess2Appid(g.Processid.clubGame,o),M.SocketUtils.instance.notify(new I.ClubGameProtocol.ReqStartPartnerChange({askid:0,partnerid:e,selectclub:n,selectsubid:t}))},e.prototype.reqEnterGame=function(t){var e,n=this,o=new I.ClubGameProtocol.ReqEnterGame({askid:0,clubid:t.clubID,subid:t.subID,playid:t.playID,playkey:t.playKey,entertype:t.enterType||0});o.clientinfo={clienttype:club.client.game.ReqEnterGame.ClientInfo.CLIENTTYPE.CT_WEB,ostype:(e=club.client.game.ReqEnterGame.ClientInfo.OSTYPE.OT_UNKNOWN,cc.sys.OS_ANDROID===cc.sys.os?e=club.client.game.ReqEnterGame.ClientInfo.OSTYPE.OT_ANDROID:cc.sys.OS_IOS===cc.sys.os?e=club.client.game.ReqEnterGame.ClientInfo.OSTYPE.OT_IOS:cc.sys.OS_WINDOWS===cc.sys.os&&(e=club.client.game.ReqEnterGame.ClientInfo.OSTYPE.OT_WINDOWS),e),osver:p.DataBfConfig.osVersion,channelid:p.DataBfConfig.ymn.channel,identify:bf33.Utils.stringToBytes("")},y.ProtocolManager.instance.setProcess2Appid(g.Processid.clubGame,t.appID),M.SocketUtils.instance.notify(o),M.SocketUtils.instance.registerOnce(g.Processid.clubGame,club.client.game.MSGID.RESP_ENTERGAME,this,function(e){n.enterGameRespFunc(e,t)})},e.prototype.enterGameRespFunc=function(t,e){var n=f.UtilClub.dealClubErrorCode(t.errcode);0===n.code?(t.partnerid?(P.FriendTeamModel.instance.updateLastSelectPlayType(),this.saveFriendTeamLastEnterGameInfo(e),A.GameCommonModel.instance.saveFriendTeamInfo(t)):this.saveLastEnterGameInfo(e),A.GameCommonModel.instance.saveRoomInfo(e,E.ClubShowFlags.CLUBS_LIST),A.GameCommonModel.instance.setEnterType(e.enterType||0),e.callback&&e.callback(!0,n.code)):(console.error(">------\x3eRoomProxy.reqEnterGame_failed,code=",n.code),e.callback&&e.callback(!1,n.code))},e.prototype.saveLastEnterGameInfo=function(t){if(t&&t.subID){var e=this.model.getPlazaInfoBySubID(t.subID);if(e){var n=v.UserInfoModel.instance.userInfo.numID;cc.sys.localStorage.setItem(_.LocalStorageKey.LAST_ENTER_GAMEINFO+"_"+n,JSON.stringify(e)),cc.sys.localStorage.setItem(_.LocalStorageKey.LAST_ENTER_GAMEINFO+"_"+n+"_"+e.gameID,JSON.stringify(e))}}},e.prototype.saveFriendTeamLastEnterGameInfo=function(t){if(t&&t.subID){var e=this.model.getPlazaInfoBySubID(t.subID);if(e){var n=v.UserInfoModel.instance.userInfo.numID;cc.sys.localStorage.setItem(_.LocalStorageKey.LAST_ENTER_GAMEINFO_FRIEND_TEAM+"_"+n,JSON.stringify(e))}}},e.prototype.getLastEnterGameInfo=function(){var t=v.UserInfoModel.instance.userInfo.numID,e=cc.sys.localStorage.getItem(_.LocalStorageKey.LAST_ENTER_GAMEINFO+"_"+t);return e&&JSON.parse(e)},e.prototype.getLastEnterGameInfoByGameID=function(t){var e=v.UserInfoModel.instance.userInfo.numID,n=cc.sys.localStorage.getItem(_.LocalStorageKey.LAST_ENTER_GAMEINFO+"_"+e+"_"+t);return n&&JSON.parse(n)},e.prototype.getFriendTeamLastEnterGameInfo=function(){var t=v.UserInfoModel.instance.userInfo.numID,e=cc.sys.localStorage.getItem(_.LocalStorageKey.LAST_ENTER_GAMEINFO_FRIEND_TEAM+"_"+t);return e&&JSON.parse(e)},e.prototype.reqPlayerCount=function(t,e,n){var o,a;n=n||E.ClubShowFlags.CLUBS_LIST;var i=this.model.getPlazasByGameIDAndClubShowFlag(e,n);if(i){var s=[];try{for(var c=r(i),l=c.next();!l.done;l=c.next()){var u=l.value,d={};d.clubid=u.clubID,d.subid=u.subID,s.push(d)}}catch(_){o={error:_}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(o)throw o.error}}var h=new C.ClubLobbyProtocol.ReqClubStat({askid:0,areaid:p.DataBfConfig.areaID,infos:s});M.SocketUtils.instance.notify(h),M.SocketUtils.instance.registerOnce(g.Processid.clubLobby,club.client.lobby.MSGID.RESP_CLUBSTAT,this,this.onClubStatResp.bind(this,e,t))}else t&&t(!1)},e.prototype.onClubStatResp=function(t,e,n){var o,a,i=f.UtilClub.dealClubErrorCode(n.errcode);if(0===i.code){try{for(var s=r(n.clubstats),c=s.next();!c.done;c=s.next()){var u=c.value;E.RoomModel.instance.setUserCount(u.subid,u.users)}}catch(d){o={error:d}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}l.EventManager.instance.emit(h.DataEvent.PlazaOnlineUpdate,t)}else console.error(">-----\x3eerror.LoginProxy.RESP_CLUBSTAT:",i.code);e&&e(0===i.code)},e.prototype.reqQueryRoomStatus=function(t,e,n){console.warn("test__reqQueryRoomStatus:",t,e),M.SocketUtils.instance.notify(new C.ClubLobbyProtocol.ReqQueryRoomStatus({club_id:t,app_id:e})),M.SocketUtils.instance.registerOnce(g.Processid.clubLobby,club.client.lobby.MSGID.RESP_QUERY_ROOM_STATUS,this,function(t){var e,o=f.UtilClub.dealClubErrorCode(t.err_code);console.warn("test__resqQueryRoomStatus.p:",t),console.warn("test__resqQueryRoomStatus.clubError:",o),0===o.code?e=t.room_status:console.error("reqQueryRoomStatus.error:",o.code),n&&n(o.code,e)})},i([jsClass],e)}(u.BaseProxy);n.RoomProxy=b,cc.systemEvent.once("GameRoot.inited",function(){d.ProxyRoot.instance.add(b)}),cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Proxy/BaseProxy":"BaseProxy","../../../../Framework/Root/ProxyRoot":"ProxyRoot","../../../FriendTeam/FriendTeamModel":"FriendTeamModel","../../../Game/Common/GameCommonModel":"GameCommonModel","../../../UserInfo/UserInfoModel":"UserInfoModel","../../Data/DataBfConfig":"DataBfConfig","../../Data/DataEvent":"DataEvent","../../Data/DataLocalStorageKey":"DataLocalStorageKey","../../Utils/UtilClub":"UtilClub","../../Utils/UtilTool":"UtilTool","../Network/Base/Processid":"Processid","../Network/Base/ProtocolManager":"ProtocolManager","../Network/SocketUtils":"SocketUtils","../Network/protocol/ClubGameProtocol":"ClubGameProtocol","../Network/protocol/ClubLobbyProtocol":"ClubLobbyProtocol","./RoomModel":"RoomModel"}],RoomRecommondAss:[function(t,e,n){"use strict";cc._RF.push(e,"976703gnVJMeLAMea2kCZCB","RoomRecommondAss");var o,a,i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.RoomRecommondAss=void 0;var r=t("./RoomModel"),s=t("../../Data/DataBfConfig"),c=t("../../../UserInfo/UserInfoModel"),l=t("./ClubConfig"),u=t("../../../Game/Common/PlayerInfoModel"),d=t("../../../Game/Common/GameCommonModel"),p=((o={})[s.GameIDInfo.CLASSIC_GD.id]=[{subID:l.ClubSubIDConfig.CLASSIC_GD.PRIMARY,higher:l.ClubSubIDConfig.CLASSIC_GD.MIDDLE},{lower:l.ClubSubIDConfig.CLASSIC_GD.PRIMARY,subID:l.ClubSubIDConfig.CLASSIC_GD.MIDDLE,higher:l.ClubSubIDConfig.CLASSIC_GD.HIGH},{lower:l.ClubSubIDConfig.CLASSIC_GD.MIDDLE,subID:l.ClubSubIDConfig.CLASSIC_GD.HIGH,higher:l.ClubSubIDConfig.CLASSIC_GD.MASTER},{lower:l.ClubSubIDConfig.CLASSIC_GD.HIGH,subID:l.ClubSubIDConfig.CLASSIC_GD.MASTER,higher:l.ClubSubIDConfig.CLASSIC_GD.LOCALTYCOON},{lower:l.ClubSubIDConfig.CLASSIC_GD.MASTER,subID:l.ClubSubIDConfig.CLASSIC_GD.LOCALTYCOON}],o[s.GameIDInfo.ERREN_GD.id]=[{subID:l.ClubSubIDConfig.ERREN_GD.PRIMARY,higher:l.ClubSubIDConfig.ERREN_GD.MIDDLE},{lower:l.ClubSubIDConfig.ERREN_GD.PRIMARY,subID:l.ClubSubIDConfig.ERREN_GD.MIDDLE,higher:l.ClubSubIDConfig.ERREN_GD.HIGH},{lower:l.ClubSubIDConfig.ERREN_GD.MIDDLE,subID:l.ClubSubIDConfig.ERREN_GD.HIGH,higher:l.ClubSubIDConfig.ERREN_GD.MASTER},{lower:l.ClubSubIDConfig.ERREN_GD.HIGH,subID:l.ClubSubIDConfig.ERREN_GD.MASTER}],o[s.GameIDInfo.NO_SHUFFLE_GD.id]=[{subID:l.ClubSubIDConfig.NO_SHUFFLE_GD.PRIMARY,higher:l.ClubSubIDConfig.NO_SHUFFLE_GD.MIDDLE},{lower:l.ClubSubIDConfig.NO_SHUFFLE_GD.PRIMARY,subID:l.ClubSubIDConfig.NO_SHUFFLE_GD.MIDDLE,higher:l.ClubSubIDConfig.NO_SHUFFLE_GD.HIGH},{lower:l.ClubSubIDConfig.NO_SHUFFLE_GD.MIDDLE,subID:l.ClubSubIDConfig.NO_SHUFFLE_GD.HIGH,higher:l.ClubSubIDConfig.NO_SHUFFLE_GD.MASTER},{lower:l.ClubSubIDConfig.NO_SHUFFLE_GD.HIGH,subID:l.ClubSubIDConfig.NO_SHUFFLE_GD.MASTER}],o[s.GameIDInfo.TTZ_GD.id]=[{subID:l.ClubSubIDConfig.TTZ_GD.PRIMARY,higher:l.ClubSubIDConfig.TTZ_GD.MIDDLE},{lower:l.ClubSubIDConfig.TTZ_GD.PRIMARY,subID:l.ClubSubIDConfig.TTZ_GD.MIDDLE,higher:l.ClubSubIDConfig.TTZ_GD.HIGH},{lower:l.ClubSubIDConfig.TTZ_GD.MIDDLE,subID:l.ClubSubIDConfig.TTZ_GD.HIGH}],o[s.GameIDInfo.PASSA_GD.id]=[{subID:l.ClubSubIDConfig.PASSA_GD.PRIMARY,higher:l.ClubSubIDConfig.PASSA_GD.HIGH},{lower:l.ClubSubIDConfig.PASSA_GD.PRIMARY,subID:l.ClubSubIDConfig.PASSA_GD.HIGH}],o),h=((a={})[s.GameIDInfo.CLASSIC_GD.id]=[{subID:l.ClubSubIDConfig.MULT_GD.PRIMARY,higher:l.ClubSubIDConfig.MULT_GD.MIDDLE},{lower:l.ClubSubIDConfig.MULT_GD.PRIMARY,subID:l.ClubSubIDConfig.MULT_GD.MIDDLE,higher:l.ClubSubIDConfig.MULT_GD.HIGH},{lower:l.ClubSubIDConfig.MULT_GD.MIDDLE,subID:l.ClubSubIDConfig.MULT_GD.HIGH,higher:l.ClubSubIDConfig.MULT_GD.MASTER},{lower:l.ClubSubIDConfig.MULT_GD.HIGH,subID:l.ClubSubIDConfig.MULT_GD.MASTER,higher:l.ClubSubIDConfig.MULT_GD.LOCALTYCOON},{lower:l.ClubSubIDConfig.MULT_GD.MASTER,subID:l.ClubSubIDConfig.MULT_GD.LOCALTYCOON,higher:l.ClubSubIDConfig.MULT_GD.SUPREME},{lower:l.ClubSubIDConfig.MULT_GD.LOCALTYCOON,subID:l.ClubSubIDConfig.MULT_GD.SUPREME}],a),_=function(){function t(){this._lastGameID=null,this._isFriendTeam=!1}return t.prototype.getRecRoomInfo=function(t,e){var n,o=s.GameIDInfo.CLASSIC_GD.id,a=!0,i=null;return(n=t?r.RoomModel.instance.getFriendTeamLastEnterGameInfo():r.RoomModel.instance.getLastEnterGameInfo())&&(i=r.RoomModel.instance.getPlazaInfoBySubID(n.subID)),n&&i&&(e&&s.GameIDInfo.NO_SHUFFLE_GD.id===n.gameID?(o=s.GameIDInfo.CLASSIC_GD.id,a=!0):(o=n.gameID,a=n.multType>0)),this._lastGameID=o,this.getRecPlazaInfo(o,a)},t.prototype.getRecRoomInfoByGameID=function(t,e){return e=!!e,this.getRecPlazaInfo(t,e)},t.prototype.getRecPlazaInfo=function(t,e){var n=0;if(d.GameCommonModel.instance.isGoldTeamModel()){var o=u.PlayerInfoModel.instance.getNowPlayerGold(),a=d.GameCommonModel.instance.getFriendGold();n=a<o?a:o}else n=Number(c.UserInfoModel.instance.userInfo.gold);var i=this.findQuickStartSuitblePlaza(n,t,e);return r.RoomModel.instance.getPlazaInfoBySubID(i)},t.prototype.findQuickStartSuitblePlaza=function(t,e,n,o,a){this._isFriendTeam=!0===a;var i=0;if(o||s.GameIDInfo.CLASSIC_GD.id!==e||n||s.GameIDInfo.PASSA_GD.id===this._lastGameID&&(e=this._lastGameID),s.GameIDInfo.PASSA_GD.id===e)return i=this.getDefaultminSubIDByGameID(e,n),(i=this.searchFromLowToHigh(i,t,e,n))?i:(e=s.GameIDInfo.CLASSIC_GD.id,this.findQuickStartSuitblePlaza(t,e,n,!0));if(i=this.getDefaultMaxSubIDByGameID(e,n),i=this.searchFromHignToLow(i,t,e,n))return i;i=this.getDefaultminSubIDByGameID(e,n);var r=this.getPlazaGoldArea(i);return r?t<r.min?i:i=this.searchFromLowToHigh(i,t,e,n):void 0},t.prototype.searchFromHignToLow=function(t,e,n,o){for(var a=this.getPlazaGoldArea(t),i=r.RoomModel.instance.getQuickRecommendLowRate(t);a&&e<i*a.min;){var s=this.getLowerPlaza(n,t,o);if(!s)break;t=s,a=this.getPlazaGoldArea(t)}if(e>=a.min&&(e<=a.max||0===a.max))return t},t.prototype.searchFromLowToHigh=function(t,e,n,o){for(var a=this.getPlazaGoldArea(t);a&&e>=a.min;){if(0===a.max||e<=a.max)return t;var i=this.getHighPlaza(n,t,o);i&&(t=i,a=this.getPlazaGoldArea(t))}},t.prototype.getDefaultMaxSubIDByGameID=function(t,e){var n;if(n=e?h[t]:p[t],this._isFriendTeam)for(var o=n.length-1;o>=0;o--){var a=n[o].subID;if((i=r.RoomModel.instance.getPlazaInfoBySubID(a))&&i.iconID===r.RoomLevelEnum.MASTER_LEVEL)return a}else for(o=n.length-1;o>=0;o--){var i;if(a=n[o].subID,i=r.RoomModel.instance.getPlazaInfoBySubID(a))return a}},t.prototype.getDefaultminSubIDByGameID=function(t,e){var n;n=e?h[t]:p[t];for(var o=0;o<n.length;o++){var a=n[o].subID;if(r.RoomModel.instance.getPlazaInfoBySubID(a))return a}},t.prototype.getPlazaGoldArea=function(t,e){var n=null,o=r.RoomModel.instance.getPlazaInfoBySubID(t);return o&&(n=this._isFriendTeam||e?{min:o.minSr,max:o.partnerMax}:{min:o.minSr,max:o.maxSr}),n},t.prototype.getLowerPlaza=function(t,e,n){var o=this.getRecElement(t,e,n);if(r.RoomModel.instance.getPlazaInfoBySubID(o.lower))return o.lower},t.prototype.getHighPlaza=function(t,e,n){var o=this.getRecElement(t,e,n);if(r.RoomModel.instance.getPlazaInfoBySubID(o.higher))return o.higher},t.prototype.getRecElement=function(t,e,n){var o,a,r;r=n?h:p;try{for(var s=i(r[t]),c=s.next();!c.done;c=s.next()){var l=c.value;if(l.subID===e)return l}}catch(u){o={error:u}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}console.log(">-----\x3eRoomRecommondAss:not find subid:",e)},t.prototype.guidToHighPlazaInGame=function(t,e){var n=r.RoomModel.instance.getPlazaInfoBySubID(e),o=n.multType>0,a=this.getHighPlaza(n.gameID,n.subID,o),i=this.getPlazaGoldArea(a);if(i)for(;i&&t>=i.min;){if(0===i.max||t<=i.max)return a;var s=this.getHighPlaza(n.gameID,a,o);s&&(a=s,i=this.getPlazaGoldArea(a))}},t}();n.RoomRecommondAss=_,cc._RF.pop()},{"../../../Game/Common/GameCommonModel":"GameCommonModel","../../../Game/Common/PlayerInfoModel":"PlayerInfoModel","../../../UserInfo/UserInfoModel":"UserInfoModel","../../Data/DataBfConfig":"DataBfConfig","./ClubConfig":"ClubConfig","./RoomModel":"RoomModel"}],RuleAgreementUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"c339bjQmf5Glacoh07L7R4I","RuleAgreementUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./RuleAgreementUI_MainPanel"),a=t("./RuleAgreementUI_Window"),i=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default)},t}();n.default=i,cc._RF.pop()},{"./RuleAgreementUI_MainPanel":"RuleAgreementUI_MainPanel","./RuleAgreementUI_Window":"RuleAgreementUI_Window"}],RuleAgreementUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"55bf6Pkv3VAgL+Uipllwk4n","RuleAgreementUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("RuleAgreementUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://1wxyf628qofx0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],RuleAgreementUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"7e3b9KolRFJ4pUXNpNLDi2H","RuleAgreementUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("RuleAgreementUI","Window")},e.prototype.onConstruct=function(){this.m_tab=this.getControllerAt(0),this.m_btnExit=this.getChildAt(1),this.m_content=this.getChildAt(2)},e.URL="ui://1wxyf628qofx1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],RuleAgreementUI:[function(t,e,n){"use strict";cc._RF.push(e,"57ac2Y8GRFACLHJAigRNHe6","RuleAgreementUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.RuleAgreementUI=void 0;var s=t("../../Framework/UI/FadeUI"),c=t("../../Framework/Manager/CoroutineManager"),l=t("../Base/Data/DataConstant"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._loaders=[],e}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.view.m_Window.m_btnExit.onClick(this.onExitClick,this)},e.prototype.init=function(t){this.view.m_Window.m_tab.selectedPage=t,this.refreshContent()},e.prototype.refreshContent=function(){this._refreshCo&&c.CoroutineManager.instance.stopCo(this._refreshCo),this._refreshCo=c.CoroutineManager.instance.startCo(this.doRefreshContent(),this)},e.prototype.doRefreshContent=function(){var t,e,n,o,a,i,s;return r(this,function(u){switch(u.label){case 0:this.view.m_Window.m_content.scrollPane.scrollTop(),this._loaders.forEach(function(t){t.icon=null,t.visible=!1,t.height=0,t.y=0}),t=this.view.m_Window.m_tab.selectedPage,cc.assetManager.loadRemote(l.DataConstant.RES_PATH.WEB+"/"+t+".json",function(t,n){var o;e=(null===(o=null==n?void 0:n.json)||void 0===o?void 0:o.list)||[]}),u.label=1;case 1:return e?[3,3]:[4,null];case 2:return u.sent(),[3,1];case 3:n=0,o=function(t){var o,i,s;return r(this,function(r){switch(r.label){case 0:return o=l.DataConstant.RES_PATH.WEB+"/"+e[t],(i=a.getLoader(t)).icon=o,[4,c.CoroutineManager.instance.wait(function(){return!i.loadingExternal},function(){},a)];case 1:return r.sent(),i.texture&&(i.visible=!0,i.y=n,s=i.width?i.parent.width/i.width:1,i.setScale(s,s),n+=i.height*s),[2]}})},a=this,i=0,s=e.length,u.label=4;case 4:return i<s?[5,o(i,s)]:[3,7];case 5:u.sent(),u.label=6;case 6:return++i,[3,4];case 7:return this.view.m_Window.m_content.ensureBoundsCorrect(),this._refreshCo=null,[2]}})},e.prototype.getLoader=function(t){var e=this._loaders[t];return e||(e=new fgui.GLoader,this.view.m_Window.m_content.addChild(e),e.autoSize=!0,e.visible=!1,e.autoRelease=!0,this._loaders.push(e)),e},i([jsClass],e)}(s.FadeUI);n.RuleAgreementUI=u,cc._RF.pop()},{"../../Framework/Manager/CoroutineManager":"CoroutineManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataConstant":"DataConstant"}],RuleUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"058acg8ZkNErbV8DPJaIpEN","RuleUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./RuleUI_MainPanel"),a=t("./RuleUI_Window"),i=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default)},t}();n.default=i,cc._RF.pop()},{"./RuleUI_MainPanel":"RuleUI_MainPanel","./RuleUI_Window":"RuleUI_Window"}],RuleUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"9e4aeVJ34JPvr67ITwFqXrV","RuleUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("RuleUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://dywoziadf2ul1d",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],RuleUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"30d610hek1C27Mv3nsMfpZd","RuleUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("RuleUI","Window")},e.prototype.onConstruct=function(){this.m_tab=this.getControllerAt(0),this.m_btnExit=this.getChildAt(1)},e.URL="ui://dywoziadf2ul1q",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],RuleUI:[function(t,e,n){"use strict";cc._RF.push(e,"303a3rmsgpGer6uYdnISD7x","RuleUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.RuleUI=void 0;var r=t("../../Framework/UI/FadeUI"),s=t("./RuleUI/RuleUIBinder"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){s.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initUI()},e.prototype.initUI=function(){this.view.m_Window.m_tab.selectedIndex=0},e.prototype.initListener=function(){this.view.m_Window.m_btnExit.onClick(this.onExitClick,this)},i([jsClass],e)}(r.FadeUI);n.RuleUI=c,cc._RF.pop()},{"../../Framework/UI/FadeUI":"FadeUI","./RuleUI/RuleUIBinder":"RuleUIBinder"}],Scope:[function(t,e,n){"use strict";cc._RF.push(e,"95213M4p5FIp6nKjLwHEo2P","Scope"),Object.defineProperty(n,"__esModule",{value:!0}),n.Scope=void 0,function(t){t.userInfo="scope.userInfo",t.userLocation="scope.userLocation",t.userLocationBackground="scope.userLocationBackground",t.address="scope.address",t.invoiceTitle="scope.invoiceTitle",t.invoice="scope.invoice",t.werun="scope.werun",t.record="scope.record",t.writePhotosAlbum="scope.writePhotosAlbum",t.camera="scope.camera",t.friendsList="scope.WxFriendInteraction",t.wxFriendInteraction="scope.WxFriendInteraction"}(n.Scope||(n.Scope={})),cc._RF.pop()},{}],ServerListenerModel:[function(t,e,n){"use strict";cc._RF.push(e,"42f42O9ZdFHgLBT6iAxt4BX","ServerListenerModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ServerListenerModel=void 0;var s=t("../../../../Framework/Manager/EventManager"),c=t("../../../../Framework/Model/BaseModel"),l=t("../../../../Framework/Root/ModelRoot"),u=t("../../Data/DataEvent"),d=t("../../../UserInfo/UserInfoModel"),p=t("./ServerListenerProxy"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._delayUpdateAwards={},e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return l.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return p.ServerListenerProxy.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){s.EventManager.instance.on(u.DataEvent.JoinAwardListener,this,this.onAwardListener),s.EventManager.instance.on(u.DataEvent.DelayAwardListener,this,this.onDelayAwardListener),s.EventManager.instance.on(u.DataEvent.IMServerListener,this,this.onIMListener)},e.prototype.onAwardListener=function(){this.proxy.startAwardListener()},e.prototype.onIMListener=function(){this.proxy.startIMListener()},e.prototype.onDelayAwardListener=function(t){this._delayUpdateAwards[t]&&(console.log("onDelayAwardListener:",t,this._delayUpdateAwards[t]),this.syncWealth(this._delayUpdateAwards[t]),this._delayUpdateAwards[t]=null)},e.prototype.setDelayUpdateAwards=function(t,e){this._delayUpdateAwards[t]=e},e.prototype.syncWealth=function(t){var e,n;if(t.diamond&&d.UserInfoModel.instance.setUserInfo({diamond:t.diamond}),t.gold&&(d.UserInfoModel.instance.setUserInfo({gold:t.gold}),s.EventManager.instance.emit(u.DataEvent.PlazaRecommond)),t.props&&Array.isArray(t.props)&&0!==t.props.length){try{for(var o=r(t.props),a=o.next();!a.done;a=o.next()){var i=a.value;d.UserInfoModel.instance.addProp(i.propid,i.count)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}s.EventManager.instance.emit(u.DataEvent.UpdateProp)}},e.prototype.notifySyncRichData=function(t){s.EventManager.instance.emit(u.DataEvent.SyncRichData,t)},e.prototype.notifyForbidAccount=function(){s.EventManager.instance.emit(u.DataEvent.NotifyForbidAccount)},i([jsClass],e)}(c.BaseModel);n.ServerListenerModel=h,cc.systemEvent.once("GameRoot.inited",function(){l.ModelRoot.instance.add(h)}),cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Model/BaseModel":"BaseModel","../../../../Framework/Root/ModelRoot":"ModelRoot","../../../UserInfo/UserInfoModel":"UserInfoModel","../../Data/DataEvent":"DataEvent","./ServerListenerProxy":"ServerListenerProxy"}],ServerListenerProxy:[function(t,e,n){"use strict";cc._RF.push(e,"beb12B6R39If4nahTG+fxeP","ServerListenerProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ServerListenerProxy=void 0;var r,s=t("../../../../Framework/Proxy/BaseProxy"),c=t("../../../../Framework/Root/ProxyRoot"),l=t("../../Data/DataScript"),u=t("../../../Game/Common/GameMultTaskUI/GameMultTaskModel"),d=t("../../../Game/Common/GameWinMoreUI/GameWinMoreModel"),p=t("../../../Game/Common/PassLevelTaskUI/PassLevelTaskModel"),h=t("../Network/Base/Processid"),_=t("../Network/SocketUtils"),f=t("./ServerListenerModel"),m=t("../../Utils/UtilTool"),g=t("../../../../Framework/Manager/EventManager"),y=t("../../../Match/MatchConstant"),I=t("../../../Activity/YearBeast/YearBeastModel");(function(t){t[t.BAN_ACCOUNT=10001]="BAN_ACCOUNT"})(r||(r={}));var C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return c.ProxyRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return f.ServerListenerModel.instance},enumerable:!1,configurable:!0}),e.prototype.stopListener=function(){_.SocketUtils.instance.unregisterByCaller(this)},e.prototype.startAwardListener=function(){_.SocketUtils.instance.register(h.Processid.srs,SRS.MSGID.MSGID_REQSYNCDATA,this,this.onReqSyncData)},e.prototype.startIMListener=function(){_.SocketUtils.instance.register(h.Processid.im,im_cli.ClientXYID.kPublishMsg,this,this.onPublishMsg)},e.prototype.onReqSyncData=function(t){console.log(">>ServerListenerProxy.onReqSyncData_p:",t);var e=bf33.Utils.bytesToString(t.param);if(console.log(">>ServerListenerProxy.onReqSyncData_msg:",e),l.DataScript.syncWealth.id===t.type){var n=JSON.parse(e),o={gold:n.sr,diamond:n.yb,props:n.add_props};this.model.syncWealth(o),this.model.notifySyncRichData(n)}else if(l.DataScript.moreWin.id===t.type)(_=JSON.parse(e))&&_.file===l.DataScript.moreWin.file&&d.GameWinMoreModel.instance.setData(_);else if(l.DataScript.passLevelTask.id===t.type){if(_=JSON.parse(e)){var a={level:_.level,state:_.state,subID:_.subID};p.PassLevelTaskModel.instance.updateLevelInfoDetail(a)}}else if(l.DataScript.gameMultTask.id===t.type){if(_=JSON.parse(e)){var i={id:_.id,rate:_.rate,state:_.state};u.GameMultTaskModel.instance.updateActivityRateInfo(i)}}else if(r.BAN_ACCOUNT===t.type)this.model.notifyForbidAccount();else if(l.DataScript.YearBeast.id===t.type){if(_=JSON.parse(e)){var s={taskInfos:[]};if(_.taskInfos){for(var c=0;c<_.taskInfos.length;c++){var h={id:_.taskInfos[c].id,state:_.taskInfos[c].state,rate:_.taskInfos[c].rate,timestamp:_.taskInfos[c].timestamp};s.taskInfos[h.id-1]=h}I.YearBeastModel.instance.updateTaskInfo(s)}}}else if(l.DataScript.syncCredit.id===t.type){var _=JSON.parse(e);console.log("ttt.Match:",_),g.EventManager.instance.emit(y.MatchDataEvent.SyncMatchCredit,_.total_credit)}else if(l.DataScript.syncMatchProp.id===t.type)console.log("ttt.Match: SyncMatchProp"),g.EventManager.instance.emit(y.MatchDataEvent.SyncMatchProp);else if(l.DataScript.syncMatchInfo.id===t.type){_=JSON.parse(e),console.log("ttt.Match: syncMatchInfo:",_);var f={matchid:_.matchid,matchsubid:_.matchsubid,appid:_.appid,roundIndex:_.roundI,matchstatus:_.matchstatus};g.EventManager.instance.emit(y.MatchDataEvent.SyncMatchStart,f)}},e.prototype.onPublishMsg=function(t){if(2==t.type){var e=bf33.Utils.bytesToString(t.msg),n="";if(t.msg_ext.length>0){var o=bf33.Utils.bytesToString(t.msg_ext),a=JSON.parse(o);a&&a.topic&&(n=a.topic)}if("gdmatch"!=n)"gdmatchnew"==n&&(i=JSON.parse(e),console.log("ttt.Match syncMatch new:",i),l.MatchIMType.ELIMINATED==i.type&&g.EventManager.instance.emit(y.MatchDataEvent.MatchEliminate,i)),m.UtilTool.getLuaIntValue(e,"type");else{var i=JSON.parse(e);console.log("ttt.Match: syncMatchInfo:",i);var r={matchid:i.matchid,matchsubid:i.matchsubid,appid:i.appid,roundIndex:i.roundI,matchstatus:i.matchstatus};g.EventManager.instance.emit(y.MatchDataEvent.SyncMatchStart,r)}}},i([jsClass],e)}(s.BaseProxy);n.ServerListenerProxy=C,cc.systemEvent.once("GameRoot.inited",function(){c.ProxyRoot.instance.add(C)}),cc._RF.pop()},{"../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Proxy/BaseProxy":"BaseProxy","../../../../Framework/Root/ProxyRoot":"ProxyRoot","../../../Activity/YearBeast/YearBeastModel":"YearBeastModel","../../../Game/Common/GameMultTaskUI/GameMultTaskModel":"GameMultTaskModel","../../../Game/Common/GameWinMoreUI/GameWinMoreModel":"GameWinMoreModel","../../../Game/Common/PassLevelTaskUI/PassLevelTaskModel":"PassLevelTaskModel","../../../Match/MatchConstant":"MatchConstant","../../Data/DataScript":"DataScript","../../Utils/UtilTool":"UtilTool","../Network/Base/Processid":"Processid","../Network/SocketUtils":"SocketUtils","./ServerListenerModel":"ServerListenerModel"}],SettingModel:[function(t,e,n){"use strict";cc._RF.push(e,"f04450u5/dJ9qZmv3yceXTK","SettingModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.SettingModel=n.DubbingSexEnum=void 0;var r=t("../../Framework/Manager/AudioManager"),s=t("../../Framework/Manager/EventManager"),c=t("../../Framework/Model/BaseModel"),l=t("../../Framework/Root/ModelRoot"),u=t("../Base/Data/DataEvent"),d=t("../Base/Data/DataSound"),p=t("../Base/Utils/UtilTool"),h=t("../UserInfo/UserInfoModel"),_=t("../UserInfo/UserInfoProxy");(function(t){t[t.FEMALE=0]="FEMALE",t[t.MALE=1]="MALE"})(n.DubbingSexEnum||(n.DubbingSexEnum={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.STORAGE_KEY="gdh5.Setting",e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return l.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._settingData},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initSettingData()},e.prototype.initSettingData=function(){var t,e=localStorage.getItem(this.STORAGE_KEY);e&&void 0!==e&&(t=JSON.parse(e)),this._settingData=Object.assign({Music:!0,Sound:!0,isLiPaiHeng:!1},t),this.updateMusicEnabled(),this.updateSoundEnabled()},e.prototype.updateMusicEnabled=function(){r.AudioManager.instance.musicEnabled=this._settingData.Music},e.prototype.updateSoundEnabled=function(){r.AudioManager.instance.effectEnabled=this._settingData.Sound},e.prototype.setSettingData=function(t){var e=p.UtilTool.setData(this._settingData,t);e&&s.EventManager.instance.emit(u.DataEvent.SettingDataUpdate,e)},e.prototype.saveSetingData=function(){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this._settingData))},e.prototype.changeDubbingSex=function(t){var e={type:_.BindTypeEnum.CHANGE_SEX,sex:t};h.UserInfoModel.instance.bindUserInfo(e,function(e,n){e?n.sex&&(d.DataSound.setDubbingSex(t),h.UserInfoModel.instance.setUserInfo({sex:t})):s.EventManager.instance.emit(u.DataEvent.ToastData,"\u914d\u97f3\u4fee\u6539\u5931\u8d25,\u7a0d\u5fae\u518d\u8bd5\u54e6~")})},e.prototype.getDubbingSex=function(){return h.UserInfoModel.instance.userInfo.sex},e.prototype.isLiPaiHorizonal=function(){return this.data.isLiPaiHeng},i([jsClass],e)}(c.BaseModel);n.SettingModel=f,cc.systemEvent.once("GameRoot.inited",function(){l.ModelRoot.instance.add(f)}),cc._RF.pop()},{"../../Framework/Manager/AudioManager":"AudioManager","../../Framework/Manager/EventManager":"EventManager","../../Framework/Model/BaseModel":"BaseModel","../../Framework/Root/ModelRoot":"ModelRoot","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataSound":"DataSound","../Base/Utils/UtilTool":"UtilTool","../UserInfo/UserInfoModel":"UserInfoModel","../UserInfo/UserInfoProxy":"UserInfoProxy"}],SettingUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"92f6bf1WwJCIq5nX2AV1hFf","SettingUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./SettingUI_Window"),a=t("./SettingUI_MainPanel"),i=t("./SettingUI_GuanDanGameSettingPanel"),r=t("./SettingUI_GuanDanGameSettingWindow"),s=t("./SettingUI_RadioButton"),c=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default)},t}();n.default=c,cc._RF.pop()},{"./SettingUI_GuanDanGameSettingPanel":"SettingUI_GuanDanGameSettingPanel","./SettingUI_GuanDanGameSettingWindow":"SettingUI_GuanDanGameSettingWindow","./SettingUI_MainPanel":"SettingUI_MainPanel","./SettingUI_RadioButton":"SettingUI_RadioButton","./SettingUI_Window":"SettingUI_Window"}],SettingUI_GuanDanGameSettingPanel:[function(t,e,n){"use strict";cc._RF.push(e,"278a2OCQeJMpoQdlrpbxaP1","SettingUI_GuanDanGameSettingPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("SettingUI","GuanDanGameSettingPanel")},e.prototype.onConstruct=function(){this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://dtbym1rzrvgk1x",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],SettingUI_GuanDanGameSettingWindow:[function(t,e,n){"use strict";cc._RF.push(e,"a2a62Em6ANDEJ+QVAVfR9rZ","SettingUI_GuanDanGameSettingWindow");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("SettingUI","GuanDanGameSettingWindow")},e.prototype.onConstruct=function(){this.m_CSelectCardDirection=this.getControllerAt(0),this.m_CDubbing=this.getControllerAt(1),this.m_bg=this.getChildAt(0),this.m_btnExit=this.getChildAt(1),this.m_musicBtn=this.getChildAt(2),this.m_soundBtn=this.getChildAt(3),this.m_btnMaleDubbing=this.getChildAt(4),this.m_btnFemaleDubbing=this.getChildAt(5),this.m_btnHorizontalCard=this.getChildAt(6),this.m_btnVerticalCard=this.getChildAt(7),this.m_fixBtn=this.getChildAt(10),this.m_btnCustomer=this.getChildAt(11)},e.URL="ui://dtbym1rzrvgk1y",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],SettingUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"024a7oIvENDPbr5Q3eZHV1a","SettingUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("SettingUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://dtbym1rzf2ule",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],SettingUI_RadioButton:[function(t,e,n){"use strict";cc._RF.push(e,"6f342/MXcJBaqBLHAWrUw79","SettingUI_RadioButton");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("SettingUI","RadioButton")},e.prototype.onConstruct=function(){this.m_strTitle=this.getChildAt(2)},e.URL="ui://dtbym1rzvwva1z",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],SettingUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"61a5dIrgMlGs59f7xoeCMmS","SettingUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("SettingUI","Window")},e.prototype.onConstruct=function(){this.m_CVersion=this.getControllerAt(0),this.m_CDubbing=this.getControllerAt(1),this.m_bg=this.getChildAt(0),this.m_btnExit=this.getChildAt(1),this.m_musicBtn=this.getChildAt(2),this.m_soundBtn=this.getChildAt(3),this.m_btnRule=this.getChildAt(4),this.m_btnService=this.getChildAt(5),this.m_btnMaleDubbing=this.getChildAt(6),this.m_btnFemaleDubbing=this.getChildAt(7),this.m_btnUserAgreement=this.getChildAt(8),this.m_btnHidden=this.getChildAt(9),this.m_btnParent=this.getChildAt(10),this.m_TxtVersion=this.getChildAt(17)},e.URL="ui://dtbym1rzf2ulc",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],SettingUI:[function(t,e,n){"use strict";cc._RF.push(e,"e793fMSJrtOR7aNgkKsyQbp","SettingUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.RuleEnum=void 0;var r,s=t("../../Framework/Manager/UIManager"),c=t("../../Framework/UI/FadeUI"),l=t("../Base/Data/DataBfConfig"),u=t("../Base/Data/DataSound"),d=t("../Base/Module/BfAnalytics/BfasManager"),p=t("../Base/Module/BfAnalytics/DataPointID"),h=t("../Base/View/UIHelp"),_=t("../Base/Module/Platform/PlatformManager"),f=t("../Base/Module/Platform/_IPlatform"),m=t("../Rule/RuleUI"),g=t("../RuleAgreement/RuleAgreementUI"),y=t("./SettingModel"),I=t("./SettingUI/SettingUIBinder");(function(t){t.USER_XY="yonghu",t.FAMILY_MONITOR="jiazhang",t.PRIVACY_POLICY="yinsi"})(r=n.RuleEnum||(n.RuleEnum={}));var C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){I.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return y.SettingModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initUI()},e.prototype.initListener=function(){this.view.m_Window.m_btnExit.onClick(this.onExitClick,this),this.view.m_Window.m_musicBtn.onClick(this.onBtnSwitchMusic,this),this.view.m_Window.m_soundBtn.onClick(this.onBtnSwitchSound,this),this.view.m_Window.m_btnRule.onClick(this.onBtnRule,this),this.view.m_Window.m_btnService.onClick(this.onBtnCustomer,this),this.view.m_Window.m_btnUserAgreement.onClick(this.onBtnUserXY,this),this.view.m_Window.m_btnHidden.onClick(this.onBtnPrivacy,this),this.view.m_Window.m_btnParent.onClick(this.onBtnFamilyMonitor,this)},e.prototype.initUI=function(){var t=this.model.data;this.view.m_Window.m_musicBtn.selected=t.Music,this.view.m_Window.m_soundBtn.selected=t.Sound,this.view.m_Window.m_CVersion.selectedPage=l.DataBfConfig.ENV,this.view.m_Window.m_TxtVersion.templateVars={ver:l.DataBfConfig.getPackageVersion().toString()},this.view.m_Window.m_btnMaleDubbing.m_strTitle.text="\u7537",this.view.m_Window.m_btnFemaleDubbing.m_strTitle.text="\u5973";var e=this.model.getDubbingSex();this.refreshSexTitleColor(e),this.view.m_Window.m_CDubbing.selectedIndex=e,this.view.m_Window.m_CDubbing.on(fgui.Event.STATUS_CHANGED,this.onDubbingSexChanged,this),_.PlatformManager.instance.supportAct.CUSTOMER||(this.view.m_Window.m_btnService.visible=!1)},e.prototype.onExitClick=function(){this.model.saveSetingData(),t.prototype.onExitClick.call(this)},e.prototype.onBtnSwitchMusic=function(){this.model.setSettingData({Music:this.view.m_Window.m_musicBtn.selected}),this.model.updateMusicEnabled()},e.prototype.onBtnSwitchSound=function(){this.model.setSettingData({Sound:this.view.m_Window.m_soundBtn.selected}),this.model.updateSoundEnabled()},e.prototype.onBtnRule=function(){s.UIManager.instance.open(m.RuleUI)},e.prototype.onBtnCustomer=function(){d.BfasManager.instance.sendEvt(p.CustomerPointID.LOBBY_SETUI_CUSTOMER),h.UIHelp.instance.openCustomerServiceLink(f.CustomerRequestTypeEnum.CUSTOMER_SERVICE)},e.prototype.onBtnUserXY=function(){this.openUrlAgreementUI(r.USER_XY)},e.prototype.onBtnPrivacy=function(){this.openUrlAgreementUI(r.PRIVACY_POLICY)},e.prototype.onBtnFamilyMonitor=function(){this.openUrlAgreementUI(r.FAMILY_MONITOR)},e.prototype.openUrlAgreementUI=function(t){s.UIManager.instance.open(g.RuleAgreementUI).then(function(e){e.init(t)})},e.prototype.onDubbingSexChanged=function(){var t=Number(this.view.m_Window.m_CDubbing.selectedPage);this.model.changeDubbingSex(t),this.refreshSexTitleColor(t)},e.prototype.refreshSexTitleColor=function(t){var e=cc.Color.BLACK;e=cc.Color.fromHEX(e,"#DF7530");var n=cc.Color.BLACK;n=cc.Color.fromHEX(n,"#995600"),u.SexEnum.FEMALE===t?(this.view.m_Window.m_btnMaleDubbing.m_strTitle.color=n,this.view.m_Window.m_btnFemaleDubbing.m_strTitle.color=e):(this.view.m_Window.m_btnMaleDubbing.m_strTitle.color=e,this.view.m_Window.m_btnFemaleDubbing.m_strTitle.color=n)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.view.m_Window.m_CDubbing.off(fgui.Event.STATUS_CHANGED)},i([jsClass],e)}(c.FadeUI);n.default=C,cc._RF.pop()},{"../../Framework/Manager/UIManager":"UIManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataSound":"DataSound","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Platform/PlatformManager":"PlatformManager","../Base/Module/Platform/_IPlatform":"_IPlatform","../Base/View/UIHelp":"UIHelp","../Rule/RuleUI":"RuleUI","../RuleAgreement/RuleAgreementUI":"RuleAgreementUI","./SettingModel":"SettingModel","./SettingUI/SettingUIBinder":"SettingUIBinder"}],ShareManager:[function(t,e,n){"use strict";cc._RF.push(e,"a7a7dnKbQpGr7qMj98362yo","ShareManager");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t};Object.defineProperty(n,"__esModule",{value:!0}),n.ShareManager=n.ShareType=n.DirShareTypeEnum=n.ShareLoadImgTypeEnum=n.ShareCheckTypeEnum=void 0;var c,l,u,d=t("../../../../Framework/Manager/BaseManager"),p=t("../../../../Framework/Manager/CoroutineManager"),h=t("../../../../Framework/Manager/EventManager"),_=t("../../../../Framework/Manager/UIManager"),f=t("../../../../Framework/Root/ManagerRoot"),m=t("../../Data/DataBfConfig"),g=t("../BfAnalytics/BfasManager"),y=t("../../../Login/LoginModel"),I=t("../Platform/Const/PlatformEventType"),C=t("../Platform/PlatformManager"),M=t("../../../UserInfo/UserInfoModel"),v=t("./ShareProxy"),E=t("../../../../Framework/Utils/HttpUtil"),A=t("../../Data/DataConstant"),P=t("../../Data/DataEvent"),b=t("../BfAnalytics/DataPointID");(function(t){t.CLICK_SHARE_BTN="clickWeChat",t.SHARE_SUCCESS="weChatCallback",t.LOGIN_BY_SHARE_LINK="login"})(c||(c={})),function(t){t[t.LINK=1]="LINK",t[t.PICTURE=2]="PICTURE"}(l||(l={})),function(t){t[t.CHECK_BY_TIME=0]="CHECK_BY_TIME",t[t.CHECK_BY_LOAD_IMG=1]="CHECK_BY_LOAD_IMG",t[t.CHECK_BY_VIDEO=2]="CHECK_BY_VIDEO",t[t.DIRECT_GET=3]="DIRECT_GET"}(n.ShareCheckTypeEnum||(n.ShareCheckTypeEnum={})),function(t){t[t.FAILED=0]="FAILED",t[t.SUCCESSED=1]="SUCCESSED"}(n.ShareLoadImgTypeEnum||(n.ShareLoadImgTypeEnum={})),function(t){t[t.BOX_ROOM=1]="BOX_ROOM",t[t.FREE_FRIEND_TEAM=4]="FREE_FRIEND_TEAM",t[t.GOLD_CLASSICAL_TEAM=5]="GOLD_CLASSICAL_TEAM",t[t.GOLD_MULT_TEAM=6]="GOLD_MULT_TEAM",t[t.FRIEND_TEAM_CALL_START=10]="FRIEND_TEAM_CALL_START",t[t.FRIEND_TEAM_CALL_PREPARE=11]="FRIEND_TEAM_CALL_PREPARE",t[t.GOLD_INLINE_TEAM=12]="GOLD_INLINE_TEAM",t[t.INVITE_GIFT=14]="INVITE_GIFT"}(u=n.DirShareTypeEnum||(n.DirShareTypeEnum={}));var U=function(){function t(){}return t.hallShare={needPullPic:!0,point:7e4,key:"Direct_sharing"},t.menuShare={needPullPic:!1,point:70001,key:"menuShare"},t.timeLine={needPullPic:!1,point:70001,key:"timeLine"},t.signInActivityShare={needPullPic:!0,point:70002,key:"signInActivityShare"},t.bankruptcy={needPullPic:!0,point:70003,key:"Tian_share"},t.boxShare={needPullPic:!0,point:70004,shareId:1449,key:"boxShare"},t.directInviteFriend={needPullPic:!0,point:70004,shareId:1450,key:"direct_invite"},t.gameResultShare={needPullPic:!1,point:70005,key:"gameResult"},t.gameLessLoseShare={needPullPic:!0,point:70007,shareId:1428,key:"gameLessLoseShare"},t.gameMoreWinShare={needPullPic:!0,point:70007,shareId:1429,key:"gameMoreWinShare"},t.inviteNewDirShare={needPullPic:!0,point:70009,shareId:1436,key:"inviteNew"},t.bigCardShareWinCnt={needPullPic:!1,point:70010,shareId:1422,key:"bigCardShareWinCnt"},t.bigCardShareMaxMult={needPullPic:!1,point:70010,shareId:1448,key:"bigCardShareMaxMult"},t.luckTurnTableShare={needPullPic:!0,point:70012,key:"luckTurnTableShare"},t.friendFreeTeamShare={needPullPic:!0,point:70011,shareId:1495,key:"newFriendTeamInvite"},t.friendFreeTeamDirShare={needPullPic:!0,point:70011,shareId:1496,key:"newFriendTeamInvite"},t.friendFreeTeamRushDirShare={needPullPic:!0,point:70011,shareId:1497,key:"newFriendTeamInvite"},t.friendGoldTeamShare={needPullPic:!0,point:70011,shareId:1498,key:"goldClassicalFriendTeam"},t.friendGoldTeamDirShare={needPullPic:!0,point:70011,shareId:1499,key:"goldClassicalFriendTeam"},t.friendMultTeamShare={needPullPic:!0,point:70011,shareId:1500,key:"goldMultFriendTeam"},t.friendMultTeamDirShare={needPullPic:!0,point:70011,shareId:1501,key:"goldMultFriendTeam"},t.teamFriendCallStart={needPullPic:!1,point:70017,shareId:1511,key:"teamFriendCallStart"},t.teamFriendCallPrepare={needPullPic:!1,point:70017,shareId:1512,key:"teamFriendCallPrepare"},t.goldInlineTeamAdShare={needPullPic:!1,point:70018,key:"goldInlineTeamAdShare"},t.goldInlineTeamShare={needPullPic:!1,point:70019,key:"goldInlineTeamShare"},t.goldInlineTeamDirShare={needPullPic:!1,point:70020,key:"goldInlineTeamDirShare"},t.goldenEggTicketDoubleFree={needPullPic:!0,point:70021,key:"goldenEggTicketDoubleFree"},t.goldenEggTicketShare={needPullPic:!0,point:70021,key:"goldenEggTicketShare"},t.goldenEggTicketAssist={needPullPic:!0,point:70022,key:"goldenEggTicketAssist"},t.goldenEggTicketInvite={needPullPic:!0,point:70023,key:"goldenEggTicketInvite"},t.welfareTicketShare={needPullPic:!0,point:70021,key:"welfareTicketShare"},t.welfareTicketAssist={needPullPic:!0,point:70022,key:"welfareTicketAssist"},t.welfareTicketInvite={needPullPic:!0,point:70023,key:"welfareTicketInvite"},t.goldenEggSignUpShare={needPullPic:!0,point:70024,key:"goldenEggSignUpShare"},t.goldenEggSignUpAssist={needPullPic:!0,point:70022,key:"goldenEggSignUpAssist"},t.welfareSignUpShare={needPullPic:!0,point:70024,key:"welfareSignUpShare"},t.welfareSignUpAssist={needPullPic:!0,point:70022,key:"welfareSignUpAssist"},t.goldenEggRankShare={needPullPic:!0,point:70025,key:"goldenEggRankShare"},t.welfareRankShare={needPullPic:!0,point:70025,key:"welfareRankShare"},t.goldenEggNoRankShare={needPullPic:!0,point:70021,key:"goldenEggNoRankShare"},t.matchCreditShare={needPullPic:!0,point:70021,key:"matchCreditShare"},t.matchCreditInvite={needPullPic:!0,point:70023,key:"matchCreditInvite"},t.goldenEggInvite={needPullPic:!0,point:70023,key:"goldenEggInvite"},t.inviteGift={needPullPic:!0,point:70028,shareId:1543,key:"inviteGift"},t.matchFreeSignInShare={needPullPic:!0,point:70021,key:"matchFreeSignInShare"},i([jsClass("ShareType")],t)}();n.ShareType=U;var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._turboxConfig={},e.sharePngAuthUrl="https://wxgame2.gameabc2.com/",e}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return f.ManagerRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){h.EventManager.instance.on(I.PlatformEventType.AppShow,this,this.onAppShow,null,!0),C.PlatformManager.instance.platform.onShareAppMessage(this.onShareAppMessage.bind(this)),C.PlatformManager.instance.platform.onShareTimeline(this.onTimeLineShare.bind(this)),this.onAppShow(),this.initConfig()},e.prototype.onAppShow=function(){var t,e=this,n=C.PlatformManager.instance.platform.query,o=null===(t=n.shareMessageToFriendScene)||void 0===t?void 0:t.split("."),a=+(null==o?void 0:o[0]),i=null==o?void 0:o[1];switch(i&&(i=i.padEnd(6,"0")),a){case u.BOX_ROOM:n.type=U.directInviteFriend.key,n.roomNumber=i;break;case u.FREE_FRIEND_TEAM:n.type=U.friendFreeTeamDirShare.key,n.friendTeamid=i;break;case u.GOLD_CLASSICAL_TEAM:n.type=U.friendGoldTeamDirShare.key,n.friendTeamid=i;break;case u.GOLD_MULT_TEAM:n.type=U.friendMultTeamDirShare.key,n.friendTeamid=i;break;case u.FRIEND_TEAM_CALL_START:n.type=U.teamFriendCallStart.key,n.friendTeamid=i;break;case u.FRIEND_TEAM_CALL_PREPARE:n.type=U.teamFriendCallPrepare.key,n.friendTeamid=i;break;case u.GOLD_INLINE_TEAM:n.type=U.goldInlineTeamDirShare.key,n.friendTeamid=i}this._waitPostClickLinkCo&&p.CoroutineManager.instance.stopCo(this._waitPostClickLinkCo),this._waitPostClickLinkCo=p.CoroutineManager.instance.wait(function(){return y.LoginModel.instance.isLoggedIn},function(){e.bfasEvtClickShareCard(+(n.inviterId||0),+(n.inviterChannel||0),n.otherInfo||"",+(n.sharePoint||0),+(n.shareId||0),n.type||"",+(n.shareTime||0),n.shareFrom||"mini",n.version||"")},this)},e.prototype.onShareAppMessage=function(){var t=this;console.log("\u53f3\u4e0a\u89d2\u8f6c\u53d1\u5f00\u59cb");var e=U.menuShare,n=this.getShareArgs(e),o=n.title,a=n.imageUrl,i=n.query,r=n.shareId,s=n.shareTime;return console.log("\u83b7\u53d6\u8f6c\u53d1\u53c2\u6570\u6210\u529f"),this.bfasEvtClickShare(e,r,s,"wxf"),console.log("\u8f6c\u53d1\u4e8b\u4ef6\u629b\u9001\u6210\u529f"),h.EventManager.instance.once(I.PlatformEventType.Share,this,function(){console.log("onShareAppMessage\u8f6c\u53d1\u6210\u529f===>"),t.bfasEvtShareResult(e,r,s,"wxf")}),{title:o,imageUrl:a,query:i}},e.prototype.onTimeLineShare=function(){var t=this,e=U.timeLine,n=this.getShareArgs(e),o=n.title,a=n.imageUrl,i=n.query,r=n.shareId,s=n.shareTime;return this.bfasEvtClickShare(e,r,s,"wxm"),h.EventManager.instance.once(I.PlatformEventType.Share,this,function(){console.log("onTimeLineShare\u8f6c\u53d1\u6210\u529f===>"),t.bfasEvtShareResult(e,r,s,"wxm")}),{title:o,imageUrl:a,query:i}},e.prototype.initConfig=function(){var t=this;p.CoroutineManager.instance.wait(function(){return y.LoginModel.instance.isLoggedIn},function(){var e="GDShareConfig";v.ShareProxy.instance.reqShareConfig().then(function(n){console.log("ShareConfig:",n),t._turboxConfig=n,localStorage.setItem(e,JSON.stringify(n))}).catch(function(n){console.error("\u591a\u5b9d\u76d2\u8bf7\u6c42\u914d\u7f6e\u9519\u8bef",n);try{var o=localStorage.getItem(e);o&&(t._turboxConfig=JSON.parse(o))}catch(n){console.error(n)}})},this)},e.prototype.share=function(t,e,n){var o=this;if(C.PlatformManager.instance.platform.hasShare){var a=this.getShareArgs(t,e),i=a.title,r=a.imageUrl,s=a.query,c=a.shareId,l=a.shareTime,u=cc.sys.OS_IOS!==cc.sys.os&&this.needPullPicToJudge(t),d=this.getShareSteadyUrl();u&&(r=this.sharePngAuthUrl+"lua_share/gdshare/"+c+".png?"+d),this.bfasEvtClickShare(t,c,l,"wxf"),_.UIManager.instance.addTopCollider("Share"),setTimeout(function(){return _.UIManager.instance.removeTopCollider("Share")},2e3),h.EventManager.instance.once(I.PlatformEventType.Share,this,function(e){C.PlatformTypeEnum.Develop===C.PlatformManager.instance.type?n&&n(e,!0,c):u?o.shareSuccess(d,function(t){n&&n(e,t>0,c)}):n&&n(e,null,c),o.bfasEvtShareResult(t,c,l,"wxf")}),C.PlatformManager.instance.platform.shareAppMessage(i,r,s,null==e?void 0:e.activityData)}else h.EventManager.instance.emit(P.DataEvent.ToastData,"\u5f53\u524d\u5e73\u53f0\u4e0d\u652f\u6301\u5206\u4eab~")},e.prototype.getShareArgs=function(t,e){var o=Date.now(),a="shareTime="+o+"&version="+m.DataBfConfig.VERSION,i=M.UserInfoModel.instance.userInfo,r=i.userID||i.openID;a+="&inviterId="+i.numID+"&otherInfo="+r,a+="&type="+(t.key||"default")+"&sharePoint="+t.point+"&channel="+m.DataBfConfig.ymn.channel+"&inviterChannel="+m.DataBfConfig.ymn.channel;var c,u=n.DEFAULT_TITLE,d=n.DEFAULT_IMAGE,p=this.getTurboxShareConfig(t);return p&&(c=p.shareid,l.LINK===p.content_type?(u=p.content.title,d=p.content.icon,a+="&shareId="+c+"&link="+p.content.link.wxf):l.PICTURE===p.content_type&&(u=p.keyword,d=p.content.img_url.wxf,a+="&shareId="+c)),(null==e?void 0:e.titleArgs)&&(u=u.format.apply(u,s(e.titleArgs))),(null==e?void 0:e.forceImageUrl)&&(d=e.forceImageUrl),(null==e?void 0:e.extData)&&(a+="&"+e.extData),{title:u,imageUrl:d,query:a,shareId:c,shareTime:o}},e.prototype.getTurboxShareConfig=function(t){var e,n=null===(e=this._turboxConfig)||void 0===e?void 0:e[t.point];return n?t.shareId?n.find(function(e){return e.shareid===t.shareId}):n[Math.randomRangeInt(0,n.length)]:null},e.prototype.bfasEvtClickShare=function(t,e,n,o){if(t&&t.point){var a=M.UserInfoModel.instance.userInfo;g.BfasManager.instance.sendEvt(b.SharePointID.SHARE,{numId:a.numID,newbie:M.UserInfoModel.instance.isNewRegisterPlayer()?1:0,sharePoint:t.point,shareId:e,shareTime:n,shareKey:t.key,shareEnd:o,channel:m.DataBfConfig.ymn.channel,otherInfo:a.userID||a.openID,version:m.DataBfConfig.VERSION})}},e.prototype.bfasEvtShareResult=function(t,e,n,o){if(t&&t.point){var a=M.UserInfoModel.instance.userInfo;g.BfasManager.instance.sendEvt(b.SharePointID.SHARE_RESULT,{newbie:M.UserInfoModel.instance.isNewRegisterPlayer()?1:0,sharePoint:t.point,shareId:e,shareTime:n,shareKey:t.key,shareEnd:o,channel:m.DataBfConfig.ymn.channel,otherInfo:a.userID||a.openID,version:m.DataBfConfig.VERSION})}},e.prototype.bfasEvtClickShareCard=function(t,e,n,o,a,i,r,s,c){o&&g.BfasManager.instance.sendEvt(b.SharePointID.CLICK_SHARE_CARD,{numId:M.UserInfoModel.instance.userInfo.numID,newbie:M.UserInfoModel.instance.isNewRegisterPlayer()?1:0,sharePoint:o,shareId:a,shareTime:r,shareKey:i,shareFrom:s,channel:m.DataBfConfig.ymn.channel,otherInfo:n,inviterId:t,inviterChannel:e,version:c})},e.prototype.needPullPicToJudge=function(t){return!!t.needPullPic},e.prototype.getShareSteadyUrl=function(){var t="game=guandan";return(t+="&now="+Date.now())+"&key="+M.UserInfoModel.instance.userInfo.userID+Date.now()},e.prototype.shareSuccess=function(t,e){var n=this.sharePngAuthUrl+"lua_share_identify/a.php?"+t;E.HttpUtil.get(n,null,{"Content-Type":"application/json",servicename:"reissue"}).then(function(t){console.log("------\x3e shareSuccess num: ",t),"number"==typeof t?e&&e(t):e&&e(-1)},function(){console.log("------\x3e shareSuccess error: "),e&&e(-1)})},e.prototype.recordShareIn=function(t,e,n,o,a,i){console.log("[ ShareIn !!!!!!!!!! ] numID = "+t+", channelID = "+e+", openID = "+n+", iv = "+o+", encryptedData ="),console.log(a),E.HttpUtil.post(A.DataConstant.RECORD_SHARE_IN_HOST,{numID:t,channelID:e,openID:n,iv:o,encryptedData:a},{"Content-Type":"application/json"}).then(function(t){i&&i(t)})},e.DEFAULT_TITLE="\u996d\u524d\u4e0d\u63bc\u86cb\uff0c\u7b49\u4e8e\u6ca1\u5403\u996d",e.DEFAULT_IMAGE="https://asset-imeete.oss-cn-hangzhou.aliyuncs.com/50013.judxjtizcd/turbox/202110/image/6ZeHmJQw8G.jpeg",n=i([jsClass],e)}(d.BaseManager);n.ShareManager=S,cc.systemEvent.once("GameRoot.inited",function(){f.ManagerRoot.instance.add(S)}),cc._RF.pop()},{"../../../../Framework/Manager/BaseManager":"BaseManager","../../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Manager/UIManager":"UIManager","../../../../Framework/Root/ManagerRoot":"ManagerRoot","../../../../Framework/Utils/HttpUtil":"HttpUtil","../../../Login/LoginModel":"LoginModel","../../../UserInfo/UserInfoModel":"UserInfoModel","../../Data/DataBfConfig":"DataBfConfig","../../Data/DataConstant":"DataConstant","../../Data/DataEvent":"DataEvent","../BfAnalytics/BfasManager":"BfasManager","../BfAnalytics/DataPointID":"DataPointID","../Platform/Const/PlatformEventType":"PlatformEventType","../Platform/PlatformManager":"PlatformManager","./ShareProxy":"ShareProxy"}],ShareProxy:[function(t,e,n){"use strict";cc._RF.push(e,"4f220/a2fFA4a0YjIeRigK0","ShareProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function r(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.ShareProxy=void 0;var c=t("../../../../Framework/Proxy/BaseProxy"),l=t("../../../../Framework/Root/ProxyRoot"),u=t("../../Data/DataBfConfig"),d=t("../ApiHub/LogicApiHub"),p=t("../../../UserInfo/UserInfoModel"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SERVER="share",e.METHOD="post",e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return l.ProxyRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.reqShareConfig=function(){return r(this,void 0,Promise,function(){var t;return s(this,function(e){switch(e.label){case 0:return t={areaid:u.DataBfConfig.areaID,gameid:u.DataBfConfig.gameID,channelid:91000200,numid:p.UserInfoModel.instance.userInfo.numID,os:"mini"},[4,d.LogicApiHub.apiHubPost(this.SERVER,this.METHOD,"v2/config.get",t)];case 1:return[2,e.sent()]}})})},i([jsClass],e)}(c.BaseProxy);n.ShareProxy=h,cc.systemEvent.once("GameRoot.inited",function(){l.ProxyRoot.instance.add(h)}),cc._RF.pop()},{"../../../../Framework/Proxy/BaseProxy":"BaseProxy","../../../../Framework/Root/ProxyRoot":"ProxyRoot","../../../UserInfo/UserInfoModel":"UserInfoModel","../../Data/DataBfConfig":"DataBfConfig","../ApiHub/LogicApiHub":"LogicApiHub"}],ShopConfig:[function(t,e,n){"use strict";cc._RF.push(e,"f794aF4lXlBJIWmUBtNlsC3","ShopConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.ShopConfig=n.ShopPageTypeEnum=n.PayTypeEnum=void 0;var o,a=t("../Base/Data/DataRes");(function(t){t[t.REAL=0]="REAL",t[t.VIRTUAL=1]="VIRTUAL"})(o=n.PayTypeEnum||(n.PayTypeEnum={})),function(t){t[t.GOLD=0]="GOLD",t[t.DIAMOND=1]="DIAMOND"}(n.ShopPageTypeEnum||(n.ShopPageTypeEnum={})),n.ShopConfig={diamond:[{price:8,count:8,paytype:o.REAL,name:"8\u94bb\u77f3",icon:""+a.Res.DIAMOND1,productid:"GD.NEW.GOODS.1",meiTuanProductID:"24"},{price:30,count:30,paytype:o.REAL,name:"30\u94bb\u77f3",icon:""+a.Res.DIAMOND2,productid:"GD.NEW.GOODS.2",meiTuanProductID:"9"},{price:88,count:88,paytype:o.REAL,name:"88\u94bb\u77f3",icon:""+a.Res.DIAMOND3,productid:"GD.NEW.GOODS.3",meiTuanProductID:"25"},{price:168,count:168,paytype:o.REAL,name:"168\u94bb\u77f3",icon:""+a.Res.DIAMOND5,productid:"GD.NEW.GOODS.4",meiTuanProductID:"17"},{price:328,count:328,paytype:o.REAL,name:"328\u94bb\u77f3",icon:""+a.Res.DIAMOND6,productid:"GD.NEW.GOODS.5",meiTuanProductID:"20"}],gold:[{price:6,count:6e4,paytype:o.VIRTUAL,name:"6\u4e07\u91d1\u5e01",icon:""+a.Res.GOLD1,productid:"30011"},{price:8,count:8e4,paytype:o.VIRTUAL,name:"8\u4e07\u91d1\u5e01",icon:""+a.Res.GOLD2,productid:"30012"},{price:18,count:2e5,paytype:o.VIRTUAL,name:"20\u4e07\u91d1\u5e01",icon:""+a.Res.GOLD3,productid:"30013"},{price:30,count:36e4,paytype:o.VIRTUAL,name:"36\u4e07\u91d1\u5e01",icon:""+a.Res.GOLD4,productid:"30014"},{price:88,count:108e4,paytype:o.VIRTUAL,name:"108\u4e07\u91d1\u5e01",icon:""+a.Res.GOLD5,productid:"30015"},{price:168,count:208e4,paytype:o.VIRTUAL,name:"208\u4e07\u91d1\u5e01",icon:""+a.Res.GOLD6,productid:"30016"},{price:268,count:338e4,paytype:o.VIRTUAL,name:"338\u4e07\u91d1\u5e01",icon:""+a.Res.GOLD7,productid:"30017"},{price:388,count:5e6,paytype:o.VIRTUAL,name:"500\u4e07\u91d1\u5e01",icon:""+a.Res.GOLD8,productid:"30018"}],goldIOS:[{price:6,count:6e4,paytype:o.VIRTUAL,name:"6\u4e07\u91d1\u5e01",icon:""+a.Res.GOLD1,productid:"30011"},{price:8,count:8e4,paytype:o.VIRTUAL,name:"8\u4e07\u91d1\u5e01",icon:""+a.Res.GOLD2,productid:"30012"},{price:18,count:2e5,paytype:o.VIRTUAL,name:"20\u4e07\u91d1\u5e01",icon:""+a.Res.GOLD3,productid:"30013"},{price:30,count:36e4,paytype:o.VIRTUAL,name:"36\u4e07\u91d1\u5e01",icon:""+a.Res.GOLD4,productid:"30014"}]},cc._RF.pop()},{"../Base/Data/DataRes":"DataRes"}],ShopModel:[function(t,e,n){"use strict";cc._RF.push(e,"599ee01GNNJqqMULgZRWLbo","ShopModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ShopModel=void 0;var r=t("../../Framework/Manager/EventManager"),s=t("../../Framework/Manager/UIManager"),c=t("../../Framework/Model/BaseModel"),l=t("../../Framework/Root/ModelRoot"),u=t("../Base/Data/DataBfConfig"),d=t("../Base/Data/DataClubClientConfig"),p=t("../Base/Data/DataEvent"),h=t("../Base/Module/Pay/LogicHummerPay"),_=t("../Base/View/UIHelp"),f=t("../PayWithCustomerUI/PayWithCustomerUI"),m=t("../Base/Module/Platform/PlatformManager"),g=t("../Base/Module/Platform/_IPlatform"),y=t("../UserInfo/UserInfoModel"),I=t("./ShopProxy"),C=t("./ShopUI"),M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._intervals=[10,1e3,2e3,3e3,5e3,1e4,3e4,6e4],e}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return l.ModelRoot.instance.get(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return I.ShopProxy.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){r.EventManager.instance.on(p.DataEvent.GetOpenIDSuccess,this,this.getOpenIDSuccess)},e.prototype.getOpenIDSuccess=function(){m.PlatformManager.instance.platform.canKejin&&this.reissue()},e.prototype.reissue=function(){h.LogicHummerPay.instance.reissue().then(function(t){t&&t.is_success&&console.log("reissue.success")}).catch(function(t){console.warn("\u8865\u53d1\u8ba2\u5355",t)})},e.prototype.showShopUI=function(t){s.UIManager.instance.open(C.ShopUI).then(function(e){e.init(t)})},e.prototype.buyGold=function(t,e,n){this.proxy.reqExchangComm(t,e,function(t){0===t?n&&n(!0):r.EventManager.instance.emit(p.DataEvent.ToastData,"\u5151\u6362\u5931\u8d25\uff0cfalg="+t)})},e.prototype.payForOrder=function(t,e){var n=this;h.LogicHummerPay.instance.order(t).then(function(o){var a=o.data;a=a.substring(0,a.length-1);var i=JSON.parse(a);if("CUSTOM"!==i.trade_request_type){var s="\u521b\u5efa\u8ba2\u5355\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5";return i.trade_request_content&&i.trade_request_content.text&&(s=i.trade_request_content.text),r.EventManager.instance.emit(p.DataEvent.ToastData,s),void(e&&e(!1))}if(u.DataBfConfig.isWebPlatform()){var c=i.trade_request_content.pay_url;return console.warn(">----\x3epayForOrder.payUrl:",c),cc.sys.OS_IOS===cc.sys.os?window.location.href=c:cc.sys.openURL(c),m.PlatformManager.instance.isSkyWingPlatForm()?void(e&&e(!1)):void(e&&e(!0))}m.PlatformManager.instance.isMeiTuanPlatForm()?m.PlatformManager.instance.platform.requestKejin({meiTuanData:i},function(t){console.error("requestKejin enter:"+t),t?n.checkOrder(i,0,function(t){t?e&&e(!0):e&&e(!1)}):(e&&e(!1),r.EventManager.instance.emit(p.DataEvent.ToastData,"\u7f8e\u56e2\u652f\u4ed8\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"))}):m.PlatformManager.instance.platform.requestKejin({buyQuantity:t.price},function(t){t?n.checkOrder(i,0,function(t){t?e&&e(!0):e&&e(!1)}):(e&&e(!1),r.EventManager.instance.emit(p.DataEvent.ToastData,"\u5fae\u4fe1\u652f\u4ed8\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"))})}).catch(function(t){e&&e(!1),r.EventManager.instance.emit(p.DataEvent.ToastData,"\u521b\u5efa\u8ba2\u5355\u5931\u8d25,\u8bf7\u91cd\u8bd5"),console.error("\u521b\u5efa\u8ba2\u5355\u5931\u8d25",t)})},e.prototype.checkOrder=function(t,e,n){var o=this;if(e>=this._intervals.length)return r.EventManager.instance.emit(p.DataEvent.ToastData,"\u540c\u6b65\u8ba2\u5355\u5931\u8d25\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d"),void(n&&n(!1));var a=this._intervals[e];setTimeout(function(){h.LogicHummerPay.instance.checkOrder(t.order_no).then(function(a){0===JSON.parse(a.data).code?n&&n(!0):o.checkOrder(t,e+1)}).catch(function(n){console.error("\u540c\u6b65\u8ba2\u5355\u5931\u8d25",n),o.checkOrder(t,e+1)})},a)},e.prototype.payWithCustmerService=function(t,e,n){var o=this.creatIosRechargeOrderInfo(t);console.log(">---\x3eorderInfo:",o),s.UIManager.instance.open(f.PayWithCustomerUI).then(function(t){_.UIHelp.instance.openCustomerServiceLink(g.CustomerRequestTypeEnum.IOS_PAYMENT,e,o,function(e){console.log(">---\x3eorderInfo.result:",e),n&&n(e),t.closeUI()})})},e.prototype.creatIosRechargeOrderInfo=function(t){var e=JSON.stringify({areaid:u.DataBfConfig.areaID,awake_script:t.productid,gameid:u.DataBfConfig.gameID,source:"1",ymnsdk_version:"ymnsdk_new",numid:y.UserInfoModel.instance.userInfo.numID,channelid:u.DataBfConfig.ymn.channel});return{openID:y.UserInfoModel.instance.userInfo.openID,channelID:u.DataBfConfig.ymn.channel,productID:t.productid,productName:t.name||t.price+"\u5143",productQuantity:1,price:100*t.price,attach:e,numID:y.UserInfoModel.instance.userInfo.numID,productType:t.paytype,productCount:t.count,requestType:g.CustomerRequestTypeEnum.IOS_PAYMENT}},e.prototype.isHidePay=function(){if(!m.PlatformManager.instance.platform.canKejin)return!0;if(u.DataBfConfig.isWebPlatform())return!1;if(cc.sys.OS_IOS===cc.sys.os&&!d.DataClubClientConfig.isIosPaySwitchOpen())return!0;var t=y.UserInfoModel.instance.getGameCount();return cc.sys.OS_IOS===cc.sys.os&&t<d.DataClubClientConfig.getIosPayGameCountLimit()||(cc.sys.OS_WINDOWS===cc.sys.os&&(cc.sys.WECHAT_GAME,cc.sys.platform),!1)},n=i([jsClass],e)}(c.BaseModel);n.ShopModel=M,cc.systemEvent.once("GameRoot.inited",function(){l.ModelRoot.instance.add(M)}),cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/Model/BaseModel":"BaseModel","../../Framework/Root/ModelRoot":"ModelRoot","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataClubClientConfig":"DataClubClientConfig","../Base/Data/DataEvent":"DataEvent","../Base/Module/Pay/LogicHummerPay":"LogicHummerPay","../Base/Module/Platform/PlatformManager":"PlatformManager","../Base/Module/Platform/_IPlatform":"_IPlatform","../Base/View/UIHelp":"UIHelp","../PayWithCustomerUI/PayWithCustomerUI":"PayWithCustomerUI","../UserInfo/UserInfoModel":"UserInfoModel","./ShopProxy":"ShopProxy","./ShopUI":"ShopUI"}],ShopProxy:[function(t,e,n){"use strict";cc._RF.push(e,"fd640PeHn1K1o+PkPGBdQNn","ShopProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ShopProxy=void 0;var r=t("../../Framework/Proxy/BaseProxy"),s=t("../../Framework/Root/ProxyRoot"),c=t("../Base/Data/DataBfConfig"),l=t("../Base/Module/Network/protocol/ClubLobbyProtocol"),u=t("../Base/Module/Network/SocketUtils"),d=t("../UserInfo/UserInfoModel"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return s.ProxyRoot.instance.get(n)},enumerable:!1,configurable:!0}),e.prototype.reqExchangComm=function(t,e,n){var o=new l.ClubLobbyProtocol.ReqExchangeComm({areaid:c.DataBfConfig.areaID,storeid:Number(t),count:1,gameid:c.DataBfConfig.gameID,appid:0|e});u.SocketUtils.instance.request(o,function(t){for(var e=0;e<t.propertys.length;++e)club.client.lobby.PropertyType.MONEY===t.propertys[e].type?d.UserInfoModel.instance.setUserInfo({diamond:t.propertys[e].count}):club.client.lobby.PropertyType.PLAYGOLD===t.propertys[e].type&&d.UserInfoModel.instance.setUserInfo({gold:t.propertys[e].count});n&&n(t.errcode)})},n=i([jsClass],e)}(r.BaseProxy);n.ShopProxy=p,cc.systemEvent.once("GameRoot.inited",function(){s.ProxyRoot.instance.add(p)}),cc._RF.pop()},{"../../Framework/Proxy/BaseProxy":"BaseProxy","../../Framework/Root/ProxyRoot":"ProxyRoot","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Module/Network/SocketUtils":"SocketUtils","../Base/Module/Network/protocol/ClubLobbyProtocol":"ClubLobbyProtocol","../UserInfo/UserInfoModel":"UserInfoModel"}],ShopUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"26c7fLJ+WRCXrLudnFy0rmx","ShopUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./ShopUI_MainPanel"),a=t("./ShopUI_Window"),i=t("./ShopUI_Left"),r=t("./ShopUI_TabBtn"),s=t("./ShopUI_Top"),c=t("./ShopUI_shopItem"),l=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default)},t}();n.default=l,cc._RF.pop()},{"./ShopUI_Left":"ShopUI_Left","./ShopUI_MainPanel":"ShopUI_MainPanel","./ShopUI_TabBtn":"ShopUI_TabBtn","./ShopUI_Top":"ShopUI_Top","./ShopUI_Window":"ShopUI_Window","./ShopUI_shopItem":"ShopUI_shopItem"}],ShopUI_Left:[function(t,e,n){"use strict";cc._RF.push(e,"7a3b0sf7sVGa6pGWjAnejeg","ShopUI_Left");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ShopUI","Left")},e.prototype.onConstruct=function(){this.m_cSelect=this.getControllerAt(0),this.m_cIOS=this.getControllerAt(1),this.m_TabeGold=this.getChildAt(0),this.m_TableDiamond=this.getChildAt(1),this.m_TMoveRight=this.getTransitionAt(0)},e.URL="ui://rkurwnysqy7y4",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ShopUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"b1f65V5p8FGHJXNSdl8hshY","ShopUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ShopUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Bg=this.getChildAt(0),this.m_Window=this.getChildAt(1)},e.URL="ui://rkurwnysqy7y0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ShopUI_TabBtn:[function(t,e,n){"use strict";cc._RF.push(e,"fc55aGIfgdJMK7l7OCTnOgo","ShopUI_TabBtn");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ShopUI","TabBtn")},e.prototype.onConstruct=function(){this.m_CSelect=this.getControllerAt(1),this.m_selected=this.getChildAt(2),this.m_unselected=this.getChildAt(3)},e.URL="ui://rkurwnysqy7y6",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],ShopUI_Top:[function(t,e,n){"use strict";cc._RF.push(e,"f7ca3LlhwFFAItmoI6Ui6h+","ShopUI_Top");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ShopUI","Top")},e.prototype.onConstruct=function(){this.m_cType=this.getControllerAt(0),this.m_btnBack=this.getChildAt(1),this.m_goldComp=this.getChildAt(2),this.m_diamondComp=this.getChildAt(3),this.m_btnCustomer=this.getChildAt(4),this.m_gContent=this.getChildAt(5),this.m_ani_top=this.getTransitionAt(0)},e.URL="ui://rkurwnysqy7yb",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ShopUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"54ae80Hzr9HF75GKbcYw7lP","ShopUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ShopUI","Window")},e.prototype.onConstruct=function(){this.m_Top=this.getChildAt(0),this.m_Left=this.getChildAt(1),this.m_List=this.getChildAt(2),this.m_gGroup=this.getChildAt(3),this.m_TMove=this.getTransitionAt(0)},e.URL="ui://rkurwnysqy7y1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],ShopUI_shopItem:[function(t,e,n){"use strict";cc._RF.push(e,"82e1aOov/tFx6P8lyALMhQ+","ShopUI_shopItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("ShopUI","shopItem")},e.prototype.onConstruct=function(){this.m_LodeIcon=this.getChildAt(1),this.m_txtNum=this.getChildAt(2),this.m_txtCost=this.getChildAt(3),this.m_t0=this.getTransitionAt(0)},e.URL="ui://rkurwnysqy7yi",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],ShopUI:[function(t,e,n){"use strict";cc._RF.push(e,"91c3epX8GRC/rvWG9ft/vr+","ShopUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ShopUI=void 0;var r,s=t("../../Framework/Manager/EventManager"),c=t("../../Framework/Manager/UIManager"),l=t("../../Framework/UI/FadeUI"),u=t("../Award/AwardUI"),d=t("../Base/Data/DataEvent"),p=t("../Base/Data/DataProps"),h=t("../Base/Module/BfAnalytics/BfasManager"),_=t("../Base/Module/BfAnalytics/DataPointID"),f=t("../Base/Utils/UtilView"),m=t("../Base/View/UIHelp"),g=t("../Base/View/Common/DialogUI"),y=t("../Base/Module/Platform/PlatformManager"),I=t("../Base/Module/Platform/_IPlatform"),C=t("../UserInfo/UserInfoModel"),M=t("./ShopConfig"),v=t("./ShopModel"),E=t("../Base/Utils/UtilString");(function(t){t[t.OTHER=0]="OTHER",t[t.IOS=1]="IOS"})(r||(r={}));var A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return v.ShopModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){if(this.initListener(),this.updateUI(),f.UtilView.isFullScreen()){var t=this.view.m_Window.m_Top.m_gContent.x+44,e=this.view.m_Window.m_Top.m_gContent.y;this.view.m_Window.m_Top.m_btnCustomer.x=this.view.m_Window.m_Top.m_btnCustomer.x+195,this.view.m_Window.m_Top.m_ani_top.setValue("topMoveStart",t,e-100),this.view.m_Window.m_Top.m_ani_top.setValue("topMoveEnd",t,e),this.view.m_Window.m_Left.x+=44;var n=this.view.m_Window.m_List.x,o=this.view.m_Window.m_List.y;this.view.m_Window.m_TMove.setValue("listMoveStart",n+210,o),this.view.m_Window.m_TMove.setValue("listMoveEnd",n+160,o)}y.PlatformManager.instance.supportAct.CUSTOMER||(this.view.m_Window.m_Top.m_btnCustomer.visible=!1),this.view.m_Window.m_TMove.play()},e.prototype.initListener=function(){s.EventManager.instance.on(d.DataEvent.UserInfoUpdate,this,this.updateUI),this.view.m_Window.m_Top.m_btnBack.onClick(this.onExitClick,this),this.view.m_Window.m_Top.m_btnCustomer.onClick(this.onBtnCustomer,this),this.view.m_Window.m_List.on(fgui.Event.CLICK_ITEM,this.onItemClick,this),this.view.m_Window.m_Left.m_cSelect.onChanged(this.onSelectChanged,this)},e.prototype.updateUI=function(){var t=this.view.m_Window.m_Top;t.m_goldComp.title=E.UtilString.getCurrencyShortString(C.UserInfoModel.instance.userInfo.gold),t.m_diamondComp.title=E.UtilString.getCurrencyShortString(C.UserInfoModel.instance.userInfo.diamond)},e.prototype.init=function(t){this.model.isHidePay()?(this.view.m_Window.m_Left.m_cIOS.selectedIndex=r.IOS,t=M.ShopPageTypeEnum.GOLD):this.view.m_Window.m_Left.m_cIOS.selectedIndex=r.OTHER,this.view.m_Window.m_Left.m_cSelect.selectedIndex=t,this.updateItems(!0)},e.prototype.updateItems=function(t){M.ShopPageTypeEnum.GOLD===this.view.m_Window.m_Left.m_cSelect.selectedIndex?this.showCoins(t):this.showDiamonds(t)},e.prototype.onBtnCustomer=function(){h.BfasManager.instance.sendEvt(_.CustomerPointID.SHOP_CUSTOMER),m.UIHelp.instance.openCustomerServiceLink(I.CustomerRequestTypeEnum.CUSTOMER_SERVICE)},e.prototype.onItemClick=function(t){var e=t.data;if(M.PayTypeEnum.VIRTUAL===e.paytype)return C.UserInfoModel.instance.userInfo.diamond<e.price?void s.EventManager.instance.emit(d.DataEvent.ToastData,"\u5151\u6362\u5931\u8d25\uff0c\u60a8\u643a\u5e26\u7684\u94bb\u77f3\u4e0d\u8db3"):void this.exchangeGold(e);y.PlatformManager.instance.platform.canKejin?(console.warn(">----\x3eshop.buy"),cc.sys.OS_IOS===cc.sys.os&&cc.sys.WECHAT_GAME===cc.sys.platform?this.model.payWithCustmerService(e,"\u6211\u8981\u5145\u503c"+e.count+"\u94bb\u77f3"):this.buyDiamond(e)):s.EventManager.instance.emit(d.DataEvent.ToastData,"\u5f53\u524d\u5e73\u53f0\u4e0d\u652f\u6301\u8d2d\u4e70\uff01")},e.prototype.onSelectChanged=function(){this.updateItems(!1)},e.prototype.exchangeGold=function(t){c.UIManager.instance.open(g.DialogUI).then(function(e){e.initConfirmCancelClose({content:"\u6e29\u99a8\u63d0\u793a\uff1a\n\u662f\u5426\u9700\u8981\u5151\u6362"+t.name+"?"}),e.confirmAction=function(){v.ShopModel.instance.buyGold(t.productid,0,function(e){if(e){var n=[{awardType:p.PropTypeEnum.GOLD,count:t.count,resName:t.icon}];c.UIManager.instance.open(u.AwardUI).then(function(t){t.init(n)})}})}})},e.prototype.buyDiamond=function(t){v.ShopModel.instance.payForOrder(t,function(e){if(e){var n=[{awardType:p.PropTypeEnum.DIAMOND,count:t.count,resName:t.icon}];c.UIManager.instance.open(u.AwardUI).then(function(t){t.init(n)})}})},e.prototype.showCoins=function(t){var e=M.ShopConfig.gold;cc.sys.OS_IOS===cc.sys.os&&(e=M.ShopConfig.goldIOS),this.showItems(e,t)},e.prototype.showDiamonds=function(t){var e=M.ShopConfig.diamond;this.showItems(e,t)},e.prototype.showItems=function(t,e){var n=this.view.m_Window.m_List;n.visible=!0,n.itemRenderer=function(n,o){var a=t[n];a&&(o.m_LodeIcon.url=m.UIHelp.getPropIcon(p.PropTypeEnum.DIAMOND,a.icon),o.m_txtNum.text=a.name,o.m_txtCost.text=(M.PayTypeEnum.REAL===a.paytype?"\uffe5":"\u78b3")+a.price,o.data=a,e&&o.m_t0.play())},n.setVirtual(),n.numItems=t.length,n.refreshVirtualList()},i([jsClass],e)}(l.FadeUI);n.ShopUI=A,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/UI/FadeUI":"FadeUI","../Award/AwardUI":"AwardUI","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataProps":"DataProps","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Platform/PlatformManager":"PlatformManager","../Base/Module/Platform/_IPlatform":"_IPlatform","../Base/Utils/UtilString":"UtilString","../Base/Utils/UtilView":"UtilView","../Base/View/Common/DialogUI":"DialogUI","../Base/View/UIHelp":"UIHelp","../UserInfo/UserInfoModel":"UserInfoModel","./ShopConfig":"ShopConfig","./ShopModel":"ShopModel"}],SignActivityModel:[function(t,e,n){"use strict";cc._RF.push(e,"adb8fmVoSlMQZsboNFLzJkJ","SignActivityModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.SignActivityModel=n.SignSubscribeTempID=n.SignInDaysEnum=n.ControlSignBtnStateEnum=n.ReissueTypeEnum=n.SignAwardStatus=n.SIGN_IN_DAYS=void 0;var r,s,c,l,u=t("../../Framework/Manager/EventManager"),d=t("../../Framework/Manager/UIManager"),p=t("../../Framework/Model/BaseModel"),h=t("../../Framework/Root/ModelRoot"),_=t("../Base/Data/DataEvent"),f=t("../Base/Data/DataLocalStorageKey"),m=t("../Base/Module/BfAnalytics/BfasManager"),g=t("../Base/Module/BfAnalytics/DataPointID"),y=t("../Base/Utils/UtilTime"),I=t("../Base/Module/Platform/PlatformManager"),C=t("../Base/Module/Share/ShareManager"),M=t("./SignActivityProxy"),v=t("./SignInActivityUI");n.SIGN_IN_DAYS=7,function(t){t[t.NOT_GET=0]="NOT_GET",t[t.CAN_GET=1]="CAN_GET",t[t.HAD_GET=2]="HAD_GET"}(r=n.SignAwardStatus||(n.SignAwardStatus={})),function(t){t[t.SHARE=0]="SHARE",t[t.VIDEO=1]="VIDEO"}(s=n.ReissueTypeEnum||(n.ReissueTypeEnum={})),function(t){t[t.TODAY=0]="TODAY",t[t.REISSUE_SHARE=1]="REISSUE_SHARE",t[t.REISSUE_VIDEO=2]="REISSUE_VIDEO",t[t.COOL_DWON=3]="COOL_DWON",t[t.NONE=4]="NONE"}(c=n.ControlSignBtnStateEnum||(n.ControlSignBtnStateEnum={})),function(t){t[t.DAY_1=1]="DAY_1",t[t.DAY_2=2]="DAY_2",t[t.DAY_3=3]="DAY_3",t[t.DAY_4=4]="DAY_4",t[t.DAY_5=5]="DAY_5",t[t.DAY_6=6]="DAY_6",t[t.DAY_7=7]="DAY_7"}(l=n.SignInDaysEnum||(n.SignInDaysEnum={})),n.SignSubscribeTempID="wcIe3wjqsiybTiOLbMrhwQcIFVGw-sJSYXZTasFlwTs";var E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._signInData=null,e._reissueCoolDownTimerID=null,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return h.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return M.SignActivityProxy.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"signInData",{get:function(){return this._signInData},enumerable:!1,configurable:!0}),e.prototype.modifySignInStatusByDay=function(t,e){t>n.SIGN_IN_DAYS&&(t=l.DAY_1),this._signInData.awardsStatus[t-1]=e},e.prototype.modifySubscribeTime=function(t){this._signInData.subscribeTime=t},e.prototype.modifyLastReissueTime=function(t){this._signInData.lastReissueTime=t},e.prototype.isSubscribe=function(){return this._signInData.subscribeTime>0},e.prototype.isReissueCoolDown=function(){return this.calCutDownTime()>0},e.prototype.calCutDownTime=function(){var t=this._signInData.lastReissueTime+7200-Math.ceil(Date.now()/1e3);return t<0?0:t},e.prototype.getCurSignDay=function(){return this._signInData.curSignDay},e.prototype.getTransCurSignDay=function(){var t=this.getCurSignDay();return t>n.SIGN_IN_DAYS?l.DAY_1:t},e.prototype.getDoubleAwardByDay=function(t){return this._signInData.awards[t].double},e.prototype.getNormalAwardByDay=function(t){return this._signInData.awards[t].normal},e.prototype.getAllDaysAwardStatus=function(){return this._signInData.awardsStatus},e.prototype.getReissueType=function(){var t=this._signInData.reissueRate[s.SHARE];return Math.randomRangeInt(0,100)>t?c.REISSUE_VIDEO:c.REISSUE_SHARE},e.prototype.getTitleState=function(){return this.getCurSignDay()<=n.SIGN_IN_DAYS?v.ControlSignInTitleEnum.NEW_PLAYER:v.ControlSignInTitleEnum.EVERY_DAY},e.prototype.getProcessState=function(){var t=this.getCurSignDay();return t<3||t>n.SIGN_IN_DAYS?v.ControlCheckBoxStateEnum.HIDE:v.ControlCheckBoxStateEnum.SHOW},e.prototype.getMulChooseType=function(){if(!this.isSubscribe())return v.ControlSignMulChooseEnum.SUBSCRIBE;var t=this._signInData.reissueRate[s.SHARE];return Math.randomRangeInt(0,100)>t?v.ControlSignMulChooseEnum.VIDEO:v.ControlSignMulChooseEnum.SHARE},e.prototype.reqSignInInfo=function(t){var e=this;this.proxy.reqSignInData(function(o){var a,i={subscribeTime:+o[1],curSignDay:+o[2],awardsStatus:[],lastReissueTime:0};i.awards=e.newAwardDataStruct();var r=1;JSON.parse(o[3]).forEach(function(t){for(var e in i.awardsStatus.push(t.status),i.awards[r].normal.gold=t.normal.asr,t.normal.props)(n={count:0,propid:0}).count=t.normal.props[e],n.propid=Number(e),i.awards[r].normal.props.push(n);for(var e in i.awards[r].double.gold=t.double.asr,t.double.props){var n;(n={count:0,propid:0}).count=Number(t.double.props[e]),n.propid=Number(e),i.awards[r].double.props.push(n)}r++}),i.reissueRate=((a={})[s.VIDEO]=0,a[s.SHARE]=0,a),JSON.parse(o[4]).forEach(function(t){i.reissueRate[Number(t.content)]=Number(t.rate)}),i.lastReissueTime=Number(o[5]),(i.curSignDay<3||i.curSignDay>n.SIGN_IN_DAYS)&&(i.lastReissueTime=0),e._signInData=i,e.notifyReissueCoolDownTime(),u.EventManager.instance.emit(_.DataEvent.SignInDataQuerySuccess,v.ControlSignInTitleEnum.NEW_PLAYER===e.getTitleState()),console.log("=====>signInData: ",e._signInData),t&&t()})},e.prototype.reqCurDaySignAward=function(t,e){var n=this;this.proxy.reqTodayAward(t,function(o){if(0===Number(o[0])){t&&n.modifySubscribeTime(Date.now()/1e3);var a=JSON.parse(o[2]);return n.modifySignInStatusByDay(Number(o[1]),Number(a.status)),void(e&&e(a.award))}var i="\u9886\u53d6\u5956\u52b1\u9519\u8bef:  "+o[0];u.EventManager.instance.emit(_.DataEvent.ToastData,i)})},e.prototype.reqAwardByShareOrVideo=function(t,e,n,o,a){var i=this;this.proxy.reqAwardByShareOrVideo(t,e,n,o,function(n){if(0===Number(n[0])){var o=JSON.parse(n[2]);return i.modifySignInStatusByDay(Number(n[1]),Number(o.status)),t<i.getCurSignDay()&&(i.modifyLastReissueTime(Math.floor(Date.now()/1e3)),i.notifyReissueCoolDownTime()),void(a&&a(o.award))}var r="\u9886\u53d6\u5956\u52b1\u9519\u8bef:  "+n[0];C.ShareCheckTypeEnum.CHECK_BY_LOAD_IMG!==e&&C.ShareCheckTypeEnum.CHECK_BY_TIME!==e||(r="\u5206\u4eab\u5931\u8d25\u4e86\uff0c\u518d\u8bd5\u4e00\u6b21\u9886\u53d6\u5956\u52b1\u5427\uff01"),u.EventManager.instance.emit(_.DataEvent.ToastData,r)})},e.prototype.newAwardDataStruct=function(){var t,e,n,o,a,i,r,s;return(t={})[l.DAY_1]=((e={}).normal={gold:0,props:[]},e.double={gold:0,props:[]},e),t[l.DAY_2]=((n={}).normal={gold:0,props:[]},n.double={gold:0,props:[]},n),t[l.DAY_3]=((o={}).normal={gold:0,props:[]},o.double={gold:0,props:[]},o),t[l.DAY_4]=((a={}).normal={gold:0,props:[]},a.double={gold:0,props:[]},a),t[l.DAY_5]=((i={}).normal={gold:0,props:[]},i.double={gold:0,props:[]},i),t[l.DAY_6]=((r={}).normal={gold:0,props:[]},r.double={gold:0,props:[]},r),t[l.DAY_7]=((s={}).normal={gold:0,props:[]},s.double={gold:0,props:[]},s),t},e.prototype.notifyReissueCoolDownTime=function(){var t=this;if(this.isReissueCoolDown()){this.stopReissueCoolDownTimer();var e=this.calCutDownTime();if(e>0){var n=y.UtilTime.formatCountDownTime(e);return u.EventManager.instance.noLogEmit(_.DataEvent.SignInCoolDownTime,n),e-=1,void(this._reissueCoolDownTimerID=setInterval(function(){if(e>0){var n=y.UtilTime.formatCountDownTime(e);u.EventManager.instance.noLogEmit(_.DataEvent.SignInCoolDownTime,n),e-=1}else t.stopReissueCoolDownTimer()},1e3))}u.EventManager.instance.noLogEmit(_.DataEvent.SignInCoolDownTime,!0)}},e.prototype.stopReissueCoolDownTimer=function(){this._reissueCoolDownTimerID&&(clearInterval(this._reissueCoolDownTimerID),this._reissueCoolDownTimerID=null)},e.prototype.autoPopup=function(){if(I.PlatformManager.instance.supportAct.SIGN&&this._signInData&&r.HAD_GET!==this._signInData.awardsStatus[this.getTransCurSignDay()-1]){var t=localStorage.getItem(f.LocalStorageKey.EVERYDAY_AWARD);t&&void 0!==t?Date.now()>=Number(t)&&this.backToHallShowSignUI():this.backToHallShowSignUI()}},e.prototype.stopPopup=function(){d.UIManager.instance.close(v.SignInActivityUI)},e.prototype.backToHallShowSignUI=function(){var t=g.ActivityPointID.signInActivity.backOpen;m.BfasManager.instance.evt(t.eventid,null,!0,t.eventName),d.UIManager.instance.open(v.SignInActivityUI).then(function(){localStorage.setItem(f.LocalStorageKey.EVERYDAY_AWARD,y.UtilTime.getNextDayClockTime().toString())})},e.prototype.openSignInActivityUI=function(){this._signInData?d.UIManager.instance.open(v.SignInActivityUI):this.reqSignInInfo(function(){d.UIManager.instance.open(v.SignInActivityUI)})},i([jsClass],e)}(p.BaseModel);n.SignActivityModel=E,cc.systemEvent.once("GameRoot.inited",function(){h.ModelRoot.instance.add(E)}),cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/Model/BaseModel":"BaseModel","../../Framework/Root/ModelRoot":"ModelRoot","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Platform/PlatformManager":"PlatformManager","../Base/Module/Share/ShareManager":"ShareManager","../Base/Utils/UtilTime":"UtilTime","./SignActivityProxy":"SignActivityProxy","./SignInActivityUI":"SignInActivityUI"}],SignActivityProxy:[function(t,e,n){"use strict";cc._RF.push(e,"727a4vSjGNNCr3HNqZelGG2","SignActivityProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.SignActivityProxy=void 0;var r=t("../../Framework/Proxy/BaseProxy"),s=t("../../Framework/Root/ProxyRoot"),c=t("../Base/Data/DataBfConfig"),l=t("../Base/Data/DataScript"),u=t("../Base/Module/Network/protocol/AwardProtocol"),d=t("../Base/Module/Network/SocketUtils"),p=t("../UserInfo/UserInfoModel"),h=t("./SignActivityModel"),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return s.ProxyRoot.instance.get(n)},enumerable:!1,configurable:!0}),e.prototype.reqSignInData=function(t){var e=p.UserInfoModel.instance.userInfo.openID,n=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.signIn.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("mini=1;func="+l.DataScript.signIn.func.queryActivity+";openid='"+e+"';templateid='"+h.SignSubscribeTempID+"';")});d.SocketUtils.instance.request(n,function(e){if(0===e.flag){var n=bf33.Utils.bytesToString(e.msg).split("|")||[];0===Number(n[0])&&t&&t(n)}})},e.prototype.reqTodayAward=function(t,e){var n=l.DataScript.signIn.func,o=t?n.getSubscribeAward:n.getNormalAward,a=p.UserInfoModel.instance.userInfo.openID,i=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.signIn.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("mini=1;func="+o+";openid='"+a+"';templateid='"+h.SignSubscribeTempID+"';")});d.SocketUtils.instance.request(i,function(t){if(0===t.flag){var n=bf33.Utils.bytesToString(t.msg).split("|")||[];e&&e(n)}})},e.prototype.reqAwardByShareOrVideo=function(t,e,n,o,a){var i=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.signIn.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("mini=1;func="+l.DataScript.signIn.func.getShareOrResignAward+";day="+t+";checktype="+e+";sec="+n+";shareflag="+o)});d.SocketUtils.instance.request(i,function(t){if(0===t.flag){var e=bf33.Utils.bytesToString(t.msg).split("|")||[];a&&a(e)}})},n=i([jsClass],e)}(r.BaseProxy);n.SignActivityProxy=_,cc.systemEvent.once("GameRoot.inited",function(){s.ProxyRoot.instance.add(_)}),cc._RF.pop()},{"../../Framework/Proxy/BaseProxy":"BaseProxy","../../Framework/Root/ProxyRoot":"ProxyRoot","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataScript":"DataScript","../Base/Module/Network/SocketUtils":"SocketUtils","../Base/Module/Network/protocol/AwardProtocol":"AwardProtocol","../UserInfo/UserInfoModel":"UserInfoModel","./SignActivityModel":"SignActivityModel"}],SignInActivityUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"c1c78i1WMpOFpIpIDTrtllO","SignInActivityUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./SignInActivityUI_BtnYellowNoSpace"),a=t("./SignInActivityUI_MainPanel"),i=t("./SignInActivityUI_Window"),r=t("./SignInActivityUI_btnAwardState"),s=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default)},t}();n.default=s,cc._RF.pop()},{"./SignInActivityUI_BtnYellowNoSpace":"SignInActivityUI_BtnYellowNoSpace","./SignInActivityUI_MainPanel":"SignInActivityUI_MainPanel","./SignInActivityUI_Window":"SignInActivityUI_Window","./SignInActivityUI_btnAwardState":"SignInActivityUI_btnAwardState"}],SignInActivityUI_BtnYellowNoSpace:[function(t,e,n){"use strict";cc._RF.push(e,"cd64fVxlNxLPIE1X1jEKZZV","SignInActivityUI_BtnYellowNoSpace");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("SignInActivityUI","BtnYellowNoSpace")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(0)},e.URL="ui://fodu0825ck2ga6bd",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],SignInActivityUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"cbbb21A2EJIWIuSeUAuzrYT","SignInActivityUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("SignInActivityUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://fodu0825dq290",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],SignInActivityUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"38ddbh2aaNBT6xlbQcv+LmS","SignInActivityUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("SignInActivityUI","Window")},e.prototype.onConstruct=function(){this.m_mulChoose=this.getControllerAt(0),this.m_titleState=this.getControllerAt(1),this.m_btnState=this.getControllerAt(2),this.m_processState=this.getControllerAt(3),this.m_awardsNums=this.getControllerAt(4),this.m_checkBoxState=this.getControllerAt(5),this.m_giftIconLeft=this.getChildAt(2),this.m_giftIconCenter=this.getChildAt(3),this.m_giftIconRight=this.getChildAt(4),this.m_giftNameLeft=this.getChildAt(5),this.m_giftNameCenter=this.getChildAt(6),this.m_giftNameRight=this.getChildAt(7),this.m_giftInfo=this.getChildAt(8),this.m_btnMulChoose=this.getChildAt(9),this.m_processBar=this.getChildAt(12),this.m_btnDay1=this.getChildAt(13),this.m_btnDay2=this.getChildAt(14),this.m_btnDay3=this.getChildAt(15),this.m_btnDay4=this.getChildAt(16),this.m_btnDay5=this.getChildAt(17),this.m_btnDay6=this.getChildAt(18),this.m_btnDay7=this.getChildAt(19),this.m_process=this.getChildAt(20),this.m_btnReqAward=this.getChildAt(21),this.m_btnReqReissue=this.getChildAt(22),this.m_btnCoolDown=this.getChildAt(23),this.m_reqBtnGroup=this.getChildAt(24),this.m_btnClose=this.getChildAt(25)},e.URL="ui://fodu0825dq291",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],SignInActivityUI_btnAwardState:[function(t,e,n){"use strict";cc._RF.push(e,"b3cb0VizYxDcJLMQqeufkWF","SignInActivityUI_btnAwardState");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("SignInActivityUI","btnAwardState")},e.prototype.onConstruct=function(){this.m_awardState=this.getControllerAt(0),this.m_imgLoader=this.getChildAt(0)},e.URL="ui://fodu0825dq29q",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],SignInActivityUI:[function(t,e,n){"use strict";cc._RF.push(e,"9ff74jRFsBIG5trOgzZeaUm","SignInActivityUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.SignInActivityUI=n.ControlCheckBoxStateEnum=n.ControlSignInTitleEnum=n.ControlSignMulChooseEnum=void 0;var r,s,c,l,u=t("../../Framework/Manager/EventManager"),d=t("../../Framework/Manager/UIManager"),p=t("../../Framework/UI/FadeUI"),h=t("../Activity/Advertise/VideoAdManager"),_=t("../Award/AwardModel"),f=t("../Award/AwardUI"),m=t("../Base/Data/DataEvent"),g=t("../Base/Data/DataLocalStorageKey"),y=t("../Base/Data/DataProps"),I=t("../Base/Data/DataRes"),C=t("../Base/Data/DataSpineAni"),M=t("../Base/Module/BehaviorBranch/LogicBehaviorBranch"),v=t("../Base/Module/BfAnalytics/BfasManager"),E=t("../Base/Module/BfAnalytics/DataPointID"),A=t("../Base/View/UIHelp"),P=t("../Base/Module/Share/ShareManager"),b=t("./SignActivityModel"),U=t("../Base/Utils/UtilCC");(function(t){t[t.NONE=0]="NONE",t[t.SUBSCRIBE=1]="SUBSCRIBE",t[t.VIDEO=2]="VIDEO",t[t.SHARE=3]="SHARE"})(r=n.ControlSignMulChooseEnum||(n.ControlSignMulChooseEnum={})),function(t){t[t.NONE=0]="NONE",t[t.ONE=1]="ONE",t[t.TWO=2]="TWO",t[t.THREE=3]="THREE"}(s||(s={})),function(t){t[t.NEW_PLAYER=0]="NEW_PLAYER",t[t.EVERY_DAY=1]="EVERY_DAY"}(n.ControlSignInTitleEnum||(n.ControlSignInTitleEnum={})),function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW",t[t.SHOW_MSG=2]="SHOW_MSG"}(c=n.ControlCheckBoxStateEnum||(n.ControlCheckBoxStateEnum={})),function(t){t[t.NONE=0]="NONE",t[t.RECEIVED=1]="RECEIVED",t[t.REISSUE=2]="REISSUE",t[t.NEW=3]="NEW"}(l||(l={}));var S=[1,17,32,50,68,85,100],T=E.ActivityPointID.signInActivity,R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._curSelectDay=0,e}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return b.SignActivityModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initData(),this.initUI(),this.reportDataPoint(T.show)},e.prototype.initListener=function(){u.EventManager.instance.on(m.DataEvent.SignInCoolDownTime,this,this.onReceiveSignInCoolDownTime),this.view.m_Window.m_btnClose.onClick(this.onClickCloseBtn,this),this.view.m_Window.m_btnReqAward.onClick(this.onClickReqAwardBtn,this),this.view.m_Window.m_btnReqReissue.onClick(this.onClickReqReissueBtn,this),this.view.m_Window.m_btnMulChoose.onClick(this.onClickMulChooseBtn,this)},e.prototype.initData=function(){this.view.m_Window.m_btnMulChoose.selected=!0,this._curSelectDay=this.mode.getTransCurSignDay()},e.prototype.initUI=function(){this.view.m_Window.m_titleState.selectedIndex=this.mode.getTitleState(),this.view.m_Window.m_processState.selectedIndex=this.mode.getProcessState(),this.view.m_Window.m_mulChoose.selectedIndex=this.mode.getMulChooseType(),this.view.m_Window.m_awardsNums.selectedIndex=s.NONE,this.initSpineAnimation(),this.updateUI()},e.prototype.reportDataPoint=function(t){v.BfasManager.instance.evt(t.eventid,null,!0,t.eventName)},e.prototype.onReceiveSignInCoolDownTime=function(t){if("string"!=typeof t){var e=this.view.m_Window.m_btnState;b.ControlSignBtnStateEnum.COOL_DWON===e.selectedIndex&&(e.selectedIndex=this.mode.getReissueType())}else this.view.m_Window.m_btnCoolDown.text=t},e.prototype.onClickCloseBtn=function(){this.reportDataPoint(T.clickClose),t.prototype.onExitClick.call(this)},e.prototype.onClickReqAwardBtn=function(){var t=this,e=this.view.m_Window.m_btnMulChoose.selected;if(e){var n=this.view.m_Window.m_mulChoose.selectedIndex;if(r.SUBSCRIBE===n)return this.reportDataPoint(T.clickAwardSubscribeSelected),void A.UIHelp.instance.reqWeChatSubscribe(function(n){n&&t.reqTodayAward(e)},b.SignSubscribeTempID);if(r.SHARE===n)return this.reportDataPoint(T.clickAwardShareSelected),void P.ShareManager.instance.share(P.ShareType.signInActivityShare,null,function(e,n){var o="boolean"==typeof n?P.ShareCheckTypeEnum.CHECK_BY_LOAD_IMG:P.ShareCheckTypeEnum.CHECK_BY_TIME,a=n?P.ShareLoadImgTypeEnum.SUCCESSED:P.ShareLoadImgTypeEnum.FAILED;t.reqAwardByShareOrVideo(o,e,a)});if(r.VIDEO===n)return this.reportDataPoint(T.clickAwardVideoSelected),void h.VideoAdManager.instance.showVideoAd(function(){},function(e){e&&t.reqAwardByShareOrVideo(P.ShareCheckTypeEnum.CHECK_BY_VIDEO)},{customizeScene:M.CustomizeSceneEnum.WATCH_VIDEO})}this.reqTodayAward(!1);var o=["clickAwardSubscribeUnselected","clickAwardVideoUnselected","clickAwardShareUnselected"][this.view.m_Window.m_mulChoose.selectedIndex-1];o&&this.reportDataPoint(T[o])},e.prototype.onClickReqReissueBtn=function(){var t=this,e=this.view.m_Window.m_btnState.selectedIndex;if(b.ControlSignBtnStateEnum.REISSUE_SHARE===e)return this.reportDataPoint(T.clickReissueShareSelected),void P.ShareManager.instance.share(P.ShareType.signInActivityShare,null,function(e,n){var o="boolean"==typeof n?P.ShareCheckTypeEnum.CHECK_BY_LOAD_IMG:P.ShareCheckTypeEnum.CHECK_BY_TIME,a=n?P.ShareLoadImgTypeEnum.SUCCESSED:P.ShareLoadImgTypeEnum.FAILED;t.reqAwardByShareOrVideo(o,e,a)});this.reportDataPoint(T.clickReissueVideoSelected),h.VideoAdManager.instance.showVideoAd(function(){},function(e){e&&t.reqAwardByShareOrVideo(P.ShareCheckTypeEnum.CHECK_BY_VIDEO)},{customizeScene:M.CustomizeSceneEnum.WATCH_VIDEO})},e.prototype.onClickMulChooseBtn=function(){this.updateAwardUI(this.mode.getTransCurSignDay())},e.prototype.initSpineAnimation=function(){U.UtilCC.instantiatePrefab(C.DataSpineAniPath.ANI_BTN_YELLOW2,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"loop",!0)},this.view.m_Window.m_btnReqAward.m_spineNode.node)},e.prototype.updateUI=function(){this.updateAwardUI(this._curSelectDay),this.updateProcessState(),this.updateBtnAndHintState()},e.prototype.updateAwardUI=function(t){var e,n,o=this.view.m_Window,a=this.mode.getAllDaysAwardStatus();c.HIDE===this.mode.getProcessState()?(n=o.m_btnMulChoose.selected,b.SignAwardStatus.HAD_GET===a[t-1]&&(t+=1,n=!0)):(n=!0,t===this.mode.getCurSignDay()&&(n=o.m_btnMulChoose.selected));var i=(e=n?this.mode.getDoubleAwardByDay(t):this.mode.getNormalAwardByDay(t)).props.length;if(o.m_awardsNums.selectedIndex=s.NONE,0===i)o.m_giftNameCenter.text=e.gold+"\u91d1\u5e01",o.m_giftIconCenter.url=A.UIHelp.getPropIcon(y.PropTypeEnum.GOLD,I.Res.GOLD7),o.m_awardsNums.selectedIndex=s.ONE;else if(1===i){o.m_giftNameCenter.text=e.gold+"\u91d1\u5e01",o.m_giftIconCenter.url=A.UIHelp.getPropIcon(y.PropTypeEnum.GOLD,I.Res.GOLD7);var r=e.props[0],l=y.DataProps.instance.getPropConfigByID(r.propid);o.m_giftNameRight.text=l.name+"x"+r.count,o.m_giftIconRight.url=A.UIHelp.getPropIcon(l.type,l.res),this.view.m_Window.m_awardsNums.selectedIndex=s.TWO}else 2===i&&(o.m_giftNameCenter.text=e.gold+"\u91d1\u5e01",o.m_giftIconCenter.url=A.UIHelp.getPropIcon(y.PropTypeEnum.GOLD,I.Res.GOLD7),r=e.props[0],l=y.DataProps.instance.getPropConfigByID(r.propid),o.m_giftNameLeft.text=l.name+"x"+r.count,o.m_giftIconLeft.url=A.UIHelp.getPropIcon(l.type,l.res),r=e.props[1],l=y.DataProps.instance.getPropConfigByID(r.propid),o.m_giftNameRight.text=l.name+"x"+r.count,o.m_giftIconRight.url=A.UIHelp.getPropIcon(l.type,l.res),o.m_awardsNums.selectedIndex=s.THREE)},e.prototype.updateProcessState=function(){if(c.HIDE!==this.mode.getProcessState()){var t=this.mode.getCurSignDay(),e=this.mode.getAllDaysAwardStatus(),n=this.view.m_Window;n.m_processBar.progress=S[t-1];for(var o=1;o<b.SIGN_IN_DAYS+1;o++){var a=n["m_btnDay"+o],i=e[o-1];a.onClick(this.onClickBtnDay,this),b.SignAwardStatus.HAD_GET!==i?b.SignAwardStatus.CAN_GET!==i?a.m_awardState.selectedIndex=l.NONE:a.m_awardState.selectedIndex=o<t?l.REISSUE:l.NEW:a.m_awardState.selectedIndex=l.RECEIVED}}},e.prototype.onClickBtnDay=function(t){var e=+fgui.GObject.cast(t.currentTarget).data;if(this._curSelectDay!==e){this._curSelectDay=e,this.updateAwardUI(e);var n=this.view.m_Window;n.m_checkBoxState.selectedIndex=c.HIDE;var o=n["m_btnDay"+e].m_awardState.selectedIndex;return l.NEW===o?(n.m_btnState.selectedIndex=b.ControlSignBtnStateEnum.TODAY,void(n.m_checkBoxState.selectedIndex=c.SHOW)):l.REISSUE===o?this.mode.isReissueCoolDown()?void(n.m_btnState.selectedIndex=b.ControlSignBtnStateEnum.COOL_DWON):void(n.m_btnState.selectedIndex=this.mode.getReissueType()):void(n.m_btnState.selectedIndex=b.ControlSignBtnStateEnum.NONE)}},e.prototype.updateBtnAndHintState=function(){var t=this.view.m_Window.m_checkBoxState,e=this.view.m_Window.m_btnState,n=this.mode.getAllDaysAwardStatus()[this._curSelectDay-1];if(b.SignAwardStatus.CAN_GET===n)return t.selectedIndex=c.SHOW,void(e.selectedIndex=b.ControlSignBtnStateEnum.TODAY);e.selectedIndex=b.ControlSignBtnStateEnum.NONE,c.HIDE!==this.mode.getProcessState()?t.selectedIndex=c.HIDE:t.selectedIndex=c.SHOW_MSG},e.prototype.reqTodayAward=function(t){var e=this;this.mode.reqCurDaySignAward(t,function(t){e.updateUI(),e.openAwardUI(t)})},e.prototype.openAwardUI=function(t){var e=_.AwardModel.instance.getAwardsFormat(t);d.UIManager.instance.open(f.AwardUI).then(function(t){t.init(e)});var n=this.mode.getCurSignDay();b.SignInDaysEnum.DAY_1!==n?b.SignInDaysEnum.DAY_2===n&&localStorage.getItem(g.LocalStorageKey.FIRST_DAY_SIGNIN_TIME)&&this.reportDataPoint(T.signInFirstAndSecondDaySign):localStorage.setItem(g.LocalStorageKey.FIRST_DAY_SIGNIN_TIME,Date.now()+"")},e.prototype.reqAwardByShareOrVideo=function(t,e,n){var o=this,a=c.HIDE===this.mode.getProcessState()?this.mode.getCurSignDay():this._curSelectDay;this.mode.reqAwardByShareOrVideo(a,t,e,n,function(t){o.updateUI(),o.openAwardUI(t)})},e.prototype.onDestroy=function(){U.UtilCC.releasePrefabAsset(C.DataSpineAniPath.ANI_BTN_YELLOW2),t.prototype.onDestroy.call(this)},i([jsClass],e)}(p.FadeUI);n.SignInActivityUI=R,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/Manager/UIManager":"UIManager","../../Framework/UI/FadeUI":"FadeUI","../Activity/Advertise/VideoAdManager":"VideoAdManager","../Award/AwardModel":"AwardModel","../Award/AwardUI":"AwardUI","../Base/Data/DataEvent":"DataEvent","../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../Base/Data/DataProps":"DataProps","../Base/Data/DataRes":"DataRes","../Base/Data/DataSpineAni":"DataSpineAni","../Base/Module/BehaviorBranch/LogicBehaviorBranch":"LogicBehaviorBranch","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Share/ShareManager":"ShareManager","../Base/Utils/UtilCC":"UtilCC","../Base/View/UIHelp":"UIHelp","./SignActivityModel":"SignActivityModel"}],SkyWingPlatform:[function(t,e,n){"use strict";cc._RF.push(e,"1b373Oo5f9A0ppvU+2iwNVB","SkyWingPlatform");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.SkyWingPlatform=void 0;var r=t("./_IPlatform"),s=t("../../../../Framework/Manager/CoroutineManager"),c=t("../../../../Framework/Manager/EventManager"),l=t("./Const/PlatformEventType"),u=t("../../../../Framework/Root/ManagerRoot"),d=t("../../../../Framework/Root/ProxyRoot"),p=t("../../../../Framework/Root/ModelRoot"),h=t("../../../../Framework/Manager/UIManager"),_=t("../../../../Framework/Utils/Extension/ConsoleExtension"),f=t("./Const/Scope"),m=t("../../Data/DataBfConfig"),g=t("./PlatformManager"),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=g.PlatformTypeEnum.SkyWing,e.TOAST_ICON_MAP={success:"\u2713\n",error:"\u2715\n",loading:"\u27f3\n"},e.BANNER_WIDTH=600,e.BANNER_HEIGHT=160,e.BANNER_AD_IDS=["https://wxresource.gameabc2.com/scmj/mjhl/static/banner/banner_dev_0.jpg","https://wxresource.gameabc2.com/scmj/mjhl/static/banner/banner_dev_1.jpg"],e._bannerAds={},e._whatsNewSubscriptionStatus=r.WhatsNewSubscriptionsStatusEnum.CAN_SUBSCRIBE,e}return a(e,t),Object.defineProperty(e.prototype,"isAppHidden",{get:function(){return this._isAppHidden},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"query",{get:function(){return this._launchArgs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"channel",{get:function(){return+this._launchArgs.channel||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return+this._launchArgs.scene||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chatType",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shareTicket",{get:function(){},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=this,e={},n=location.href.indexOf("?"),o=-1!==n&&location.href.substring(n+1);if(o)for(var a=decodeURIComponent(o).split("&"),i=0,r=a.length;i<r;++i){var u=a[i].split("=");u.length>1&&(e[u[0]]=u[1])}e.user||(e.user="Debug_"+Date.now(),e.devLogin="1"),this._launchArgs=e,s.CoroutineManager.instance.frameOnce(1,function(){cc.game.on(cc.game.EVENT_SHOW,function(){t._isAppHidden=!1,c.EventManager.instance.emit(l.PlatformEventType.AppShow)}),cc.game.on(cc.game.EVENT_HIDE,function(){t._isAppHidden=!0,c.EventManager.instance.emit(l.PlatformEventType.AppHide)})},this),c.EventManager.instance.emit(l.PlatformEventType.AppShow),m.DataBfConfig.init(this.query.env,this.name),this.initConsole(),this.initFrameRate();var d=cc.profiler.showStats;cc.profiler.showStats=function(){d&&d(),s.CoroutineManager.instance.late(t.profilerBg,t)},cc.debug.setDisplayStats(!!this._launchArgs.debug),this.exportClasses(),h.UIManager.instance.weakMapEnable=!0},e.prototype.profilerBg=function(){var t=cc.director.getScene().getChildByName("PROFILER-NODE");if(t){var e=t.getChildByName("BG");e||cc.loader.loadRes("ui/DefaultTexture",cc.SpriteFrame,function(n,o){n||(e=new cc.Node("BG"),t.insertChild(e,0),e.addComponent(cc.Sprite).spriteFrame=o,e.setPosition(0,15),e.setAnchorPoint(0,0),e.color=cc.Color.BLACK,e.opacity=160,e.width=200,e.height=90)})}},e.prototype.exportClasses=function(){s.CoroutineManager.instance.late(function(){u.ManagerRoot.instance.forEach(function(t){var e=cc.js.getClassName(t);e&&(window[e]=t.constructor)}),p.ModelRoot.instance.forEach(function(t){var e=cc.js.getClassName(t);e&&(window[e]=t.constructor)}),d.ProxyRoot.instance.forEach(function(t){var e=cc.js.getClassName(t);e&&(window[e]=t.constructor)})},this),window.ConsoleExtension=_.ConsoleExtension,["ConstValue","HttpUtil","UIHelp","UtilTool","PopupConfig"].forEach(function(t){window[t]=cc.js.getClassByName(t)})},e.prototype.initConsole=function(){_.ConsoleExtension.setEnabled(!0),_.ConsoleExtension.setReferEnabled(!0)},e.prototype.initFrameRate=function(){cc.game.setFrameRate(60)},e.prototype.getSystemInfoSync=function(){return this._systemInfo||(this._systemInfo={screenWidth:window.innerWidth,screenHeight:window.innerHeight,pixelRatio:1,platform:"web",system:"Windows",batteryLevel:100})},Object.defineProperty(e.prototype,"performanceLevel",{get:function(){return-1},enumerable:!1,configurable:!0}),e.prototype.isLowPerformance=function(){return!1},e.prototype.login=function(t){var e=this._launchArgs.ticket;void 0===e?e=localStorage.getItem("skywing_ticket_key"):localStorage.setItem("skywing_ticket_key",e),console.warn("SkyWing.login:",this._launchArgs,e),t&&t({code:e,os:this.name})},e.prototype.createUserInfoButton=function(){return null},e.prototype.getUserInfo=function(t,e){var n=this;console.log("Develop getUserInfo"),this.showDialog(t,!0,function(t){if(t){var o={nickname:n._launchArgs.nickname,icon:n._launchArgs.icon,gender:+n._launchArgs.gender};console.log("Develop getUserInfo succeed:",o),e&&e(o)}else console.warn("Develop getUserInfo failed: denied"),e&&e(null)},"\u5141\u8bb8","\u62d2\u7edd")},e.prototype.getUserInfoSilent=function(t){console.log("Develop getUserInfoSilent");var e={nickname:this._launchArgs.nickname,icon:this._launchArgs.icon,gender:+this._launchArgs.gender};console.log("Develop getUserInfoSilent succeed:",e),t&&t(e)},e.prototype.getShareInfo=function(t){console.log("Develop getShareInfo"),t&&t(null)},e.prototype.requireScope=function(t,e,n){var o=this;console.log("Develop requireScope"),this.isScopeAuthored(t,function(e){e?n&&n(!0,!0):t===f.Scope.record?o.recordAuthorize(function(t){n&&n(t,e)}):t===f.Scope.friendsList?n&&n(!1,e):n&&n(null,e)})},e.prototype.isScopeAuthored=function(t,e){var n=this;if(console.log("Develop isScopeAuthored"),t===f.Scope.record)if(this._audioStream)e&&e(!0);else try{navigator.permissions.query({name:"microphone"}).then(function(o){switch(console.log("Develop "+t+" state is",o.state),o.state){case"granted":n.recordAuthorize(e);break;case"denied":e&&e(!1);break;case"prompt":default:e&&e(void 0)}},function(n){console.error("Develop "+t+" state is unknown:",n),e&&e(null)})}catch(o){console.error("Develop "+t+" state is unknown:",o),e&&e(null)}else console.log("Develop "+t+" authored is not support!"),e&&e(!1)},e.prototype.recordAuthorize=function(t){var e=this;if(!1===this._audioStream)t&&s.CoroutineManager.instance.lateWait(function(){return!1!==e._audioStream},function(){t(!!e._audioStream||null===e._audioStream&&null)},this);else if(this._audioStream)t&&t(!0);else try{this._audioStream=!1,console.log("Develop getUserMedia: audio"),navigator.mediaDevices.getUserMedia({audio:!0}).then(function(n){e._audioStream=n,t&&t(!0)},function(n){switch(console.error(n),delete e._audioStream,n.name){case"NotFoundError":return e.showToast("\u672a\u627e\u5230\u5f55\u97f3\u8bbe\u5907\uff0c\u8bf7\u68c0\u67e5\u8bbe\u5907\u8fde\u63a5\u60c5\u51b5\uff01"),void(t&&t(!1));case"NotAllowedError":return e.showToast("\u9ea6\u514b\u98ce\u6743\u9650\u5df2\u88ab\u7981\u7528\uff0c\u8bf7\u70b9\u51fb\u5730\u5740\u680f\u5de6\u4fa7\u6309\u94ae\u542f\u7528\u9ea6\u514b\u98ce\uff01"),void(t&&t(!1));default:return e.showToast("\u6388\u6743\u5931\u8d25\uff01"),void(t&&t(!1))}})}catch(n){this._audioStream=null,this.showToast("\u6388\u6743\u5931\u8d25\uff01"),t&&t(null)}},Object.defineProperty(e.prototype,"hasShare",{get:function(){return!1},set:function(){},enumerable:!1,configurable:!0}),e.prototype.onShareAppMessage=function(){},e.prototype.onShareTimeline=function(){},e.prototype.shareAppMessage=function(t,e,n){console.log("Develop shareAppMessage: ",{title:t,imageUrl:e,query:n});var o=document.createElement("img");o.src=e,o.onload=function(){var e=document.createElement("div");e.innerText=t,e.style.cssText="width:480px;height:420px;padding:15px;border-radius:5px;\n\t\t\t\t\t\t\t\tposition:fixed;top:50%;left:50%;z-index:999999;\n\t\t\t\t\t\t\t\tcolor:rgb(0,0,0);background:rgba(255,255,255,255);\n\t\t\t\t\t\t\t\tfont-size:18px;line-height:20px;text-align:left;\n\t\t\t\t\t\t\t\ttransform:translate(-50%,-50%);\n\t\t\t\t\t\t\t\topacity:0;transition:opacity 0.25s ease-out;",document.body.appendChild(e),o.style.cssText="width:500px;height:400px;position:absolute;left:5px;top:45px;z-index:1000000;",o.style.visibility="visible",e.appendChild(o),setTimeout(function(){e.style.opacity="1",setTimeout(function(){e.style.opacity="0",setTimeout(function(){e.remove(),c.EventManager.instance.emit(l.PlatformEventType.Share,3)},250)},2e3),e.onclick=function(){var t=location.href,e=t.match(/user=[^&]+/);e&&(t=t.replace(e[0],e[0]+"_Share")),n&&(t=t+(t.indexOf("?")?"&":"?")+n),window.open(t)}},100)}},e.prototype.showToast=function(t,e,n,o){console.log("Develop showToast:",t,e,n,o),t=(this.TOAST_ICON_MAP[e]||"")+(t||"");var a=this.createToast(t,o);setTimeout(function(){a.style.opacity="1",setTimeout(function(){a.style.opacity="0",setTimeout(function(){a.remove()},250)},n?Math.max(n,250):2e3)},100),this._hideLoading()},e.prototype.createToast=function(t,e){var n=document.createElement("div");return n.title=t,n.innerText=t,null==e&&(e=.5),n.style.cssText="min-width:150px;height:"+20*t.split("\n").length+"px;\n\t\t\t\t\t\t\t\tpadding:14px;border-radius:4px;\n\t\t\t\t\t\t\t\tposition:fixed;top:"+100*e+"%;left:50%;z-index:999999;\n\t\t\t\t\t\t\t\tfont-size:16px;line-height:20px;text-align:center;\n\t\t\t\t\t\t\t\tcolor:rgb(255,255,255);background:rgba(0,0,0,0.7);\n\t\t\t\t\t\t\t\ttransform:translate(-50%,-50%);\n\t\t\t\t\t\t\t\topacity:0;transition:opacity 0.25s ease-out;",document.body.appendChild(n),n},e.prototype.showLoading=function(t){if(console.log("Develop showLoading:",t),t=this.TOAST_ICON_MAP.loading+(t||""),this._loadingDiv)this._loadingDiv.innerText=t;else{var e=this.createToast(t);setTimeout(function(){return e.style.opacity="1"},100),this._loadingDiv=e}},e.prototype.hideLoading=function(){console.log("Develop hideLoading"),this._hideLoading()},e.prototype._hideLoading=function(){var t=this._loadingDiv;t&&(t.style.opacity="0",setTimeout(function(){return t.remove()},250),this._loadingDiv=null)},e.prototype.showDialog=function(t,e,n){if(e){var o=confirm(t);n&&n(o)}else alert(t),n&&n(!0)},Object.defineProperty(e.prototype,"isSupportVideoAd",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isVideoAdLoaded",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.showVideoAd=function(t){try{t&&t(!0),c.EventManager.instance.emit(l.PlatformEventType.VideoAdClose,!0)}catch(e){console.error(e)}},Object.defineProperty(e.prototype,"hasBannerAd",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.createBannerAd=function(t,e,n,o){if(e=e||{x:.5,y:1,pivotX:.5,pivotY:1},this.hasBannerAd){var a=this.BANNER_AD_IDS[t%this.BANNER_AD_IDS.length];if(a){console.log("Develop Create banner ad: ",t,a,e);var i=document.createElement("img");i.src=a,this._bannerAds[t]=i;var r=this.BANNER_WIDTH,c=this.BANNER_HEIGHT,l=window.innerWidth,u=window.innerHeight;i.style.cssText="width:"+r+"px;height:"+c+"px;position:absolute;left:"+l+"px;top:"+u+"px;z-index:1000000;",document.body.appendChild(i),s.CoroutineManager.instance.late(function(){var t=e.x*l-r*e.pivotX,o=e.y*u-c*e.pivotY;i.style.cssText="width:"+r+"px;height:"+c+"px;position:absolute;left:"+t+"px;top:"+o+"px;z-index:1000000;";var a=r/window.innerWidth,s=c/window.innerHeight,d=t/window.innerWidth,p=o/window.innerHeight;n&&n(d,p,a,s,i.src)},this)}else o&&o(),console.warn("Develop BannerAd id is null or empty!")}else o&&o(),console.warn("Develop BannerAd is not supported!")},Object.defineProperty(e.prototype,"hasGameBannerAd",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.createGameBannerAd=function(t,e,n,o){return this.createBannerAd(t,e,n,o)},Object.defineProperty(e.prototype,"hasGridAd",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.createGridAd=function(t,e,n,o){return this.createBannerAd(t,e,n,o)},e.prototype.showBannerAd=function(t,e,n){var o=this._bannerAds[t];o&&(o.style.visibility="visible",console.log("Develop Show banner ad: ",t),n&&n(!0))},e.prototype.hideBannerAd=function(t){var e=this._bannerAds[t];e&&(e.style.visibility="hidden",console.log("Develop Hide banner ad: ",t))},e.prototype.closeBannerAd=function(t){var e=this._bannerAds[t];e&&(e.remove(),this._bannerAds[t]=null,console.log("Develop Close banner ad: ",t))},Object.defineProperty(e.prototype,"hasGamePortalAd",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.showGamePortalAd=function(t){try{t&&t(!1)}catch(e){console.error(e)}},Object.defineProperty(e.prototype,"canKejin",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.requestKejin=function(t,e){e&&e(!0)},e.prototype.showKeyboard=function(){},e.prototype.updateKeyboard=function(){},e.prototype.hideKeyboard=function(){},e.prototype.navigateToMiniProgram=function(t,e){e&&e(!0)},Object.defineProperty(e.prototype,"canVoiceChat",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.joinVoiceChat=function(t,e,n){n&&n(!0,[])},e.prototype.exitVoiceChat=function(t){t&&t(!0)},e.prototype.updateVoiceChatMuteConfig=function(t,e){e&&e(!0)},e.prototype.onVoiceChatSpeakersChanged=function(){},e.prototype.onVoiceChatMembersChanged=function(){},e.prototype.onVoiceChatInterrupted=function(){},Object.defineProperty(e.prototype,"canFeedback",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.createFeedbackButton=function(){return null},e.prototype.openCustomerServiceConversation=function(t,e){console.log("Develop openCustomerServiceConversation:",t),e&&e(!0)},Object.defineProperty(e.prototype,"canOpenURL",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.openCustomerServiceWithURL=function(t){cc.sys.openURL(t)},e.prototype.clearCache=function(){console.log("Develop clearCache")},e.prototype.exit=function(){console.log("Develop exit")},e.prototype.fix=function(t){t?(this.clearCache(),this.exit()):this.exit()},Object.defineProperty(e.prototype,"canSubscribe",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canWhatNewSubscribe",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.requestSubscribe=function(t,e){e&&e(!0)},e.prototype.requestSubscribeWhatsNew=function(t){var e=this;this._whatsNewSubscriptionStatus==r.WhatsNewSubscriptionsStatusEnum.SUBSCRIBE_OK?t&&t(null,r.WhatsNewSubscriptionsErrorEnum.USER_SUBSCRIBED):this.showDialog("\u6e38\u620f\u66f4\u65b0\u65f6\uff0c\u4f60\u5c06\u6536\u5230\u6d88\u606f\u63d0\u9192\u3002",!0,function(n){n&&(e._whatsNewSubscriptionStatus=r.WhatsNewSubscriptionsStatusEnum.SUBSCRIBE_OK),t&&t(n)})},e.prototype.getWhatsNewSubscriptionsSetting=function(t){t&&t(!0,this._whatsNewSubscriptionStatus)},Object.defineProperty(e.prototype,"networkType",{get:function(){return"wifi"},enumerable:!1,configurable:!0}),e.prototype.getBatteryInfo=function(t){t&&t(100,!0)},e.prototype.getLocation=function(t){console.log("Develop getLocation"),t&&t({latitude:30.2932,longitude:120.1123})},Object.defineProperty(e.prototype,"hasGameRecorder",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameRecording",{get:function(){return null!=this._gameRecordCo},enumerable:!1,configurable:!0}),e.prototype.gameRecorderStart=function(t){var e=this;if(this.gameRecording)console.error("Develop gameRecordStart failed!");else{console.log("Develop gameRecordStart"),this._gameRecordPaused=!1,this._duration=0;var n=Date.now();this._gameRecordCo=s.CoroutineManager.instance.lateWait(function(){if(!e._gameRecordPaused){var t=Date.now();e._duration+=t-n,n=t,c.EventManager.instance.noLogEmit(l.PlatformEventType.GameRecorderTimeUpdate,e._duration)}return!1},function(){},this),c.EventManager.instance.emit(l.PlatformEventType.GameRecorderStart),t&&t()}},e.prototype.gameRecorderPause=function(t){this.gameRecording&&!this._gameRecordPaused?(console.log("Develop gameRecordPause"),this._gameRecordPaused=!0,c.EventManager.instance.emit(l.PlatformEventType.GameRecorderPause),t&&t()):console.error("Develop gameRecordPause failed!")},e.prototype.gameRecorderResume=function(t){this.gameRecording&&this._gameRecordPaused?(console.log("Develop gameRecordResume"),this._gameRecordPaused=!1,c.EventManager.instance.emit(l.PlatformEventType.GameRecorderResume),t&&t()):console.error("Develop gameRecordPause failed!")},e.prototype.gameRecorderStop=function(t){this.gameRecording?(console.log("Develop gameRecordStop"),s.CoroutineManager.instance.stopCo(this._gameRecordCo),this._gameRecordCo=null,c.EventManager.instance.emit(l.PlatformEventType.GameRecorderStop,this._duration),t&&t(this._duration)):console.error("Develop gameRecordStop failed!")},e.prototype.gameRecorderAbort=function(t){console.log("Develop gameRecordAbort"),this.gameRecording?this.gameRecorderStop(function(){c.EventManager.instance.emit(l.PlatformEventType.GameRecorderAbort),t&&t()}):(c.EventManager.instance.emit(l.PlatformEventType.GameRecorderAbort),t&&t())},e.prototype.createGameRecorderShareButton=function(){return console.log("Develop.createGameRecorderShareButton"),null},e.prototype.initRecordManager=function(){if(!this._recorder)if(window.MediaRecorder){this._recorder=new MediaRecorder(this._audioStream);var t=0;this._recorder.onstart=function(e){t=e.timeStamp,console.log("Recorder start."),c.EventManager.instance.emit(l.PlatformEventType.RecorderStart)},this._recorder.ondataavailable=function(e){var n={duration:Math.floor(e.timeStamp-t),tempFilePath:URL.createObjectURL(e.data),fileSize:e.data.size};console.log("Recorder stop:",n),c.EventManager.instance.emit(l.PlatformEventType.RecorderStop,n.duration,n.tempFilePath,n.fileSize)}}else this.showToast("\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u5f55\u97f3\uff0c\u8bf7\u66f4\u6362\u6d4f\u89c8\u5668\u518d\u8bd5\uff01")},e.prototype.startRecord=function(){console.log("Develop startRecord"),this.initRecordManager(),this._recorder&&this._recorder.start()},e.prototype.stopRecord=function(){var t=this;console.log("Develop stopRecord"),s.CoroutineManager.instance.wait(function(){return!1!==t._recorder},function(){t._recorder&&"inactive"!==t._recorder.state&&t._recorder.stop()},this)},e.prototype.setClipboardData=function(t,e){if(null!=t){var n=document.createElement("textarea");document.body.appendChild(n),n.value=t,n.select(),document.execCommand("Copy"),n.remove(),console.log("Develop setClipboardData succeed:",t),this.showToast("\u5185\u5bb9\u5df2\u590d\u5236"),e&&e(!0)}else console.warn("Develop setClipboardData failed: data is null!"),e&&e(!1)},e.prototype.getClipboardData=function(t){console.log("Develop getClipboardData failed: can not get clipboard data on web!"),t&&t(null)},e.prototype.uploadFile=function(t,e,n,o,a,i,r){console.log("Develop uploadFile",t,e,n,o,a,i),fetch(n).then(function(n){console.log("Develop uploadFile load succeed:",n.status),n.blob().then(function(n){console.log("Develop uploadFile blob succeed:",n);var s=new FormData;if(i)for(var c in i)if(i.hasOwnProperty(c)){var l=i[c];s.append(c,l+"")}s.append(o,e),s.append(a,n),fetch(t,{method:"post",body:s}).then(function(n){console.log("Develop uploadFile upload succeed:",n.status),r&&r(t+"/"+e)},function(t){console.error("Develop uploadFile upload failed:",t),r&&r(null)})},function(t){console.error("Develop uploadFile blob failed:",t),r&&r(null)})},function(t){console.error("Develop uploadFile load failed:",t),r&&r(null)})},e.prototype.toTempFilePath=function(t,e,n){this.toDataURL(t,n)},e.prototype.toDataURL=function(t,e){var n;console.log("Develop Canvas.toDataURL");try{n=t.toDataURL(),console.log("Develop Canvas.toDataURL succeed:",n)}catch(o){console.error("Develop Canvas.toDataURL failed:",o)}e&&e(n)},e.prototype.previewImage=function(t,e){t&&t.forEach(function(t){return window.open(t)}),e&&e(!0)},e.prototype.saveImageToPhotosAlbum=function(t,e){e&&e(!0)},e.prototype.setMessageToFriendQuery=function(){},e.prototype.setUserCloudStorage=function(){},e.prototype.postMessage=function(){},e.prototype.reportUserBehaviorBranchAnalytics=function(){},e.prototype.getEnvVersion=function(){return""},Object.defineProperty(e.prototype,"supportAct",{get:function(){return{ACTIVITY_CENTER:!1,SIGN:!1,LUCKY_TURN:!1,SHARE_HAVE_GIFT:!1,TEN_BOX:!1,CUSTOMER:!1,MATCH_AND_FIREND:!1,TEAM_INVITE_GIFT:!1,SKY_FALL_TICKET:!1}},enumerable:!1,configurable:!0}),i([jsClass],e)}(cc.Component);n.SkyWingPlatform=y,cc._RF.pop()},{"../../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Manager/UIManager":"UIManager","../../../../Framework/Root/ManagerRoot":"ManagerRoot","../../../../Framework/Root/ModelRoot":"ModelRoot","../../../../Framework/Root/ProxyRoot":"ProxyRoot","../../../../Framework/Utils/Extension/ConsoleExtension":"ConsoleExtension","../../Data/DataBfConfig":"DataBfConfig","./Const/PlatformEventType":"PlatformEventType","./Const/Scope":"Scope","./PlatformManager":"PlatformManager","./_IPlatform":"_IPlatform"}],Socket33:[function(t,e,n){"use strict";cc._RF.push(e,"07c92TJx15Hf7jupHKNyOIO","Socket33");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Socket33=n.WsStatus=void 0;var i,r=t("../../../../Framework/Manager/CoroutineManager"),s=t("../../../../Framework/Manager/EventManager"),c=t("../../Data/DataEvent"),l=t("./Base/Processid"),u=t("./Base/ProtocolManager"),d=t("./protocol/AwardProtocol"),p=t("./protocol/SrsProtocol");(function(t){t[t.CLOSED=0]="CLOSED",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED"})(i=n.WsStatus||(n.WsStatus={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.HEART_BEAT_INTERVAL=5e3,e.AWARD_HEART_BEAT_TIMEOUT=15e3,e.DEFAULT_ENCRYPT_VER=1,e.MAX_ASK_ID=2147483647,e.NETWORK_TIMEOUT=10.5,e.NETWORK_TIMEOUT_OTHERS=100,e.DELETING_DELAY=.1,e.NETWORK_TIMEOUT_TIMEOUT=120,e._askId=0,e._callbacks={},e._deleteTimes={},e._timeoutCallbacks={},e._status=i.CLOSED,e._time=0,e}return a(e,t),Object.defineProperty(e.prototype,"newAskId",{get:function(){return this._askId=this._askId>=this.MAX_ASK_ID?1:this._askId+1,this._askId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),e.prototype.setStatus=function(t){this._status=t},e.prototype.update=function(t){this._time+=t},e.prototype.onLoad=function(){r.CoroutineManager.instance.loop(.1,this.tick,this)},e.prototype.tick=function(){var t=this;Object.keys(this._deleteTimes).forEach(function(e){t._time>t._deleteTimes[e]&&(delete t._deleteTimes[e],delete t._callbacks[e])}),Object.keys(this._callbacks).forEach(function(e){var n=t._callbacks[e];t._time>n.expireTime&&(n.callback({}),delete t._callbacks[e],t._timeoutCallbacks[e]=t._time+t.NETWORK_TIMEOUT_TIMEOUT)}),Object.keys(this._timeoutCallbacks).forEach(function(e){var n=t._timeoutCallbacks[e];if(t._time>n){delete t._timeoutCallbacks[e];var o=t._url,a=t._time-(n-t.NETWORK_TIMEOUT_TIMEOUT-t.NETWORK_TIMEOUT_OTHERS);cc.systemEvent.emit("CatchError",{type:"TimeoutTimeout",error:"Timeout after timeout!",url:o,askId:e,cost:a})}})},e.prototype.connect=function(t){console.log("Socket33.connect."+t),this.close(),this._socket=new WebSocket(t),this._socket.binaryType="arraybuffer",this._socket.onclose=this.socketOnClose.bind(this),this._socket.onerror=this.socketOnError.bind(this),this._socket.onopen=this.socketOnOpen.bind(this),this._socket.onmessage=this.socketOnMessage.bind(this),this.setStatus(i.CONNECTING)},e.prototype.close=function(){this._socket&&(this.reset(),this._socket.close(),this._socket=null)},e.prototype.reset=function(){var t=this;this._socket&&(this._socket.onclose=null,this._socket.onerror=null,this._socket.onopen=null,this._socket.onmessage=null),u.ProtocolManager.instance.reset(),this.stopSrsHeartbeat(),this.stopAwardHeartbeat(),this.setStatus(i.CLOSED),Object.keys(this._deleteTimes).forEach(function(e){return delete t._callbacks[e]}),this._deleteTimes={},Object.keys(this._callbacks).forEach(function(e){return t._callbacks[e].callback({})}),this._callbacks={},this._timeoutCallbacks={}},e.prototype.socketOnClose=function(){console.log("Socket33.socketOnClose"),this.close(),this.onClose("Close")},e.prototype.socketOnError=function(){console.log("Socket33.socketOnError"),this.close(),this.onClose("Error")},e.prototype.socketOnOpen=function(){this.setStatus(i.CONNECTED),this.reqEncryptVer(),this.onOpen()},e.prototype.socketOnMessage=function(t){var e=u.ProtocolManager.instance.decode(t.data);if(!e.err){var n=e.protocol,o=e.isGameProtocol;if(n.processid==l.Processid.srs&&n.xyid==SRS.MSGID.MSGID_CHECKACT)return null;if(n.processid==l.Processid.im&&n.xyid==im_cli.ClientXYID.kPublishMsg||console.log("Socket33.socketOnMessage. ",o?"\u6e38\u620fxy":"\u5927\u5385xy",this.getProtoClassName(n),n),n.processid==l.Processid.srs){if(n.xyid==SRS.MSGID.MSGID_ENCRYPTVER)return this.respEncryptVer(n),null;n.xyid==SRS.MSGID.MSGID_RESPKEY?this.respKey(n):n.xyid==SRS.MSGID.MSGID_PLAYERDATA&&(n.flag==SRS.PlayerData.FLAG.SUCCESS?this.startSrsHeartbeat():this._socket&&this._socket.close())}if(n.processid==l.Processid.award&&n.xyid==award_cli.ClientXYID.kRespJoin&&(n.flag!=award_cli.RespJoin.Flag.kSuccess&&n.flag!=award_cli.RespJoin.Flag.kConflict||this.startAwardHeartbeat()),n instanceof p.SrsProtocol.ReportSRSErr&&s.EventManager.instance.emit(c.DataEvent.ReportSRSErr,n),!n.cmdid)if(n.askid){var a=+n.askid;if((h=this._callbacks[a])&&(!h.respProtoId||h.respProtoId===this.getKey(n.processid,n.xyid)))return h.callback(n),void(this._deleteTimes[a]=this._time+this.DELETING_DELAY);if(this._timeoutCallbacks[a]){var i=this._url,r=this.getKey(n.processid,n.xyid),d=this._time-(this._timeoutCallbacks[a]-this.NETWORK_TIMEOUT_TIMEOUT-this.NETWORK_TIMEOUT_OTHERS);cc.systemEvent.emit("CatchError",{type:"RespTimeout",error:"Response after timeout!",url:i,askId:a,protoId:r,cost:d}),delete this._timeoutCallbacks[a]}}else for(var a in r=this.getKey(n.processid,n.xyid),this._callbacks){var h;if(this._callbacks.hasOwnProperty(a)&&(h=this._callbacks[a]).respProtoId===r)return h.callback(Object.assign(n,{flag:null})),void(this._deleteTimes[a]=this._time+this.DELETING_DELAY)}return o?this.onGameMessage(n):this.onMessage(n),e}1!=e.err.errId&&3!=e.err.errId&&this.onProtocolErr(e.err)},e.prototype.notify=function(t,e){if(this._status==i.CONNECTED){t.processid==l.Processid.srs&&t.xyid==SRS.MSGID.MSGID_CHECKACT||console.log("Socket33.notify",this.getProtoClassName(t),t);var n=u.ProtocolManager.instance.encode(t,e);n&&this._socket&&this._socket.send(n)}else console.error("socket is not connect",this.getProtoClassName(t),t)},e.prototype.request=function(t,e,n,o){if(t.cmdid)console.error("\u6e38\u620f\u5185\u534f\u8bae\u6682\u4e0d\u652f\u6301callback");else{var a=this.newAskId;if(t.askid=a,e){var i=0===t.processid?this.NETWORK_TIMEOUT:this.NETWORK_TIMEOUT_OTHERS;this._callbacks[a]={callback:e,expireTime:this._time+i,reqProtoId:this.getKey(t.processid,t.xyid),respProtoId:n&&o&&this.getKey(n,o)}}this.notify(t)}},e.prototype.getProtoClassName=function(t){return t&&t.__proto__?t.__proto__.__class__:"unkonw Protocol"},e.prototype.reqEncryptVer=function(){console.log("Socket33.reqEncryptVer");var t=new p.SrsProtocol.EncryptVer({version:this.DEFAULT_ENCRYPT_VER});this.notify(t)},e.prototype.respEncryptVer=function(t){console.log("Socket33.respEncryptVer");var e=t.version;t.version==this.DEFAULT_ENCRYPT_VER?this.reqKey():console.error("respEncryptVer version = ",e)},e.prototype.reqKey=function(){console.log("Socket33.reqKey");var t=new p.SrsProtocol.ReqKey({});this.notify(t)},e.prototype.respKey=function(t){console.log("Socket33.respKey"),u.ProtocolManager.instance.setKey(t.aeskey)},e.prototype.startSrsHeartbeat=function(){var t=this;this.stopSrsHeartbeat(),this._srsHeartBeatTimer=setInterval(function(){var e=new p.SrsProtocol.HeartBeat({});t.notify(e)},this.HEART_BEAT_INTERVAL)},e.prototype.stopSrsHeartbeat=function(){this._srsHeartBeatTimer&&(clearTimeout(this._srsHeartBeatTimer),this._srsHeartBeatTimer=null)},e.prototype.startAwardHeartbeat=function(){var t=this;this.stopAwardHeartbeat(),this._awardHeartBeatTimer=setInterval(function(){var e=new d.AwardProtocol.HeartBeat({});e.client_time=Date.parse((new Date).toString()),t.notify(e)},this.AWARD_HEART_BEAT_TIMEOUT)},e.prototype.stopAwardHeartbeat=function(){this._awardHeartBeatTimer&&(clearTimeout(this._awardHeartBeatTimer),this._awardHeartBeatTimer=null)},e.prototype.disconnect=function(t){this.close(),t&&this.onClose("Disconnect")},e.prototype.getKey=function(t,e){return t+"_"+e},e}(cc.Component);n.Socket33=h,cc._RF.pop()},{"../../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../../Framework/Manager/EventManager":"EventManager","../../Data/DataEvent":"DataEvent","./Base/Processid":"Processid","./Base/ProtocolManager":"ProtocolManager","./protocol/AwardProtocol":"AwardProtocol","./protocol/SrsProtocol":"SrsProtocol"}],SocketEventType:[function(t,e,n){"use strict";cc._RF.push(e,"e3caaqalOhP1qta3kP4/W+q","SocketEventType"),Object.defineProperty(n,"__esModule",{value:!0}),n.SocketEventType=void 0;var o=function(){function t(){}return t.Break="SocketEventType.Break",t.ConnectingChange="SocketEventType.ConnectingChange",t}();n.SocketEventType=o,cc._RF.pop()},{}],SocketUtils:[function(t,e,n){"use strict";cc._RF.push(e,"52e29+I26lLDKIQNZNtVe3y","SocketUtils");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.SocketUtils=void 0;var s=t("../../../../Framework/Manager/EventManager"),c=t("./SocketEventType"),l=t("./ConnectingManager"),u=t("../../../../Framework/Manager/CoroutineManager"),d=t("./Socket33"),p=t("./Base/Processid"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PRIORITY_LEVEL_COUNT=5,e.CONNECTING_TIMEOUT=5,e._eventArray=[],e._eventGameArray=[],e._eventCacheAyyay=new Map,e.sentCmdIdRecords=[],e._cacheNotify=[],e._cacheRequest=[],e.gameCmdIds0=[],e.gameCmdIdTimes0=[],e.gameCmdIdRecords=[],e.gameCmdIdRecordTimes=[],e._saveEmitEvent=[],e._saveGameEmitEvent=[],e._saveEmitFlag=!1,e}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){if(!this._instanceS){var t=new cc.Node("SocketUtil");cc.director.getScene().addChild(t),this._instanceS=t.addComponent(n)}return this._instanceS},enumerable:!1,configurable:!0}),e.prototype.setStatus=function(e){this.status!==e&&(t.prototype.setStatus.call(this,e),e!==d.WsStatus.CONNECTED&&(this._isOnline=!1),e===d.WsStatus.CLOSED&&(this._eventArray[this.PRIORITY_LEVEL_COUNT].clear(),this._eventGameArray[this.PRIORITY_LEVEL_COUNT].clear(),this._eventCacheAyyay=new Map,l.ConnectingManager.instance.clearNetConnectId(),this.resetRecords("SocketClosed"),this.sentCmdIdRecords.length=0))},e.prototype.onLoad=function(){t.prototype.onLoad.call(this);for(var e=0;e<=this.PRIORITY_LEVEL_COUNT;++e)this._eventArray.push(new cc.EventTarget),this._eventGameArray.push(new cc.EventTarget)},e.prototype.connect=function(e){t.prototype.connect.call(this,e),this._url=e},e.prototype.onClose=function(t){s.EventManager.instance.emit(c.SocketEventType.Break,t)},e.prototype.onOpen=function(){},e.prototype.notify=function(t,e){this.status===d.WsStatus.CONNECTED&&this._notify(t,e)},e.prototype.notifyWait=function(t){this._isOnline?this._notify(t):this._cacheNotify.push(t)},e.prototype._notify=function(e,n){var o;e.processid===p.Processid.srs&&e.xyid===SRS.MSGID.MSGID_ENCRYPTVER?o=(new Date).toCustomString("HH:mm:ss.fff")+"_"+this._url:(o=(new Date).toCustomString("mm:ss.fff")+"_["+e.processid+"_"+e.xyid+(e.cmdid?"_"+e.cmdid:"")+"]",null!=e.nSeat&&(o+="_"+e.nSeat)),this.sentCmdIdRecords.push(o),t.prototype.notify.call(this,e,n)},e.prototype._notifyByAppID=function(){},e.prototype.request=function(t,e,n,o,a){this.status===d.WsStatus.CONNECTED&&this._request(t,e,n,o,a)},e.prototype.requestWait=function(t,e,n,o,a){this._isOnline?this._request(t,e,n,o,a):this._cacheRequest.push({p:t,callback:e,pId:n,xyId:o,silent:a})},e.prototype._request=function(e,n,o,a,i){var r;if(!i&&this.status===d.WsStatus.CONNECTED)try{var s=l.ConnectingManager.instance.addNetConnectId();r=u.CoroutineManager.instance.once(this.CONNECTING_TIMEOUT,function(){l.ConnectingManager.instance.removeNetConnectId(s),r=null})}catch(c){console.error(c)}t.prototype.request.call(this,e,function(t){try{r&&u.CoroutineManager.instance.flush(r)}catch(c){console.error(c)}try{n&&n(t)}catch(c){console.error(c)}},o,a)},e.prototype.resetRecords=function(t){var e=this.gameCmdIdRecords.join("|")||this.gameCmdIds0.pop()||"";this.gameCmdIds0.push(e+"|"+(new Date).toCustomString("HH:mm:ss.fff")+"_"+(t||"resetRecords")),this.gameCmdIds0.length>3&&this.gameCmdIds0.shift();var n=this.gameCmdIdRecordTimes.join("|")||this.gameCmdIdTimes0.pop()||"";this.gameCmdIdTimes0.push(n+"|"+(new Date).toCustomString("HH:mm:ss.fff")+"_"+(t||"resetRecords")),this.gameCmdIdTimes0.length>3&&this.gameCmdIdTimes0.shift(),this.gameCmdIdRecords.length=0,this.gameCmdIdRecordTimes.length=0},e.prototype.onGameMessage=function(t){this.gameCmdIdRecords.push(t.cmdid);var e=t.nSeat,n=t.nNumberID,o=null==e?"":e+"",a=null==n?"":n+"";if(this._saveEmitFlag&&this._eventCacheAyyay[t.cmdid])this.saveGameEmitEvent(t);else{this.gameCmdIdRecordTimes.push((new Date).toCustomString("HH:mm:ss.fff")+"_"+o+"_"+a);var i=this.getGameKey(t.cmdid),r=Date.now();this._eventGameArray.forEach(function(e){try{e.emit(i,t)}catch(n){console.error(i,t,n)}}),Date.now()-r>50&&console.warn("\u6e38\u620f\u534f\u8bae"+i+"\u5904\u7406\u8d85\u8fc750\u6beb\u79d2,\u6709\u70b9\u5361\u5076",t)}},e.prototype.saveEmitEvent=function(t){this._saveEmitEvent.push(t)},e.prototype.saveGameEmitEvent=function(t){this._saveGameEmitEvent.push(t)},e.prototype.popEmitEvent=function(){var t=this;console.log("popEmitEvent");var e=this._saveEmitFlag;if(this._saveEmitFlag=!1,e){for(var n=function(e){var n=o.getKey(o._saveEmitEvent[e].processid,o._saveEmitEvent[e].xyid);o._eventArray.forEach(function(o){try{o.emit(n,t._saveEmitEvent[e])}catch(a){console.error(n,t._saveEmitEvent[e],a)}})},o=this,a=0;a<this._saveEmitEvent.length;++a)n(a);var i=function(e){var n=r.getGameKey(r._saveGameEmitEvent[e].cmdid);r._eventGameArray.forEach(function(o){try{o.emit(n,t._saveGameEmitEvent[e])}catch(a){console.error(n,t._saveGameEmitEvent[e],a)}})},r=this;for(a=0;a<this._saveGameEmitEvent.length;++a)i(a)}this._saveEmitEvent=[],this._saveGameEmitEvent=[]},Object.defineProperty(e.prototype,"saveEmitFlag",{set:function(t){this._saveEmitFlag=t},enumerable:!1,configurable:!0}),e.prototype.onMessage=function(t){var e=this.getKey(t.processid,t.xyid);if(this._saveEmitFlag&&this._eventCacheAyyay[t.xyid])this.saveEmitEvent(t);else{var n=Date.now();this._eventArray.forEach(function(n){try{n.emit(e,t)}catch(o){console.error(e,t,o)}}),Date.now()-n>50&&console.warn("\u5927\u5385\u534f\u8bae"+e+"\u5904\u7406\u8d85\u8fc750\u6beb\u79d2,\u6709\u70b9\u5361\u5076",t),t.processid==p.Processid.srs&&t.xyid==SRS.MSGID.MSGID_PLAYERDATA&&(this.flushCache(),this._isOnline=!0)}},e.prototype.flushCache=function(){var t,e,n,o;if(this._cacheNotify.length>0){try{for(var a=r(this._cacheNotify),i=a.next();!i.done;i=a.next()){var s=i.value;this.notify(s)}}catch(f){t={error:f}}finally{try{i&&!i.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}this._cacheNotify=[]}if(this._cacheRequest.length>0){try{for(var c=r(this._cacheRequest),l=c.next();!l.done;l=c.next()){var u=l.value,d=(s=u.p,u.callback),p=u.pId,h=u.xyId,_=u.silent;this.request(s,d,p,h,_)}}catch(m){n={error:m}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}this._cacheRequest=[]}},e.prototype.onProtocolErr=function(){},e.prototype.register=function(t,e,n,o,a,i){a=null==a?1:Math.clamp(a,0,this.PRIORITY_LEVEL_COUNT-1),i=null!=i;var r=this.getKey(t,e);this._eventArray[a].on(r,o,n),this._eventCacheAyyay[e]=i},e.prototype.registerOnce=function(t,e,n,o){if(this.status!==d.WsStatus.CLOSED){var a=this.getKey(t,e);this._eventArray[this.PRIORITY_LEVEL_COUNT].once(a,o,n)}},e.prototype.unregister=function(t,e,n,o,a){var i=this.getKey(t,e);null==a?this._eventArray.forEach(function(t){return t.off(i,o,n)}):(a=Math.clamp(a,0,this.PRIORITY_LEVEL_COUNT),this._eventArray[a].off(i,o,n))},e.prototype.unregisterByCaller=function(t,e){null==e?(this._eventArray.forEach(function(e){return e.targetOff(t)}),this._eventGameArray.forEach(function(e){return e.targetOff(t)})):(e=Math.clamp(e,0,this.PRIORITY_LEVEL_COUNT),this._eventArray[e].targetOff(t))},e.prototype.registerGame=function(t,e,n,o,a){o=null==o?1:Math.clamp(o,0,this.PRIORITY_LEVEL_COUNT-1),a=null==a;var i=this.getGameKey(t);this._eventGameArray[o].on(i,n,e),this._eventCacheAyyay[t]=a},e.prototype.registerGameOnce=function(t,e,n){if(this.status!==d.WsStatus.CLOSED){var o=this.getGameKey(t);this._eventGameArray[this.PRIORITY_LEVEL_COUNT].once(o,n,e)}},e.prototype.unregisterGame=function(t,e,n,o){var a=this.getGameKey(t);null==o?this._eventGameArray.forEach(function(t){return t.off(a,n,e)}):(o=Math.clamp(o,0,this.PRIORITY_LEVEL_COUNT),this._eventGameArray[o].off(a,n,e))},e.prototype.unregisterGameByCaller=function(t,e){null==e?this._eventGameArray.forEach(function(e){return e.targetOff(t)}):(e=Math.clamp(e,0,this.PRIORITY_LEVEL_COUNT),this._eventGameArray[e].targetOff(t))},e.prototype.getGameKey=function(t){return"cmdid_"+t},n=i([jsClass],e)}(d.Socket33);n.SocketUtils=h,cc._RF.pop()},{"../../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../../Framework/Manager/EventManager":"EventManager","./Base/Processid":"Processid","./ConnectingManager":"ConnectingManager","./Socket33":"Socket33","./SocketEventType":"SocketEventType"}],SpriteContainer:[function(t,e,n){"use strict";cc._RF.push(e,"35919U/KitJzYF+MUVQsI8u","SpriteContainer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.SpriteContainer=n.VerticalAlignType=n.HorizontalAlignType=n.FillType=void 0;var r,s,c,l=cc._decorator.property;(function(t){t[t.NONE=0]="NONE",t[t.SHOW_ALL=1]="SHOW_ALL",t[t.NO_BORDER=2]="NO_BORDER",t[t.FIT_HEIGHT=3]="FIT_HEIGHT",t[t.FIT_WIDTH=4]="FIT_WIDTH",t[t.FREEDOM=5]="FREEDOM"})(r=n.FillType||(n.FillType={})),function(t){t[t.LEFT=0]="LEFT",t[t.MIDDLE=1]="MIDDLE",t[t.RIGHT=2]="RIGHT"}(s=n.HorizontalAlignType||(n.HorizontalAlignType={})),function(t){t[t.TOP=0]="TOP",t[t.CENTER=1]="CENTER",t[t.BOTTOM=2]="BOTTOM"}(c=n.VerticalAlignType||(n.VerticalAlignType={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e._fillType=r.NONE,e._horizontalAlign=s.MIDDLE,e._verticalAlign=c.CENTER,e}return a(e,t),Object.defineProperty(e.prototype,"fillType",{get:function(){return this._fillType},set:function(t){this._fillType=t,this.updateSprite()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"horizontalAlign",{get:function(){return this._horizontalAlign},set:function(t){this._horizontalAlign=t,this.updateSprite()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign=t,this.updateSprite()},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.sprite||(this.sprite=this.getComponentInChildren(cc.Sprite)),this.updateSprite(),this.node.on(cc.Node.EventType.SIZE_CHANGED,this.updateSprite,this)},e.prototype.updateSprite=function(){this.sprite&&(this.scaleSprite(),this.alignSprite())},e.prototype.scaleSprite=function(){var t=this.node,e=this.sprite.node,n=t.width/e.width,o=t.height/e.height;switch(this.fillType){case r.NONE:return void this.sprite.node.setScale(1,1);case r.SHOW_ALL:var a=Math.min(n,o);return void this.sprite.node.setScale(a,a);case r.NO_BORDER:return a=Math.max(n,o),void this.sprite.node.setScale(a,a);case r.FIT_HEIGHT:return void this.sprite.node.setScale(o,o);case r.FIT_WIDTH:return void this.sprite.node.setScale(n,n);case r.FREEDOM:return void this.sprite.node.setScale(n,o)}},e.prototype.alignSprite=function(){var t=this.sprite.node,e=t.width*t.scaleX,n=t.height*t.scaleY,o=this.node,a=o.width*o.scaleX,i=o.height*o.scaleY,r=0;s.LEFT===this.horizontalAlign?r=.5*(e-a):s.RIGHT===this.horizontalAlign&&(r=.5*(a-e));var l=0;c.TOP===this.verticalAlign?l=.5*(i-n):c.BOTTOM===this.verticalAlign&&(l=.5*(n-i));var u=(t.anchorX-.5)*e,d=(t.anchorY-.5)*n;t.setPosition(u+r,d+l)},i([l(cc.Sprite)],e.prototype,"sprite",void 0),i([l],e.prototype,"_fillType",void 0),i([l({type:cc.Enum(r)})],e.prototype,"fillType",null),i([l],e.prototype,"_horizontalAlign",void 0),i([l({type:cc.Enum(s)})],e.prototype,"horizontalAlign",null),i([l],e.prototype,"_verticalAlign",void 0),i([l({type:cc.Enum(c)})],e.prototype,"verticalAlign",null),i([cc._decorator.ccclass,cc._decorator.executeInEditMode],e)}(cc.Component);n.SpriteContainer=u,cc._RF.pop()},{}],SrsProtocol:[function(t,e,n){"use strict";cc._RF.push(e,"3043evJpEFOD4EZlJk5z6rO","SrsProtocol");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SrsProtocol=void 0;var i=t("../Base/Processid"),r=t("../Base/ProtocolManager");(function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.srs,e.xyid=SRS.MSGID.MSGID_ENCRYPTVER,e}return a(e,t),e.prototype.pack=function(){return SRS.EncryptVer.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,SRS.EncryptVer.decode(t))},e}(SRS.EncryptVer);t.EncryptVer=e,r.ProtocolManager.instance.setProtocol(i.Processid.srs,SRS.MSGID.MSGID_ENCRYPTVER,e);var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.srs,e.xyid=SRS.MSGID.MSGID_REQKEY,e}return a(e,t),e.prototype.pack=function(){return SRS.ReqKey.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,SRS.ReqKey.decode(t))},e}(SRS.ReqKey);t.ReqKey=n,r.ProtocolManager.instance.setProtocol(i.Processid.srs,SRS.MSGID.MSGID_REQKEY,n);var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.srs,e.xyid=SRS.MSGID.MSGID_RESPKEY,e}return a(e,t),e.prototype.pack=function(){return SRS.RespKey.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,SRS.RespKey.decode(t))},e}(SRS.RespKey);t.RespKey=o,r.ProtocolManager.instance.setProtocol(i.Processid.srs,SRS.MSGID.MSGID_RESPKEY,o);var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.srs,e.xyid=SRS.MSGID.MSGID_CHECKACT,e}return a(e,t),e.prototype.pack=function(){return SRS.CheckAct.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,SRS.CheckAct.decode(t))},e}(SRS.CheckAct);t.HeartBeat=s,r.ProtocolManager.instance.setProtocol(i.Processid.srs,SRS.MSGID.MSGID_CHECKACT,s);var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.srs,e.xyid=SRS.MSGID.MSGID_PLAYERCONNECT,e}return a(e,t),e.prototype.pack=function(){return SRS.PlayerConnect.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,SRS.PlayerConnect.decode(t))},e}(SRS.PlayerConnect);t.ReqPlayerConnect=c,r.ProtocolManager.instance.setProtocol(i.Processid.srs,SRS.MSGID.MSGID_PLAYERCONNECT,c);var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.srs,e.xyid=SRS.MSGID.MSGID_PLAYERDATA,e}return a(e,t),e.prototype.pack=function(){return SRS.PlayerData.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,SRS.PlayerData.decode(t))},e}(SRS.PlayerData);t.RespPlayerConnect=l,r.ProtocolManager.instance.setProtocol(i.Processid.srs,SRS.MSGID.MSGID_PLAYERDATA,l);var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.srs,e.xyid=SRS.MSGID.MSGID_REQPLAYERPLUSDATA,e}return a(e,t),e.prototype.pack=function(){return SRS.ReqPlayerPlusData.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,SRS.ReqPlayerPlusData.decode(t))},e}(SRS.ReqPlayerPlusData);t.ReqPlayerPlusData=u,r.ProtocolManager.instance.setProtocol(i.Processid.srs,SRS.MSGID.MSGID_REQPLAYERPLUSDATA,u);var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.srs,e.xyid=SRS.MSGID.MSGID_RESPPLAYERPLUSDATA,e}return a(e,t),e.prototype.pack=function(){return SRS.RespPlayerPlusData.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,SRS.RespPlayerPlusData.decode(t))},e}(SRS.RespPlayerPlusData);t.RespPlayerPlusData=d,r.ProtocolManager.instance.setProtocol(i.Processid.srs,SRS.MSGID.MSGID_RESPPLAYERPLUSDATA,d);var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.srs,e.xyid=SRS.MSGID.MSGID_REPORTSRSERR,e}return a(e,t),e.prototype.pack=function(){return SRS.ReportSRSErr.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,SRS.ReportSRSErr.decode(t))},e}(SRS.ReportSRSErr);t.ReportSRSErr=p,r.ProtocolManager.instance.setProtocol(i.Processid.srs,SRS.MSGID.MSGID_REPORTSRSERR,p);var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processid=i.Processid.srs,e.xyid=SRS.MSGID.MSGID_REQSYNCDATA,e}return a(e,t),e.prototype.pack=function(){return SRS.ReqSyncData.encode(this).finish()},e.prototype.unpack=function(t){Object.assign(this,SRS.ReqSyncData.decode(t))},e}(SRS.ReqSyncData);t.ReqSyncData=h,r.ProtocolManager.instance.setProtocol(i.Processid.srs,SRS.MSGID.MSGID_REQSYNCDATA,h)})(n.SrsProtocol||(n.SrsProtocol={})),cc._RF.pop()},{"../Base/Processid":"Processid","../Base/ProtocolManager":"ProtocolManager"}],StringBuilder:[function(t,e,n){"use strict";cc._RF.push(e,"cdc1c0CRV9It5es8QFW+9Jf","StringBuilder");var o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.StringBuilder=void 0;var r=function(){function t(t){var e,n;void 0===t&&(t="");for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];this._splitChar=t,this._buffers=a(o),this._length=0;try{for(var s=i(o),c=s.next();!c.done;c=s.next()){var l=c.value;l&&(this._length+=l.length)}}catch(u){e={error:u}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}return Object.defineProperty(t.prototype,"splitChar",{get:function(){return this._splitChar},set:function(t){this._splitChar=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this._buffers.length<=0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){var t=""===this._splitChar?0:void 0===this._splitChar?1:null===this._splitChar?4:this._splitChar.length;return t>0&&!this.isEmpty?this._length+t*(this._buffers.length-1):this._length},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this._buffers.length=0,this._length=0},t.prototype.append=function(t){this._length+=t?t.length:0,this._buffers.push(t)},t.prototype.pop=function(){var t=this._buffers.pop();return this._length-=t?t.length:0,t},t.prototype.toString=function(){return this._buffers.join(this._splitChar)},t}();n.StringBuilder=r,cc._RF.pop()},{}],StrongArmyPlatform:[function(t,e,n){"use strict";cc._RF.push(e,"1f8e0TExB5KwIqn5xUI9UV0","StrongArmyPlatform");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.StrongArmyPlatform=void 0;var r=t("./_IPlatform"),s=t("../../../../Framework/Manager/CoroutineManager"),c=t("../../../../Framework/Manager/EventManager"),l=t("./Const/PlatformEventType"),u=t("../../../../Framework/Root/ManagerRoot"),d=t("../../../../Framework/Root/ProxyRoot"),p=t("../../../../Framework/Root/ModelRoot"),h=t("../../../../Framework/Manager/UIManager"),_=t("../../../../Framework/Utils/Extension/ConsoleExtension"),f=t("./Const/Scope"),m=t("../../Data/DataBfConfig"),g=t("./PlatformManager"),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=g.PlatformTypeEnum.StrongArmy,e.TOAST_ICON_MAP={success:"\u2713\n",error:"\u2715\n",loading:"\u27f3\n"},e.BANNER_WIDTH=600,e.BANNER_HEIGHT=160,e.BANNER_AD_IDS=["https://wxresource.gameabc2.com/scmj/mjhl/static/banner/banner_dev_0.jpg","https://wxresource.gameabc2.com/scmj/mjhl/static/banner/banner_dev_1.jpg"],e._bannerAds={},e._whatsNewSubscriptionStatus=r.WhatsNewSubscriptionsStatusEnum.CAN_SUBSCRIBE,e}return a(e,t),Object.defineProperty(e.prototype,"isAppHidden",{get:function(){return this._isAppHidden},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"query",{get:function(){return this._launchArgs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"channel",{get:function(){return+this._launchArgs.channel||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return+this._launchArgs.scene||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chatType",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shareTicket",{get:function(){},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=this,e={},n=location.href.indexOf("?"),o=-1!==n&&location.href.substring(n+1);if(o)for(var a=decodeURIComponent(o).split("&"),i=0,r=a.length;i<r;++i){var u=a[i].split("=");u.length>1&&(e[u[0]]=u[1])}e.user||(e.user="Debug_"+Date.now(),e.devLogin="1"),this._launchArgs=e,s.CoroutineManager.instance.frameOnce(1,function(){cc.game.on(cc.game.EVENT_SHOW,function(){t._isAppHidden=!1,c.EventManager.instance.emit(l.PlatformEventType.AppShow)}),cc.game.on(cc.game.EVENT_HIDE,function(){t._isAppHidden=!0,c.EventManager.instance.emit(l.PlatformEventType.AppHide)})},this),c.EventManager.instance.emit(l.PlatformEventType.AppShow),m.DataBfConfig.init(this.query.env,this.name),this.initConsole(),this.initFrameRate();var d=cc.profiler.showStats;cc.profiler.showStats=function(){d&&d(),s.CoroutineManager.instance.late(t.profilerBg,t)},cc.debug.setDisplayStats(!!this._launchArgs.debug),this.exportClasses(),h.UIManager.instance.weakMapEnable=!0},e.prototype.profilerBg=function(){var t=cc.director.getScene().getChildByName("PROFILER-NODE");if(t){var e=t.getChildByName("BG");e||cc.loader.loadRes("ui/DefaultTexture",cc.SpriteFrame,function(n,o){n||(e=new cc.Node("BG"),t.insertChild(e,0),e.addComponent(cc.Sprite).spriteFrame=o,e.setPosition(0,15),e.setAnchorPoint(0,0),e.color=cc.Color.BLACK,e.opacity=160,e.width=200,e.height=90)})}},e.prototype.exportClasses=function(){s.CoroutineManager.instance.late(function(){u.ManagerRoot.instance.forEach(function(t){var e=cc.js.getClassName(t);e&&(window[e]=t.constructor)}),p.ModelRoot.instance.forEach(function(t){var e=cc.js.getClassName(t);e&&(window[e]=t.constructor)}),d.ProxyRoot.instance.forEach(function(t){var e=cc.js.getClassName(t);e&&(window[e]=t.constructor)})},this),window.ConsoleExtension=_.ConsoleExtension,["ConstValue","HttpUtil","UIHelp","UtilTool","PopupConfig"].forEach(function(t){window[t]=cc.js.getClassByName(t)})},e.prototype.initConsole=function(){_.ConsoleExtension.setEnabled(!0),_.ConsoleExtension.setReferEnabled(!0)},e.prototype.initFrameRate=function(){cc.game.setFrameRate(60)},e.prototype.getSystemInfoSync=function(){return this._systemInfo||(this._systemInfo={screenWidth:window.innerWidth,screenHeight:window.innerHeight,pixelRatio:1,platform:"web",system:"Windows",batteryLevel:100})},Object.defineProperty(e.prototype,"performanceLevel",{get:function(){return-1},enumerable:!1,configurable:!0}),e.prototype.isLowPerformance=function(){return!1},e.prototype.login=function(t){var e=this._launchArgs.guid;console.log("StrongArmy.login:",this._launchArgs),t&&t({code:e,os:this.name})},e.prototype.createUserInfoButton=function(){return null},e.prototype.getUserInfo=function(t,e){var n=this;console.log("Develop getUserInfo"),this.showDialog(t,!0,function(t){if(t){var o={nickname:n._launchArgs.nickname,icon:n._launchArgs.icon,gender:+n._launchArgs.gender};console.log("Develop getUserInfo succeed:",o),e&&e(o)}else console.warn("Develop getUserInfo failed: denied"),e&&e(null)},"\u5141\u8bb8","\u62d2\u7edd")},e.prototype.getUserInfoSilent=function(t){console.log("Develop getUserInfoSilent");var e={nickname:this._launchArgs.nickname,icon:this._launchArgs.icon,gender:+this._launchArgs.gender};console.log("Develop getUserInfoSilent succeed:",e),t&&t(e)},e.prototype.getShareInfo=function(t){console.log("Develop getShareInfo"),t&&t(null)},e.prototype.requireScope=function(t,e,n){var o=this;console.log("Develop requireScope"),this.isScopeAuthored(t,function(e){e?n&&n(!0,!0):t===f.Scope.record?o.recordAuthorize(function(t){n&&n(t,e)}):t===f.Scope.friendsList?n&&n(!1,e):n&&n(null,e)})},e.prototype.isScopeAuthored=function(t,e){var n=this;if(console.log("Develop isScopeAuthored"),t===f.Scope.record)if(this._audioStream)e&&e(!0);else try{navigator.permissions.query({name:"microphone"}).then(function(o){switch(console.log("Develop "+t+" state is",o.state),o.state){case"granted":n.recordAuthorize(e);break;case"denied":e&&e(!1);break;case"prompt":default:e&&e(void 0)}},function(n){console.error("Develop "+t+" state is unknown:",n),e&&e(null)})}catch(o){console.error("Develop "+t+" state is unknown:",o),e&&e(null)}else console.log("Develop "+t+" authored is not support!"),e&&e(!1)},e.prototype.recordAuthorize=function(t){var e=this;if(!1===this._audioStream)t&&s.CoroutineManager.instance.lateWait(function(){return!1!==e._audioStream},function(){t(!!e._audioStream||null===e._audioStream&&null)},this);else if(this._audioStream)t&&t(!0);else try{this._audioStream=!1,console.log("Develop getUserMedia: audio"),navigator.mediaDevices.getUserMedia({audio:!0}).then(function(n){e._audioStream=n,t&&t(!0)},function(n){switch(console.error(n),delete e._audioStream,n.name){case"NotFoundError":return e.showToast("\u672a\u627e\u5230\u5f55\u97f3\u8bbe\u5907\uff0c\u8bf7\u68c0\u67e5\u8bbe\u5907\u8fde\u63a5\u60c5\u51b5\uff01"),void(t&&t(!1));case"NotAllowedError":return e.showToast("\u9ea6\u514b\u98ce\u6743\u9650\u5df2\u88ab\u7981\u7528\uff0c\u8bf7\u70b9\u51fb\u5730\u5740\u680f\u5de6\u4fa7\u6309\u94ae\u542f\u7528\u9ea6\u514b\u98ce\uff01"),void(t&&t(!1));default:return e.showToast("\u6388\u6743\u5931\u8d25\uff01"),void(t&&t(!1))}})}catch(n){this._audioStream=null,this.showToast("\u6388\u6743\u5931\u8d25\uff01"),t&&t(null)}},Object.defineProperty(e.prototype,"hasShare",{get:function(){return!1},set:function(){},enumerable:!1,configurable:!0}),e.prototype.onShareAppMessage=function(){},e.prototype.onShareTimeline=function(){},e.prototype.shareAppMessage=function(t,e,n){console.log("Develop shareAppMessage: ",{title:t,imageUrl:e,query:n});var o=document.createElement("img");o.src=e,o.onload=function(){var e=document.createElement("div");e.innerText=t,e.style.cssText="width:480px;height:420px;padding:15px;border-radius:5px;\n\t\t\t\t\t\t\t\tposition:fixed;top:50%;left:50%;z-index:999999;\n\t\t\t\t\t\t\t\tcolor:rgb(0,0,0);background:rgba(255,255,255,255);\n\t\t\t\t\t\t\t\tfont-size:18px;line-height:20px;text-align:left;\n\t\t\t\t\t\t\t\ttransform:translate(-50%,-50%);\n\t\t\t\t\t\t\t\topacity:0;transition:opacity 0.25s ease-out;",document.body.appendChild(e),o.style.cssText="width:500px;height:400px;position:absolute;left:5px;top:45px;z-index:1000000;",o.style.visibility="visible",e.appendChild(o),setTimeout(function(){e.style.opacity="1",setTimeout(function(){e.style.opacity="0",setTimeout(function(){e.remove(),c.EventManager.instance.emit(l.PlatformEventType.Share,3)},250)},2e3),e.onclick=function(){var t=location.href,e=t.match(/user=[^&]+/);e&&(t=t.replace(e[0],e[0]+"_Share")),n&&(t=t+(t.indexOf("?")?"&":"?")+n),window.open(t)}},100)}},e.prototype.showToast=function(t,e,n,o){console.log("Develop showToast:",t,e,n,o),t=(this.TOAST_ICON_MAP[e]||"")+(t||"");var a=this.createToast(t,o);setTimeout(function(){a.style.opacity="1",setTimeout(function(){a.style.opacity="0",setTimeout(function(){a.remove()},250)},n?Math.max(n,250):2e3)},100),this._hideLoading()},e.prototype.createToast=function(t,e){var n=document.createElement("div");return n.title=t,n.innerText=t,null==e&&(e=.5),n.style.cssText="min-width:150px;height:"+20*t.split("\n").length+"px;\n\t\t\t\t\t\t\t\tpadding:14px;border-radius:4px;\n\t\t\t\t\t\t\t\tposition:fixed;top:"+100*e+"%;left:50%;z-index:999999;\n\t\t\t\t\t\t\t\tfont-size:16px;line-height:20px;text-align:center;\n\t\t\t\t\t\t\t\tcolor:rgb(255,255,255);background:rgba(0,0,0,0.7);\n\t\t\t\t\t\t\t\ttransform:translate(-50%,-50%);\n\t\t\t\t\t\t\t\topacity:0;transition:opacity 0.25s ease-out;",document.body.appendChild(n),n},e.prototype.showLoading=function(t){if(console.log("Develop showLoading:",t),t=this.TOAST_ICON_MAP.loading+(t||""),this._loadingDiv)this._loadingDiv.innerText=t;else{var e=this.createToast(t);setTimeout(function(){return e.style.opacity="1"},100),this._loadingDiv=e}},e.prototype.hideLoading=function(){console.log("Develop hideLoading"),this._hideLoading()},e.prototype._hideLoading=function(){var t=this._loadingDiv;t&&(t.style.opacity="0",setTimeout(function(){return t.remove()},250),this._loadingDiv=null)},e.prototype.showDialog=function(t,e,n){if(e){var o=confirm(t);n&&n(o)}else alert(t),n&&n(!0)},Object.defineProperty(e.prototype,"isSupportVideoAd",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isVideoAdLoaded",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.showVideoAd=function(t){try{t&&t(!0),c.EventManager.instance.emit(l.PlatformEventType.VideoAdClose,!0)}catch(e){console.error(e)}},Object.defineProperty(e.prototype,"hasBannerAd",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.createBannerAd=function(t,e,n,o){if(e=e||{x:.5,y:1,pivotX:.5,pivotY:1},this.hasBannerAd){var a=this.BANNER_AD_IDS[t%this.BANNER_AD_IDS.length];if(a){console.log("Develop Create banner ad: ",t,a,e);var i=document.createElement("img");i.src=a,this._bannerAds[t]=i;var r=this.BANNER_WIDTH,c=this.BANNER_HEIGHT,l=window.innerWidth,u=window.innerHeight;i.style.cssText="width:"+r+"px;height:"+c+"px;position:absolute;left:"+l+"px;top:"+u+"px;z-index:1000000;",document.body.appendChild(i),s.CoroutineManager.instance.late(function(){var t=e.x*l-r*e.pivotX,o=e.y*u-c*e.pivotY;i.style.cssText="width:"+r+"px;height:"+c+"px;position:absolute;left:"+t+"px;top:"+o+"px;z-index:1000000;";var a=r/window.innerWidth,s=c/window.innerHeight,d=t/window.innerWidth,p=o/window.innerHeight;n&&n(d,p,a,s,i.src)},this)}else o&&o(),console.warn("Develop BannerAd id is null or empty!")}else o&&o(),console.warn("Develop BannerAd is not supported!")},Object.defineProperty(e.prototype,"hasGameBannerAd",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.createGameBannerAd=function(t,e,n,o){return this.createBannerAd(t,e,n,o)},Object.defineProperty(e.prototype,"hasGridAd",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.createGridAd=function(t,e,n,o){return this.createBannerAd(t,e,n,o)},e.prototype.showBannerAd=function(t,e,n){var o=this._bannerAds[t];o&&(o.style.visibility="visible",console.log("Develop Show banner ad: ",t),n&&n(!0))},e.prototype.hideBannerAd=function(t){var e=this._bannerAds[t];e&&(e.style.visibility="hidden",console.log("Develop Hide banner ad: ",t))},e.prototype.closeBannerAd=function(t){var e=this._bannerAds[t];e&&(e.remove(),this._bannerAds[t]=null,console.log("Develop Close banner ad: ",t))},Object.defineProperty(e.prototype,"hasGamePortalAd",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.showGamePortalAd=function(t){try{t&&t(!1)}catch(e){console.error(e)}},Object.defineProperty(e.prototype,"canKejin",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.requestKejin=function(t,e){e&&e(!0)},e.prototype.showKeyboard=function(){},e.prototype.updateKeyboard=function(){},e.prototype.hideKeyboard=function(){},e.prototype.navigateToMiniProgram=function(t,e){e&&e(!0)},Object.defineProperty(e.prototype,"canVoiceChat",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.joinVoiceChat=function(t,e,n){n&&n(!0,[])},e.prototype.exitVoiceChat=function(t){t&&t(!0)},e.prototype.updateVoiceChatMuteConfig=function(t,e){e&&e(!0)},e.prototype.onVoiceChatSpeakersChanged=function(){},e.prototype.onVoiceChatMembersChanged=function(){},e.prototype.onVoiceChatInterrupted=function(){},Object.defineProperty(e.prototype,"canFeedback",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.createFeedbackButton=function(){return null},e.prototype.openCustomerServiceConversation=function(t,e){console.log("Develop openCustomerServiceConversation:",t),e&&e(!0)},Object.defineProperty(e.prototype,"canOpenURL",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.openCustomerServiceWithURL=function(t){cc.sys.openURL(t)},e.prototype.clearCache=function(){console.log("Develop clearCache")},e.prototype.exit=function(){console.log("Develop exit")},e.prototype.fix=function(t){t?(this.clearCache(),this.exit()):this.exit()},Object.defineProperty(e.prototype,"canSubscribe",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canWhatNewSubscribe",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.requestSubscribe=function(t,e){e&&e(!0)},e.prototype.requestSubscribeWhatsNew=function(t){var e=this;this._whatsNewSubscriptionStatus==r.WhatsNewSubscriptionsStatusEnum.SUBSCRIBE_OK?t&&t(null,r.WhatsNewSubscriptionsErrorEnum.USER_SUBSCRIBED):this.showDialog("\u6e38\u620f\u66f4\u65b0\u65f6\uff0c\u4f60\u5c06\u6536\u5230\u6d88\u606f\u63d0\u9192\u3002",!0,function(n){n&&(e._whatsNewSubscriptionStatus=r.WhatsNewSubscriptionsStatusEnum.SUBSCRIBE_OK),t&&t(n)})},e.prototype.getWhatsNewSubscriptionsSetting=function(t){t&&t(!0,this._whatsNewSubscriptionStatus)},Object.defineProperty(e.prototype,"networkType",{get:function(){return"wifi"},enumerable:!1,configurable:!0}),e.prototype.getBatteryInfo=function(t){t&&t(100,!0)},e.prototype.getLocation=function(t){console.log("Develop getLocation"),t&&t({latitude:30.2932,longitude:120.1123})},Object.defineProperty(e.prototype,"hasGameRecorder",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameRecording",{get:function(){return null!=this._gameRecordCo},enumerable:!1,configurable:!0}),e.prototype.gameRecorderStart=function(t){var e=this;if(this.gameRecording)console.error("Develop gameRecordStart failed!");else{console.log("Develop gameRecordStart"),this._gameRecordPaused=!1,this._duration=0;var n=Date.now();this._gameRecordCo=s.CoroutineManager.instance.lateWait(function(){if(!e._gameRecordPaused){var t=Date.now();e._duration+=t-n,n=t,c.EventManager.instance.noLogEmit(l.PlatformEventType.GameRecorderTimeUpdate,e._duration)}return!1},function(){},this),c.EventManager.instance.emit(l.PlatformEventType.GameRecorderStart),t&&t()}},e.prototype.gameRecorderPause=function(t){this.gameRecording&&!this._gameRecordPaused?(console.log("Develop gameRecordPause"),this._gameRecordPaused=!0,c.EventManager.instance.emit(l.PlatformEventType.GameRecorderPause),t&&t()):console.error("Develop gameRecordPause failed!")},e.prototype.gameRecorderResume=function(t){this.gameRecording&&this._gameRecordPaused?(console.log("Develop gameRecordResume"),this._gameRecordPaused=!1,c.EventManager.instance.emit(l.PlatformEventType.GameRecorderResume),t&&t()):console.error("Develop gameRecordPause failed!")},e.prototype.gameRecorderStop=function(t){this.gameRecording?(console.log("Develop gameRecordStop"),s.CoroutineManager.instance.stopCo(this._gameRecordCo),this._gameRecordCo=null,c.EventManager.instance.emit(l.PlatformEventType.GameRecorderStop,this._duration),t&&t(this._duration)):console.error("Develop gameRecordStop failed!")},e.prototype.gameRecorderAbort=function(t){console.log("Develop gameRecordAbort"),this.gameRecording?this.gameRecorderStop(function(){c.EventManager.instance.emit(l.PlatformEventType.GameRecorderAbort),t&&t()}):(c.EventManager.instance.emit(l.PlatformEventType.GameRecorderAbort),t&&t())},e.prototype.createGameRecorderShareButton=function(){return console.log("Develop.createGameRecorderShareButton"),null},e.prototype.initRecordManager=function(){if(!this._recorder)if(window.MediaRecorder){this._recorder=new MediaRecorder(this._audioStream);var t=0;this._recorder.onstart=function(e){t=e.timeStamp,console.log("Recorder start."),c.EventManager.instance.emit(l.PlatformEventType.RecorderStart)},this._recorder.ondataavailable=function(e){var n={duration:Math.floor(e.timeStamp-t),tempFilePath:URL.createObjectURL(e.data),fileSize:e.data.size};console.log("Recorder stop:",n),c.EventManager.instance.emit(l.PlatformEventType.RecorderStop,n.duration,n.tempFilePath,n.fileSize)}}else this.showToast("\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u5f55\u97f3\uff0c\u8bf7\u66f4\u6362\u6d4f\u89c8\u5668\u518d\u8bd5\uff01")},e.prototype.startRecord=function(){console.log("Develop startRecord"),this.initRecordManager(),this._recorder&&this._recorder.start()},e.prototype.stopRecord=function(){var t=this;console.log("Develop stopRecord"),s.CoroutineManager.instance.wait(function(){return!1!==t._recorder},function(){t._recorder&&"inactive"!==t._recorder.state&&t._recorder.stop()},this)},e.prototype.setClipboardData=function(t,e){if(null!=t){var n=document.createElement("textarea");document.body.appendChild(n),n.value=t,n.select(),document.execCommand("Copy"),n.remove(),console.log("Develop setClipboardData succeed:",t),this.showToast("\u5185\u5bb9\u5df2\u590d\u5236"),e&&e(!0)}else console.warn("Develop setClipboardData failed: data is null!"),e&&e(!1)},e.prototype.getClipboardData=function(t){console.log("Develop getClipboardData failed: can not get clipboard data on web!"),t&&t(null)},e.prototype.uploadFile=function(t,e,n,o,a,i,r){console.log("Develop uploadFile",t,e,n,o,a,i),fetch(n).then(function(n){console.log("Develop uploadFile load succeed:",n.status),n.blob().then(function(n){console.log("Develop uploadFile blob succeed:",n);var s=new FormData;if(i)for(var c in i)if(i.hasOwnProperty(c)){var l=i[c];s.append(c,l+"")}s.append(o,e),s.append(a,n),fetch(t,{method:"post",body:s}).then(function(n){console.log("Develop uploadFile upload succeed:",n.status),r&&r(t+"/"+e)},function(t){console.error("Develop uploadFile upload failed:",t),r&&r(null)})},function(t){console.error("Develop uploadFile blob failed:",t),r&&r(null)})},function(t){console.error("Develop uploadFile load failed:",t),r&&r(null)})},e.prototype.toTempFilePath=function(t,e,n){this.toDataURL(t,n)},e.prototype.toDataURL=function(t,e){var n;console.log("Develop Canvas.toDataURL");try{n=t.toDataURL(),console.log("Develop Canvas.toDataURL succeed:",n)}catch(o){console.error("Develop Canvas.toDataURL failed:",o)}e&&e(n)},e.prototype.previewImage=function(t,e){t&&t.forEach(function(t){return window.open(t)}),e&&e(!0)},e.prototype.saveImageToPhotosAlbum=function(t,e){e&&e(!0)},e.prototype.setMessageToFriendQuery=function(){},e.prototype.setUserCloudStorage=function(){},e.prototype.postMessage=function(){},e.prototype.reportUserBehaviorBranchAnalytics=function(){},e.prototype.getEnvVersion=function(){return""},Object.defineProperty(e.prototype,"supportAct",{get:function(){return{ACTIVITY_CENTER:!0,SIGN:!1,LUCKY_TURN:!1,SHARE_HAVE_GIFT:!1,TEN_BOX:!1,CUSTOMER:!0,MATCH_AND_FIREND:!0,TEAM_INVITE_GIFT:!1,SKY_FALL_TICKET:!1}},enumerable:!1,configurable:!0}),i([jsClass],e)}(cc.Component);n.StrongArmyPlatform=y,cc._RF.pop()},{"../../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Manager/UIManager":"UIManager","../../../../Framework/Root/ManagerRoot":"ManagerRoot","../../../../Framework/Root/ModelRoot":"ModelRoot","../../../../Framework/Root/ProxyRoot":"ProxyRoot","../../../../Framework/Utils/Extension/ConsoleExtension":"ConsoleExtension","../../Data/DataBfConfig":"DataBfConfig","./Const/PlatformEventType":"PlatformEventType","./Const/Scope":"Scope","./PlatformManager":"PlatformManager","./_IPlatform":"_IPlatform"}],SubpackagesManager:[function(t,e,n){"use strict";cc._RF.push(e,"3e5dbobU/pNeqVT5iLdIqM4","SubpackagesManager");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.SubpackagesManager=void 0;var r=t("../../Core/Base/Data/DataEvent"),s=t("../Root/ManagerRoot"),c=t("./BaseManager"),l=t("./CoroutineManager"),u=t("./EventManager"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return s.ManagerRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=this;l.CoroutineManager.instance.once(.3,function(){t.initSubPackageInfo()})},e.prototype.initSubPackageInfo=function(){var t=function(t){var e=n._subpackagesNames[t];cc.assetManager.loadBundle(e,cc.Asset,function(t){t?console.error("\u5206\u5305\u52a0\u8f7d\u5931\u8d25:"+e):u.EventManager.instance.emit(r.DataEvent.HallPlayMusic)})};for(var e in n._subpackagesNames)t(e)},e.prototype.loadAudio=function(t,e){this.loadAudioClip(t,n._subpackagesNames.AUDIO_BUNDLE,e)},e.prototype.loadAudioClip=function(t,e,n){var o=cc.assetManager.getBundle(e);o&&o.load(t,cc.AudioClip,n)},e._subpackagesNames={AUDIO_BUNDLE:"audioBundle"},n=i([jsClass],e)}(c.BaseManager);n.SubpackagesManager=d,cc._RF.pop()},{"../../Core/Base/Data/DataEvent":"DataEvent","../Root/ManagerRoot":"ManagerRoot","./BaseManager":"BaseManager","./CoroutineManager":"CoroutineManager","./EventManager":"EventManager"}],TenYearActivityModel:[function(t,e,n){"use strict";cc._RF.push(e,"059f3KWyiBHSJrcauKcUHb8","TenYearActivityModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.TenYearActivityModel=void 0;var r,s=t("../../../Framework/Manager/CoroutineManager"),c=t("../../../Framework/Manager/EventManager"),l=t("../../../Framework/Manager/UIManager"),u=t("../../../Framework/Model/BaseModel"),d=t("../../../Framework/Root/ModelRoot"),p=t("../../Award/AwardModel"),h=t("../../Award/AwardUI"),_=t("../../Base/Data/DataEvent"),f=t("./TenYearActivityProxy"),m=t("./TenYearActivityUI");(function(t){t[t.NOT_GET=1]="NOT_GET",t[t.HAD_GET=2]="HAD_GET"})(r||(r={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._tenYearActInfo=null,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return d.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return f.TenYearActivityProxy.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){c.EventManager.instance.on(_.DataEvent.EnterHallSuccess,this,this.onEnterHallSuccess)},e.prototype.onEnterHallSuccess=function(){var t=this;this.proxy.reqTenYearActInfo(function(e,n){e?t._tenYearActInfo=n:console.warn(">----\x3ereqTenYearActInfo.warn: ",n.errorMsg)})},e.prototype.getTenYearActAward=function(){var t=this;this.proxy.getTenYearActAward(function(e,n){if(0===e){t._tenYearActInfo.state=r.HAD_GET;var o=p.AwardModel.instance.adaptAwardsFormat(t._tenYearActInfo.awards),a=p.AwardModel.instance.getAwardsFormat(o);l.UIManager.instance.open(h.AwardUI).then(function(t){t.init(a)})}else console.error(">----\x3egetTenYearActAward.error: ",n),c.EventManager.instance.emit(_.DataEvent.ToastData,"\u9886\u53d6\u9519\u8bef\uff1a"+n);l.UIManager.instance.close(m.TenYearActivityUI)})},e.prototype.autoPopup=function(){var t=this;l.UIManager.instance.addTopCollider("autoPopup"),this._coroutine=s.CoroutineManager.instance.timeoutWait(function(){return null!==t._tenYearActInfo},1,function(){l.UIManager.instance.removeTopCollider("autoPopup"),t._tenYearActInfo&&t._tenYearActInfo.isOPen&&r.NOT_GET===t._tenYearActInfo.state&&l.UIManager.instance.open(m.TenYearActivityUI)},this)},e.prototype.stopPopup=function(){this._coroutine&&(s.CoroutineManager.instance.stopCo(this._coroutine),l.UIManager.instance.removeTopCollider("autoPopup")),this._coroutine=null,l.UIManager.instance.close(m.TenYearActivityUI)},i([jsClass],e)}(u.BaseModel);n.TenYearActivityModel=g,cc.systemEvent.once("GameRoot.inited",function(){d.ModelRoot.instance.add(g)}),cc._RF.pop()},{"../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/Model/BaseModel":"BaseModel","../../../Framework/Root/ModelRoot":"ModelRoot","../../Award/AwardModel":"AwardModel","../../Award/AwardUI":"AwardUI","../../Base/Data/DataEvent":"DataEvent","./TenYearActivityProxy":"TenYearActivityProxy","./TenYearActivityUI":"TenYearActivityUI"}],TenYearActivityProxy:[function(t,e,n){"use strict";cc._RF.push(e,"311201jmj5OLpz32D94br9c","TenYearActivityProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.TenYearActivityProxy=void 0;var r=t("../../../Framework/Proxy/BaseProxy"),s=t("../../../Framework/Root/ProxyRoot"),c=t("../../Base/Data/DataBfConfig"),l=t("../../Base/Data/DataScript"),u=t("../../Base/Module/Network/protocol/AwardProtocol"),d=t("../../Base/Module/Network/SocketUtils"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return s.ProxyRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.reqTenYearActInfo=function(t){var e=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.tenYearActivity.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.tenYearActivity.func.query+"';")});d.SocketUtils.instance.request(e,function(e){if(0===e.flag){var n=bf33.Utils.bytesToString(e.msg);console.log(">-----\x3ereqTenYearActInfo:",n);var o=JSON.parse(n),a=0===o.flag,i={isOPen:1===o.isOpen,state:o.state,errorMsg:o.errorMsg,awards:o.awards||{}};t&&t(a,i)}})},e.prototype.getTenYearActAward=function(t){var e=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.tenYearActivity.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.tenYearActivity.func.getAward+"';")});d.SocketUtils.instance.request(e,function(e){if(0===e.flag){var n=bf33.Utils.bytesToString(e.msg);console.log(">-----\x3egetTenYearActAward:",n);var o=JSON.parse(n);t&&t(o.flag,o.errorMsg)}})},i([jsClass],e)}(r.BaseProxy);n.TenYearActivityProxy=p,cc.systemEvent.once("GameRoot.inited",function(){s.ProxyRoot.instance.add(p)}),cc._RF.pop()},{"../../../Framework/Proxy/BaseProxy":"BaseProxy","../../../Framework/Root/ProxyRoot":"ProxyRoot","../../Base/Data/DataBfConfig":"DataBfConfig","../../Base/Data/DataScript":"DataScript","../../Base/Module/Network/SocketUtils":"SocketUtils","../../Base/Module/Network/protocol/AwardProtocol":"AwardProtocol"}],TenYearActivityUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"f8bc9JXhrBOZpD4gxE2zbHG","TenYearActivityUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./TenYearActivityUI_MainPanel"),a=t("./TenYearActivityUI_Window"),i=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default)},t}();n.default=i,cc._RF.pop()},{"./TenYearActivityUI_MainPanel":"TenYearActivityUI_MainPanel","./TenYearActivityUI_Window":"TenYearActivityUI_Window"}],TenYearActivityUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"fb50868ykpIRKUAPPoQMnDy","TenYearActivityUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("TenYearActivityUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://ho4vqddomct60",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],TenYearActivityUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"7f098i1wWJEkIA8X+cXadJH","TenYearActivityUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("TenYearActivityUI","Window")},e.prototype.onConstruct=function(){this.m_bg=this.getChildAt(0),this.m_btnGetAward=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://ho4vqddomct61",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],TenYearActivityUI:[function(t,e,n){"use strict";cc._RF.push(e,"3fed0cGeZxHWLvsaSlQZxRw","TenYearActivityUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.TenYearActivityUI=void 0;var r=t("../../../Framework/UI/FadeUI"),s=t("./TenYearActivityModel"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return s.TenYearActivityModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){this.view.m_Window.m_btnGetAward.onClick(this.onBtnGetAward,this)},e.prototype.onBtnGetAward=function(){this.mode.getTenYearActAward()},i([jsClass],e)}(r.FadeUI);n.TenYearActivityUI=c,cc._RF.pop()},{"../../../Framework/UI/FadeUI":"FadeUI","./TenYearActivityModel":"TenYearActivityModel"}],TenYearBoxModel:[function(t,e,n){"use strict";cc._RF.push(e,"13ef7HAPB5I9oK86b+0q7XM","TenYearBoxModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.TenYearBoxModel=void 0;var r=t("../../../Framework/Manager/CoroutineManager"),s=t("../../../Framework/Manager/EventManager"),c=t("../../../Framework/Manager/UIManager"),l=t("../../../Framework/Model/BaseModel"),u=t("../../../Framework/Root/ModelRoot"),d=t("../../Award/AwardModel"),p=t("../../Award/AwardUI"),h=t("../../Base/Data/DataBfConfig"),_=t("../../Base/Data/DataEvent"),f=t("../../Base/Data/DataLocalStorageKey"),m=t("../../Base/Data/DataRes"),g=t("../../Base/Module/BfAnalytics/BfasManager"),y=t("../../Base/Module/BfAnalytics/DataPointID"),I=t("../../Base/Utils/UtilTime"),C=t("../../Login/LoginModel"),M=t("../../Base/Module/Platform/PlatformManager"),v=t("../../Shop/ShopModel"),E=t("./TenYearBoxProxy"),A=t("./TenYearBoxUI"),P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._curShopItem=null,e._tenYearBoxInfo=null,e._isEnterHallSuccess=!1,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return u.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return E.TenYearBoxProxy.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tenYearBoxInfo",{get:function(){return this._tenYearBoxInfo},set:function(t){this._tenYearBoxInfo=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curShopItem",{get:function(){return this._curShopItem},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){s.EventManager.instance.on(_.DataEvent.EnterHallSuccess,this,this.onEnterHallSuccess),s.EventManager.instance.on(_.DataEvent.BackHallSuccess,this,this.onBackHallSuccess),s.EventManager.instance.on(_.DataEvent.JoinAwardListener,this,this.onJoinAwardListener)},e.prototype.onEnterHallSuccess=function(){this._isEnterHallSuccess=!0},e.prototype.onJoinAwardListener=function(){var t=this;r.CoroutineManager.instance.wait(function(){return t._isEnterHallSuccess},function(){t.reqTenYearBoxInfo()})},e.prototype.onBackHallSuccess=function(){this._tenYearBoxInfo=null,this.reqTenYearBoxInfo()},e.prototype.reqTenYearBoxInfo=function(t){var e=this;this.proxy.reqTenYearBoxInfo(function(n,o,a){n&&o.isOpen?(e._tenYearBoxInfo=o,e._curShopItem=a,t&&t(!0)):t&&t(!1),s.EventManager.instance.emit(_.DataEvent.TenYearBoxUpdate)})},e.prototype.isNeedPullConfig=function(){return null===this._tenYearBoxInfo},e.prototype.reqBuyTenYearBox=function(t){var e=this;M.PlatformManager.instance.platform.canKejin?(console.warn(">----\x3ereqBuyTenYearBox.buy"),cc.sys.OS_IOS===cc.sys.os&&cc.sys.WECHAT_GAME===cc.sys.platform?v.ShopModel.instance.payWithCustmerService(this._curShopItem,"\u6211\u8981\u5145\u503c"+this._curShopItem.price+"\u5143\u793c\u5305",function(n){n&&(e._tenYearBoxInfo=null),t&&t(n)}):v.ShopModel.instance.payForOrder(this._curShopItem,function(n){if(n){if(h.DataBfConfig.isWebPlatform())return e._tenYearBoxInfo=null,void(t&&t(n));var o=d.AwardModel.instance.adaptAwardsFormat(e._tenYearBoxInfo.awards),a=d.AwardModel.instance.getAwardsFormat(o);c.UIManager.instance.open(p.AwardUI).then(function(t){t.init(a)}),e._tenYearBoxInfo=null}t&&t(n)})):(s.EventManager.instance.emit(_.DataEvent.ToastData,"\u5f53\u524d\u5e73\u53f0\u4e0d\u652f\u6301\u8d2d\u4e70\uff01"),t&&t(!1))},e.prototype.adaptGoldRes=function(t){return t>0&&t<=158888?m.Res.GOLD2:t>158888&&t<=1008888?m.Res.GOLD6:m.Res.GOLD8},e.prototype.autoPopup=function(){var t=this;M.PlatformManager.instance.supportAct.TEN_BOX&&(this._tenYearBoxInfo=null,this.reqTenYearBoxInfo(),c.UIManager.instance.addTopCollider("autoPopup"),this._coroutine=r.CoroutineManager.instance.timeoutWait(function(){return null!==t._tenYearBoxInfo&&C.LoginModel.instance.isReceiveClientConfig},1,function(){c.UIManager.instance.removeTopCollider("autoPopup"),t.isTenYearBoxCanAutoPop()&&(t.addTenYearBoxDayPopCount(),g.BfasManager.instance.sendEvt(y.TenYearBoxPointID.EXPOSURE_AUTOPOP),c.UIManager.instance.open(A.TenYearBoxUI))},this))},e.prototype.stopPopup=function(){this._coroutine&&(r.CoroutineManager.instance.stopCo(this._coroutine),c.UIManager.instance.removeTopCollider("autoPopup")),this._coroutine=null,c.UIManager.instance.close(A.TenYearBoxUI)},e.prototype.isTenYearBoxCanAutoPop=function(){return!(v.ShopModel.instance.isHidePay()||!this._tenYearBoxInfo||0!==this._tenYearBoxInfo.flag||!this._tenYearBoxInfo.isOpen||this.getTenYearBoxDayPopCount()>=this._tenYearBoxInfo.showCount)},e.prototype.addTenYearBoxDayPopCount=function(){var t=I.UtilTime.getDayCountWith4Clock(),e=f.DataLocalStorage.addKeyWithNumID(f.LocalStorageKey.TENYEAR_BOX_DAYPOP_INFO),n=f.DataLocalStorage.getJson([e],{});t===n.dayCount?n.count++:(n.dayCount=t,n.count=1),f.DataLocalStorage.setJson(e,n)},e.prototype.getTenYearBoxDayPopCount=function(){var t=I.UtilTime.getDayCountWith4Clock(),e=f.DataLocalStorage.addKeyWithNumID(f.LocalStorageKey.TENYEAR_BOX_DAYPOP_INFO),n=f.DataLocalStorage.getJson([e],{});return t===n.dayCount&&n.count||0},e.prototype.isShow=function(){return!!M.PlatformManager.instance.supportAct.TEN_BOX&&!v.ShopModel.instance.isHidePay()&&!(!this._tenYearBoxInfo||0!==this._tenYearBoxInfo.flag||!this._tenYearBoxInfo.isOpen)},i([jsClass],e)}(l.BaseModel);n.TenYearBoxModel=P,cc.systemEvent.once("GameRoot.inited",function(){u.ModelRoot.instance.add(P)}),cc._RF.pop()},{"../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/Model/BaseModel":"BaseModel","../../../Framework/Root/ModelRoot":"ModelRoot","../../Award/AwardModel":"AwardModel","../../Award/AwardUI":"AwardUI","../../Base/Data/DataBfConfig":"DataBfConfig","../../Base/Data/DataEvent":"DataEvent","../../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../../Base/Data/DataRes":"DataRes","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../Base/Module/Platform/PlatformManager":"PlatformManager","../../Base/Utils/UtilTime":"UtilTime","../../Login/LoginModel":"LoginModel","../../Shop/ShopModel":"ShopModel","./TenYearBoxProxy":"TenYearBoxProxy","./TenYearBoxUI":"TenYearBoxUI"}],TenYearBoxProxy:[function(t,e,n){"use strict";cc._RF.push(e,"d5ab0iHVmtDg5o/xOa28xXL","TenYearBoxProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.TenYearBoxProxy=void 0;var r=t("../../../Framework/Proxy/BaseProxy"),s=t("../../../Framework/Root/ProxyRoot"),c=t("../../Base/Data/DataBfConfig"),l=t("../../Base/Data/DataScript"),u=t("../../Base/Module/Network/protocol/AwardProtocol"),d=t("../../Base/Module/Network/SocketUtils"),p=t("../../Shop/ShopConfig"),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return s.ProxyRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.reqTenYearBoxInfo=function(t){var e=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.tenYearBox.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.tenYearBox.func.query+"';channelID="+c.DataBfConfig.ymn.channel+";")});d.SocketUtils.instance.request(e,function(e){if(0===e.flag){var n=bf33.Utils.bytesToString(e.msg);console.log(">-----\x3ereqTenYearBoxInfo:",n);var o=JSON.parse(n),a=0===o.flag,i={flag:o.flag,isOpen:1===o.isOpen,showCount:o.showCount,sale:o.sale,awards:o.awardData||{},errorMsg:o.errorMsg},r={price:o.productPrice/100,count:o.productCount,paytype:p.PayTypeEnum.REAL,name:o.productName,productid:o.productID};t&&t(a,i,r)}})},i([jsClass],e)}(r.BaseProxy);n.TenYearBoxProxy=h,cc.systemEvent.once("GameRoot.inited",function(){s.ProxyRoot.instance.add(h)}),cc._RF.pop()},{"../../../Framework/Proxy/BaseProxy":"BaseProxy","../../../Framework/Root/ProxyRoot":"ProxyRoot","../../Base/Data/DataBfConfig":"DataBfConfig","../../Base/Data/DataScript":"DataScript","../../Base/Module/Network/SocketUtils":"SocketUtils","../../Base/Module/Network/protocol/AwardProtocol":"AwardProtocol","../../Shop/ShopConfig":"ShopConfig"}],TenYearBoxUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"66543oM3mpLUJBBY4R6ilPw","TenYearBoxUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./TenYearBoxUI_Window"),a=t("./TenYearBoxUI_MainPanel"),i=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default)},t}();n.default=i,cc._RF.pop()},{"./TenYearBoxUI_MainPanel":"TenYearBoxUI_MainPanel","./TenYearBoxUI_Window":"TenYearBoxUI_Window"}],TenYearBoxUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"539a3nMNoJIz4GcuVZJ/h+O","TenYearBoxUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("TenYearBoxUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://k9ijvvvlw4io5",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],TenYearBoxUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"95368izchRFT70iXQNy3hL7","TenYearBoxUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("TenYearBoxUI","Window")},e.prototype.onConstruct=function(){this.m_btnClose=this.getChildAt(2),this.m_txtSale=this.getChildAt(3),this.m_txtGold=this.getChildAt(4),this.m_btnBuyBox=this.getChildAt(5),this.m_loaderGold=this.getChildAt(6),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://k9ijvvvlw4io4",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],TenYearBoxUI:[function(t,e,n){"use strict";cc._RF.push(e,"5890ehvtgNLz6A/bV3oVDgH","TenYearBoxUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.TenYearBoxUI=void 0;var r=t("../../../Framework/Manager/EventManager"),s=t("../../../Framework/UI/FadeUI"),c=t("../../Base/Data/DataConstant"),l=t("../../Base/Data/DataEvent"),u=t("../../Base/Module/BfAnalytics/BfasManager"),d=t("../../Base/Module/BfAnalytics/DataPointID"),p=t("../../Base/View/UIHelp"),h=t("./TenYearBoxModel"),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return h.TenYearBoxModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initUI(),u.BfasManager.instance.sendEvt(d.TenYearBoxPointID.EXPOSURE_POP)},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onBtnExit,this),this.view.m_Window.m_btnBuyBox.onClick(this.onBtnBuyBox,this),this.view.m_Collider.onClick(this.onBtnExit,this)},e.prototype.initUI=function(){var t=this;this.model.isNeedPullConfig()?(p.UIHelp.instance.showLoading(),this.model.reqTenYearBoxInfo(function(e){p.UIHelp.instance.hideLoading(),e?t.updateUI():(t.onExitClick(),r.EventManager.instance.emit(l.DataEvent.ToastData,"\u6d3b\u52a8\u5df2\u5931\u6548,\u8bf7\u4e0b\u6b21\u53c2\u4e0e\u54e6~"))})):this.updateUI()},e.prototype.updateUI=function(){this.updateActContent()},e.prototype.updateActContent=function(){var t=this.model.tenYearBoxInfo;console.log("_updateActContent:",t);var e=this.model.curShopItem;console.log("_tenYearBoxShopItem:",e),this.view.m_Window.m_txtSale.text=t.sale+"%",this.view.m_Window.m_txtGold.text="x"+e.count+"\u91d1\u5e01",this.view.m_Window.m_btnBuyBox.text=e.price+"\u5143\u9886\u53d6";var n=this.model.adaptGoldRes(e.count);this.view.m_Window.m_loaderGold.icon="ui://"+c.DataConstant.PKG_COMMON+"/"+n},e.prototype.onBtnExit=function(){this.model.tenYearBoxInfo=null,t.prototype.onExitClick.call(this)},e.prototype.onBtnBuyBox=function(){var t=this;console.log("onBtnBuyBox"),u.BfasManager.instance.sendEvt(d.TenYearBoxPointID.CLICK_BUY),this.view.m_Window.m_btnBuyBox.touchable=!1,this.model.reqBuyTenYearBox(function(e){console.log("onBtnBuyBox.result:",e),t.view&&t.view.m_Window&&(t.view.m_Window.m_btnBuyBox.touchable=!0),e&&t.onExitClick()})},i([jsClass],e)}(s.FadeUI);n.TenYearBoxUI=_,cc._RF.pop()},{"../../../Framework/Manager/EventManager":"EventManager","../../../Framework/UI/FadeUI":"FadeUI","../../Base/Data/DataConstant":"DataConstant","../../Base/Data/DataEvent":"DataEvent","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../Base/View/UIHelp":"UIHelp","./TenYearBoxModel":"TenYearBoxModel"}],TimeMatchTopHint:[function(t,e,n){"use strict";cc._RF.push(e,"d56a7ZvNFdM9LV7B7HikH5J","TimeMatchTopHint");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.TimeMatchTopHint=void 0;var r,s=t("./MatchHintUIBinder"),c=t("../../../Framework/UI/BaseUI"),l=t("../../../Framework/UI/FadeUI"),u=t("../../Base/Utils/UtilCC"),d=t("../../Base/Data/DataSpineAni"),p=t("../../../Framework/Manager/CoroutineManager"),h=t("../../Base/Module/BfAnalytics/BfasManager"),_=t("../../Base/Module/BfAnalytics/DataPointID");(function(t){t[t.HIDE=0]="HIDE",t[t.SHOW=1]="SHOW"})(r||(r={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._timeCorout=null,e}return a(e,t),Object.defineProperty(e,"willShowLoading",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return c.UIType.Transparent},enumerable:!1,configurable:!0}),e.getPkgName=function(){return"MatchHintUI"},e.getCompName=function(){return cc.js.getClassName(this)+"_MainPanel"},e.uiBind=function(){s.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"confirmAction",{set:function(t){this._confirmAction=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initAni()},e.prototype.initListener=function(){this.view.m_Window.m_btnConfirm.onClick(this.onConfirmClick,this),this.view.m_Window.m_btnOK.onClick(this.onClickOK,this),this.view.m_Window.m_btnCancel.onClick(this.onClickCancel,this)},e.prototype.init=function(t){this.view.visible=!!t.content,this.view.m_Window.m_txtMessage.text=t.content,t.showTime>0&&this.showTimeClose(t.showTime),h.BfasManager.instance.sendEvt(_.MatchPoint.MATCH_PLAYER_ROUND_HINT_SHOW)},e.prototype.initAni=function(){u.UtilCC.instantiatePrefab(d.DataSpineAniPath.ANI_MATCH_ROCKET,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"xiaohuoj",!0)},this.view.m_Window.m_spineNode.node)},e.prototype.onConfirmClick=function(){h.BfasManager.instance.sendEvt(_.MatchPoint.MATCH_PLAYER_ROUND_HINT_GO),this.view.m_Window.m_cShowBtnPanel.selectedIndex=r.SHOW},e.prototype.showTimeClose=function(t){var e=this;this._timeCorout&&p.CoroutineManager.instance.stopCo(this._timeCorout);var n=t;this._timeCorout=p.CoroutineManager.instance.loop(1,function(){if(--n<0)return e.onExitClick(),!0},this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._timeCorout&&p.CoroutineManager.instance.stopCo(this._timeCorout)},e.prototype.onClickOK=function(){h.BfasManager.instance.sendEvt(_.MatchPoint.MATCH_PLAYER_ROUND_HINT_OK),t.prototype.onExitClick.call(this),this._confirmAction&&this._confirmAction()},e.prototype.onClickCancel=function(){h.BfasManager.instance.sendEvt(_.MatchPoint.MATCH_PLAYER_ROUND_HINT_CANCEL),this.view.m_Window.m_cShowBtnPanel.selectedIndex=r.HIDE},i([jsClass],e)}(l.FadeUI);n.TimeMatchTopHint=f,cc._RF.pop()},{"../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../Framework/UI/BaseUI":"BaseUI","../../../Framework/UI/FadeUI":"FadeUI","../../Base/Data/DataSpineAni":"DataSpineAni","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../Base/Utils/UtilCC":"UtilCC","./MatchHintUIBinder":"MatchHintUIBinder"}],TimeSpan:[function(t,e,n){"use strict";cc._RF.push(e,"e754arlzT1CBazJByIoYU7l","TimeSpan");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.TimeSpan=void 0;var a=function(){function t(t){this.HOURS_PER_DAY=24,this.MINUTES_PER_HOUR=60,this.SECONDS_PER_MINUTE=60,this.Milli_PER_SECOND=1e3,this._milliseconds=t||0,this._totalSeconds=this._milliseconds/this.Milli_PER_SECOND,this._seconds=Math.floor(this._totalSeconds)%this.SECONDS_PER_MINUTE,this._totalMinutes=this._totalSeconds/this.SECONDS_PER_MINUTE,this._minutes=Math.floor(this._totalMinutes)%this.MINUTES_PER_HOUR,this._totalHours=this._totalMinutes/this.MINUTES_PER_HOUR,this._hours=Math.floor(this._totalHours)%this.HOURS_PER_DAY,this._totalDays=this._totalHours/this.HOURS_PER_DAY,this._days=Math.floor(this._totalDays)}return Object.defineProperty(t.prototype,"totalSeconds",{get:function(){return this._totalSeconds},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"seconds",{get:function(){return this._seconds},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalMinutes",{get:function(){return this._totalMinutes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minutes",{get:function(){return this._minutes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalHours",{get:function(){return this._totalHours},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hours",{get:function(){return this._hours},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalDays",{get:function(){return this._totalDays},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"days",{get:function(){return this._days},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this._seconds+"",e=(this._minutes+"").padStart(2,"0")+":"+t.padStart(2,"0");return this._hours>0&&(e=(this._hours+"").padStart(2,"0")+":"+e),this._days>0&&(e=(this._days+"").padStart(2,"0")+":"+e),e},t.prototype.toCustomString=function(t){if(t){var e=this._days+"",n=this._hours+"",o=this._minutes+"",a=this._seconds+"";return t.replace(/d{2,}/,e.padStart(2,"0")).replace("d",e).replace(/H{2,}/,n.padStart(2,"0")).replace("H",n).replace(/h{2,}/,n.padStart(2,"0")).replace("h",n).replace(/m{2,}/,o.padStart(2,"0")).replace("m",o).replace(/s{2,}/,a.padStart(2,"0")).replace("s",a)}return this.toString()},o([jsClass],t)}();n.TimeSpan=a,cc._RF.pop()},{}],ToastModel:[function(t,e,n){"use strict";cc._RF.push(e,"29c92hUR3FPvYu1QRz3Iimw","ToastModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ToastModel=void 0;var r=t("../../../../Framework/Manager/CoroutineManager"),s=t("../../../../Framework/Manager/EventManager"),c=t("../../../../Framework/Manager/UIManager"),l=t("../../../../Framework/Model/BaseModel"),u=t("../../../../Framework/Root/ModelRoot"),d=t("../../Data/DataEvent"),p=t("./ToastUI"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._popDuration=.5,e._toastArray=[],e._isStartLoopFlag=!1,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return u.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){s.EventManager.instance.on(d.DataEvent.ToastData,this,this.onReceiveToastData)},e.prototype.onReceiveToastData=function(t,e,n){e||(e=1.2),this._toastArray.push({content:t,duration:e,opaque:n}),this._isStartLoopFlag||this.popToast()},e.prototype.popToast=function(){var t=this._toastArray[0];t?(c.UIManager.instance.open(p.ToastUI).then(function(e){return e.init(t)}),this._toastArray.splice(0,1),this._isStartLoopFlag=!0,r.CoroutineManager.instance.once(this._popDuration,this.popToast,this)):this._isStartLoopFlag=!1},i([jsClass],e)}(l.BaseModel);n.ToastModel=h,cc.systemEvent.once("GameRoot.inited",function(){u.ModelRoot.instance.add(h)}),cc._RF.pop()},{"../../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../../Framework/Manager/EventManager":"EventManager","../../../../Framework/Manager/UIManager":"UIManager","../../../../Framework/Model/BaseModel":"BaseModel","../../../../Framework/Root/ModelRoot":"ModelRoot","../../Data/DataEvent":"DataEvent","./ToastUI":"ToastUI"}],ToastUI:[function(t,e,n){"use strict";cc._RF.push(e,"98442BFeMtIG6lxsbTT9ceH","ToastUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ToastUI=void 0;var r=t("../../../../Framework/UI/BaseUI"),s=t("../../../../Framework/UI/FadeUI"),c=t("../../Data/DataConstant"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._duration=1.2,e}return a(e,t),Object.defineProperty(e,"willClearOnDestroy",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"willShowLoading",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return r.UIType.Transparent},enumerable:!1,configurable:!0}),e.getPkgName=function(){return c.DataConstant.PKG_COMMON},e.getCompName=function(){return cc.js.getClassName(this)+"_MainPanel"},e.uiBind=function(){},Object.defineProperty(e.prototype,"duration",{set:function(t){this._duration=t},enumerable:!1,configurable:!0}),e.prototype.init=function(t){var e=this;this.view.visible=!!t.content;var n=this.view.getChild("Windows");n&&(n.title=t.content),void 0!==t.opaque&&(this.view.opaque=t.opaque),cc.tween(this.view.node).delay(t.duration||this._duration).call(function(){e.onExitClick()}).start()},i([jsClass],e)}(s.FadeUI);n.ToastUI=l,cc._RF.pop()},{"../../../../Framework/UI/BaseUI":"BaseUI","../../../../Framework/UI/FadeUI":"FadeUI","../../Data/DataConstant":"DataConstant"}],ToolLuaFunc:[function(t,e,n){"use strict";cc._RF.push(e,"38333Otg/ZJOaWcT+867kQh","ToolLuaFunc"),Object.defineProperty(n,"__esModule",{value:!0}),n.ToolLuaFunc=void 0,jsClass("ToolLuaFunc");var o=function(){function t(){}return t.getListLength=function(t){return Object.keys(t).length},t.addTableData_lua=function(t,e){t[this.getListLength(t)+1]=e},t.next_lua=function(t){for(var e in t)if(t[e])return[e,t[e]];return null},t.removeTableData_lua=function(t,e){for(var n in t)if(e==n)return void delete t[n];console.error("removeTableData_lua:\u5220\u9664\u6570\u636e\u5931\u8d25!")},t.deepCopy=function(t){if(null===t)return null;if("object"!=typeof t)return t;if(t.constructor===Date)return new Date(t);var e=new t.constructor;for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];e[n]="object"==typeof o?this.deepCopy(o):o}return e},t}();n.ToolLuaFunc=o,cc._RF.pop()},{}],TopHintUI:[function(t,e,n){"use strict";cc._RF.push(e,"de48diRhWxKULuFSczBsZk5","TopHintUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.TopHintUI=void 0;var r=t("../../../Framework/Manager/CoroutineManager"),s=t("../../../Framework/UI/BaseUI"),c=t("../../../Framework/UI/FadeUI"),l=t("../../Base/Data/DataSpineAni"),u=t("../../Base/Utils/UtilCC"),d=t("./MatchHintUIBinder"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._canClick=!1,e._showTime=null,e._timeCorout=null,e}return a(e,t),Object.defineProperty(e,"willShowLoading",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"uiType",{get:function(){return s.UIType.Transparent},enumerable:!1,configurable:!0}),e.getPkgName=function(){return"MatchHintUI"},e.getCompName=function(){return cc.js.getClassName(this)+"_MainPanel"},e.uiBind=function(){d.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"confirmAction",{set:function(t){this._confirmAction=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"closeAction",{set:function(t){this._closeAction=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initAni()},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onCloseClick,this),this.view.m_Window.m_btnConfirm.onClick(this.onConfirmClick,this)},e.prototype.init=function(t){this.view.visible=!!t.content,this.view.m_Window.m_txtMessage.text=t.content,this.view.m_Window.m_txtMessage.fontSize=t.fntSize||34,t.showTime>0&&this.showTimeClose(t.showTime),this._canClick=t.canClick},e.prototype.initAni=function(){u.UtilCC.instantiatePrefab(l.DataSpineAniPath.ANI_MATCH_ROCKET,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"xiaohuoj",!0)},this.view.m_Window.m_spineNode.node)},e.prototype.onConfirmClick=function(){this._canClick&&(t.prototype.onExitClick.call(this),this._confirmAction&&this._confirmAction())},e.prototype.showTimeClose=function(t){var e=this;this._timeCorout&&r.CoroutineManager.instance.stopCo(this._timeCorout);var n=t;this._timeCorout=r.CoroutineManager.instance.loop(1,function(){if(--n<0)return e.onExitClick(),!0},this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._timeCorout&&r.CoroutineManager.instance.stopCo(this._timeCorout)},e.prototype.onCloseClick=function(){t.prototype.onExitClick.call(this),this._closeAction&&this._closeAction()},i([jsClass],e)}(c.FadeUI);n.TopHintUI=p,cc._RF.pop()},{"../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../Framework/UI/BaseUI":"BaseUI","../../../Framework/UI/FadeUI":"FadeUI","../../Base/Data/DataSpineAni":"DataSpineAni","../../Base/Utils/UtilCC":"UtilCC","./MatchHintUIBinder":"MatchHintUIBinder"}],UIHelp:[function(t,e,n){"use strict";cc._RF.push(e,"89aabtCPxdAY645j6CvUixQ","UIHelp");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.UIHelp=void 0;var r,s=t("../../../Framework/Manager/BaseManager"),c=t("../../../Framework/Manager/CoroutineManager"),l=t("../../../Framework/Manager/EventManager"),u=t("../../../Framework/Manager/UIManager"),d=t("../../../Framework/Root/ManagerRoot"),p=t("./Common/DialogUI"),h=t("./Common/LoadingUI"),_=t("./Common/ToastUI"),f=t("../../Hall/HallUI"),m=t("../Module/Network/SocketEventType"),g=t("../Module/Platform/PlatformManager"),y=t("../Module/Platform/_IPlatform"),I=t("../../UserInfo/UserInfoModel"),C=t("../../UserInfo/UserInfoProxy"),M=t("../Data/DataBfConfig"),v=t("../Data/DataConstant"),E=t("../Data/DataEvent"),A=t("../Data/DataLocalStorageKey"),P=t("../Data/DataSound"),b=t("../Data/DataSpineAni"),U=t("../Module/BfAnalytics/BfasManager"),S=t("../Module/BfAnalytics/DataPointID"),T=t("../Utils/UtilCC"),R=t("../Utils/UtilString"),w=t("../Data/DataProps"),D=t("../Utils/UtilFgui");(function(t){t[t.UNKOWN=0]="UNKOWN",t[t.MALE=1]="MALE",t[t.FEMALE=2]="FEMALE"})(r||(r={}));var O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return d.ManagerRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){console.log(">-----\x3eUIHelp.onLoad"),l.EventManager.instance.on(m.SocketEventType.ConnectingChange,this,this.onConnectingChange)},e.prototype.onConnectingChange=function(t){console.log(">-----\x3eonConnectingChange:",t)},e.prototype.showLoading=function(t,e){u.UIManager.instance.open(h.LoadingUI).then(function(n){n.init({content:t||"\u52a0\u8f7d\u4e2d",duration:e})})},e.prototype.hideLoading=function(){u.UIManager.instance.isExist(h.LoadingUI)&&u.UIManager.instance.close(h.LoadingUI)},e.prototype.showDialogMore=function(t,e,n){u.UIManager.instance.isPkgLoaded(v.DataConstant.PKG_COMMON)?u.UIManager.instance.open(p.DialogUI).then(function(o){o.initConfirm({content:t.content}),o.initCanClose(t.canClose),o.showCloseBtnVisible(t.showCloseBtn),o.setOpacityIsZero(t.isOpacityZero),o.confirmAction=e,n&&(o.closeAction=n)}):g.PlatformManager.instance.platform.showDialog(t.content,!1,e,"\u786e\u5b9a")},e.prototype.showDialog=function(t,e){u.UIManager.instance.isPkgLoaded(v.DataConstant.PKG_COMMON)?u.UIManager.instance.open(p.DialogUI).then(function(n){n.initConfirm({content:t}),n.confirmAction=e}):g.PlatformManager.instance.platform.showDialog(t,!1,e,"\u786e\u5b9a")},e.prototype.showDialogConfirmCancelMore=function(t,e){var n=this;u.UIManager.instance.isPkgLoaded(v.DataConstant.PKG_COMMON)?u.UIManager.instance.open(p.DialogUI).then(function(o){o.initConfirmCancel({content:t.content}),o.initCanClose(t.canClose),o.showCloseBtnVisible(t.showCloseBtn),o.setOpacityIsZero(t.isOpacityZero),o.confirmAction=e.bind(n,!0),o.cancelAction=e.bind(n,!1)}):g.PlatformManager.instance.platform.showDialog(t.content,!0,e,"\u786e\u5b9a","\u53d6\u6d88")},e.prototype.showDialogConfirmCancel=function(t,e){var n=this;u.UIManager.instance.isPkgLoaded(v.DataConstant.PKG_COMMON)?u.UIManager.instance.open(p.DialogUI).then(function(o){o.initConfirmCancel({content:t}),o.confirmAction=e.bind(n,!0),o.cancelAction=e.bind(n,!1)}):g.PlatformManager.instance.platform.showDialog(t,!0,e,"\u786e\u5b9a","\u53d6\u6d88")},e.prototype.showBigDialogConfirmCancel=function(t,e){var n=this;u.UIManager.instance.open(p.DialogUI).then(function(o){o.initFTConfirmCancelClose({content:t.content,btnFTConfirm:t.confirmText||"\u786e\u5b9a",btnFTCancel:t.cancelText||"\u53d6\u6d88"}),o.initCanClose(t.canClose),o.showCloseBtnVisible(t.showCloseBtn),o.confirmAction=e.bind(n,!0),o.setOpacityIsZero(t.isOpacityZero),o.cancelAction=e.bind(n,!1),o.closeAction=e.bind(n,!1)})},e.prototype.closeBigDialog=function(){u.UIManager.instance.isExist(p.DialogUI)&&u.UIManager.instance.close(p.DialogUI)},e.prototype.preload=function(t,e){var n=this;u.UIManager.instance.loadPkg([v.DataConstant.PKG_COMMON,v.DataConstant.PKG_HALL],function(e,n){return t&&t(e/n)}).then(e,function(){console.error(">----\x3epreload.again"),U.BfasManager.instance.evtUserLinkPoint(S.UserConvertLinkPointID.LOADING_FAILE.eventid,S.UserConvertLinkPointID.LOADING_FAILE.eventName,!1,"preload\u52a0\u8f7d\u7b2c\u4e00\u6b21\u5931\u8d25"),c.CoroutineManager.instance.once(.5,function(){u.UIManager.instance.loadPkg([v.DataConstant.PKG_COMMON,v.DataConstant.PKG_HALL],function(e,n){return t&&t(e/n)}).then(e,function(){n.showDialog("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",function(){U.BfasManager.instance.evtUserLinkPoint(S.UserConvertLinkPointID.LOADING_FAILE.eventid,S.UserConvertLinkPointID.LOADING_FAILE.eventName,!1,"preload\u52a0\u8f7d\u7b2c\u4e8c\u6b21\u5931\u8d25"),g.PlatformManager.instance.platform.fix(!0)})})})})},e.prototype.preloadHallSpinePrefab=function(){T.UtilCC.preloadPrefab(b.DataSpineAniPath.ANI_HALL_BTN_MATCH),T.UtilCC.preloadPrefab(b.DataSpineAniPath.ANI_HALL_BTN_TEAM),T.UtilCC.preloadPrefab(b.DataSpineAniPath.ANI_AWARD_GXHD),T.UtilCC.preloadPrefab(b.DataSpineAniPath.ANI_HALL_BTN_SHOP)},e.prototype.enterHall=function(){var t=this;u.UIManager.instance.gotoScene(f.HallUI).finally(function(e){e?(U.BfasManager.instance.evtUserLinkPoint(S.UserConvertLinkPointID.ENTER_HALL.eventid,S.UserConvertLinkPointID.ENTER_HALL.eventName,!0),l.EventManager.instance.emit(E.DataEvent.EnterHallSuccess)):t.showDialog("\u8fdb\u5165\u5927\u5385\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",function(){t.enterHall()})})},e.prototype.backToHall=function(t,e,n,o){u.UIManager.instance.gotoScene(f.HallUI).then(function(a){var i=void 0!==e,r=i?e.gameID:M.GameIDInfo.CLASSIC_GD.id,s=!!i&&e.multType>0;a.init(t,r,s,o),l.EventManager.instance.emit(E.DataEvent.BackHallSuccess),c.CoroutineManager.instance.frameOnce(1,n)})},e.prototype.syncUserInfo=function(t){g.PlatformManager.instance.platform.getUserInfo("\u672c\u6b21\u6388\u6743\u53ea\u7528\u4e8e\u66f4\u65b0\u5934\u50cf\u548c\u6635\u79f0",function(e){if(e){var n=void 0;P.DataSound.isModifiedDubbingSex()?console.log("DataSound.isModifiedDubbingSex."):n=e.gender===r.FEMALE?P.SexEnum.FEMALE:P.SexEnum.MALE;var o={username:e.nickname,head:e.icon,type:C.BindTypeEnum.WECHAT_BIND,sex:n};I.UserInfoModel.instance.bindUserInfo(o,function(e,n){e?(console.log("bindUserInfo==>",o,n),void 0!==n.username&&I.UserInfoModel.instance.setUserInfo({nickname:n.username.toString()}),n.sex&&I.UserInfoModel.instance.setUserInfo({sex:Number(o.sex)}),n.head&&I.UserInfoModel.instance.setUserInfo({headurl:o.head.toString()}),void 0!==n.username?t&&t(!0):t&&t(!1,"\u56e0\u6635\u79f0\u76f8\u540c\u6216\u5b58\u5728\u654f\u611f\u8bcd,\u6635\u79f0\u540c\u6b65\u5931\u8d25\u54e6~")):t&&t(!1)})}else t&&t(!1)})},e.prototype.createFeedbackBtn=function(t,e){var n=u.UIManager.instance.root,o=D.UtilFgui.calculateLocalPosition(t,n),a=o.x/n.width,i=o.y/n.height,r=t.width/n.width,s=t.height/n.height;return g.PlatformManager.instance.platform.createFeedbackButton({type:"image",image:v.DataConstant.RES_PATH.ICON+"/common/empty.png",style:{left:a,top:i,width:r,height:s}},e)},e.prototype.reqWeChatSubscribe=function(t,e){g.PlatformManager.instance.platform.canSubscribe?g.PlatformManager.instance.platform.requestSubscribe(e,function(e){e?t&&t(!0):(u.UIManager.instance.open(_.ToastUI).then(function(t){return t.init({content:"\u8ba2\u9605\u5931\u8d25\uff0c\u68c0\u67e5\u4e00\u4e0b\u8bbe\u7f6e\u662f\u5426\u6253\u5f00\u63a5\u6536\u6743\u9650~"})}),t&&t(!1))}):(u.UIManager.instance.open(_.ToastUI).then(function(t){return t.init({content:"\u5f53\u524d\u5e73\u53f0\u4e0d\u652f\u6301\u8ba2\u9605\uff0c\u60a8\u53ef\u4ee5\u524d\u5f80\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4f53\u9a8c\u5b8c\u6574\u7248\u672c~"})}),t&&t(!1))},e.prototype.openCustomerServiceLink=function(t,e,n,o){g.PlatformManager.instance.platform.canOpenURL&&t===y.CustomerRequestTypeEnum.CUSTOMER_SERVICE?this.openCustomerServiceWithURL(o):this.openCustomerServiceWithNoraml(t,e,n,o)},e.prototype.openCustomerServiceWithURL=function(t){var e=I.UserInfoModel.instance.userInfo.numID||A.DataLocalStorage.getLastLoginNumID(),n=I.UserInfoModel.instance.userInfo.nickname||"",o=I.UserInfoModel.instance.getHead()||"",a=M.DataBfConfig.ymn.channel,i=M.DataBfConfig.VERSION,r=v.DataConstant.CUSTOMER_URL+"&numid="+e+"&nickname="+n+"&avatar="+o+"&channelid="+a+"&app_version="+i+"&showhead=2";g.PlatformManager.instance.platform.openCustomerServiceWithURL(r),t&&t(!0)},e.prototype.openCustomerServiceWithNoraml=function(t,e,n,o){var a,i="",r="",s="";if(y.CustomerRequestTypeEnum.IOS_PAYMENT===t)i=e,a=n,s=JSON.stringify(a),r=v.DataConstant.RES_PATH.LOBBYSHARE+"/customer/goRecharge.jpg";else if(y.CustomerRequestTypeEnum.CUSTOMER_SERVICE===t){i="\u8054\u7cfb\u5ba2\u670d";var c=I.UserInfoModel.instance.userInfo.nickname||"",l=I.UserInfoModel.instance.getHead()||"";a={requestType:t,numID:I.UserInfoModel.instance.userInfo.numID||A.DataLocalStorage.getLastLoginNumID(),nickName:c,channelID:M.DataBfConfig.ymn.channel,appVersion:M.DataBfConfig.VERSION},s="guandan_h5|"+c+"|"+l+"|"+JSON.stringify(a),r=v.DataConstant.RES_PATH.LOBBYSHARE+"/customer/goCustomer.jpg"}else y.CustomerRequestTypeEnum.WECHAT_GROUP===t&&(i="\u6dfb\u52a0\u4f01\u4e1a\u5fae\u4fe1",a={requestType:t},s=JSON.stringify(a),r=v.DataConstant.RES_PATH.LOBBYSHARE+"/customer/goAddWechat.jpg");console.log(">----\x3eopenCustomerServiceLink:",t,a);var u=!0;y.CustomerRequestTypeEnum.CUSTOMER_SERVICE===t&&(u=!1),g.PlatformManager.instance.platform.openCustomerServiceConversation({sessionFrom:s,showMessageCard:u,sendMessageTitle:i,sendMessageImg:r},function(t){console.log(">----\x3eopenCustomerServiceLink.result:",t),o&&o(t)})},e.formatNicknameS=function(t){return R.UtilString.shortString(t,v.DataConstant.NICKNAME_MAX_LENGTH_S)},e.formatNicknameL=function(t,e){return R.UtilString.shortString(t,e||v.DataConstant.NICKNAME_MAX_LENGTH_L)},e.getPropIcon=function(t,e){return t===w.PropTypeEnum.DIAMOND||t===w.PropTypeEnum.GOLD||t===w.PropTypeEnum.CHARM||t===w.PropTypeEnum.SINGLE?"ui://"+v.DataConstant.PKG_COMMON+"/"+e:v.DataConstant.RES_PATH.ICON+"/common/gold.png"},i([jsClass],e)}(s.BaseManager);n.UIHelp=O,cc.systemEvent.once("GameRoot.inited",function(){d.ManagerRoot.instance.add(O)}),cc._RF.pop()},{"../../../Framework/Manager/BaseManager":"BaseManager","../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/Root/ManagerRoot":"ManagerRoot","../../Hall/HallUI":"HallUI","../../UserInfo/UserInfoModel":"UserInfoModel","../../UserInfo/UserInfoProxy":"UserInfoProxy","../Data/DataBfConfig":"DataBfConfig","../Data/DataConstant":"DataConstant","../Data/DataEvent":"DataEvent","../Data/DataLocalStorageKey":"DataLocalStorageKey","../Data/DataProps":"DataProps","../Data/DataSound":"DataSound","../Data/DataSpineAni":"DataSpineAni","../Module/BfAnalytics/BfasManager":"BfasManager","../Module/BfAnalytics/DataPointID":"DataPointID","../Module/Network/SocketEventType":"SocketEventType","../Module/Platform/PlatformManager":"PlatformManager","../Module/Platform/_IPlatform":"_IPlatform","../Utils/UtilCC":"UtilCC","../Utils/UtilFgui":"UtilFgui","../Utils/UtilString":"UtilString","./Common/DialogUI":"DialogUI","./Common/LoadingUI":"LoadingUI","./Common/ToastUI":"ToastUI"}],UIManager:[function(t,e,n){"use strict";cc._RF.push(e,"074acwQPztCZ5VdLY1EeNDX","UIManager");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function r(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r},u=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l(arguments[e]));return t};Object.defineProperty(n,"__esModule",{value:!0}),n.UIManager=void 0;var d=t("../Utils/AsyncBox"),p=t("../Root/ManagerRoot"),h=t("./BaseManager"),_=t("../UI/BaseUI"),f=t("./CoroutineManager"),m=t("../../Core/Base/Data/DatazOrder"),g=t("./EventManager"),y=t("../../Core/Base/Data/DataEvent"),I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.FUI_FILE_EXTENSION="bin",e.DIR_UI="ui",e._layerList=[],e._uiBoxList=[],e._topColliderObj={},e}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return p.ManagerRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return fgui.GRoot.inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weakMapEnable",{set:function(t){this._weakMap=t?window.WeakMap&&new WeakMap:null},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){fgui.addLoadHandler(this.FUI_FILE_EXTENSION),this.initRoot(),this.initTopCollider(),this.initWaitLoadingUI(null),this.loadDefaultTexture()},e.prototype.initRoot=function(){var t=this;for(var e in fgui.GRoot._inst&&!fgui.GRoot._inst.node.isValid||fgui.GRoot.create(),cc.game.addPersistRootNode(this.root.node),_.UIType)if(_.UIType.hasOwnProperty(e)){var n=_.UIType[e];if("number"==typeof n){var o=new fgui.GComponent;o.name=e,o.node.name=e,o.opaque=!1,o.visible=!0,this._layerList[n]=o}}this._layerList.forEach(function(e){return t.root.addChild(e)}),cc.view.resizeWithBrowserSize(!0),this.resizeRoot(),cc.view.on("canvas-resize",this.resizeRoot,this)},e.prototype.resizeRoot=function(){var t,e,n=this.root,o=n.width,a=n.height;this._layerList.forEach(function(t){return t.setSize(o,a)});try{for(var i=c(this._uiBoxList),r=i.next();!r.done;r=i.next()){var s=r.value;if(s&&s.result){var l=s.result.view;this.resize(l,o,a),this.reposition(l,o,a)}}}catch(d){t={error:d}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}if(this._topCollider&&this._topCollider.setSize(o,a),this._waitLoadingUI){var u=this._waitLoadingUI.view;this.resize(u,o,a),this.reposition(u,o,a)}},e.prototype.resize=function(t,e,n){var o=Math.min(e/t.sourceWidth,n/t.sourceHeight);t.setSize(e/o,n/o),t.setScale(o,o)},e.prototype.reposition=function(t,e,n){var o=t.actualWidth,a=t.actualHeight,i=.5*(e-o),r=.5*(n-a);t.pivotAsAnchor?t.setPosition(i+o*t.pivotX,r+a*t.pivotY):t.setPosition(i,r)},e.prototype.initTopCollider=function(){this._topCollider=new fgui.GComponent,this._topCollider.name="TopCollider",this._topCollider.sortingOrder=m.DataZOrder.MAX,this._topCollider.opaque=!0,this._topCollider.visible=!1,this._topCollider.setSize(this.root.width,this.root.height),this._topCollider.onClick(function(){return console.warn("TopCollider clicked!")},this),this.root.addChild(this._topCollider)},e.prototype.addTopColliderTimeout=function(t,e,o){"number"==typeof e&&(o=e,e="_default"),this.addTopCollider(t,e),f.CoroutineManager.instance.once(o,function(){n.instance.removeTopCollider(t,e)},this)},e.prototype.addTopCollider=function(t,e){if(t){(t instanceof Function||t instanceof Object)&&(t=cc.js.getClassName(t)),Object.keys(this._topColliderObj).length<=0&&(this._topCollider.visible||(console.log("TopCollider open"),this._topCollider.visible=!0));var n=this._topColliderObj[t];n||(this._topColliderObj[t]=n={}),e=e||"_default",n.hasOwnProperty(e)||(n[e]=!0,console.log("addTopCollider",t,e))}},e.prototype.removeTopCollider=function(t,e){if(t){(t instanceof Function||t instanceof Object)&&(t=cc.js.getClassName(t));var n=this._topColliderObj[t];n&&(e&&delete n[e],(!e||Object.keys(n).length<=0)&&delete this._topColliderObj[t],console.log("removeTopCollider",t,e)),Object.keys(this._topColliderObj).length<=0&&this._topCollider.visible&&(console.log("TopCollider close"),this._topCollider.visible=!1)}},e.prototype.hasTopColliderKey=function(t,e){if(t){(t instanceof Function||t instanceof Object)&&(t=cc.js.getClassName(t));var n=this._topColliderObj[t];return n&&(!e||n[e])}return!1},e.prototype.initWaitLoadingUI=function(t){var e=this;if(null!==this._waitLoadingUI)if(this._waitLoadingUI&&this._waitLoadingUI.view.dispose(),t)this._waitLoadingUI=null,this.createUI(t).then(function(n){n.view.onClick(function(){return console.warn("WaitLoadingUI clicked!")},e),e._layerList[t.uiType].addChild(n.view),e._waitLoadingUI=n,e._waitLoadingUI.view.getChild("Window").asLabel.title="\u52a0\u8f7d\u4e2d"});else{var n=new fgui.GComponent;n.name="WaitLoadingUI",n.sortingOrder=m.DataZOrder.MAX-1,n.opaque=!0,n.visible=!1,this.root.addChild(n),this._waitLoadingUI={view:n},this._waitLoadingUI.view.onClick(function(){return console.warn("WaitLoadingComp clicked!")},this);var o=this.root,a=o.width,i=o.height;n.sourceWidth=a,n.sourceHeight=i,this.resize(n,a,i),this.reposition(n,a,i)}},e.prototype.gotoScene=function(t,e){var n=this;if(void 0===e&&(e=!0),t&&t.uiType===_.UIType.Scene){var o=[];e&&o.push.apply(o,u(this.list([_.UIType.Window]))),o.push.apply(o,u(this.list([_.UIType.ScenePart]))),o.push.apply(o,u(this.list([_.UIType.Scene]))),o=o.filter(function(t){return!!t.isDone||(t.cancel(),!1)});var a=this._open(t);return a&&a.then(function(){o.forEach(function(t){return t.result.exitClicked||n._close(t)})}),a}return null},e.prototype.open=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t&&t.uiType!==_.UIType.Scene?this._open.apply(this,u([t],e)):null},e.prototype._open=function(t){for(var e=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(t){var a=new d.AsyncBox(this.createUI.apply(this,u([t],n)),t);this._uiBoxList.push(a);var i=cc.js.getClassName(t);return console.log("UIManager.open ["+i+"]"),a.then(function(n){console.log("UIManager.open ["+i+"] succeed"),e._layerList[t.uiType].addChild(n.view),g.EventManager.instance.emit(y.DataEvent.PopUIOpen)}),a.catch(function(t){a.canceled?(console.log("UIManager.open ["+i+"] canceled"),a.result&&a.result.node.destroy()):console.error("UIManager.open ["+i+"] failed:",t);var n=e._uiBoxList.indexOf(a);-1!==n&&e._uiBoxList.splice(n,1)}),t.willShowLoading&&this._waitLoadingUI&&(this._waitLoadingUI.fadeIn?this._waitLoadingUI.fadeIn():this._waitLoadingUI.view.visible=!0,a.finally(function(){e._waitLoadingUI.fadeOut?e._waitLoadingUI.fadeOut():e._waitLoadingUI.view.visible=!1})),a}return null},e.prototype.hide=function(t){var e=this.getIndex(t);-1!==e&&this._uiBoxList[e].then(function(t){return t.view.visible=!1})},e.prototype.show=function(t){var e=this.getIndex(t);-1!==e&&this._uiBoxList[e].then(function(t){return t.view.visible=!0})},e.prototype.close=function(t){t&&(t instanceof _.BaseUI?t.constructor.uiType:t instanceof Function?t.uiType:t.tag.uiType)!==_.UIType.Scene&&(this._close(t),g.EventManager.instance.emit(y.DataEvent.PopUIClose))},e.prototype._close=function(t){t&&(t instanceof _.BaseUI||t instanceof Function?(console.log("UIManager.close ["+cc.js.getClassName(t)+"]"),this.destroyUI(t)):(console.log("UIManager.close ["+cc.js.getClassName(t.tag)+"]"),this.destroyUIBox(t)))},e.prototype.closeAll=function(t,e){var n=this;console.log("CloseAllUI ",t,e&&cc.js.getClassName(e)),this.list(t).filter(function(t){return t.tag!==e}).forEach(function(t){n._uiBoxList.splice(n._uiBoxList.indexOf(t),1),t.isDone?t.result&&t.result.node.destroy():t.cancel()})},e.prototype.isExist=function(t){return-1!==this.getIndex(t)},e.prototype.get=function(t,e){void 0===e&&(e=!0);var n=this.getIndex(t);return-1===n&&e&&console.warn("Find ui error: "+cc.js.getClassName(t)+" is not found!"),this._uiBoxList[n]},e.prototype.list=function(t){return this._uiBoxList.filter(function(e){return!t||-1!==t.indexOf(e.tag.uiType)})},e.prototype.getScene=function(){return Array.findLast(this._uiBoxList,function(t){return t.tag.uiType===_.UIType.Scene})},e.prototype.createUI=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return r(this,void 0,Promise,function(){var n,o,a,i,r,c,l,d,p,h;return s(this,function(s){switch(s.label){case 0:return n=t.getPkgName(),(o=t.getExtPkgNames()).push(n),[4,this.loadPkg(o)];case 1:if(s.sent(),t.uiBind(),a=t.getCompName(),i=fgui.UIPackage.createObject(n,a),!(r=i&&i.asCom))throw c="Create ui ["+n+"/"+a+"] failed!",console.error(c),c;return(l=new cc.Node(cc.js.getClassName(t))).setParent(r.node),(d=l.addComponent(t)).setView.apply(d,u([r],e)),this._weakMap&&this._weakMap.set(d,Date.now()),r.sortingOrder=t.sortingOrder,p=this.root.width,h=this.root.height,this.resize(r,p,h),this.reposition(r,p,h),[2,d]}})})},e.prototype.destroyUI=function(t){var e=this.getIndex(t);if(-1!==e){var n=this._uiBoxList.splice(e,1)[0];n.isDone?n.result&&n.result.node.destroy():n.cancel()}else console.error("Destroy ui error: "+cc.js.getClassName(t)+" is not found!")},e.prototype.destroyUIBox=function(t){var e=this._uiBoxList.lastIndexOf(t);-1!==e?(this._uiBoxList.splice(e,1),t.isDone?t.result&&t.result.node.destroy():t.cancel()):console.error("Destroy ui error: "+cc.js.getClassName(t.tag)+" is not found!")},e.prototype.getIndex=function(t){if(t instanceof Function){for(var e=this._uiBoxList.length-1;e>=0;--e)if(this._uiBoxList[e].tag===t)return e}else for(e=this._uiBoxList.length-1;e>=0;--e)if(this._uiBoxList[e].result===t)return e;return-1},e.prototype.clearPkgResByClass=function(t){if(t){var e={};e[t.getPkgName()]=!0,this.clearPkgRes(Object.keys(e))}},e.prototype.loadDefaultTexture=function(){cc.resources.load("ui/DefaultTexture",cc.Texture2D,function(t,e){t||(fgui.UIPackage.defaultTexture=e)})},e.prototype.loadPkg=function(t,e){return r(this,void 0,Promise,function(){var n,o;return s(this,function(a){switch(a.label){case 0:return console.log("Load package: ["+t.join(", ")+"]"),[4,this.loadPkgBin(t,null).catch(function(e){throw console.error("Load package binary error: ["+t.join(", ")+"]",e),e})];case 1:return n=a.sent(),o=t.length,[4,this.loadPkgRes(n,function(t,n){return e&&e(t+o,n+o)}).catch(function(e){throw console.error("Load package resource error: ["+t.join(", ")+"]",e),e})];case 2:return a.sent(),console.log("Load package: ["+t.join(", ")+"] succeed!"),[2]}})})},e.prototype.loadPkgBin=function(t,e){var n=this;return new Promise(function(o,a){var i=n.DIR_UI+"/",r=t.map(function(t){return i+t}),s=r.filter(function(t){return!cc.resources.get(t)}),c=function(){try{o(r.map(function(t){return fgui.UIPackage.addPackage(t)}))}catch(t){console.error(t),o([])}};s.length>0?cc.resources.load(s,cc.Asset,e,function(t){t?a(t):c()}):c()})},e.prototype.loadPkgRes=function(t,e){return new Promise(function(n,o){var a=[];t.forEach(function(t){var e=t._items,n=new Set;e.filter(function(t){return t.file}).forEach(function(t){return n.add(t.file)}),a.push.apply(a,u(n.values()))});var i=[],r=[];a.forEach(function(t){var e=cc.resources.get(t);e?i.push(e):r.push(t)}),r.length>0?cc.resources.load(r,cc.Asset,e,function(t,e){t?o(t):n(i.concat(e))}):n(i)})},e.prototype.isPkgLoaded=function(t){return!!cc.resources.get(this.DIR_UI+"/"+t)},e.prototype.clearPkgRes=function(t){var e={};this._uiBoxList.forEach(function(t){var n=t.tag;e[n.getPkgName()]=!0;var o=n.getExtPkgNames();o&&o.forEach(function(t){return e[t]=!0})}),t=t?t.filter(function(t){return!e[t]}):[],console.log("Clear package atlas: "+JSON.stringify(t));try{t.forEach(function(t){fgui.UIPackage.getByName(t)&&fgui.UIPackage.removePackage(t)})}catch(n){console.error(n)}},n=i([jsClass],e)}(h.BaseManager);n.UIManager=I,cc._RF.pop()},{"../../Core/Base/Data/DataEvent":"DataEvent","../../Core/Base/Data/DatazOrder":"DatazOrder","../Root/ManagerRoot":"ManagerRoot","../UI/BaseUI":"BaseUI","../Utils/AsyncBox":"AsyncBox","./BaseManager":"BaseManager","./CoroutineManager":"CoroutineManager","./EventManager":"EventManager"}],UserInfoModel:[function(t,e,n){"use strict";cc._RF.push(e,"f0ab7yC12RDYbzpxi2YhMki","UserInfoModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.UserInfoModel=n.UserInfoData=n.TeamWinPhoneFee2Enum=n.TeamWinPhoneFeeEnum=void 0;var s=t("../../Framework/Manager/EventManager"),c=t("../../Framework/Model/BaseModel"),l=t("../../Framework/Root/ModelRoot"),u=t("../Base/Data/DataBfConfig"),d=t("../Base/Data/DataConstant"),p=t("../Base/Data/DataEvent"),h=t("../Base/Utils/UtilTool"),_=t("../Base/Module/Platform/PlatformManager"),f=t("./UserInfoProxy");(function(t){t[t.NORMAL=0]="NORMAL",t[t.OFFICER=1]="OFFICER",t[t.INVITEE=2]="INVITEE"})(n.TeamWinPhoneFeeEnum||(n.TeamWinPhoneFeeEnum={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.OFFICER=1]="OFFICER",t[t.INVITEE_NEW=2]="INVITEE_NEW",t[t.INVITEE_OLD=3]="INVITEE_OLD"}(n.TeamWinPhoneFee2Enum||(n.TeamWinPhoneFee2Enum={}));var m=function(){function t(){}return i([jsClass("UserInfoData")],t)}();n.UserInfoData=m;var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._clientTimestamp=Date.parse((new Date).toString()),e._userInfo=new m,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return l.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userInfo",{get:function(){return this._userInfo},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){},e.prototype.setUserInfo=function(t){var e=h.UtilTool.setData(this._userInfo,t);e&&s.EventManager.instance.emit(p.DataEvent.UserInfoUpdate,e)},e.prototype.setAuthAwards=function(t){this._userInfo.authAwards=t},e.prototype.updateNewRegisterPlayer=function(t){this._userInfo.authAwards.isNewRegister=t},e.prototype.isNewRegisterPlayer=function(){var t;return(null===(t=this._userInfo.authAwards)||void 0===t?void 0:t.isNewRegister)||!1},e.prototype.getNewPlayerAwards=function(){return this._userInfo.authAwards.awards},e.prototype.setUserLocation=function(t){this._userInfo.userLaction=t},e.prototype.getUserLocation=function(){return this._userInfo.userLaction},e.prototype.setMeiTuanMgcID=function(t){this._userInfo.mgcID=t},e.prototype.getMeiTuanMgcID=function(){return this._userInfo.mgcID},e.prototype.setMeiTuanAccessToken=function(t){this._userInfo.accessToken=t},e.prototype.getMeiTuanAccessToken=function(){return this._userInfo.accessToken},e.prototype.isGoldInlineTeam=function(){return this._userInfo.isGoldInlineTeam},e.prototype.getMergeNumID=function(){return this._userInfo.mergeNumID},e.prototype.setServerTimestamp=function(t){this._userInfo.serverTimestamp=t||Date.parse((new Date).toString()),this._clientTimestamp=Date.parse((new Date).toString())},e.prototype.getServerTimestamp=function(){return Date.parse((new Date).toString())-this._clientTimestamp+this._userInfo.serverTimestamp},e.prototype.setPartnerLocation=function(t){this._userInfo.partnerLocation=t},e.prototype.getPartnerLocation=function(){return this._userInfo.partnerLocation},e.prototype.isOpenFriendTeam=function(){return this._userInfo.isOpenFriendTeam},e.prototype.clearUserLocation=function(){this._userInfo.userLaction=null},e.prototype.clearPartnerLocation=function(){this._userInfo.partnerLocation=null},e.prototype.setCharm=function(t){this._userInfo.charm=t},e.prototype.getGameCount=function(){return this._userInfo.win+this._userInfo.lose+this._userInfo.draw+this._userInfo.escape},e.prototype.bindUserInfo=function(t,e){f.UserInfoProxy.instance.reqBindWechatInfo(t,e)},e.prototype.setAvatar=function(t){this.userInfo.avatar=t},e.prototype.getHead=function(){var t=this._userInfo.headurl;return h.UtilTool.checkHeadurl(t)?t:d.DataConstant.getDefaultAvatar(this._userInfo.avatar)},e.prototype.isAuthorized=function(){return!!u.DataBfConfig.isWebPlatform()||!!_.PlatformManager.instance.isDevelopPlatForm()||!!_.PlatformManager.instance.isMeiTuanPlatForm()||""!==this._userInfo.headurl},e.prototype.setProps=function(t){this._userInfo.countprops=t},e.prototype.getProps=function(){return this._userInfo.countprops||[]},e.prototype.addProp=function(t,e){var n,o,a=this.getProps(),i=!1;if(0!==a.length)try{for(var s=r(a),c=s.next();!c.done;c=s.next()){var l=c.value;if(+l.propid==+t){l.count+=e,i=!0;break}}}catch(u){n={error:u}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}i||a.push({propid:+t,count:e}),this.setProps(a)},e.prototype.updateCountProp=function(t,e){var n,o,a=this.getProps();if(0!==a.length)try{for(var i=r(a),s=i.next();!s.done;s=i.next()){var c=s.value;if(Number(c.propid)===t)return void(c.count=e)}}catch(l){n={error:l}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}},e.prototype.updateTimeProp=function(t,e){var n,o,a=this.getTimeProps(),i=!1;if(0!==a.length)try{for(var s=r(a),c=s.next();!c.done;c=s.next()){var l=c.value;if(Number(l.propid)===t){l.etime=e,i=!0;break}}}catch(u){n={error:u}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}i||a.push({propid:t,etime:e}),this.setTimeProps(a)},e.prototype.getPropCount=function(t){var e,n,o=this.getProps();if(o)try{for(var a=r(o),i=a.next();!i.done;i=a.next()){var s=i.value;if(Number(s.propid)===t)return s.count}}catch(c){e={error:c}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return 0},e.prototype.setTimeProps=function(t){this._userInfo.timeprops=t},e.prototype.getTimeProps=function(){return this._userInfo.timeprops||[]},e.prototype.getPropExpireTime=function(t){var e,n,o=this.getTimeProps();if(0!==o.length)try{for(var a=r(o),i=a.next();!i.done;i=a.next()){var s=i.value;if(Number(s.propid)===t)return s.etime}}catch(c){e={error:c}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}},e.prototype.isTimePropActive=function(t){var e,n,o=this.getTimeProps();if(0!==o.length)try{for(var a=r(o),i=a.next();!i.done;i=a.next()){var s=i.value;if(Number(s.propid)===t)return Math.floor(Date.now()/1e3)<s.etime}}catch(c){e={error:c}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return!1},e.prototype.updateProps=function(t){for(var e=0;e<t.length;++e)club.client.lobby.PropertyType.COUNTPROP===t[e].type?this.updateCountProp(t[e].propid,t[e].count):club.client.lobby.PropertyType.TIMEPROP===t[e].type&&this.updateTimeProp(t[e].propid,t[e].etime)},i([jsClass],e)}(c.BaseModel);n.UserInfoModel=g,cc.systemEvent.once("GameRoot.inited",function(){l.ModelRoot.instance.add(g)}),cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/Model/BaseModel":"BaseModel","../../Framework/Root/ModelRoot":"ModelRoot","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataConstant":"DataConstant","../Base/Data/DataEvent":"DataEvent","../Base/Module/Platform/PlatformManager":"PlatformManager","../Base/Utils/UtilTool":"UtilTool","./UserInfoProxy":"UserInfoProxy"}],UserInfoProxy:[function(t,e,n){"use strict";cc._RF.push(e,"0826101Ml1KFZY2+HPpKK5n","UserInfoProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.UserInfoProxy=n.BindTypeEnum=void 0;var r=t("../../Framework/Proxy/BaseProxy"),s=t("../../Framework/Root/ProxyRoot"),c=t("../Base/Data/DataBfConfig"),l=t("../Base/Data/DataScript"),u=t("../Base/Module/Network/protocol/AwardProtocol"),d=t("../Base/Module/Network/SocketUtils");(function(t){t[t.WECHAT_BIND=1]="WECHAT_BIND",t[t.CHANGE_SEX=2]="CHANGE_SEX"})(n.BindTypeEnum||(n.BindTypeEnum={}));var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return s.ProxyRoot.instance.get(n)},enumerable:!1,configurable:!0}),e.prototype.reqBindWechatInfo=function(t,e){var n=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.bindWechatInfo.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes(JSON.stringify({type:t.type,username:t.username,head:t.head,sex:t.sex}))});d.SocketUtils.instance.request(n,function(t){if(0===t.flag){var n=JSON.parse(bf33.Utils.bytesToString(t.msg));console.log(">----\x3eresqBindWechatInfo.success",n),e&&e(!0,n)}else console.error(">----\x3eresqBindWechatInfo.error:",t.flag),e&&e(!1)})},n=i([jsClass],e)}(r.BaseProxy);n.UserInfoProxy=p,cc.systemEvent.once("GameRoot.inited",function(){s.ProxyRoot.instance.add(p)}),cc._RF.pop()},{"../../Framework/Proxy/BaseProxy":"BaseProxy","../../Framework/Root/ProxyRoot":"ProxyRoot","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataScript":"DataScript","../Base/Module/Network/SocketUtils":"SocketUtils","../Base/Module/Network/protocol/AwardProtocol":"AwardProtocol"}],UserInfoUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"ea18eUhI/BOy7Et3fhd7f8F","UserInfoUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./UserInfoUI_GuanDanGameUserInfoWindow"),a=t("./UserInfoUI_GuanDanGameUserInfoMainPanel"),i=t("./UserInfoUI_MeiLiComp"),r=t("./UserInfoUI_HeadGCom"),s=t("./UserInfoUI_MainPanel"),c=t("./UserInfoUI_Avatar"),l=t("./UserInfoUI_Window"),u=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default),fgui.UIObjectFactory.setExtension(l.default.URL,l.default)},t}();n.default=u,cc._RF.pop()},{"./UserInfoUI_Avatar":"UserInfoUI_Avatar","./UserInfoUI_GuanDanGameUserInfoMainPanel":"UserInfoUI_GuanDanGameUserInfoMainPanel","./UserInfoUI_GuanDanGameUserInfoWindow":"UserInfoUI_GuanDanGameUserInfoWindow","./UserInfoUI_HeadGCom":"UserInfoUI_HeadGCom","./UserInfoUI_MainPanel":"UserInfoUI_MainPanel","./UserInfoUI_MeiLiComp":"UserInfoUI_MeiLiComp","./UserInfoUI_Window":"UserInfoUI_Window"}],UserInfoUI_Avatar:[function(t,e,n){"use strict";cc._RF.push(e,"bed6fCxtE5BJ4G2c+DeUU2N","UserInfoUI_Avatar");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("UserInfoUI","Avatar")},e.prototype.onConstruct=function(){this.m_avatarPic=this.getChildAt(0),this.m_PictureFrame=this.getChildAt(1)},e.URL="ui://jfoe1c89owkaa69q",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UserInfoUI_GuanDanGameUserInfoMainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"5e486H2ujhIG7Z5lsfB/8MI","UserInfoUI_GuanDanGameUserInfoMainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("UserInfoUI","GuanDanGameUserInfoMainPanel")},e.prototype.onConstruct=function(){this.m_btnExit=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_seat0=this.getChildAt(2),this.m_seat1=this.getChildAt(3),this.m_seat2=this.getChildAt(4),this.m_seat3=this.getChildAt(5)},e.URL="ui://jfoe1c89cb3vp",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UserInfoUI_GuanDanGameUserInfoWindow:[function(t,e,n){"use strict";cc._RF.push(e,"0cc4fPxm7FBCZiq8HoxJ8oc","UserInfoUI_GuanDanGameUserInfoWindow");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("UserInfoUI","GuanDanGameUserInfoWindow")},e.prototype.onConstruct=function(){this.m_tab=this.getControllerAt(0),this.m_head=this.getChildAt(2),this.m_name=this.getChildAt(3),this.m_account=this.getChildAt(4),this.m_gold=this.getChildAt(7),this.m_exp=this.getChildAt(10),this.m_gameCount=this.getChildAt(12),this.m_gameWinRate=this.getChildAt(14),this.m_escapeRate=this.getChildAt(16),this.m_list=this.getChildAt(18)},e.URL="ui://jfoe1c89cb3vo",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UserInfoUI_HeadGCom:[function(t,e,n){"use strict";cc._RF.push(e,"a4a8e6NWWpPKLL9BLG/hXRu","UserInfoUI_HeadGCom");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("UserInfoUI","HeadGCom")},e.prototype.onConstruct=function(){this.m_avatarPic=this.getChildAt(0),this.m_pictureFrame=this.getChildAt(1)},e.URL="ui://jfoe1c89cutbz",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UserInfoUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"21225gzyHhDubNMZE+C4yfs","UserInfoUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("UserInfoUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://jfoe1c89gwg53",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UserInfoUI_MeiLiComp:[function(t,e,n){"use strict";cc._RF.push(e,"2ff2cElfC9MuLMzqPGRu0Iy","UserInfoUI_MeiLiComp");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("UserInfoUI","MeiLiComp")},e.prototype.onConstruct=function(){this.m_reddi=this.getChildAt(2),this.m_xinCount=this.getChildAt(3),this.m_toolCount=this.getChildAt(4),this.m_icon=this.getChildAt(5)},e.URL="ui://jfoe1c89cb3vx",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UserInfoUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"e510beye4BMzbEuJeNLLgL1","UserInfoUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("UserInfoUI","Window")},e.prototype.onConstruct=function(){this.m_tab=this.getControllerAt(0),this.m_cShowSyncHead=this.getControllerAt(1),this.m_bg=this.getChildAt(0),this.m_btnExit=this.getChildAt(1),this.m_btnSyncHead=this.getChildAt(2),this.m_btnCopy=this.getChildAt(3),this.m_gold=this.getChildAt(5),this.m_diamond=this.getChildAt(8),this.m_gameCount=this.getChildAt(12),this.m_gameWinRate=this.getChildAt(15),this.m_escapeRate=this.getChildAt(18),this.m_charmValue=this.getChildAt(21),this.m_name=this.getChildAt(24),this.m_account=this.getChildAt(26),this.m_Avatar=this.getChildAt(27)},e.URL="ui://jfoe1c89oy7w0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UserInfoUI:[function(t,e,n){"use strict";cc._RF.push(e,"c4d22okImZMzI5fonPCedDG","UserInfoUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.UserInfoUI=void 0;var r,s=t("../../Framework/Manager/EventManager"),c=t("../../Framework/UI/FadeUI"),l=t("../Base/Data/DataEvent"),u=t("./UserInfoUI/UserInfoUIBinder"),d=t("./UserInfoModel"),p=t("../Hall/HallModel"),h=t("../Base/View/UIHelp"),_=t("../Base/Data/DataBfConfig"),f=t("../Base/Module/Platform/PlatformManager"),m=t("../Base/Utils/UtilString");(function(t){t[t.SHOW=0]="SHOW",t[t.NOT_SHOW=1]="NOT_SHOW"})(r||(r={}));var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){u.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return d.UserInfoModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initUI()},e.prototype.initListener=function(){s.EventManager.instance.on(l.DataEvent.UserInfoUpdate,this,this.onUserInfoUpdate),this.view.m_Window.m_btnExit.onClick(this.onExitClick,this),this.view.m_Window.m_btnSyncHead.onClick(this.onBtnSyncHead,this),this.view.m_Window.m_btnCopy.onClick(this.onBtnCopy,this)},e.prototype.initUI=function(){this.onShowSyncHeadBtn(),this.onUserInfoUpdate(),this.onUserCurrencyUpdate(),this.onUserGameDataUpdate()},e.prototype.onUserInfoUpdate=function(){var t=p.default.instance.getUserHeadUrl();this.view.m_Window.m_Avatar.m_avatarPic.url=t,this.view.m_Window.m_name.text=this.model.userInfo.nickname,this.view.m_Window.m_account.text=""+this.model.userInfo.numID},e.prototype.onBtnSyncHead=function(){h.UIHelp.instance.showLoading("\u66f4\u65b0\u4e2d"),h.UIHelp.instance.syncUserInfo(function(t,e){h.UIHelp.instance.hideLoading();var n=t?"\u4e2a\u4eba\u4fe1\u606f\u5df2\u66f4\u65b0\u81f3\u6700\u65b0\u54e6~":"\u7f51\u7edc\u5f00\u4e86\u5c0f\u5dee,\u8bf7\u91cd\u65b0\u6388\u6743!";e&&(n=e),s.EventManager.instance.emit(l.DataEvent.ToastData,n)})},e.prototype.onBtnCopy=function(){var t=this.view.m_Window.m_account.text;f.PlatformManager.instance.platform.setClipboardData(t,function(t){t||s.EventManager.instance.emit(l.DataEvent.ToastData,"\u8d26\u53f7\u590d\u5236\u5931\u8d25\uff01")})},e.prototype.onShowSyncHeadBtn=function(){_.DataBfConfig.isWebPlatform()&&(this.view.m_Window.m_cShowSyncHead.selectedIndex=r.NOT_SHOW)},e.prototype.onUserCurrencyUpdate=function(){this.view.m_Window.m_gold.text=m.UtilString.getCurrencyShortString(this.model.userInfo.gold),this.view.m_Window.m_diamond.text=m.UtilString.getCurrencyShortString(this.model.userInfo.diamond)},e.prototype.onUserGameDataUpdate=function(){var t=this.model.userInfo,e=this.model.getGameCount(),n=e?(Math.floor(t.win/e*1e4)/100).toFixed(1)+"%":"0%",o=e?(Math.floor(t.escape/e*1e4)/100).toFixed(1)+"%":"0%";this.view.m_Window.m_gameCount.text=""+e,this.view.m_Window.m_gameWinRate.text=""+n,this.view.m_Window.m_escapeRate.text=""+o,this.view.m_Window.m_charmValue.text=""+this.model.userInfo.charm},i([jsClass],e)}(c.FadeUI);n.UserInfoUI=g,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/UI/FadeUI":"FadeUI","../Base/Data/DataBfConfig":"DataBfConfig","../Base/Data/DataEvent":"DataEvent","../Base/Module/Platform/PlatformManager":"PlatformManager","../Base/Utils/UtilString":"UtilString","../Base/View/UIHelp":"UIHelp","../Hall/HallModel":"HallModel","./UserInfoModel":"UserInfoModel","./UserInfoUI/UserInfoUIBinder":"UserInfoUIBinder"}],UtilCC:[function(t,e,n){"use strict";cc._RF.push(e,"c2e0doKEkNMk5M0moKwcc1k","UtilCC");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.UtilCC=void 0;var i=function(){function t(){}return t.createSkeleton=function(t,e,n,o){var a=new cc.Node,i=a.addComponent(sp.Skeleton);return i.setAnimationCacheMode(sp.Skeleton.AnimationCacheMode.PRIVATE_CACHE),cc.loader.loadRes("effect/"+t,sp.SkeletonData,function(r,s){r&&console.error("Skeleton ["+t+"] load failed: ",r),i.skeletonData=s,o&&(i.animation=o),n?cc.isValid(n)?(n.addChild(a),e&&e(i),i.premultipliedAlpha=!1):a.destroy():e&&e(i)}),i},t.showOnceSkeleton=function(t,e,n){cc.isValid(t)&&(t.node.active=!0,t.setCompleteListener(function(){t.node.active=!1,n&&n()}),t.setAnimation(0,e,!1))},t.showSkeleton=function(t,e,n,o,a){cc.isValid(t)?(t.node.active=!0,t.setAnimation(0,e,n)):a&&a()},t.preloadPrefab=function(t){cc.resources.get(t,cc.Prefab)?console.warn(">----\x3ehad.preloadPrefab~"):cc.resources.preload(t,cc.Prefab)},t.instantiatePrefab=function(t,e,n){this.loadPrefab(t,function(t){if(n)if(cc.isValid(n)){var o=cc.instantiate(t);o.setParent(n),e&&e(o,t)}else console.error("Pivot is destroyed!");else e&&e(cc.instantiate(t),t)})},t.loadPrefab=function(t,e,n){var o=cc.resources.get(t,cc.Prefab);o?e&&e(o):cc.resources.load(t,cc.Prefab,function(o,a){o?(console.error("Skeleton prefab ["+t+"] load failed: ",o),n&&n(o)):e&&e(a)})},t.releaseResource=function(t){cc.resources.release(t)},t.releaseHttpAsset=function(t){var e,n;try{for(var o=a(t),i=o.next();!i.done;i=o.next()){var r=i.value,s=cc.assetManager.assets.get(r);s&&cc.assetManager.releaseAsset(s)}}catch(c){e={error:c}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}},t.releasePrefabAsset=function(t){var e=cc.resources.get(t,cc.Prefab);e&&cc.assetManager.releaseAsset(e)},o([jsClass],t)}();n.UtilCC=i,cc._RF.pop()},{}],UtilClub:[function(t,e,n){"use strict";cc._RF.push(e,"b5ea21Z8oBFnLJhqjTeKHIs","UtilClub");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.UtilClub=void 0;var a=t("../Module/ClubError/ErrorCodeDbpConfig"),i=t("../Module/ClubError/ErrorCodeGameConfig"),r=t("../Module/ClubError/ErrorCodeLobbyConfig"),s=function(){function t(){}return t.dealClubErrorCode=function(t){var e={mode:"",type:"",code:0},n=t>>16,o=t<<16>>28;return e.mode=n.toString(16),e.code=t<<20>>20,e.type=o.toString(16),e},t.getErrorText=function(t){return"4d"===t.mode?"1"===t.type?i.GameErrorInfo[t.code]||"":a.DBPErrorInfo[t.code]||"":"4c"===t.mode?"1"===t.type?r.LobbyErrorInfo[t.code]||"":a.DBPErrorInfo[t.code]||"":""},o([jsClass],t)}();n.UtilClub=s,cc._RF.pop()},{"../Module/ClubError/ErrorCodeDbpConfig":"ErrorCodeDbpConfig","../Module/ClubError/ErrorCodeGameConfig":"ErrorCodeGameConfig","../Module/ClubError/ErrorCodeLobbyConfig":"ErrorCodeLobbyConfig"}],UtilFgui:[function(t,e,n){"use strict";cc._RF.push(e,"665b99APxdGR6ZH+uCgtAn2","UtilFgui");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.UtilFgui=void 0;var a=function(){function t(){}return t.calculateLocalPosition=function(t,e,n,o){var a=this.localToGlobal(t,n,o);return e&&this.globalToLocal(e,a.x,a.y,a),a},t.localToGlobal=function(t,e,n,o){if(t){if(null==e&&null==n)return t.localToGlobal(e,n,o);var a=null==e?0:e+(t.pivotAsAnchor?t.width*-t.pivotX:0),i=null==n?0:n+(t.pivotAsAnchor?t.height*-t.pivotY:0);return t.localToGlobal(a,i,o)}return console.error("obj is null!"),o?(o.x=e||0,o.y=n||0):o=cc.v2(e||0,n||0),o},t.globalToLocal=function(t,e,n,o){return t?(o=t.globalToLocal(e,n,o),t.pivotAsAnchor&&(o.x+=t.width*t.pivotX),t.pivotAsAnchor&&(o.y+=t.height*t.pivotY),o):(console.error("obj is null!"),o?(o.x=e||0,o.y=n||0):o=cc.v2(e||0,n||0),o)},o([jsClass],t)}();n.UtilFgui=a,cc._RF.pop()},{}],UtilString:[function(t,e,n){"use strict";cc._RF.push(e,"806b7z8cD9BNpjR4k1E6opP","UtilString");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.UtilString=void 0;var i=t("../../../Framework/Manager/CoroutineManager"),r=t("../../../Framework/Utils/StringBuilder"),s=function(){function t(){}return t.adaptHttpUrlToHttps=function(t){return-1!==t.indexOf("http")&&-1===t.indexOf("https")?t.replace("http","https"):t},t.convertToStrCardNum=function(t){var e,n=((e={})[11]="J",e[12]="Q",e[13]="K",e[14]="A",e);return t<=10?t.toString():t<=14?n[t]:""},t.numToChinese=function(t){for(var e,n=["\u96f6","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d"],o=["","\u5341","\u767e","\u5343","\u4e07"],a="",i=0;t>0;)e=t%10,(a||0!==e)&&(a=n[e]+a),t=(t-e)/10,(1!=++i||t>2)&&(a=o[i]+a);return a},t.getGroundCoinString=function(t){var e=Math.abs(t);return e<1e4?t+"":e<1e8?Math.round(t/1e3)/10+"\u4e07":Math.round(t/1e3/1e4)/10+"\u4ebf"},t.getCurrencyShortString=function(t){var e=[10,100,1e3,1e4,1e5,1e6,1e7,1e8],n=[2,1,0,2,2,1,0,0],o=Math.abs(t);if(o<1e5)return t+"";for(var a=0;a<e.length;a++){if(a===e.length-1)return this.roundToUnitString(o,0,[[1e5,1e4,"\u4e07"],[1e8,1e8,"\u4ebf"]]);if(o>=1e4*e[a]&&o<1e4*e[a+1]){var i=n[a];return this.roundToUnitString(o,i,[[1e5,1e4,"\u4e07"],[1e8,1e8,"\u4ebf"]])}}},t.roundToUnitString=function(t,e,n){n||(n=[[1e4,1e4,"\u4e07"],[1e8,1e8,"\u4ebf"]]);for(var o=n.length-1;o>=0;--o){var i=a(n[o],3),r=i[0],s=i[1];if(i[2],t>=r){for(var c=s,l=0;l<e;++l)c/=10;t=Math.round(t/c)*c;break}}for(o=n.length-1;o>=0;--o){var u=a(n[o],3),d=(r=u[0],s=u[1],u[2]);if(t>=r)return t/s+d}return t+""},t.getNumFormatString=function(t){var e=Math.abs(t);return e<1e5?t+"":e>=1e5&&e<1e8?(e/1e4).toFixed(2).slice(0,-1)+"\u4e07":e>=1e8&&e<1e13?(e/1e8).toFixed(2).slice(0,-1)+"\u4ebf":(e/1e12).toFixed(0)+"\u4e07\u4ebf"},t.getCharWidth=function(t){var e=this;if(!this.charWidthCache.hasOwnProperty(t)){this.tf||(this.tf=new fgui.GTextField,this.tf.fontSize=24,i.CoroutineManager.instance.once(1,function(){e.tf.dispose(),e.tf=null})),this.tf.text=t;var n=this.tf.width;this.charWidthCache[t]=n/12}return this.charWidthCache[t]},t.getStringWidth=function(t){for(var e=0,n=0,o=t.length;n<o;n++)e+=this.getCharWidth(t.charAt(n));return e},t.shortString=function(t,e,n){if(t){if(this.getStringWidth(t)<=e)return t;null==n&&(n="...");for(var o=e-this.getStringWidth(n),a=new r.StringBuilder,i=0,s=0,c=t.length;s<c;++s){var l=t.charAt(s);if(a.append(l),(i+=this.getStringWidth(l))>e){for(;i>o;){var u=a.pop();i-=this.getStringWidth(u)}a.append(n);break}}return a.toString()}return""},t.charWidthCache={},o([jsClass],t)}();n.UtilString=s,cc._RF.pop()},{"../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../Framework/Utils/StringBuilder":"StringBuilder"}],UtilTime:[function(t,e,n){"use strict";cc._RF.push(e,"6cdadVtA11CVbxEHiE84Fpl","UtilTime");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.UtilTime=n.TIME_ZONE_OFFSET=void 0,n.TIME_ZONE_OFFSET=28800;var a=function(){function t(){}return t.getDayCount=function(){var t=Date.parse((new Date).toString());return Math.floor(t/1e3/86400)},t.getDayCountWith4Clock=function(){var t=Date.parse((new Date).toString());return Math.floor((t/1e3-14400)/86400)},t.getServerDayCountWith4Clock=function(t){return Math.floor((t/1e3-14400)/86400)},t.formatCountDownTime=function(t){var e,n,o=Math.floor(t/3600),a=t-3600*o,i=(o>9?o:"0"+o)+"";return i+=":",i+=(e=Math.floor(a/60))>9?e:"0"+e,(i+=":")+((n=t-3600*o-60*e)>9?n:"0"+n)},t.getNextDayClockTime=function(){var t=new Date,e=86400-(3600*t.getHours()+60*t.getMinutes()+t.getSeconds());return t.getTime()+1e3*e},t.calDiffDays=function(t,e){var n=new Date(t).valueOf(),o=new Date(e).valueOf();return Math.floor((n-o)/864e5)},t.getCurrDate=function(t){void 0===t&&(t="");var e=new Date,n=e.getFullYear(),o=e.getMonth()+1,a=e.getDate(),i=""+n+t;return i+=o<10?"0"+o:""+o,(i+=""+t)+(a<10?"0"+a:""+a)},t.getCurrTime=function(t){void 0===t&&(t="hh:mm:ss");var e=new Date,n=e.getHours(),o=e.getMinutes(),a=e.getSeconds();return t.indexOf("hh")>=0&&(t=t.replace("hh",""+n)),t.indexOf("mm")>=0&&(t=o<10?t.replace("mm","0"+o):t.replace("mm",""+o)),t.indexOf("ss")>=0&&(t=a<10?t.replace("ss","0"+a):t.replace("ss",""+a)),t},t.isTodayDate=function(t){if(t){var e=new Date(t),n=new Date;return e.getFullYear()===n.getFullYear()&&e.getMonth()===n.getMonth()&&e.getDay()===n.getDay()}return!1},t.isTodayOverdue=function(t){var e=new Date(t),n=86400-(3600*e.getHours()+60*e.getMinutes()+e.getSeconds());return e.getTime()+1e3*n<=Date.now()},t.dateStringToTimestamp=function(t){return this.dateStringToDate(t).getTime()},t.dateStringToDate=function(t){return new Date(t.replace(/-/g,"/"))},t.formatDate=function(t,e){if(t){switch(e||(e="yyyy-MM-dd"),typeof t){case"string":t=new Date(t.replace(/-/,"/"));break;case"number":t*=1e3,t=new Date(t)}if(t instanceof Date){var n={yyyy:t.getFullYear(),M:t.getMonth()+1,d:t.getDate(),H:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),MM:(""+(t.getMonth()+101)).substr(1),dd:(""+(t.getDate()+100)).substr(1),HH:(""+(t.getHours()+100)).substr(1),mm:(""+(t.getMinutes()+100)).substr(1),ss:(""+(t.getSeconds()+100)).substr(1)};return e.replace(/(yyyy|MM?|dd?|HH?|mm?|ss?)/g,function(){return n[arguments[0]]})}}},o([jsClass],t)}();n.UtilTime=a,cc._RF.pop()},{}],UtilTool:[function(t,e,n){"use strict";cc._RF.push(e,"851e864KgFKx4MbR99WzwLw","UtilTool");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,i=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.UtilTool=void 0;var r=t("../Module/Platform/PlatformManager"),s=t("../Data/DataConstant"),c=t("../../../Framework/Utils/Base64"),l=function(){function t(){}return t.setData=function(t,e){if(t&&e){var n={};for(var o in e)if(e.hasOwnProperty(o)){var a=e[o],i=t[o];i!==a&&(n[o]=i,t[o]=a)}return Object.keys(n).length>0?n:null}return null},t.getLuaIntValue=function(t,e,n){var o=n||0,a=t.split(";");for(var i in a){var r=a[i].split("=");if(r.length>=2&&r[0]==e)return Number(r[1])}return o},t.getLuaStrValue=function(t,e){var n="",o=t.split(";");for(var a in o){var i=o[a].split("=");if(i.length>=2&&i[0]==e)return(n=i[1]).length>=2&&"'"==n[0]&&"'"==n[n.length-1]&&(n=n.substring(0,n.length-1)),n}return n},t.easyUTF8=function(t){var e="";if(r.PlatformManager.instance.isMeiTuanPlatForm())e=bf33.Utils.bytesToString(t);else{var n=new Uint8Array(t);e=new TextDecoder("gbk").decode(n)}return e},t.removeEmoji=function(t){return t&&""!==t?t.replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g,""):""},t.checkHeadurl=function(t){return void 0!==t&&""!==t&&-1!==t.indexOf("http")&&!t.startsWith("http://thirdqq.qlogo.cn/")&&!t.startsWith("https://q.qlogo.cn/")&&-1===t.indexOf("mil.cn")},t.getHead=function(t,e){return this.checkHeadurl(t)?t:s.DataConstant.getDefaultAvatar(e)},t.dumpCachedTextureInfo=function(t){var e,n,o,i;t|=0;var r=cc.loader._cache,s=0,c=[],l=[];for(var u in r){var d=cc.loader.getRes(u),p=0,h="";d instanceof cc.Texture2D?(h=(d=d).nativeUrl,d.width&&d.height&&d._format&&(s+=p=d.width*d.height*d._format/4,c.push({url:h,size:p}),this._lastCachedTextures.includes(h)||(this._lastCachedTextures.push(h),l.push({url:h,size:p})))):d instanceof cc.SpriteFrame&&(h=(d=d)._texture.nativeUrl,d._originalSize&&d._texture&&(s+=p=d._originalSize.width*d._originalSize.height*d._texture._format/4,c.push({url:h,size:p}),this._lastCachedTextures.includes(h)||(this._lastCachedTextures.push(h),l.push({url:h,size:p}))))}if(c.length>0&&c.length>=t){c.sort(function(t,e){return e.size-t.size}),console.error(">----\x3e\u603b\u7eb9\u7406\u5185\u5b58\u5217\u8868\uff1a");try{for(var _=a(c),f=_.next();!f.done;f=_.next())(y=f.value).url.indexOf("http")>=0?console.error("\n\u5185\u5b58:"+(y.size/1048576).toFixed(3)+"M,\u8def\u5f84:"+y.url):console.error("\n\u5185\u5b58:"+(y.size/1048576).toFixed(3)+"M,\u8def\u5f84:http://localhost:7456/"+y.url)}catch(I){e={error:I}}finally{try{f&&!f.done&&(n=_.return)&&n.call(_)}finally{if(e)throw e.error}}l.sort(function(t,e){return e.size-t.size}),console.warn(">----\x3e\u65b0\u589e\u7eb9\u7406\u5185\u5b58\u5217\u8868\uff1a");try{for(var m=a(l),g=m.next();!g.done;g=m.next()){var y;(y=g.value).url.indexOf("http")>=0?console.warn("\n\u5185\u5b58:"+(y.size/1048576).toFixed(3)+"M,\u8def\u5f84:"+y.url):console.warn("\n\u5185\u5b58:"+(y.size/1048576).toFixed(3)+"M,\u8def\u5f84:http://localhost:7456/"+y.url)}}catch(C){o={error:C}}finally{try{g&&!g.done&&(i=m.return)&&i.call(m)}finally{if(o)throw o.error}}}console.error("\u7eb9\u7406\u603b\u5185\u5b58:"+(s/1048576).toFixed(3)+" M")},t.showMemoryStatus=function(){var t=this;cc.profiler.showStats();var e=null;(function(){var n=new cc.Node;n.x=.65*cc.winSize.width,n.y=.96*cc.winSize.height,n.anchorX=0,(e=n.addComponent(cc.Label)).fontSize=20;var o=n.addComponent(cc.Button);o.node.on(cc.Node.EventType.TOUCH_END,t.dumpCachedTextureInfo,t),cc.director.getScene().addChild(n),(n=new cc.Node).x=.55*cc.winSize.width,n.y=.96*cc.winSize.height,n.anchorX=0;var a=n.addComponent(cc.Label);a.fontSize=20,a.string="\u6e05\u7a7a\u672c\u5730\u6570\u636e",(o=n.addComponent(cc.Button)).node.on(cc.Node.EventType.TOUCH_END,function(){return localStorage.clear()}),cc.director.getScene().addChild(n)})(),cc.director.on(cc.Director.EVENT_BEFORE_DRAW,function(){var t=0,n=cc.loader._cache;for(var o in n){var a=cc.loader.getRes(o);a instanceof cc.Texture2D?(a=a).width&&a.height&&a._format&&(t+=a.width*a.height*a._format/4):a instanceof cc.SpriteFrame&&(a=a)._originalSize&&a._texture&&(t+=a._originalSize.width*a._originalSize.height*a._texture._format/4)}cc.isValid(e)&&(e.string="Memory\uff1a"+(t/1048576).toFixed(3)+" M")})},t.toLuaMsg=function(t){var e=this.toLuaStr(t,";","'");return"{"===e.charAt(0)&&"}"===e.charAt(e.length-1)&&(e=e.substring(1,e.length-1)),e},t.toLuaStr=function(t,e,n){var o,r,s,c,l=this;if(void 0===e&&(e=","),void 0===n&&(n='"'),null==t)return"nil";switch(typeof t){case"function":return"nil";case"symbol":case"string":return""+n+t+n;case"boolean":case"number":case"bigint":return""+t;case"object":if(t instanceof Array){var u=[];return t.forEach(function(t,e){u.push("["+e+"]="+l.toLuaStr(t))}),"{"+u.join(e)+"}"}if(t instanceof Map){var d=[];try{for(var p=a(t),h=p.next();!h.done;h=p.next()){var _=i(h.value,2),f=_[0],m=_[1];d.push(f+"="+this.toLuaStr(m))}}catch(C){o={error:C}}finally{try{h&&!h.done&&(r=p.return)&&r.call(p)}finally{if(o)throw o.error}}return"{"+d.join(e)+"}"}if(t instanceof Set){d=[];try{for(var g=a(t),y=g.next();!y.done;y=g.next()){var I=y.value;d.push(""+this.toLuaStr(I))}}catch(M){s={error:M}}finally{try{y&&!y.done&&(c=g.return)&&c.call(g)}finally{if(s)throw s.error}}return"{"+d.join(e)+"}"}if(t instanceof Object){for(var f in d=[],t)t.hasOwnProperty(f)&&d.push(f+"="+this.toLuaStr(t[f]));return"{"+d.join(e)+"}"}}},t.parseLuaMsg=function(t){return this.parseLuaStr("{"+(t||"")+"}")},t.parseLuaStr=function(t){var e=this;if(t=t.trim()){if(t.startsWith("{")){var n=[],o=[],a=null,i=0,r=0;for(u=(t=t.substring(1,t.length-1)).length;r<u;++r){var s=t.charAt(r);o.push(s),"\\"===s?o.push(t.charAt(++r)):this.isQuoteMark(s)?a?a===s&&(a=null):a=s:a||("{"===s?i++:"}"===s?i--:this.isSeparator(s)&&0===i&&(o.pop(),n.push(o.join("")),o.length=0))}o.length&&(a&&(o.push(a),a=null),n.push(o.join("")),o.length=0);var c={},l=0;return n.forEach(function(t){if(t){var n=t.indexOf("=");if(-1===n)c[l++]=e.parseLuaStr(t);else{var o=t.substring(0,n),a=o.length;a>2&&"["===o.charAt(0)&&"]"===o.charAt(a-1)?o=o.substring(1,a-1):a>4&&"["===o.charAt(0)&&e.isQuoteMark(o.charAt(1))&&e.isQuoteMark(o.charAt(a-2))&&"]"===o.charAt(a-1)&&(o=o.substring(2,a-2));var i=t.substring(n+1);c[o]=e.parseLuaStr(i)}}}),c}var u=t.length;if(this.isQuoteMark(t.charAt(0))&&this.isQuoteMark(t.charAt(u-1)))return t.substring(1,u-1);if("nil"===t)return null;try{return JSON.parse(t)}catch(d){console.error("Parse luaMsg error:",d)}}},t.isSeparator=function(t){return","===t||";"===t},t.isQuoteMark=function(t){return'"'===t||"'"===t},t.num2ChineseNum=function(t){var e=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341"];return t>10&&t<20?"\u5341"+e[t%10-1]:t>0&&t<=10?e[t-1]:t.toString()},t.isPhoneValid=function(t){return!!/^[1][3,4,5,7,8][0-9]{9}$/.test(t)},t.getRandNonceStr=function(){return Math.random().toString(36).slice(2)},t.encryptWithMD5=function(t){return(new bf33.Encrytion).encryptWithMD5(t)},t.generateHttpHeaderSign=function(t,e){var n=this.getRandNonceStr(),o=e.toString(),a=Object.deepCopy(t);Object.assign(a,{timestamp:o,nonce:n});for(var i=Object.keys(a).sort(),r="",s=0;s<i.length;s++){r+=i[s],r+="=";var c=a[i[s]];r+="object"==typeof c?JSON.stringify(c):c,s!==i.length-1&&(r+="&")}return[n,o,this.encryptWithMD5(r)]},t.base64Encode=function(t){return t?c.Base64.encode(t):t},t.base64Decode=function(t){return t&&c.Base64.decode(t)||t},t._lastCachedTextures=[],o([jsClass],t)}();n.UtilTool=l,cc._RF.pop()},{"../../../Framework/Utils/Base64":"Base64","../Data/DataConstant":"DataConstant","../Module/Platform/PlatformManager":"PlatformManager"}],UtilView:[function(t,e,n){"use strict";cc._RF.push(e,"59edaKCOzBEzrKy/Esrkd5P","UtilView");var o=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.UtilView=void 0;var a=function(){function t(){}return t.isFullScreen=function(){var t=cc.view.getFrameSize();return t.width/t.height>=1.8},t.isIpadScreen=function(){var t=cc.view.getFrameSize(),e=t.width/t.height;return e<=1.4&&e>=.75},o([jsClass],t)}();n.UtilView=a,cc._RF.pop()},{}],VideoAdManager:[function(t,e,n){"use strict";cc._RF.push(e,"fa140QT5zNFbrvoNKG2dMij","VideoAdManager");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.VideoAdManager=void 0;var i=t("../../../Framework/Manager/AudioManager"),r=t("../../../Framework/Manager/BaseManager"),s=t("../../../Framework/Manager/EventManager"),c=t("../../../Framework/Manager/UIManager"),l=t("../../../Framework/Root/ManagerRoot"),u=t("../../Base/Data/DataEvent"),d=t("../../Base/Module/BehaviorBranch/LogicBehaviorBranch"),p=t("../../Base/Module/BfAnalytics/BfasManager"),h=t("../../Base/Module/BfAnalytics/DataPointID"),_=t("../../LuckyTurnTable/LuckyTurnTableUI"),f=t("../../Base/Module/Platform/Const/PlatformEventType"),m=t("../../Base/Module/Platform/PlatformManager"),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return l.ManagerRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.showVideoAd=function(t,e,n){var o=this;if(m.PlatformManager.instance.platform.isSupportVideoAd)c.UIManager.instance.addTopCollider("VideoAd"),n&&(d.LogicBehaviorBranch.reportVideo(n.customizeScene,d.CustomizeBehaviorEnum.CLICK,n.branchDim),n.branchID=d.LogicBehaviorBranch.getVideoBranchID(n.customizeScene)),m.PlatformManager.instance.platform.showVideoAd(function(t){if(c.UIManager.instance.removeTopCollider("VideoAd"),t){var n=i.AudioManager.instance.musicEnabled;n&&i.AudioManager.instance.pauseMusic(),s.EventManager.instance.once(f.PlatformEventType.VideoAdClose,o,function(t){if(t){p.BfasManager.instance.sendEvt(h.ActivityPointID.videoAwardScene.watchVideoSuccess);try{e&&e(!0)}catch(o){console.error(o)}}else{s.EventManager.instance.emit(u.DataEvent.ToastData,"\u60a8\u672a\u80fd\u6210\u529f\u89c2\u770b\u5b8c\u89c6\u9891,\u65e0\u6cd5\u83b7\u53d6\u5956\u52b1\u54e6~");try{e&&e(!1)}catch(o){console.error(o)}p.BfasManager.instance.sendEvt(h.ActivityPointID.videoAwardScene.watchVideoFailed)}n&&i.AudioManager.instance.resumeMusic()})}else{p.BfasManager.instance.sendEvt(h.ActivityPointID.videoAwardScene.loadVideoFailed),c.UIManager.instance.isExist(_.LuckyTurnTableUI)?s.EventManager.instance.emit(u.DataEvent.LoadVideoFailed):s.EventManager.instance.emit(u.DataEvent.ToastData,"\u62b1\u6b49,\u5fae\u4fe1\u6682\u65e0\u5408\u9002\u7684\u5e7f\u544a\u63a8\u8350~");try{e&&e(!1)}catch(a){console.error(a)}}},n&&n.branchID,n&&n.branchDim);else{s.EventManager.instance.emit(u.DataEvent.ToastData,"\u5f53\u524d\u5e73\u53f0\u4e0d\u652f\u6301\u8be5\u529f\u80fd\uff0c\u60a8\u53ef\u4ee5\u524d\u5f80\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4f53\u9a8c\u5b8c\u6574\u7248\u672c~~");try{t&&t(!1)}catch(a){console.error(a)}try{e&&e(!1)}catch(a){console.error(a)}}},e}(r.BaseManager);n.VideoAdManager=g,cc.systemEvent.once("GameRoot.inited",function(){l.ManagerRoot.instance.add(g)}),cc._RF.pop()},{"../../../Framework/Manager/AudioManager":"AudioManager","../../../Framework/Manager/BaseManager":"BaseManager","../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/Root/ManagerRoot":"ManagerRoot","../../Base/Data/DataEvent":"DataEvent","../../Base/Module/BehaviorBranch/LogicBehaviorBranch":"LogicBehaviorBranch","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../Base/Module/Platform/Const/PlatformEventType":"PlatformEventType","../../Base/Module/Platform/PlatformManager":"PlatformManager","../../LuckyTurnTable/LuckyTurnTableUI":"LuckyTurnTableUI"}],WaitingUI:[function(t,e,n){"use strict";cc._RF.push(e,"c620f4Kl9hFZax8szNjrlDd","WaitingUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.WaitingUI=void 0;var r=t("../../Framework/Manager/UIManager"),s=t("../../Framework/UI/BaseUI"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"uiType",{get:function(){return s.UIType.Temporary},enumerable:!1,configurable:!0}),e.uiBind=function(){},Object.defineProperty(e,"willShowLoading",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.onSetView=function(t,e){this._onExit=t,this._onDestroy=e,this.view.visible=!1},e.prototype.setText=function(t){this.view.getChild("Window").asLabel.title=t},e.prototype.fadeIn=function(){this.view.visible=!0,t.prototype.fadeIn.call(this)},e.prototype.fadeOut=function(){t.prototype.fadeOut.call(this)},e.prototype.onFadedOut=function(){this.view.visible=!1},i([jsClass],e)}(t("../../Framework/UI/FadeUI").FadeUI);n.WaitingUI=c,cc.systemEvent.once("GameRoot.loaded",function(){r.UIManager.instance.initWaitLoadingUI(c)}),cc._RF.pop()},{"../../Framework/Manager/UIManager":"UIManager","../../Framework/UI/BaseUI":"BaseUI","../../Framework/UI/FadeUI":"FadeUI"}],WebSocketPlus:[function(t,e){"use strict";cc._RF.push(e,"5fff3ZU5nZPy5KoQOco+1i2","WebSocketPlus"),cc._RF.pop()},{}],WelfareUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"7ea234nluhP7JYcsmxsNXQL","WelfareUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./WelfareUI_MainPanel"),a=t("./WelfareUI_Window"),i=t("./WelfareUI_SimpleButton"),r=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default)},t}();n.default=r,cc._RF.pop()},{"./WelfareUI_MainPanel":"WelfareUI_MainPanel","./WelfareUI_SimpleButton":"WelfareUI_SimpleButton","./WelfareUI_Window":"WelfareUI_Window"}],WelfareUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"cc214dFzwhPd7XaOH5OOjAB","WelfareUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("WelfareUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://ws1e320grv45k",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],WelfareUI_SimpleButton:[function(t,e,n){"use strict";cc._RF.push(e,"85287xqWVpFL51g01jUgVL1","WelfareUI_SimpleButton");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("WelfareUI","SimpleButton")},e.prototype.onConstruct=function(){this.m_CIsNew=this.getControllerAt(0),this.m_CNewHasNum=this.getControllerAt(1),this.m_TMoveUp=this.getTransitionAt(0),this.m_TMoveDown=this.getTransitionAt(1)},e.URL="ui://ws1e320grv45m",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],WelfareUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"1cee0uCOPJJRLOTuibREjTH","WelfareUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("WelfareUI","Window")},e.prototype.onConstruct=function(){this.m_cDailyAwardStatus=this.getControllerAt(0),this.m_btnDayDayReward=this.getChildAt(1),this.m_btnTurnTable=this.getChildAt(2),this.m_btnShare=this.getChildAt(3),this.m_content=this.getChildAt(5)},e.URL="ui://ws1e320grv45l",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],WelfareUI:[function(t,e,n){"use strict";cc._RF.push(e,"4e7d2Y4InNCK5uZ+mpgclTc","WelfareUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r,s=t("../../Framework/Manager/EventManager"),c=t("../../Framework/UI/FadeUI"),l=t("../Activity/ActivityShare/ActivityShareModel"),u=t("../Base/Data/DataConstant"),d=t("../Base/Data/DataEvent"),p=t("../Base/Module/BfAnalytics/BfasManager"),h=t("../Base/Module/BfAnalytics/DataPointID"),_=t("../Base/Module/Platform/PlatformManager"),f=t("../Base/Utils/UtilView"),m=t("../LuckyTurnTable/LuckyTurnTableModel"),g=t("../SignActivity/SignActivityModel"),y=t("../SignActivity/SignInActivityUI"),I=t("./WelfareUI/WelfareUIBinder");(function(t){t[t.DAILY_AWARD=0]="DAILY_AWARD",t[t.SIGN_IN=1]="SIGN_IN"})(r||(r={}));var C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.uiBind=function(){I.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initUI()},e.prototype.initListener=function(){this.view.m_Collider.onClick(this.onExitClick,this),this.view.m_Window.m_btnDayDayReward.onClick(this.onBtnEveryDayReward,this),this.view.m_Window.m_btnShare.onClick(this.onBtnShare,this),this.view.m_Window.m_btnTurnTable.onClick(this.onBtnTurnTableClick,this),s.EventManager.instance.on(d.DataEvent.SignInDataQuerySuccess,this,this.updateDailyAwardStatus)},e.prototype.initUI=function(){this.initPos(),this.initWebPlatformUI(),this.updateDailyAwardStatus(y.ControlSignInTitleEnum.NEW_PLAYER===g.SignActivityModel.instance.getTitleState())},e.prototype.onBtnEveryDayReward=function(){this.onExitClick(),p.BfasManager.instance.sendEvt(h.ActivityPointID.signInActivity.clickOpen),g.SignActivityModel.instance.openSignInActivityUI()},e.prototype.onBtnShare=function(){this.onExitClick(),l.ActivityShareModel.instance.openActivityShareUI()},e.prototype.onBtnTurnTableClick=function(){this.onExitClick(),m.LuckyTurnTableModel.instance.openLuckyTurnTableUI()},e.prototype.initPos=function(){f.UtilView.isFullScreen()&&(this.view.m_Window.m_content.x+=u.DataConstant.ADAPTER_WIDTH_VALUE+28)},e.prototype.initWebPlatformUI=function(){_.PlatformManager.instance.supportAct.SIGN||(this.view.m_Window.m_btnDayDayReward.visible=!1),_.PlatformManager.instance.supportAct.LUCKY_TURN||(this.view.m_Window.m_btnTurnTable.visible=!1),_.PlatformManager.instance.supportAct.SHARE_HAVE_GIFT||(this.view.m_Window.m_btnShare.visible=!1)},e.prototype.updateDailyAwardStatus=function(t){g.SignActivityModel.instance.signInData&&(this.view.m_Window.m_cDailyAwardStatus.selectedIndex=t?r.SIGN_IN:r.DAILY_AWARD)},i([jsClass],e)}(c.FadeUI);n.default=C,cc._RF.pop()},{"../../Framework/Manager/EventManager":"EventManager","../../Framework/UI/FadeUI":"FadeUI","../Activity/ActivityShare/ActivityShareModel":"ActivityShareModel","../Base/Data/DataConstant":"DataConstant","../Base/Data/DataEvent":"DataEvent","../Base/Module/BfAnalytics/BfasManager":"BfasManager","../Base/Module/BfAnalytics/DataPointID":"DataPointID","../Base/Module/Platform/PlatformManager":"PlatformManager","../Base/Utils/UtilView":"UtilView","../LuckyTurnTable/LuckyTurnTableModel":"LuckyTurnTableModel","../SignActivity/SignActivityModel":"SignActivityModel","../SignActivity/SignInActivityUI":"SignInActivityUI","./WelfareUI/WelfareUIBinder":"WelfareUIBinder"}],YearBeastModel:[function(t,e,n){"use strict";cc._RF.push(e,"4f0efXdVhlMv7DTQ0Ic//+c","YearBeastModel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.YearBeastModel=n.YearBeastAttackTypeEnum=void 0;var r,s=t("../../../Framework/Manager/CoroutineManager"),c=t("../../../Framework/Manager/EventManager"),l=t("../../../Framework/Manager/UIManager"),u=t("../../../Framework/Model/BaseModel"),d=t("../../../Framework/Root/ModelRoot"),p=t("../../Base/Data/DataEvent"),h=t("../../Base/Data/DataLocalStorageKey"),_=t("../../Base/Data/DataProps"),f=t("../../Base/Data/DataScript"),m=t("../../Base/Utils/UtilTime"),g=t("./YearBeastProxy"),y=t("./YearBeastRecordUI"),I=t("./YearBeastTaskUI"),C=t("./YearBeastUI");(function(t){t[t.FIRECRACKER=1]="FIRECRACKER",t[t.MISSILE=2]="MISSILE"})(r=n.YearBeastAttackTypeEnum||(n.YearBeastAttackTypeEnum={}));var M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._yearBeastInfo=null,e._recordInfo=null,e._taskInfo=null,e}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return d.ModelRoot.instance.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return g.YearBeastProxy.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"recordInfo",{get:function(){return this._recordInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"taskInfo",{get:function(){return this._taskInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curBlood",{get:function(){var t;return this.isActive&&(null===(t=this._yearBeastInfo)||void 0===t?void 0:t.yearBeastCurrentBlood)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxBlood",{get:function(){var t;if(!(null===(t=this._yearBeastInfo)||void 0===t?void 0:t.yearBeastHealth))return 0;for(var e=0,n=0;n<this._yearBeastInfo.yearBeastHealth.length;n++)e<this._yearBeastInfo.yearBeastHealth[n].endBlood&&(e=this._yearBeastInfo.yearBeastHealth[n].endBlood);return e},enumerable:!1,configurable:!0}),e.prototype.getYearBeastAniSuffix=function(){var t;if(!(null===(t=this._yearBeastInfo)||void 0===t?void 0:t.yearBeastHealth)||this.curBlood<=0)return"";for(var e=this.curBlood,n=0;n<this._yearBeastInfo.yearBeastHealth.length;n++)if(e>=this._yearBeastInfo.yearBeastHealth[n].beginBlood&&e<=this._yearBeastInfo.yearBeastHealth[n].endBlood)return 1==n||2==n?(n+1).toString():"";return""},e.prototype.getProgressBlood=function(){var t;if(!(null===(t=this._yearBeastInfo)||void 0===t?void 0:t.yearBeastHealth)||this.curBlood<=0)return 0;for(var e=[.36,.36,.28],n=0,o=this.curBlood,a=0;a<this._yearBeastInfo.yearBeastHealth.length;a++){if(o>=this._yearBeastInfo.yearBeastHealth[a].beginBlood&&o<=this._yearBeastInfo.yearBeastHealth[a].endBlood){var i=this._yearBeastInfo.yearBeastHealth[a].endBlood-this._yearBeastInfo.yearBeastHealth[a].beginBlood;n+=(this._yearBeastInfo.yearBeastHealth[a].endBlood-o)/i*e[a];break}o<this._yearBeastInfo.yearBeastHealth[a].beginBlood&&(n+=e[a])}return(1-n)*this.maxBlood},Object.defineProperty(e.prototype,"isActive",{get:function(){if(!this._yearBeastInfo)return!1;var t=Date.now()/1e3;return t>=this._yearBeastInfo.startTime&&t<=this._yearBeastInfo.endTime},enumerable:!1,configurable:!0}),e.prototype.getActivityTimeStr=function(){return this._yearBeastInfo?new Date(1e3*this._yearBeastInfo.startTime).toCustomString("MM.dd")+"-"+new Date(1e3*this._yearBeastInfo.endTime).toCustomString("MM.dd"):""},Object.defineProperty(e.prototype,"isBigGiftGot",{get:function(){var t;return 1===(null===(t=this._yearBeastInfo)||void 0===t?void 0:t.greatGreetingStatus)},enumerable:!1,configurable:!0}),e.prototype.getPropDamage=function(t){var e,n;return t===_.PropIDEnum.NEWYEAR_BIAN_PAO?(null===(e=this._yearBeastInfo)||void 0===e?void 0:e.fireCrackerDamage)||0:t===_.PropIDEnum.NEWYEAR_MISSILE&&(null===(n=this._yearBeastInfo)||void 0===n?void 0:n.missileDamage)||0},e.prototype.getTaskReceivedPropInfo=function(){var t,e,n;if(!this._taskInfo||!this._taskInfo.taskInfos||!this._taskInfo.taskConfig)return{current:0,total:0};for(var o=0,a=0,i={},r=0;r<this._taskInfo.taskInfos.length;r++)2===this._taskInfo.taskInfos[r].state&&(i[this._taskInfo.taskInfos[r].id]=!0);for(r=0;r<this._taskInfo.taskConfig.length;r++){var s=this._taskInfo.taskConfig[r],c=0;if(null===(t=s.award)||void 0===t?void 0:t.prop)for(var l in null===(e=s.award)||void 0===e?void 0:e.prop)Number(l)!==_.PropIDEnum.NEWYEAR_BIAN_PAO&&Number(l)!==_.PropIDEnum.NEWYEAR_MISSILE||(c+=null===(n=s.award)||void 0===n?void 0:n.prop[Number(l)]);o+=c,i[s.id]&&(a+=c)}return{current:a,total:o}},e.prototype.getCanReceiveTaskCnt=function(){if(!this._taskInfo||!this._taskInfo.taskInfos||!this._taskInfo.taskConfig)return 0;for(var t=0,e=0;e<this._taskInfo.taskInfos.length;e++)1===this._taskInfo.taskInfos[e].state&&++t;return t},e.prototype.isShowBtnSweep=function(){var t=localStorage.getItem(h.DataLocalStorage.addKeyWithNumID(h.LocalStorageKey.YEAR_BEAT_BTN_SWEEP_DAY)),e=!t||!m.UtilTime.isTodayDate(+t);return e&&localStorage.setItem(h.DataLocalStorage.addKeyWithNumID(h.LocalStorageKey.YEAR_BEAT_BTN_SWEEP_DAY),Date.now()+""),e},e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){c.EventManager.instance.on(p.DataEvent.JoinAwardListener,this,this.onJoinAwardListener),c.EventManager.instance.on(p.DataEvent.SyncRichData,this,this.onAwardListener),c.EventManager.instance.on(p.DataEvent.BackHallSuccess,this,this.onBackHallSuccess)},e.prototype.onJoinAwardListener=function(){this.reqYearBeastInfo(),this.reqTaskInfo()},e.prototype.onAwardListener=function(t){if(t.type==f.DataScript.YearBeastTask.id){var e={prop:{},sr:0,yb:0};t.add_props&&t.add_props.forEach(function(t){e.prop[Number(t.propid)]=t.count}),e.sr=t.add_sr||0,e.yb=t.add_yb||0}},e.prototype.onBackHallSuccess=function(){this._yearBeastInfo||this.reqYearBeastInfo()},e.prototype.openYearBeastUI=function(){if(!this.isActive)return c.EventManager.instance.emit(p.DataEvent.ToastData,"\u5e74\u517d\u6d3b\u52a8\u5df2\u7ed3\u675f~"),void c.EventManager.instance.emit(p.DataEvent.YearBeastInfo);l.UIManager.instance.open(C.default)},e.prototype.reqYearBeastInfo=function(){var t=this;this.proxy.reqYearBeastInfo(function(e){t._yearBeastInfo=e,c.EventManager.instance.emit(p.DataEvent.YearBeastInfo)})},e.prototype.reqAttackYearBeast=function(t,e){var n=this,o=t===_.PropIDEnum.NEWYEAR_MISSILE?r.MISSILE:r.FIRECRACKER;this.proxy.reqAttackYearBeast(o,function(o){if(o){var a=n._yearBeastInfo.yearBeastCurrentBlood-n.getPropDamage(t);n._yearBeastInfo.yearBeastCurrentBlood=Math.max(0,a),c.EventManager.instance.emit(p.DataEvent.YearBeastInfo)}e&&e(o)})},e.prototype.openAwardRecord=function(){this.reqAwardRecord(function(t){t&&l.UIManager.instance.open(y.YearBeastRecordUI)})},e.prototype.openTask=function(){this.reqTaskInfo(function(t){t&&l.UIManager.instance.open(I.YearBeastTaskUI)})},e.prototype.reqComposeHappyNewYear=function(){var t=this;this.proxy.reqComposeHappyNewYear(function(e){e&&(t._yearBeastInfo.greatGreetingStatus=1,c.EventManager.instance.emit(p.DataEvent.YearBeastInfo))})},e.prototype.autoPopup=function(){var t=this;l.UIManager.instance.addTopCollider("autoPopup"),this._coroutine=s.CoroutineManager.instance.timeoutWait(function(){return!!t._yearBeastInfo},1,function(){l.UIManager.instance.removeTopCollider("autoPopup"),t.curBlood>0&&l.UIManager.instance.open(C.default)},this)},e.prototype.stopPopup=function(){this._coroutine&&(s.CoroutineManager.instance.stopCo(this._coroutine),l.UIManager.instance.removeTopCollider("autoPopup")),this._coroutine=null,l.UIManager.instance.close(C.default)},e.prototype.reqAwardRecord=function(t){var e=this;this.proxy.reqYearBeastAwardRecord(function(n,o){n?(e._recordInfo=o,t&&t(!0)):t&&t(!1)})},e.prototype.reqTaskInfo=function(t){var e=this,n="0";this._taskInfo&&(n=this._taskInfo.version||"0"),this.proxy.reqYearBeastTaskInfo(n,function(n,o){if(n){if(e._taskInfo)for(var a in o)e._taskInfo[a]=o[a];else e._taskInfo=o;c.EventManager.instance.emit(p.DataEvent.YearBeastTaskInfo),t&&t(!0)}else t&&t(!1)})},e.prototype.reqGetTaskAward=function(t,e,n){var o=this;this.proxy.reqGetYearBeastTaskAward(t,e,function(t){t?(o.reqTaskInfo(),c.EventManager.instance.emit(p.DataEvent.YearBeastTaskInfo),n&&n(!0)):n&&n(!1)})},e.prototype.updateTaskInfo=function(t){if(this._taskInfo){for(var e in t)this._taskInfo[e]=t[e];c.EventManager.instance.emit(p.DataEvent.YearBeastTaskInfo)}else this.reqTaskInfo()},i([jsClass],e)}(u.BaseModel);n.YearBeastModel=M,cc.systemEvent.once("GameRoot.inited",function(){d.ModelRoot.instance.add(M)}),cc._RF.pop()},{"../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/Model/BaseModel":"BaseModel","../../../Framework/Root/ModelRoot":"ModelRoot","../../Base/Data/DataEvent":"DataEvent","../../Base/Data/DataLocalStorageKey":"DataLocalStorageKey","../../Base/Data/DataProps":"DataProps","../../Base/Data/DataScript":"DataScript","../../Base/Utils/UtilTime":"UtilTime","./YearBeastProxy":"YearBeastProxy","./YearBeastRecordUI":"YearBeastRecordUI","./YearBeastTaskUI":"YearBeastTaskUI","./YearBeastUI":"YearBeastUI"}],YearBeastProxy:[function(t,e,n){"use strict";cc._RF.push(e,"46781whGMNK07pMAjLb00tF","YearBeastProxy");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.YearBeastProxy=void 0;var r=t("../../../Framework/Proxy/BaseProxy"),s=t("../../../Framework/Root/ProxyRoot"),c=t("../../Base/Data/DataBfConfig"),l=t("../../Base/Data/DataScript"),u=t("../../Base/Module/Network/protocol/AwardProtocol"),d=t("../../Base/Module/Network/SocketUtils"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return s.ProxyRoot.instance.get(this)},enumerable:!1,configurable:!0}),e.prototype.reqYearBeastInfo=function(t){var e=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.YearBeast.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.YearBeast.func.query+"';")});d.SocketUtils.instance.request(e,function(e){if(0===e.flag){var n=bf33.Utils.bytesToString(e.msg);console.log(">>jp-log reqYearBeastInfo:",n);var o=JSON.parse(n);0===o.flag?t&&t(o.data):t&&t(null)}else console.error(">-----\x3ejp-log reqYearBeastInfo:",e),t&&t(null)})},e.prototype.reqYearBeastAwardRecord=function(t){var e=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.YearBeast.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.YearBeast.func.record+"';")});d.SocketUtils.instance.request(e,function(e){if(0===e.flag){var n=bf33.Utils.bytesToString(e.msg);console.log("YearBeastProxy.reqYearBeastAwardRecord:",n);var o=JSON.parse(n),a=0===o.flag,i={};if(i.errMsg=o.errorMsg||"",i.recordData=[],o.data)for(var r=function(t){var e=o.data[t],n={};n.attackType=e.attack_type,n.timestamp=e.timestamp,n.award={},n.award.sr=e.sr||0,n.award.yb=e.yb||0,n.award.prop={},e.props&&Object.keys(e.props).forEach(function(t){n.award.prop[Number(t)]=e.props[t]}),i.recordData.push(n)},s=0;s<o.data.length;s++)r(s);t&&t(a,i)}else console.error("YearBeastProxy.reqYearBeastAwardRecord error:",e.flag),t&&t(!1)})},e.prototype.reqAttackYearBeast=function(t,e){var n=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.YearBeast.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.YearBeast.func.attack+"';attackType="+t+";")});d.SocketUtils.instance.request(n,function(t){if(0===t.flag){var n=bf33.Utils.bytesToString(t.msg);console.log(">>jp-log reqAttackYearBeast:",n);var o=JSON.parse(n);e&&e(0===o.flag)}else console.error(">-----\x3ejp-log reqAttackYearBeast:",t),e&&e(!1)})},e.prototype.reqComposeHappyNewYear=function(t){var e=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.YearBeast.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.YearBeast.func.compose+"';")});d.SocketUtils.instance.request(e,function(e){if(0===e.flag){var n=bf33.Utils.bytesToString(e.msg);console.log(">>jp-log reqComposeHappyNewYear:",n);var o=JSON.parse(n);t&&t(0===o.flag)}else console.error(">-----\x3ejp-log reqComposeHappyNewYear:",e),t&&t(!1)})},e.prototype.reqYearBeastTaskInfo=function(t,e){var n=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.YearBeastTask.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.YearBeastTask.func.task+"',channelID="+c.DataBfConfig.ymn.channel+",clientVer="+c.DataBfConfig.getPackageVersion()+",version='"+t+"'")});d.SocketUtils.instance.request(n,function(t){if(0===t.flag){var n=bf33.Utils.bytesToString(t.msg);console.log("YearBeastProxy.reqYearBeastTaskInfo:",n);var o=JSON.parse(n),a=0===o.flag,i={};if(i.version=o.version||"0",i.errMsg=o.errorMsg||"",i.taskInfos=[],o.taskInfos)for(var r=0;r<o.taskInfos.length;r++){var s={id:o.taskInfos[r].id,state:o.taskInfos[r].state,rate:o.taskInfos[r].rate,timestamp:o.taskInfos[r].timestamp};i.taskInfos[s.id-1]=s}if(o.taskConfig)for(i.taskConfig=[],r=0;r<o.taskConfig.length;r++)s={id:o.taskConfig[r].id,target:o.taskConfig[r].target,award:o.taskConfig[r].award,luckyAward:o.taskConfig[r].luckyAward},i.taskConfig[s.id-1]=s;e&&e(a,i)}else console.error("YearBeastProxy.reqYearBeastTaskInfo error:",t.flag)})},e.prototype.reqGetYearBeastTaskAward=function(t,e,n){var o=new u.AwardProtocol.ReqAwardInfo({type:l.DataScript.YearBeastTask.id,gameid:c.DataBfConfig.gameID,data:bf33.Utils.stringToBytes("func='"+l.DataScript.YearBeastTask.func.getAward+"',channelID="+c.DataBfConfig.ymn.channel+",taskID="+t+",roomID="+e)});d.SocketUtils.instance.request(o,function(t){if(0===t.flag){var e=bf33.Utils.bytesToString(t.msg);console.log("YearBeastProxy.reqGetYearBeastTaskAward:",e);var o=0===JSON.parse(e).flag;n&&n(o)}else console.error("YearBeastProxy.reqGetYearBeastTaskAward error:",t.flag)})},i([jsClass],e)}(r.BaseProxy);n.YearBeastProxy=p,cc.systemEvent.once("GameRoot.inited",function(){s.ProxyRoot.instance.add(p)}),cc._RF.pop()},{"../../../Framework/Proxy/BaseProxy":"BaseProxy","../../../Framework/Root/ProxyRoot":"ProxyRoot","../../Base/Data/DataBfConfig":"DataBfConfig","../../Base/Data/DataScript":"DataScript","../../Base/Module/Network/SocketUtils":"SocketUtils","../../Base/Module/Network/protocol/AwardProtocol":"AwardProtocol"}],YearBeastRecordUI:[function(t,e,n){"use strict";cc._RF.push(e,"cf863DMMMRN06tcSxT7fB/D","YearBeastRecordUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.YearBeastRecordUI=void 0;var r,s=t("../../../Framework/UI/FadeUI"),c=t("../../Base/Data/DataProps"),l=t("./YearBeastModel");(function(t){t[t.BIANPAO=1]="BIANPAO",t[t.DAODAN=2]="DAODAN"})(r||(r={}));var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.getPkgName=function(){return"YearBeastSecondaryUI"},e.getCompName=function(){return"RecordMainPanel"},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return l.YearBeastModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initUI(),this.initListener()},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this)},e.prototype.initUI=function(){var t=this.model.recordInfo,e=this.view.m_Window.m_listRecord;e.itemRenderer=this.renderItem.bind(this),e.setVirtual(),e.numItems=t.recordData.length},e.prototype.renderItem=function(t,e){var n=this.model.recordInfo.recordData[t];e.m_txtTime.text=new Date(1e3*n.timestamp).toCustomString("yyyy/MM/dd HH:mm");var o="\u97ad\u70ae";n.attackType==r.DAODAN&&(o="\u5bfc\u5f39");var a="";n.award.sr>0&&(a+="[color=#ea0000]\u91d1\u5e01x"+n.award.sr+"[/color]"),n.award.yb>0&&(""!=a&&(a+="\u3001"),a+="[color=#ea0000]\u94bb\u77f3x"+n.award.yb+"[/color]"),n.award.prop&&Object.keys(n.award.prop).forEach(function(t){""!=a&&(a+="\u3001");var e=c.DataProps.instance.getPropConfigByID(t);a+="[color=#ea0000]"+e.name+"x"+n.award.prop[t]+"[/color]"}),e.m_txtContent.text="\u60a8\u4f7f\u7528"+o+"\u653b\u51fb\u5e74\u517d\uff0c\u83b7\u5f97"+a},i([jsClass],e)}(s.FadeUI);n.YearBeastRecordUI=u,cc._RF.pop()},{"../../../Framework/UI/FadeUI":"FadeUI","../../Base/Data/DataProps":"DataProps","./YearBeastModel":"YearBeastModel"}],YearBeastRuleUI:[function(t,e,n){"use strict";cc._RF.push(e,"d1a0aYxkDpM1okVrASuxGi8","YearBeastRuleUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.YearBeastRuleUI=void 0;var r=t("../../../Framework/UI/FadeUI"),s=t("./YearBeastModel"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.getPkgName=function(){return"YearBeastSecondaryUI"},e.getCompName=function(){return"RuleMainPanel"},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return s.YearBeastModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener()},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this)},i([jsClass],e)}(r.FadeUI);n.YearBeastRuleUI=c,cc._RF.pop()},{"../../../Framework/UI/FadeUI":"FadeUI","./YearBeastModel":"YearBeastModel"}],YearBeastSecondaryUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"e124emuqiVE8JOc+3IHcw0F","YearBeastSecondaryUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./YearBeastSecondaryUI_CompAwardItem"),a=t("./YearBeastSecondaryUI_RuleWindow"),i=t("./YearBeastSecondaryUI_RuleMainPanel"),r=t("./YearBeastSecondaryUI_MainPanel"),s=t("./YearBeastSecondaryUI_Window"),c=t("./YearBeastSecondaryUI_RecordMainPanel"),l=t("./YearBeastSecondaryUI_RecordWindow"),u=t("./YearBeastSecondaryUI_CompRecordItem"),d=t("./YearBeastSecondaryUI_CompTaskItem"),p=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default),fgui.UIObjectFactory.setExtension(l.default.URL,l.default),fgui.UIObjectFactory.setExtension(u.default.URL,u.default),fgui.UIObjectFactory.setExtension(d.default.URL,d.default)},t}();n.default=p,cc._RF.pop()},{"./YearBeastSecondaryUI_CompAwardItem":"YearBeastSecondaryUI_CompAwardItem","./YearBeastSecondaryUI_CompRecordItem":"YearBeastSecondaryUI_CompRecordItem","./YearBeastSecondaryUI_CompTaskItem":"YearBeastSecondaryUI_CompTaskItem","./YearBeastSecondaryUI_MainPanel":"YearBeastSecondaryUI_MainPanel","./YearBeastSecondaryUI_RecordMainPanel":"YearBeastSecondaryUI_RecordMainPanel","./YearBeastSecondaryUI_RecordWindow":"YearBeastSecondaryUI_RecordWindow","./YearBeastSecondaryUI_RuleMainPanel":"YearBeastSecondaryUI_RuleMainPanel","./YearBeastSecondaryUI_RuleWindow":"YearBeastSecondaryUI_RuleWindow","./YearBeastSecondaryUI_Window":"YearBeastSecondaryUI_Window"}],YearBeastSecondaryUI_CompAwardItem:[function(t,e,n){"use strict";cc._RF.push(e,"f2bf1+LmvxD/btFS8GxxM6p","YearBeastSecondaryUI_CompAwardItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("YearBeastSecondaryUI","CompAwardItem")},e.prototype.onConstruct=function(){this.m_icon=this.getChildAt(1),this.m_title=this.getChildAt(2)},e.URL="ui://168x33f3q2au12",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],YearBeastSecondaryUI_CompRecordItem:[function(t,e,n){"use strict";cc._RF.push(e,"f9692adcPxGBKhBDpMdMisC","YearBeastSecondaryUI_CompRecordItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("YearBeastSecondaryUI","CompRecordItem")},e.prototype.onConstruct=function(){this.m_txtTime=this.getChildAt(0),this.m_txtContent=this.getChildAt(1)},e.URL="ui://168x33f3v0bes",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],YearBeastSecondaryUI_CompTaskItem:[function(t,e,n){"use strict";cc._RF.push(e,"f8006yzpUpFS6/NM7H0lHTr","YearBeastSecondaryUI_CompTaskItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("YearBeastSecondaryUI","CompTaskItem")},e.prototype.onConstruct=function(){this.m_cAwardType=this.getControllerAt(0),this.m_txtTitle=this.getChildAt(1),this.m_txtProgress=this.getChildAt(2),this.m_compAward1=this.getChildAt(3),this.m_compAward2=this.getChildAt(4),this.m_btnGo=this.getChildAt(5),this.m_btnGet=this.getChildAt(6)},e.URL="ui://168x33f3v0beu",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],YearBeastSecondaryUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"334darpiqhKyYAcQUddL5I0","YearBeastSecondaryUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("YearBeastSecondaryUI","MainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://168x33f3v0be0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],YearBeastSecondaryUI_RecordMainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"b5458TkBdxCGIqEdRQqubkA","YearBeastSecondaryUI_RecordMainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("YearBeastSecondaryUI","RecordMainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://168x33f3v0be7",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],YearBeastSecondaryUI_RecordWindow:[function(t,e,n){"use strict";cc._RF.push(e,"86054T5a+JIkagMT1Dszk5Z","YearBeastSecondaryUI_RecordWindow");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("YearBeastSecondaryUI","RecordWindow")},e.prototype.onConstruct=function(){this.m_cRadio=this.getControllerAt(0),this.m_btnClose=this.getChildAt(3),this.m_listRecord=this.getChildAt(4),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://168x33f3v0be8",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],YearBeastSecondaryUI_RuleMainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"2ab0flA4k5N0LKn8VA1pKAo","YearBeastSecondaryUI_RuleMainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("YearBeastSecondaryUI","RuleMainPanel")},e.prototype.onConstruct=function(){this.m_Collider=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://168x33f3t4yuz",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],YearBeastSecondaryUI_RuleWindow:[function(t,e,n){"use strict";cc._RF.push(e,"746b0z94mlDE7WJS2LR3fKa","YearBeastSecondaryUI_RuleWindow");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("YearBeastSecondaryUI","RuleWindow")},e.prototype.onConstruct=function(){this.m_cRadio=this.getControllerAt(0),this.m_btnClose=this.getChildAt(3),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://168x33f3t4yu10",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],YearBeastSecondaryUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"9222fdsMblJrbjLFtVeV3hr","YearBeastSecondaryUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("YearBeastSecondaryUI","Window")},e.prototype.onConstruct=function(){this.m_btnClose=this.getChildAt(1),this.m_listTask=this.getChildAt(2),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://168x33f3v0be1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],YearBeastTaskUI:[function(t,e,n){"use strict";cc._RF.push(e,"020aaTdNHFPo7GQwUzJwp8i","YearBeastTaskUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.YearBeastTaskUI=void 0;var r,s,c=t("../../../Framework/Manager/EventManager"),l=t("../../../Framework/Manager/UIManager"),u=t("../../../Framework/UI/FadeUI"),d=t("../../Base/Data/DataEvent"),p=t("../../Base/Data/DataProps"),h=t("../../Base/View/UIHelp"),_=t("../../FriendTeam/FriendTeamModel"),f=t("../../Game/Common/GameCommonModel"),m=t("../../Game/Common/PlayerInfoModel"),g=t("../../Game/GuanDan/GameEvent"),y=t("../../Game/GuanDan/GameUI"),I=t("../../Hall/HallModel"),C=t("./YearBeastModel"),M=t("./YearBeastUI");(function(t){t[t.IN_PROGRESS=0]="IN_PROGRESS",t[t.FINISH=1]="FINISH",t[t.GOT=2]="GOT"})(r||(r={})),function(t){t[t.GOLD=0]="GOLD",t[t.DIAMOND=1]="DIAMOND",t[t.ITEM=2]="ITEM"}(s||(s={}));var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.TaskTitle=["\u6bcf\u65e5\u767b\u5f55","\u6bcf\u65e5\u5bf9\u5c40","\u7ec4\u961f\u5bf9\u5c40","\u6bcf\u65e5\u5bf9\u5c40","\u7ec4\u961f\u5bf9\u5c40","\u6bcf\u65e5\u5bf9\u5c40","\u9080\u65b0\u4eba\u7ec4\u961f\u5bf9\u5c40"],e}return a(e,t),e.getPkgName=function(){return"YearBeastSecondaryUI"},e.getCompName=function(){return"MainPanel"},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return C.YearBeastModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initUI(),this.initListener()},e.prototype.initListener=function(){this.view.m_Window.m_btnClose.onClick(this.onExitClick,this),c.EventManager.instance.on(d.DataEvent.YearBeastTaskInfo,this,this.initUI)},e.prototype.initUI=function(){var t=this.model.taskInfo,e=this.view.m_Window.m_listTask;e.itemRenderer=this.renderItem.bind(this),e.numItems=t.taskInfos.length},e.prototype.renderItem=function(t,e){var n=this.model.taskInfo.taskInfos[t],o=this.model.taskInfo.taskConfig[t];e.m_btnGo.clearClick(),e.m_btnGet.clearClick(),e.m_btnGo.onClick(this.onClickGo.bind(this,n.id),this),e.m_btnGet.onClick(this.onClickGet.bind(this,n.id),this),e.m_cAwardType.selectedIndex=n.state,e.m_txtTitle.text=this.TaskTitle[t];var a="[color=#dc6746]\u5df2\u5b8c\u6210[/color]";n.state==r.IN_PROGRESS&&(a="[color=#dc6746]"+n.rate+"/"+o.target+"[/color]"),e.m_txtProgress.text="\u5b8c\u6210\u8fdb\u5ea6"+a;var i=0;if(o.award.prop){var s=Object.keys(o.award.prop);i+=s.length;for(var c=0;c<2;c++)if(s[c]){var l=Number(s[c]);this.renderAwardItem(e["m_compAward"+(c+1)],l,o.award.prop[l])}}o.luckyAward&&o.luckyAward.length>0&&(this.renderAwardItem(e.m_compAward2,null,0,!0),i++),i<2&&(e.m_compAward2.visible=!1)},e.prototype.renderAwardItem=function(t,e,n,o){if(o)return t.m_icon.url="ui://YearBeastSecondaryUI/img_task_random",void(t.m_title.text="x1");var a=p.DataProps.instance.getPropConfigByID(e);t.m_icon.url=h.UIHelp.getPropIcon(a.type,a.res),t.m_title.text="x"+n},e.prototype.onClickGo=function(t){if(l.UIManager.instance.isExist(y.GameUI))return this.onExitClick(),l.UIManager.instance.isExist(M.default)&&l.UIManager.instance.close(M.default),void(f.GameCommonModel.instance.isTeamModel()||3!=t&&5!=t&&7!=t||f.GameCommonModel.instance.reqLeaveGame(function(){c.EventManager.instance.emit(g.GameEvent.BACKTOLOBBY,null,function(){_.FriendTeamModel.instance.createTeam()})}));2==t||4==t||6==t?(this.onExitClick(),l.UIManager.instance.isExist(M.default)&&l.UIManager.instance.close(M.default),I.default.instance.doQuickStartToGame()):3!=t&&5!=t&&7!=t||(this.onExitClick(),l.UIManager.instance.isExist(M.default)&&l.UIManager.instance.close(M.default),_.FriendTeamModel.instance.createTeam())},e.prototype.onClickGet=function(t){var e=0;m.PlayerInfoModel.instance.isGamePlay()&&(e=f.GameCommonModel.instance.getAppid()),this.model.reqGetTaskAward(t,e)},i([jsClass],e)}(u.FadeUI);n.YearBeastTaskUI=v,cc._RF.pop()},{"../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/UI/FadeUI":"FadeUI","../../Base/Data/DataEvent":"DataEvent","../../Base/Data/DataProps":"DataProps","../../Base/View/UIHelp":"UIHelp","../../FriendTeam/FriendTeamModel":"FriendTeamModel","../../Game/Common/GameCommonModel":"GameCommonModel","../../Game/Common/PlayerInfoModel":"PlayerInfoModel","../../Game/GuanDan/GameEvent":"GameEvent","../../Game/GuanDan/GameUI":"GameUI","../../Hall/HallModel":"HallModel","./YearBeastModel":"YearBeastModel","./YearBeastUI":"YearBeastUI"}],YearBeastUIBinder:[function(t,e,n){"use strict";cc._RF.push(e,"2bec9oywwNKyrRP03bFteMm","YearBeastUIBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./YearBeastUI_MainPanel"),a=t("./YearBeastUI_Window"),i=t("./YearBeastUI_Center"),r=t("./YearBeastUI_Word"),s=t("./YearBeastUI_RightPanel"),c=t("./YearBeastUI_BtnFirecracker"),l=t("./YearBeastUI_YearBeastSpine"),u=t("./YearBeastUI_Prop"),d=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default),fgui.UIObjectFactory.setExtension(l.default.URL,l.default),fgui.UIObjectFactory.setExtension(u.default.URL,u.default)},t}();n.default=d,cc._RF.pop()},{"./YearBeastUI_BtnFirecracker":"YearBeastUI_BtnFirecracker","./YearBeastUI_Center":"YearBeastUI_Center","./YearBeastUI_MainPanel":"YearBeastUI_MainPanel","./YearBeastUI_Prop":"YearBeastUI_Prop","./YearBeastUI_RightPanel":"YearBeastUI_RightPanel","./YearBeastUI_Window":"YearBeastUI_Window","./YearBeastUI_Word":"YearBeastUI_Word","./YearBeastUI_YearBeastSpine":"YearBeastUI_YearBeastSpine"}],YearBeastUI_BtnFirecracker:[function(t,e,n){"use strict";cc._RF.push(e,"7786cKzbY5JF4BhvabrzBR9","YearBeastUI_BtnFirecracker");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("YearBeastUI","BtnFirecracker")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(1)},e.URL="ui://8uy04rjwruyp29",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],YearBeastUI_Center:[function(t,e,n){"use strict";cc._RF.push(e,"980b7L1vDFD+Jrt28pX8x7q","YearBeastUI_Center");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("YearBeastUI","Center")},e.prototype.onConstruct=function(){this.m_cGray=this.getControllerAt(0),this.m_yearBeastSpine=this.getChildAt(0),this.m_bloodProgress=this.getChildAt(2),this.m_txtBlood=this.getChildAt(3),this.m_bubbleTip=this.getChildAt(7),this.m_damageTipPos=this.getChildAt(8)},e.URL="ui://8uy04rjwd47pl",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],YearBeastUI_MainPanel:[function(t,e,n){"use strict";cc._RF.push(e,"9a750Bn6W1HRImaFgPzsVs7","YearBeastUI_MainPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("YearBeastUI","MainPanel")},e.prototype.onConstruct=function(){this.m_bg=this.getChildAt(0),this.m_Window=this.getChildAt(1),this.m_TFadeIn=this.getTransitionAt(0)},e.URL="ui://8uy04rjwd47pj",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],YearBeastUI_Prop:[function(t,e,n){"use strict";cc._RF.push(e,"6d207au29BGGa/lYeyQV393","YearBeastUI_Prop");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("YearBeastUI","Prop")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(0)},e.URL="ui://8uy04rjwruypr",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],YearBeastUI_RightPanel:[function(t,e,n){"use strict";cc._RF.push(e,"b6a74z0hvJIpoShwbAQPnoU","YearBeastUI_RightPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("YearBeastUI","RightPanel")},e.prototype.onConstruct=function(){this.m_cGotAward=this.getControllerAt(0),this.m_btnCompose=this.getChildAt(5),this.m_word0=this.getChildAt(7),this.m_word1=this.getChildAt(8),this.m_word2=this.getChildAt(9),this.m_word3=this.getChildAt(10),this.m_txtWord0=this.getChildAt(11),this.m_txtWord1=this.getChildAt(12),this.m_txtWord2=this.getChildAt(13),this.m_txtWord3=this.getChildAt(14),this.m_spineNode=this.getChildAt(15)},e.URL="ui://8uy04rjwruyp25",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],YearBeastUI_Window:[function(t,e,n){"use strict";cc._RF.push(e,"23ba2cPoclOeoahGRXFuS6V","YearBeastUI_Window");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("YearBeastUI","Window")},e.prototype.onConstruct=function(){this.m_cGray=this.getControllerAt(0),this.m_btnMyAward=this.getChildAt(0),this.m_imgTitle=this.getChildAt(2),this.m_center=this.getChildAt(4),this.m_btnTask=this.getChildAt(5),this.m_Right=this.getChildAt(6),this.m_btnGainProp=this.getChildAt(7),this.m_btnFirecracker=this.getChildAt(8),this.m_btnMissile=this.getChildAt(9),this.m_txtGainCnt=this.getChildAt(13),this.m_txtMissileCnt=this.getChildAt(14),this.m_txtFirecrackerCnt=this.getChildAt(15),this.m_btnClose=this.getChildAt(16),this.m_btnRule=this.getChildAt(17),this.m_awardPos4=this.getChildAt(18),this.m_awardPos0=this.getChildAt(19),this.m_awardPos1=this.getChildAt(20),this.m_awardPos2=this.getChildAt(21),this.m_awardPos3=this.getChildAt(22),this.m_awardPos5=this.getChildAt(23),this.m_txtActivityTime=this.getChildAt(24),this.m_FadeIn=this.getTransitionAt(0)},e.URL="ui://8uy04rjwd47pk",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],YearBeastUI_Word:[function(t,e,n){"use strict";cc._RF.push(e,"4f44dLJHaNPq5IlAHuJ75Bx","YearBeastUI_Word");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("YearBeastUI","Word")},e.prototype.onConstruct=function(){this.m_cPos=this.getControllerAt(0),this.m_cShowCnt=this.getControllerAt(1)},e.URL="ui://8uy04rjwd47po",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],YearBeastUI_YearBeastSpine:[function(t,e,n){"use strict";cc._RF.push(e,"9846c7H8MNNWorDePm43Y7B","YearBeastUI_YearBeastSpine");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("YearBeastUI","YearBeastSpine")},e.prototype.onConstruct=function(){this.m_spineNode=this.getChildAt(0)},e.URL="ui://8uy04rjwruyp2m",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],YearBeastUI:[function(t,e,n){"use strict";cc._RF.push(e,"ca50343nCRPcr6YmIyDzL8S","YearBeastUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s,c=t("../../../Framework/Manager/CoroutineManager"),l=t("../../../Framework/Manager/EventManager"),u=t("../../../Framework/Manager/UIManager"),d=t("../../../Framework/UI/FadeUI"),p=t("../../Award/AwardModel"),h=t("../../Award/AwardUI"),_=t("../../Base/Data/DataConstant"),f=t("../../Base/Data/DataEvent"),m=t("../../Base/Data/DataProps"),g=t("../../Base/Data/DataSpineAni"),y=t("../../Base/Module/BfAnalytics/BfasManager"),I=t("../../Base/Module/BfAnalytics/DataPointID"),C=t("../../Base/Utils/UtilCC"),M=t("../../Base/Utils/UtilView"),v=t("../../Base/View/UIHelp"),E=t("../../Login/LoginModel"),A=t("../../UserInfo/UserInfoModel"),P=t("./YearBeastModel"),b=t("./YearBeastRuleUI"),U=t("./YearBeastUI/YearBeastUIBinder"),S=["\u4e0d\u7792\u4f60\u8bf4\uff0c\u4ffa\u73b0\u5728\u5f88\u5bcc\u6709~","\u5bfc\u5f39\u6bd4\u97ad\u70ae\u5956\u52b1\u6536\u76ca\u66f4\u9ad8~","\u8840\u91cf\u8d8a\u4f4e\u5956\u52b1\u8d8a\u9ad8\u5462~","\u5618\uff0c\u7ec4\u961f\u6253\u6709\u673a\u4f1a\u5f97\u9650\u5b9a\u8868\u60c5~","\u8d85\u7ea7\u5927\u793c\u5305\u662f\u4ffa\u7ed9\u4f60\u51c6\u5907\u7684\u65b0\u5e74\u793c\u7269~","\u7ec4\u961f\u505a\u4efb\u52a1\u5bfc\u5f39\u591a\u591a~"],T=[m.PropIDEnum.NEWYEAR_CARD_XIN,m.PropIDEnum.NEWYEAR_CARD_NIAN,m.PropIDEnum.NEWYEAR_CARD_KUAI,m.PropIDEnum.NEWYEAR_CARD_LE];(function(t){t[t.FIRECRACKER=625021]="FIRECRACKER",t[t.MISSILE=625022]="MISSILE",t[t.BIG_GIFT=625023]="BIG_GIFT"})(s||(s={}));var R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isRequestAttacking=!1,e._isBubble=!1,e._delayCoroutine=null,e._bubbleCoroutine=null,e._flyPropPool=[],e._awardItemPool=[],e._awardTipPool=[],e._damageTipPool=[],e._posIndexes={},e._tweenTargets=[],e._awards=[],e}return a(e,t),e.uiBind=function(){U.default.bindAll()},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return P.YearBeastModel.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.initListener(),this.initUI(),y.BfasManager.instance.sendEvt(I.YearBeastPointID.SHOW)},e.prototype.initListener=function(){l.EventManager.instance.on(f.DataEvent.UpdateProp,this,this.onUpdateProp),l.EventManager.instance.on(f.DataEvent.SyncRichData,this,this.onSyncRichData),l.EventManager.instance.on(f.DataEvent.YearBeastTaskInfo,this,this.onYearBeastTaskInfo),this.view.m_Window.m_btnClose.onClick(this.onBtnCloseClick,this),this.view.m_Window.m_btnRule.onClick(this.onBtnRuleClick,this),this.view.m_Window.m_btnTask.onClick(this.onBtnTaskClick,this),this.view.m_Window.m_btnGainProp.onClick(this.onBtnGainPropClick,this),this.view.m_Window.m_btnMyAward.onClick(this.onBtnMyAwardClick,this),this.view.m_Window.m_center.m_yearBeastSpine.onClick(this.onYearBeastItemClick,this),this.view.m_Window.m_btnFirecracker.onClick(this.onBtnFirecrackerClick,this),this.view.m_Window.m_btnMissile.onClick(this.onBtnMissileClick,this),this.view.m_Window.m_Right.m_btnCompose.onClick(this.onBtnComposeClick,this)},e.prototype.onUpdateProp=function(){this.updateFirecrackerAndMissile()},e.prototype.onSyncRichData=function(t){var e=this;(null==t?void 0:t.type)!==s.FIRECRACKER&&(null==t?void 0:t.type)!==s.MISSILE||(t.add_props&&t.add_props.forEach(function(t){e._awards.push({propID:Number(t.propid),count:t.count})}),t.add_sr&&this._awards.push({propID:"sr2",count:t.add_sr}),t.add_yb&&this._awards.push({propID:"yb5",count:t.add_yb})),(null==t?void 0:t.type)===s.BIG_GIFT&&(this.playComposeAni(function(){var e={prop:{},sr:0,yb:0};t.add_props&&t.add_props.forEach(function(t){e.prop[Number(t.propid)]=t.count}),e.sr=t.add_sr,e.yb=t.add_yb;var n=p.AwardModel.instance.getAwardsFormat(p.AwardModel.instance.adaptAwardsFormat(e));u.UIManager.instance.open(h.AwardUI).then(function(t){t.init(n)})}),E.LoginModel.instance.queryUserProfile(null))},e.prototype.onYearBeastTaskInfo=function(){this.updateTodayGainCnt()},e.prototype.onDestroy=function(){this.stopAllTweenTargets(),t.prototype.onDestroy.call(this)},e.prototype.onBtnCloseClick=function(){y.BfasManager.instance.sendEvt(I.YearBeastPointID.CLICK_CLOSE),this.onExitClick()},e.prototype.onBtnRuleClick=function(){y.BfasManager.instance.sendEvt(I.YearBeastPointID.CLICK_RULE),u.UIManager.instance.open(b.YearBeastRuleUI)},e.prototype.onBtnTaskClick=function(){this.isActivityEnd()||(this.model.curBlood<=0?l.EventManager.instance.emit(f.DataEvent.ToastData,"\u60a8\u5df2\u6210\u529f\u5b8c\u6210\u6253\u5012\u5e74\u517d\u4efb\u52a1\u5566~"):(y.BfasManager.instance.sendEvt(I.YearBeastPointID.CLICK_TASK),this.openYearBeastTaskUI()))},e.prototype.onBtnGainPropClick=function(){this.isActivityEnd()||this.model.curBlood<=0||(y.BfasManager.instance.sendEvt(I.YearBeastPointID.CLICK_GAIN_FIRECRACKER),this.openYearBeastTaskUI())},e.prototype.onBtnMyAwardClick=function(){this.isActivityEnd()||(y.BfasManager.instance.sendEvt(I.YearBeastPointID.CLICK_MY_AWARD),this.model.openAwardRecord())},e.prototype.onYearBeastItemClick=function(){this.model.curBlood<=0||(y.BfasManager.instance.sendEvt(I.YearBeastPointID.CLICK_YEAR_BEAST),this._isBubble||Math.random()>.3||this.isAnimating()||this.showBubble())},e.prototype.onBtnFirecrackerClick=function(){this.isActivityEnd()||this.model.curBlood<=0||this._isRequestAttacking||(y.BfasManager.instance.sendEvt(I.YearBeastPointID.CLICK_THROW_FIRECRACKER),A.UserInfoModel.instance.getPropCount(m.PropIDEnum.NEWYEAR_BIAN_PAO)<=0?l.EventManager.instance.emit(f.DataEvent.ToastData,"\u97ad\u70ae\u6570\u91cf\u4e0d\u8db3"):this.reqAttackYearBeast(m.PropIDEnum.NEWYEAR_BIAN_PAO))},e.prototype.onBtnMissileClick=function(){this.isActivityEnd()||this.model.curBlood<=0||this._isRequestAttacking||(y.BfasManager.instance.sendEvt(I.YearBeastPointID.CLICK_THROW_MISSILE),A.UserInfoModel.instance.getPropCount(m.PropIDEnum.NEWYEAR_MISSILE)<=0?l.EventManager.instance.emit(f.DataEvent.ToastData,"\u5bfc\u5f39\u6570\u91cf\u4e0d\u8db3"):this.reqAttackYearBeast(m.PropIDEnum.NEWYEAR_MISSILE))},e.prototype.onBtnComposeClick=function(){if(!this.isActivityEnd()){y.BfasManager.instance.sendEvt(I.YearBeastPointID.CLICK_COMPOSE);for(var t=0;t<T.length;t++)if(A.UserInfoModel.instance.getPropCount(T[t])<=0)return void l.EventManager.instance.emit(f.DataEvent.ToastData,"\u788e\u7247\u4e0d\u8db3\uff0c\u65e0\u6cd5\u5408\u6210~");this.model.reqComposeHappyNewYear()}},e.prototype.isActivityEnd=function(){return!this.model.isActive&&(l.EventManager.instance.emit(f.DataEvent.ToastData,"\u5e74\u517d\u6d3b\u52a8\u5df2\u7ed3\u675f~"),!0)},e.prototype.initUI=function(){this.adaptFullScreen(),this.initPosIndexes(),this.initBtnSweep(),this.initActivityTime(),this.initYearBeastAni(),this.initYearBeastBlood(),this.initShowDelayBubble(),this.updateTodayGainCnt(),this.updateFirecrackerAndMissile(),this.updateWords(),this.updateBigGiftGot()},e.prototype.adaptFullScreen=function(){if(M.UtilView.isFullScreen()){var t=_.DataConstant.ADAPTER_WIDTH_VALUE+36;this.view.m_Window.m_imgTitle.x+=t,this.view.m_Window.m_btnTask.x+=t,this.view.m_Window.m_Right.x=this.view.m_Window.width-t-this.view.m_Window.m_Right.width}},e.prototype.initPosIndexes=function(){for(var t=0;t<6;t++)this._posIndexes[t]=0},e.prototype.initBtnSweep=function(){this.model.isShowBtnSweep()&&C.UtilCC.instantiatePrefab(g.DataSpineAniPath.ANI_YEAR_BEAST_BTN_SWEEP,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"sweep",!1)},this.view.m_Window.m_btnFirecracker.m_spineNode.node)},e.prototype.initActivityTime=function(){this.view.m_Window.m_txtActivityTime.text="\u6d3b\u52a8\u65f6\u95f4\uff1a"+this.model.getActivityTimeStr()},e.prototype.initYearBeastAni=function(){var t=this,e=this.model.curBlood<=0;this.view.m_Window.m_center.m_yearBeastSpine.m_spineNode.node.removeAllChildren(),C.UtilCC.instantiatePrefab(g.DataSpineAniPath.ANI_YEAR_BEAST,function(n){t._yearBeastSkeleton=n.getComponent(sp.Skeleton),t._yearBeastSkeleton.setAnimation(0,e?"die":"daiji"+t.model.getYearBeastAniSuffix(),!e)},this.view.m_Window.m_center.m_yearBeastSpine.m_spineNode.node)},e.prototype.updateBigGiftGot=function(){this.view.m_Window.m_Right.m_cGotAward.selectedIndex=this.model.isBigGiftGot?1:0},e.prototype.playComposeAni=function(t){var e=this;this.view.m_Window.m_Right.m_cGotAward.selectedIndex=2,C.UtilCC.instantiatePrefab(g.DataSpineAniPath.ANI_YEAR_BEAST_COMPOSE,function(n){var o=n.getComponent(sp.Skeleton);o.setCompleteListener(function(n){"hecheng"===(n.animation?n.animation.name:"")&&(t&&t(),e.view.m_Window.m_Right.m_cGotAward.selectedIndex=1)}),o.setAnimation(0,"hecheng",!0)},this.view.m_Window.m_Right.m_spineNode.node)},e.prototype.updateTodayGainCnt=function(){var t=this.model.getTaskReceivedPropInfo();this.view.m_Window.m_txtGainCnt.text="\u4eca\u65e5\u5df2\u5f97\uff1a{0}/{1}".format(t.current,t.total)},e.prototype.updateFirecrackerAndMissile=function(){this.view.m_Window.m_txtFirecrackerCnt.text="\u5269\u4f59\uff1a{0}\u4e2a".format(A.UserInfoModel.instance.getPropCount(m.PropIDEnum.NEWYEAR_BIAN_PAO)),this.view.m_Window.m_txtMissileCnt.text="\u5269\u4f59\uff1a{0}\u4e2a".format(A.UserInfoModel.instance.getPropCount(m.PropIDEnum.NEWYEAR_MISSILE))},e.prototype.updateWords=function(){for(var t=0;t<T.length;t++){var e=A.UserInfoModel.instance.getPropCount(T[t]),n=this.view.m_Window.m_Right["m_word"+t];n.selected=e>0,n.m_cShowCnt.selectedIndex=e>1?1:0,this.view.m_Window.m_Right["m_txtWord"+t].text=e>1?"x"+e:""}this.updateBtnCompose()},e.prototype.updateBtnCompose=function(){var t=this.view.m_Window.m_Right.m_btnCompose;if(this.model.isBigGiftGot)t.visible=!1;else{for(var e=!1,n=0;n<T.length;n++)if(A.UserInfoModel.instance.getPropCount(T[n])<=0){e=!0;break}t.visible=!e}},e.prototype.initYearBeastBlood=function(){this.view.m_Window.m_center.m_bloodProgress.max=this.model.maxBlood,this.updateYearBeastBlood()},e.prototype.updateYearBeastBlood=function(){this.view.m_Window.m_center.m_bloodProgress.value=this.model.getProgressBlood(),this.view.m_Window.m_center.m_txtBlood.text="{0}/{1}".format(this.model.curBlood,this.model.maxBlood),this.view.m_Window.m_cGray.selectedIndex=this.model.curBlood>0?0:1},e.prototype.initShowDelayBubble=function(){var t=this;this.model.curBlood<=0||(this._delayCoroutine=c.CoroutineManager.instance.once(5,function(){t.showBubble()},this))},e.prototype.showBubble=function(){var t=this;this.stopDelayBubbleCoroutine(),this.stopBubbleCoroutine(),this._isBubble=!0;var e=Math.floor(Math.random()*S.length);this.view.m_Window.m_center.m_bubbleTip.title=S[e],this.view.m_Window.m_center.m_bubbleTip.visible=!0,this._bubbleCoroutine=c.CoroutineManager.instance.once(2,function(){t.hideBubble(),t._isBubble=!1},this)},e.prototype.hideBubble=function(){this.view.m_Window.m_center.m_bubbleTip.visible=!1,this.stopBubbleCoroutine()},e.prototype.stopDelayBubbleCoroutine=function(){this._delayCoroutine&&(c.CoroutineManager.instance.stopCo(this._delayCoroutine),this._delayCoroutine=null)},e.prototype.stopBubbleCoroutine=function(){this._bubbleCoroutine&&(c.CoroutineManager.instance.stopCo(this._bubbleCoroutine),this._bubbleCoroutine=null)},e.prototype.openYearBeastTaskUI=function(){this.model.openTask()},e.prototype.reqAttackYearBeast=function(t){var e=this;this._isRequestAttacking=!0,this.model.reqAttackYearBeast(t,function(n){e._isRequestAttacking=!1,n&&(e.stopDelayBubbleCoroutine(),e.hideBubble(),e.playThrowPropAni(t))})},e.prototype.playThrowPropAni=function(t){t===m.PropIDEnum.NEWYEAR_BIAN_PAO?this.playThrowFirecrackerAni():this.playThrowMissileAni()},e.prototype.playThrowFirecrackerAni=function(){var t=this,e=this.getFlyProp();e.visible=!1,this.addToTweenTarget(e),e.setPosition(this.view.m_Window.m_btnFirecracker.x+this.view.m_Window.m_btnFirecracker.width/2-e.width/2,this.view.m_Window.m_btnFirecracker.y+this.view.m_Window.m_btnFirecracker.height/2-e.height/2);var n=this.view.m_Window.m_center.x+this.view.m_Window.m_center.width/2-e.width/2,o=this.view.m_Window.m_center.y+this.view.m_Window.m_center.height/2-200;cc.tween(e).call(function(){e.visible=!0,C.UtilCC.instantiatePrefab(g.DataSpineAniPath.ANI_YEAR_BEAST_FIRECRACKER,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"bianpao",!1)},e.m_spineNode.node)}).to(.5,{x:n,y:o},{easing:"sineOut"}).call(function(){cc.Tween.stopAllByTarget(e),t.removeFromTweenTarget(e),t.addToFlyPropPool(e),t.playYearBeastAttacked(m.PropIDEnum.NEWYEAR_BIAN_PAO)}).start()},e.prototype.playThrowMissileAni=function(){var t=this,e=this.getFlyProp();this.addToTweenTarget(e),e.setPosition(this.view.m_Window.m_btnMissile.x+this.view.m_Window.m_btnMissile.width/2-e.width/2,this.view.m_Window.m_btnMissile.y+this.view.m_Window.m_btnMissile.height/2-e.height/2);var n=this.view.m_Window.m_center.y+this.view.m_Window.m_center.height/2-e.height/2-120;e.visible=!1,cc.tween(e).delay(.067).call(function(){e.visible=!0,C.UtilCC.instantiatePrefab(g.DataSpineAniPath.ANI_YEAR_BEAST_MISSILE,function(t){t.getComponent(sp.Skeleton).setAnimation(0,"daodan",!1)},e.m_spineNode.node)}).delay(.333).to(.167,{y:n}).call(function(){cc.Tween.stopAllByTarget(e),t.removeFromTweenTarget(e),t.addToFlyPropPool(e),t.playYearBeastAttacked(m.PropIDEnum.NEWYEAR_MISSILE)}).start()},e.prototype.playYearBeastAttacked=function(t){this.playAttackedAni(),this.playDamageTip(t),this.playBombAni(t),this.playAwardItemAni(),this.updateYearBeastBlood()},e.prototype.playAttackedAni=function(){var t=this;if(this.model.curBlood>0){var e=this.model.getYearBeastAniSuffix();this._yearBeastSkeleton.setCompleteListener(function(n){var o=n.animation?n.animation.name:"";"beiji"+e===o&&t._yearBeastSkeleton.setAnimation(0,"daiji"+e,!0)}),this._yearBeastSkeleton.setAnimation(0,"beiji"+e,!1)}else this._yearBeastSkeleton.setCompleteListener(null),this._yearBeastSkeleton.setAnimation(0,"die",!1)},e.prototype.playDamageTip=function(t){var e=this,n=this.model.getPropDamage(t);if(!(n<=0)){var o=this.getDamageTip(),a=this.view.m_Window.m_center.x+this.view.m_Window.m_center.width/2-o.width/2,i=this.view.m_Window.m_center.y+this.view.m_Window.m_center.height-o.height/2;o.setPosition(a,i),this.addToTweenTarget(o),o.title="-"+n,cc.tween(o).to(.3,{y:i-100},{easing:"quintOut"}).call(function(){cc.Tween.stopAllByTarget(o),e.removeFromTweenTarget(o),e.addToDamageTipPool(o)}).start()}},e.prototype.playBombAni=function(t){var e=this,n=this.getFlyProp();t===m.PropIDEnum.NEWYEAR_BIAN_PAO&&n.setScale(.5,.5),n.setPosition(this.view.m_Window.m_center.x+this.view.m_Window.m_center.width/2-n.width/2,this.view.m_Window.m_center.y+this.view.m_Window.m_center.height/2-n.height/2),C.UtilCC.instantiatePrefab(g.DataSpineAniPath.ANI_YEAR_BEAST_BOMB,function(t){var o=t.getComponent(sp.Skeleton);o.setCompleteListener(function(t){"baodian"===(t.animation?t.animation.name:"")&&(n.setScale(1,1),e.addToFlyPropPool(n))}),o.setAnimation(0,"baodian",!1)},n.m_spineNode.node)},e.prototype.playAwardItemAni=function(){var t=this,e=this._awards.shift();if(e){var n=m.DataProps.instance.getPropConfigByID(e.propID);if(n){var o=this.getAwardItem();o.icon=v.UIHelp.getPropIcon(n.type,n.res);var a=this.getAwardItemPos();o.setPosition(a.x-o.width/2,a.y-o.height/2),this.addToTweenTarget(o);var i=this.view.m_Window.m_btnMyAward.x+this.view.m_Window.m_btnMyAward.width/2-o.width/2,r=this.view.m_Window.m_btnMyAward.y+this.view.m_Window.m_btnMyAward.height/2-o.height/2;o.setScale(0,0),cc.tween(o).delay(.1).to(.2,{scaleX:1.2,scaleY:1.2},{easing:"sineInOut"}).to(.1,{scaleX:1,scaleY:1},{easing:"sineIn"}).delay(.5).to(.2,{x:i,y:r},{easing:"cubicIn"}).call(function(){cc.Tween.stopAllByTarget(o),t.removeFromTweenTarget(o),t.addToAwardItemPool(o),t.playMyAwardAni(),t.playAwardTip(a.index,n.name+"x"+e.count),t.checkGainWord(e.propID)}).start()}}},e.prototype.getAwardItemPos=function(){for(var t=0;;t++)for(var e=0;e<6;e++)if(this._posIndexes[e]===t){var n=this.view.m_Window["m_awardPos"+e].x+this.view.m_Window["m_awardPos"+e].width/2,o=this.view.m_Window["m_awardPos"+e].y+this.view.m_Window["m_awardPos"+e].height/2;return++this._posIndexes[e],{x:n,y:o,index:e}}},e.prototype.checkGainWord=function(t){t!==m.PropIDEnum.NEWYEAR_CARD_XIN&&t!==m.PropIDEnum.NEWYEAR_CARD_NIAN&&t!==m.PropIDEnum.NEWYEAR_CARD_KUAI&&t!==m.PropIDEnum.NEWYEAR_CARD_LE||this.updateWords()},e.prototype.playMyAwardAni=function(){var t=this,e=this.getFlyProp();e.setPosition(this.view.m_Window.m_btnMyAward.x+this.view.m_Window.m_btnMyAward.width/2-e.width/2,this.view.m_Window.m_btnMyAward.y+this.view.m_Window.m_btnMyAward.height/2-e.height/2),C.UtilCC.instantiatePrefab(g.DataSpineAniPath.ANI_YEAR_BEAST_MY_AWARD,function(n){var o=n.getComponent(sp.Skeleton);o.setCompleteListener(function(n){"denglong"===(n.animation?n.animation.name:"")&&t.addToFlyPropPool(e)}),o.setAnimation(0,"denglong",!1)},e.m_spineNode.node)},e.prototype.playAwardTip=function(t,e){var n=this,o=this.getAwardTip();o.title=e,this.addToTweenTarget(o);var a=this.view.m_Window.m_btnMyAward.x+this.view.m_Window.m_btnMyAward.width/2-o.width/2,i=this.view.m_Window.m_btnMyAward.y+18-o.height/2;o.setPosition(a,i),cc.tween(o).to(.4,{x:a,y:i-30},{easing:"quartOut"}).call(function(){cc.Tween.stopAllByTarget(o),n.removeFromTweenTarget(o),n.addToAwardTipPool(o),--n._posIndexes[t]}).start()},e.prototype.isAnimating=function(){if(this._awards.length>0)return!0;for(var t in this._posIndexes)if(this._posIndexes[t]>0)return!0;return!1},e.prototype.getFlyProp=function(){var t=null;return this._flyPropPool.length>0?(t=this._flyPropPool.shift()).m_spineNode.node.removeAllChildren():(t=fgui.UIPackage.createObject("YearBeastUI","Prop")).setPivot(.5,.5),this.view.m_Window.addChild(t),t.visible=!0,t},e.prototype.addToFlyPropPool=function(t){t.visible=!1,t.m_spineNode.node.removeAllChildren(),t.removeFromParent(),this._flyPropPool.push(t)},e.prototype.getAwardItem=function(){var t=null;return this._awardItemPool.length>0?t=this._awardItemPool.shift():(t=fgui.UIPackage.createObject("YearBeastUI","AwardItem")).setPivot(.5,.5),this.view.m_Window.addChild(t),t.visible=!0,t},e.prototype.addToAwardItemPool=function(t){t.visible=!1,t.removeFromParent(),this._awardItemPool.push(t)},e.prototype.getAwardTip=function(){var t=null;return this._awardTipPool.length>0?t=this._awardTipPool.shift():(t=fgui.UIPackage.createObject("YearBeastUI","AwardTip")).setPivot(.5,.5),this.view.m_Window.addChild(t),t.visible=!0,t},e.prototype.addToAwardTipPool=function(t){t.visible=!1,t.removeFromParent(),this._awardTipPool.push(t)},e.prototype.getDamageTip=function(){var t=null;return this._damageTipPool.length>0?t=this._damageTipPool.shift():(t=fgui.UIPackage.createObject("YearBeastUI","DamageTip")).setPivot(.5,.5),this.view.m_Window.addChild(t),t.visible=!0,t},e.prototype.addToDamageTipPool=function(t){t.visible=!1,t.removeFromParent(),this._damageTipPool.push(t)},e.prototype.addToTweenTarget=function(t){this._tweenTargets.push(t)},e.prototype.removeFromTweenTarget=function(t){var e=this._tweenTargets.indexOf(t);-1!==e&&this._tweenTargets.splice(e,1)},e.prototype.stopAllTweenTargets=function(){var t,e;try{for(var n=r(this._tweenTargets),o=n.next();!o.done;o=n.next()){var a=o.value;a&&cc.Tween.stopAllByTarget(a)}}catch(i){t={error:i}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},i([jsClass],e)}(d.FadeUI);n.default=R,cc._RF.pop()},{"../../../Framework/Manager/CoroutineManager":"CoroutineManager","../../../Framework/Manager/EventManager":"EventManager","../../../Framework/Manager/UIManager":"UIManager","../../../Framework/UI/FadeUI":"FadeUI","../../Award/AwardModel":"AwardModel","../../Award/AwardUI":"AwardUI","../../Base/Data/DataConstant":"DataConstant","../../Base/Data/DataEvent":"DataEvent","../../Base/Data/DataProps":"DataProps","../../Base/Data/DataSpineAni":"DataSpineAni","../../Base/Module/BfAnalytics/BfasManager":"BfasManager","../../Base/Module/BfAnalytics/DataPointID":"DataPointID","../../Base/Utils/UtilCC":"UtilCC","../../Base/Utils/UtilView":"UtilView","../../Base/View/UIHelp":"UIHelp","../../Login/LoginModel":"LoginModel","../../UserInfo/UserInfoModel":"UserInfoModel","./YearBeastModel":"YearBeastModel","./YearBeastRuleUI":"YearBeastRuleUI","./YearBeastUI/YearBeastUIBinder":"YearBeastUIBinder"}],_IPlatform:[function(t,e,n){"use strict";cc._RF.push(e,"684c0BFx8JJioU/cBTePTPu","_IPlatform"),Object.defineProperty(n,"__esModule",{value:!0}),n.WhatsNewSubscriptionsErrorEnum=n.WhatsNewSubscriptionsStatusEnum=n.CustomerRequestTypeEnum=void 0,function(t){t[t.IOS_PAYMENT=1]="IOS_PAYMENT",t[t.CUSTOMER_SERVICE=2]="CUSTOMER_SERVICE",t[t.WECHAT_GROUP=3]="WECHAT_GROUP"}(n.CustomerRequestTypeEnum||(n.CustomerRequestTypeEnum={})),function(t){t[t.NONE=0]="NONE",t[t.CAN_SUBSCRIBE=1]="CAN_SUBSCRIBE",t[t.SUBSCRIBE_OK=2]="SUBSCRIBE_OK",t[t.SUBSCRIBE_LIMIT=3]="SUBSCRIBE_LIMIT",t[t.SUBSCRIBE_PROHIBI=4]="SUBSCRIBE_PROHIBI"}(n.WhatsNewSubscriptionsStatusEnum||(n.WhatsNewSubscriptionsStatusEnum={})),function(t){t[t.NONE=0]="NONE",t[t.SYSTEM_ERROR=1]="SYSTEM_ERROR",t[t.USER_SUBSCRIBED=2]="USER_SUBSCRIBED",t[t.SUBSCRIBE_LIMIT=3]="SUBSCRIBE_LIMIT",t[t.NO_PERMISSION=4]="NO_PERMISSION"}(n.WhatsNewSubscriptionsErrorEnum||(n.WhatsNewSubscriptionsErrorEnum={})),cc._RF.pop()},{}]},{},["ActivityAdPopModel","ActivityAdPopUI","ActivityAdPopUIBinder","ActivityAdPopUI_BtnSpineYellow","ActivityAdPopUI_MainPanel","ActivityAdPopUI_Window","ActivityShareModel","ActivityShareProxy","ActivityShareUI","ActivityShareUIBinder","ActivityShareUI_BtnSpineYellow","ActivityShareUI_MainPanel","ActivityShareUI_Window","ActivityCenterConfig","ActivityCenterModel","ActivityCenterProxy","ActivityCenterUI","ActivityConfig","ActivityModel","ActivityUI","ActivityUIBinder","ActivityUI_CompDesc","ActivityUI_MainPanel","ActivityUI_TapBtn1","ActivityUI_TapBtn2","ActivityUI_Window","ActivityUI_contentComp","ActivityUI_subscribeComp","AdModel","AdProxy","VideoAdManager","CollectProxy","CollectUI","CollectUIBinder","CollectUI_MainPanel","CollectUI_Window","ActivityComModel","ActivityComProxy","InviteGiftModel","InviteGiftProxy","InviteGiftUI","InviteGiftUIBinder","InviteGiftUI_CompAward","InviteGiftUI_CompHead","InviteGiftUI_CompItem","InviteGiftUI_CompProgress","InviteGiftUI_MainPanel","InviteGiftUI_Window","NewPlayerGiftUI","NewPlayerGiftUIBinder","NewPlayerGiftUI_BtnSpineYellow","NewPlayerGiftUI_MainPanel","NewPlayerGiftUI_Window","NewPlayerGiftUI_awardItem","AnswerAwardUI","AnswerAwardUIBinder","AnswerAwardUI_AwardItem","AnswerAwardUI_MainPanel","AnswerAwardUI_Window","AnswerAwardUI_contentPanel","AnswerAwardUI_sweep_jiangli","QuestionnaireConifg","QuestionnaireModel","QuestionnaireProxy","QuestionnaireUI","QuestionnaireUIBinder","QuestionnaireUI_MainPanel","QuestionnaireUI_Window","QuestionnaireUI_contentPanel","QuestionnaireUI_lastPage","TenYearActivityModel","TenYearActivityProxy","TenYearActivityUI","TenYearActivityUIBinder","TenYearActivityUI_MainPanel","TenYearActivityUI_Window","TenYearBoxModel","TenYearBoxProxy","TenYearBoxUI","TenYearBoxUIBinder","TenYearBoxUI_MainPanel","TenYearBoxUI_Window","YearBeastModel","YearBeastProxy","YearBeastRecordUI","YearBeastRuleUI","YearBeastSecondaryUIBinder","YearBeastSecondaryUI_CompAwardItem","YearBeastSecondaryUI_CompRecordItem","YearBeastSecondaryUI_CompTaskItem","YearBeastSecondaryUI_MainPanel","YearBeastSecondaryUI_RecordMainPanel","YearBeastSecondaryUI_RecordWindow","YearBeastSecondaryUI_RuleMainPanel","YearBeastSecondaryUI_RuleWindow","YearBeastSecondaryUI_Window","YearBeastTaskUI","YearBeastUI","YearBeastUIBinder","YearBeastUI_BtnFirecracker","YearBeastUI_Center","YearBeastUI_MainPanel","YearBeastUI_Prop","YearBeastUI_RightPanel","YearBeastUI_Window","YearBeastUI_Word","YearBeastUI_YearBeastSpine","AnnouncementModel","AnnouncementProxy","AnnouncementUI","AnnouncementUIBinder","AnnouncementUI_MainPanel","AnnouncementUI_TextContent","AnnouncementUI_Window","AwardModel","AwardUI","AwardUINewPlayer","AwardUIBinder","AwardUI_AwardItem","AwardUI_MainPanel","AwardUI_MainPanelNewPlayer","AwardUI_NewPlayer","AwardUI_Window","AwardUI_sweep_jiangli","BankruptModel","BankruptProxy","BankruptUI","BankruptUIBinder","BankruptUI_BtnSpineYellow","BankruptUI_MainPanel","BankruptUI_Window","DataAdChannel","DataBfConfig","DataClubClientConfig","DataConstant","DataEvent","DataLocalStorageKey","DataProps","DataRes","DataScript","DataSound","DataSpineAni","DatazOrder","LogicApiHub","AppShowOptionsModel","LogicBehaviorBranch","BaseBfas","BfasManager","DataPointID","ErrorCodeDbpConfig","ErrorCodeGameConfig","ErrorCodeLobbyConfig","BaseGameProtocol","BaseLobbyProtocol","IProtocol","Processid","ProtocolManager","ConnectingManager","Socket33","SocketEventType","SocketUtils","AuthProtocol","AwardProtocol","ClubGameProtocol","ClubLobbyProtocol","CommonProtocol","CustGuanDanProcess","IMProtocol","SrsProtocol","OpenDataContextManager","LogicHummerPay","PlatformEventType","Scope","DevelopPlatform","MeiTuanPlatform","MiniGamePlatform","PlatformManager","SkyWingPlatform","StrongArmyPlatform","_IPlatform","PopupConfig","PopupManager","PropModule","ClubConfig","RoomModel","RoomProxy","RoomRecommondAss","ServerListenerModel","ServerListenerProxy","ShareManager","ShareProxy","UtilCC","UtilClub","UtilFgui","UtilString","UtilTime","UtilTool","UtilView","DialogUI","LoadingUI","MarqueeUI","PrivacyDialogUI","ToastModel","ToastUI","UIHelp","BoxRecordUI","CreateRoomConfig","AnalysisRoomConfigCreateUI","CreateRoomConfigModel","CreateRoomManagerModel","CreateRoomUIModel","HistoryUIModel","JoinRoomUIModel","CreateRoomUI","CreateRoomUIBinder","CreateRoomUI_BoxRecordMainPanel","CreateRoomUI_BoxRecordwindow","CreateRoomUI_FriendRoomUI","CreateRoomUI_HeadGCom","CreateRoomUI_History_item","CreateRoomUI_History_lineScore","CreateRoomUI_History_recordDetail","CreateRoomUI_History_recordScoreLine","CreateRoomUI_History_recordTitle","CreateRoomUI_History_recordWithRound","CreateRoomUI_History_roundTotalScore","CreateRoomUI_History_tab","CreateRoomUI_LogoImg","CreateRoomUI_MainPanel","CreateRoomUI_QiPaoPanel","CreateRoomUI_RoomNumBtn","CreateRoomUI_Tab_createRoomUI","CreateRoomUI_Tab_historyUI","CreateRoomUI_Tab_joinRoomUI","CreateRoomUI_TapBtn","CreateRoomUI_createPanel","ExchangeDetailUI","ExchangeDetailUIBinder","ExchangeDetailUI_MainPanel","ExchangeDetailUI_Window","ExchangeModel","ExchangeProxy","ExchangeRecordUI","ExchangeRecordUIBinder","ExchangeRecordUI_ExcRecordItem","ExchangeRecordUI_MainPanel","ExchangeRecordUI_Window","ExchangeShopRuleUI","ExchangeShopUI","ExchangeShopUIBinder","ExchangeShopUI_Left","ExchangeShopUI_MainPanel","ExchangeShopUI_MainPanel_Rule","ExchangeShopUI_TabBtn","ExchangeShopUI_Top","ExchangeShopUI_Window","ExchangeShopUI_Window_Rule","ExchangeShopUI_shopItem","ExchangeSureCardUI","ExchangeSureEntityUI","ExchangeUI","ExchangeUIBinder","ExchangeUI_ExchangeItem","ExchangeUI_MainPanel","ExchangeUI_Window","ExchangeWelfareUI","ExchangeWelfareUIBinder","ExchangeWelfareUI_Card_MainPanel","ExchangeWelfareUI_Card_Window","ExchangeWelfareUI_Entity_MainPanel","ExchangeWelfareUI_Entity_Window","ExchangeWelfareUI_MainPanel","ExchangeWelfareUI_Window","ExchangeWelfareUI_btnTab","ExchangeWelfareUI_recordItem","FeedBackSuggModel","FeedBackSuggProxy","FeedBackSuggUI","FeedBackUI","FeedBackUIBinder","FeedBackUI_MainPanel","FeedBackUI_SuggMainPanel","FeedBackUI_SuggWindow","FeedBackUI_Window","ForbidUserModel","ForbidUserUI","ForbidUserUIBinder","ForbidUserUI_MainPanel","ForbidUserUI_Window","FriendInviteUI","FriendInviteUIBinder","FriendInviteUI_MainPanel","FriendInviteUI_Window","FriendModel","FriendTeamGuideUI","FriendTeamGuideUIBinder","FriendTeamGuideUI_Finger","FriendTeamGuideUI_Guide","FriendTeamGuideUI_GuideNew","FriendTeamGuideUI_MainPanel","FriendTeamGuideUI_Window","FriendTeamJoinUI","FriendTeamJoinUIBinder","FriendTeamJoinUI_ButtonNum","FriendTeamJoinUI_MainPanel","FriendTeamJoinUI_Window","FriendTeamModel","FriendTeamProxy","FriendTeamQuickInviteUI","FriendTeamQuickInviteUIBinder","FriendTeamQuickInviteUI_InviteComp","FriendTeamQuickInviteUI_MainPanel","FriendTeamQuickInviteUI_Window","FriendTeamRecordUI","FriendTeamRecordUIBinder","FriendTeamRecordUI_CompHead","FriendTeamRecordUI_CompItem","FriendTeamRecordUI_MainPanel","FriendTeamRecordUI_Window","FriendTeamUI","FriendTeamUIBinder","FriendTeamUI_BtnQuickStartHint","FriendTeamUI_BtnShout","FriendTeamUI_BtnShoutNew","FriendTeamUI_Center","FriendTeamUI_ChooseModeComp","FriendTeamUI_InviteComp","FriendTeamUI_LeftTabBtn","FriendTeamUI_MainPanel","FriendTeamUI_PlayerInfo","FriendTeamUI_QuickInviteComp","FriendTeamUI_Top","FriendTeamUI_WaitStartHint","FriendTeamUI_Window","FriendTeamUI_WindowLeader","FriendTeamUI_WindowMember","FriendTeamUI_playTypeItem","DefaultPokerCardsConst","HandCardsLogic","LogicRule","PlayCards","PlayCardsParse","PlayCardsParseRule","PokerAlgorithm","CardConstants","CardFunc","CardGamingData","CardRuleDef","ToolLuaFunc","DeclareType","BigCardShare","BigCardShareBinder","BigCardShare_MainPanel","BigCardShare_window","BuyNoteCardModel","BuyNoteCardUI","BuyNoteCardUIBinder","BuyNoteCardUI_MainPanel","BuyNoteCardUI_buyPrice","BuyNoteCardUI_compDiscount","BuyNoteCardUI_noteCardItem","BuyNoteCardUI_window","GameChatRecordModel","GameChatRecordProxy","GameChatRecordUI","GameChatRecordUIBinder","GameChatRecordUI_MainPanel","GameChatRecordUI_Window","GameChatRecordUI_record","GameChatModel","GameChatUI","GameChatUIBinder","GameChatUI_BtnLimitEmoji","GameChatUI_ChatWindow","GameChatUI_MainPanel","GameCommonModel","GameCommonProxy","GameControlEnum","GameGuideButtonUI","GameGuideModel","GameGuideUI","GameGuideUIBinder","GameGuideUI_GameGuideButtonUI","GameGuideUI_MainPanel","GameGuideUI_windows","GameJSUI","GameJSUIBinder","GameJSUI_MainPanel","GameJSUI_Player","GameJSUI_window","GameMatchingForMatchUI ","GameMatchingForNormalUI","GameMatchingUIBinder","GameMatchingUI_MainPanel","GameMatchingUI_MatchMainPanel","GameMatchingUI_Matching","GameMatchingUI_matchWait","GameMixPassADismissModel","GameMixPassADismissUI","GameMixPassADismissUIBinder","GameMixPassADismissUI_MainPanel","GameMixPassADismissUI_Player","GameMixPassADismissUI_Window","GameMultTaskModel","GameMultTaskProxy","GameMultTaskUI","GameMultTaskUIBinder","GameMultTaskUI_AwardItem","GameMultTaskUI_BtnPlaza","GameMultTaskUI_CompRule","GameMultTaskUI_MainPanel","GameMultTaskUI_Window","GameMatchResultUI","GameResultUI","GameResultUIBinder","GameResultUI_DaYingJia","GameResultUI_MainPanel","GameResultUI_MainPanel_Match","GameResultUI_PlayerInfo","GameResultUI_PlayerInfos","GameResultUI_Player_Match","GameResultUI_Players_Match","GameResultUI_sweep_dayingjia","GameSharePopModel","GameShopUI","GameShopUIBinder","GameShopUI_BtnShopItem","GameShopUI_Left","GameShopUI_MainPanel","GameShopUI_TabBtn","GameShopUI_windows","GameWinMoreModel","GameWinMoreUI","GameWinMoreUIBinder","GameWinMoreUI_Button","GameWinMoreUI_MainPanel","GameWinMoreUI_window","PassLevelTaskModel","PassLevelTaskProxy","PlayerInfoModel","RealTimeVoiceModel","GuideDescUI","GuideUI","GuideUIBinder","GuideUI_DescComponent","GuideUI_GuideDescUI","GuideUI_GuideUI","GuideUI_MainPanel","ChangeSeatUI","GameBoxDelayPannleUI","CardCommonFunc","GameCardUIData","GameCardUILeftOutModel","GameCardUIOutModelBase","GameCardUIRightOutModel","GameCardUISelfHandModel","GameCardUISelfOutModel","GameCardUITestHandModel","GameCardUITopOutModel","GameGuideCardUISelfHandModel","ManagerOutModel","GameCardUI","CardUIBase","CardUIOut","CardUISelfHand","CardUISelfTestHand","GameCardUIBinder","GameCardUI_CardUI_Out","GameCardUI_HandCardUI","GameCardUI_HandCardUI_Heng","GameCardUI_HandCardUI_Shu","GameCardUI_MainPanel","GameCardUI_OutCards_Left","GameCardUI_OutCards_Right","GameCardUI_OutCards_Self","GameCardUI_OutCards_Top","GameCardUI_SelectCardsPanel","GameCardUI_SelfHandCards","GameCardUI_TestSelfHandCards","GameContinueTableModel","GameContinueTableUI","GameContinueTableUIBinder","GameContinueTableUI_MainPanel","GameContinueTableUI_Window","GameEvent","GameGuideCardUI","GameMakeCardUI","GameSceneFreeTeamUI","GameSceneGoldTeamUI","GameSceneMatchUI","GameSceneUI","GameSceneUIBinder","GameSceneUI_Bottom","GameSceneUI_BoxDelayHintMainPanel","GameSceneUI_BoxInfo","GameSceneUI_BtnPassLevelTask","GameSceneUI_ButtonGroup","GameSceneUI_CardHead","GameSceneUI_ChangeSeat","GameSceneUI_ChangeSeatWindow","GameSceneUI_ChatRecordBubble","GameSceneUI_Clock","GameSceneUI_Flag","GameSceneUI_GiftButton","GameSceneUI_Head","GameSceneUI_HeadAni","GameSceneUI_HeadH","GameSceneUI_HeadSelf","GameSceneUI_HeadV","GameSceneUI_LevelUp","GameSceneUI_MainPanel","GameSceneUI_Menu","GameSceneUI_NoteCardLayer","GameSceneUI_NumText","GameSceneUI_PannelPassLevelTask","GameSceneUI_PointLayer","GameSceneUI_PropPanel","GameSceneUI_RightTopBar","GameSceneUI_ShowImage","GameSceneUI_SimpleButton","GameSceneUI_TimePanel","GameSceneUI_TongHuaShunBar","GameSceneUI_TopLeftBar","GameSceneUI_Tp_Result","GameSceneUI_YearBeastButton","GameSceneUI_adaptCallMultAni","GameSceneUI_boxPanelDelayGame","GameSceneUI_boxTurnData","GameSceneUI_btnTHS","GameSceneUI_bubbleDelayHint","GameSceneUI_callMultTag","GameSceneUI_gold","GameSceneUI_hpProgressBar","GameSceneUI_ruleGuide","GameSceneUI_waitAni","GameSceneUI_waitLeaderReady","GameTestUI","GameTestUIBinder","GameTestUI_MainPanel","GameTestUI_testComp","GameTrustUI","GameTrustUIBinder","GameTrustUI_MainPanel","GameUI","GameUIBinder","GameUI_MainPanel","GuanDanCardLogic","GameModel","GameProxy","GameTableProxy","BaseProtocol","CardProtocol","GDProtocol","HallGroundModel","HallGroundUI","HallGroundUIBinder","HallGroundUI_BtnStart","HallGroundUI_ButtonGround","HallGroundUI_ButtonGroundList","HallGroundUI_GroundTypeBtn","HallGroundUI_GroundTypeList","HallGroundUI_MainPanel","HallModel","HallProxy","HallUI","HallUIBinder","HallUI_Avatar","HallUI_BottomSimpleButton","HallUI_BtnStart","HallUI_HallBtm","HallUI_HallLeft","HallUI_HallRight","HallUI_HallTop","HallUI_MainPanel","HallUI_MatchStartHints","HallUI_NoAvatarBubble","HallUI_PlayerInfo","HallUI_ScoreBar","HallUI_SimpleButton","HallUI_SimpleSpineButton","HallUI_btn2Classical","HallUI_btn2ErRen","HallUI_btn2Mult","HallUI_btn2NoShuffle","HallUI_btn2TTZ","HallUI_btnAdd","HallUI_btnClassical","HallUI_btnFriend","HallUI_btnFriendTeam","HallUI_btnGDMatch","HallUI_btnMall","HallUI_btnMatchStartHint","HallUI_btnMore","HallUI_btnMult","HallUI_layerHall","HallUI_layerHall2","LoginModel","LoginProxy","LoginUI","LoginUIBinder","LoginUI_MainPanel","LoginUI_btnEmpty","LoginUI_checkBoxPrivacyComp","LoginUI_lbLoding","LoginUI_window","LuckyTurnTableModel","LuckyTurnTableProxy","LuckyTurnTableUI","LuckyTurnTableUIBinder","LuckyTurnTableUI_MainPanel","LuckyTurnTableUI_Window","LuckyTurnTableUI_btnStartBase","LuckyTurnTableUI_lightArrowComp","LuckyTurnTableUI_lightComp","LuckyTurnTableUI_ruleComp","MailModel","MailProxy","MailUI","MailUIBinder","MailUI_MainPanel","MailUI_Window","MailUI_awardItem","MailUI_mailContent","MailUI_mailItem","MatchExchangeTicketUI","MatchShareAssistUI","MatchShareAssistUIBinder","MatchShareAssistUI_MainPanel","MatchShareAssistUI_Window","MatchShareCreditUI","MatchShareFreeTicketUI","MatchShareGoldenEggUI","MatchShareGoldenEggUIBinder","MatchShareGoldenEggUI_Btn","MatchShareGoldenEggUI_BtnAdd","MatchShareGoldenEggUI_InviteItem","MatchShareGoldenEggUI_MainPanel","MatchShareGoldenEggUI_Window","MatchShareHighRankUI","MatchShareHighRankUIBinder","MatchShareHighRankUI_AwardItem","MatchShareHighRankUI_Awards","MatchShareHighRankUI_ExtraTip","MatchShareHighRankUI_MainPanel","MatchShareHighRankUI_Window","MatchShareLowRankUI","MatchShareLowRankUIBinder","MatchShareLowRankUI_AwardItem","MatchShareLowRankUI_ExtraTip","MatchShareLowRankUI_MainPanel","MatchShareLowRankUI_Window","MatchShareModel","MatchShareNoRankUI","MatchShareNoRankUIBinder","MatchShareNoRankUI_ExtraTip","MatchShareNoRankUI_MainPanel","MatchShareNoRankUI_Window","MatchShareProxy","MatchShareSignInAwardUI","MatchShareSignInAwardUIBinder","MatchShareSignInAwardUI_MainPanel","MatchShareSignInAwardUI_Window","MatchShareSignInAwardUI_btnShare","MatchShareSignInNormalUI","MatchShareSignInNormalUIBinder","MatchShareSignInNormalUI_MainPanel","MatchShareSignInNormalUI_Window","MatchShareSignInNormalUI_btnShare","MatchShareSkyFallTicketUI","MatchShareSkyFallTicketUIBinder","MatchShareSkyFallTicketUI_BtnAward","MatchShareSkyFallTicketUI_MainPanel","MatchShareSkyFallTicketUI_Window","MatchShareTicketUI","MatchShareUIBinder","MatchShareUI_MatchExchangeTicketUI","MatchShareUI_MatchExchangeTicketUI_MainPanel","MatchShareUI_MatchShareCreditUI","MatchShareUI_MatchShareCreditUI_MainPanel","MatchShareUI_MatchShareFreeTicketUI","MatchShareUI_MatchShareFreeTicketUI_MainPanel","MatchShareUI_MatchShareTicketUI","MatchShareUI_MatchShareTicketUI_MainPanel","MatchShareUI_btnExchange","MatchShareUI_btnShare","MatchAwardDetailUI","MatchAwardDetailUIBinder","MatchAwardDetailUI_MainPanel","MatchAwardDetailUI_Window","MatchAwardDetailUI_awardIcon","MatchAwardDetailUI_awardItem","MatchConstant","MatchGuideUI","MatchGuideUIBinder","MatchGuideUI_MainPanel","MatchGuideUI_Window","CountDownUI","LongCountDownUI","MatchHintUIBinder","MatchHintUI_CountDownUI_MainPanel","MatchHintUI_CountDownUI_Window","MatchHintUI_LongCountDownUI_MainPanel","MatchHintUI_LongCountDownUI_Window","MatchHintUI_TimeMatchTopHint_MainPanel","MatchHintUI_TimeMatchTopHint_Window","MatchHintUI_TopHintUI_MainPanel","MatchHintUI_TopHintUI_Window","TimeMatchTopHint","TopHintUI","MatchModel","MatchProxy","MatchRankUI","MatchRankUIBinder","MatchRankUI_FinalRankListItem","MatchRankUI_MainPanel","MatchRankUI_NormalRankListItem","MatchRankUI_RoundButton","MatchRankUI_Window","MatchRuleUI","MatchRuleUIBinder","MatchRuleUI_MainPanel","MatchRuleUI_Window","MatchUI","MatchUIBinder","MatchUI_AwardInfo","MatchUI_BtnShareActivity","MatchUI_EnrollButton","MatchUI_Exchange","MatchUI_ExchangeWordItem","MatchUI_MainPanel","MatchUI_MatchBottom","MatchUI_MatchInfo","MatchUI_MatchItem","MatchUI_MatchRound","MatchUI_MatchSign","MatchUI_MatchStartAni","MatchUI_MatchTableItem","MatchUI_MatchTypeButton","MatchUI_Matchlist","MatchUI_RoundButton","MatchUI_RoundPlayer","MatchUI_RoundPlayerItem","MatchUI_Title","MatchUI_Window","MatchUI_titleButton","MatchUtils","MergeNumHintUI","MergeNumHintUIBinder","MergeNumHintUI_MainPanel","MergeNumHintUI_Window","PayWithCustomerUI","PayWithCustomerUIBinder","PayWithCustomerUI_BgAnim","PayWithCustomerUI_MainPanel","RuleAgreementUI","RuleAgreementUIBinder","RuleAgreementUI_MainPanel","RuleAgreementUI_Window","ActivityActRuleUI","ActivityRuleUI","ActivityRuleUIBinder","ActivityRuleUI_MainPanel","ActivityRuleUI_MainPanel_ActRule","ActivityRuleUI_Window","RuleUI","RuleUIBinder","RuleUI_MainPanel","RuleUI_Window","GuanDanGameSettingUI","SettingModel","SettingUI","SettingUIBinder","SettingUI_GuanDanGameSettingPanel","SettingUI_GuanDanGameSettingWindow","SettingUI_MainPanel","SettingUI_RadioButton","SettingUI_Window","ShopConfig","ShopModel","ShopProxy","ShopUI","ShopUIBinder","ShopUI_Left","ShopUI_MainPanel","ShopUI_TabBtn","ShopUI_Top","ShopUI_Window","ShopUI_shopItem","SignActivityModel","SignActivityProxy","SignInActivityUI","SignInActivityUIBinder","SignInActivityUI_BtnYellowNoSpace","SignInActivityUI_MainPanel","SignInActivityUI_Window","SignInActivityUI_btnAwardState","GuanDanGameUserInfoUI","UserInfoModel","UserInfoProxy","UserInfoUI","UserInfoUIBinder","UserInfoUI_Avatar","UserInfoUI_GuanDanGameUserInfoMainPanel","UserInfoUI_GuanDanGameUserInfoWindow","UserInfoUI_HeadGCom","UserInfoUI_MainPanel","UserInfoUI_MeiLiComp","UserInfoUI_Window","WaitingUI","WelfareUI","WelfareUIBinder","WelfareUI_MainPanel","WelfareUI_SimpleButton","WelfareUI_Window","ABTestManager","AudioManager","BaseManager","CoroutineManager","EventManager","SubpackagesManager","UIManager","BaseModel","BaseProxy","BaseRoot","GameRoot","ManagerRoot","ModelRoot","ProxyRoot","BaseUI","FadeUI","Assert","AsyncBox","Base64","CatmullRom","Curve","CocosCreatorFix","ConsoleExtension","FairyGUIExtension","FairyGUIFix","HttpUtil","LinkedList","StringBuilder","TimeSpan","WebSocketPlus","Main","ResizeToScreen","SpriteContainer"]);
//# sourceMappingURL=index.js.map
 
 			}); 	require("subpackages/scripts/game.js");
 	